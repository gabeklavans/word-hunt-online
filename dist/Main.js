var qn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function bg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function yh(r,i,e){return e={path:i,exports:{},require:function(d,t){return m2(d,t??e.path)}},r(e,e.exports),e.exports}function m2(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var x2=yh(function(r,i){(function(d,t){r.exports=t()})(qn,function(){return function(e){var d={};function t(n){if(d[n])return d[n].exports;var u=d[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=e,t.c=d,t.d=function(n,u,s){t.o(n,u)||Object.defineProperty(n,u,{enumerable:!0,get:s})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,u){if(u&1&&(n=t(n)),u&8||u&4&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),u&2&&typeof n!="string")for(var o in n)t.d(s,o,function(h){return n[h]}.bind(null,o));return s},t.n=function(n){var u=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(u,"a",u),u},t.o=function(n,u){return Object.prototype.hasOwnProperty.call(n,u)},t.p="",t(t.s=1528)}([function(e,d){function t(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}function n(a,l,c){var f=c?a[l]:Object.getOwnPropertyDescriptor(a,l);return!c&&f.value&&typeof f.value=="object"&&(f=f.value),f&&t(f)?(typeof f.enumerable=="undefined"&&(f.enumerable=!0),typeof f.configurable=="undefined"&&(f.configurable=!0),f):!1}function u(a,l){var c=Object.getOwnPropertyDescriptor(a,l);return c?(c.value&&typeof c.value=="object"&&(c=c.value),c.configurable===!1):!1}function s(a,l,c,f){for(var v in l)if(!!l.hasOwnProperty(v)){var p=n(l,v,c);if(p!==!1){var g=f||a;if(u(g.prototype,v)){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+v+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(a.prototype,v,p)}else a.prototype[v]=l[v]}}function o(a,l){if(!!l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++)s(a,l[c].prototype||l[c])}}function h(a){a||(a={});var l,c;if(a.initialize){if(typeof a.initialize!="function")throw new Error("initialize must be a function");l=a.initialize,delete a.initialize}else if(a.Extends){var f=a.Extends;l=function(){f.apply(this,arguments)}}else l=function(){};a.Extends?(l.prototype=Object.create(a.Extends.prototype),l.prototype.constructor=l,c=a.Extends,delete a.Extends):l.prototype.constructor=l;var v=null;return a.Mixins&&(v=a.Mixins,delete a.Mixins),o(l,v),s(l,a,!0,c),l}h.extend=s,h.mixin=o,h.ignoreFinals=!1,e.exports=h},function(e,d){var t=function(){};e.exports=t},function(e,d){var t=function(n,u,s){var o=typeof n;return!n||o==="number"||o==="string"?s:n.hasOwnProperty(u)&&n[u]!==void 0?n[u]:s};e.exports=t},function(e,d,t){var n=t(0),u=t(124),s=new n({initialize:function(h,a){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(a===void 0&&(a=h),this.x=h||0,this.y=a||0)},clone:function(){return new s(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,h){return h===void 0&&(h=o),this.x=o,this.y=h,this},setTo:function(o,h){return this.set(o,h)},setToPolar:function(o,h){return h==null&&(h=1),this.x=Math.cos(o)*h,this.y=Math.sin(o)*h,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,h){return u(this.x,o.x,h)&&u(this.y,o.y,h)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var h=o.x-this.x,a=o.y-this.y;return Math.sqrt(h*h+a*a)},distanceSq:function(o){var h=o.x-this.x,a=o.y-this.y;return h*h+a*a},length:function(){var o=this.x,h=this.y;return Math.sqrt(o*o+h*h)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,h=this.y;return o*o+h*h},normalize:function(){var o=this.x,h=this.y,a=o*o+h*h;return a>0&&(a=1/Math.sqrt(a),this.x=o*a,this.y=h*a),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,h){h===void 0&&(h=0);var a=this.x,l=this.y;return this.x=a+h*(o.x-a),this.y=l+h*(o.y-l),this},transformMat3:function(o){var h=this.x,a=this.y,l=o.val;return this.x=l[0]*h+l[3]*a+l[6],this.y=l[1]*h+l[4]*a+l[7],this},transformMat4:function(o){var h=this.x,a=this.y,l=o.val;return this.x=l[0]*h+l[4]*a+l[12],this.y=l[1]*h+l[5]*a+l[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var h=this.length();return h&&h>o&&this.scale(o/h),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var h=Math.cos(o),a=Math.sin(o);return this.set(h*this.x-a*this.y,a*this.x+h*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),e.exports=s},function(e,d,t){var n=t(0),u=t(56),s=new n({initialize:function(h,a){h===void 0&&(h=0),a===void 0&&(a=h),this.type=u.POINT,this.x=h,this.y=a},setTo:function(o,h){return o===void 0&&(o=0),h===void 0&&(h=o),this.x=o,this.y=h,this}});e.exports=s},function(e,d,t){var n=t(0),u=t(24),s=t(20),o=new n({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(h,a){o.prototype.hasOwnProperty(h)||(o.prototype[h]=a)},o.remove=function(h){o.prototype.hasOwnProperty(h)&&delete o.prototype[h]},u.register("GameObjectFactory",o,"add"),e.exports=o},function(e,d){var t=function(n,u,s){if(!n||typeof n=="number")return s;if(n.hasOwnProperty(u))return n[u];if(u.indexOf(".")!==-1){for(var o=u.split("."),h=n,a=s,l=0;l<o.length;l++)if(h.hasOwnProperty(o[l]))a=h[o[l]],h=h[o[l]];else{a=s;break}return a}else return s};e.exports=t},function(e,d){var t=function(n){if(typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}return!0};e.exports=t},function(e,d){var t={},n={install:function(u){for(var s in t)u[s]=t[s]},register:function(u,s){t[u]=s},destroy:function(){t={}}};e.exports=n},function(e,d,t){var n=Object.prototype.hasOwnProperty,u="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(u=!1));function o(c,f,v){this.fn=c,this.context=f,this.once=v||!1}function h(c,f,v,p,g){if(typeof v!="function")throw new TypeError("The listener must be a function");var m=new o(v,p||c,g),x=u?u+f:f;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function a(c,f){--c._eventsCount==0?c._events=new s:delete c._events[f]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],v,p;if(this._eventsCount===0)return f;for(p in v=this._events)n.call(v,p)&&f.push(u?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(v)):f},l.prototype.listeners=function(f){var v=u?u+f:f,p=this._events[v];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},l.prototype.listenerCount=function(f){var v=u?u+f:f,p=this._events[v];return p?p.fn?1:p.length:0},l.prototype.emit=function(f,v,p,g,m,x){var y=u?u+f:f;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(f,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,v),!0;case 3:return T.fn.call(T.context,v,p),!0;case 4:return T.fn.call(T.context,v,p,g),!0;case 5:return T.fn.call(T.context,v,p,g,m),!0;case 6:return T.fn.call(T.context,v,p,g,m,x),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var M=T.length,R;for(E=0;E<M;E++)switch(T[E].once&&this.removeListener(f,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,v);break;case 3:T[E].fn.call(T[E].context,v,p);break;case 4:T[E].fn.call(T[E].context,v,p,g);break;default:if(!S)for(R=1,S=new Array(C-1);R<C;R++)S[R-1]=arguments[R];T[E].fn.apply(T[E].context,S)}}return!0},l.prototype.on=function(f,v,p){return h(this,f,v,p,!1)},l.prototype.once=function(f,v,p){return h(this,f,v,p,!0)},l.prototype.removeListener=function(f,v,p,g){var m=u?u+f:f;if(!this._events[m])return this;if(!v)return a(this,m),this;var x=this._events[m];if(x.fn)x.fn===v&&(!g||x.once)&&(!p||x.context===p)&&a(this,m);else{for(var y=0,T=[],C=x.length;y<C;y++)(x[y].fn!==v||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:a(this,m)}return this},l.prototype.removeAllListeners=function(f){var v;return f?(v=u?u+f:f,this._events[v]&&a(this,v)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=u,l.EventEmitter=l,e.exports=l},function(e,d,t){var n=t(0),u=t(57),s=t(171),o=t(306),h=t(56),a=t(47),l=t(174),c=new n({initialize:function(v,p,g,m){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=h.RECTANGLE,this.x=v,this.y=p,this.width=g,this.height=m},contains:function(f,v){return u(this,f,v)},getPoint:function(f,v){return s(this,f,v)},getPoints:function(f,v,p){return o(this,f,v,p)},getRandomPoint:function(f){return l(this,f)},setTo:function(f,v,p,g){return this.x=f,this.y=v,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(f,v){return v===void 0&&(v=f),this.x=f,this.y=v,this},setSize:function(f,v){return v===void 0&&(v=f),this.width=f,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(f){return f===void 0&&(f=new a),f.setTo(this.x,this.y,this.right,this.y),f},getLineB:function(f){return f===void 0&&(f=new a),f.setTo(this.right,this.y,this.right,this.bottom),f},getLineC:function(f){return f===void 0&&(f=new a),f.setTo(this.right,this.bottom,this.x,this.bottom),f},getLineD:function(f){return f===void 0&&(f=new a),f.setTo(this.x,this.bottom,this.x,this.y),f},left:{get:function(){return this.x},set:function(f){f>=this.right?this.width=0:this.width=this.right-f,this.x=f}},right:{get:function(){return this.x+this.width},set:function(f){f<=this.x?this.width=0:this.width=f-this.x}},top:{get:function(){return this.y},set:function(f){f>=this.bottom?this.height=0:this.height=this.bottom-f,this.y=f}},bottom:{get:function(){return this.y+this.height},set:function(f){f<=this.y?this.height=0:this.height=f-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});e.exports=c},function(e,d,t){e.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(e,d){function t(n){for(var u="",s=0;s<n;++s)s>0&&(u+=`
else `),s<n-1&&(u+="if(test == "+s+".0){}");return u}e.exports={getTintFromFloats:function(n,u,s,o){var h=(n*255|0)&255,a=(u*255|0)&255,l=(s*255|0)&255,c=(o*255|0)&255;return(c<<24|h<<16|a<<8|l)>>>0},getTintAppendFloatAlpha:function(n,u){var s=(u*255|0)&255;return(s<<24|n)>>>0},getTintAppendFloatAlphaAndSwap:function(n,u){var s=(n>>16|0)&255,o=(n>>8|0)&255,h=(n|0)&255,a=(u*255|0)&255;return(a<<24|h<<16|o<<8|s)>>>0},getFloatsFromUintRGB:function(n){var u=(n>>16|0)&255,s=(n>>8|0)&255,o=(n|0)&255;return[u/255,s/255,o/255]},checkShaderMax:function(n,u){(!u||u===-1)&&(u=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));for(var s=n.createShader(n.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var h=o.replace(/%forloop%/gi,t(u));if(n.shaderSource(s,h),n.compileShader(s),!n.getShaderParameter(s,n.COMPILE_STATUS))u=u/2|0;else break}return u},parseFragmentShaderMaxTextures:function(n,u){if(!n)return"";for(var s="",o=0;o<u;o++)o>0&&(s+=`
	else `),o<u-1&&(s+="if (outTexId < "+o+".5)"),s+=`
	{`,s+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",s+=`
	}`;return n=n.replace(/%count%/gi,u.toString()),n.replace(/%forloop%/gi,s)}}},function(e,d,t){var n=t(193),u=t(6),s=function(o,h,a){var l=u(o,h,null);if(l===null)return a;if(Array.isArray(l))return n.RND.pick(l);if(typeof l=="object"){if(l.hasOwnProperty("randInt"))return n.RND.integerInRange(l.randInt[0],l.randInt[1]);if(l.hasOwnProperty("randFloat"))return n.RND.realInRange(l.randFloat[0],l.randFloat[1])}else if(typeof l=="function")return l(h);return l};e.exports=s},function(e,d){var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=t},function(e,d,t){var n=t(0),u=t(176),s=t(101),o=t(9),h=t(75),a=t(20),l=new n({Extends:o,initialize:function(f,v){o.call(this),this.scene=f,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),f.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(c,f){return this.data||(this.data=new s(this)),this.data.set(c,f),this},incData:function(c,f){return this.data||(this.data=new s(this)),this.data.inc(c,f),this},toggleData:function(c){return this.data||(this.data=new s(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new s(this)),this.data.get(c)},setInteractive:function(c,f,v){return this.scene.sys.input.enable(this,c,f,v),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(c){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,f=this.parentContainer,v=[];f&&(v.unshift(f.getIndex(c)),c=f,f.parentContainer);)f=f.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(c)):v.unshift(this.scene.sys.displayList.getIndex(c)),v},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),c.events.emit(a.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(a.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,e.exports=l},function(e,d,t){var n=t(0),u=t(24),s=t(20),o=new n({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(h,a){o.prototype.hasOwnProperty(h)||(o.prototype[h]=a)},o.remove=function(h){o.prototype.hasOwnProperty(h)&&delete o.prototype[h]},u.register("GameObjectCreator",o,"make"),e.exports=o},function(e,d,t){var n=t(7),u=function(){var s,o,h,a,l,c,f=arguments[0]||{},v=1,p=arguments.length,g=!1;for(typeof f=="boolean"&&(g=f,f=arguments[1]||{},v=2),p===v&&(f=this,--v);v<p;v++)if((s=arguments[v])!=null)for(o in s)h=f[o],a=s[o],f!==a&&(g&&a&&(n(a)||(l=Array.isArray(a)))?(l?(l=!1,c=h&&Array.isArray(h)?h:[]):c=h&&n(h)?h:{},f[o]=u(g,c,a)):a!==void 0&&(f[o]=a));return f};e.exports=u},function(e,d){var t=function(n,u,s){return Math.max(u,Math.min(s,n))};e.exports=t},function(e,d,t){var n=t(25),u=new n,s=new n,o=new n,h={camera:u,sprite:s,calc:o},a=function(l,c,f){var v=u,p=s,g=o;return p.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),v.copyFrom(c.matrix),f?(v.multiplyWithOffset(f,-c.scrollX*l.scrollFactorX,-c.scrollY*l.scrollFactorY),p.e=l.x,p.f=l.y):(p.e-=c.scrollX*l.scrollFactorX,p.f-=c.scrollY*l.scrollFactorY),v.multiply(p,g),h};e.exports=a},function(e,d,t){e.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(e,d){var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=t},function(e,d,t){e.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(e,d,t){var n=t(0),u=t(21),s=t(95),o=t(2),h=t(155),a=t(240),l=t(517),c=t(156),f=new n({initialize:function(p,g){this.loader=p,this.cache=o(g,"cache",!1),this.type=o(g,"type",!1),this.key=o(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=o(g,"url");x===void 0?x=p.path+m+"."+o(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=c(o(g,"responseType",void 0)),o(g,"xhrSettings",!1)&&(this.xhrSettings=a(this.xhrSettings,o(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(g,"config",{}),this.multiFile,this.linkFile},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(v,p){var g=v.responseURL&&(v.responseURL.indexOf("file://")===0||v.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;v.readyState===4&&v.status>=400&&v.status<=599&&(x=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(v){v===void 0&&(v=this.data);var p=this.key,g=this.type;this.loader.emit(s.FILE_COMPLETE,p,g,v),this.loader.emit(s.FILE_KEY_COMPLETE+g+"-"+p,p,g,v),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});f.createObjectURL=function(v,p,g){if(typeof URL=="function")v.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=v.onerror,m.readAsDataURL(p)}},f.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},e.exports=f},function(e,d){var t={},n={},u={};u.register=function(s,o,h,a){a===void 0&&(a=!1),t[s]={plugin:o,mapping:h,custom:a}},u.registerCustom=function(s,o,h,a){n[s]={plugin:o,mapping:h,data:a}},u.hasCore=function(s){return t.hasOwnProperty(s)},u.hasCustom=function(s){return n.hasOwnProperty(s)},u.getCore=function(s){return t[s]},u.getCustom=function(s){return n[s]},u.getCustomClass=function(s){return n.hasOwnProperty(s)?n[s].plugin:null},u.remove=function(s){t.hasOwnProperty(s)&&delete t[s]},u.removeCustom=function(s){n.hasOwnProperty(s)&&delete n[s]},u.destroyCorePlugins=function(){for(var s in t)t.hasOwnProperty(s)&&delete t[s]},u.destroyCustomPlugins=function(){for(var s in n)n.hasOwnProperty(s)&&delete n[s]},e.exports=u},function(e,d,t){var n=t(0),u=t(14),s=t(3),o=new n({initialize:function(a,l,c,f,v,p){a===void 0&&(a=1),l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=1),v===void 0&&(v=0),p===void 0&&(p=0),this.matrix=new Float32Array([a,l,c,f,v,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,a=h[0],l=h[1],c=h[2],f=h[3];return a||l?l>0?Math.acos(a/this.scaleX):-Math.acos(a/this.scaleX):c||f?u.TAU-(f>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,a){var l=this.matrix;return l[4]=l[0]*h+l[2]*a+l[4],l[5]=l[1]*h+l[3]*a+l[5],this},scale:function(h,a){var l=this.matrix;return l[0]*=h,l[1]*=h,l[2]*=a,l[3]*=a,this},rotate:function(h){var a=Math.sin(h),l=Math.cos(h),c=this.matrix,f=c[0],v=c[1],p=c[2],g=c[3];return c[0]=f*l+p*a,c[1]=v*l+g*a,c[2]=f*-a+p*l,c[3]=v*-a+g*l,this},multiply:function(h,a){var l=this.matrix,c=h.matrix,f=l[0],v=l[1],p=l[2],g=l[3],m=l[4],x=l[5],y=c[0],T=c[1],C=c[2],S=c[3],E=c[4],M=c[5],R=a===void 0?this:a;return R.a=y*f+T*p,R.b=y*v+T*g,R.c=C*f+S*p,R.d=C*v+S*g,R.e=E*f+M*p+m,R.f=E*v+M*g+x,R},multiplyWithOffset:function(h,a,l){var c=this.matrix,f=h.matrix,v=c[0],p=c[1],g=c[2],m=c[3],x=c[4],y=c[5],T=a*v+l*g+x,C=a*p+l*m+y,S=f[0],E=f[1],M=f[2],R=f[3],L=f[4],O=f[5];return c[0]=S*v+E*g,c[1]=S*p+E*m,c[2]=M*v+R*g,c[3]=M*p+R*m,c[4]=L*v+O*g+T,c[5]=L*p+O*m+C,this},transform:function(h,a,l,c,f,v){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5];return p[0]=h*g+a*x,p[1]=h*m+a*y,p[2]=l*g+c*x,p[3]=l*m+c*y,p[4]=f*g+v*x+T,p[5]=f*m+v*y+C,this},transformPoint:function(h,a,l){l===void 0&&(l={x:0,y:0});var c=this.matrix,f=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5];return l.x=h*f+a*p+m,l.y=h*v+a*g+x,l},invert:function(){var h=this.matrix,a=h[0],l=h[1],c=h[2],f=h[3],v=h[4],p=h[5],g=a*f-l*c;return h[0]=f/g,h[1]=-l/g,h[2]=-c/g,h[3]=a/g,h[4]=(c*p-f*v)/g,h[5]=-(a*p-l*v)/g,this},copyFrom:function(h){var a=this.matrix;return a[0]=h.a,a[1]=h.b,a[2]=h.c,a[3]=h.d,a[4]=h.e,a[5]=h.f,this},copyFromArray:function(h){var a=this.matrix;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],this},copyToContext:function(h){var a=this.matrix;return h.transform(a[0],a[1],a[2],a[3],a[4],a[5]),h},setToContext:function(h){var a=this.matrix;return h.setTransform(a[0],a[1],a[2],a[3],a[4],a[5]),h},copyToArray:function(h){var a=this.matrix;return h===void 0?h=[a[0],a[1],a[2],a[3],a[4],a[5]]:(h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5]),h},setTransform:function(h,a,l,c,f,v){var p=this.matrix;return p[0]=h,p[1]=a,p[2]=l,p[3]=c,p[4]=f,p[5]=v,this},decomposeMatrix:function(){var h=this.decomposedMatrix,a=this.matrix,l=a[0],c=a[1],f=a[2],v=a[3],p=l*v-c*f;if(h.translateX=a[4],h.translateY=a[5],l||c){var g=Math.sqrt(l*l+c*c);h.rotation=c>0?Math.acos(l/g):-Math.acos(l/g),h.scaleX=g,h.scaleY=p/g}else if(f||v){var m=Math.sqrt(f*f+v*v);h.rotation=Math.PI*.5-(v>0?Math.acos(-f/m):-Math.acos(f/m)),h.scaleX=p/m,h.scaleY=m}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,a,l,c,f){var v=this.matrix,p=Math.sin(l),g=Math.cos(l);return v[4]=h,v[5]=a,v[0]=g*c,v[1]=p*c,v[2]=-p*f,v[3]=g*f,this},applyInverse:function(h,a,l){l===void 0&&(l=new s);var c=this.matrix,f=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5],y=1/(f*g+p*-v);return l.x=g*y*h+-p*y*a+(x*p-m*g)*y,l.y=f*y*a+-v*y*h+(-x*f+m*v)*y,l},getX:function(h,a){return h*this.a+a*this.c+this.e},getY:function(h,a){return h*this.b+a*this.d+this.f},getXRound:function(h,a,l){var c=this.getX(h,a);return l&&(c=Math.round(c)),c},getYRound:function(h,a,l){var c=this.getY(h,a);return l&&(c=Math.round(c)),c},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=o},function(e,d,t){var n=t(2),u=function(s,o,h,a,l,c){s===void 0&&(s=0),o===void 0&&(o=0),h===void 0&&(h=c.width),a===void 0&&(a=c.height),l||(l={});var f=n(l,"isNotEmpty",!1),v=n(l,"isColliding",!1),p=n(l,"hasInterestingFace",!1);s<0&&(h+=s,s=0),o<0&&(a+=o,o=0),s+h>c.width&&(h=Math.max(c.width-s,0)),o+a>c.height&&(a=Math.max(c.height-o,0));for(var g=[],m=o;m<o+a;m++)for(var x=s;x<s+h;x++){var y=c.data[m][x];if(y!==null){if(f&&y.index===-1||v&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=u},function(e,d){var t=function(n,u,s,o,h,a){o===void 0&&(o=0),h===void 0&&(h=0),a===void 0&&(a=1);var l,c=0,f=n.length;if(a===1)for(l=h;l<f;l++)n[l][u]=s+c*o,c++;else for(l=h;l>=0;l--)n[l][u]=s+c*o,c++;return n};e.exports=t},function(e,d,t){var n=t(35),u=t(13),s=function(o,h,a){h.x=u(a,"x",0),h.y=u(a,"y",0),h.depth=u(a,"depth",0),h.flipX=u(a,"flipX",!1),h.flipY=u(a,"flipY",!1);var l=u(a,"scale",null);typeof l=="number"?h.setScale(l):l!==null&&(h.scaleX=u(l,"x",1),h.scaleY=u(l,"y",1));var c=u(a,"scrollFactor",null);typeof c=="number"?h.setScrollFactor(c):c!==null&&(h.scrollFactorX=u(c,"x",1),h.scrollFactorY=u(c,"y",1)),h.rotation=u(a,"rotation",0);var f=u(a,"angle",null);f!==null&&(h.angle=f),h.alpha=u(a,"alpha",1);var v=u(a,"origin",null);if(typeof v=="number")h.setOrigin(v);else if(v!==null){var p=u(v,"x",.5),g=u(v,"y",.5);h.setOrigin(p,g)}h.blendMode=u(a,"blendMode",n.NORMAL),h.visible=u(a,"visible",!0);var m=u(a,"add",!0);return m&&o.sys.displayList.add(h),h.preUpdate&&o.sys.updateList.add(h),h};e.exports=s},function(e,d){e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,d,t){var n=t(19),u=function(s,o,h,a,l){var c=a.alpha*h.alpha;if(c<=0)return!1;var f=n(h,a,l).calc;return o.globalCompositeOperation=s.blendModes[h.blendMode],o.globalAlpha=c,o.save(),f.setToContext(o),o.imageSmoothingEnabled=!(!s.antialias||h.frame&&h.frame.source.scaleMode),!0};e.exports=u},function(e,d,t){var n=t(33),u=t(192),s=[],o=!1,h=function(){var a=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=n.CANVAS),E===void 0&&(E=!1);var M,R=f(S);return R===null?(R={parent:y,canvas:document.createElement("canvas"),type:S},S===n.CANVAS&&s.push(R),M=R.canvas):(R.parent=y,M=R.canvas),E&&(R.parent=M),M.width=T,M.height=C,o&&S===n.CANVAS&&u.disable(M.getContext("2d")),M},l=function(y,T,C){return a(y,T,C,n.CANVAS)},c=function(y,T,C){return a(y,T,C,n.WEBGL)},f=function(y){if(y===void 0&&(y=n.CANVAS),y===n.WEBGL)return null;for(var T=0;T<s.length;T++){var C=s[T];if(!C.parent&&C.type===y)return C}return null},v=function(y){var T=y instanceof HTMLCanvasElement;s.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},p=function(){var y=0;return s.forEach(function(T){T.parent&&y++}),y},g=function(){return s.length-p()},m=function(){o=!0},x=function(){o=!1};return{create2D:l,create:a,createWebGL:c,disableSmoothing:m,enableSmoothing:x,first:f,free:g,pool:s,remove:v,total:p}};e.exports=h()},function(e,d){var t={};e.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(u,s){var o,h;typeof s=="boolean"?(o=2,h=s):(o=1,h=!0);for(var a=o;a<arguments.length;a++){var l=arguments[a];if(l)for(var c in l)h&&l[c]&&l[c].constructor===Object&&(!u[c]||u[c].constructor===Object)?(u[c]=u[c]||{},t.extend(u[c],h,l[c])):u[c]=l[c]}return u},t.clone=function(u,s){return t.extend({},s,u)},t.keys=function(u){if(Object.keys)return Object.keys(u);var s=[];for(var o in u)s.push(o);return s},t.values=function(u){var s=[];if(Object.keys){for(var o=Object.keys(u),h=0;h<o.length;h++)s.push(u[o[h]]);return s}for(var a in u)s.push(u[a]);return s},t.get=function(u,s,o,h){s=s.split(".").slice(o,h);for(var a=0;a<s.length;a+=1)u=u[s[a]];return u},t.set=function(u,s,o,h,a){var l=s.split(".").slice(h,a);return t.get(u,s,0,-1)[l[l.length-1]]=o,o},t.shuffle=function(u){for(var s=u.length-1;s>0;s--){var o=Math.floor(t.random()*(s+1)),h=u[s];u[s]=u[o],u[o]=h}return u},t.choose=function(u){return u[Math.floor(t.random()*u.length)]},t.isElement=function(u){return typeof HTMLElement!="undefined"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},t.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},t.isFunction=function(u){return typeof u=="function"},t.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},t.isString=function(u){return Object.prototype.toString.call(u)==="[object String]"},t.clamp=function(u,s,o){return u<s?s:u>o?o:u},t.sign=function(u){return u<0?-1:1},t.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(u,s){return u=typeof u!="undefined"?u:0,s=typeof s!="undefined"?s:1,u+n()*(s-u)};var n=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(u,s){if(u.indexOf)return u.indexOf(s);for(var o=0;o<u.length;o++)if(u[o]===s)return o;return-1},t.map=function(u,s){if(u.map)return u.map(s);for(var o=[],h=0;h<u.length;h+=1)o.push(s(u[h]));return o},t.topologicalSort=function(u){var s=[],o=[],h=[];for(var a in u)!o[a]&&!h[a]&&t._topologicalSort(a,o,h,u,s);return s},t._topologicalSort=function(u,s,o,h,a){var l=h[u]||[];o[u]=!0;for(var c=0;c<l.length;c+=1){var f=l[c];o[f]||s[f]||t._topologicalSort(f,s,o,h,a)}o[u]=!1,s[u]=!0,a.push(u)},t.chain=function(){for(var u=[],s=0;s<arguments.length;s+=1){var o=arguments[s];o._chained?u.push.apply(u,o._chained):u.push(o)}var h=function(){for(var a,l=new Array(arguments.length),c=0,f=arguments.length;c<f;c++)l[c]=arguments[c];for(c=0;c<u.length;c+=1){var v=u[c].apply(a,l);typeof v!="undefined"&&(a=v)}return a};return h._chained=u,h},t.chainPathBefore=function(u,s,o){return t.set(u,s,t.chain(o,t.get(u,s)))},t.chainPathAfter=function(u,s,o){return t.set(u,s,t.chain(t.get(u,s),o))}}()},function(e,d,t){var n={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=n},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(47),h=new n({Extends:s,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function(l,c,f){c===void 0&&(c="Shape"),s.call(this,l,c),this.geom=f,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(a,l){return l===void 0&&(l=1),a===void 0?this.isFilled=!1:(this.fillColor=a,this.fillAlpha=l,this.isFilled=!0),this},setStrokeStyle:function(a,l,c){return c===void 0&&(c=1),a===void 0?this.isStroked=!1:(this.lineWidth=a,this.strokeColor=l,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(a){return this.closePath=a,this},setSize:function(a,l){return this.width=a,this.height=l,this},setDisplaySize:function(a,l){return this.displayWidth=a,this.displayHeight=l,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}}});e.exports=h},function(e,d){e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,d,t){var n=t(14),u=function(s){return s*n.DEG_TO_RAD};e.exports=u},function(e,d,t){e.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(e,d,t){var n=t(0),u=t(103),s=t(328),o=t(188),h=t(329),a=new n({initialize:function(c,f,v,p){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,f,v,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(l,c,f,v,p){return v===void 0&&(v=255),p===void 0&&(p=!0),this._locked=!0,this.red=l,this.green=c,this.blue=f,this.alpha=v,this._locked=!1,this.update(p)},setGLTo:function(l,c,f,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=l,this.greenGL=c,this.blueGL=f,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(l){return this._locked=!0,this.red=l.r,this.green=l.g,this.blue=l.b,l.hasOwnProperty("a")&&(this.alpha=l.a),this._locked=!1,this.update(!0)},setFromHSV:function(l,c,f){return o(l,c,f,this)},update:function(l){if(l===void 0&&(l=!1),this._locked)return this;var c=this.r,f=this.g,v=this.b,p=this.a;return this._color=u(c,f,v),this._color32=s(c,f,v,p),this._rgba="rgba("+c+","+f+","+v+","+p/255+")",l&&h(c,f,v,this),this},updateHSV:function(){var l=this.r,c=this.g,f=this.b;return h(l,c,f,this),this},clone:function(){return new a(this.r,this.g,this.b,this.a)},gray:function(l){return this.setTo(l,l,l)},random:function(l,c){l===void 0&&(l=0),c===void 0&&(c=255);var f=Math.floor(l+Math.random()*(c-l)),v=Math.floor(l+Math.random()*(c-l)),p=Math.floor(l+Math.random()*(c-l));return this.setTo(f,v,p)},randomGray:function(l,c){l===void 0&&(l=0),c===void 0&&(c=255);var f=Math.floor(l+Math.random()*(c-l));return this.setTo(f,f,f)},saturate:function(l){return this.s+=l/100,this},desaturate:function(l){return this.s-=l/100,this},lighten:function(l){return this.v+=l/100,this},darken:function(l){return this.v-=l/100,this},brighten:function(l){var c=this.r,f=this.g,v=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(l/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(l/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(l/100)))),this.setTo(c,f,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(l){this.gl[0]=Math.min(Math.abs(l),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(l){this.gl[1]=Math.min(Math.abs(l),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(l){this.gl[2]=Math.min(Math.abs(l),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(l){this.gl[3]=Math.min(Math.abs(l),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(l){l=Math.floor(Math.abs(l)),this.r=Math.min(l,255),this.gl[0]=l/255,this.update(!0)}},green:{get:function(){return this.g},set:function(l){l=Math.floor(Math.abs(l)),this.g=Math.min(l,255),this.gl[1]=l/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(l){l=Math.floor(Math.abs(l)),this.b=Math.min(l,255),this.gl[2]=l/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(l){l=Math.floor(Math.abs(l)),this.a=Math.min(l,255),this.gl[3]=l/255,this.update()}},h:{get:function(){return this._h},set:function(l){this._h=l,o(l,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(l){this._s=l,o(this._h,l,this._v,this)}},v:{get:function(){return this._v},set:function(l){this._v=l,o(this._h,this._s,l,this)}}});e.exports=a},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=h||0,this.z=a||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(s){return this.x=Math.min(this.x,s.x),this.y=Math.min(this.y,s.y),this.z=Math.min(this.z,s.z),this},max:function(s){return this.x=Math.max(this.x,s.x),this.y=Math.max(this.y,s.y),this.z=Math.max(this.z,s.z),this},clone:function(){return new u(this.x,this.y,this.z)},addVectors:function(s,o){return this.x=s.x+o.x,this.y=s.y+o.y,this.z=s.z+o.z,this},crossVectors:function(s,o){var h=s.x,a=s.y,l=s.z,c=o.x,f=o.y,v=o.z;return this.x=a*v-l*f,this.y=l*c-h*v,this.z=h*f-a*c,this},equals:function(s){return this.x===s.x&&this.y===s.y&&this.z===s.z},copy:function(s){return this.x=s.x,this.y=s.y,this.z=s.z||0,this},set:function(s,o,h){return typeof s=="object"?(this.x=s.x||0,this.y=s.y||0,this.z=s.z||0):(this.x=s||0,this.y=o||0,this.z=h||0),this},setFromMatrixPosition:function(s){return this.fromArray(s.val,12)},setFromMatrixColumn:function(s,o){return this.fromArray(s.val,o*4)},fromArray:function(s,o){return o===void 0&&(o=0),this.x=s[o],this.y=s[o+1],this.z=s[o+2],this},add:function(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z||0,this},addScalar:function(s){return this.x+=s,this.y+=s,this.z+=s,this},addScale:function(s,o){return this.x+=s.x*o,this.y+=s.y*o,this.z+=s.z*o||0,this},subtract:function(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z||0,this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z||1,this},scale:function(s){return isFinite(s)?(this.x*=s,this.y*=s,this.z*=s):(this.x=0,this.y=0,this.z=0),this},divide:function(s){return this.x/=s.x,this.y/=s.y,this.z/=s.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(s){var o=s.x-this.x,h=s.y-this.y,a=s.z-this.z||0;return Math.sqrt(o*o+h*h+a*a)},distanceSq:function(s){var o=s.x-this.x,h=s.y-this.y,a=s.z-this.z||0;return o*o+h*h+a*a},length:function(){var s=this.x,o=this.y,h=this.z;return Math.sqrt(s*s+o*o+h*h)},lengthSq:function(){var s=this.x,o=this.y,h=this.z;return s*s+o*o+h*h},normalize:function(){var s=this.x,o=this.y,h=this.z,a=s*s+o*o+h*h;return a>0&&(a=1/Math.sqrt(a),this.x=s*a,this.y=o*a,this.z=h*a),this},dot:function(s){return this.x*s.x+this.y*s.y+this.z*s.z},cross:function(s){var o=this.x,h=this.y,a=this.z,l=s.x,c=s.y,f=s.z;return this.x=h*f-a*c,this.y=a*l-o*f,this.z=o*c-h*l,this},lerp:function(s,o){o===void 0&&(o=0);var h=this.x,a=this.y,l=this.z;return this.x=h+o*(s.x-h),this.y=a+o*(s.y-a),this.z=l+o*(s.z-l),this},applyMatrix3:function(s){var o=this.x,h=this.y,a=this.z,l=s.val;return this.x=l[0]*o+l[3]*h+l[6]*a,this.y=l[1]*o+l[4]*h+l[7]*a,this.z=l[2]*o+l[5]*h+l[8]*a,this},applyMatrix4:function(s){var o=this.x,h=this.y,a=this.z,l=s.val,c=1/(l[3]*o+l[7]*h+l[11]*a+l[15]);return this.x=(l[0]*o+l[4]*h+l[8]*a+l[12])*c,this.y=(l[1]*o+l[5]*h+l[9]*a+l[13])*c,this.z=(l[2]*o+l[6]*h+l[10]*a+l[14])*c,this},transformMat3:function(s){var o=this.x,h=this.y,a=this.z,l=s.val;return this.x=o*l[0]+h*l[3]+a*l[6],this.y=o*l[1]+h*l[4]+a*l[7],this.z=o*l[2]+h*l[5]+a*l[8],this},transformMat4:function(s){var o=this.x,h=this.y,a=this.z,l=s.val;return this.x=l[0]*o+l[4]*h+l[8]*a+l[12],this.y=l[1]*o+l[5]*h+l[9]*a+l[13],this.z=l[2]*o+l[6]*h+l[10]*a+l[14],this},transformCoordinates:function(s){var o=this.x,h=this.y,a=this.z,l=s.val,c=o*l[0]+h*l[4]+a*l[8]+l[12],f=o*l[1]+h*l[5]+a*l[9]+l[13],v=o*l[2]+h*l[6]+a*l[10]+l[14],p=o*l[3]+h*l[7]+a*l[11]+l[15];return this.x=c/p,this.y=f/p,this.z=v/p,this},transformQuat:function(s){var o=this.x,h=this.y,a=this.z,l=s.x,c=s.y,f=s.z,v=s.w,p=v*o+c*a-f*h,g=v*h+f*o-l*a,m=v*a+l*h-c*o,x=-l*o-c*h-f*a;return this.x=p*v+x*-l+g*-f-m*-c,this.y=g*v+x*-c+m*-l-p*-f,this.z=m*v+x*-f+p*-c-g*-l,this},project:function(s){var o=this.x,h=this.y,a=this.z,l=s.val,c=l[0],f=l[1],v=l[2],p=l[3],g=l[4],m=l[5],x=l[6],y=l[7],T=l[8],C=l[9],S=l[10],E=l[11],M=l[12],R=l[13],L=l[14],O=l[15],F=1/(o*p+h*y+a*E+O);return this.x=(o*c+h*g+a*T+M)*F,this.y=(o*f+h*m+a*C+R)*F,this.z=(o*v+h*x+a*S+L)*F,this},projectViewMatrix:function(s,o){return this.applyMatrix4(s).applyMatrix4(o)},unprojectViewMatrix:function(s,o){return this.applyMatrix4(s).applyMatrix4(o)},unproject:function(s,o){var h=s.x,a=s.y,l=s.z,c=s.w,f=this.x-h,v=c-this.y-1-a,p=this.z;return this.x=2*f/l-1,this.y=2*v/c-1,this.z=2*p-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});u.ZERO=new u,u.RIGHT=new u(1,0,0),u.LEFT=new u(-1,0,0),u.UP=new u(0,-1,0),u.DOWN=new u(0,1,0),u.FORWARD=new u(0,0,1),u.BACK=new u(0,0,-1),u.ONE=new u(1,1,1),e.exports=u},function(e,d){e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,d,t){var n={};e.exports=n;var u=t(64),s=t(83),o=t(165),h=t(32),a=t(84),l=t(271);(function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(f){var v={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!f.hasOwnProperty("position")&&f.hasOwnProperty("vertices")?f.position=u.centre(f.vertices):f.hasOwnProperty("vertices")||(v.vertices=u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=h.extend(v,f);return c(p,f),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},n.nextGroup=function(f){return f?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var c=function(f,v){v=v||{},n.set(f,{bounds:f.bounds||a.create(f.vertices),positionPrev:f.positionPrev||s.clone(f.position),anglePrev:f.anglePrev||f.angle,vertices:f.vertices,parts:f.parts||[f],isStatic:f.isStatic,isSleeping:f.isSleeping,parent:f.parent||f});var p=f.bounds;if(u.rotate(f.vertices,f.angle,f.position),l.rotate(f.axes,f.angle),a.update(p,f.vertices,f.velocity),n.set(f,{axes:v.axes||f.axes,area:v.area||f.area,mass:v.mass||f.mass,inertia:v.inertia||f.inertia}),f.parts.length===1){var g=f.centerOfMass,m=f.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-f.position.x)/x,g.y=-(p.min.y-f.position.y)/y,m.x=x*g.x,m.y=y*g.y}};n.set=function(f,v,p){var g;typeof v=="string"&&(g=v,v={},v[g]=p);for(g in v)if(!!Object.prototype.hasOwnProperty.call(v,g))switch(p=v[g],g){case"isStatic":n.setStatic(f,p);break;case"isSleeping":o.set(f,p);break;case"mass":n.setMass(f,p);break;case"density":n.setDensity(f,p);break;case"inertia":n.setInertia(f,p);break;case"vertices":n.setVertices(f,p);break;case"position":n.setPosition(f,p);break;case"angle":n.setAngle(f,p);break;case"velocity":n.setVelocity(f,p);break;case"angularVelocity":n.setAngularVelocity(f,p);break;case"parts":n.setParts(f,p);break;case"centre":n.setCentre(f,p);break;default:f[g]=p}},n.setStatic=function(f,v){for(var p=0;p<f.parts.length;p++){var g=f.parts[p];g.isStatic=v,v?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=Infinity,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},n.setMass=function(f,v){var p=f.inertia/(f.mass/6);f.inertia=p*(v/6),f.inverseInertia=1/f.inertia,f.mass=v,f.inverseMass=1/f.mass,f.density=f.mass/f.area},n.setDensity=function(f,v){n.setMass(f,v*f.area),f.density=v},n.setInertia=function(f,v){f.inertia=v,f.inverseInertia=1/f.inertia},n.setVertices=function(f,v){v[0].body===f?f.vertices=v:f.vertices=u.create(v,f),f.axes=l.fromVertices(f.vertices),f.area=u.area(f.vertices),n.setMass(f,f.density*f.area);var p=u.centre(f.vertices);u.translate(f.vertices,p,-1),n.setInertia(f,n._inertiaScale*u.inertia(f.vertices,f.mass)),u.translate(f.vertices,f.position),a.update(f.bounds,f.vertices,f.velocity)},n.setParts=function(f,v,p){var g;for(v=v.slice(0),f.parts.length=0,f.parts.push(f),f.parent=f,g=0;g<v.length;g++){var m=v[g];m!==f&&(m.parent=f,f.parts.push(m))}if(f.parts.length!==1){if(p=typeof p!="undefined"?p:!0,p){var x=[];for(g=0;g<v.length;g++)x=x.concat(v[g].vertices);u.clockwiseSort(x);var y=u.hull(x),T=u.centre(y);n.setVertices(f,y),u.translate(f.vertices,T)}var C=n._totalProperties(f),S=C.centre.x,E=C.centre.y,M=f.bounds,R=f.centerOfMass,L=f.centerOffset;a.update(M,f.vertices,f.velocity),R.x=-(M.min.x-S)/(M.max.x-M.min.x),R.y=-(M.min.y-E)/(M.max.y-M.min.y),L.x=S,L.y=E,f.area=C.area,f.parent=f,f.position.x=S,f.position.y=E,f.positionPrev.x=S,f.positionPrev.y=E,n.setMass(f,C.mass),n.setInertia(f,C.inertia),n.setPosition(f,C.centre)}},n.setCentre=function(f,v,p){p?(f.positionPrev.x+=v.x,f.positionPrev.y+=v.y,f.position.x+=v.x,f.position.y+=v.y):(f.positionPrev.x=v.x-(f.position.x-f.positionPrev.x),f.positionPrev.y=v.y-(f.position.y-f.positionPrev.y),f.position.x=v.x,f.position.y=v.y)},n.setPosition=function(f,v){var p=s.sub(v,f.position);f.positionPrev.x+=p.x,f.positionPrev.y+=p.y;for(var g=0;g<f.parts.length;g++){var m=f.parts[g];m.position.x+=p.x,m.position.y+=p.y,u.translate(m.vertices,p),a.update(m.bounds,m.vertices,f.velocity)}},n.setAngle=function(f,v){var p=v-f.angle;f.anglePrev+=p;for(var g=0;g<f.parts.length;g++){var m=f.parts[g];m.angle+=p,u.rotate(m.vertices,p,f.position),l.rotate(m.axes,p),a.update(m.bounds,m.vertices,f.velocity),g>0&&s.rotateAbout(m.position,p,f.position,m.position)}},n.setVelocity=function(f,v){f.positionPrev.x=f.position.x-v.x,f.positionPrev.y=f.position.y-v.y,f.velocity.x=v.x,f.velocity.y=v.y,f.speed=s.magnitude(f.velocity)},n.setAngularVelocity=function(f,v){f.anglePrev=f.angle-v,f.angularVelocity=v,f.angularSpeed=Math.abs(f.angularVelocity)},n.translate=function(f,v){n.setPosition(f,s.add(f.position,v))},n.rotate=function(f,v,p){if(!p)n.setAngle(f,f.angle+v);else{var g=Math.cos(v),m=Math.sin(v),x=f.position.x-p.x,y=f.position.y-p.y;n.setPosition(f,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),n.setAngle(f,f.angle+v)}},n.scale=function(f,v,p,g){var m=0,x=0;g=g||f.position;for(var y=0;y<f.parts.length;y++){var T=f.parts[y];T.scale.x=v,T.scale.y=p,u.scale(T.vertices,v,p,g),T.axes=l.fromVertices(T.vertices),T.area=u.area(T.vertices),n.setMass(T,f.density*T.area),u.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),n.setInertia(T,n._inertiaScale*u.inertia(T.vertices,T.mass)),u.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*v,T.position.y=g.y+(T.position.y-g.y)*p,a.update(T.bounds,T.vertices,f.velocity)}f.parts.length>1&&(f.area=m,f.isStatic||(n.setMass(f,f.density*m),n.setInertia(f,x))),f.circleRadius&&(v===p?f.circleRadius*=v:f.circleRadius=null)},n.update=function(f,v,p,g){var m=Math.pow(v*p*f.timeScale,2),x=1-f.frictionAir*p*f.timeScale,y=f.position.x-f.positionPrev.x,T=f.position.y-f.positionPrev.y;f.velocity.x=y*x*g+f.force.x/f.mass*m,f.velocity.y=T*x*g+f.force.y/f.mass*m,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.position.x+=f.velocity.x,f.position.y+=f.velocity.y,f.angularVelocity=(f.angle-f.anglePrev)*x*g+f.torque/f.inertia*m,f.anglePrev=f.angle,f.angle+=f.angularVelocity,f.speed=s.magnitude(f.velocity),f.angularSpeed=Math.abs(f.angularVelocity);for(var C=0;C<f.parts.length;C++){var S=f.parts[C];u.translate(S.vertices,f.velocity),C>0&&(S.position.x+=f.velocity.x,S.position.y+=f.velocity.y),f.angularVelocity!==0&&(u.rotate(S.vertices,f.angularVelocity,f.position),l.rotate(S.axes,f.angularVelocity),C>0&&s.rotateAbout(S.position,f.angularVelocity,f.position,S.position)),a.update(S.bounds,S.vertices,f.velocity)}},n.applyForce=function(f,v,p){f.force.x+=p.x,f.force.y+=p.y;var g={x:v.x-f.position.x,y:v.y-f.position.y};f.torque+=g.x*p.y-g.y*p.x},n._totalProperties=function(f){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=f.parts.length===1?0:1;p<f.parts.length;p++){var g=f.parts[p],m=g.mass!==Infinity?g.mass:1;v.mass+=m,v.area+=g.area,v.inertia+=g.inertia,v.centre=s.add(v.centre,s.mult(g.position,m))}return v.centre=s.div(v.centre,v.mass),v}})()},function(e,d){var t=function(n){return n.y+n.height-n.height*n.originY};e.exports=t},function(e,d){var t=function(n){return n.x-n.width*n.originX};e.exports=t},function(e,d){var t=function(n){return n.x+n.width-n.width*n.originX};e.exports=t},function(e,d){var t=function(n){return n.y-n.height*n.originY};e.exports=t},function(e,d){var t=function(n,u,s,o,h,a){o===void 0&&(o=0),h===void 0&&(h=0),a===void 0&&(a=1);var l,c=0,f=n.length;if(a===1)for(l=h;l<f;l++)n[l][u]+=s+c*o,c++;else for(l=h;l>=0;l--)n[l][u]+=s+c*o,c++;return n};e.exports=t},function(e,d,t){var n=t(0),u=t(307),s=t(172),o=t(56),h=t(173),a=t(3),l=new n({initialize:function(f,v,p,g){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=o.LINE,this.x1=f,this.y1=v,this.x2=p,this.y2=g},getPoint:function(c,f){return u(this,c,f)},getPoints:function(c,f,v){return s(this,c,f,v)},getRandomPoint:function(c){return h(this,c)},setTo:function(c,f,v,p){return c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),this.x1=c,this.y1=f,this.x2=v,this.y2=p,this},getPointA:function(c){return c===void 0&&(c=new a),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new a),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});e.exports=l},function(e,d){var t=function(n,u,s,o){var h=s||u.fillColor,a=o||u.fillAlpha,l=(h&16711680)>>>16,c=(h&65280)>>>8,f=h&255;n.fillStyle="rgba("+l+","+c+","+f+","+a+")"};e.exports=t},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l){var c=[];l.forEach(function(v){v&&c.push(v)}),this.loader=o,this.type=h,this.key=a,this.multiKeyIndex=o.multiKeyIndex++,this.files=c,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var f=0;f<c.length;f++)c[f].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(s){return this.files.push(s),s.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(s){var o=this.files.indexOf(s);o!==-1&&this.pending--},onFileFailed:function(s){var o=this.files.indexOf(s);o!==-1&&this.failed++}});e.exports=u},function(e,d){var t=function(n,u,s,o){var h=n-s,a=u-o;return Math.sqrt(h*h+a*a)};e.exports=t},function(e,d,t){e.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(e,d){var t=function(n,u){return n.y=u+n.height*n.originY,n};e.exports=t},function(e,d){var t=function(n,u){return n.x=u+n.width*n.originX,n};e.exports=t},function(e,d){var t=function(n,u){return n.x=u-n.width+n.width*n.originX,n};e.exports=t},function(e,d){var t=function(n,u){return n.y=u-n.height+n.height*n.originY,n};e.exports=t},function(e,d){var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=t},function(e,d){var t=function(n,u,s){return n.width<=0||n.height<=0?!1:n.x<=u&&n.x+n.width>=u&&n.y<=s&&n.y+n.height>=s};e.exports=t},function(e,d,t){var n=t(0),u=t(175),s=t(9),o=t(374),h=t(2),a=t(69),l=t(91),c=t(141),f=t(12),v=t(375),p=new n({Extends:s,initialize:function(m){s.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=h(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=h(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=h(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new a().identity());var T=this.renderTargets,C=h(x,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new c(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var M=h(C[g],"scale",1),R=h(C[g],"minFilter",0),L=h(C[g],"autoClear",1);T.push(new c(y,S,E,M,R,L))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var O=this.shaders,F=0;for(g=0;g<O.length;g++)O[g].vertexSize>F&&(F=O[g].vertexSize);var D=h(x,"batchSize",y.config.batchSize);this.vertexCapacity=D*6;var B=new ArrayBuffer(this.vertexCapacity*F);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var b=h(x,"vertices",null);for(b?(this.vertexViewF32.set(b),this.vertexBuffer=y.createVertexBuffer(B,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(B.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=O.length-1;g>=0;g--)O[g].rebind();this.hasBooted=!0,y.on(l.RESIZE,this.resize,this),y.on(l.PRE_RENDER,this.onPreRender,this),y.on(l.RENDER,this.onRender,this),y.on(l.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",C="fragShader",S="attributes",E=h(g,T,null),M=f.parseFragmentShaderMaxTextures(h(g,C,null),y.maxTextures),R=h(g,S,null),L=h(g,"shaders",[]),O=L.length;if(O===0)E&&M&&(this.shaders=[new v(this,"default",E,M,u(R))]);else{var F=[];for(m=0;m<O;m++){var D=L[m],B=h(D,"name","default"),b=h(D,T,E),V=f.parseFragmentShaderMaxTextures(h(D,C,M),y.maxTextures),X=h(D,S,R);b&&V&&F.push(new v(this,B,b,V,u(X)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(o.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,x.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(o.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,C,S){var E=this.vertexViewF32,M=this.vertexViewU32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++R]=g,E[++R]=m,E[++R]=x,E[++R]=y,E[++R]=T,E[++R]=C,M[++R]=S,this.vertexCount++},batchQuad:function(g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,b,V,X,K,J){J===void 0&&(J=this.currentUnit);var G=!1;return this.shouldFlush(6)&&(this.flush(),G=!0,J=this.setTexture2D(K)),this.batchVert(m,x,R,L,J,X,D),this.batchVert(y,T,R,F,J,X,b),this.batchVert(C,S,O,F,J,X,V),this.batchVert(m,x,R,L,J,X,D),this.batchVert(C,S,O,F,J,X,V),this.batchVert(E,M,O,L,J,X,B),this.onBatch(g),G},batchTri:function(g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,b,V){V===void 0&&(V=this.currentUnit);var X=!1;return this.shouldFlush(3)&&(this.flush(),X=!0,V=this.setTexture2D(b)),this.batchVert(m,x,E,M,V,B,O),this.batchVert(y,T,E,L,V,B,F),this.batchVert(C,S,R,L,V,B,D),this.onBatch(g),X},drawFillRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var M=Math.floor(g+x),R=Math.floor(m+y),L=this.setTexture2D(S),O=f.getTintAppendFloatAlphaAndSwap(T,C),F=0,D=0,B=1,b=1;E&&(D=1,b=0),this.batchQuad(null,g,m,g,R,M,R,M,m,F,D,B,b,O,O,O,O,0,S,L)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(o.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(l.RESIZE,this.resize,this),y.off(l.PRE_RENDER,this.onPreRender,this),y.off(l.RENDER,this.onRender,this),y.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,d,t){function n(w,N,z){z=z||2;var U=N&&N.length,W=U?N[0]*z:w.length,H=u(w,0,W,z,!0),Z=[];if(!H||H.next===H.prev)return Z;var q,_,nt,rt,at,vt,ut;if(U&&(H=f(w,N,H,z)),w.length>80*z){q=nt=w[0],_=rt=w[1];for(var ct=z;ct<W;ct+=z)at=w[ct],vt=w[ct+1],at<q&&(q=at),vt<_&&(_=vt),at>nt&&(nt=at),vt>rt&&(rt=vt);ut=Math.max(nt-q,rt-_),ut=ut!==0?1/ut:0}return o(H,Z,z,q,_,ut),Z}function u(w,N,z,U,W){var H,Z;if(W===G(w,N,z,U)>0)for(H=N;H<z;H+=U)Z=X(H,w[H],w[H+1],Z);else for(H=z-U;H>=N;H-=U)Z=X(H,w[H],w[H+1],Z);return Z&&R(Z,Z.next)&&(K(Z),Z=Z.next),Z}function s(w,N){if(!w)return w;N||(N=w);var z=w,U;do if(U=!1,!z.steiner&&(R(z,z.next)||M(z.prev,z,z.next)===0)){if(K(z),z=N=z.prev,z===z.next)break;U=!0}else z=z.next;while(U||z!==N);return N}function o(w,N,z,U,W,H,Z){if(!!w){!Z&&H&&x(w,U,W,H);for(var q=w,_,nt;w.prev!==w.next;){if(_=w.prev,nt=w.next,H?a(w,U,W,H):h(w)){N.push(_.i/z),N.push(w.i/z),N.push(nt.i/z),K(w),w=nt.next,q=nt.next;continue}if(w=nt,w===q){Z?Z===1?(w=l(s(w),N,z),o(w,N,z,U,W,H,2)):Z===2&&c(w,N,z,U,W,H):o(s(w),N,z,U,W,H,1);break}}}}function h(w){var N=w.prev,z=w,U=w.next;if(M(N,z,U)>=0)return!1;for(var W=w.next.next;W!==w.prev;){if(S(N.x,N.y,z.x,z.y,U.x,U.y,W.x,W.y)&&M(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function a(w,N,z,U){var W=w.prev,H=w,Z=w.next;if(M(W,H,Z)>=0)return!1;for(var q=W.x<H.x?W.x<Z.x?W.x:Z.x:H.x<Z.x?H.x:Z.x,_=W.y<H.y?W.y<Z.y?W.y:Z.y:H.y<Z.y?H.y:Z.y,nt=W.x>H.x?W.x>Z.x?W.x:Z.x:H.x>Z.x?H.x:Z.x,rt=W.y>H.y?W.y>Z.y?W.y:Z.y:H.y>Z.y?H.y:Z.y,at=T(q,_,N,z,U),vt=T(nt,rt,N,z,U),ut=w.prevZ,ct=w.nextZ;ut&&ut.z>=at&&ct&&ct.z<=vt;){if(ut!==w.prev&&ut!==w.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,ct!==w.prev&&ct!==w.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ct.x,ct.y)&&M(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;ut&&ut.z>=at;){if(ut!==w.prev&&ut!==w.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;ct&&ct.z<=vt;){if(ct!==w.prev&&ct!==w.next&&S(W.x,W.y,H.x,H.y,Z.x,Z.y,ct.x,ct.y)&&M(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function l(w,N,z){var U=w;do{var W=U.prev,H=U.next.next;!R(W,H)&&L(W,U,U.next,H)&&B(W,H)&&B(H,W)&&(N.push(W.i/z),N.push(U.i/z),N.push(H.i/z),K(U),K(U.next),U=w=H),U=U.next}while(U!==w);return s(U)}function c(w,N,z,U,W,H){var Z=w;do{for(var q=Z.next.next;q!==Z.prev;){if(Z.i!==q.i&&E(Z,q)){var _=V(Z,q);Z=s(Z,Z.next),_=s(_,_.next),o(Z,N,z,U,W,H),o(_,N,z,U,W,H);return}q=q.next}Z=Z.next}while(Z!==w)}function f(w,N,z,U){var W=[],H,Z,q,_,nt;for(H=0,Z=N.length;H<Z;H++)q=N[H]*U,_=H<Z-1?N[H+1]*U:w.length,nt=u(w,q,_,U,!1),nt===nt.next&&(nt.steiner=!0),W.push(C(nt));for(W.sort(v),H=0;H<W.length;H++)p(W[H],z),z=s(z,z.next);return z}function v(w,N){return w.x-N.x}function p(w,N){if(N=g(w,N),N){var z=V(N,w);s(N,N.next),s(z,z.next)}}function g(w,N){var z=N,U=w.x,W=w.y,H=-Infinity,Z;do{if(W<=z.y&&W>=z.next.y&&z.next.y!==z.y){var q=z.x+(W-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(q<=U&&q>H){if(H=q,q===U){if(W===z.y)return z;if(W===z.next.y)return z.next}Z=z.x<z.next.x?z:z.next}}z=z.next}while(z!==N);if(!Z)return null;if(U===H)return Z;var _=Z,nt=Z.x,rt=Z.y,at=Infinity,vt;z=Z;do U>=z.x&&z.x>=nt&&U!==z.x&&S(W<rt?U:H,W,nt,rt,W<rt?H:U,W,z.x,z.y)&&(vt=Math.abs(W-z.y)/(U-z.x),B(z,w)&&(vt<at||vt===at&&(z.x>Z.x||z.x===Z.x&&m(Z,z)))&&(Z=z,at=vt)),z=z.next;while(z!==_);return Z}function m(w,N){return M(w.prev,w,N.prev)<0&&M(N.next,w,w.next)<0}function x(w,N,z,U){var W=w;do W.z===null&&(W.z=T(W.x,W.y,N,z,U)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==w);W.prevZ.nextZ=null,W.prevZ=null,y(W)}function y(w){var N,z,U,W,H,Z,q,_,nt=1;do{for(z=w,w=null,H=null,Z=0;z;){for(Z++,U=z,q=0,N=0;N<nt&&(q++,U=U.nextZ,!!U);N++);for(_=nt;q>0||_>0&&U;)q!==0&&(_===0||!U||z.z<=U.z)?(W=z,z=z.nextZ,q--):(W=U,U=U.nextZ,_--),H?H.nextZ=W:w=W,W.prevZ=H,H=W;z=U}H.nextZ=null,nt*=2}while(Z>1);return w}function T(w,N,z,U,W){return w=32767*(w-z)*W,N=32767*(N-U)*W,w=(w|w<<8)&16711935,w=(w|w<<4)&252645135,w=(w|w<<2)&858993459,w=(w|w<<1)&1431655765,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,w|N<<1}function C(w){var N=w,z=w;do(N.x<z.x||N.x===z.x&&N.y<z.y)&&(z=N),N=N.next;while(N!==w);return z}function S(w,N,z,U,W,H,Z,q){return(W-Z)*(N-q)-(w-Z)*(H-q)>=0&&(w-Z)*(U-q)-(z-Z)*(N-q)>=0&&(z-Z)*(H-q)-(W-Z)*(U-q)>=0}function E(w,N){return w.next.i!==N.i&&w.prev.i!==N.i&&!D(w,N)&&(B(w,N)&&B(N,w)&&b(w,N)&&(M(w.prev,w,N.prev)||M(w,N.prev,N))||R(w,N)&&M(w.prev,w,w.next)>0&&M(N.prev,N,N.next)>0)}function M(w,N,z){return(N.y-w.y)*(z.x-N.x)-(N.x-w.x)*(z.y-N.y)}function R(w,N){return w.x===N.x&&w.y===N.y}function L(w,N,z,U){var W=F(M(w,N,z)),H=F(M(w,N,U)),Z=F(M(z,U,w)),q=F(M(z,U,N));return!!(W!==H&&Z!==q||W===0&&O(w,z,N)||H===0&&O(w,U,N)||Z===0&&O(z,w,U)||q===0&&O(z,N,U))}function O(w,N,z){return N.x<=Math.max(w.x,z.x)&&N.x>=Math.min(w.x,z.x)&&N.y<=Math.max(w.y,z.y)&&N.y>=Math.min(w.y,z.y)}function F(w){return w>0?1:w<0?-1:0}function D(w,N){var z=w;do{if(z.i!==w.i&&z.next.i!==w.i&&z.i!==N.i&&z.next.i!==N.i&&L(z,z.next,w,N))return!0;z=z.next}while(z!==w);return!1}function B(w,N){return M(w.prev,w,w.next)<0?M(w,N,w.next)>=0&&M(w,w.prev,N)>=0:M(w,N,w.prev)<0||M(w,w.next,N)<0}function b(w,N){var z=w,U=!1,W=(w.x+N.x)/2,H=(w.y+N.y)/2;do z.y>H!=z.next.y>H&&z.next.y!==z.y&&W<(z.next.x-z.x)*(H-z.y)/(z.next.y-z.y)+z.x&&(U=!U),z=z.next;while(z!==w);return U}function V(w,N){var z=new J(w.i,w.x,w.y),U=new J(N.i,N.x,N.y),W=w.next,H=N.prev;return w.next=N,N.prev=w,z.next=W,W.prev=z,U.next=z,z.prev=U,H.next=U,U.prev=H,U}function X(w,N,z,U){var W=new J(w,N,z);return U?(W.next=U.next,W.prev=U,U.next.prev=W,U.next=W):(W.prev=W,W.next=W),W}function K(w){w.next.prev=w.prev,w.prev.next=w.next,w.prevZ&&(w.prevZ.nextZ=w.nextZ),w.nextZ&&(w.nextZ.prevZ=w.prevZ)}function J(w,N,z){this.i=w,this.x=N,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(w,N,z,U){var W=N&&N.length,H=W?N[0]*z:w.length,Z=Math.abs(G(w,0,H,z));if(W)for(var q=0,_=N.length;q<_;q++){var nt=N[q]*z,rt=q<_-1?N[q+1]*z:w.length;Z-=Math.abs(G(w,nt,rt,z))}var at=0;for(q=0;q<U.length;q+=3){var vt=U[q]*z,ut=U[q+1]*z,ct=U[q+2]*z;at+=Math.abs((w[vt]-w[ct])*(w[ut+1]-w[vt+1])-(w[vt]-w[ut])*(w[ct+1]-w[vt+1]))}return Z===0&&at===0?0:Math.abs((at-Z)/Z)};function G(w,N,z,U){for(var W=0,H=N,Z=z-U;H<z;H+=U)W+=(w[Z]-w[H])*(w[H+1]+w[Z+1]),Z=H;return W}n.flatten=function(w){for(var N=w[0][0].length,z={vertices:[],holes:[],dimensions:N},U=0,W=0;W<w.length;W++){for(var H=0;H<w[W].length;H++)for(var Z=0;Z<N;Z++)z.vertices.push(w[W][H][Z]);W>0&&(U+=w[W-1].length,z.holes.push(U))}return z},e.exports=n},function(e,d){var t=function(n,u,s,o){var h=s||u.strokeColor,a=o||u.strokeAlpha,l=(h&16711680)>>>16,c=(h&65280)>>>8,f=h&255;n.strokeStyle="rgba("+l+","+c+","+f+","+a+")",n.lineWidth=u.lineWidth};e.exports=t},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(6),l=t(7),c=new n({Extends:s,initialize:function(v,p,g,m,x){var y="json";if(l(p)){var T=p;p=h(T,"key"),g=h(T,"url"),m=h(T,"xhrSettings"),y=h(T,"extension",y),x=h(T,"dataKey",x)}var C={type:"json",cache:v.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};s.call(this,v,C),l(g)&&(x?this.data=a(g,x):this.data=g,this.state=u.FILE_POPULATED)},onProcess:function(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var f=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var v=this.config;typeof v=="string"?this.data=a(f,v,f):this.data=f}this.onProcessComplete()}});o.register("json",function(f,v,p,g){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new c(this,f[m]));else this.addFile(new c(this,f,v,g,p));return this}),e.exports=c},function(e,d){var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=t},function(e,d,t){var n=t(158),u=t(26),s=function(o,h,a,l,c){for(var f=null,v=null,p=null,g=null,m=u(o,h,a,l,null,c),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(f=n(y.x,y.y-1,!0,c),v=n(y.x,y.y+1,!0,c),p=n(y.x-1,y.y,!0,c),g=n(y.x+1,y.y,!0,c),y.faceTop=!(f&&f.collides),y.faceBottom=!(v&&v.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=s},function(e,d,t){var n={};e.exports=n;var u=t(83),s=t(32);(function(){n.create=function(o,h){for(var a=[],l=0;l<o.length;l++){var c=o[l],f={x:c.x,y:c.y,index:l,body:h,isInternal:!1,contact:null,offset:null};f.contact={vertex:f,normalImpulse:0,tangentImpulse:0},a.push(f)}return a},n.fromPath=function(o,h){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,l=[];return o.replace(a,function(c,f,v){l.push({x:parseFloat(f),y:parseFloat(v)})}),n.create(l,h)},n.centre=function(o){for(var h=n.area(o,!0),a={x:0,y:0},l,c,f,v=0;v<o.length;v++)f=(v+1)%o.length,l=u.cross(o[v],o[f]),c=u.mult(u.add(o[v],o[f]),l),a=u.add(a,c);return u.div(a,6*h)},n.mean=function(o){for(var h={x:0,y:0},a=0;a<o.length;a++)h.x+=o[a].x,h.y+=o[a].y;return u.div(h,o.length)},n.area=function(o,h){for(var a=0,l=o.length-1,c=0;c<o.length;c++)a+=(o[l].x-o[c].x)*(o[l].y+o[c].y),l=c;return h?a/2:Math.abs(a)/2},n.inertia=function(o,h){for(var a=0,l=0,c=o,f,v,p=0;p<c.length;p++)v=(p+1)%c.length,f=Math.abs(u.cross(c[v],c[p])),a+=f*(u.dot(c[v],c[v])+u.dot(c[v],c[p])+u.dot(c[p],c[p])),l+=f;return h/6*(a/l)},n.translate=function(o,h,a){var l;if(a)for(l=0;l<o.length;l++)o[l].x+=h.x*a,o[l].y+=h.y*a;else for(l=0;l<o.length;l++)o[l].x+=h.x,o[l].y+=h.y;return o},n.rotate=function(o,h,a){if(h!==0){for(var l=Math.cos(h),c=Math.sin(h),f=0;f<o.length;f++){var v=o[f],p=v.x-a.x,g=v.y-a.y;v.x=a.x+(p*l-g*c),v.y=a.y+(p*c+g*l)}return o}},n.contains=function(o,h){for(var a=0;a<o.length;a++){var l=o[a],c=o[(a+1)%o.length];if((h.x-l.x)*(c.y-l.y)+(h.y-l.y)*(l.x-c.x)>0)return!1}return!0},n.scale=function(o,h,a,l){if(h===1&&a===1)return o;l=l||n.centre(o);for(var c,f,v=0;v<o.length;v++)c=o[v],f=u.sub(c,l),o[v].x=l.x+f.x*h,o[v].y=l.y+f.y*a;return o},n.chamfer=function(o,h,a,l,c){typeof h=="number"?h=[h]:h=h||[8],a=typeof a!="undefined"?a:-1,l=l||2,c=c||14;for(var f=[],v=0;v<o.length;v++){var p=o[v-1>=0?v-1:o.length-1],g=o[v],m=o[(v+1)%o.length],x=h[v<h.length?v:h.length-1];if(x===0){f.push(g);continue}var y=u.normalise({x:g.y-p.y,y:p.x-g.x}),T=u.normalise({x:m.y-g.y,y:g.x-m.x}),C=Math.sqrt(2*Math.pow(x,2)),S=u.mult(s.clone(y),x),E=u.normalise(u.mult(u.add(y,T),.5)),M=u.sub(g,u.mult(E,C)),R=a;a===-1&&(R=Math.pow(x,.32)*1.75),R=s.clamp(R,l,c),R%2==1&&(R+=1);for(var L=Math.acos(u.dot(y,T)),O=L/R,F=0;F<R;F++)f.push(u.add(u.rotate(S,O*F),M))}return f},n.clockwiseSort=function(o){var h=n.mean(o);return o.sort(function(a,l){return u.angle(h,a)-u.angle(h,l)}),o},n.isConvex=function(o){var h=0,a=o.length,l,c,f,v;if(a<3)return null;for(l=0;l<a;l++)if(c=(l+1)%a,f=(l+2)%a,v=(o[c].x-o[l].x)*(o[f].y-o[c].y),v-=(o[c].y-o[l].y)*(o[f].x-o[c].x),v<0?h|=1:v>0&&(h|=2),h===3)return!1;return h!==0?!0:null},n.hull=function(o){var h=[],a=[],l,c;for(o=o.slice(0),o.sort(function(f,v){var p=f.x-v.x;return p!==0?p:f.y-v.y}),c=0;c<o.length;c+=1){for(l=o[c];a.length>=2&&u.cross3(a[a.length-2],a[a.length-1],l)<=0;)a.pop();a.push(l)}for(c=o.length-1;c>=0;c-=1){for(l=o[c];h.length>=2&&u.cross3(h[h.length-2],h[h.length-1],l)<=0;)h.pop();h.push(l)}return h.pop(),a.pop(),h.concat(a)}})()},function(e,d,t){var n=t(0),u=t(66),s=t(300),o=t(301),h=t(56),a=t(170),l=new n({initialize:function(f,v,p){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),this.type=h.CIRCLE,this.x=f,this.y=v,this._radius=p,this._diameter=p*2},contains:function(c,f){return u(this,c,f)},getPoint:function(c,f){return s(this,c,f)},getPoints:function(c,f,v){return o(this,c,f,v)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,f,v){return this.x=c,this.y=f,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,f){return f===void 0&&(f=c),this.x=c,this.y=f,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});e.exports=l},function(e,d){var t=function(n,u,s){if(n.radius>0&&u>=n.left&&u<=n.right&&s>=n.top&&s<=n.bottom){var o=(n.x-u)*(n.x-u),h=(n.y-s)*(n.y-s);return o+h<=n.radius*n.radius}else return!1};e.exports=t},function(e,d){var t=function(n){return Math.sqrt((n.x2-n.x1)*(n.x2-n.x1)+(n.y2-n.y1)*(n.y2-n.y1))};e.exports=t},function(e,d){var t=function(n,u,s){var o=s-u;return u+((n-u)%o+o)%o};e.exports=t},function(e,d,t){var n=t(0),u=t(39),s=1e-6,o=new n({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new o(this)},set:function(v){return this.copy(v)},setValues:function(v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D){var B=this.val;return B[0]=v,B[1]=p,B[2]=g,B[3]=m,B[4]=x,B[5]=y,B[6]=T,B[7]=C,B[8]=S,B[9]=E,B[10]=M,B[11]=R,B[12]=L,B[13]=O,B[14]=F,B[15]=D,this},copy:function(v){var p=v.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,p,g){var m=h.fromQuat(g),x=m.val,y=p.x,T=p.y,C=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*C,x[9]*C,x[10]*C,0,v.x,v.y,v.z,1)},xyz:function(v,p,g){this.identity();var m=this.val;return m[12]=v,m[13]=p,m[14]=g,this},scaling:function(v,p,g){this.zero();var m=this.val;return m[0]=v,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,p=v[1],g=v[2],m=v[3],x=v[6],y=v[7],T=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=p,v[6]=v[9],v[7]=v[13],v[8]=g,v[9]=x,v[11]=v[14],v[12]=m,v[13]=y,v[14]=T,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],M=v[9],R=v[10],L=v[11],O=v[12],F=v[13],D=v[14],B=v[15],b=p*T-g*y,V=p*C-m*y,X=p*S-x*y,K=g*C-m*T,J=g*S-x*T,G=m*S-x*C,w=E*F-M*O,N=E*D-R*O,z=E*B-L*O,U=M*D-R*F,W=M*B-L*F,H=R*B-L*D,Z=b*H-V*W+X*U+K*z-J*N+G*w;return Z?(Z=1/Z,this.setValues((T*H-C*W+S*U)*Z,(m*W-g*H-x*U)*Z,(F*G-D*J+B*K)*Z,(R*J-M*G-L*K)*Z,(C*z-y*H-S*N)*Z,(p*H-m*z+x*N)*Z,(D*X-O*G-B*V)*Z,(E*G-R*X+L*V)*Z,(y*W-T*z+S*w)*Z,(g*z-p*W-x*w)*Z,(O*J-F*X+B*b)*Z,(M*X-E*J-L*b)*Z,(T*N-y*U-C*w)*Z,(p*U-g*N+m*w)*Z,(F*V-O*K-D*b)*Z,(E*K-M*V+R*b)*Z)):this},adjoint:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],M=v[9],R=v[10],L=v[11],O=v[12],F=v[13],D=v[14],B=v[15];return this.setValues(T*(R*B-L*D)-M*(C*B-S*D)+F*(C*L-S*R),-(g*(R*B-L*D)-M*(m*B-x*D)+F*(m*L-x*R)),g*(C*B-S*D)-T*(m*B-x*D)+F*(m*S-x*C),-(g*(C*L-S*R)-T*(m*L-x*R)+M*(m*S-x*C)),-(y*(R*B-L*D)-E*(C*B-S*D)+O*(C*L-S*R)),p*(R*B-L*D)-E*(m*B-x*D)+O*(m*L-x*R),-(p*(C*B-S*D)-y*(m*B-x*D)+O*(m*S-x*C)),p*(C*L-S*R)-y*(m*L-x*R)+E*(m*S-x*C),y*(M*B-L*F)-E*(T*B-S*F)+O*(T*L-S*M),-(p*(M*B-L*F)-E*(g*B-x*F)+O*(g*L-x*M)),p*(T*B-S*F)-y*(g*B-x*F)+O*(g*S-x*T),-(p*(T*L-S*M)-y*(g*L-x*M)+E*(g*S-x*T)),-(y*(M*D-R*F)-E*(T*D-C*F)+O*(T*R-C*M)),p*(M*D-R*F)-E*(g*D-m*F)+O*(g*R-m*M),-(p*(T*D-C*F)-y*(g*D-m*F)+O*(g*C-m*T)),p*(T*R-C*M)-y*(g*R-m*M)+E*(g*C-m*T))},determinant:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],M=v[9],R=v[10],L=v[11],O=v[12],F=v[13],D=v[14],B=v[15],b=p*T-g*y,V=p*C-m*y,X=p*S-x*y,K=g*C-m*T,J=g*S-x*T,G=m*S-x*C,w=E*F-M*O,N=E*D-R*O,z=E*B-L*O,U=M*D-R*F,W=M*B-L*F,H=R*B-L*D;return b*H-V*W+X*U+K*z-J*N+G*w},multiply:function(v){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5],S=p[6],E=p[7],M=p[8],R=p[9],L=p[10],O=p[11],F=p[12],D=p[13],B=p[14],b=p[15],V=v.val,X=V[0],K=V[1],J=V[2],G=V[3];return p[0]=X*g+K*T+J*M+G*F,p[1]=X*m+K*C+J*R+G*D,p[2]=X*x+K*S+J*L+G*B,p[3]=X*y+K*E+J*O+G*b,X=V[4],K=V[5],J=V[6],G=V[7],p[4]=X*g+K*T+J*M+G*F,p[5]=X*m+K*C+J*R+G*D,p[6]=X*x+K*S+J*L+G*B,p[7]=X*y+K*E+J*O+G*b,X=V[8],K=V[9],J=V[10],G=V[11],p[8]=X*g+K*T+J*M+G*F,p[9]=X*m+K*C+J*R+G*D,p[10]=X*x+K*S+J*L+G*B,p[11]=X*y+K*E+J*O+G*b,X=V[12],K=V[13],J=V[14],G=V[15],p[12]=X*g+K*T+J*M+G*F,p[13]=X*m+K*C+J*R+G*D,p[14]=X*x+K*S+J*L+G*B,p[15]=X*y+K*E+J*O+G*b,this},multiplyLocal:function(v){var p=this.val,g=v.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,p){var g=v.val,m=p.val,x=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],M=g[9],R=g[13],L=g[2],O=g[6],F=g[10],D=g[14],B=g[3],b=g[7],V=g[11],X=g[15],K=m[0],J=m[4],G=m[8],w=m[12],N=m[1],z=m[5],U=m[9],W=m[13],H=m[2],Z=m[6],q=m[10],_=m[14],nt=m[3],rt=m[7],at=m[11],vt=m[15];return this.setValues(x*K+y*N+T*H+C*nt,S*K+E*N+M*H+R*nt,L*K+O*N+F*H+D*nt,B*K+b*N+V*H+X*nt,x*J+y*z+T*Z+C*rt,S*J+E*z+M*Z+R*rt,L*J+O*z+F*Z+D*rt,B*J+b*z+V*Z+X*rt,x*G+y*U+T*q+C*at,S*G+E*U+M*q+R*at,L*G+O*U+F*q+D*at,B*G+b*U+V*q+X*at,x*w+y*W+T*_+C*vt,S*w+E*W+M*_+R*vt,L*w+O*W+F*_+D*vt,B*w+b*W+V*_+X*vt)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,p,g){var m=this.val;return m[12]=m[0]*v+m[4]*p+m[8]*g+m[12],m[13]=m[1]*v+m[5]*p+m[9]*g+m[13],m[14]=m[2]*v+m[6]*p+m[10]*g+m[14],m[15]=m[3]*v+m[7]*p+m[11]*g+m[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,p,g){var m=this.val;return m[0]=m[0]*v,m[1]=m[1]*v,m[2]=m[2]*v,m[3]=m[3]*v,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(v,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=v.x,T=v.y,C=v.z,S=x*y,E=x*T;return this.setValues(S*y+g,S*T-m*C,S*C+m*T,0,S*T+m*C,E*T+g,E*C-m*y,0,S*C-m*T,E*C+m*y,x*C*C+g,0,0,0,0,1)},rotate:function(v,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<s)return this;T=1/T,m*=T,x*=T,y*=T;var C=Math.sin(v),S=Math.cos(v),E=1-S,M=g[0],R=g[1],L=g[2],O=g[3],F=g[4],D=g[5],B=g[6],b=g[7],V=g[8],X=g[9],K=g[10],J=g[11],G=g[12],w=g[13],N=g[14],z=g[15],U=m*m*E+S,W=x*m*E+y*C,H=y*m*E-x*C,Z=m*x*E-y*C,q=x*x*E+S,_=y*x*E+m*C,nt=m*y*E+x*C,rt=x*y*E-m*C,at=y*y*E+S;return this.setValues(M*U+F*W+V*H,R*U+D*W+X*H,L*U+B*W+K*H,O*U+b*W+J*H,M*Z+F*q+V*_,R*Z+D*q+X*_,L*Z+B*q+K*_,O*Z+b*q+J*_,M*nt+F*rt+V*at,R*nt+D*rt+X*at,L*nt+B*rt+K*at,O*nt+b*rt+J*at,G,w,N,z)},rotateX:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[4],y=p[5],T=p[6],C=p[7],S=p[8],E=p[9],M=p[10],R=p[11];return p[4]=x*m+S*g,p[5]=y*m+E*g,p[6]=T*m+M*g,p[7]=C*m+R*g,p[8]=S*m-x*g,p[9]=E*m-y*g,p[10]=M*m-T*g,p[11]=R*m-C*g,this},rotateY:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],C=p[3],S=p[8],E=p[9],M=p[10],R=p[11];return p[0]=x*m-S*g,p[1]=y*m-E*g,p[2]=T*m-M*g,p[3]=C*m-R*g,p[8]=x*g+S*m,p[9]=y*g+E*m,p[10]=T*g+M*m,p[11]=C*g+R*m,this},rotateZ:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],C=p[3],S=p[4],E=p[5],M=p[6],R=p[7];return p[0]=x*m+S*g,p[1]=y*m+E*g,p[2]=T*m+M*g,p[3]=C*m+R*g,p[4]=S*m-x*g,p[5]=E*m-y*g,p[6]=M*m-T*g,p[7]=R*m-C*g,this},fromRotationTranslation:function(v,p){var g=v.x,m=v.y,x=v.z,y=v.w,T=g+g,C=m+m,S=x+x,E=g*T,M=g*C,R=g*S,L=m*C,O=m*S,F=x*S,D=y*T,B=y*C,b=y*S;return this.setValues(1-(L+F),M+b,R-B,0,M-b,1-(E+F),O+D,0,R+B,O-D,1-(E+L),0,p.x,p.y,p.z,1)},fromQuat:function(v){var p=v.x,g=v.y,m=v.z,x=v.w,y=p+p,T=g+g,C=m+m,S=p*y,E=p*T,M=p*C,R=g*T,L=g*C,O=m*C,F=x*y,D=x*T,B=x*C;return this.setValues(1-(R+O),E+B,M-D,0,E-B,1-(S+O),L+F,0,M+D,L-F,1-(S+R),0,0,0,0,1)},frustum:function(v,p,g,m,x,y){var T=1/(p-v),C=1/(m-g),S=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*C,0,0,(p+v)*T,(m+g)*C,(y+x)*S,-1,0,0,y*x*2*S,0)},perspective:function(v,p,g,m){var x=1/Math.tan(v/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(v,p,g,m){return this.setValues(2*g/v,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(v,p,g,m,x,y){var T=v-p,C=g-m,S=x-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(v+p)*T,(m+g)*C,(y+x)*S,1)},lookAtRH:function(v,p,g){var m=this.val;return f.subVectors(v,p),f.getLengthSquared()===0&&(f.z=1),f.normalize(),l.crossVectors(g,f),l.getLengthSquared()===0&&(Math.abs(g.z)===1?f.x+=1e-4:f.z+=1e-4,f.normalize(),l.crossVectors(g,f)),l.normalize(),c.crossVectors(f,l),m[0]=l.x,m[1]=l.y,m[2]=l.z,m[4]=c.x,m[5]=c.y,m[6]=c.z,m[8]=f.x,m[9]=f.y,m[10]=f.z,this},lookAt:function(v,p,g){var m=v.x,x=v.y,y=v.z,T=g.x,C=g.y,S=g.z,E=p.x,M=p.y,R=p.z;if(Math.abs(m-E)<s&&Math.abs(x-M)<s&&Math.abs(y-R)<s)return this.identity();var L=m-E,O=x-M,F=y-R,D=1/Math.sqrt(L*L+O*O+F*F);L*=D,O*=D,F*=D;var B=C*F-S*O,b=S*L-T*F,V=T*O-C*L;D=Math.sqrt(B*B+b*b+V*V),D?(D=1/D,B*=D,b*=D,V*=D):(B=0,b=0,V=0);var X=O*V-F*b,K=F*B-L*V,J=L*b-O*B;return D=Math.sqrt(X*X+K*K+J*J),D?(D=1/D,X*=D,K*=D,J*=D):(X=0,K=0,J=0),this.setValues(B,X,L,0,b,K,O,0,V,J,F,0,-(B*m+b*x+V*y),-(X*m+K*x+J*y),-(L*m+O*x+F*y),1)},yawPitchRoll:function(v,p,g){this.zero(),h.zero(),a.zero();var m=this.val,x=h.val,y=a.val,T=Math.sin(g),C=Math.cos(g);return m[10]=1,m[15]=1,m[0]=C,m[1]=T,m[4]=-T,m[5]=C,T=Math.sin(p),C=Math.cos(p),x[0]=1,x[15]=1,x[5]=C,x[10]=C,x[9]=-T,x[6]=T,T=Math.sin(v),C=Math.cos(v),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(h),this.multiplyLocal(a),this},setWorldMatrix:function(v,p,g,m,x){return this.yawPitchRoll(v.y,v.x,v.z),h.scaling(g.x,g.y,g.z),a.xyz(p.x,p.y,p.z),this.multiplyLocal(h),this.multiplyLocal(a),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(v,p){var g=this.val,m=v.val,x=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],M=g[6],R=g[7],L=g[8],O=g[9],F=g[10],D=g[11],B=g[12],b=g[13],V=g[14],X=g[15],K=m[0],J=m[1],G=m[2],w=m[3],N=m[4],z=m[5],U=m[6],W=m[7],H=m[8],Z=m[9],q=m[10],_=m[11],nt=m[12],rt=m[13],at=m[14],vt=m[15];return p.setValues(K*x+J*S+G*L+w*B,J*y+J*E+G*O+w*b,G*T+J*M+G*F+w*V,w*C+J*R+G*D+w*X,N*x+z*S+U*L+W*B,N*y+z*E+U*O+W*b,N*T+z*M+U*F+W*V,N*C+z*R+U*D+W*X,H*x+Z*S+q*L+_*B,H*y+Z*E+q*O+_*b,H*T+Z*M+q*F+_*V,H*C+Z*R+q*D+_*X,nt*x+rt*S+at*L+vt*B,nt*y+rt*E+at*O+vt*b,nt*T+rt*M+at*F+vt*V,nt*C+rt*R+at*D+vt*X)},fromRotationXYTranslation:function(v,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(v.x),C=Math.cos(v.x),S=Math.sin(v.y),E=Math.cos(v.y),M=m,R=x,L=y,O=-T,F=0-O*S,D=0-C*S,B=O*E,b=C*E;return g||(M=E*m+S*y,R=F*m+C*x+B*y,L=D*m+T*x+b*y),this.setValues(E,F,D,0,0,C,T,0,S,B,b,0,M,R,L,1)},getMaxScaleOnAxis:function(){var v=this.val,p=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],g=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],m=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(p,g,m))}}),h=new o,a=new o,l=new u,c=new u,f=new u;e.exports=o},function(e,d,t){e.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function c(f,v,p,g,m){var x="png",y;if(a(v)){var T=v;v=h(T,"key"),p=h(T,"url"),y=h(T,"normalMap"),g=h(T,"xhrSettings"),x=h(T,"extension",x),m=h(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var C={type:"image",cache:f.textureManager,extension:x,responseType:"blob",key:v,url:p,xhrSettings:g,config:m};if(s.call(this,f,C),y){var S=new c(f,this.key,y,g,m);S.type="normalMap",this.setLink(S),f.addFile(S)}},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){s.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(c.data),c.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var c,f=this.linkFile;f&&f.state===u.FILE_COMPLETE?(this.type==="image"?c=this.cache.addImage(this.key,this.data,f.data):c=this.cache.addImage(f.key,f.data,this.data),this.pendingDestroy(c),f.pendingDestroy(c)):f||(c=this.cache.addImage(this.key,this.data),this.pendingDestroy(c))}});o.register("image",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,f,v));return this}),e.exports=l},function(e,d){var t=function(n,u){u?n.setCollision(!0,!0,!0,!0,!1):n.resetCollision(!1)};e.exports=t},function(e,d,t){var n=t(164),u=t(0),s=t(11),o=t(15),h=t(1065),a=new u({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,h],initialize:function(c,f,v,p,g){o.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(p,g),this.setPosition(f,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,c){this.anims.update(l,c)},play:function(l,c){return this.anims.play(l,c)},playReverse:function(l,c){return this.anims.playReverse(l,c)},playAfterDelay:function(l,c){return this.anims.playAfterDelay(l,c)},playAfterRepeat:function(l,c){return this.anims.playAfterRepeat(l,c)},chain:function(l){return this.anims.chain(l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(l){return this.anims.stopAfterDelay(l)},stopAfterRepeat:function(l){return this.anims.stopAfterRepeat(l)},stopOnFrame:function(l){return this.anims.stopOnFrame(l)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=a},function(e,d){var t=function(n,u){if(!(u>=n.length)){for(var s=n.length-1,o=n[u],h=u;h<s;h++)n[h]=n[h+1];return n.length=s,o}};e.exports=t},function(e,d,t){e.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(e,d){var t=function(n,u,s,o){return s===void 0&&(s=0),u===0?n:(n-=s,n=u*Math.floor(n/u),o?(s+n)/u:s+n)};e.exports=t},function(e,d){var t=function(n){var u={};for(var s in n)Array.isArray(n[s])?u[s]=n[s].slice(0):u[s]=n[s];return u};e.exports=t},function(e,d){var t=function(n,u,s,o){var h=n.length;if(u<0||u>h||u>=s||s>h||u+s>h){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=t},function(e,d){function t(o,h){return String(o).localeCompare(h)}function n(o,h){var a=o.length;if(a<=1)return o;for(var l=new Array(a),c=1;c<a;c*=2){u(o,h,c,l);var f=o;o=l,l=f}return o}function u(o,h,a,l){var c=o.length,f=0,v=a*2,p,g,m,x,y;for(p=0;p<c;p+=v)for(g=p+a,m=g+a,g>c&&(g=c),m>c&&(m=c),x=p,y=g;;)if(x<g&&y<m)h(o[x],o[y])<=0?l[f++]=o[x++]:l[f++]=o[y++];else if(x<g)l[f++]=o[x++];else if(y<m)l[f++]=o[y++];else break}var s=function(o,h){h===void 0&&(h=t);var a=n(o,h);return a!==o&&u(a,null,o.length,o),o};e.exports=s},function(e,d,t){var n=t(134),u=t(205),s=function(o,h){var a=n.Power0;if(typeof o=="string")if(n.hasOwnProperty(o))a=n[o];else{var l="";o.indexOf(".")&&(l=o.substr(o.indexOf(".")+1),l.toLowerCase()==="in"?l="easeIn":l.toLowerCase()==="out"?l="easeOut":l.toLowerCase()==="inout"&&(l="easeInOut")),o=u(o.substr(0,o.indexOf(".")+1)+l),n.hasOwnProperty(o)&&(a=n[o])}else typeof o=="function"?a=o:Array.isArray(o)&&o.length===4;if(!h)return a;var c=h.slice(0);return c.unshift(0),function(f){return c[0]=f,a.apply(this,c)}};e.exports=s},function(e,d,t){var n=t(12),u=function(s,o,h,a,l){var c=s.strokeTint,f=n.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*h);c.TL=f,c.TR=f,c.BL=f,c.BR=f;var v=o.pathData,p=v.length-1,g=o.lineWidth,m=g/2,x=v[0]-a,y=v[1]-l;o.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=v[T]-a,S=v[T+1]-l;s.batchLine(x,y,C,S,m,m,g,T-2,o.closePath?T===p-1:!1),x=C,y=S}};e.exports=u},function(e,d,t){var n=t(0),u=t(115),s=t(476),o=t(477),h=t(56),a=t(47),l=t(181),c=new n({initialize:function(v,p,g,m,x,y){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=h.TRIANGLE,this.x1=v,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(f,v){return u(this,f,v)},getPoint:function(f,v){return s(this,f,v)},getPoints:function(f,v,p){return o(this,f,v,p)},getRandomPoint:function(f){return l(this,f)},setTo:function(f,v,p,g,m,x){return f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=f,this.y1=v,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(f){return f===void 0&&(f=new a),f.setTo(this.x1,this.y1,this.x2,this.y2),f},getLineB:function(f){return f===void 0&&(f=new a),f.setTo(this.x2,this.y2,this.x3,this.y3),f},getLineC:function(f){return f===void 0&&(f=new a),f.setTo(this.x3,this.y3,this.x1,this.y1),f},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(f){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-f:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-f:v=this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(f){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-f:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-f:v=this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(f){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-f:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-f:v=this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(f){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-f:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-f:v=this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}}});e.exports=c},function(e,d){var t={};e.exports=t,function(){t.create=function(n,u){return{x:n||0,y:u||0}},t.clone=function(n){return{x:n.x,y:n.y}},t.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},t.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},t.rotate=function(n,u,s){var o=Math.cos(u),h=Math.sin(u);s||(s={});var a=n.x*o-n.y*h;return s.y=n.x*h+n.y*o,s.x=a,s},t.rotateAbout=function(n,u,s,o){var h=Math.cos(u),a=Math.sin(u);o||(o={});var l=s.x+((n.x-s.x)*h-(n.y-s.y)*a);return o.y=s.y+((n.x-s.x)*a+(n.y-s.y)*h),o.x=l,o},t.normalise=function(n){var u=t.magnitude(n);return u===0?{x:0,y:0}:{x:n.x/u,y:n.y/u}},t.dot=function(n,u){return n.x*u.x+n.y*u.y},t.cross=function(n,u){return n.x*u.y-n.y*u.x},t.cross3=function(n,u,s){return(u.x-n.x)*(s.y-n.y)-(u.y-n.y)*(s.x-n.x)},t.add=function(n,u,s){return s||(s={}),s.x=n.x+u.x,s.y=n.y+u.y,s},t.sub=function(n,u,s){return s||(s={}),s.x=n.x-u.x,s.y=n.y-u.y,s},t.mult=function(n,u){return{x:n.x*u,y:n.y*u}},t.div=function(n,u){return{x:n.x/u,y:n.y/u}},t.perp=function(n,u){return u=u===!0?-1:1,{x:u*-n.y,y:u*n.x}},t.neg=function(n){return{x:-n.x,y:-n.y}},t.angle=function(n,u){return Math.atan2(u.y-n.y,u.x-n.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(e,d){var t={};e.exports=t,function(){t.create=function(n){var u={min:{x:0,y:0},max:{x:0,y:0}};return n&&t.update(u,n),u},t.update=function(n,u,s){n.min.x=Infinity,n.max.x=-Infinity,n.min.y=Infinity,n.max.y=-Infinity;for(var o=0;o<u.length;o++){var h=u[o];h.x>n.max.x&&(n.max.x=h.x),h.x<n.min.x&&(n.min.x=h.x),h.y>n.max.y&&(n.max.y=h.y),h.y<n.min.y&&(n.min.y=h.y)}s&&(s.x>0?n.max.x+=s.x:n.min.x+=s.x,s.y>0?n.max.y+=s.y:n.min.y+=s.y)},t.contains=function(n,u){return u.x>=n.min.x&&u.x<=n.max.x&&u.y>=n.min.y&&u.y<=n.max.y},t.overlaps=function(n,u){return n.min.x<=u.max.x&&n.max.x>=u.min.x&&n.max.y>=u.min.y&&n.min.y<=u.max.y},t.translate=function(n,u){n.min.x+=u.x,n.max.x+=u.x,n.min.y+=u.y,n.max.y+=u.y},t.shift=function(n,u){var s=n.max.x-n.min.x,o=n.max.y-n.min.y;n.min.x=u.x,n.max.x=u.x+s,n.min.y=u.y,n.max.y=u.y+o}}()},function(e,d,t){var n=t(29),u=t(0),s=t(11),o=t(502),h=new u({Mixins:[s.Alpha,s.Flip,s.Visible],initialize:function(l,c,f,v,p,g,m,x){this.layer=l,this.index=c,this.x=f,this.y=v,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(a,l){return!(a<this.pixelX||l<this.pixelY||a>this.right||l>this.bottom)},copy:function(a){return this.index=a.index,this.alpha=a.alpha,this.properties=a.properties,this.visible=a.visible,this.setFlip(a.flipX,a.flipY),this.tint=a.tint,this.rotation=a.rotation,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(a){var l=this.tilemapLayer;return l?l.tileToWorldX(this.x,a):this.x*this.baseWidth},getRight:function(a){var l=this.tilemapLayer;return l?this.getLeft(a)+this.width*l.scaleX:this.getLeft(a)+this.width},getTop:function(a){var l=this.tilemapLayer;return l?l.tileToWorldY(this.y,a)-(this.height-this.baseHeight)*l.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(a){var l=this.tilemapLayer;return l?this.getTop(a)+this.height*l.scaleY:this.getTop(a)+this.height},getBounds:function(a,l){return l===void 0&&(l=new o),l.x=this.getLeft(),l.y=this.getTop(),l.width=this.getRight()-l.x,l.height=this.getBottom()-l.y,l},getCenterX:function(a){return(this.getLeft(a)+this.getRight(a))/2},getCenterY:function(a){return(this.getTop(a)+this.getBottom(a))/2},intersects:function(a,l,c,f){return!(c<=this.pixelX||f<=this.pixelY||a>=this.right||l>=this.bottom)},isInteresting:function(a,l){return a&&l?this.canCollide||this.hasInterestingFace:a?this.collides:l?this.hasInterestingFace:!1},resetCollision:function(a){if(a===void 0&&(a=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,a){var l=this.tilemapLayer;l&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(a,l,c,f,v){if(l===void 0&&(l=a),c===void 0&&(c=a),f===void 0&&(f=a),v===void 0&&(v=!0),this.collideLeft=a,this.collideRight=l,this.collideUp=c,this.collideDown=f,this.faceLeft=a,this.faceRight=l,this.faceTop=c,this.faceBottom=f,v){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(a,l){return a===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=a,this.collisionCallbackContext=l),this},setSize:function(a,l,c,f){return a!==void 0&&(this.width=a),l!==void 0&&(this.height=l),c!==void 0&&(this.baseWidth=c),f!==void 0&&(this.baseHeight=f),this.updatePixelXY(),this},updatePixelXY:function(){var a=this.layer.orientation;if(a===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(a===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(a===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(a===n.HEXAGONAL){var l=this.layer.hexSideLength,c=(this.baseHeight-l)/2+l;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*c}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var a=this.layer.tilemapLayer;if(a){var l=a.gidMap[this.index];if(l)return l}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var a=this.tilemapLayer;return a?a.tilemap:null}}});e.exports=h},function(e,d,t){var n={};e.exports=n;var u=t(64),s=t(32),o=t(41),h=t(84),a=t(83),l=t(1393);(function(){n.rectangle=function(c,f,v,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:c,y:f},vertices:u.fromPath("L 0 0 L "+v+" 0 L "+v+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=u.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return o.create(s.extend({},m,g))},n.trapezoid=function(c,f,v,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*v,y=v*g,T=y+x,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+C+" 0":S="L 0 0 L "+T+" "+-p+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:c,y:f},vertices:u.fromPath(S)};if(m.chamfer){var M=m.chamfer;E.vertices=u.chamfer(E.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete m.chamfer}return o.create(s.extend({},E,m))},n.circle=function(c,f,v,p,g){p=p||{};var m={label:"Circle Body",circleRadius:v};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,v)));return x%2==1&&(x+=1),n.polygon(c,f,x,v,s.extend({},m,p))},n.polygon=function(c,f,v,p,g){if(g=g||{},v<3)return n.circle(c,f,p,g);for(var m=2*Math.PI/v,x="",y=m*.5,T=0;T<v;T+=1){var C=y+T*m,S=Math.cos(C)*p,E=Math.sin(C)*p;x+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:c,y:f},vertices:u.fromPath(x)};if(g.chamfer){var R=g.chamfer;M.vertices=u.chamfer(M.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete g.chamfer}return o.create(s.extend({},M,g))},n.fromVertices=function(c,f,v,p,g,m,x){var y,T,C,S,E,M;for(p=p||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,l||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(v[0])||(v=[v]),M=0;M<v.length;M+=1)if(S=v[M],C=u.isConvex(S),C||!l)C?S=u.clockwiseSort(S):S=u.hull(S),T.push({position:{x:c,y:f},vertices:S});else{var R=S.map(function(D){return[D.x,D.y]});l.makeCCW(R),m!==!1&&l.removeCollinearPoints(R,m);var L=l.quickDecomp(R);for(E=0;E<L.length;E++){var O=L[E],F=O.map(function(D){return{x:D[0],y:D[1]}});x>0&&u.area(F)<x||T.push({position:u.centre(F),vertices:F})}}for(E=0;E<T.length;E++)T[E]=o.create(s.extend(T[E],p));return g&&n.flagCoincidentParts(T,5),T.length>1?(y=o.create(s.extend({parts:T.slice(0)},p)),o.setPosition(y,{x:c,y:f}),y):T[0]},n.flagCoincidentParts=function(c,f){f===void 0&&(f=5);for(var v=0;v<c.length;v++)for(var p=c[v],g=v+1;g<c.length;g++){var m=c[g];if(h.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var C=0;C<m.vertices.length;C++){var S=a.magnitudeSquared(a.sub(x[(T+1)%x.length],y[C])),E=a.magnitudeSquared(a.sub(x[T],y[(C+1)%y.length]));S<f&&E<f&&(x[T].isInternal=!0,y[C].isInternal=!0)}}return c}})()},function(e,d){var t=function(n){return n.x-n.width*n.originX+n.width*.5};e.exports=t},function(e,d){var t=function(n,u){var s=n.width*n.originX;return n.x=u+s-n.width*.5,n};e.exports=t},function(e,d){var t=function(n){return n.y-n.height*n.originY+n.height*.5};e.exports=t},function(e,d){var t=function(n,u){var s=n.height*n.originY;return n.y=u+s-n.height*.5,n};e.exports=t},function(e,d,t){e.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(e,d){var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=t},function(e,d,t){var n=t(74),u=function(s,o,h,a){a===void 0&&(a=s);var l;if(!Array.isArray(o))return l=s.indexOf(o),l!==-1?(n(s,l),h&&h.call(a,o),o):null;for(var c=o.length-1,f=[];c>=0;){var v=o[c];l=s.indexOf(v),l!==-1&&(n(s,l),f.push(v),h&&h.call(a,v)),c--}return f};e.exports=u},function(e,d,t){var n=t(0),u=t(199),s=t(10),o=t(3),h=new n({initialize:function(l){this.type=l,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(a,l){return l===void 0&&(l=32),a.strokePoints(this.getPoints(l))},getBounds:function(a,l){a||(a=new s),l===void 0&&(l=16);var c=this.getLength();l>c&&(l=c/2);var f=Math.max(1,Math.round(c/l));return u(this.getSpacedPoints(f),a)},getDistancePoints:function(a){var l=this.getLength(),c=Math.max(1,l/a);return this.getSpacedPoints(c)},getEndPoint:function(a){return a===void 0&&(a=new o),this.getPointAt(1,a)},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a===void 0&&(a=this.arcLengthDivisions),this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l=[],c,f=this.getPoint(0,this._tmpVec2A),v=0;l.push(0);for(var p=1;p<=a;p++)c=this.getPoint(p/a,this._tmpVec2B),v+=c.distance(f),l.push(v),f.copy(c);return this.cacheArcLengths=l,l},getPointAt:function(a,l){var c=this.getUtoTmapping(a);return this.getPoint(c,l)},getPoints:function(a,l,c){c===void 0&&(c=[]),a||(l?a=this.getLength()/l:a=this.defaultDivisions);for(var f=0;f<=a;f++)c.push(this.getPoint(f/a));return c},getRandomPoint:function(a){return a===void 0&&(a=new o),this.getPoint(Math.random(),a)},getSpacedPoints:function(a,l,c){c===void 0&&(c=[]),a||(l?a=this.getLength()/l:a=this.defaultDivisions);for(var f=0;f<=a;f++){var v=this.getUtoTmapping(f/a,null,a);c.push(this.getPoint(v))}return c},getStartPoint:function(a){return a===void 0&&(a=new o),this.getPointAt(0,a)},getTangent:function(a,l){l===void 0&&(l=new o);var c=1e-4,f=a-c,v=a+c;return f<0&&(f=0),v>1&&(v=1),this.getPoint(f,this._tmpVec2A),this.getPoint(v,l),l.subtract(this._tmpVec2A).normalize()},getTangentAt:function(a,l){var c=this.getUtoTmapping(a);return this.getTangent(c,l)},getTFromDistance:function(a,l){return a<=0?0:this.getUtoTmapping(0,a,l)},getUtoTmapping:function(a,l,c){var f=this.getLengths(c),v=0,p=f.length,g;l?g=Math.min(l,f[p-1]):g=a*f[p-1];for(var m=0,x=p-1,y;m<=x;)if(v=Math.floor(m+(x-m)/2),y=f[v]-g,y<0)m=v+1;else if(y>0)x=v-1;else{x=v;break}if(v=x,f[v]===g)return v/(p-1);var T=f[v],C=f[v+1],S=C-T,E=(g-T)/S;return(v+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=h},function(e,d,t){e.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(e,d,t){var n=t(4),u=function(s,o,h){h===void 0&&(h=new n);var a=s.x1,l=s.y1,c=s.x2,f=s.y2,v=o.x1,p=o.y1,g=o.x2,m=o.y2,x=(g-v)*(l-p)-(m-p)*(a-v),y=(c-a)*(l-p)-(f-l)*(a-v),T=(m-p)*(c-a)-(g-v)*(f-l);if(T===0)return!1;var C=x/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(h.x=a+C*(c-a),h.y=l+C*(f-l),!0):!1};e.exports=u},function(e,d){var t=function(n){return Math.atan2(n.y2-n.y1,n.x2-n.x1)};e.exports=t},function(e,d,t){var n=t(18),u=function(s,o,h){return s=n(s,0,1),(h-o)*s+o};e.exports=u},function(e,d){var t=function(n,u,s){return n&&n.hasOwnProperty(u)?n[u]:s};e.exports=t},function(e,d){var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=t},function(e,d,t){var n=t(0),u=t(315),s=new n({initialize:function(h,a){this.parent=h,this.events=a,a||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function(o){var h=this.list;if(Array.isArray(o)){for(var a=[],l=0;l<o.length;l++)a.push(h[o[l]]);return a}else return h[o]},getAll:function(){var o={};for(var h in this.list)this.list.hasOwnProperty(h)&&(o[h]=this.list[h]);return o},query:function(o){var h={};for(var a in this.list)this.list.hasOwnProperty(a)&&a.match(o)&&(h[a]=this.list[a]);return h},set:function(o,h){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,h);for(var a in o)this.setValue(a,o[a]);return this},inc:function(o,h){if(this._frozen)return this;h===void 0&&(h=1);var a=this.get(o);return a===void 0&&(a=0),this.set(o,a+h),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,h){if(this._frozen)return this;if(this.has(o))this.values[o]=h;else{var a=this,l=this.list,c=this.events,f=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return l[o]},set:function(v){if(!a._frozen){var p=l[o];l[o]=v,c.emit(u.CHANGE_DATA,f,o,v,p),c.emit(u.CHANGE_DATA_KEY+o,f,v,p)}}}),l[o]=h,c.emit(u.SET_DATA,f,o,h)}return this},each:function(o,h){for(var a=[this.parent,null,void 0],l=1;l<arguments.length;l++)a.push(arguments[l]);for(var c in this.list)a[1]=c,a[2]=this.list[c],o.apply(h,a);return this},merge:function(o,h){h===void 0&&(h=!0);for(var a in o)o.hasOwnProperty(a)&&(h||!h&&!this.has(a))&&this.setValue(a,o[a]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var h=0;h<o.length;h++)this.removeValue(o[h]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var h=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(u.REMOVE_DATA,this.parent,o,h)}return this},pop:function(o){var h=void 0;return!this._frozen&&this.has(o)&&(h=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(u.REMOVE_DATA,this.parent,o,h)),h},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var h in this.list)this.list[h]!==void 0&&o++;return o}}});e.exports=s},function(e,d,t){var n=t(0),u=new n({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var h=0;h<o.length;h++)this.set(o[h][0],o[h][1])},set:function(s,o){return this.has(s)||this.size++,this.entries[s]=o,this},get:function(s){if(this.has(s))return this.entries[s]},getArray:function(){var s=[],o=this.entries;for(var h in o)s.push(o[h]);return s},has:function(s){return this.entries.hasOwnProperty(s)},delete:function(s){return this.has(s)&&(delete this.entries[s],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(s){delete this.entries[s]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var s=[],o=this.entries;for(var h in o)s.push(o[h]);return s},dump:function(){var s=this.entries;console.group("Map");for(var o in s)console.log(o,s[o]);console.groupEnd()},each:function(s){var o=this.entries;for(var h in o)if(s(h,o[h])===!1)break;return this},contains:function(s){var o=this.entries;for(var h in o)if(o[h]===s)return!0;return!1},merge:function(s,o){o===void 0&&(o=!1);var h=this.entries,a=s.entries;for(var l in a)h.hasOwnProperty(l)&&o?h[l]=a[l]:this.set(l,a[l]);return this}});e.exports=u},function(e,d){var t=function(n,u,s){return n<<16|u<<8|s};e.exports=t},function(e,d,t){e.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(e,d,t){(function(n){var u={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function s(){if(typeof importScripts=="function")return u;var o=navigator.userAgent;/Windows/.test(o)?u.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(u.iOS=!0,u.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),u.iOSVersion=parseInt(RegExp.$1,10)):u.macOS=!0:/Android/.test(o)?u.android=!0:/Linux/.test(o)?u.linux=!0:/iP[ao]d|iPhone/i.test(o)?(u.iOS=!0,navigator.appVersion.match(/OS (\d+)/),u.iOSVersion=parseInt(RegExp.$1,10),u.iPhone=o.toLowerCase().indexOf("iphone")!==-1,u.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?u.kindle=!0:/CrOS/.test(o)&&(u.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(u.android=!1,u.iOS=!1,u.macOS=!1,u.windows=!0,u.windowsPhone=!0);var h=/Silk/.test(o);return(u.windows||u.macOS||u.linux&&!h||u.chromeOS)&&(u.desktop=!0),(u.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(u.desktop=!1),navigator.standalone&&(u.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(u.cordova=!0),window.ejecta!==void 0&&(u.ejecta=!0)),typeof n!="undefined"&&n.versions&&n.versions.node&&(u.node=!0),u.node&&typeof n.versions=="object"&&(u.nodeWebkit=!!n.versions["node-webkit"],u.electron=!!n.versions.electron),/Crosswalk/.test(o)&&(u.crosswalk=!0),u.pixelRatio=window.devicePixelRatio||1,u}e.exports=s()}).call(this,t(807))},function(e,d,t){e.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(e,d){var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=t},function(e,d,t){var n=t(0),u=t(59),s=t(2),o=t(878),h=t(879),a=t(25),l=t(12),c=t(107),f=t(58),v=new n({Extends:f,initialize:function(g){var m=g.game.renderer,x=s(g,"fragShader",o);g.fragShader=l.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=s(g,"vertShader",h),g.attributes=s(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),f.call(this,g),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){f.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=p.frame,S=C.glTexture,E=C.u0,M=C.v0,R=C.u1,L=C.v1,O=C.x,F=C.y,D=C.cutWidth,B=C.cutHeight,b=C.customPivot,V=p.displayOriginX,X=p.displayOriginY,K=-V+O,J=-X+F;if(p.isCropped){var G=p._crop;(G.flipX!==p.flipX||G.flipY!==p.flipY)&&C.updateCropUVs(G,p.flipX,p.flipY),E=G.u0,M=G.v0,R=G.u1,L=G.v1,D=G.width,B=G.height,O=G.x,F=G.y,K=-V+O,J=-X+F}var w=1,N=1;p.flipX&&(b||(K+=-C.realWidth+V*2),w=-1),(p.flipY||C.source.isGLTexture&&!S.flipY)&&(b||(J+=-C.realHeight+X*2),N=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*w,p.scaleY*N),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var z=K+D,U=J+B,W=g.roundPixels,H=T.getXRound(K,J,W),Z=T.getYRound(K,J,W),q=T.getXRound(K,U,W),_=T.getYRound(K,U,W),nt=T.getXRound(z,U,W),rt=T.getYRound(z,U,W),at=T.getXRound(z,J,W),vt=T.getYRound(z,J,W),ut=l.getTintAppendFloatAlpha,ct=g.alpha,Ft=ut(p.tintTopLeft,ct*p._alphaTL),yt=ut(p.tintTopRight,ct*p._alphaTR),Tt=ut(p.tintBottomLeft,ct*p._alphaBL),dt=ut(p.tintBottomRight,ct*p._alphaBR);this.shouldFlush(6)&&this.flush();var It=this.setGameObject(p,C);this.manager.preBatch(p),this.batchQuad(p,H,Z,q,_,nt,rt,at,vt,E,M,R,L,Ft,yt,Tt,dt,p.tintFill,S,It),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,b,V,X,K,J,G,w,N,z,U,W,H,Z,q,_,nt){this.manager.set(this,p);var rt=this._tempMatrix1,at=this._tempMatrix2,vt=this._tempMatrix3,ut=V/m+W,ct=X/x+H,Ft=(V+K)/m+W,yt=(X+J)/x+H,Tt=C,dt=S,It=-B,gt=-b;if(p.isCropped){var Pt=p._crop,ge=Pt.width,Ge=Pt.height;Tt=ge,dt=Ge,C=ge,S=Ge,V=Pt.x,X=Pt.y;var Ht=V,Vt=X;L&&(Ht=K-Pt.x-ge),O&&(Vt=J-Pt.y-Ge),ut=Ht/m+W,ct=Vt/x+H,Ft=(Ht+ge)/m+W,yt=(Vt+Ge)/x+H,It=-B+V,gt=-b+X}O=O^(!_&&g.isRenderTexture?1:0),L&&(Tt*=-1,It+=C),O&&(dt*=-1,gt+=S);var te=It+Tt,qt=gt+dt;at.applyITRS(y,T,R,E,M),rt.copyFrom(Z.matrix),q?(rt.multiplyWithOffset(q,-Z.scrollX*F,-Z.scrollY*D),at.e=y,at.f=T):(at.e-=Z.scrollX*F,at.f-=Z.scrollY*D),rt.multiply(at,vt);var ee=Z.roundPixels,Ee=vt.getXRound(It,gt,ee),hi=vt.getYRound(It,gt,ee),li=vt.getXRound(It,qt,ee),ui=vt.getYRound(It,qt,ee),fi=vt.getXRound(te,qt,ee),di=vt.getYRound(te,qt,ee),vi=vt.getXRound(te,gt,ee),Zr=vt.getYRound(te,gt,ee);nt===void 0&&(nt=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,Ee,hi,li,ui,fi,di,vi,Zr,ut,ct,Ft,yt,G,w,N,z,U,g,nt),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,M=g+p.width,R=m+p.height;C?S.multiply(C,E):E=S;var L=E.getX(g,m),O=E.getY(g,m),F=E.getX(g,R),D=E.getY(g,R),B=E.getX(M,R),b=E.getY(M,R),V=E.getX(M,m),X=E.getY(M,m),K=this.renderer.setTextureSource(p.source);x=l.getTintAppendFloatAlpha(x,y),this.batchQuad(null,L,O,F,D,B,b,V,X,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,K)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=p+m,E=g+x,M=C.getX(p,g),R=C.getY(p,g),L=C.getX(p,E),O=C.getY(p,E),F=C.getX(S,E),D=C.getY(S,E),B=C.getX(S,g),b=C.getY(S,g),V=this.fillTint;this.batchQuad(null,M,R,L,O,F,D,B,b,0,0,1,1,V.TL,V.TR,V.BL,V.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var M=E.getX(p,g),R=E.getY(p,g),L=E.getX(m,x),O=E.getY(m,x),F=E.getX(y,T),D=E.getY(y,T),B=this.fillTint;this.batchTri(null,M,R,L,O,F,D,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,C,S,E){var M=this.tempTriangle;M[0].x=p,M[0].y=g,M[0].width=C,M[1].x=m,M[1].y=x,M[1].width=C,M[2].x=y,M[2].y=T,M[2].width=C,M[3].x=p,M[3].y=g,M[3].width=C,this.batchStrokePath(M,C,!1,S,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,C,S,E=this.fillTint.TL,M=this.fillTint.TR,R=this.fillTint.BL,L=0;L<y;++L)S=p[L],T.push(S.x,S.y);C=u(T),y=C.length;for(var O=0;O<y;O+=3){var F=C[O+0]*2,D=C[O+1]*2,B=C[O+2]*2,b=T[F+0],V=T[F+1],X=T[D+0],K=T[D+1],J=T[B+0],G=T[B+1],w=x.getX(b,V),N=x.getY(b,V),z=x.getX(X,K),U=x.getY(X,K),W=x.getX(J,G),H=x.getY(J,G);this.batchTri(null,w,N,z,U,W,H,0,0,1,1,E,M,R,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,C=0;C<T;C++){var S=p[C],E=p[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!m&&C===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,C,S,E,M,R){this.renderer.pipelines.set(this);var L=this.calcMatrix;R&&R.multiply(M,L);var O=m-p,F=x-g,D=Math.sqrt(O*O+F*F),B=y*(x-g)/D,b=y*(p-m)/D,V=T*(x-g)/D,X=T*(p-m)/D,K=m-V,J=x-X,G=p-B,w=g-b,N=m+V,z=x+X,U=p+B,W=g+b,H=L.getX(K,J),Z=L.getY(K,J),q=L.getX(G,w),_=L.getY(G,w),nt=L.getX(N,z),rt=L.getY(N,z),at=L.getX(U,W),vt=L.getY(U,W),ut=this.strokeTint,ct=ut.TL,Ft=ut.TR,yt=ut.BL,Tt=ut.BR;if(this.batchQuad(null,at,vt,q,_,H,Z,nt,rt,0,0,1,1,ct,Ft,yt,Tt,2),!(C<=2)){var dt=this.prevQuad,It=this.firstQuad;S>0&&dt[4]?this.batchQuad(null,at,vt,q,_,dt[0],dt[1],dt[2],dt[3],0,0,1,1,ct,Ft,yt,Tt,2):(It[0]=at,It[1]=vt,It[2]=q,It[3]=_,It[4]=1),E&&It[4]?this.batchQuad(null,H,Z,nt,rt,It[0],It[1],It[2],It[3],0,0,1,1,ct,Ft,yt,Tt,2):(dt[0]=H,dt[1]=Z,dt[2]=nt,dt[3]=rt,dt[4]=1)}}});e.exports=v},function(e,d,t){var n=t(0),u=t(18),s=t(17),o=new n({initialize:function(a,l,c,f,v,p,g){this.texture=a,this.name=l,this.source=a.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,f,v)},setSize:function(h,a,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.cutX=l,this.cutY=c,this.cutWidth=h,this.cutHeight=a,this.width=h,this.height=a,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(a*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(a/2);var f=this.data,v=f.cut;v.x=l,v.y=c,v.w=h,v.h=a,v.r=l+h,v.b=c+a,f.sourceSize.w=h,f.sourceSize.h=a,f.spriteSourceSize.w=h,f.spriteSourceSize.h=a,f.radius=.5*Math.sqrt(h*h+a*a);var p=f.drawImage;return p.x=l,p.y=c,p.width=h,p.height=a,this.updateUVs()},setTrim:function(h,a,l,c,f,v){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=h,p.sourceSize.h=a,g.x=l,g.y=c,g.w=f,g.h=v,g.r=l+f,g.b=c+v,this.x=l,this.y=c,this.width=f,this.height=v,this.halfWidth=f*.5,this.halfHeight=v*.5,this.centerX=Math.floor(f/2),this.centerY=Math.floor(v/2),this.updateUVs()},setCropUVs:function(h,a,l,c,f,v,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;a=u(a,0,T),l=u(l,0,C),c=u(c,0,T-a),f=u(f,0,C-l);var S=g+a,E=m+l,M=c,R=f,L=this.data;if(L.trim){var O=L.spriteSourceSize;c=u(c,0,x-a),f=u(f,0,y-l);var F=a+c,D=l+f,B=!(O.r<a||O.b<l||O.x>F||O.y>D);if(B){var b=Math.max(O.x,a),V=Math.max(O.y,l),X=Math.min(O.r,F)-b,K=Math.min(O.b,D)-V;M=X,R=K,v?S=g+(x-(b-O.x)-X):S=g+(b-O.x),p?E=m+(y-(V-O.y)-K):E=m+(V-O.y),a=b,l=V,c=X,f=K}else S=0,E=0,M=0,R=0}else v&&(S=g+(x-a-c)),p&&(E=m+(y-l-f));var J=this.source.width,G=this.source.height;return h.u0=Math.max(0,S/J),h.v0=Math.max(0,E/G),h.u1=Math.min(1,(S+M)/J),h.v1=Math.min(1,(E+R)/G),h.x=a,h.y=l,h.cx=S,h.cy=E,h.cw=M,h.ch=R,h.width=c,h.height=f,h.flipX=v,h.flipY=p,h},updateCropUVs:function(h,a,l){return this.setCropUVs(h,h.x,h.y,h.width,h.height,a,l)},setUVs:function(h,a,l,c,f,v){var p=this.data.drawImage;return p.width=h,p.height=a,this.u0=l,this.v0=c,this.u1=f,this.v1=v,this},updateUVs:function(){var h=this.cutX,a=this.cutY,l=this.cutWidth,c=this.cutHeight,f=this.data.drawImage;f.width=l,f.height=c;var v=this.source.width,p=this.source.height;return this.u0=h/v,this.v0=a/p,this.u1=(h+l)/v,this.v1=(a+c)/p,this},updateUVsInverted:function(){var h=this.source.width,a=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/a,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/a,this},clone:function(){var h=new o(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=s(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=o},function(e,d,t){var n=t(208),u=t(0),s=t(1),o=t(79),h=new u({initialize:function(l){this.parent=l,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(a,l){return l?n.Add(this.list,a):n.Add(this.list,a,0,this.addCallback,this)},addAt:function(a,l,c){return c?n.AddAt(this.list,a,l):n.AddAt(this.list,a,l,0,this.addCallback,this)},getAt:function(a){return this.list[a]},getIndex:function(a){return this.list.indexOf(a)},sort:function(a,l){return a?(l===void 0&&(l=function(c,f){return c[a]-f[a]}),o(this.list,l),this):this},getByName:function(a){return n.GetFirst(this.list,"name",a)},getRandom:function(a,l){return n.GetRandom(this.list,a,l)},getFirst:function(a,l,c,f){return n.GetFirst(this.list,a,l,c,f)},getAll:function(a,l,c,f){return n.GetAll(this.list,a,l,c,f)},count:function(a,l){return n.CountAllMatching(this.list,a,l)},swap:function(a,l){n.Swap(this.list,a,l)},moveTo:function(a,l){return n.MoveTo(this.list,a,l)},moveAbove:function(a,l){return n.MoveAbove(this.list,a,l)},moveBelow:function(a,l){return n.MoveBelow(this.list,a,l)},remove:function(a,l){return l?n.Remove(this.list,a):n.Remove(this.list,a,this.removeCallback,this)},removeAt:function(a,l){return l?n.RemoveAt(this.list,a):n.RemoveAt(this.list,a,this.removeCallback,this)},removeBetween:function(a,l,c){return c?n.RemoveBetween(this.list,a,l):n.RemoveBetween(this.list,a,l,this.removeCallback,this)},removeAll:function(a){for(var l=this.list.length;l--;)this.remove(this.list[l],a);return this},bringToTop:function(a){return n.BringToTop(this.list,a)},sendToBack:function(a){return n.SendToBack(this.list,a)},moveUp:function(a){return n.MoveUp(this.list,a),a},moveDown:function(a){return n.MoveDown(this.list,a),a},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(a,l){return n.Replace(this.list,a,l)},exists:function(a){return this.list.indexOf(a)>-1},setAll:function(a,l,c,f){return n.SetAll(this.list,a,l,c,f),this},each:function(a,l){for(var c=[null],f=2;f<arguments.length;f++)c.push(arguments[f]);for(f=0;f<this.list.length;f++)c[0]=this.list[f],a.apply(l,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=h},function(e,d,t){var n=t(0),u=t(112),s=t(445),o=t(446),h=t(56),a=t(180),l=new n({initialize:function(f,v,p,g){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.ELLIPSE,this.x=f,this.y=v,this.width=p,this.height=g},contains:function(c,f){return u(this,c,f)},getPoint:function(c,f){return s(this,c,f)},getPoints:function(c,f,v){return o(this,c,f,v)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,f,v,p){return this.x=c,this.y=f,this.width=v,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,f){return f===void 0&&(f=c),this.x=c,this.y=f,this},setSize:function(c,f){return f===void 0&&(f=c),this.width=c,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});e.exports=l},function(e,d){var t=function(n,u,s){if(n.width<=0||n.height<=0)return!1;var o=(u-n.x)/n.width,h=(s-n.y)/n.height;return o*=o,h*=h,o+h<.25};e.exports=t},function(e,d,t){var n=t(275),u=t(0),s=t(75),o=t(9),h=t(207),a=t(2),l=t(6),c=t(7),f=t(437),v=t(149),p=t(73),g=new u({Extends:o,initialize:function(x,y,T){o.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?c(y[0])&&(T=y,y=null):c(y)&&(T=y,y=null),this.scene=x,this.children=new v,this.isParent=!0,this.type="Group",this.classType=a(T,"classType",p),this.name=a(T,"name",""),this.active=a(T,"active",!0),this.maxSize=a(T,"maxSize",-1),this.defaultKey=a(T,"defaultKey",null),this.defaultFrame=a(T,"defaultFrame",null),this.runChildUpdate=a(T,"runChildUpdate",!1),this.createCallback=a(T,"createCallback",null),this.removeCallback=a(T,"removeCallback",null),this.createMultipleCallback=a(T,"createMultipleCallback",null),this.internalCreateCallback=a(T,"internalCreateCallback",null),this.internalRemoveCallback=a(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,C,S){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=a(m,"classType",this.classType);var x=a(m,"key",void 0),y=a(m,"frame",null),T=a(m,"visible",!0),C=a(m,"active",!0),S=[];if(x===void 0)return S;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=a(m,"repeat",0),M=a(m,"randomKey",!1),R=a(m,"randomFrame",!1),L=a(m,"yoyo",!1),O=a(m,"quantity",!1),F=a(m,"frameQuantity",1),D=a(m,"max",0),B=f(x,y,{max:D,qty:O||F,random:M,randomB:R,repeat:E,yoyo:L});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var b=0;b<B.length;b++){var V=this.create(0,0,B[b].a,B[b].b,T,C);if(!V)break;S.push(V)}var X=l(m,"setXY.x",0),K=l(m,"setXY.y",0),J=l(m,"setXY.stepX",0),G=l(m,"setXY.stepY",0);n.SetXY(S,X,K,J,G);var w=l(m,"setRotation.value",0),N=l(m,"setRotation.step",0);n.SetRotation(S,w,N);var z=l(m,"setScale.x",1),U=l(m,"setScale.y",z),W=l(m,"setScale.stepX",0),H=l(m,"setScale.stepY",0);n.SetScale(S,z,U,W,H);var Z=l(m,"setOrigin.x",.5),q=l(m,"setOrigin.y",Z),_=l(m,"setOrigin.stepX",0),nt=l(m,"setOrigin.stepY",0);n.SetOrigin(S,Z,q,_,nt);var rt=l(m,"setAlpha.value",1),at=l(m,"setAlpha.step",0);n.SetAlpha(S,rt,at);var vt=l(m,"setDepth.value",0),ut=l(m,"setDepth.step",0);n.SetDepth(S,vt,ut);var ct=l(m,"setScrollFactor.x",1),Ft=l(m,"setScrollFactor.y",ct),yt=l(m,"setScrollFactor.stepX",0),Tt=l(m,"setScrollFactor.stepY",0);n.SetScrollFactor(S,ct,Ft,yt,Tt);var dt=a(m,"hitArea",null),It=a(m,"hitAreaCallback",null);dt&&n.SetHitArea(S,dt,It);var gt=a(m,"gridAlign",!1);return gt&&n.GridAlign(S,gt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(s.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(s.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(s.DESTROY,this.remove,this),x?C.destroy():m&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return h(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,C,S,E){return this.getHandler(!0,1,m,x,y,T,C,S,E)},getFirstNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!0,m,x,y,T,C,S,E,M)},getLast:function(m,x,y,T,C,S,E){return this.getHandler(!1,1,m,x,y,T,C,S,E)},getLastNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!1,m,x,y,T,C,S,E,M)},getHandler:function(m,x,y,T,C,S,E,M,R){y===void 0&&(y=!1),T===void 0&&(T=!1);var L,O,F=0,D=this.children.entries;if(m)for(O=0;O<D.length;O++)if(L=D[O],L.active===y){if(F++,F===x)break}else L=null;else for(O=D.length-1;O>=0;O--)if(L=D[O],L.active===y){if(F++,F===x)break}else L=null;return L?(typeof C=="number"&&(L.x=C),typeof S=="number"&&(L.y=S),L):T?this.create(C,S,E,M,R):null},get:function(m,x,y,T,C){return this.getFirst(!1,!0,m,x,y,T,C)},getFirstAlive:function(m,x,y,T,C,S){return this.getFirst(!0,m,x,y,T,C,S)},getFirstDead:function(m,x,y,T,C,S){return this.getFirst(!1,m,x,y,T,C,S)},playAnimation:function(m,x){return n.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,C){return n.PropertyValueSet(this.children.entries,m,x,y,T,C),this},propertyValueInc:function(m,x,y,T,C){return n.PropertyValueInc(this.children.entries,m,x,y,T,C),this},setX:function(m,x){return n.SetX(this.children.entries,m,x),this},setY:function(m,x){return n.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return n.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return n.IncX(this.children.entries,m,x),this},incY:function(m,x){return n.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return n.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return n.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return n.Angle(this.children.entries,m,x),this},rotate:function(m,x){return n.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return n.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return n.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return n.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return n.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return n.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return n.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return n.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return n.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return n.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return n.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return n.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return n.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(s.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,d,t){var n=t(12),u=function(s,o,h,a,l,c){for(var f=n.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*a),v=h.pathData,p=h.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=v[m+0]-l,C=v[m+1]-c,S=v[x+0]-l,E=v[x+1]-c,M=v[y+0]-l,R=v[y+1]-c,L=o.getX(T,C),O=o.getY(T,C),F=o.getX(S,E),D=o.getY(S,E),B=o.getX(M,R),b=o.getY(M,R);s.batchTri(h,L,O,F,D,B,b,0,0,1,1,f,f,f,2)}};e.exports=u},function(e,d){var t=function(n,u,s){var o=n.x3-n.x1,h=n.y3-n.y1,a=n.x2-n.x1,l=n.y2-n.y1,c=u-n.x1,f=s-n.y1,v=o*o+h*h,p=o*a+h*l,g=o*c+h*f,m=a*a+l*l,x=a*c+l*f,y=v*m-p*p,T=y===0?0:1/y,C=(m*g-p*x)*T,S=(v*x-p*g)*T;return C>=0&&S>=0&&C+S<1};e.exports=t},function(e,d,t){var n=t(0),u=t(10),s=t(3);function o(a,l,c,f){var v=a-c,p=l-f,g=v*v+p*p;return Math.sqrt(g)}var h=new n({initialize:function(l,c,f){this.vertex1=l,this.vertex2=c,this.vertex3=f,this.bounds=new u,this._inCenter=new s},getInCenter:function(a){a===void 0&&(a=!0);var l=this.vertex1,c=this.vertex2,f=this.vertex3,v,p,g,m,x,y;a?(v=l.x,p=l.y,g=c.x,m=c.y,x=f.x,y=f.y):(v=l.vx,p=l.vy,g=c.vx,m=c.vy,x=f.vx,y=f.vy);var T=o(x,y,g,m),C=o(v,p,x,y),S=o(g,m,v,p),E=T+C+S;return this._inCenter.set((v*T+g*C+x*S)/E,(p*T+m*C+y*S)/E)},contains:function(a,l,c){var f=this.vertex1,v=this.vertex2,p=this.vertex3,g=f.vx,m=f.vy,x=v.vx,y=v.vy,T=p.vx,C=p.vy;if(c){var S=c.a,E=c.b,M=c.c,R=c.d,L=c.e,O=c.f;g=f.vx*S+f.vy*M+L,m=f.vx*E+f.vy*R+O,x=v.vx*S+v.vy*M+L,y=v.vx*E+v.vy*R+O,T=p.vx*S+p.vy*M+L,C=p.vx*E+p.vy*R+O}var F=T-g,D=C-m,B=x-g,b=y-m,V=a-g,X=l-m,K=F*F+D*D,J=F*B+D*b,G=F*V+D*X,w=B*B+b*b,N=B*V+b*X,z=K*w-J*J,U=z===0?0:1/z,W=(w*G-J*N)*U,H=(K*N-J*G)*U;return W>=0&&H>=0&&W+H<1},isCounterClockwise:function(a){var l=this.vertex1,c=this.vertex2,f=this.vertex3,v=(c.vx-l.vx)*(f.vy-l.vy)-(c.vy-l.vy)*(f.vx-l.vx);return a<=0?v>=0:v<0},load:function(a,l,c,f,v){return c=this.vertex1.load(a,l,c,f,v),c=this.vertex2.load(a,l,c,f,v),c=this.vertex3.load(a,l,c,f,v),c},transformCoordinatesLocal:function(a,l,c,f){return this.vertex1.transformCoordinatesLocal(a,l,c,f),this.vertex2.transformCoordinatesLocal(a,l,c,f),this.vertex3.transformCoordinatesLocal(a,l,c,f),this},updateBounds:function(){var a=this.vertex1,l=this.vertex2,c=this.vertex3,f=this.bounds;return f.x=Math.min(a.vx,l.vx,c.vx),f.y=Math.min(a.vy,l.vy,c.vy),f.width=Math.max(a.vx,l.vx,c.vx)-f.x,f.height=Math.max(a.vy,l.vy,c.vy)-f.y,this},isInView:function(a,l,c,f,v,p,g,m,x,y,T){var C=this.vertex1.update(v,p,g,m,x,y,T,f),S=this.vertex2.update(v,p,g,m,x,y,T,f),E=this.vertex3.update(v,p,g,m,x,y,T,f);if(C.ta<=0&&S.ta<=0&&E.ta<=0||l&&!this.isCounterClockwise(c))return!1;var M=this.bounds;M.x=Math.min(C.tx,S.tx,E.tx),M.y=Math.min(C.ty,S.ty,E.ty),M.width=Math.max(C.tx,S.tx,E.tx)-M.x,M.height=Math.max(C.ty,S.ty,E.ty)-M.y;var R=a.x+a.width,L=a.y+a.height;return M.width<=0||M.height<=0||a.width<=0||a.height<=0?!1:!(M.right<a.x||M.bottom<a.y||M.x>R||M.y>L)},translate:function(a,l){l===void 0&&(l=0);var c=this.vertex1,f=this.vertex2,v=this.vertex3;return c.x+=a,c.y+=l,f.x+=a,f.y+=l,v.x+=a,v.y+=l,this},x:{get:function(){return this.getInCenter().x},set:function(a){var l=this.getInCenter();this.translate(a-l.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(a){var l=this.getInCenter();this.translate(0,a-l.y)}},alpha:{get:function(){var a=this.vertex1,l=this.vertex2,c=this.vertex3;return(a.alpha+l.alpha+c.alpha)/3},set:function(a){this.vertex1.alpha=a,this.vertex2.alpha=a,this.vertex3.alpha=a}},depth:{get:function(){var a=this.vertex1,l=this.vertex2,c=this.vertex3;return(a.vz+l.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=h},function(e,d,t){var n=t(0),u=t(12),s=t(39),o=new n({Extends:s,initialize:function(a,l,c,f,v,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),s.call(this,a,l,c),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=f,this.v=v,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(h,a){return this.u=h,this.v=a,this},transformCoordinatesLocal:function(h,a,l,c){var f=this.x,v=this.y,p=this.z,g=h.val,m=f*g[0]+v*g[4]+p*g[8]+g[12],x=f*g[1]+v*g[5]+p*g[9]+g[13],y=f*g[2]+v*g[6]+p*g[10]+g[14],T=f*g[3]+v*g[7]+p*g[11]+g[15];this.vx=m/T*a,this.vy=-(x/T)*l,c<=0?this.vz=y/T:this.vz=-(y/T)},update:function(h,a,l,c,f,v,p,g){var m=this.vx*h+this.vy*l+f,x=this.vx*a+this.vy*c+v;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(h,a,l,c,f){return h[++l]=this.tx,h[++l]=this.ty,h[++l]=this.u,h[++l]=this.v,h[++l]=c,h[++l]=f,a[++l]=u.getTintAppendFloatAlpha(this.color,this.ta),l}});e.exports=o},function(e,d,t){var n={};e.exports=n;var u=t(166),s=t(32),o=t(84),h=t(41);(function(){n.create=function(a){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},a)},n.setModified=function(a,l,c,f){if(u.trigger(a,"compositeModified",a),a.isModified=l,c&&a.parent&&n.setModified(a.parent,l,c,f),f)for(var v=0;v<a.composites.length;v++){var p=a.composites[v];n.setModified(p,l,c,f)}},n.add=function(a,l){var c=[].concat(l);u.trigger(a,"beforeAdd",{object:l});for(var f=0;f<c.length;f++){var v=c[f];switch(v.type){case"body":if(v.parent!==v){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(a,v);break;case"constraint":n.addConstraint(a,v);break;case"composite":n.addComposite(a,v);break;case"mouseConstraint":n.addConstraint(a,v.constraint);break}}return u.trigger(a,"afterAdd",{object:l}),a},n.remove=function(a,l,c){var f=[].concat(l);u.trigger(a,"beforeRemove",{object:l});for(var v=0;v<f.length;v++){var p=f[v];switch(p.type){case"body":n.removeBody(a,p,c);break;case"constraint":n.removeConstraint(a,p,c);break;case"composite":n.removeComposite(a,p,c);break;case"mouseConstraint":n.removeConstraint(a,p.constraint);break}}return u.trigger(a,"afterRemove",{object:l}),a},n.addComposite=function(a,l){return a.composites.push(l),l.parent=a,n.setModified(a,!0,!0,!1),a},n.removeComposite=function(a,l,c){var f=a.composites.indexOf(l);if(f!==-1&&(n.removeCompositeAt(a,f),n.setModified(a,!0,!0,!1)),c)for(var v=0;v<a.composites.length;v++)n.removeComposite(a.composites[v],l,!0);return a},n.removeCompositeAt=function(a,l){return a.composites.splice(l,1),n.setModified(a,!0,!0,!1),a},n.addBody=function(a,l){return a.bodies.push(l),n.setModified(a,!0,!0,!1),a},n.removeBody=function(a,l,c){var f=a.bodies.indexOf(l);if(f!==-1&&(n.removeBodyAt(a,f),n.setModified(a,!0,!0,!1)),c)for(var v=0;v<a.composites.length;v++)n.removeBody(a.composites[v],l,!0);return a},n.removeBodyAt=function(a,l){return a.bodies.splice(l,1),n.setModified(a,!0,!0,!1),a},n.addConstraint=function(a,l){return a.constraints.push(l),n.setModified(a,!0,!0,!1),a},n.removeConstraint=function(a,l,c){var f=a.constraints.indexOf(l);if(f!==-1&&n.removeConstraintAt(a,f),c)for(var v=0;v<a.composites.length;v++)n.removeConstraint(a.composites[v],l,!0);return a},n.removeConstraintAt=function(a,l){return a.constraints.splice(l,1),n.setModified(a,!0,!0,!1),a},n.clear=function(a,l,c){if(c)for(var f=0;f<a.composites.length;f++)n.clear(a.composites[f],l,!0);return l?a.bodies=a.bodies.filter(function(v){return v.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,n.setModified(a,!0,!0,!1),a},n.allBodies=function(a){for(var l=[].concat(a.bodies),c=0;c<a.composites.length;c++)l=l.concat(n.allBodies(a.composites[c]));return l},n.allConstraints=function(a){for(var l=[].concat(a.constraints),c=0;c<a.composites.length;c++)l=l.concat(n.allConstraints(a.composites[c]));return l},n.allComposites=function(a){for(var l=[].concat(a.composites),c=0;c<a.composites.length;c++)l=l.concat(n.allComposites(a.composites[c]));return l},n.get=function(a,l,c){var f,v;switch(c){case"body":f=n.allBodies(a);break;case"constraint":f=n.allConstraints(a);break;case"composite":f=n.allComposites(a).concat(a);break}return f?(v=f.filter(function(p){return p.id.toString()===l.toString()}),v.length===0?null:v[0]):null},n.move=function(a,l,c){return n.remove(a,l),n.add(c,l),a},n.rebase=function(a){for(var l=n.allBodies(a).concat(n.allConstraints(a)).concat(n.allComposites(a)),c=0;c<l.length;c++)l[c].id=s.nextId();return n.setModified(a,!0,!0,!1),a},n.translate=function(a,l,c){for(var f=c?n.allBodies(a):a.bodies,v=0;v<f.length;v++)h.translate(f[v],l);return n.setModified(a,!0,!0,!1),a},n.rotate=function(a,l,c,f){for(var v=Math.cos(l),p=Math.sin(l),g=f?n.allBodies(a):a.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-c.x,T=x.position.y-c.y;h.setPosition(x,{x:c.x+(y*v-T*p),y:c.y+(y*p+T*v)}),h.rotate(x,l)}return n.setModified(a,!0,!0,!1),a},n.scale=function(a,l,c,f,v){for(var p=v?n.allBodies(a):a.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-f.x,y=m.position.y-f.y;h.setPosition(m,{x:f.x+x*l,y:f.y+y*c}),h.scale(m,l,c)}return n.setModified(a,!0,!0,!1),a},n.bounds=function(a){for(var l=n.allBodies(a),c=[],f=0;f<l.length;f+=1){var v=l[f];c.push(v.bounds.min,v.bounds.max)}return o.create(c)}})()},function(e,d){var t=function(n,u,s){return n>=0&&n<s.width&&u>=0&&u<s.height};e.exports=t},function(e,d,t){var n=t(0),u=t(29),s=t(2),o=new n({initialize:function(a){a===void 0&&(a={}),this.name=s(a,"name","layer"),this.x=s(a,"x",0),this.y=s(a,"y",0),this.width=s(a,"width",0),this.height=s(a,"height",0),this.tileWidth=s(a,"tileWidth",0),this.tileHeight=s(a,"tileHeight",0),this.baseTileWidth=s(a,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(a,"baseTileHeight",this.tileHeight),this.orientation=s(a,"orientation",u.ORTHOGONAL),this.widthInPixels=s(a,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(a,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(a,"alpha",1),this.visible=s(a,"visible",!0),this.properties=s(a,"properties",[]),this.indexes=s(a,"indexes",[]),this.collideIndexes=s(a,"collideIndexes",[]),this.callbacks=s(a,"callbacks",[]),this.bodies=s(a,"bodies",[]),this.data=s(a,"data",[]),this.tilemapLayer=s(a,"tilemapLayer",null),this.hexSideLength=s(a,"hexSideLength",0)}});e.exports=o},function(e,d,t){var n=t(0),u=t(29),s=t(2),o=new n({initialize:function(a){a===void 0&&(a={}),this.name=s(a,"name","map"),this.width=s(a,"width",0),this.height=s(a,"height",0),this.infinite=s(a,"infinite",!1),this.tileWidth=s(a,"tileWidth",0),this.tileHeight=s(a,"tileHeight",0),this.widthInPixels=s(a,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(a,"heightInPixels",this.height*this.tileHeight),this.format=s(a,"format",null),this.orientation=s(a,"orientation",u.ORTHOGONAL),this.renderOrder=s(a,"renderOrder","right-down"),this.version=s(a,"version","1"),this.properties=s(a,"properties",{}),this.layers=s(a,"layers",[]),this.images=s(a,"images",[]),this.objects=s(a,"objects",{}),this.collision=s(a,"collision",{}),this.tilesets=s(a,"tilesets",[]),this.imageCollections=s(a,"imageCollections",[]),this.tiles=s(a,"tiles",[]),this.hexSideLength=s(a,"hexSideLength",0)}});e.exports=o},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l,c,f,v,p){(a===void 0||a<=0)&&(a=32),(l===void 0||l<=0)&&(l=32),c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v={}),p===void 0&&(p={}),this.name=o,this.firstgid=h,this.tileWidth=a,this.tileHeight=l,this.tileMargin=c,this.tileSpacing=f,this.tileProperties=v,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(s){return this.containsTileIndex(s)?this.tileProperties[s-this.firstgid]:null},getTileData:function(s){return this.containsTileIndex(s)?this.tileData[s-this.firstgid]:null},getTileCollisionGroup:function(s){var o=this.getTileData(s);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(s){return s>=this.firstgid&&s<this.firstgid+this.total},getTileTextureCoordinates:function(s){return this.containsTileIndex(s)?this.texCoordinates[s-this.firstgid]:null},setImage:function(s){return this.image=s,this.glTexture=s.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(s,o){return s!==void 0&&(this.tileWidth=s),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(s,o){return s!==void 0&&(this.tileMargin=s),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(s,o){var h=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(s-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(h%1!=0||a%1!=0)&&console.warn("Image tile area not tile size multiple in: "+this.name),h=Math.floor(h),a=Math.floor(a),this.rows=h,this.columns=a,this.total=h*a,this.texCoordinates.length=0;for(var l=this.tileMargin,c=this.tileMargin,f=0;f<this.rows;f++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:l,y:c}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin,c+=this.tileHeight+this.tileSpacing}return this}});e.exports=u},function(e,d){var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=t},function(e,d){var t=function(n,u,s){return s===void 0&&(s=1e-4),Math.abs(n-u)<s};e.exports=t},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(1068),h=new n({Extends:s,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,o],initialize:function(l,c,f,v,p){s.call(this,l,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,p),this.setPosition(c,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=h},function(e,d){var t=function(n,u){return n.hasOwnProperty(u)};e.exports=t},function(e,d,t){var n=t(77),u=function(s,o){var h=n(s);for(var a in o)h.hasOwnProperty(a)||(h[a]=o[a]);return h};e.exports=u},function(e,d,t){var n={};e.exports=n;var u=t(64),s=t(83),o=t(165),h=t(84),a=t(271),l=t(32);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(c){var f=c;f.bodyA&&!f.pointA&&(f.pointA={x:0,y:0}),f.bodyB&&!f.pointB&&(f.pointB={x:0,y:0});var v=f.bodyA?s.add(f.bodyA.position,f.pointA):f.pointA,p=f.bodyB?s.add(f.bodyB.position,f.pointB):f.pointB,g=s.magnitude(s.sub(v,p));f.length=typeof f.length!="undefined"?f.length:g,f.id=f.id||l.nextId(),f.label=f.label||"Constraint",f.type="constraint",f.stiffness=f.stiffness||(f.length>0?1:.7),f.damping=f.damping||0,f.angularStiffness=f.angularStiffness||0,f.angleA=f.bodyA?f.bodyA.angle:f.angleA,f.angleB=f.bodyB?f.bodyB.angle:f.angleB,f.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return f.length===0&&f.stiffness>.1?(m.type="pin",m.anchors=!1):f.stiffness<.9&&(m.type="spring"),f.render=l.extend(m,f.render),f},n.preSolveAll=function(c){for(var f=0;f<c.length;f+=1){var v=c[f],p=v.constraintImpulse;v.isStatic||p.x===0&&p.y===0&&p.angle===0||(v.position.x+=p.x,v.position.y+=p.y,v.angle+=p.angle)}},n.solveAll=function(c,f){for(var v=0;v<c.length;v+=1){var p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&n.solve(c[v],f)}for(v=0;v<c.length;v+=1)p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&n.solve(c[v],f)},n.solve=function(c,f){var v=c.bodyA,p=c.bodyB,g=c.pointA,m=c.pointB;if(!(!v&&!p)){v&&!v.isStatic&&(s.rotate(g,v.angle-c.angleA,g),c.angleA=v.angle),p&&!p.isStatic&&(s.rotate(m,p.angle-c.angleB,m),c.angleB=p.angle);var x=g,y=m;if(v&&(x=s.add(v.position,g)),p&&(y=s.add(p.position,m)),!(!x||!y)){var T=s.sub(x,y),C=s.magnitude(T);C<n._minLength&&(C=n._minLength);var S=(C-c.length)/C,E=c.stiffness<1?c.stiffness*f:c.stiffness,M=s.mult(T,S*E),R=(v?v.inverseMass:0)+(p?p.inverseMass:0),L=(v?v.inverseInertia:0)+(p?p.inverseInertia:0),O=R+L,F,D,B,b,V;if(c.damping){var X=s.create();B=s.div(T,C),V=s.sub(p&&s.sub(p.position,p.positionPrev)||X,v&&s.sub(v.position,v.positionPrev)||X),b=s.dot(B,V)}v&&!v.isStatic&&(D=v.inverseMass/R,v.constraintImpulse.x-=M.x*D,v.constraintImpulse.y-=M.y*D,v.position.x-=M.x*D,v.position.y-=M.y*D,c.damping&&(v.positionPrev.x-=c.damping*B.x*b*D,v.positionPrev.y-=c.damping*B.y*b*D),F=s.cross(g,M)/O*n._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=F,v.angle-=F),p&&!p.isStatic&&(D=p.inverseMass/R,p.constraintImpulse.x+=M.x*D,p.constraintImpulse.y+=M.y*D,p.position.x+=M.x*D,p.position.y+=M.y*D,c.damping&&(p.positionPrev.x+=c.damping*B.x*b*D,p.positionPrev.y+=c.damping*B.y*b*D),F=s.cross(m,M)/O*n._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle+=F,p.angle+=F)}}},n.postSolveAll=function(c){for(var f=0;f<c.length;f++){var v=c[f],p=v.constraintImpulse;if(!(v.isStatic||p.x===0&&p.y===0&&p.angle===0)){o.set(v,!1);for(var g=0;g<v.parts.length;g++){var m=v.parts[g];u.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(u.rotate(m.vertices,p.angle,v.position),a.rotate(m.axes,p.angle),g>0&&s.rotateAbout(m.position,p.angle,v.position,m.position)),h.update(m.bounds,m.vertices,v.velocity)}p.angle*=n._warming,p.x*=n._warming,p.y*=n._warming}}},n.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+c.pointA.x,y:(c.bodyA?c.bodyA.position.y:0)+c.pointA.y}},n.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+c.pointB.x,y:(c.bodyB?c.bodyB.position.y:0)+c.pointB.y}}})()},function(e,d,t){var n=t(35),u=t(65),s=t(66),o=t(0),h=t(11),a=t(15),l=t(10),c=t(57),f=new o({Extends:a,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),a.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,p,g){g===void 0&&(g=!0),this.width=v,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=v,m.hitArea.height=p),this},setDisplaySize:function(v,p){return this.displayWidth=v,this.displayHeight=p,this},setCircleDropZone:function(v){return this.setDropZone(new u(0,0,v),s)},setRectangleDropZone:function(v,p){return this.setDropZone(new l(0,0,v,p),c)},setDropZone:function(v,p){return v===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(v,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,p,g){g.addToRenderList(p)},renderWebGL:function(v,p,g){g.addToRenderList(p)}});e.exports=f},function(e,d){var t=function(n){return 2*(n.width+n.height)};e.exports=t},function(e,d){var t=function(n){for(var u=n.length-1;u>0;u--){var s=Math.floor(Math.random()*(u+1)),o=n[u];n[u]=n[s],n[s]=o}return n};e.exports=t},function(e,d,t){e.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(e,d,t){var n=t(0),u=t(11),s=t(36),o=t(9),h=t(37),a=t(10),l=t(25),c=t(187),f=t(3),v=new n({Extends:o,Mixins:[u.Alpha,u.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new a,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new a,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new f(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new f);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],C=m*T-x*y;if(!C)return p;var S=g[4],E=g[5],M=this.scrollX,R=this.scrollY,L=this.width,O=this.height,F=this.y,D=F+O,B=this.x,b=B+L,V=this.culledObjects,X=p.length;C=1/C,V.length=0;for(var K=0;K<X;++K){var J=p[K];if(!J.hasOwnProperty("width")||J.parentContainer){V.push(J);continue}var G=J.width,w=J.height,N=J.x-M*J.scrollFactorX-G*J.originX,z=J.y-R*J.scrollFactorY-w*J.originY,U=N*m+z*y+S,W=N*x+z*T+E,H=(N+G)*m+(z+w)*y+S,Z=(N+G)*x+(z+w)*T+E;H>B&&U<b&&Z>F&&W<D&&V.push(J)}return V},getWorldPoint:function(p,g,m){m===void 0&&(m=new f);var x=this.matrix.matrix,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],R=y*S-T*C;if(!R)return m.x=p,m.y=g,m;R=1/R;var L=S*R,O=-T*R,F=-C*R,D=y*R,B=(C*M-S*E)*R,b=(T*E-y*M)*R,V=Math.cos(this.rotation),X=Math.sin(this.rotation),K=this.zoomX,J=this.zoomY,G=this.scrollX,w=this.scrollY,N=p+(G*V-w*X)*K,z=g+(G*X+w*V)*J;return m.x=N*L+z*F+B,m.y=N*O+z*D+b,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=p*this.originX,E=g*this.originY,M=this.scrollX,R=this.scrollY;this.useBounds&&(M=this.clampX(M),R=this.clampY(R)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=M,this.scrollY=R;var L=M+m,O=R+x;this.midPoint.set(L,O);var F=p/y,D=g/T;this.worldView.setTo(L-F/2,O-D/2,F,D),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=s(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=c(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new a);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=v},function(e,d,t){var n=t(334),u=t(335),s=t(336),o=t(337),h=t(338),a=t(339),l=t(340),c=t(341),f=t(342),v=t(343),p=t(344),g=t(345);e.exports={Power0:l,Power1:c.Out,Power2:o.Out,Power3:f.Out,Power4:v.Out,Linear:l,Quad:c.Out,Cubic:o.Out,Quart:f.Out,Quint:v.Out,Sine:p.Out,Expo:a.Out,Circ:s.Out,Elastic:h.Out,Back:n.Out,Bounce:u.Out,Stepped:g,"Quad.easeIn":c.In,"Cubic.easeIn":o.In,"Quart.easeIn":f.In,"Quint.easeIn":v.In,"Sine.easeIn":p.In,"Expo.easeIn":a.In,"Circ.easeIn":s.In,"Elastic.easeIn":h.In,"Back.easeIn":n.In,"Bounce.easeIn":u.In,"Quad.easeOut":c.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":f.Out,"Quint.easeOut":v.Out,"Sine.easeOut":p.Out,"Expo.easeOut":a.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":h.Out,"Back.easeOut":n.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":f.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":a.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":u.InOut}},function(e,d){var t=function(n,u,s){return(u-n)*s+n};e.exports=t},function(e,d,t){var n=t(105),u={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function s(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?u.edge=!0:/Chrome\/(\d+)/.test(o)&&!n.windowsPhone?(u.chrome=!0,u.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(u.firefox=!0,u.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&n.iOS?u.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(u.ie=!0,u.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?u.opera=!0:/Safari/.test(o)&&!n.windowsPhone?u.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(u.ie=!0,u.trident=!0,u.tridentVersion=parseInt(RegExp.$1,10),u.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(u.silk=!0),u}e.exports=s()},function(e,d){var t=function(n,u){return Math.random()*(u-n)+n};e.exports=t},function(e,d){var t=function(n,u){return n>0&&(n&n-1)==0&&u>0&&(u&u-1)==0};e.exports=t},function(e,d){var t=function(n,u,s,o){return s===void 0&&(s=0),u===0?n:(n-=s,n=u*Math.ceil(n/u),o?(s+n)/u:s+n)};e.exports=t},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=h||0,this.z=a||0,this.w=l||0)},clone:function(){return new u(this.x,this.y,this.z,this.w)},copy:function(s){return this.x=s.x,this.y=s.y,this.z=s.z||0,this.w=s.w||0,this},equals:function(s){return this.x===s.x&&this.y===s.y&&this.z===s.z&&this.w===s.w},set:function(s,o,h,a){return typeof s=="object"?(this.x=s.x||0,this.y=s.y||0,this.z=s.z||0,this.w=s.w||0):(this.x=s||0,this.y=o||0,this.z=h||0,this.w=a||0),this},add:function(s){return this.x+=s.x,this.y+=s.y,this.z+=s.z||0,this.w+=s.w||0,this},subtract:function(s){return this.x-=s.x,this.y-=s.y,this.z-=s.z||0,this.w-=s.w||0,this},scale:function(s){return this.x*=s,this.y*=s,this.z*=s,this.w*=s,this},length:function(){var s=this.x,o=this.y,h=this.z,a=this.w;return Math.sqrt(s*s+o*o+h*h+a*a)},lengthSq:function(){var s=this.x,o=this.y,h=this.z,a=this.w;return s*s+o*o+h*h+a*a},normalize:function(){var s=this.x,o=this.y,h=this.z,a=this.w,l=s*s+o*o+h*h+a*a;return l>0&&(l=1/Math.sqrt(l),this.x=s*l,this.y=o*l,this.z=h*l,this.w=a*l),this},dot:function(s){return this.x*s.x+this.y*s.y+this.z*s.z+this.w*s.w},lerp:function(s,o){o===void 0&&(o=0);var h=this.x,a=this.y,l=this.z,c=this.w;return this.x=h+o*(s.x-h),this.y=a+o*(s.y-a),this.z=l+o*(s.z-l),this.w=c+o*(s.w-c),this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this.z*=s.z||1,this.w*=s.w||1,this},divide:function(s){return this.x/=s.x,this.y/=s.y,this.z/=s.z||1,this.w/=s.w||1,this},distance:function(s){var o=s.x-this.x,h=s.y-this.y,a=s.z-this.z||0,l=s.w-this.w||0;return Math.sqrt(o*o+h*h+a*a+l*l)},distanceSq:function(s){var o=s.x-this.x,h=s.y-this.y,a=s.z-this.z||0,l=s.w-this.w||0;return o*o+h*h+a*a+l*l},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(s){var o=this.x,h=this.y,a=this.z,l=this.w,c=s.val;return this.x=c[0]*o+c[4]*h+c[8]*a+c[12]*l,this.y=c[1]*o+c[5]*h+c[9]*a+c[13]*l,this.z=c[2]*o+c[6]*h+c[10]*a+c[14]*l,this.w=c[3]*o+c[7]*h+c[11]*a+c[15]*l,this},transformQuat:function(s){var o=this.x,h=this.y,a=this.z,l=s.x,c=s.y,f=s.z,v=s.w,p=v*o+c*a-f*h,g=v*h+f*o-l*a,m=v*a+l*h-c*o,x=-l*o-c*h-f*a;return this.x=p*v+x*-l+g*-f-m*-c,this.y=g*v+x*-c+m*-l-p*-f,this.z=m*v+x*-f+p*-c-g*-l,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});u.prototype.sub=u.prototype.subtract,u.prototype.mul=u.prototype.multiply,u.prototype.div=u.prototype.divide,u.prototype.dist=u.prototype.distance,u.prototype.distSq=u.prototype.distanceSq,u.prototype.len=u.prototype.length,u.prototype.lenSq=u.prototype.lengthSq,e.exports=u},function(e,d,t){var n=t(0),u=t(91),s=new n({initialize:function(h,a,l,c,f,v,p){c===void 0&&(c=1),f===void 0&&(f=0),v===void 0&&(v=!0),p===void 0&&(p=!1),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=f,this.autoClear=v,this.autoResize=!1,this.resize(a,l),p&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(u.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(u.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,h){var a=o*this.scale,l=h*this.scale;if(a!==this.width||l!==this.height){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),o*=this.scale,h*=this.scale,o=Math.round(o),h=Math.round(h),o<=0&&(o=1),h<=0&&(h=1),this.texture=c.createTextureFromSource(null,o,h,this.minFilter),this.framebuffer=c.createFramebuffer(o,h,this.texture,!1),this.width=o,this.height=h}return this},bind:function(o,h,a){if(o===void 0&&(o=!1),o&&this.renderer.flush(),h&&a&&this.resize(h,a),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var l=this.renderer.gl;l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,h=o.gl;o.pushFramebuffer(this.framebuffer),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var h=this.renderer;return o&&h.flush(),h.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(u.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=s},function(e,d){var t=function(n,u){var s;if(u)typeof u=="string"?s=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(s=u);else if(n.parentElement||u===null)return n;return s||(s=document.body),s.appendChild(n),n};e.exports=t},function(e,d){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=t},function(e,d){var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=t},function(e,d,t){var n=t(0),u=t(77),s=t(9),o=t(70),h=t(22),a=t(1),l=t(207),c=t(428),f=new n({Extends:s,initialize:function(p){s.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(h.BLUR,this.onGameBlur,this),p.events.on(h.FOCUS,this.onGameFocus,this),p.events.on(h.PRE_STEP,this.update,this),p.events.once(h.DESTROY,this.destroy,this)},add:a,addAudioSprite:function(v,p){p===void 0&&(p={});var g=this.add(v,p);g.spritemap=this.jsonCache.get(v).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=u(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(v){return c(this.sounds,"key",v)},getAll:function(v){return l(this.sounds,"key",v)},play:function(v,p){var g=this.add(v);return g.once(o.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(v,p,g){var m=this.addAudioSprite(v);return m.once(o.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(v){var p=this.sounds.indexOf(v);return p!==-1?(v.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===v&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(v){var p=0;return this.getAll(v).forEach(function(g){g.stop()&&p++}),p},unlock:a,onBlur:a,onFocus:a,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(v,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(v,p)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(v,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&v.call(p||g,m,x,g.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(o.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,v)}}});e.exports=f},function(e,d,t){var n=t(0),u=t(9),s=t(70),o=t(17),h=t(1),a=new n({Extends:u,initialize:function(c,f,v){u.call(this),this.manager=c,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(console.error("addMarker "+l.name+" already exists in Sound"),!1):(l=o(!0,{name:"",start:0,duration:this.totalDuration-(l.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},l),this.markers[l.name]=l,!0)},updateMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(this.markers[l.name]=o(!0,this.markers[l.name],l),!0):(console.warn("Audio Marker: "+l.name+" missing in Sound: "+this.key),!1)},removeMarker:function(l){var c=this.markers[l];return c?(this.markers[l]=null,c):null},play:function(l,c){if(l===void 0&&(l=""),typeof l=="object"&&(c=l,l=""),typeof l!="string")return!1;if(!l)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[l])return console.warn("Marker: "+l+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[l],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var l=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,f=Math.pow(l,c);this.totalRate=this.currentConfig.rate*this.manager.rate*f},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=a},function(e,d,t){var n=t(209),u=t(435),s=function(o,h){if(h===void 0&&(h=90),!n(o))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")o=u(o),o.reverse();else if(h===-90||h===270||h==="rotateRight")o.reverse(),o=u(o);else if(Math.abs(h)===180||h==="rotate180"){for(var a=0;a<o.length;a++)o[a].reverse();o.reverse()}return o};e.exports=s},function(e,d,t){var n=t(0),u=t(18),s=t(11),o=t(15),h=t(1043),a=t(1044),l=t(212),c=t(10),f=t(1045),v=new n({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,f],initialize:function(g,m,x,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),o.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,C){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,C=x);var S=this.text.length;g===-1&&(g=S),p<0&&(p=S+p),p=u(p,0,S-1);for(var E=u(p+g,p,S),M=this.charColors,R=p;R<E;R++){var L=M[R];if(x===-1)M[R]=null;else{var O=m?1:0;L?(L.tintEffect=O,L.tintTL=x,L.tintTR=y,L.tintBL=T,L.tintBR=C):M[R]={tintEffect:O,tintTL:x,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(p,g,m,x,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,M=typeof p=="number",R=0,L=0;L<E.length;L++){var O=E[L];if((M&&L===p||!M&&O.word===p)&&(this.setCharacterTint(O.i,O.word.length,m,x,y,T,C),R++,R===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(h(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,C=new c,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=s.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=a,v.ParseXMLBitmapFont=l,e.exports=v},function(e,d,t){var n=t(0),u=new n({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var h=0;h<o.length;h++)this.set(o[h])},set:function(s){return this.entries.indexOf(s)===-1&&this.entries.push(s),this},get:function(s,o){for(var h=0;h<this.entries.length;h++){var a=this.entries[h];if(a[s]===o)return a}},getArray:function(){return this.entries.slice(0)},delete:function(s){var o=this.entries.indexOf(s);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var s=0;s<this.entries.length;s++){var o=this.entries[s];console.log(o)}console.groupEnd()},each:function(s,o){var h,a=this.entries.slice(),l=a.length;if(o)for(h=0;h<l&&s.call(o,a[h],h)!==!1;h++);else for(h=0;h<l&&s(a[h],h)!==!1;h++);return this},iterate:function(s,o){var h,a=this.entries.length;if(o)for(h=0;h<a&&s.call(o,this.entries[h],h)!==!1;h++);else for(h=0;h<a&&s(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(s){var o,h=[];for(o=1;o<arguments.length;o++)h.push(arguments[o]);var a=this.entries.length;for(o=0;o<a;o++){var l=this.entries[o];l[s].apply(l,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(s){return this.entries.indexOf(s)>-1},union:function(s){var o=new u;return s.entries.forEach(function(h){o.set(h)}),this.entries.forEach(function(h){o.set(h)}),o},intersect:function(s){var o=new u;return this.entries.forEach(function(h){s.contains(h)&&o.set(h)}),o},difference:function(s){var o=new u;return this.entries.forEach(function(h){s.contains(h)||o.set(h)}),o},size:{get:function(){return this.entries.length},set:function(s){return s<this.entries.length?this.entries.length=s:this.entries.length}}});e.exports=u},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(189),h=t(92),a=t(1182),l=new n({Extends:s,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible,a],initialize:function(f,v,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),s.call(this,f,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.setPosition(v,p),this.color=o(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=l},function(e,d){var t=function(n,u){var s=u.width/2,o=u.height/2,h=Math.abs(n.x-u.x-s),a=Math.abs(n.y-u.y-o),l=s+n.radius,c=o+n.radius;if(h>l||a>c)return!1;if(h<=s||a<=o)return!0;var f=h-s,v=a-o,p=f*f,g=v*v,m=n.radius*n.radius;return p+g<=m};e.exports=t},function(e,d){var t=function(n,u){return n.width<=0||n.height<=0||u.width<=0||u.height<=0?!1:!(n.right<u.x||n.bottom<u.y||n.x>u.right||n.y>u.bottom)};e.exports=t},function(e,d,t){var n=t(6),u={},s={};s.register=function(o,h,a,l,c){u[o]={plugin:h,mapping:a,settingsKey:l,configKey:c}},s.getPlugin=function(o){return u[o]},s.install=function(o){var h=o.scene.sys,a=h.settings.input,l=h.game.config;for(var c in u){var f=u[c].plugin,v=u[c].mapping,p=u[c].settingsKey,g=u[c].configKey;n(a,p,l[g])&&(o[v]=new f(o))}},s.remove=function(o){u.hasOwnProperty(o)&&delete u[o]},e.exports=s},function(e,d,t){e.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(e,d){var t=function(n,u){return n.url?n.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?n.url:u+n.url:!1};e.exports=t},function(e,d){var t=function(n,u,s,o,h,a){return n===void 0&&(n=""),u===void 0&&(u=!0),s===void 0&&(s=""),o===void 0&&(o=""),h===void 0&&(h=0),a===void 0&&(a=!1),{responseType:n,async:u,user:s,password:o,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}};e.exports=t},function(e,d,t){var n=t(0),u=t(243),s=t(73),o=new n({Extends:s,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(a,l,c,f,v){s.call(this,a,l,c,f,v),this.body=null}});e.exports=o},function(e,d,t){var n=t(119),u=function(s,o,h,a){if(h===void 0&&(h=!1),n(s,o,a)){var l=a.data[o][s]||null;return l?l.index===-1?h?l:null:l:null}else return null};e.exports=u},function(e,d){var t=function(n,u,s,o){var h=n.data,a=n.width,l=n.height,c=n.tilemapLayer,f=Math.max(0,u.left),v=Math.min(a,u.right),p=Math.max(0,u.top),g=Math.min(l,u.bottom),m,x,y;if(s===0)for(x=p;x<g;x++)for(m=f;h[x]&&m<v;m++)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(s===1)for(x=p;x<g;x++)for(m=v;h[x]&&m>=f;m--)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(s===2)for(x=g;x>=p;x--)for(m=f;h[x]&&m<v;m++)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(s===3)for(x=g;x>=p;x--)for(m=v;h[x]&&m>=f;m--)y=h[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);return c.tilesDrawn=o.length,c.tilesTotal=a*l,o};e.exports=t},function(e,d){var t=function(n,u,s){var o=s.collideIndexes.indexOf(n);u&&o===-1?s.collideIndexes.push(n):!u&&o!==-1&&s.collideIndexes.splice(o,1)};e.exports=t},function(e,d,t){var n=t(2),u=function(s,o,h){if(!o)return{i:0,layers:s.layers,name:"",opacity:1,visible:!0,x:0,y:0};var a=o.x+n(o,"startx",0)*s.tilewidth+n(o,"offsetx",0),l=o.y+n(o,"starty",0)*s.tileheight+n(o,"offsety",0);return{i:0,layers:o.layers,name:h.name+o.name+"/",opacity:h.opacity*o.opacity,visible:h.visible&&o.visible,x:h.x+a,y:h.y+l}};e.exports=u},function(e,d){var t=function(n,u,s){var o;if(n.hasOwnProperty(u)){var h=typeof n[u];h==="function"?o=function(a,l,c,f,v,p){return n[u](a,l,c,f,v,p)}:o=function(){return n[u]}}else typeof s=="function"?o=s:o=function(){return s};return o};e.exports=t},function(e,d,t){var n=t(265),u=t(13),s=t(99),o=t(80),h=t(162),a=t(583),l=t(263),c=t(6),f=t(264),v=t(266),p=t(268),g=function(m,x,y){y===void 0&&(y=n);for(var T=y.targets?y.targets:l(x),C=a(x),S=h(x,"delay",y.delay),E=h(x,"duration",y.duration),M=c(x,"easeParams",y.easeParams),R=o(c(x,"ease",y.ease),M),L=h(x,"hold",y.hold),O=h(x,"repeat",y.repeat),F=h(x,"repeatDelay",y.repeatDelay),D=s(x,"yoyo",y.yoyo),B=s(x,"flipX",y.flipX),b=s(x,"flipY",y.flipY),V=[],X=0;X<C.length;X++)for(var K=C[X].key,J=C[X].value,G=0;G<T.length;G++){var w=f(K,J),N=p(T[G],G,K,w.getEnd,w.getStart,w.getActive,o(c(J,"ease",R),c(J,"easeParams",M)),h(J,"delay",S),h(J,"duration",E),s(J,"yoyo",D),h(J,"hold",L),h(J,"repeat",O),h(J,"repeatDelay",F),s(J,"flipX",B),s(J,"flipY",b));V.push(N)}var z=new v(m,V,T);z.offset=u(x,"offset",null),z.completeDelay=u(x,"completeDelay",0),z.loop=Math.round(u(x,"loop",0)),z.loopDelay=Math.round(u(x,"loopDelay",0)),z.paused=s(x,"paused",!1),z.useFrames=s(x,"useFrames",!1);for(var U=c(x,"callbackScope",z),W=[z,null],H=v.TYPES,Z=0;Z<H.length;Z++){var q=H[Z],_=c(x,q,!1);if(_){var nt=c(x,q+"Scope",U),rt=c(x,q+"Params",[]);z.setCallback(q,_,W.concat(rt),nt)}}return z};e.exports=g},function(e,d,t){var n=t(0),u=t(102),s=t(2),o=t(132),h=t(185),a=new n({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(l){var c=this.parent;if(l===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var v=l[f];this.nextAnim===null?this.nextAnim=v:this.nextAnimsQueue.push(v)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(l){this.isPlaying&&this.stop();var c=this.animationManager,f=typeof l=="string"?l:s(l,"key",null),v=this.exists(f)?this.get(f):c.get(f);if(!v)console.warn("Missing animation: "+f);else{this.currentAnim=v;var p=v.getTotalFrames(),g=s(l,"frameRate",v.frameRate),m=s(l,"duration",v.duration);v.calculateDuration(this,p,m,g),this.delay=s(l,"delay",v.delay),this.repeat=s(l,"repeat",v.repeat),this.repeatDelay=s(l,"repeatDelay",v.repeatDelay),this.yoyo=s(l,"yoyo",v.yoyo),this.showOnStart=s(l,"showOnStart",v.showOnStart),this.hideOnComplete=s(l,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=s(l,"skipMissedFrames",v.skipMissedFrames),this.timeScale=s(l,"timeScale",this.timeScale);var x=s(l,"startFrame",0);x>v.getTotalFrames()&&(x=0);var y=v.frames[x];x===0&&!this.forward&&(y=v.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(l){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),l!==void 0&&this.setCurrentFrame(l),this.parent},resume:function(l){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),l!==void 0&&this.setCurrentFrame(l),this.parent},playAfterDelay:function(l,c){if(!this.isPlaying)this.delayCounter=c,this.play(l,!0);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.nextAnim=l,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(l,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(l);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=l,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(l,c){c===void 0&&(c=!1);var f=this.currentAnim,v=this.parent,p=typeof l=="string"?l:l.key;if(c&&this.isPlaying&&f.key===p)return v;if(f&&this.isPlaying){var g=this.animationManager.getMix(f.key,l);if(g>0)return this.playAfterDelay(l,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(l)},playReverse:function(l,c){c===void 0&&(c=!1);var f=typeof l=="string"?l:l.key;return c&&this.isPlaying&&this.currentAnim.key===f?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(l))},startAnimation:function(l){this.load(l);var c=this.currentAnim,f=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),f},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(l,c){var f=this.currentAnim,v=this.currentFrame,p=this.parent,g=v.textureFrame;p.emit(l,f,v,p,g),c&&p.emit(c+f.key,f,v,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var l=this.currentFrame;if(!l)return 0;var c=l.progress;return this.inReverse&&(c*=-1),c},setProgress:function(l){return this.forward||(l=1-l),this.setCurrentFrame(this.currentAnim.getFrameByProgress(l)),this.parent},setRepeat:function(l){return this.repeatCounter=l===-1?Number.MAX_VALUE:l,this.parent},globalRemove:function(l,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(l,c){l===void 0&&(l=!1),c===void 0&&(c=!1);var f=this.currentAnim,v=this.parent;return f?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),f.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!l,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(f.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var l=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(l)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var l=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(l)}return this.parent},stopAfterDelay:function(l){return this._pendingStop=1,this._pendingStopValue=l,this.parent},stopAfterRepeat:function(l){return l===void 0&&(l=1),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=l,this.parent},stopOnFrame:function(l){return this._pendingStop=3,this._pendingStopValue=l,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(l,c){var f=this.currentAnim;if(!(!this.isPlaying||!f||f.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?f.nextFrame(this):f.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?f.nextFrame(this):f.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(l){var c=this.parent;return this.currentFrame=l,c.texture=l.frame.texture,c.frame=l.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),l.setAlpha&&(c.alpha=l.alpha),c.setSizeToFrame(),c._originComponent&&(l.frame.customPivot?c.setOrigin(l.frame.pivotX,l.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===l&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(l){return this.anims?this.anims.get(l):null},exists:function(l){return this.anims?this.anims.has(l):!1},create:function(l){var c=l.key,f=!1;return c&&(f=this.get(c),f||(f=new h(this,c,l),this.anims||(this.anims=new u),this.anims.set(c,f))),f},generateFrameNames:function(l,c){return this.animationManager.generateFrameNames(l,c)},generateFrameNumbers:function(l,c){return this.animationManager.generateFrameNumbers(l,c)},remove:function(l){var c=this.get(l);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(l)),c},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=a},function(e,d,t){var n={};e.exports=n;var u=t(166);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(s,o){for(var h=o*o*o,a=0;a<s.length;a++){var l=s[a],c=l.speed*l.speed+l.angularSpeed*l.angularSpeed;if(l.force.x!==0||l.force.y!==0){n.set(l,!1);continue}var f=Math.min(l.motion,c),v=Math.max(l.motion,c);l.motion=n._minBias*f+(1-n._minBias)*v,l.sleepThreshold>0&&l.motion<n._motionSleepThreshold*h?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold&&n.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},n.afterCollisions=function(s,o){for(var h=o*o*o,a=0;a<s.length;a++){var l=s[a];if(!!l.isActive){var c=l.collision,f=c.bodyA.parent,v=c.bodyB.parent;if(!(f.isSleeping&&v.isSleeping||f.isStatic||v.isStatic)&&(f.isSleeping||v.isSleeping)){var p=f.isSleeping&&!f.isStatic?f:v,g=p===f?v:f;!p.isStatic&&g.motion>n._motionWakeThreshold*h&&n.set(p,!1)}}}},n.set=function(s,o){var h=s.isSleeping;o?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,h||u.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,h&&u.trigger(s,"sleepEnd"))}})()},function(e,d,t){var n={};e.exports=n;var u=t(32);(function(){n.on=function(s,o,h){for(var a=o.split(" "),l,c=0;c<a.length;c++)l=a[c],s.events=s.events||{},s.events[l]=s.events[l]||[],s.events[l].push(h);return h},n.off=function(s,o,h){if(!o){s.events={};return}typeof o=="function"&&(h=o,o=u.keys(s.events).join(" "));for(var a=o.split(" "),l=0;l<a.length;l++){var c=s.events[a[l]],f=[];if(h&&c)for(var v=0;v<c.length;v++)c[v]!==h&&f.push(c[v]);s.events[a[l]]=f}},n.trigger=function(s,o,h){var a,l,c,f,v=s.events;if(v&&u.keys(v).length>0){h||(h={}),a=o.split(" ");for(var p=0;p<a.length;p++)if(l=a[p],c=v[l],c){f=u.clone(h,!1),f.name=l,f.source=s;for(var g=0;g<c.length;g++)c[g].apply(s,[f])}}}})()},function(e,d,t){var n=t(175),u=t(92),s=t(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(h){h===void 0&&(h=u.MULTI_PIPELINE);var a=this.scene.sys.renderer;if(!a)return!1;var l=a.pipelines;if(this.postPipelines=[],this.pipelineData={},l){var c=l.get(h);if(c)return this.defaultPipeline=c,this.pipeline=c,!0}return!1},setPipeline:function(h,a,l){var c=this.scene.sys.renderer;if(!c)return this;var f=c.pipelines;if(f){var v=f.get(h);v&&(this.pipeline=v),a&&(this.pipelineData=l?n(a):a)}return this},setPostPipeline:function(h,a,l){var c=this.scene.sys.renderer;if(!c)return this;var f=c.pipelines;if(f){Array.isArray(h)||(h=[h]);for(var v=0;v<h.length;v++){var p=f.getPostPipeline(h[v],this);p&&this.postPipelines.push(p)}a&&(this.pipelineData=l?n(a):a)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(h,a){var l=this.pipelineData;return a===void 0?delete l[h]:l[h]=a,this},getPostPipeline:function(h){for(var a=this.postPipelines,l=[],c=0;c<a.length;c++){var f=a[c];(typeof h=="string"&&f.name===h||f instanceof h)&&l.push(f)}return l.length===1?l[0]:l},resetPipeline:function(h,a){return h===void 0&&(h=!1),a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,h&&(this.postPipelines=[],this.hasPostPipeline=!1),a&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var a=this.postPipelines,l=0;l<a.length;l++)a[l].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.pipelineData={})},removePostPipeline:function(h){for(var a=this.postPipelines,l=a.length-1;l>=0;l--){var c=a[l];(typeof h=="string"&&c.name===h||typeof h!="string"&&c instanceof h)&&(c.destroy(),s(a,l))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=o},function(e,d){var t={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=t},function(e,d,t){var n=t(4),u=function(s,o,h){return h===void 0&&(h=new n),h.x=s.x+s.radius*Math.cos(o),h.y=s.y+s.radius*Math.sin(o),h};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o){o===void 0&&(o=new n);var h=2*Math.PI*Math.random(),a=Math.random()+Math.random(),l=a>1?2-a:a,c=l*Math.cos(h),f=l*Math.sin(h);return o.x=s.x+c*s.radius,o.y=s.y+f*s.radius,o};e.exports=u},function(e,d,t){var n=t(130),u=t(4),s=function(o,h,a){if(a===void 0&&(a=new u),h<=0||h>=1)return a.x=o.x,a.y=o.y,a;var l=n(o)*h;return h>.5?(l-=o.width+o.height,l<=o.width?(a.x=o.right-l,a.y=o.bottom):(a.x=o.x,a.y=o.bottom-(l-o.width))):l<=o.width?(a.x=o.x+l,a.y=o.y):(a.x=o.right,a.y=o.y+(l-o.width)),a};e.exports=s},function(e,d,t){var n=t(67),u=t(4),s=function(o,h,a,l){l===void 0&&(l=[]),!h&&a>0&&(h=n(o)/a);for(var c=o.x1,f=o.y1,v=o.x2,p=o.y2,g=0;g<h;g++){var m=g/h,x=c+(v-c)*m,y=f+(p-f)*m;l.push(new u(x,y))}return l};e.exports=s},function(e,d,t){var n=t(4),u=function(s,o){o===void 0&&(o=new n);var h=Math.random();return o.x=s.x1+h*(s.x2-s.x1),o.y=s.y1+h*(s.y2-s.y1),o};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o){return o===void 0&&(o=new n),o.x=s.x+Math.random()*s.width,o.y=s.y+Math.random()*s.height,o};e.exports=u},function(e,d){var t=function(n){var u,s,o;if(typeof n!="object"||n===null)return n;u=Array.isArray(n)?[]:{};for(o in n)s=n[o],u[o]=t(s);return u};e.exports=t},function(e,d){var t=function(n){var u={name:n.name,type:n.type,x:n.x,y:n.y,depth:n.depth,scale:{x:n.scaleX,y:n.scaleY},origin:{x:n.originX,y:n.originY},flipX:n.flipX,flipY:n.flipY,rotation:n.rotation,alpha:n.alpha,visible:n.visible,blendMode:n.blendMode,textureKey:"",frameKey:"",data:{}};return n.texture&&(u.textureKey=n.texture.key,u.frameKey=n.frame.name),u};e.exports=t},function(e,d,t){var n=t(3),u=function(s,o,h,a,l,c,f,v){v===void 0&&(v=new n);var p=Math.sin(l),g=Math.cos(l),m=g*c,x=p*c,y=-p*f,T=g*f,C=1/(m*T+y*-x);return v.x=T*C*s+-y*C*o+(a*y-h*T)*C,v.y=m*C*o+-x*C*s+(-a*m+h*x)*C,v};e.exports=u},function(e,d){var t=function(n,u){u===void 0&&(u=1);for(var s=null,o=0;o<u;o++)s=n.shift(),n.push(s);return s};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u=1);for(var s=null,o=0;o<u;o++)s=n.pop(),n.unshift(s);return s};e.exports=t},function(e,d,t){var n=t(4),u=function(s,o){o===void 0&&(o=new n);var h=Math.random()*Math.PI*2,a=Math.sqrt(Math.random());return o.x=s.x+a*Math.cos(h)*s.width/2,o.y=s.y+a*Math.sin(h)*s.height/2,o};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o){o===void 0&&(o=new n);var h=s.x2-s.x1,a=s.y2-s.y1,l=s.x3-s.x1,c=s.y3-s.y1,f=Math.random(),v=Math.random();return f+v>=1&&(f=1-f,v=1-v),o.x=s.x1+(h*f+l*v),o.y=s.y1+(a*f+c*v),o};e.exports=u},function(e,d){var t=function(n,u,s,o,h){var a=o+Math.atan2(n.y-s,n.x-u);return n.x=u+h*Math.cos(a),n.y=s+h*Math.sin(a),n};e.exports=t},function(e,d){var t=function(n,u,s){return n=Math.max(0,Math.min(1,(n-u)/(s-u))),n*n*n*(n*(n*6-15)+10)};e.exports=t},function(e,d){var t=function(n,u,s){return n<=u?0:n>=s?1:(n=(n-u)/(s-u),n*n*(3-2*n))};e.exports=t},function(e,d,t){var n=t(18),u=t(0),s=t(132),o=t(318),h=t(319),a=t(6),l=t(320),c=new u({initialize:function(v,p,g){this.manager=v,this.key=p,this.type="frame",this.frames=this.getFrames(v.textureManager,a(g,"frames",[]),a(g,"defaultTextureKey",null),a(g,"sortFrames",!0)),this.frameRate=a(g,"frameRate",null),this.duration=a(g,"duration",null),this.msPerFrame,this.skipMissedFrames=a(g,"skipMissedFrames",!0),this.delay=a(g,"delay",0),this.repeat=a(g,"repeat",0),this.repeatDelay=a(g,"repeatDelay",0),this.yoyo=a(g,"yoyo",!1),this.showOnStart=a(g,"showOnStart",!1),this.hideOnComplete=a(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(f,v,p,g){p===null&&g===null?(f.frameRate=24,f.duration=24/v*1e3):p&&g===null?(f.duration=p,f.frameRate=v/(p/1e3)):(f.frameRate=g,f.duration=v/g*1e3),f.msPerFrame=1e3/f.frameRate},addFrame:function(f){return this.addFrameAt(this.frames.length,f)},addFrameAt:function(f,v){var p=this.getFrames(this.manager.textureManager,v);if(p.length>0){if(f===0)this.frames=p.concat(this.frames);else if(f===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,f),m=this.frames.slice(f);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(f){return f>=0&&f<this.frames.length},getFirstTick:function(f){f.accumulator=0,f.nextTick=f.msPerFrame+f.currentFrame.duration},getFrameAt:function(f){return this.frames[f]},getFrames:function(f,v,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,C,S;if(typeof v=="string"){S=v;var E=f.get(S),M=E.getFrameNames();g&&l(M),v=[],M.forEach(function(B){v.push({key:S,frame:B})})}if(!Array.isArray(v)||v.length===0)return m;for(C=0;C<v.length;C++){var R=v[C],L=a(R,"key",p);if(!!L){var O=a(R,"frame",0),F=f.getFrame(L,O);y=new h(L,O,T,F),y.duration=a(R,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var D=1/(m.length-1);for(C=0;C<m.length;C++)m[C].progress=C*D}return m},getNextTick:function(f){f.accumulator-=f.nextTick,f.nextTick=f.msPerFrame+f.currentFrame.duration},getFrameByProgress:function(f){return f=n(f,0,1),o(f,this.frames,"progress")},nextFrame:function(f){var v=f.currentFrame;v.isLast?f.yoyo?this.handleYoyoFrame(f,!1):f.repeatCounter>0?f.inReverse&&f.forward?f.forward=!1:this.repeatAnimation(f):f.complete():this.updateAndGetNextTick(f,v.nextFrame)},handleYoyoFrame:function(f,v){if(v||(v=!1),f.inReverse===!v&&f.repeatCounter>0){(f.repeatDelay===0||f.pendingRepeat)&&(f.forward=v),this.repeatAnimation(f);return}if(f.inReverse!==v&&f.repeatCounter===0){f.complete();return}f.forward=v;var p=v?f.currentFrame.nextFrame:f.currentFrame.prevFrame;this.updateAndGetNextTick(f,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(f){var v=f.currentFrame;v.isFirst?f.yoyo?this.handleYoyoFrame(f,!0):f.repeatCounter>0?f.inReverse&&!f.forward?this.repeatAnimation(f):(f.forward=!0,this.repeatAnimation(f)):f.complete():this.updateAndGetNextTick(f,v.prevFrame)},updateAndGetNextTick:function(f,v){f.setCurrentFrame(v),this.getNextTick(f)},removeFrame:function(f){var v=this.frames.indexOf(f);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(f){return this.frames.splice(f,1),this.updateFrameSequence(),this},repeatAnimation:function(f){if(f._pendingStop===2){if(f._pendingStopValue===0)return f.stop();f._pendingStopValue--}f.repeatDelay>0&&!f.pendingRepeat?(f.pendingRepeat=!0,f.accumulator-=f.nextTick,f.nextTick+=f.repeatDelay):(f.repeatCounter--,f.forward?f.setCurrentFrame(f.currentFrame.nextFrame):f.setCurrentFrame(f.currentFrame.prevFrame),f.isPlaying&&(this.getNextTick(f),f.handleRepeat()))},toJSON:function(){var f={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){f.frames.push(v.toJSON())}),f},updateFrameSequence:function(){for(var f=this.frames.length,v=1/(f-1),p,g=0;g<f;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*v,g===0?(p.isFirst=!0,f===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[f-1],p.nextFrame=this.frames[g+1])):g===f-1&&f>1?(p.isLast=!0,p.prevFrame=this.frames[f-2],p.nextFrame=this.frames[0]):f>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var f=0;f<this.frames.length;f++)this.frames[f].destroy();this.frames=[],this.manager=null}});e.exports=c},function(e,d){var t=function(n,u,s,o){u===void 0&&(u=0),s===void 0&&(s=" "),o===void 0&&(o=3),n=n.toString();var h=0;if(u+1>=n.length)switch(o){case 1:n=new Array(u+1-n.length).join(s)+n;break;case 3:var a=Math.ceil((h=u-n.length)/2),l=h-a;n=new Array(l+1).join(s)+n+new Array(a+1).join(s);break;default:n=n+new Array(u+1-n.length).join(s);break}return n};e.exports=t},function(e,d,t){var n=t(327),u=t(189),s=t(331),o=t(332),h=function(a){var l=typeof a;switch(l){case"string":return a.substr(0,3).toLowerCase()==="rgb"?o(a):n(a);case"number":return u(a);case"object":return s(a)}};e.exports=h},function(e,d,t){var n=t(103);function u(o,h,a,l){var c=(o+h*6)%6,f=Math.min(c,4-c,1);return Math.round(255*(l-l*a*Math.max(0,f)))}var s=function(o,h,a,l){h===void 0&&(h=1),a===void 0&&(a=1);var c=u(5,o,h,a),f=u(3,o,h,a),v=u(1,o,h,a);return l?l.setTo?l.setTo(c,f,v,l.alpha,!1):(l.r=c,l.g=f,l.b=v,l.color=n(c,f,v),l):{r:c,g:f,b:v,color:n(c,f,v)}};e.exports=s},function(e,d,t){var n=t(38),u=t(330),s=function(o){var h=u(o);return new n(h.r,h.g,h.b,h.a)};e.exports=s},function(e,d){var t=function(n,u,s){return n.x=u-n.width/2,n.y=s-n.height/2,n};e.exports=t},function(e,d,t){var n=t(105),u=t(136),s=t(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var l=new ArrayBuffer(4),c=new Uint8Array(l),f=new Uint32Array(l);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,f[0]===3569595041?!0:f[0]===2712847316?!1:null}function a(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(f){o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var l=!1,c=function(){if(window.WebGLRenderingContext)try{var f=s.createWebGL(this),v=f.getContext("webgl")||f.getContext("experimental-webgl"),p=s.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return l=m.data instanceof Uint8ClampedArray,s.remove(f),s.remove(p),!!v}catch(x){return!1}return!1};return o.webGL=c(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(o.getUserMedia=!1),!n.iOS&&(u.ie||u.firefox||u.chrome)&&(o.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(o.littleEndian=h()),o.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&o.littleEndian!==null&&l,o}e.exports=a()},function(e,d){var t="",n=function(){var u=function(a){for(var l=["i","webkitI","msI","mozI","oI"],c=0;c<l.length;c++){var f=l[c]+"mageSmoothingEnabled";if(f in a)return f}return null},s=function(a){return t===""&&(t=u(a)),t&&(a[t]=!0),a},o=function(a){return t===""&&(t=u(a)),t&&(a[t]=!1),a},h=function(a){return t!==null?a[t]:null};return{disable:o,enable:s,getPrefix:u,isEnabled:h}};e.exports=n()},function(e,d,t){var n=t(14),u=t(17),s={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};s=u(!1,s,n),e.exports=s},function(e,d){var t=function(n,u,s,o,h){var a=(o-u)*.5,l=(h-s)*.5,c=n*n,f=n*c;return(2*s-2*o+a+l)*f+(-3*s+3*o-2*a-l)*c+a*n+s};e.exports=t},function(e,d){var t=function(n,u){return Math.floor(Math.random()*(u-n+1)+n)};e.exports=t},function(e,d,t){var n=t(14),u=function(s){return s*n.RAD_TO_DEG};e.exports=u},function(e,d,t){var n={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=n},function(e,d,t){var n=t(0),u=new n({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(s){return this._matrix=s,this._dirty=!0,this},reset:function(){var s=this._matrix;return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=0,s[6]=1,s[7]=0,s[8]=0,s[9]=0,s[10]=0,s[11]=0,s[12]=1,s[13]=0,s[14]=0,s[15]=0,s[16]=0,s[17]=0,s[18]=1,s[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var s=new Float32Array(this._matrix);s[4]/=255,s[9]/=255,s[14]/=255,s[19]/=255,this._data=s,this._dirty=!1}return this._data},brightness:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1);var h=s;return this.multiply([h,0,0,0,0,0,h,0,0,0,0,0,h,0,0,0,0,0,1,0],o)},saturate:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1);var h=s*2/3+1,a=(h-1)*-.5;return this.multiply([h,a,a,0,0,a,h,a,0,0,a,a,h,0,0,0,0,0,1,0],o)},desaturate:function(s){return s===void 0&&(s=!1),this.saturate(-1,s)},hue:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1),s=s/180*Math.PI;var h=Math.cos(s),a=Math.sin(s),l=.213,c=.715,f=.072;return this.multiply([l+h*(1-l)+a*-l,c+h*-c+a*-c,f+h*-f+a*(1-f),0,0,l+h*-l+a*.143,c+h*(1-c)+a*.14,f+h*-f+a*-.283,0,0,l+h*-l+a*-(1-l),c+h*-c+a*c,f+h*(1-f)+a*f,0,0,0,0,0,1,0],o)},grayscale:function(s,o){return s===void 0&&(s=1),o===void 0&&(o=!1),this.saturate(-s,o)},blackWhite:function(s){return s===void 0&&(s=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],s)},contrast:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1);var h=s+1,a=-.5*(h-1);return this.multiply([h,0,0,0,a,0,h,0,0,a,0,0,h,0,a,0,0,0,1,0],o)},negative:function(s){return s===void 0&&(s=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],s)},desaturateLuminance:function(s){return s===void 0&&(s=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],s)},sepia:function(s){return s===void 0&&(s=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],s)},night:function(s,o){return s===void 0&&(s=.1),o===void 0&&(o=!1),this.multiply([s*-2,-s,0,0,0,-s,0,s,0,0,0,s,s*2,0,0,0,0,0,1,0],o)},lsd:function(s){return s===void 0&&(s=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],s)},brown:function(s){return s===void 0&&(s=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],s)},vintagePinhole:function(s){return s===void 0&&(s=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],s)},kodachrome:function(s){return s===void 0&&(s=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],s)},technicolor:function(s){return s===void 0&&(s=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],s)},polaroid:function(s){return s===void 0&&(s=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],s)},shiftToBGR:function(s){return s===void 0&&(s=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],s)},multiply:function(s,o){o||this.reset();for(var h=this._matrix,a=[],l=0;l<20;l++)a[l]=h[l];return h[0]=a[0]*s[0]+a[1]*s[5]+a[2]*s[10]+a[3]*s[15],h[1]=a[0]*s[1]+a[1]*s[6]+a[2]*s[11]+a[3]*s[16],h[2]=a[0]*s[2]+a[1]*s[7]+a[2]*s[12]+a[3]*s[17],h[3]=a[0]*s[3]+a[1]*s[8]+a[2]*s[13]+a[3]*s[18],h[4]=a[0]*s[4]+a[1]*s[9]+a[2]*s[14]+a[3]*s[19]+a[4],h[5]=a[5]*s[0]+a[6]*s[5]+a[7]*s[10]+a[8]*s[15],h[6]=a[5]*s[1]+a[6]*s[6]+a[7]*s[11]+a[8]*s[16],h[7]=a[5]*s[2]+a[6]*s[7]+a[7]*s[12]+a[8]*s[17],h[8]=a[5]*s[3]+a[6]*s[8]+a[7]*s[13]+a[8]*s[18],h[9]=a[5]*s[4]+a[6]*s[9]+a[7]*s[14]+a[8]*s[19]+a[9],h[10]=a[10]*s[0]+a[11]*s[5]+a[12]*s[10]+a[13]*s[15],h[11]=a[10]*s[1]+a[11]*s[6]+a[12]*s[11]+a[13]*s[16],h[12]=a[10]*s[2]+a[11]*s[7]+a[12]*s[12]+a[13]*s[17],h[13]=a[10]*s[3]+a[11]*s[8]+a[12]*s[13]+a[13]*s[18],h[14]=a[10]*s[4]+a[11]*s[9]+a[12]*s[14]+a[13]*s[19]+a[14],h[15]=a[15]*s[0]+a[16]*s[5]+a[17]*s[10]+a[18]*s[15],h[16]=a[15]*s[1]+a[16]*s[6]+a[17]*s[11]+a[18]*s[16],h[17]=a[15]*s[2]+a[16]*s[7]+a[17]*s[12]+a[18]*s[17],h[18]=a[15]*s[3]+a[16]*s[8]+a[17]*s[13]+a[18]*s[18],h[19]=a[15]*s[4]+a[16]*s[9]+a[17]*s[14]+a[18]*s[19]+a[19],this._dirty=!0,this}});e.exports=u},function(e,d,t){var n=t(10),u=t(14),s=function(o,h){if(h===void 0&&(h=new n),o.length===0)return h;for(var a=Number.MAX_VALUE,l=Number.MAX_VALUE,c=u.MIN_SAFE_INTEGER,f=u.MIN_SAFE_INTEGER,v,p,g,m=0;m<o.length;m++)v=o[m],Array.isArray(v)?(p=v[0],g=v[1]):(p=v.x,g=v.y),a=Math.min(a,p),l=Math.min(l,g),c=Math.max(c,p),f=Math.max(f,g);return h.x=a,h.y=l,h.width=c-a,h.height=f-l,h};e.exports=s},function(e,d,t){var n=t(0),u=t(1),s=new n({initialize:function(h,a,l){this._rgb=[0,0,0],this.onChangeCallback=u,this.dirty=!1,this.set(h,a,l)},set:function(o,h,a){return o===void 0&&(o=0),h===void 0&&(h=0),a===void 0&&(a=0),this._rgb=[o,h,a],this.onChange(),this},equals:function(o,h,a){var l=this._rgb;return l.r===o&&l.g===h&&l.b===a},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=s},function(e,d,t){var n={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};e.exports=n},function(e,d){var t=function(n){n.parentNode&&n.parentNode.removeChild(n)};e.exports=t},function(e,d){var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=t},function(e,d,t){var n=t(0),u=t(144),s=t(197),o=t(20),h=t(419),a=t(420),l=t(33),c=t(1),f=t(421),v=new n({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=f.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(p){this.settings.status=u.INIT,this.sceneUpdate=c,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,s.Global,[s.CoreScene,a(this),h(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(o.PRE_UPDATE,p,g),m.emit(o.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(o.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(o.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(o.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=u.PAUSED,m.active=!1,g.emit(o.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=u.RUNNING,m.active=!0,g.emit(o.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=u.SLEEPING,m.active=!1,m.visible=!1,g.emit(o.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=u.RUNNING,m.active=!0,m.visible=!0,g.emit(o.WAKE,this,p),m.isTransition&&g.emit(o.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===u.SLEEPING},isActive:function(){return this.settings.status===u.RUNNING},isPaused:function(){return this.settings.status===u.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=u.START,m.active=!0,m.visible=!0,g.emit(o.START,this),g.emit(o.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(o.TRANSITION_INIT),g.off(o.TRANSITION_START),g.off(o.TRANSITION_COMPLETE),g.off(o.TRANSITION_OUT),m.status=u.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===l.WEBGL&&this.renderer.resetTextures(!0),g.emit(o.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=u.DESTROYED,g.active=!1,g.visible=!1,p.emit(o.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});e.exports=v},function(e,d){var t=function(n){return n&&n[0].toUpperCase()+n.slice(1)};e.exports=t},function(e,d,t){var n=t(33),u=t(0),s=t(109),o=t(424),h="Texture.frame missing: ",a=new u({initialize:function(c,f,v,p,g){Array.isArray(v)||(v=[v]),this.manager=c,this.key=f,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<v.length;m++)this.source.push(new o(this,v[m],p,g))},add:function(l,c,f,v,p,g){if(this.has(l))return null;var m=new s(this,l,c,f,v,p,g);return this.frames[l]=m,this.firstFrame==="__BASE"&&(this.firstFrame=l),this.frameTotal++,m},remove:function(l){if(this.has(l)){var c=this.get(l);return c.destroy(),delete this.frames[l],!0}return!1},has:function(l){return this.frames[l]},get:function(l){l||(l=this.firstFrame);var c=this.frames[l];return c||(console.warn(h+l),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(l){for(var c=0;c<this.source.length;c++)if(this.source[c]===l)return c;return-1},getFramesFromTextureSource:function(l,c){c===void 0&&(c=!1);var f=[];for(var v in this.frames)if(!(v==="__BASE"&&!c)){var p=this.frames[v];p.sourceIndex===l&&f.push(p)}return f},getFrameNames:function(l){l===void 0&&(l=!1);var c=Object.keys(this.frames);if(!l){var f=c.indexOf("__BASE");f!==-1&&c.splice(f,1)}return c},getSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var c=this.frames[l];return c?c.source.image:(console.warn(h+l),this.frames.__BASE.source.image)},getDataSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var c=this.frames[l],f;return c?f=c.sourceIndex:(console.warn(h+l),f=this.frames.__BASE.sourceIndex),this.dataSource[f].image},setDataSource:function(l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var f=this.source[c];this.dataSource.push(new o(this,l[c],f.width,f.height))}},setFilter:function(l){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(l);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(l)},destroy:function(){var l;for(l=0;l<this.source.length;l++)this.source[l].destroy();for(l=0;l<this.dataSource.length;l++)this.dataSource[l].destroy();for(var c in this.frames){var f=this.frames[c];f.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var v=this.manager.game.renderer;v&&v.type===n.WEBGL&&v.resetTextures(!0),this.manager=null}});e.exports=a},function(e,d,t){var n=t(78),u=function(s,o,h,a,l){a===void 0&&(a=0),l===void 0&&(l=s.length);var c=[];if(n(s,a,l))for(var f=a;f<l;f++){var v=s[f];(!o||o&&h===void 0&&v.hasOwnProperty(o)||o&&h!==void 0&&v[o]===h)&&c.push(v)}return c};e.exports=u},function(e,d,t){e.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(e,d){var t=function(n){if(!Array.isArray(n)||n.length<2||!Array.isArray(n[0]))return!1;for(var u=n[0].length,s=1;s<n.length;s++)if(n[s].length!==u)return!1;return!0};e.exports=t},function(e,d){var t=function(n,u,s){u===void 0&&(u=0),s===void 0&&(s=n.length);var o=u+Math.floor(Math.random()*s);return n[o]===void 0?null:n[o]};e.exports=t},function(e,d,t){var n=t(0),u=t(9),s=t(438),o=new n({Extends:u,initialize:function(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(h){return this._pending.push(h),this._toProcess++,h},remove:function(h){return this._destroy.push(h),this._toProcess++,h},removeAll:function(){for(var h=this._active,a=this._destroy,l=h.length;l--;)a.push(h[l]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,a=this._active,l,c;for(l=0;l<h.length;l++){c=h[l];var f=a.indexOf(c);f!==-1&&(a.splice(f,1),this.emit(s.PROCESS_QUEUE_REMOVE,c))}for(h.length=0,h=this._pending,l=0;l<h.length;l++)c=h[l],(!this.checkQueue||this.checkQueue&&a.indexOf(c)===-1)&&(a.push(c),this.emit(s.PROCESS_QUEUE_ADD,c));return h.length=0,this._toProcess=0,a},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=o},function(e,d){function t(u,s){return parseInt(u.getAttribute(s),10)}var n=function(u,s,o,h,a){o===void 0&&(o=0),h===void 0&&(h=0);var l=s.cutX,c=s.cutY,f=s.source.width,v=s.source.height,p=s.sourceIndex,g={},m=u.getElementsByTagName("info")[0],x=u.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=t(m,"size"),g.lineHeight=t(x,"lineHeight")+h,g.chars={};var y=u.getElementsByTagName("char"),T=s!==void 0&&s.trimmed;if(T)var C=s.height,S=s.width;for(var E=0;E<y.length;E++){var M=y[E],R=t(M,"id"),L=String.fromCharCode(R),O=t(M,"x"),F=t(M,"y"),D=t(M,"width"),B=t(M,"height");T&&(O<S&&(S=O),F<C&&(C=F)),T&&C!==0&&S!==0&&(O-=s.x,F-=s.y);var b=(l+O)/f,V=(c+F)/v,X=(l+O+D)/f,K=(c+F+B)/v;if(g.chars[R]={x:O,y:F,width:D,height:B,centerX:Math.floor(D/2),centerY:Math.floor(B/2),xOffset:t(M,"xoffset"),yOffset:t(M,"yoffset"),xAdvance:t(M,"xadvance")+o,data:{},kerning:{},u0:b,v0:V,u1:X,v1:K},a&&D!==0&&B!==0){var J=a.add(L,p,O,F,D,B);J&&J.setUVs(D,B,b,V,X,K)}}var G=u.getElementsByTagName("kerning");for(E=0;E<G.length;E++){var w=G[E],N=t(w,"first"),z=t(w,"second"),U=t(w,"amount");g.chars[z].kerning[N]=U}return g};e.exports=n},function(e,d,t){var n=t(1049),u=t(440),s=t(0),o=t(11),h=t(109),a=t(15),l=t(110),c=new s({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,n],initialize:function(v,p,g,m,x){a.call(this,v,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(f,v,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof h||(p=this.texture.get(p));var x=new u(this,f,v,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(f,v,p,g){for(var m=this.createMultiple(v,p,g),x=0;x<m.length;x++){var y=m[x];f.call(this,y,x)}return m},createMultiple:function(f,v,p){v===void 0&&(v=this.frame.name),p===void 0&&(p=!0),Array.isArray(v)||(v=[v]);var g=[],m=this;return v.forEach(function(x){for(var y=0;y<f;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(f){return f.visible&&f.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=c},function(e,d,t){var n=t(208),u=t(35),s=t(0),o=t(11),h=t(75),a=t(15),l=t(10),c=t(1052),f=t(441),v=t(3),p=new s({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,c],initialize:function(m,x,y,T){a.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new l),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new l,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?f(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(h.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(h.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new v),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new v(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return n.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return n.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),n.StableSort(this.list,m),this):this},getByName:function(g){return n.GetFirst(this.list,"name",g)},getRandom:function(g,m){return n.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return n.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return n.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return n.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return n.Swap(this.list,g,m),this},moveTo:function(g,m){return n.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return n.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return n.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=n.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=n.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=n.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return n.BringToTop(this.list,g),this},sendToBack:function(g){return n.SendToBack(this.list,g),this},moveUp:function(g){return n.MoveUp(this.list,g),this},moveDown:function(g){return n.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(g,m,x){var y=n.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return n.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<C;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(n.SetAll(this.list,"scrollFactorX",g),n.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,d,t){var n=t(148),u=t(0),s=t(1057),o=new u({Extends:n,Mixins:[s],initialize:function(a,l,c,f,v,p,g){n.call(this,a,l,c,f,v,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,a){return this.cropWidth=h,this.cropHeight=a,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});e.exports=o},function(e,d,t){var n=t(133),u=t(0),s=t(217),o=t(303),h=t(304),a=t(305),l=t(309),c=t(167),f=t(312),v=t(313),p=t(314),g=t(111),m=t(15),x=t(2),y=t(6),T=t(14),C=t(1063),S=new u({Extends:m,Mixins:[o,h,a,l,c,v,p,f,C],initialize:function(M,R){var L=y(R,"x",0),O=y(R,"y",0);m.call(this,M,"Graphics"),this.setPosition(L,O),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(R)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,M,R){return R===void 0&&(R=1),this.commandBuffer.push(s.LINE_STYLE,E,M,R),this._lineWidth=E,this},fillStyle:function(E,M){return M===void 0&&(M=1),this.commandBuffer.push(s.FILL_STYLE,E,M),this},fillGradientStyle:function(E,M,R,L,O,F,D,B){return O===void 0&&(O=1),F===void 0&&(F=O),D===void 0&&(D=O),B===void 0&&(B=O),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,O,F,D,B,E,M,R,L),this},lineGradientStyle:function(E,M,R,L,O,F){return F===void 0&&(F=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,E,F,M,R,L,O),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,M,R){return this.beginPath(),this.arc(E,M,R,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,M,R){return this.beginPath(),this.arc(E,M,R,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,M,R,L){return this.commandBuffer.push(s.FILL_RECT,E,M,R,L),this},strokeRect:function(E,M,R,L){var O=this._lineWidth/2,F=E-O,D=E+O;return this.beginPath(),this.moveTo(E,M),this.lineTo(E,M+L),this.strokePath(),this.beginPath(),this.moveTo(E+R,M),this.lineTo(E+R,M+L),this.strokePath(),this.beginPath(),this.moveTo(F,M),this.lineTo(D+R,M),this.strokePath(),this.beginPath(),this.moveTo(F,M+L),this.lineTo(D+R,M+L),this.strokePath(),this},fillRoundedRect:function(E,M,R,L,O){O===void 0&&(O=20);var F=O,D=O,B=O,b=O;return typeof O!="number"&&(F=x(O,"tl",20),D=x(O,"tr",20),B=x(O,"bl",20),b=x(O,"br",20)),this.beginPath(),this.moveTo(E+F,M),this.lineTo(E+R-D,M),this.arc(E+R-D,M+D,D,-T.TAU,0),this.lineTo(E+R,M+L-b),this.arc(E+R-b,M+L-b,b,0,T.TAU),this.lineTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+F),this.arc(E+F,M+F,F,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,M,R,L,O){O===void 0&&(O=20);var F=O,D=O,B=O,b=O;return typeof O!="number"&&(F=x(O,"tl",20),D=x(O,"tr",20),B=x(O,"bl",20),b=x(O,"br",20)),this.beginPath(),this.moveTo(E+F,M),this.lineTo(E+R-D,M),this.moveTo(E+R-D,M),this.arc(E+R-D,M+D,D,-T.TAU,0),this.lineTo(E+R,M+L-b),this.moveTo(E+R,M+L-b),this.arc(E+R-b,M+L-b,b,0,T.TAU),this.lineTo(E+B,M+L),this.moveTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+F),this.moveTo(E,M+F),this.arc(E+F,M+F,F,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,M){return this.fillPoint(E.x,E.y,M)},fillPoint:function(E,M,R){return!R||R<1?R=1:(E-=R/2,M-=R/2),this.commandBuffer.push(s.FILL_RECT,E,M,R,R),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,M,R,L,O,F){return this.commandBuffer.push(s.FILL_TRIANGLE,E,M,R,L,O,F),this},strokeTriangle:function(E,M,R,L,O,F){return this.commandBuffer.push(s.STROKE_TRIANGLE,E,M,R,L,O,F),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,M,R,L){return this.beginPath(),this.moveTo(E,M),this.lineTo(R,L),this.strokePath(),this},lineTo:function(E,M){return this.commandBuffer.push(s.LINE_TO,E,M),this},moveTo:function(E,M){return this.commandBuffer.push(s.MOVE_TO,E,M),this},strokePoints:function(E,M,R,L){M===void 0&&(M=!1),R===void 0&&(R=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var O=1;O<L;O++)this.lineTo(E[O].x,E[O].y);return M&&this.lineTo(E[0].x,E[0].y),R&&this.closePath(),this.strokePath(),this},fillPoints:function(E,M,R,L){M===void 0&&(M=!1),R===void 0&&(R=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var O=1;O<L;O++)this.lineTo(E[O].x,E[O].y);return M&&this.lineTo(E[0].x,E[0].y),R&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,M){M===void 0&&(M=32);var R=E.getPoints(M);return this.strokePoints(R,!0)},strokeEllipse:function(E,M,R,L,O){O===void 0&&(O=32);var F=new g(E,M,R,L),D=F.getPoints(O);return this.strokePoints(D,!0)},fillEllipseShape:function(E,M){M===void 0&&(M=32);var R=E.getPoints(M);return this.fillPoints(R,!0)},fillEllipse:function(E,M,R,L,O){O===void 0&&(O=32);var F=new g(E,M,R,L),D=F.getPoints(O);return this.fillPoints(D,!0)},arc:function(E,M,R,L,O,F,D){return F===void 0&&(F=!1),D===void 0&&(D=0),this.commandBuffer.push(s.ARC,E,M,R,L,O,F,D),this},slice:function(E,M,R,L,O,F,D){return F===void 0&&(F=!1),D===void 0&&(D=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,E,M),this.commandBuffer.push(s.ARC,E,M,R,L,O,F,D),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(E,M){return this.commandBuffer.push(s.TRANSLATE,E,M),this},scaleCanvas:function(E,M){return this.commandBuffer.push(s.SCALE,E,M),this},rotateCanvas:function(E){return this.commandBuffer.push(s.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,M,R){var L=this.scene.sys,O=L.game.renderer;M===void 0&&(M=L.scale.width),R===void 0&&(R=L.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,M,R),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var F,D;if(typeof E=="string")if(L.textures.exists(E)){F=L.textures.get(E);var B=F.getSourceImage();B instanceof HTMLCanvasElement&&(D=B.getContext("2d"))}else F=L.textures.createCanvas(E,M,R),D=F.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(D=E.getContext("2d"));return D&&(this.renderCanvas(O,this,S.TargetCamera,null,D,!1),F&&F.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new n,e.exports=S},function(e,d){e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,d,t){var n=t(4),u=function(s,o,h){h===void 0&&(h=new n);var a=s.width/2,l=s.height/2;return h.x=s.x+a*Math.cos(o),h.y=s.y+l*Math.sin(o),h};e.exports=u},function(e,d,t){var n=t(35),u=t(0),s=t(11),o=t(176),h=t(101),a=t(9),l=t(75),c=t(110),f=t(1071),v=t(20),p=t(79),g=new u({Extends:c,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Visible,a,f],initialize:function(x,y){c.call(this,x),a.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(m,x){return this.data||(this.data=new h(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new h(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new h(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new h(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(l.ADDED_TO_SCENE,m,this.scene),this.events.emit(v.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(l.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(l.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(450),h=t(110),a=t(452),l=t(1075),c=new n({Extends:s,Mixins:[u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,l],initialize:function(v,p,g,m){if(s.call(this,v,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new h(this),this.wells=new h(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(f,v){return this.texture=this.scene.sys.textures.get(f),this.setFrame(v)},setFrame:function(f){this.frame=this.texture.get(f);var v=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return v.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(f,v){Array.isArray(f)||(f=[f]);var p=v.frames;p.length=0;for(var g=0;g<f.length;g++){var m=f[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?v.defaultFrame=p[0]:v.defaultFrame=this.defaultFrame,this},addEmitter:function(f){return this.emitters.add(f)},createEmitter:function(f){return this.addEmitter(new a(this,f))},removeEmitter:function(f){return this.emitters.remove(f,!0)},addGravityWell:function(f){return this.wells.add(f)},createGravityWell:function(f){return this.addGravityWell(new o(f))},emitParticle:function(f,v,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(f,v,p)}return this},emitParticleAt:function(f,v,p){return this.emitParticle(p,f,v)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(f,v){v*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(f,v)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=c},function(e,d,t){var n=t(35),u=t(133),s=t(31),o=t(0),h=t(11),a=t(33),l=t(109),c=t(15),f=t(1),v=t(92),p=t(1079),g=t(141),m=t(12),x=t(222),y=new o({Extends:c,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,p],initialize:function(C,S,E,M,R,L,O){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=32),R===void 0&&(R=32),c.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,L===void 0?(this.canvas=s.create2D(this,M,R),this.texture=C.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(L),this.frame=this.texture.get(O),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new u(0,0,M,R),this.renderTarget=null;var F=this.renderer;F?F.type===a.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(F,M,R,1,0,!1)):F.type===a.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=f,this.camera.setScene(C),this.setPosition(S,E),L===void 0&&this.setSize(M,R),this.setOrigin(0,0),this.initPipeline(v.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var M=this.texture.getSourceImage();S.cutX+T>M.width&&(T=M.width-S.cutX),S.cutY+C>M.height&&(C=M.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var R=this.input;return R&&!R.customHitArea&&(R.hitArea.width=T,R.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,M,R){var L=this.frame,O=this.camera,F=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=L.cutWidth),R===void 0&&(R=L.cutHeight);var D=(T>>16&255)/255,B=(T>>8&255)/255,b=(T&255)/255,V=this.renderTarget;if(O.preRender(),V){V.bind(!0);var X=this.pipeline;X.manager.set(X);var K=V.width,J=V.height,G=F.width,w=F.height,N=G/K,z=w/J;X.drawFillRect(S*N,E*z,M*N,R*z,m.getTintFromFloats(b,B,D,1),C),V.unbind(!0)}else{var U=this.context;F.setContext(U),U.fillStyle="rgba("+D+","+B+","+b+","+C+")",U.fillRect(S+L.cutX,E+L.cutY,M,R),F.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,M){return this.beginDraw(),this.batchDraw(T,C,S,E,M),this.endDraw(),this},drawFrame:function(T,C,S,E,M,R){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,M,R),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,M){return E===void 0&&(E=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,M),this},batchDrawFrame:function(T,C,S,E,M,R){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=this.globalAlpha),R===void 0?R=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):R=(R>>16)+(R&65280)+((R&255)<<16);var L=this.textureManager.getFrame(T,C);return L&&(this.renderTarget?this.pipeline.batchTextureFrame(L,S,E,R,M,this.camera.matrix,null):this.batchTextureFrame(L,S+this.frame.cutX,E+this.frame.cutY,M,R)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),M=C.pipelines.setUtility();M.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,M){for(var R=0;R<T.length;R++){var L=T[R];!L||L===this||(L.renderWebGL||L.renderCanvas?this.drawGameObject(L,C,S):L.isParent||L.list?this.batchGroup(L.getChildren(),C,S):typeof L=="string"?this.batchTextureFrameKey(L,null,C,S,E,M):L instanceof l?this.batchTextureFrame(L,C,S,E,M):Array.isArray(L)&&this.batchList(L,C,S,E,M))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var M=T[E];if(M.willRender(this.camera)){var R=M.x+C,L=M.y+S;this.drawGameObject(M,R,L)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,M)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;if(this._eraseMode){var R=T.blendMode;T.blendMode=n.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,M),this._eraseMode&&(T.blendMode=R)},batchTextureFrameKey:function(T,C,S,E,M,R){var L=this.textureManager.getFrame(T,C);L&&this.batchTextureFrame(L,S,E,M,R)},batchTextureFrame:function(T,C,S,E,M){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(T,C,S,M,E,this.camera.matrix,null);else{var L=this.context,O=T.canvasData,F=T.source.image,D=this.camera.matrix;L.save(),L.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",L.globalAlpha=E,D.setToContext(L),L.drawImage(F,O.x,O.y,O.width,O.height,C,S,O.width,O.height),L.restore()}},snapshotArea:function(T,C,S,E,M,R,L){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,M,!1,T,C,S,E,R,L):this.renderer.snapshotCanvas(this.canvas,M,!1,T,C,S,E,R,L),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,d){var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var u=Math.random()*16|0,s=n==="x"?u:u&3|8;return s.toString(16)})};e.exports=t},function(e,d,t){var n=t(164),u=t(0),s=t(11),o=t(15),h=t(92),a=t(1085),l=t(3),c=new u({Extends:o,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,a],initialize:function(v,p,g,m,x,y,T,C,S){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),o.call(this,v,"Rope"),this.anims=new n(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,v){var p=this.anims.currentFrame;this.anims.update(f,v),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(f,v,p){return this.anims.play(f,v,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(f,v,p){return f===void 0&&(f=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(f,v,p))},setVertical:function(f,v,p){return f===void 0&&(f=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(f,v,p)):this},setTintFill:function(f){return f===void 0&&(f=!1),this.tintFill=f,this},setAlphas:function(f,v){var p=this.points.length;if(p<1)return this;var g=this.alphas;f===void 0?f=[1]:!Array.isArray(f)&&v===void 0&&(f=[f]);var m,x=0;if(v!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=f,g[x+1]=v;else if(f.length===p)for(m=0;m<p;m++)x=m*2,g[x]=f[m],g[x+1]=f[m];else{var y=f[0];for(m=0;m<p;m++)x=m*2,f.length>x&&(y=f[x]),g[x]=y,f.length>x+1&&(y=f[x+1]),g[x+1]=y}return this},setColors:function(f){var v=this.points.length;if(v<1)return this;var p=this.colors;f===void 0?f=[16777215]:Array.isArray(f)||(f=[f]);var g,m=0;if(f.length===v)for(g=0;g<v;g++)m=g*2,p[m]=f[g],p[m+1]=f[g];else{var x=f[0];for(g=0;g<v;g++)m=g*2,f.length>m&&(x=f[m]),p[m]=x,f.length>m+1&&(x=f[m+1]),p[m+1]=x}return this},setPoints:function(f,v,p){if(f===void 0&&(f=2),typeof f=="number"){var g=f;g<2&&(g=2),f=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)f.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)f.push({x:0,y:y+m*x})}var T=f.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(f.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=f,this.updateUVs(),v!=null&&this.setColors(v),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var f=this.uv,v=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(v-1),T=(x-g)/(v-1),C=0;C<v;C++){var S=C*4,E,M,R,L;this.horizontal?(this._flipX?(E=m-C*y,R=m-C*y):(E=p+C*y,R=p+C*y),this._flipY?(M=x,L=g):(M=g,L=x)):(this._flipX?(E=p,R=m):(E=m,R=p),this._flipY?(M=x-C*T,L=x-C*T):(M=g+C*T,L=g+C*T)),f[S+0]=E,f[S+1]=M,f[S+2]=R,f[S+3]=L}return this},resizeArrays:function(f){var v=this.colors,p=this.alphas;this.vertices=new Float32Array(f*4),this.uv=new Float32Array(f*4),v=new Uint32Array(f*2),p=new Float32Array(f*2);for(var g=0;g<f*2;g++)v[g]=16777215,p[g]=1;return this.colors=v,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var f=this._perp,v=this.points,p=this.vertices,g=v.length;if(this.dirty=!1,!(g<1)){for(var m,x=v[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=v[T],S=T*4;T<g-1?m=v[T+1]:m=C,f.x=m.y-x.y,f.y=-(m.x-x.x);var E=f.length();f.x/=E,f.y/=E,f.x*=y,f.y*=y,p[S]=C.x+f.x,p[S+1]=C.y+f.y,p[S+2]=C.x-f.x,p[S+3]=C.y-f.y,x=C}return this}},setDebug:function(f,v){return this.debugGraphic=f,!f&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(f,v,p){var g=f.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var C=4;C<v;C+=4){var S=p[C+0],E=p[C+1],M=p[C+2],R=p[C+3];g.lineBetween(m,x,S,E),g.lineBetween(y,T,M,R),g.lineBetween(y,T,S,E),g.lineBetween(S,E,M,R),m=S,x=E,y=M,T=R}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(f){return this._flipX=f,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(f){return this._flipY=f,this.updateUVs()}}});e.exports=c},function(e,d,t){var n=t(142),u=t(31),s=t(0),o=t(11),h=t(22),a=t(15),l=t(458),c=t(6),f=t(202),v=t(1088),p=t(459),g=new s({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,v],initialize:function(x,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),a.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=u.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),x.sys.game.events.on(h.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",C=m.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var M=C[E],R="";M=M.replace(/^ *|\s*$/gi,"");var L=x.measureText(M).width;if(L<y){T+=M+`
`;continue}for(var O=y,F=M.split(" "),D=0;D<F.length;D++){var B=F[D],b=B+" ",V=x.measureText(b).width;if(V>O){if(D===0){for(var X=b;X.length&&(X=X.slice(0,-1),V=x.measureText(X).width,!(V<=O)););if(!X.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var K=B.substr(X.length);F[D]=K,R+=X}var J=F[D].length?D:D+1,G=F.slice(J).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=G+" "+(C[E+1]||""),S=C.length;break}else R+=b,O-=V}T+=R.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",C=m.split(this.splitRegExp),S=C.length-1,E=x.measureText(" ").width,M=0;M<=S;M++){for(var R=y,L=C[M].split(" "),O=L.length-1,F=0;F<=O;F++){var D=L[F],B=x.measureText(D).width,b=B;F<O&&(b+=E),b>R&&F>0&&(T+=`
`,R=y),T+=D,F<O?(T+=" ",R-=b):R-=B}M<S&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,C,S){return this.style.setShadow(m,x,y,T,C,S)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var C=m,S=c(C,"x",null);S!==null?(m=S,y=S):(m=c(C,"left",0),y=c(C,"right",m));var E=c(C,"y",null);E!==null?(x=E,T=E):(x=c(C,"top",0),T=c(C,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(m,x);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),M=l(this,C,E),R=this.padding,L;y.fixedWidth===0?(this.width=M.width+R.left+R.right,L=M.width):(this.width=y.fixedWidth,L=this.width-R.left-R.right,L<M.width&&(L=M.width)),y.fixedHeight===0?this.height=M.height+R.top+R.bottom:this.height=y.fixedHeight;var O=this.width,F=this.height;this.updateDisplayOrigin(),O*=T,F*=T,O=Math.max(O,1),F=Math.max(F,1),m.width!==O||m.height!==F?(m.width=O,m.height=F,this.frame.setSize(O,F),y.syncFont(m,x)):x.clearRect(0,0,O,F),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,O,F)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(R.left,R.top);for(var D,B,b=0;b<M.lines;b++){if(D=y.strokeThickness/2,B=y.strokeThickness/2+b*M.lineHeight+C.ascent,b>0&&(B+=M.lineSpacing*b),y.rtl)D=O-D;else if(y.align==="right")D+=L-M.lineWidths[b];else if(y.align==="center")D+=(L-M.lineWidths[b])/2;else if(y.align==="justify"){var V=.85;if(M.lineWidths[b]/M.width>=V){var X=M.width-M.lineWidths[b],K=x.measureText(" ").width,J=E[b].trim(),G=J.split(" ");X+=(E[b].length-J.length)*K;for(var w=Math.floor(X/K),N=0;w>0;)G[N]+=" ",N=(N+1)%(G.length-1||1),--w;E[b]=G.join(" ")}}this.autoRound&&(D=Math.round(D),B=Math.round(B)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[b],D,B)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[b],D,B))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var z=this.input;return z&&!z.customHitArea&&(z.hitArea.width=this.width,z.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=o.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&f(this.canvas),u.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,d,t){var n=t(31),u=t(0),s=t(11),o=t(22),h=t(15),a=t(361),l=t(192),c=t(1091),f=t(3),v=8,p=new u({Extends:h,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,c],initialize:function(m,x,y,T,C,S,E){var M=m.sys.renderer;h.call(this,m,"TileSprite");var R=m.sys.textures.get(S),L=R.get(E);!T||!C?(T=L.width,C=L.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new f,this._tileScale=new f(1,1),this.dirty=!1,this.renderer=M,this.canvas=n.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=R,this.displayFrame=L,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=a(L.width),this.potHeight=a(L.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(o.CONTEXT_RESTORED,function(O){if(!!O){var F=O.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=O.createTexture2D(0,F.LINEAR,F.LINEAR,F.REPEAT,F.REPEAT,F.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=a(m.width),this.potHeight=a(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||l.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-C),m.fillStyle=this.fillPattern,m.fillRect(T,C,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,d,t){var n=t(0),u=t(18),s=t(11),o=t(75),h=t(22),a=t(51),l=t(15),c=t(70),f=t(222),v=t(1094),p=t(14),g=new n({Extends:l,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,v],initialize:function(x,y,T,C){l.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=f(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=x.sys.game.events;S.on(h.PAUSE,this.globalPause,this),S.on(h.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(c.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(m,x,y,T,C){x===void 0&&(x=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,C)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,M=this.snapshotTexture;return M?(M.setSize(C,S),E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)):(M=this.scene.sys.textures.createCanvas(f(),C,S),this.snapshotTexture=M,E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)),M.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch(C){T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(a.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(o.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==Infinity&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==Infinity&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=u(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(h.PAUSE,this.globalPause,this),m.off(h.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(c.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,d,t){var n=t(0),u=t(228),s=t(470),o=t(56),h=new n({initialize:function(l){this.type=o.POLYGON,this.area=0,this.points=[],l&&this.setTo(l)},contains:function(a,l){return u(this,a,l)},setTo:function(a){if(this.area=0,this.points=[],typeof a=="string"&&(a=a.split(" ")),!Array.isArray(a))return this;for(var l,c=Number.MAX_VALUE,f=0;f<a.length;f++)l={x:0,y:0},typeof a[f]=="number"||typeof a[f]=="string"?(l.x=parseFloat(a[f]),l.y=parseFloat(a[f+1]),f++):Array.isArray(a[f])?(l.x=a[f][0],l.y=a[f][1]):(l.x=a[f].x,l.y=a[f].y),this.points.push(l),l.y<c&&(c=l.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var a=0,l,c,f=0;f<this.points.length-1;f++)l=this.points[f],c=this.points[f+1],a+=(c.x-l.x)*(l.y+c.y);return l=this.points[0],c=this.points[this.points.length-1],a+=(l.x-c.x)*(c.y+l.y),this.area=-a*.5,this.area},getPoints:function(a,l,c){return s(this,a,l,c)}});e.exports=h},function(e,d){var t=function(n,u,s){for(var o=!1,h=-1,a=n.points.length-1;++h<n.points.length;a=h){var l=n.points[h].x,c=n.points[h].y,f=n.points[a].x,v=n.points[a].y;(c<=s&&s<v||v<=s&&s<c)&&u<(f-l)*(s-c)/(v-c)+l&&(o=!o)}return o};e.exports=t},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(2),h=t(17),a=t(478),l=t(1176),c=t(25),f=new n({Extends:s,Mixins:[u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.ScrollFactor,u.Transform,u.Visible,l],initialize:function(p,g,m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),s.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(v){return this.renderToTexture?!0:!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(v,p,g){if(p===void 0&&(p=[]),typeof v=="string"){var m=this.scene.sys.cache.shader;if(!m.has(v))return console.warn("Shader missing: "+v),this;this.shader=m.get(v)}else this.shader=v;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,p,g,m){var x=-1e3,y=1e3,T=1/(v-p),C=1/(g-m),S=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(v+p)*T,E[13]=(m+g)*C,E[14]=(y+x)*S;var M=this.program,R=this.gl,L=this.renderer;L.setProgram(M),R.uniformMatrix4fv(R.getUniformLocation(M,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var v=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=v.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(v,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[v];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(v,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[v],C=y.source;T.textureKey=p,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(m||(m={}),m.width=C.width,m.height=C.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(v,p){return a(this.uniforms,v,p),this},getUniform:function(v){return o(this.uniforms,v,null)},setChannel0:function(v,p){return this.setSampler2D("iChannel0",v,0,p)},setChannel1:function(v,p){return this.setSampler2D("iChannel1",v,1,p)},setChannel2:function(v,p){return this.setSampler2D("iChannel2",v,2,p)},setChannel3:function(v,p){return this.setSampler2D("iChannel3",v,3,p)},initSampler2D:function(v){if(!!v.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,v.value);var g=v.textureData;if(g&&!v.value.isRenderTexture){var m=p[o(g,"magFilter","linear").toUpperCase()],x=p[o(g,"minFilter","linear").toUpperCase()],y=p[o(g,"wrapS","repeat").toUpperCase()],T=p[o(g,"wrapT","repeat").toUpperCase()],C=p[o(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=o(g,"width",512),E=o(g,"height",2),M=o(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,C,S,E,M,C,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,C,p.RGBA,p.UNSIGNED_BYTE,v.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(v.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var v=this.gl,p=this.uniforms,g,m,x,y,T,C=0;for(var S in p)g=p[S],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(v,y,g.transpose,T):x.call(v,y,T):m===2?x.call(v,y,T.x,T.y):m===3?x.call(v,y,T.x,T.y,T.z):m===4?x.call(v,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+C),v.bindTexture(v.TEXTURE_2D,T),v.uniform1i(y,C),C++))},load:function(v){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=v[0],T[1]=v[1],T[4]=v[2],T[5]=v[3],T[8]=v[4],T[9]=v[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,M=E.resolution;M.value.x=g,M.value.y=m,E.time.value=x.game.loop.getDuration();var R=this.pointer;if(R){var L=E.mouse,O=R.x/g,F=1-R.y/m;L.value.x=O.toFixed(2),L.value.y=F.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var C=m.getAttribLocation(g,"inPosition");C!==-1&&(m.enableVertexAttribArray(C),m.vertexAttribPointer(C,2,m.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=p,S[4]=v,S[5]=p,S[8]=v,S[9]=p,S[10]=v;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var v=this.gl;v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=f},function(e,d,t){var n=t(0),u=t(11),s=t(36),o=t(116),h=t(15),a=t(479),l=t(480),c=t(19),f=t(69),v=t(1179),p=t(79),g=t(39),m=t(117),x=new n({Extends:h,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,v],initialize:function(T,C,S,E,M,R,L,O,F,D,B,b){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),h.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new f,this.viewPosition=new g,this.viewMatrix=new f,this.projectionMatrix=new f,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var V=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,M),this.setSize(V.width,V.height),this.initPipeline(),this.setPerspective(V.width,V.height),R&&this.addVertices(R,L,O,F,D,B,b)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(s(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,M,R,L,O){var F=this.scene.sys.cache.obj.get(y);return F&&l(F,this,T,C,S,E,M,R,L,O),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,M,R){var L=new m(y,T,C,S,E,M,R);return this.vertices.push(L),L},addFace:function(y,T,C){var S=new o(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,M,R){var L=a(y,T,C,S,E,M,R);return L&&(this.faces=this.faces.concat(L.faces),this.vertices=this.vertices.concat(L.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=c(this,C).calc,E=this.faces,M=[],R=0;R<E.length;R++){var L=E[R];L.contains(y,T,S)&&M.push(L)}return p(M,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,M=y.y,R=y.z,L=T.x,O=T.y,F=T.z,D=C.x,B=C.y,b=C.z,V=this.getFaceCount(),X=S[0],K=S[1],J=S[2],G=S[3],w=S[4],N=S[5],z=S[6],U=S[7],W=S[8],H=S[9];return S[0]=E,S[1]=M,S[2]=R,S[3]=L,S[4]=O,S[5]=F,S[6]=D,S[7]=B,S[8]=b,S[9]=V,X!==E||K!==M||J!==R||G!==L||w!==O||N!==F||z!==D||U!==B||W!==b||H!==V},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var M=this.transformMatrix;M.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var R=E.z,L=this.faces,O=0;O<L.length;O++)L[O].transformCoordinatesLocal(M,T,C,R);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],M=E.vertex1.tx,R=E.vertex1.ty,L=E.vertex2.tx,O=E.vertex2.ty,F=E.vertex3.tx,D=E.vertex3.ty;C.strokeTriangle(M,R,L,O,F,D)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,d,t){var n=t(50),u=function(s,o){return n(s.x,s.y,o.x,o.y)<=s.radius+o.radius};e.exports=u},function(e,d,t){var n=t(4),u=t(233),s=function(o,h,a){if(a===void 0&&(a=[]),u(o,h)){var l=o.x1,c=o.y1,f=o.x2,v=o.y2,p=h.x,g=h.y,m=h.radius,x=f-l,y=v-c,T=l-p,C=c-g,S=x*x+y*y,E=2*(x*T+y*C),M=T*T+C*C-m*m,R=E*E-4*S*M,L,O;if(R===0){var F=-E/(2*S);L=l+F*x,O=c+F*y,F>=0&&F<=1&&a.push(new n(L,O))}else if(R>0){var D=(-E-Math.sqrt(R))/(2*S);L=l+D*x,O=c+D*y,D>=0&&D<=1&&a.push(new n(L,O));var B=(-E+Math.sqrt(R))/(2*S);L=l+B*x,O=c+B*y,B>=0&&B<=1&&a.push(new n(L,O))}}return a};e.exports=s},function(e,d,t){var n=t(66),u=t(4),s=new u,o=function(h,a,l){if(l===void 0&&(l=s),n(a,h.x1,h.y1))return l.x=h.x1,l.y=h.y1,!0;if(n(a,h.x2,h.y2))return l.x=h.x2,l.y=h.y2,!0;var c=h.x2-h.x1,f=h.y2-h.y1,v=a.x-h.x1,p=a.y-h.y1,g=c*c+f*f,m=c,x=f;if(g>0){var y=(v*c+p*f)/g;m*=y,x*=y}l.x=h.x1+m,l.y=h.y1+x;var T=m*m+x*x;return T<=g&&m*c+x*f>=0&&n(a,l.x,l.y)};e.exports=o},function(e,d,t){var n=t(4),u=t(96),s=t(488),o=function(h,a,l){if(l===void 0&&(l=[]),s(h,a))for(var c=a.getLineA(),f=a.getLineB(),v=a.getLineC(),p=a.getLineD(),g=[new n,new n,new n,new n],m=[u(c,h,g[0]),u(f,h,g[1]),u(v,h,g[2]),u(p,h,g[3])],x=0;x<4;x++)m[x]&&l.push(g[x]);return l};e.exports=o},function(e,d){var t=function(n,u,s,o){s===void 0&&(s=!1),o===void 0&&(o=[]);for(var h=n.x3-n.x1,a=n.y3-n.y1,l=n.x2-n.x1,c=n.y2-n.y1,f=h*h+a*a,v=h*l+a*c,p=l*l+c*c,g=f*p-v*v,m=g===0?0:1/g,x,y,T,C,S,E,M=n.x1,R=n.y1,L=0;L<u.length&&(T=u[L].x-M,C=u[L].y-R,S=h*T+a*C,E=l*T+c*C,x=(p*S-v*E)*m,y=(f*E-v*S)*m,!(x>=0&&y>=0&&x+y<1&&(o.push({x:u[L].x,y:u[L].y}),s)));L++);return o};e.exports=t},function(e,d){var t=function(n,u,s,o){var h=Math.cos(o),a=Math.sin(o),l=n.x1-u,c=n.y1-s;return n.x1=l*h-c*a+u,n.y1=l*a+c*h+s,l=n.x2-u,c=n.y2-s,n.x2=l*h-c*a+u,n.y2=l*a+c*h+s,n};e.exports=t},function(e,d){var t=function(n){return n.height===0?NaN:n.width/n.height};e.exports=t},function(e,d){var t=function(n,u,s,o){var h=Math.cos(o),a=Math.sin(o),l=n.x1-u,c=n.y1-s;return n.x1=l*h-c*a+u,n.y1=l*a+c*h+s,l=n.x2-u,c=n.y2-s,n.x2=l*h-c*a+u,n.y2=l*a+c*h+s,l=n.x3-u,c=n.y3-s,n.x3=l*h-c*a+u,n.y3=l*a+c*h+s,n};e.exports=t},function(e,d,t){e.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(e,d,t){var n=t(17),u=t(156),s=function(o,h){var a=o===void 0?u():n({},o);if(h)for(var l in h)h[l]!==void 0&&(a[l]=h[l]);return a};e.exports=s},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=t(408),c=new n({Extends:s,initialize:function(v,p,g,m){var x="xml";if(a(p)){var y=p;p=h(y,"key"),g=h(y,"url"),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"xml",cache:v.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};s.call(this,v,T)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(f,v,p){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new c(this,f[g]));else this.addFile(new c(this,f,v,p));return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g){var m="text",x="txt",y=f.cacheManager.text;if(a(v)){var T=v;v=h(T,"key"),p=h(T,"url"),g=h(T,"xhrSettings"),x=h(T,"extension",x),m=h(T,"type",m),y=h(T,"cache",y)}var C={type:m,cache:y,extension:x,responseType:"text",key:v,url:p,xhrSettings:g};s.call(this,f,C)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,f,v));return this}),e.exports=l},function(e,d,t){e.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(e,d){var t=function(n,u,s,o,h,a,l){a===void 0&&(a=!0),l===void 0&&(l=!1);var c=[],f=[],v=n.treeMinMax;if(v.minX=u,v.minY=s,v.maxX=u+o,v.maxY=s+h,l&&(f=n.staticTree.search(v)),a&&n.useTree)c=n.tree.search(v);else if(a){var p=n.bodies,g={position:{x:u,y:s},left:u,top:s,right:u+o,bottom:s+h,isCircle:!1},m=n.intersects;p.iterate(function(x){m(x,g)&&c.push(x)})}return f.concat(c)};e.exports=t},function(e,d,t){e.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(e,d,t){var n=t(62),u=function(s,o,h,a){var l=0,c=s.deltaAbsX()+o.deltaAbsX()+a;return s._dx===0&&o._dx===0?(s.embedded=!0,o.embedded=!0):s._dx>o._dx?(l=s.right-o.x,l>c&&!h||s.checkCollision.right===!1||o.checkCollision.left===!1?l=0:(s.touching.none=!1,s.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===n.STATIC_BODY&&!h&&(s.blocked.none=!1,s.blocked.right=!0),s.physicsType===n.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.left=!0))):s._dx<o._dx&&(l=s.x-o.width-o.x,-l>c&&!h||s.checkCollision.left===!1||o.checkCollision.right===!1?l=0:(s.touching.none=!1,s.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===n.STATIC_BODY&&!h&&(s.blocked.none=!1,s.blocked.left=!0),s.physicsType===n.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.right=!0))),s.overlapX=l,o.overlapX=l,l};e.exports=u},function(e,d,t){var n=t(62),u=function(s,o,h,a){var l=0,c=s.deltaAbsY()+o.deltaAbsY()+a;return s._dy===0&&o._dy===0?(s.embedded=!0,o.embedded=!0):s._dy>o._dy?(l=s.bottom-o.y,l>c&&!h||s.checkCollision.down===!1||o.checkCollision.up===!1?l=0:(s.touching.none=!1,s.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===n.STATIC_BODY&&!h&&(s.blocked.none=!1,s.blocked.down=!0),s.physicsType===n.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.up=!0))):s._dy<o._dy&&(l=s.y-o.bottom,-l>c&&!h||s.checkCollision.up===!1||o.checkCollision.down===!1?l=0:(s.touching.none=!1,s.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===n.STATIC_BODY&&!h&&(s.blocked.none=!1,s.blocked.up=!0),s.physicsType===n.STATIC_BODY&&!h&&(o.blocked.none=!1,o.blocked.down=!0))),s.overlapY=l,o.overlapY=l,l};e.exports=u},function(e,d){var t=function(n,u){return!(u.right<=n.left||u.bottom<=n.top||u.position.x>=n.right||u.position.y>=n.bottom)};e.exports=t},function(e,d,t){e.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(e,d){var t={};e.exports=t,function(){t.create=function(n,u){var s=n.bodyA,o=n.bodyB,h={id:t.id(s,o),bodyA:s,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:s.isSensor||o.isSensor,timeCreated:u,timeUpdated:u,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(h,n,u),h},t.update=function(n,u,s){if(n.collision=u,u.collided){var o=u.supports,h=n.activeContacts,a=u.parentA,l=u.parentB;n.inverseMass=a.inverseMass+l.inverseMass,n.friction=Math.min(a.friction,l.friction),n.frictionStatic=Math.max(a.frictionStatic,l.frictionStatic),n.restitution=Math.max(a.restitution,l.restitution),n.slop=Math.max(a.slop,l.slop);for(var c=0;c<o.length;c++)h[c]=o[c].contact;var f=o.length;f<h.length&&(h.length=f),n.separation=u.depth,t.setActive(n,!0,s)}else n.isActive===!0&&t.setActive(n,!1,s)},t.setActive=function(n,u,s){u?(n.isActive=!0,n.timeUpdated=s):(n.isActive=!1,n.activeContacts.length=0)},t.id=function(n,u){return n.id<u.id?"A"+n.id+"B"+u.id:"A"+u.id+"B"+n.id}}()},function(e,d,t){e.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(e,d,t){var n=t(158),u=function(s,o,h){var a=n(s,o,!0,h),l=n(s,o-1,!0,h),c=n(s,o+1,!0,h),f=n(s-1,o,!0,h),v=n(s+1,o,!0,h),p=a&&a.collides;return p&&(a.faceTop=!0,a.faceBottom=!0,a.faceLeft=!0,a.faceRight=!0),l&&l.collides&&(p&&(a.faceTop=!1),l.faceBottom=!p),c&&c.collides&&(p&&(a.faceBottom=!1),c.faceTop=!p),f&&f.collides&&(p&&(a.faceLeft=!1),f.faceRight=!p),v&&v.collides&&(p&&(a.faceRight=!1),v.faceLeft=!p),a&&!a.collides&&a.resetFaces(),a};e.exports=u},function(e,d){var t=function(n,u,s){var o=s.baseTileWidth,h=s.tilemapLayer,a=0;return h&&(u||(u=h.scene.cameras.main),a=h.x+u.scrollX*(1-h.scrollFactorX),o*=h.scaleX),a+n*o};e.exports=t},function(e,d){var t=function(n,u,s){var o=s.baseTileHeight,h=s.tilemapLayer,a=0;return h&&(u||(u=h.scene.cameras.main),a=h.y+u.scrollY*(1-h.scrollFactorY),o*=h.scaleY),a+n*o};e.exports=t},function(e,d){var t=function(n,u,s,o){u===void 0&&(u=!0);var h=o.baseTileWidth,a=o.tilemapLayer;return a&&(s||(s=a.scene.cameras.main),n=n-(a.x+s.scrollX*(1-a.scrollFactorX)),h*=a.scaleX),u?Math.floor(n/h):n/h};e.exports=t},function(e,d){var t=function(n,u,s,o){u===void 0&&(u=!0);var h=o.baseTileHeight,a=o.tilemapLayer;return a&&(s||(s=a.scene.cameras.main),n=n-(a.y+s.scrollY*(1-a.scrollFactorY)),h*=a.scaleY),u?Math.floor(n/h):n/h};e.exports=t},function(e,d,t){var n=t(85),u=t(119),s=t(252),o=t(72),h=function(a,l,c,f,v){if(f===void 0&&(f=!0),!u(l,c,v))return null;var p=v.data[c][l],g=p&&p.collides;if(a instanceof n)v.data[c][l]===null&&(v.data[c][l]=new n(v,a.index,l,c,v.tileWidth,v.tileHeight)),v.data[c][l].copy(a);else{var m=a;v.data[c][l]===null?v.data[c][l]=new n(v,m,l,c,v.tileWidth,v.tileHeight):v.data[c][l].index=m}var x=v.data[c][l],y=v.collideIndexes.indexOf(x.index)!==-1;return o(x,y),f&&g!==x.collides&&s(l,c,v),x};e.exports=h},function(e,d,t){var n=t(29),u=function(s){return s=s.toLowerCase(),s==="isometric"?n.ISOMETRIC:s==="staggered"?n.STAGGERED:s==="hexagonal"?n.HEXAGONAL:n.ORTHOGONAL};e.exports=u},function(e,d,t){var n=t(40),u=t(120),s=t(121),o=t(85),h=function(a,l,c,f,v){for(var p=new u({tileWidth:c,tileHeight:f}),g=new s({name:a,tileWidth:c,tileHeight:f,format:n.ARRAY_2D,layers:[p]}),m=[],x=l.length,y=0,T=0;T<l.length;T++){m[T]=[];for(var C=l[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?m[T][S]=v?null:new o(p,-1,S,T,c,f):m[T][S]=new o(p,E,S,T,c,f)}y===0&&(y=C.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*c,g.heightInPixels=p.heightInPixels=x*f,p.data=m,g};e.exports=h},function(e,d,t){var n=t(571),u=t(261),s=function(a){return{x:a.x,y:a.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(a,l,c){l===void 0&&(l=0),c===void 0&&(c=0);var f=n(a,o);if(f.x+=l,f.y+=c,a.gid){var v=u(a.gid);f.gid=v.gid,f.flippedHorizontal=v.flippedHorizontal,f.flippedVertical=v.flippedVertical,f.flippedAntiDiagonal=v.flippedAntiDiagonal}else a.polyline?f.polyline=a.polyline.map(s):a.polygon?f.polygon=a.polygon.map(s):a.ellipse?f.ellipse=a.ellipse:a.text?f.text=a.text:a.point?f.point=!0:f.rectangle=!0;return f};e.exports=h},function(e,d){var t=2147483648,n=1073741824,u=536870912,s=function(o){var h=Boolean(o&t),a=Boolean(o&n),l=Boolean(o&u);o=o&~(t|n|u);var c=0,f=!1;return h&&a&&l?(c=Math.PI/2,f=!0):h&&a&&!l?(c=Math.PI,f=!1):h&&!a&&l?(c=Math.PI/2,f=!1):h&&!a&&!l?(c=0,f=!0):!h&&a&&l?(c=3*Math.PI/2,f=!1):!h&&a&&!l?(c=Math.PI,f=!0):!h&&!a&&l?(c=3*Math.PI/2,f=!0):!h&&!a&&!l&&(c=0,f=!1),{gid:o,flippedHorizontal:h,flippedVertical:a,flippedAntiDiagonal:l,rotation:c,flipped:f}};e.exports=s},function(e,d,t){var n=t(40),u=t(121),s=t(564),o=t(580),h=function(a,l,c,f,v,p,g,m){c===void 0&&(c=32),f===void 0&&(f=32),v===void 0&&(v=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=l!==void 0?l:"map";x=s(y,n.ARRAY_2D,g,c,f,m)}else if(l!==void 0){var T=a.cache.tilemap.get(l);T?x=s(l,T.format,T.data,c,f,m):console.warn("No map data found for key "+l)}return x===null&&(x=new u({tileWidth:c,tileHeight:f,width:v,height:p})),new o(a,x)};e.exports=h},function(e,d,t){var n=t(6),u=function(s){var o=n(s,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};e.exports=u},function(e,d){function t(h){return!!h.getActive&&typeof h.getActive=="function"}function n(h){return!!h.getStart&&typeof h.getStart=="function"}function u(h){return!!h.getEnd&&typeof h.getEnd=="function"}function s(h){return n(h)||u(h)||t(h)}var o=function(h,a){var l,c=function(E,M,R){return R},f=function(E,M,R){return R},v=null,p=typeof a;if(p==="number")c=function(){return a};else if(p==="string"){var g=a[0],m=parseFloat(a.substr(2));switch(g){case"+":c=function(E,M,R){return R+m};break;case"-":c=function(E,M,R){return R-m};break;case"*":c=function(E,M,R){return R*m};break;case"/":c=function(E,M,R){return R/m};break;default:c=function(){return parseFloat(a)}}}else if(p==="function")c=a;else if(p==="object")if(s(a))t(a)&&(v=a.getActive),u(a)&&(c=a.getEnd),n(a)&&(f=a.getStart);else if(a.hasOwnProperty("value"))l=o(h,a.value);else{var x=a.hasOwnProperty("to"),y=a.hasOwnProperty("from"),T=a.hasOwnProperty("start");if(x&&(y||T)){if(l=o(h,a.to),T){var C=o(h,a.start);l.getActive=C.getEnd}if(y){var S=o(h,a.from);l.getStart=S.getEnd}}}return l||(l={getActive:v,getEnd:c,getStart:f}),l};e.exports=o},function(e,d){var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=t},function(e,d,t){var n=t(0),u=t(9),s=t(267),o=t(16),h=t(5),a=t(100),l=t(14),c=new n({Extends:u,initialize:function(v,p,g){u.call(this),this.parent=v,this.parentIsTimeline=v.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=a.PENDING_ADD,this._pausedState=a.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(f){return f===void 0&&(f=0),this.data[f].current},setTimeScale:function(f){return this.timeScale=f,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},isPaused:function(){return this.state===a.PAUSED},hasTarget:function(f){return this.targets.indexOf(f)!==-1},updateTo:function(f,v,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===f&&(m.end=v,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===a.ACTIVE?this.seek(0):this.state===a.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===a.PENDING_ADD?this:this.play()},calcDuration:function(){for(var f=0,v=l.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>f&&(f=m.totalDuration),m.delay<v&&(v=m.delay)}this.duration=Math.max(f,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=v},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=a.PENDING_ADD,this._pausedState=a.INIT,!1;for(var f=this.data,v=this.totalTargets,p=0;p<this.totalData;p++){var g=f[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,v,this),g.duration=Math.max(x.duration(m,y,0,T,v,this),.001),g.hold=x.hold(m,y,0,T,v,this),g.repeat=x.repeat(m,y,0,T,v,this),g.repeatDelay=x.repeatDelay(m,y,0,T,v,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=a.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===a.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this)},play:function(f){f===void 0&&(f=!1);var v=this.state;return v===a.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=a.ACTIVE,this):v===a.ACTIVE||v===a.PENDING_ADD&&this._pausedState===a.PENDING_ADD?this:!this.parentIsTimeline&&(v===a.PENDING_REMOVE||v===a.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(f),this.calculatedOffset===0?this.state=a.ACTIVE:(this.countdown=this.calculatedOffset,this.state=a.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(f),this.state=a.ACTIVE,this.makeActive()),this)},resetTweenData:function(f){for(var v=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=v[m],y=x.target,T=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,f?(x.start=x.getStartValue(y,T,x.start,C,g,this),x.end=x.getEndValue(y,T,x.end,C,g,this),x.current=x.start,x.state=a.PLAYING_FORWARD):x.state=a.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=a.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===a.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(f,v){v===void 0&&(v=16.6),this.state===a.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,C=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,C,0,S,g,this),x.duration=Math.max(T.duration(y,C,0,S,g,this),.001),x.hold=T.hold(y,C,0,S,g,this),x.repeat=T.repeat(y,C,0,S,g,this),x.repeatDelay=T.repeatDelay(y,C,0,S,g,this),x.current=x.start,x.state=a.PLAYING_FORWARD,this.updateTweenData(this,x,0,S,g),x.delay>0&&(x.elapsed=x.delay,x.state=a.DELAY)}this.calcDuration();var E=!1;this.state===a.PAUSED&&(E=!0,this.state=a.ACTIVE),this.isSeeking=!0;do this.update(0,v);while(this.totalProgress<f);return this.isSeeking=!1,E&&(this.state=a.PAUSED),this},setCallback:function(f,v,p,g){return this.callbacks[f]={func:v,scope:g,params:p},this},complete:function(f){return f===void 0&&(f=0),f?(this.state=a.COMPLETE_DELAY,this.countdown=f):(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(f){return this.state===a.ACTIVE&&f!==void 0&&this.seek(f),this.state!==a.REMOVED&&((this.state===a.PAUSED||this.state===a.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=a.PENDING_REMOVE),this},update:function(f,v){if(this.state===a.PAUSED)return!1;switch(this.useFrames&&(v=1*this.parent.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,v)&&(p=!0)}p||this.nextState();break;case a.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case a.OFFSET_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=a.ACTIVE);break;case a.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===a.PENDING_REMOVE},dispatchTweenDataEvent:function(f,v,p){this.isSeeking||(this.emit(f,this,p.key,p.target,p.current,p.previous),v&&(v.params[1]=p.target,v.func.apply(v.scope,v.params)))},dispatchTweenEvent:function(f,v){this.isSeeking||(this.emit(f,this,this.targets),v&&(v.params[1]=this.targets,v.func.apply(v.scope,v.params)))},setStateFromEnd:function(f,v,p){return v.yoyo?(v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,f.callbacks.onYoyo,v),v.start=v.getStartValue(v.target,v.key,v.start,v.index,f.totalTargets,f),a.PLAYING_BACKWARD):v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.start=v.getStartValue(v.target,v.key,v.start,v.index,f.totalTargets,f),v.end=v.getEndValue(v.target,v.key,v.start,v.index,f.totalTargets,f),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,a.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,f.callbacks.onRepeat,v),a.PLAYING_FORWARD)):a.COMPLETE},setStateFromStart:function(f,v,p){return v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.end=v.getEndValue(v.target,v.key,v.start,v.index,f.totalTargets,f),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,a.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,f.callbacks.onRepeat,v),a.PLAYING_FORWARD)):a.COMPLETE},updateTweenData:function(f,v,p){var g=v.target;switch(v.state){case a.PLAYING_FORWARD:case a.PLAYING_BACKWARD:if(!g){v.state=a.COMPLETE;break}var m=v.elapsed,x=v.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=v.state===a.PLAYING_FORWARD,C=m/x;if(v.elapsed=m,v.progress=C,v.previous=v.current,C===1)T?(v.current=v.end,g[v.key]=v.end,v.hold>0?(v.elapsed=v.hold-y,v.state=a.HOLD_DELAY):v.state=this.setStateFromEnd(f,v,y)):(v.current=v.start,g[v.key]=v.start,v.state=this.setStateFromStart(f,v,y));else{var S=T?v.ease(C):v.ease(1-C);v.current=v.start+(v.end-v.start)*S,g[v.key]=v.current}this.dispatchTweenDataEvent(s.TWEEN_UPDATE,f.callbacks.onUpdate,v);break;case a.DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=a.PENDING_RENDER);break;case a.REPEAT_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=a.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,f.callbacks.onRepeat,v));break;case a.HOLD_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.state=this.setStateFromEnd(f,v,Math.abs(v.elapsed)));break;case a.PENDING_RENDER:g?(v.start=v.getStartValue(g,v.key,g[v.key],v.index,f.totalTargets,f),v.end=v.getEndValue(g,v.key,v.start,v.index,f.totalTargets,f),v.current=v.start,g[v.key]=v.start,v.state=a.PLAYING_FORWARD):v.state=a.COMPLETE;break}return v.state!==a.COMPLETE}});c.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],h.register("tween",function(f){return this.scene.sys.tweens.add(f)}),o.register("tween",function(f){return this.scene.sys.tweens.create(f)}),e.exports=c},function(e,d,t){e.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(e,d){var t=function(n,u,s,o,h,a,l,c,f,v,p,g,m,x,y){return{target:n,index:u,key:s,getActiveValue:a,getEndValue:o,getStartValue:h,ease:l,duration:0,totalDuration:0,delay:0,yoyo:v,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:c,duration:f,hold:p,repeat:g,repeatDelay:m},state:0}};e.exports=t},function(e,d,t){var n=t(68),u=function(s){return n(s,-Math.PI,Math.PI)};e.exports=u},function(e,d,t){var n=t(68),u=function(s){return n(s,-180,180)};e.exports=u},function(e,d,t){var n={};e.exports=n;var u=t(83),s=t(32);(function(){n.fromVertices=function(o){for(var h={},a=0;a<o.length;a++){var l=(a+1)%o.length,c=u.normalise({x:o[l].y-o[a].y,y:o[a].x-o[l].x}),f=c.y===0?Infinity:c.x/c.y;f=f.toFixed(3).toString(),h[f]=c}return s.values(h)},n.rotate=function(o,h){if(h!==0)for(var a=Math.cos(h),l=Math.sin(h),c=0;c<o.length;c++){var f=o[c],v;v=f.x*a-f.y*l,f.y=f.x*l+f.y*a,f.x=v}}})()},function(e,d,t){e.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(e,d,t){var n={};e.exports=n;var u=t(274),s=t(250),o=t(84);(function(){n.collisions=function(h,a){for(var l=[],c=a.pairs.table,f=a.metrics,v=0;v<h.length;v++){var p=h[v][0],g=h[v][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!n.canCollide(p.collisionFilter,g.collisionFilter)&&(f.midphaseTests+=1,o.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||o.overlaps(x.bounds,T.bounds)){var C=s.id(x,T),S=c[C],E;S&&S.isActive?E=S.collision:E=null;var M=u.collides(x,T,E);f.narrowphaseTests+=1,M.reused&&(f.narrowReuseCount+=1),M.collided&&(l.push(M),f.narrowDetections+=1)}}}return l},n.canCollide=function(h,a){return h.group===a.group&&h.group!==0?h.group>0:(h.mask&a.category)!=0&&(a.mask&h.category)!=0}})()},function(e,d,t){var n={};e.exports=n;var u=t(64),s=t(83);(function(){n.collides=function(o,h,a){var l,c,f,v,p=!1;if(a){var g=o.parent,m=h.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=a&&a.collided&&x<.2,v=a}else v={collided:!1,bodyA:o,bodyB:h};if(a&&p){var y=v.axisBody,T=y===o?h:o,C=[y.axes[a.axisNumber]];if(f=n._overlapAxes(y.vertices,T.vertices,C),v.reused=!0,f.overlap<=0)return v.collided=!1,v}else{if(l=n._overlapAxes(o.vertices,h.vertices,o.axes),l.overlap<=0||(c=n._overlapAxes(h.vertices,o.vertices,h.axes),c.overlap<=0))return v.collided=!1,v;l.overlap<c.overlap?(f=l,v.axisBody=o):(f=c,v.axisBody=h),v.axisNumber=f.axisNumber}v.bodyA=o.id<h.id?o:h,v.bodyB=o.id<h.id?h:o,v.collided=!0,v.depth=f.overlap,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent,o=v.bodyA,h=v.bodyB,s.dot(f.axis,s.sub(h.position,o.position))<0?v.normal={x:f.axis.x,y:f.axis.y}:v.normal={x:-f.axis.x,y:-f.axis.y},v.tangent=s.perp(v.normal),v.penetration=v.penetration||{},v.penetration.x=v.normal.x*v.depth,v.penetration.y=v.normal.y*v.depth;var S=n._findSupports(o,h,v.normal),E=[];if(u.contains(o.vertices,S[0])&&E.push(S[0]),u.contains(o.vertices,S[1])&&E.push(S[1]),E.length<2){var M=n._findSupports(h,o,s.neg(v.normal));u.contains(h.vertices,M[0])&&E.push(M[0]),E.length<2&&u.contains(h.vertices,M[1])&&E.push(M[1])}return E.length<1&&(E=[S[0]]),v.supports=E,v},n._overlapAxes=function(o,h,a){for(var l=s._temp[0],c=s._temp[1],f={overlap:Number.MAX_VALUE},v,p,g=0;g<a.length;g++){if(p=a[g],n._projectToAxis(l,o,p),n._projectToAxis(c,h,p),v=Math.min(l.max-c.min,c.max-l.min),v<=0)return f.overlap=v,f;v<f.overlap&&(f.overlap=v,f.axis=p,f.axisNumber=g)}return f},n._projectToAxis=function(o,h,a){for(var l=s.dot(h[0],a),c=l,f=1;f<h.length;f+=1){var v=s.dot(h[f],a);v>c?c=v:v<l&&(l=v)}o.min=l,o.max=c},n._findSupports=function(o,h,a){for(var l=Number.MAX_VALUE,c=s._temp[0],f=h.vertices,v=o.position,p,g,m,x,y=0;y<f.length;y++)g=f[y],c.x=g.x-v.x,c.y=g.y-v.y,p=-s.dot(a,c),p<l&&(l=p,m=g);var T=m.index-1>=0?m.index-1:f.length-1;g=f[T],c.x=g.x-v.x,c.y=g.y-v.y,l=-s.dot(a,c),x=g;var C=(m.index+1)%f.length;return g=f[C],c.x=g.x-v.x,c.y=g.y-v.y,p=-s.dot(a,c),p<l&&(x=g),[m,x]}})()},function(e,d,t){e.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(e,d,t){var n=t(123),u=[];u[n.BOTTOM_CENTER]=t(277),u[n.BOTTOM_LEFT]=t(278),u[n.BOTTOM_RIGHT]=t(279),u[n.LEFT_BOTTOM]=t(280),u[n.LEFT_CENTER]=t(281),u[n.LEFT_TOP]=t(282),u[n.RIGHT_BOTTOM]=t(283),u[n.RIGHT_CENTER]=t(284),u[n.RIGHT_TOP]=t(285),u[n.TOP_CENTER]=t(286),u[n.TOP_LEFT]=t(287),u[n.TOP_RIGHT]=t(288);var s=function(o,h,a,l,c){return u[a](o,h,l,c)};e.exports=s},function(e,d,t){var n=t(42),u=t(87),s=t(88),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,u(l)+c),o(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(42),u=t(43),s=t(53),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,u(l)-c),o(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(42),u=t(44),s=t(54),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,u(l)+c),o(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(42),u=t(43),s=t(55),o=t(54),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)-c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(89),u=t(43),s=t(90),o=t(54),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)-c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(43),u=t(45),s=t(54),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,n(l)-c),o(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(42),u=t(44),s=t(55),o=t(53),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)+c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(89),u=t(44),s=t(90),o=t(53),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)+c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(44),u=t(45),s=t(53),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,n(l)+c),o(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(87),u=t(45),s=t(55),o=t(88),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,n(l)+c),s(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(43),u=t(45),s=t(55),o=t(53),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,n(l)-c),s(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(44),u=t(45),s=t(55),o=t(54),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,n(l)+c),s(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(123),u=[];u[n.BOTTOM_CENTER]=t(290),u[n.BOTTOM_LEFT]=t(291),u[n.BOTTOM_RIGHT]=t(292),u[n.CENTER]=t(293),u[n.LEFT_CENTER]=t(295),u[n.RIGHT_CENTER]=t(296),u[n.TOP_CENTER]=t(297),u[n.TOP_LEFT]=t(298),u[n.TOP_RIGHT]=t(299),u[n.LEFT_BOTTOM]=u[n.BOTTOM_LEFT],u[n.LEFT_TOP]=u[n.TOP_LEFT],u[n.RIGHT_BOTTOM]=u[n.BOTTOM_RIGHT],u[n.RIGHT_TOP]=u[n.TOP_RIGHT];var s=function(o,h,a,l,c){return u[a](o,h,l,c)};e.exports=s},function(e,d,t){var n=t(42),u=t(87),s=t(55),o=t(88),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)+c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(42),u=t(43),s=t(55),o=t(53),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)-c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(42),u=t(44),s=t(55),o=t(54),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)+c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(294),u=t(87),s=t(89),o=function(h,a,l,c){return l===void 0&&(l=0),c===void 0&&(c=0),n(h,u(a)+l,s(a)+c),h};e.exports=o},function(e,d,t){var n=t(88),u=t(90),s=function(o,h,a){return n(o,h),u(o,a)};e.exports=s},function(e,d,t){var n=t(89),u=t(43),s=t(90),o=t(53),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)-c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(89),u=t(44),s=t(90),o=t(54),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,u(l)+c),s(a,n(l)+f),a};e.exports=h},function(e,d,t){var n=t(87),u=t(45),s=t(88),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,n(l)+c),o(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(43),u=t(45),s=t(53),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,n(l)-c),o(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(44),u=t(45),s=t(54),o=t(52),h=function(a,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),s(a,n(l)+c),o(a,u(l)-f),a};e.exports=h},function(e,d,t){var n=t(169),u=t(98),s=t(14),o=t(4),h=function(a,l,c){c===void 0&&(c=new o);var f=u(l,0,s.PI2);return n(a,f,c)};e.exports=h},function(e,d,t){var n=t(302),u=t(169),s=t(98),o=t(14),h=function(a,l,c,f){f===void 0&&(f=[]),!l&&c>0&&(l=n(a)/c);for(var v=0;v<l;v++){var p=s(v/l,0,o.PI2);f.push(u(a,p))}return f};e.exports=h},function(e,d){var t=function(n){return 2*(Math.PI*n.radius)};e.exports=t},function(e,d,t){var n=t(18),u=2,s={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var h=n(o,0,1);this._alpha=h,h===0?this.renderFlags&=~u:this.renderFlags|=u}}};e.exports=s},function(e,d,t){var n=t(35),u={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(s){typeof s=="string"&&(s=n[s]),s|=0,s>=-1&&(this._blendMode=s)}},setBlendMode:function(s){return this.blendMode=s,this}};e.exports=u},function(e,d){var t={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};e.exports=t},function(e,d,t){var n=t(171),u=t(130),s=function(o,h,a,l){l===void 0&&(l=[]),!h&&a>0&&(h=u(o)/a);for(var c=0;c<h;c++){var f=c/h;l.push(n(o,f))}return l};e.exports=s},function(e,d,t){var n=t(4),u=function(s,o,h){return h===void 0&&(h=new n),h.x=s.x1+(s.x2-s.x1)*o,h.y=s.y1+(s.y2-s.y1)*o,h};e.exports=u},function(e,d){var t=function(n,u,s,o){var h=Math.cos(o),a=Math.sin(o),l=n.x-u,c=n.y-s;return n.x=l*h-c*a+u,n.y=l*a+c*h+s,n};e.exports=t},function(e,d,t){var n=t(310),u=t(311),s={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new n(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new u(this.scene,o)}};e.exports=s},function(e,d,t){var n=t(0),u=t(22),s=t(91),o=new n({initialize:function(a,l){var c=a.sys.renderer;this.renderer=c,this.bitmapMask=l,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),a.sys.game.events.on(u.CONTEXT_RESTORED,this.createMask,this),c&&c.on(s.RESIZE,this.createMask,this)},createMask:function(){var h=this.renderer;if(!(!h||!h.gl)){this.mainTexture&&this.clearMask();var a=h.width,l=h.height,c=(a&a-1)==0&&(l&l-1)==0,f=h.gl,v=c?f.REPEAT:f.CLAMP_TO_EDGE,p=f.LINEAR;this.mainTexture=h.createTexture2D(0,p,p,v,v,f.RGBA,null,a,l),this.maskTexture=h.createTexture2D(0,p,p,v,v,f.RGBA,null,a,l),this.mainFramebuffer=h.createFramebuffer(a,l,this.mainTexture,!0),this.maskFramebuffer=h.createFramebuffer(a,l,this.maskTexture,!0)}},clearMask:function(){var h=this.renderer;!h||!h.gl||!this.mainTexture||(h.deleteTexture(this.mainTexture),h.deleteTexture(this.maskTexture),h.deleteFramebuffer(this.mainFramebuffer),h.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(h){this.bitmapMask=h},preRenderWebGL:function(h,a,l){h.pipelines.BITMAPMASK_PIPELINE.beginMask(this,a,l)},postRenderWebGL:function(h,a){h.pipelines.BITMAPMASK_PIPELINE.endMask(this,a)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=o},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(s){return this.geometryMask=s,this},setInvertAlpha:function(s){return s===void 0&&(s=!0),this.invertAlpha=s,this},preRenderWebGL:function(s,o,h){var a=s.gl;s.flush(),s.maskStack.length===0&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),s.maskCount=0),s.currentCameraMask.mask!==this&&(s.currentMask.mask=this),s.maskStack.push({mask:this,camera:h}),this.applyStencil(s,h,!0),s.maskCount++},applyStencil:function(s,o,h){var a=s.gl,l=this.geometryMask,c=s.maskCount;a.colorMask(!1,!1,!1,!1),h?(a.stencilFunc(a.EQUAL,c,255),a.stencilOp(a.KEEP,a.KEEP,a.INCR)):(a.stencilFunc(a.EQUAL,c+1,255),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),l.renderWebGL(s,l,o),s.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),h?this.invertAlpha?a.stencilFunc(a.NOTEQUAL,c+1,255):a.stencilFunc(a.EQUAL,c+1,255):this.invertAlpha?a.stencilFunc(a.NOTEQUAL,c,255):a.stencilFunc(a.EQUAL,c,255)},postRenderWebGL:function(s){var o=s.gl;s.maskStack.pop(),s.maskCount--,s.flush();var h=s.currentMask;if(s.maskStack.length===0)h.mask=null,o.disable(o.STENCIL_TEST);else{var a=s.maskStack[s.maskStack.length-1];a.mask.applyStencil(s,a.camera,!1),s.currentCameraMask.mask!==a.mask?(h.mask=a.mask,h.camera=a.camera):h.mask=null}},preRenderCanvas:function(s,o,h){var a=this.geometryMask;s.currentContext.save(),a.renderCanvas(s,a,h,null,null,!0),s.currentContext.clip()},postRenderCanvas:function(s){s.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=u},function(e,d){var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,u){return u===void 0&&(u=n),this.scrollFactorX=n,this.scrollFactorY=u,this}};e.exports=t},function(e,d,t){var n=t(14),u=t(25),s=t(177),o=t(269),h=t(270),a=t(3),l=4,c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(f){this._scaleX=f,this._scaleY=f,f===0?this.renderFlags&=~l:this.renderFlags|=l}},scaleX:{get:function(){return this._scaleX},set:function(f){this._scaleX=f,f===0?this.renderFlags&=~l:this.renderFlags|=l}},scaleY:{get:function(){return this._scaleY},set:function(f){this._scaleY=f,f===0?this.renderFlags&=~l:this.renderFlags|=l}},angle:{get:function(){return h(this._rotation*n.RAD_TO_DEG)},set:function(f){this.rotation=h(f)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=o(f)}},setPosition:function(f,v,p,g){return f===void 0&&(f=0),v===void 0&&(v=f),p===void 0&&(p=0),g===void 0&&(g=0),this.x=f,this.y=v,this.z=p,this.w=g,this},copyPosition:function(f){return f.x!==void 0&&(this.x=f.x),f.y!==void 0&&(this.y=f.y),f.z!==void 0&&(this.z=f.z),f.w!==void 0&&(this.w=f.w),this},setRandomPosition:function(f,v,p,g){return f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=f+Math.random()*p,this.y=v+Math.random()*g,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,this},setScale:function(f,v){return f===void 0&&(f=1),v===void 0&&(v=f),this.scaleX=f,this.scaleY=v,this},setX:function(f){return f===void 0&&(f=0),this.x=f,this},setY:function(f){return f===void 0&&(f=0),this.y=f,this},setZ:function(f){return f===void 0&&(f=0),this.z=f,this},setW:function(f){return f===void 0&&(f=0),this.w=f,this},getLocalTransformMatrix:function(f){return f===void 0&&(f=new u),f.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(f,v){f===void 0&&(f=new u),v===void 0&&(v=new u);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(f);for(f.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)v.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),v.multiply(f,f),p=p.parentContainer;return f},getLocalPoint:function(f,v,p,g){p||(p=new a),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=f+m*this.scrollFactorX-m,T=v+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):s(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var f=0,v=this.parentContainer;v;)f+=v.rotation,v=v.parentContainer;return f}};e.exports=c},function(e,d){var t=1,n={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(u){return this.visible=u,this}};e.exports=n},function(e,d,t){e.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(e,d,t){var n=t(130),u=t(4),s=function(o,h,a,l){if(l===void 0&&(l=[]),!h&&!a)return l;h?a=Math.round(n(o)/h):h=n(o)/a;for(var c=o.x,f=o.y,v=0,p=0;p<a;p++)switch(l.push(new u(c,f)),v){case 0:c+=h,c>=o.right&&(v=1,f+=c-o.right,c=o.right);break;case 1:f+=h,f>=o.bottom&&(v=2,c-=f-o.bottom,f=o.bottom);break;case 2:c-=h,c<=o.left&&(v=3,f-=o.left-c,c=o.left);break;case 3:f-=h,f<=o.top&&(v=0,f=o.top);break}return l};e.exports=s},function(e,d){var t=function(n,u,s){u===void 0&&(u=1),s===void 0&&(s=[]);var o=Math.round(n.x1),h=Math.round(n.y1),a=Math.round(n.x2),l=Math.round(n.y2),c=Math.abs(a-o),f=Math.abs(l-h),v=o<a?1:-1,p=h<l?1:-1,g=c-f;s.push({x:o,y:h});for(var m=1;!(o===a&&h===l);){var x=g<<1;x>-f&&(g-=f,o+=v),x<c&&(g+=c,h+=p),m%u==0&&s.push({x:o,y:h}),m++}return s};e.exports=t},function(e,d){var t=function(n,u,s){if(u.length){if(u.length===1)return u[0]}else return NaN;var o=1,h,a;if(s){if(n<u[0][s])return u[0];for(;u[o][s]<n;)o++}else for(;u[o]<n;)o++;return o>u.length&&(o=u.length),s?(h=u[o-1][s],a=u[o][s],a-n<=n-h?u[o]:u[o-1]):(h=u[o-1],a=u[o],a-n<=n-h?a:h)};e.exports=t},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l,c){c===void 0&&(c=!1),this.textureKey=o,this.textureFrame=h,this.index=a,this.frame=l,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=u},function(e,d){var t=function(n){var u=/\D/g;return n.sort(function(s,o){return parseInt(s.replace(u,""),10)-parseInt(o.replace(u,""),10)}),n};e.exports=t},function(e,d,t){var n=t(185),u=t(0),s=t(102),o=t(9),h=t(132),a=t(22),l=t(2),c=t(6),f=t(186),v=t(322),p=new u({Extends:o,initialize:function(m){o.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",m.events.once(a.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(a.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof m=="string"?m:m.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=x,T.set(C,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var C=typeof m=="string"?m:m.key;T.hasOwnProperty(C)&&delete T[C]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,C=x.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(h.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,C=c(y,"meta",null),S=c(y,"frames",null);if(C&&S){var E=c(C,"frameTags",[]);E.forEach(function(M){var R=[],L=l(M,"name",null),O=l(M,"from",0),F=l(M,"to",0),D=l(M,"direction","forward");if(!!L&&(!m||m&&m.indexOf(L)>-1)){for(var B=[],b=Number.MAX_SAFE_INTEGER,V=O;V<=F;V++){var X=V.toString(),K=S[X];if(K){var J=l(K,"duration",Number.MAX_SAFE_INTEGER);J<b&&(b=J),B.push({frame:X,duration:J})}}B.forEach(function(z){R.push({key:g,frame:z.frame,duration:b-z.duration})});var G=b*R.length;D==="reverse"&&(R=R.reverse());var w={key:L,frames:R,duration:G,yoyo:D==="pingpong"},N=T.create(w);N&&x.push(N)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new n(this,m,g),this.anims.set(m,x),this.emit(h.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=c(m,"prefix",""),y=c(m,"start",0),T=c(m,"end",0),C=c(m,"suffix",""),S=c(m,"zeroPad",0),E=c(m,"outputArray",[]),M=c(m,"frames",!1),R=this.textureManager.get(g);if(!R)return E;var L;if(m)for(M||(M=v(y,T)),L=0;L<M.length;L++){var O=x+f(M[L],S,"0",1)+C;R.has(O)?E.push({key:g,frame:O}):console.warn("generateFrameNames: Frame missing: "+O+" from texture: "+g)}else for(M=R.getFrameNames(),L=0;L<M.length;L++)E.push({key:g,frame:M[L]});return E},generateFrameNumbers:function(g,m){var x=c(m,"start",0),y=c(m,"end",-1),T=c(m,"first",!1),C=c(m,"outputArray",[]),S=c(m,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=v(x,y));for(var M=0;M<S.length;M++)E.has(S[M])?C.push({key:g,frame:S[M]}):console.warn("generateFrameNumbers: Frame "+M+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var C=0;C<m.length;C++){var S=x<0?Math.abs(x)*(T-C):x*C;m[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(h.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,d){var t=function(n,u,s,o){var h=[],a,l=!1;if((s||o)&&(l=!0,s||(s=""),o||(o="")),u<n)for(a=n;a>=u;a--)l?h.push(s+a.toString()+o):h.push(a);else for(a=n;a<=u;a++)l?h.push(s+a.toString()+o):h.push(a);return h};e.exports=t},function(e,d,t){var n=t(0),u=t(102),s=t(9),o=t(324),h=new n({initialize:function(){this.entries=new u,this.events=new s},add:function(a,l){return this.entries.set(a,l),this.events.emit(o.ADD,this,a,l),this},has:function(a){return this.entries.has(a)},exists:function(a){return this.entries.has(a)},get:function(a){return this.entries.get(a)},remove:function(a){var l=this.get(a);return l&&(this.entries.delete(a),this.events.emit(o.REMOVE,this,a,l.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=h},function(e,d,t){e.exports={ADD:t(736),REMOVE:t(737)}},function(e,d,t){var n=t(323),u=t(0),s=t(22),o=new u({initialize:function(a){this.game=a,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new n),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],a=0;a<h.length;a++)this[h[a]].destroy(),this[h[a]]=null;for(var l in this.custom)this.custom[l].destroy();this.custom=null,this.game=null}});e.exports=o},function(e,d,t){var n=t(133),u=t(190),s=t(18),o=t(0),h=t(11),a=t(333),l=t(37),c=t(135),f=t(10),v=t(3),p=new o({Extends:n,Mixins:[h.Flip,h.Tint,h.Pipeline],initialize:function(m,x,y,T){n.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new f(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-x,this.scrollY=C-y}u(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,C){return this.fadeEffect.start(!1,g,m,x,y,!0,T,C)},fadeOut:function(g,m,x,y,T,C){return this.fadeEffect.start(!0,g,m,x,y,!0,T,C)},fadeFrom:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!1,g,m,x,y,T,C,S)},fade:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!0,g,m,x,y,T,C,S)},flash:function(g,m,x,y,T,C,S){return this.flashEffect.start(g,m,x,y,T,C,S)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,C,S){return this.panEffect.start(g,m,x,y,T,C,S)},rotateTo:function(g,m,x,y,T,C,S){return this.rotateToEffect.start(g,m,x,y,T,C,S)},zoomTo:function(g,m,x,y,T,C){return this.zoomEffect.start(g,m,x,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=m*this.originY,M=this._follow,R=this.deadzone,L=this.scrollX,O=this.scrollY;R&&u(R,this.midPoint.x,this.midPoint.y);var F=!1;if(M&&!this.panEffect.isRunning){var D=M.x-this.followOffset.x,B=M.y-this.followOffset.y;R?(D<R.x?L=c(L,L-(R.x-D),this.lerp.x):D>R.right&&(L=c(L,L+(D-R.right),this.lerp.x)),B<R.y?O=c(O,O-(R.y-B),this.lerp.y):B>R.bottom&&(O=c(O,O+(B-R.bottom),this.lerp.y))):(L=c(L,D-S,this.lerp.x),O=c(O,B-E,this.lerp.y)),F=!0}this.useBounds&&(L=this.clampX(L),O=this.clampY(O)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),L=Math.round(L),O=Math.round(O)),this.scrollX=L,this.scrollY=O;var b=L+x,V=O+y;this.midPoint.set(b,V);var X=g/T,K=m/T,J=b-X/2,G=V-K/2;this.roundPixels&&(J=Math.round(J),G=Math.round(G)),this.worldView.setTo(J,G,X,K),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),F&&this.emit(l.FOLLOW_UPDATE,this,M)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,C){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=m,x=s(x,0,1),y=s(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,M=g.x-T,R=g.y-C;return this.midPoint.set(M,R),this.scrollX=M-S,this.scrollY=R-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,d,t){var n=t(38),u=function(s){var o=new n;s=s.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(f,v,p,g){return v+v+p+p+g+g});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);if(h){var a=parseInt(h[1],16),l=parseInt(h[2],16),c=parseInt(h[3],16);o.setTo(a,l,c)}return o};e.exports=u},function(e,d){var t=function(n,u,s,o){return o<<24|n<<16|u<<8|s};e.exports=t},function(e,d){var t=function(n,u,s,o){o===void 0&&(o={h:0,s:0,v:0}),n/=255,u/=255,s/=255;var h=Math.min(n,u,s),a=Math.max(n,u,s),l=a-h,c=0,f=a===0?0:l/a,v=a;return a!==h&&(a===n?c=(u-s)/l+(u<s?6:0):a===u?c=(s-n)/l+2:a===s&&(c=(n-u)/l+4),c/=6),o.hasOwnProperty("_h")?(o._h=c,o._s=f,o._v=v):(o.h=c,o.s=f,o.v=v),o};e.exports=t},function(e,d){var t=function(n){return n>16777215?{a:n>>>24,r:n>>16&255,g:n>>8&255,b:n&255}:{a:255,r:n>>16&255,g:n>>8&255,b:n&255}};e.exports=t},function(e,d,t){var n=t(38),u=function(s){return new n(s.r,s.g,s.b,s.a)};e.exports=u},function(e,d,t){var n=t(38),u=function(s){var o=new n,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(s.toLowerCase());if(h){var a=parseInt(h[1],10),l=parseInt(h[2],10),c=parseInt(h[3],10),f=h[4]!==void 0?parseFloat(h[4]):1;o.setTo(a,l,c,f*255)}return o};e.exports=u},function(e,d,t){e.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(e,d,t){e.exports={In:t(764),Out:t(765),InOut:t(766)}},function(e,d,t){e.exports={In:t(767),Out:t(768),InOut:t(769)}},function(e,d,t){e.exports={In:t(770),Out:t(771),InOut:t(772)}},function(e,d,t){e.exports={In:t(773),Out:t(774),InOut:t(775)}},function(e,d,t){e.exports={In:t(776),Out:t(777),InOut:t(778)}},function(e,d,t){e.exports={In:t(779),Out:t(780),InOut:t(781)}},function(e,d,t){e.exports=t(782)},function(e,d,t){e.exports={In:t(783),Out:t(784),InOut:t(785)}},function(e,d,t){e.exports={In:t(786),Out:t(787),InOut:t(788)}},function(e,d,t){e.exports={In:t(789),Out:t(790),InOut:t(791)}},function(e,d,t){e.exports={In:t(792),Out:t(793),InOut:t(794)}},function(e,d,t){e.exports=t(795)},function(e,d,t){var n=t(0),u=t(33),s=t(347),o=t(2),h=t(6),a=t(7),l=t(193),c=t(1),f=t(197),v=t(187),p=new n({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=h(m,"width",1024),this.height=h(m,"height",768),this.zoom=h(m,"zoom",1),this.parent=h(m,"parent",void 0),this.scaleMode=h(m,"scaleMode",0),this.expandParent=h(m,"expandParent",!0),this.autoRound=h(m,"autoRound",!1),this.autoCenter=h(m,"autoCenter",0),this.resizeInterval=h(m,"resizeInterval",500),this.fullscreenTarget=h(m,"fullscreenTarget",null),this.minWidth=h(m,"minWidth",0),this.maxWidth=h(m,"maxWidth",0),this.minHeight=h(m,"minHeight",0),this.maxHeight=h(m,"maxHeight",0);var T=h(m,"scale",null);T&&(this.width=h(T,"width",this.width),this.height=h(T,"height",this.height),this.zoom=h(T,"zoom",this.zoom),this.parent=h(T,"parent",this.parent),this.scaleMode=h(T,"mode",this.scaleMode),this.expandParent=h(T,"expandParent",this.expandParent),this.autoRound=h(T,"autoRound",this.autoRound),this.autoCenter=h(T,"autoCenter",this.autoCenter),this.resizeInterval=h(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=h(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=h(T,"min.width",this.minWidth),this.maxWidth=h(T,"max.width",this.maxWidth),this.minHeight=h(T,"min.height",this.minHeight),this.maxHeight=h(T,"max.height",this.maxHeight)),this.renderType=h(m,"type",u.AUTO),this.canvas=h(m,"canvas",null),this.context=h(m,"context",null),this.canvasStyle=h(m,"canvasStyle",null),this.customEnvironment=h(m,"customEnvironment",!1),this.sceneConfig=h(m,"scene",null),this.seed=h(m,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=h(m,"title",""),this.gameURL=h(m,"url","https://phaser.io"),this.gameVersion=h(m,"version",""),this.autoFocus=h(m,"autoFocus",!0),this.domCreateContainer=h(m,"dom.createContainer",!1),this.domBehindCanvas=h(m,"dom.behindCanvas",!1),this.domPointerEvents=h(m,"dom.pointerEvents","none"),this.inputKeyboard=h(m,"input.keyboard",!0),this.inputKeyboardEventTarget=h(m,"input.keyboard.target",window),this.inputKeyboardCapture=h(m,"input.keyboard.capture",[]),this.inputMouse=h(m,"input.mouse",!0),this.inputMouseEventTarget=h(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=h(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=h(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=h(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=h(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=h(m,"input.touch",s.input.touch),this.inputTouchEventTarget=h(m,"input.touch.target",null),this.inputTouchCapture=h(m,"input.touch.capture",!0),this.inputActivePointers=h(m,"input.activePointers",1),this.inputSmoothFactor=h(m,"input.smoothFactor",0),this.inputWindowEvents=h(m,"input.windowEvents",!0),this.inputGamepad=h(m,"input.gamepad",!1),this.inputGamepadEventTarget=h(m,"input.gamepad.target",window),this.disableContextMenu=h(m,"disableContextMenu",!1),this.audio=h(m,"audio",{}),this.hideBanner=h(m,"banner",null)===!1,this.hidePhaser=h(m,"banner.hidePhaser",!1),this.bannerTextColor=h(m,"banner.text",y),this.bannerBackgroundColor=h(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(m,"fps",null);var C=h(m,"render",m);this.pipeline=h(C,"pipeline",null),this.antialias=h(C,"antialias",!0),this.antialiasGL=h(C,"antialiasGL",!0),this.mipmapFilter=h(C,"mipmapFilter","LINEAR"),this.desynchronized=h(C,"desynchronized",!1),this.roundPixels=h(C,"roundPixels",!1),this.pixelArt=h(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=h(C,"transparent",!1),this.clearBeforeRender=h(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=h(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=h(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=h(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=h(C,"powerPreference","default"),this.batchSize=h(C,"batchSize",4096),this.maxTextures=h(C,"maxTextures",-1),this.maxLights=h(C,"maxLights",10);var S=h(m,"backgroundColor",0);this.backgroundColor=v(S),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=h(m,"callbacks.preBoot",c),this.postBoot=h(m,"callbacks.postBoot",c),this.physics=h(m,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(m,"loader.baseURL",""),this.loaderPath=h(m,"loader.path","");var E=s.os.android?6:32;this.loaderMaxParallelDownloads=h(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=h(m,"loader.crossOrigin",void 0),this.loaderResponseType=h(m,"loader.responseType",""),this.loaderAsync=h(m,"loader.async",!0),this.loaderUser=h(m,"loader.user",""),this.loaderPassword=h(m,"loader.password",""),this.loaderTimeout=h(m,"loader.timeout",0),this.loaderWithCredentials=h(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var M=h(m,"plugins",null),R=f.DefaultScene;M&&(Array.isArray(M)?this.defaultPlugins=M:a(M)&&(this.installGlobalPlugins=o(M,"global",[]),this.installScenePlugins=o(M,"scene",[]),Array.isArray(M.default)?R=M.default:Array.isArray(M.defaultMerge)&&(R=R.concat(M.defaultMerge)))),this.defaultPlugins=R;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=h(m,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(m,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=h(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});e.exports=p},function(e,d,t){e.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(e,d,t){var n=t(31),u={supportInverseAlpha:!1,supportNewBlendModes:!1};function s(){var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",l="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var f=new Image;f.onload=function(){var v=n.create(f,6,1),p=v.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(c,0,0),p.drawImage(f,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;n.remove(f),u.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},f.src=a+"/wCKxvRF"+l},c.src=a+"AP804Oa6"+l,!1}function o(){var a=n.create(this,2,1),l=a.getContext("2d");l.fillStyle="rgba(10, 20, 30, 0.5)",l.fillRect(0,0,1,1);var c=l.getImageData(0,0,1,1);if(c===null)return!1;l.putImageData(c,1,0);var f=l.getImageData(1,0,1,1);return f.data[0]===c.data[0]&&f.data[1]===c.data[1]&&f.data[2]===c.data[2]&&f.data[3]===c.data[3]}function h(){return typeof importScripts!="function"&&document!==void 0&&(u.supportNewBlendModes=s(),u.supportInverseAlpha=o()),u}e.exports=h()},function(e,d){var t=function(n,u,s,o){return Math.atan2(o-u,s-n)};e.exports=t},function(e,d){var t=function(n,u){return Math.atan2(u.y-n.y,u.x-n.x)};e.exports=t},function(e,d){var t=function(n){return n=n%(2*Math.PI),n>=0?n:n+2*Math.PI};e.exports=t},function(e,d){var t=function(n,u){var s=n.x-u.x,o=n.y-u.y;return Math.sqrt(s*s+o*o)};e.exports=t},function(e,d){var t=function(n,u,s,o){var h=n-s,a=u-o;return h*h+a*a};e.exports=t},function(e,d){var t=function(n,u,s){return s===void 0&&(s=1e-4),n>u-s};e.exports=t},function(e,d){var t=function(n,u,s){return s===void 0&&(s=1e-4),n<u+s};e.exports=t},function(e,d,t){var n=t(357),u=function(s,o){return n(s)/n(o)/n(s-o)};e.exports=u},function(e,d){var t=function(n){if(n===0)return 1;for(var u=n;--n;)u*=n;return u};e.exports=t},function(e,d){function t(h,a){var l=1-h;return l*l*l*a}function n(h,a){var l=1-h;return 3*l*l*h*a}function u(h,a){return 3*(1-h)*h*h*a}function s(h,a){return h*h*h*a}var o=function(h,a,l,c,f){return t(h,a)+n(h,l)+u(h,c)+s(h,f)};e.exports=o},function(e,d){function t(o,h){var a=1-o;return a*a*h}function n(o,h){return 2*(1-o)*o*h}function u(o,h){return o*o*h}var s=function(o,h,a,l){return t(o,h)+n(o,a)+u(o,l)};e.exports=s},function(e,d,t){var n=t(184),u=function(s,o,h){return o+(h-o)*n(s,0,1)};e.exports=u},function(e,d){var t=function(n){var u=Math.log(n)/.6931471805599453;return 1<<Math.ceil(u)};e.exports=t},function(e,d){var t=function(n,u){var s=n.x,o=n.y;return n.x=s*Math.cos(u)-o*Math.sin(u),n.y=s*Math.sin(u)+o*Math.cos(u),n};e.exports=t},function(e,d){var t=function(n){return n>0?Math.ceil(n):Math.floor(n)};e.exports=t},function(e,d,t){var n=t(0),u=new n({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new u(this)},set:function(s){return this.copy(s)},copy:function(s){var o=this.val,h=s.val;return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],this},fromMat4:function(s){var o=s.val,h=this.val;return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[4],h[4]=o[5],h[5]=o[6],h[6]=o[8],h[7]=o[9],h[8]=o[10],this},fromArray:function(s){var o=this.val;return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],this},identity:function(){var s=this.val;return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=1,s[5]=0,s[6]=0,s[7]=0,s[8]=1,this},transpose:function(){var s=this.val,o=s[1],h=s[2],a=s[5];return s[1]=s[3],s[2]=s[6],s[3]=o,s[5]=s[7],s[6]=h,s[7]=a,this},invert:function(){var s=this.val,o=s[0],h=s[1],a=s[2],l=s[3],c=s[4],f=s[5],v=s[6],p=s[7],g=s[8],m=g*c-f*p,x=-g*l+f*v,y=p*l-c*v,T=o*m+h*x+a*y;return T?(T=1/T,s[0]=m*T,s[1]=(-g*h+a*p)*T,s[2]=(f*h-a*c)*T,s[3]=x*T,s[4]=(g*o-a*v)*T,s[5]=(-f*o+a*l)*T,s[6]=y*T,s[7]=(-p*o+h*v)*T,s[8]=(c*o-h*l)*T,this):null},adjoint:function(){var s=this.val,o=s[0],h=s[1],a=s[2],l=s[3],c=s[4],f=s[5],v=s[6],p=s[7],g=s[8];return s[0]=c*g-f*p,s[1]=a*p-h*g,s[2]=h*f-a*c,s[3]=f*v-l*g,s[4]=o*g-a*v,s[5]=a*l-o*f,s[6]=l*p-c*v,s[7]=h*v-o*p,s[8]=o*c-h*l,this},determinant:function(){var s=this.val,o=s[0],h=s[1],a=s[2],l=s[3],c=s[4],f=s[5],v=s[6],p=s[7],g=s[8];return o*(g*c-f*p)+h*(-g*l+f*v)+a*(p*l-c*v)},multiply:function(s){var o=this.val,h=o[0],a=o[1],l=o[2],c=o[3],f=o[4],v=o[5],p=o[6],g=o[7],m=o[8],x=s.val,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],R=x[6],L=x[7],O=x[8];return o[0]=y*h+T*c+C*p,o[1]=y*a+T*f+C*g,o[2]=y*l+T*v+C*m,o[3]=S*h+E*c+M*p,o[4]=S*a+E*f+M*g,o[5]=S*l+E*v+M*m,o[6]=R*h+L*c+O*p,o[7]=R*a+L*f+O*g,o[8]=R*l+L*v+O*m,this},translate:function(s){var o=this.val,h=s.x,a=s.y;return o[6]=h*o[0]+a*o[3]+o[6],o[7]=h*o[1]+a*o[4]+o[7],o[8]=h*o[2]+a*o[5]+o[8],this},rotate:function(s){var o=this.val,h=o[0],a=o[1],l=o[2],c=o[3],f=o[4],v=o[5],p=Math.sin(s),g=Math.cos(s);return o[0]=g*h+p*c,o[1]=g*a+p*f,o[2]=g*l+p*v,o[3]=g*c-p*h,o[4]=g*f-p*a,o[5]=g*v-p*l,this},scale:function(s){var o=this.val,h=s.x,a=s.y;return o[0]=h*o[0],o[1]=h*o[1],o[2]=h*o[2],o[3]=a*o[3],o[4]=a*o[4],o[5]=a*o[5],this},fromQuat:function(s){var o=s.x,h=s.y,a=s.z,l=s.w,c=o+o,f=h+h,v=a+a,p=o*c,g=o*f,m=o*v,x=h*f,y=h*v,T=a*v,C=l*c,S=l*f,E=l*v,M=this.val;return M[0]=1-(x+T),M[3]=g+E,M[6]=m-S,M[1]=g-E,M[4]=1-(p+T),M[7]=y+C,M[2]=m+S,M[5]=y-C,M[8]=1-(p+x),this},normalFromMat4:function(s){var o=s.val,h=this.val,a=o[0],l=o[1],c=o[2],f=o[3],v=o[4],p=o[5],g=o[6],m=o[7],x=o[8],y=o[9],T=o[10],C=o[11],S=o[12],E=o[13],M=o[14],R=o[15],L=a*p-l*v,O=a*g-c*v,F=a*m-f*v,D=l*g-c*p,B=l*m-f*p,b=c*m-f*g,V=x*E-y*S,X=x*M-T*S,K=x*R-C*S,J=y*M-T*E,G=y*R-C*E,w=T*R-C*M,N=L*w-O*G+F*J+D*K-B*X+b*V;return N?(N=1/N,h[0]=(p*w-g*G+m*J)*N,h[1]=(g*K-v*w-m*X)*N,h[2]=(v*G-p*K+m*V)*N,h[3]=(c*G-l*w-f*J)*N,h[4]=(a*w-c*K+f*X)*N,h[5]=(l*K-a*G-f*V)*N,h[6]=(E*b-M*B+R*D)*N,h[7]=(M*F-S*b-R*O)*N,h[8]=(S*B-E*F+R*L)*N,this):null}});e.exports=u},function(e,d,t){var n=t(0),u=t(364),s=t(1),o=t(39),h=1e-6,a=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),c=new o(1,0,0),f=new o(0,1,0),v=new o,p=new u,g=new n({initialize:function(x,y,T,C){this.onChangeCallback=s,this.set(x,y,T,C)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,C){return C===void 0&&(C=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=m*C,this._y=x*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),C+x*(m.z-C),S+x*(m.w-S))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(v.copy(c).cross(m).length()<h&&v.copy(f).cross(m),v.normalize(),this.setAxisAngle(v,Math.PI)):y>.999999?this.set(0,0,0,1):(v.copy(m).cross(x),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,C=this.w,S=m.x,E=m.y,M=m.z,R=m.w;return this.set(x*R+C*S+y*M-T*E,y*R+C*E+T*S-x*M,T*R+C*M+x*E-y*S,C*R-x*S-y*E-T*M)},slerp:function(m,x){var y=this.x,T=this.y,C=this.z,S=this.w,E=m.x,M=m.y,R=m.z,L=m.w,O=y*E+T*M+C*R+S*L;O<0&&(O=-O,E=-E,M=-M,R=-R,L=-L);var F=1-x,D=x;if(1-O>h){var B=Math.acos(O),b=Math.sin(B);F=Math.sin((1-x)*B)/b,D=Math.sin(x*B)/b}return this.set(F*y+D*E,F*T+D*M,F*C+D*R,F*S+D*L)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T,S=C?1/C:0;return this.set(-m*S,-x*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+C*S,y*E+T*S,T*E-y*S,C*E-x*S)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*S,y*E+C*S,T*E+x*S,C*E-y*S)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*S,y*E-x*S,T*E+C*S,C*E-T*S)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,C=m.z/2,S=Math.cos(y),E=Math.cos(T),M=Math.cos(C),R=Math.sin(y),L=Math.sin(T),O=Math.sin(C);switch(m.order){case"XYZ":{this.set(R*E*M+S*L*O,S*L*M-R*E*O,S*E*O+R*L*M,S*E*M-R*L*O,x);break}case"YXZ":{this.set(R*E*M+S*L*O,S*L*M-R*E*O,S*E*O-R*L*M,S*E*M+R*L*O,x);break}case"ZXY":{this.set(R*E*M-S*L*O,S*L*M+R*E*O,S*E*O+R*L*M,S*E*M-R*L*O,x);break}case"ZYX":{this.set(R*E*M-S*L*O,S*L*M+R*E*O,S*E*O-R*L*M,S*E*M+R*L*O,x);break}case"YZX":{this.set(R*E*M+S*L*O,S*L*M+R*E*O,S*E*O-R*L*M,S*E*M-R*L*O,x);break}case"XZY":{this.set(R*E*M-S*L*O,S*L*M-R*E*O,S*E*O+R*L*M,S*E*M+R*L*O,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],C=x[8],S=x[1],E=x[5],M=x[9],R=x[2],L=x[6],O=x[10],F=y+E+O,D;return F>0?(D=.5/Math.sqrt(F+1),this.set((L-M)*D,(C-R)*D,(S-T)*D,.25/D)):y>E&&y>O?(D=2*Math.sqrt(1+y-E-O),this.set(.25*D,(T+S)/D,(C+R)/D,(L-M)/D)):E>O?(D=2*Math.sqrt(1+E-y-O),this.set((T+S)/D,.25*D,(M+L)/D,(C-R)/D)):(D=2*Math.sqrt(1+O-y-E),this.set((C+R)/D,(M+L)/D,.25*D,(S-T)/D)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var C=0;x[4]>x[0]&&(C=1),x[8]>x[C*3+C]&&(C=2);var S=a[C],E=a[S];T=Math.sqrt(x[C*3+C]-x[S*3+S]-x[E*3+E]+1),l[C]=.5*T,T=.5/T,l[S]=(x[S*3+C]+x[C*3+S])*T,l[E]=(x[E*3+C]+x[C*3+E])*T,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(x[E*3+S]-x[S*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,d,t){var n=t(367),u=t(31),s=t(33),o=t(191),h=function(a){var l=a.config;if((l.customEnvironment||l.canvas)&&l.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!l.customEnvironment&&!l.canvas&&l.renderType!==s.HEADLESS)if(l.renderType===s.CANVAS||l.renderType!==s.CANVAS&&!o.webGL)if(o.canvas)l.renderType=s.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else l.renderType=s.WEBGL;l.antialias||u.disableSmoothing();var c=a.scale.baseSize,f=c.width,v=c.height;if(l.canvas?(a.canvas=l.canvas,a.canvas.width=f,a.canvas.height=v):a.canvas=u.create(a,f,v,l.renderType),l.canvasStyle&&(a.canvas.style=l.canvasStyle),l.antialias||n.setCrisp(a.canvas),l.renderType!==s.HEADLESS){var p,g;p=t(368),g=t(371),l.renderType===s.WEBGL?a.renderer=new g(a):(a.renderer=new p(a),a.context=a.renderer.gameContext)}};e.exports=h},function(e,d){var t={setCrisp:function(n){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(s){n.style["image-rendering"]=s}),n.style.msInterpolationMode="nearest-neighbor",n},setBicubic:function(n){return n.style["image-rendering"]="auto",n.style.msInterpolationMode="bicubic",n}};e.exports=t},function(e,d,t){var n=t(37),u=t(369),s=t(0),o=t(33),h=t(9),a=t(91),l=t(370),c=t(104),f=t(106),v=t(25),p=new s({Extends:h,initialize:function(m){h.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(f.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(a.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(a.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(a.RENDER,g,x);var T=x.x,C=x.y,S=x.width,E=x.height,M=x.renderToTexture?x.context:g.sys.context;M.save(),this.game.scene.customViewports&&(M.beginPath(),M.rect(T,C,S,E),M.clip()),this.currentContext=M;var R=x.mask;R&&R.preRenderCanvas(this,null,x._maskCamera),x.transparent||(M.fillStyle=x.backgroundColor.rgba,M.fillRect(T,C,S,E)),M.globalAlpha=x.alpha,M.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(n.PRE_RENDER,x),x.matrix.copyToContext(M);for(var L=0;L<y;L++){var O=m[L];O.mask&&O.mask.preRenderCanvas(this,O,x),O.renderCanvas(this,O,x),O.mask&&O.mask.postRenderCanvas(this,O,x)}M.setTransform(1,0,0,1,0,0),M.globalCompositeOperation="source-over",M.globalAlpha=1,x.flashEffect.postRenderCanvas(M),x.fadeEffect.postRenderCanvas(M),x.dirty=!1,R&&R.postRenderCanvas(this),M.restore(),x.renderToTexture&&(x.emit(n.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(a.POST_RENDER);var m=this.snapshotState;m.callback&&(u(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,C,S,E,M){x===void 0&&(x=!1),this.snapshotArea(y,T,C,S,m,E,M);var R=this.snapshotState;return R.getPixel=x,u(this.canvas,R),R.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,M=m.canvasData,R=M.x,L=M.y,O=m.cutWidth,F=m.cutHeight,D=m.customPivot,B=m.source.resolution,b=g.displayOriginX,V=g.displayOriginY,X=-b+m.x,K=-V+m.y;if(g.isCropped){var J=g._crop;(J.flipX!==g.flipX||J.flipY!==g.flipY)&&m.updateCropUVs(J,g.flipX,g.flipY),O=J.cw,F=J.ch,R=J.cx,L=J.cy,X=-b+J.x,K=-V+J.y,g.flipX&&(X>=0?X=-(X+O):X<0&&(X=Math.abs(X)-O)),g.flipY&&(K>=0?K=-(K+F):K<0&&(K=Math.abs(K)-F))}var G=1,w=1;g.flipX&&(D||(X+=-m.realWidth+b*2),G=-1),g.flipY&&(D||(K+=-m.realHeight+V*2),w=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*G,g.scaleY*w),S.copyFrom(x.matrix),y?(S.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),C.drawImage(m.source.image,R,L,O,F,X,K,O/B,F/B),g.mask&&g.mask.postRenderCanvas(this,g,x),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,d,t){var n=t(31),u=t(38),s=t(2),o=function(h,a){var l=s(a,"callback"),c=s(a,"type","image/png"),f=s(a,"encoder",.92),v=Math.abs(Math.round(s(a,"x",0))),p=Math.abs(Math.round(s(a,"y",0))),g=s(a,"width",h.width),m=s(a,"height",h.height),x=s(a,"getPixel",!1);if(x){var y=h.getContext("2d"),T=y.getImageData(v,p,1,1),C=T.data;l.call(null,new u(C[0],C[1],C[2],C[3]/255))}else if(v!==0||p!==0||g!==h.width||m!==h.height){var S=n.createWebGL(this,g,m),E=S.getContext("2d");E.drawImage(h,v,p,g,m,0,0,g,m);var M=new Image;M.onerror=function(){l.call(null),n.remove(S)},M.onload=function(){l.call(null,M),n.remove(S)},M.src=S.toDataURL(c,f)}else{var R=new Image;R.onerror=function(){l.call(null)},R.onload=function(){l.call(null,R)},R.src=h.toDataURL(c,f)}};e.exports=o},function(e,d,t){var n=t(35),u=t(348),s=function(){var o=[],h=u.supportNewBlendModes,a="source-over";return o[n.NORMAL]=a,o[n.ADD]="lighter",o[n.MULTIPLY]=h?"multiply":a,o[n.SCREEN]=h?"screen":a,o[n.OVERLAY]=h?"overlay":a,o[n.DARKEN]=h?"darken":a,o[n.LIGHTEN]=h?"lighten":a,o[n.COLOR_DODGE]=h?"color-dodge":a,o[n.COLOR_BURN]=h?"color-burn":a,o[n.HARD_LIGHT]=h?"hard-light":a,o[n.SOFT_LIGHT]=h?"soft-light":a,o[n.DIFFERENCE]=h?"difference":a,o[n.EXCLUSION]=h?"exclusion":a,o[n.HUE]=h?"hue":a,o[n.SATURATION]=h?"saturation":a,o[n.COLOR]=h?"color":a,o[n.LUMINOSITY]=h?"luminosity":a,o[n.ERASE]="destination-out",o[n.SOURCE_IN]="source-in",o[n.SOURCE_OUT]="source-out",o[n.SOURCE_ATOP]="source-atop",o[n.DESTINATION_OVER]="destination-over",o[n.DESTINATION_IN]="destination-in",o[n.DESTINATION_OUT]="destination-out",o[n.DESTINATION_ATOP]="destination-atop",o[n.LIGHTER]="lighter",o[n.COPY]="copy",o[n.XOR]="xor",o};e.exports=s},function(e,d,t){var n=t(93),u=t(37),s=t(0),o=t(33),h=t(9),a=t(91),l=t(22),c=t(138),f=t(69),v=t(1),p=t(372),g=t(141),m=t(104),x=t(106),y=t(12),T=t(383),C=new s({Extends:h,initialize:function(E){h.call(this);var M=E.config,R={alpha:M.transparent,desynchronized:M.desynchronized,depth:!1,antialias:M.antialiasGL,premultipliedAlpha:M.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:M.failIfMajorPerformanceCaveat,powerPreference:M.powerPreference,preserveDrawingBuffer:M.preserveDrawingBuffer};this.config={clearBeforeRender:M.clearBeforeRender,antialias:M.antialias,backgroundColor:M.backgroundColor,contextCreation:R,roundPixels:M.roundPixels,maxTextures:M.maxTextures,maxTextureSize:M.maxTextureSize,batchSize:M.batchSize,maxLights:M.maxLights,mipmapFilter:M.mipmapFilter},this.game=E,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=Infinity,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,M=this.game,R=this.canvas,L=S.backgroundColor;if(M.config.context?E=M.config.context:E=R.getContext("webgl",S.contextCreation)||R.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var O=this;this.contextLostHandler=function(N){O.contextLost=!0,O.game.events.emit(l.CONTEXT_LOST,O),N.preventDefault()},this.contextRestoredHandler=function(){O.contextLost=!1,O.init(O.config),O.game.events.emit(l.CONTEXT_RESTORED,O)},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),M.context=E;for(var F=0;F<=27;F++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var D=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var B="WEBGL_compressed_texture_",b="WEBKIT_"+B;this.compression.ETC1=E.getExtension(B+"etc1")||E.getExtension(b+"etc1"),this.compression.PVRTC=E.getExtension(B+"pvrtc")||E.getExtension(b+"pvrtc"),this.compression.S3TC=E.getExtension(B+"s3tc")||E.getExtension(b+"s3tc"),this.supportedExtensions=D;var V="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(V)>-1?E.getExtension(V):null;var X="OES_vertex_array_object";this.vaoExtension=D.indexOf(X)>-1?E.getExtension(X):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(L.redGL,L.greenGL,L.blueGL,L.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var K=this.tempTextures;if(Array.isArray(K))for(var J=0;F<this.maxTextures;J++)E.deleteTexture(K[J]);else K=new Array(this.maxTextures);for(var G=0;G<this.maxTextures;G++){var w=E.createTexture();E.activeTexture(E.TEXTURE0+G),E.bindTexture(E.TEXTURE_2D,w),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),K[G]=w,this.textureIndexes.push(G)}return this.tempTextures=K,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new f().identity(),M.textures.once(x.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,M=S.scale.baseSize;this.width=M.width,this.height=M.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,null),R.enable(R.SCISSOR_TEST),S.scale.on(m.RESIZE,this.onResize,this),this.resize(M.width,M.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var M=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),M.viewport(0,0,S,E),this.drawingBufferHeight=M.drawingBufferHeight,M.scissor(0,M.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(a.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,M,R,L){L===void 0&&(L=this.drawingBufferHeight);var O=this.scissorStack,F=[S,E,M,R];return O.push(F),this.setScissor(S,E,M,R,L),this.currentScissor=F,F},setScissor:function(S,E,M,R,L){L===void 0&&(L=this.drawingBufferHeight);var O=this.gl,F=this.currentScissor,D=M>0&&R>0;if(F&&D){var B=F[0],b=F[1],V=F[2],X=F[3];D=B!==S||b!==E||V!==M||X!==R}D&&(this.flush(),O.scissor(S,L-E-R,M,R))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var M=E[0],R=E[1],L=E[2],O=E[3];L>0&&O>0&&S.scissor(M,this.drawingBufferHeight-R-O,L,O)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var M=this.gl,R=this.blendModes[S];return E||S!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),M.enable(M.BLEND),M.blendEquation(R.equation),R.func.length>2?M.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):M.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var M=this.blendModes.push({func:S,equation:E});return M-1},updateBlendMode:function(S,E,M){return this.blendModes[S]&&(this.blendModes[S].func=E,M&&(this.blendModes[S].equation=M)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var M=this.gl;M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.activeTexture(S.TEXTURE0+M),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,M=this.tempTextures;if(S){for(var R=0;R<M.length;R++)E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,M[R]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,M[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,M,R){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,M,R))},setFramebuffer:function(S,E,M,R){if(E===void 0&&(E=!1),M===void 0&&(M=!1),R===void 0&&(R=!0),S===this.currentFramebuffer)return this;var L=this.gl,O=this.width,F=this.height;return S&&S.renderTexture&&R?(O=S.renderTexture.width,F=S.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,S),R&&L.viewport(0,0,O,F),E&&(S?(this.drawingBufferHeight=F,this.pushScissor(0,0,O,F)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,M&&this.resetTextures(),this},popFramebuffer:function(S,E,M){S===void 0&&(S=!1),E===void 0&&(E=!1),M===void 0&&(M=!0);var R=this.fboStack;R.pop();var L=R[R.length-1];return L||(L=null),this.setFramebuffer(L,S,E,M),L},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,M,R){var L=this.gl,O=L.NEAREST,F=L.NEAREST,D=L.CLAMP_TO_EDGE,B=null;E=S?S.width:E,M=S?S.height:M;var b=c(E,M);return b&&(D=L.REPEAT),R===o.ScaleModes.LINEAR&&this.config.antialias&&(O=b?this.mipmapFilter:L.LINEAR,F=L.LINEAR),!S&&typeof E=="number"&&typeof M=="number"?B=this.createTexture2D(0,O,F,D,D,L.RGBA,null,E,M):B=this.createTexture2D(0,O,F,D,D,L.RGBA,S),B},createTexture2D:function(S,E,M,R,L,O,F,D,B,b,V,X){b=b??!0,V===void 0&&(V=!1),X===void 0&&(X=!1);var K=this.gl,J=K.createTexture();K.activeTexture(K.TEXTURE0);var G=K.getParameter(K.TEXTURE_BINDING_2D);return K.bindTexture(K.TEXTURE_2D,J),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,E),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,M),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,L),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,R),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,X),F==null?K.texImage2D(K.TEXTURE_2D,S,O,D,B,0,O,K.UNSIGNED_BYTE,null):(V||(D=F.width,B=F.height),K.texImage2D(K.TEXTURE_2D,S,O,O,K.UNSIGNED_BYTE,F)),c(D,B)&&K.generateMipmap(K.TEXTURE_2D),G&&K.bindTexture(K.TEXTURE_2D,G),J.isAlphaPremultiplied=b,J.isRenderTexture=!1,J.width=D,J.height=B,J.glIndex=0,J.glIndexCounter=-1,J},createFramebuffer:function(S,E,M,R){var L=this.gl,O=L.createFramebuffer(),F=0;if(this.setFramebuffer(O),R){var D=L.createRenderbuffer();L.bindRenderbuffer(L.RENDERBUFFER,D),L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,S,E),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.RENDERBUFFER,D)}if(M.isRenderTexture=!0,M.isAlphaPremultiplied=!1,L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,M,0),F=L.checkFramebufferStatus(L.FRAMEBUFFER),F!==L.FRAMEBUFFER_COMPLETE){var B={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+B[F])}return O.renderTexture=M,this.setFramebuffer(null),this.resetTextures(),O},createProgram:function(S,E){var M=this.gl,R=M.createProgram(),L=M.createShader(M.VERTEX_SHADER),O=M.createShader(M.FRAGMENT_SHADER);if(M.shaderSource(L,S),M.shaderSource(O,E),M.compileShader(L),M.compileShader(O),!M.getShaderParameter(L,M.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+M.getShaderInfoLog(L));if(!M.getShaderParameter(O,M.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+M.getShaderInfoLog(O));if(M.attachShader(R,L),M.attachShader(R,O),M.linkProgram(R),!M.getProgramParameter(R,M.LINK_STATUS))throw new Error(`Link Program failed:
`+M.getProgramInfoLog(R));return M.useProgram(R),R},createVertexBuffer:function(S,E){var M=this.gl,R=M.createBuffer();return M.bindBuffer(M.ARRAY_BUFFER,R),M.bufferData(M.ARRAY_BUFFER,S,E),M.bindBuffer(M.ARRAY_BUFFER,null),R},createIndexBuffer:function(S,E){var M=this.gl,R=M.createBuffer();return M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,R),M.bufferData(M.ELEMENT_ARRAY_BUFFER,S,E),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),n(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,M=S.y,R=S.width,L=S.height,O=S.backgroundColor;if(S.emit(u.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,M,R,L),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),O.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(E,M,R,L,y.getTintFromFloats(O.blueGL,O.greenGL,O.redGL,1),O.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,M=this.currentCameraMask;return E.length>0?S=E[E.length-1]:M.mask&&M.mask.isStencil&&(S=M),S},postRenderCamera:function(S){var E=S.flashEffect,M=S.fadeEffect;if(E.isRunning||M.isRunning||M.isComplete){var R=this.pipelines.setMulti();E.postRenderWebGL(R,y.getTintFromFloats),M.postRenderWebGL(R,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(u.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(a.PRE_RENDER)}},render:function(S,E,M){if(!this.contextLost){var R=E.length;if(this.emit(a.RENDER,S,M),this.preRenderCamera(M),R===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(M);return}this.currentType="";for(var L=this.currentMask,O=0;O<R;O++){this.finalType=O===R-1;var F=E[O],D=F.mask;L=this.currentMask,L.mask&&L.mask!==D&&L.mask.postRenderWebGL(this,L.camera),D&&L.mask!==D&&D.preRenderWebGL(this,F,M),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var B=F.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[O+1].type===this.currentType,F.renderWebGL(this,F,M),this.newType=!1}L=this.currentMask,L.mask&&L.mask.postRenderWebGL(this,L.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(M)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(a.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,M){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,M)},snapshotArea:function(S,E,M,R,L,O,F){var D=this.snapshotState;return D.callback=L,D.type=O,D.encoder=F,D.getPixel=!1,D.x=S,D.y=E,D.width=Math.min(M,this.gl.drawingBufferWidth),D.height=Math.min(R,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,M){return this.snapshotArea(S,E,1,1,M),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,M,R,L,O,F,D,B,b,V){L===void 0&&(L=!1),O===void 0&&(O=0),F===void 0&&(F=0),D===void 0&&(D=E),B===void 0&&(B=M);var X=this.currentFramebuffer;this.snapshotArea(O,F,D,B,R,b,V);var K=this.snapshotState;return K.getPixel=L,K.isFramebuffer=!0,K.bufferWidth=E,K.bufferHeight=M,this.setFramebuffer(S),T(this.canvas,K),this.setFramebuffer(X),K.callback=null,K.isFramebuffer=!1,this},canvasToTexture:function(S,E,M,R){return M===void 0&&(M=!1),R===void 0&&(R=!1),E?this.updateCanvasTexture(S,E,R):this.createCanvasTexture(S,M,R)},createCanvasTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var R=this.gl,L=R.NEAREST,O=R.NEAREST,F=S.width,D=S.height,B=R.CLAMP_TO_EDGE,b=c(F,D);return!E&&b&&(B=R.REPEAT),this.config.antialias&&(L=b?this.mipmapFilter:R.LINEAR,O=R.LINEAR),this.createTexture2D(0,L,O,B,B,R.RGBA,S,F,D,!0,!1,M)},updateCanvasTexture:function(S,E,M){M===void 0&&(M=!1);var R=this.gl,L=S.width,O=S.height;if(L>0&&O>0){R.activeTexture(R.TEXTURE0);var F=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,E),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,M),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),E.width=L,E.height=O,F&&R.bindTexture(R.TEXTURE_2D,F)}return E},createVideoTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var R=this.gl,L=R.NEAREST,O=R.NEAREST,F=S.videoWidth,D=S.videoHeight,B=R.CLAMP_TO_EDGE,b=c(F,D);return!E&&b&&(B=R.REPEAT),this.config.antialias&&(L=b?this.mipmapFilter:R.LINEAR,O=R.LINEAR),this.createTexture2D(0,L,O,B,B,R.RGBA,S,F,D,!0,!0,M)},updateVideoTexture:function(S,E,M){M===void 0&&(M=!1);var R=this.gl,L=S.videoWidth,O=S.videoHeight;if(L>0&&O>0){R.activeTexture(R.TEXTURE0);var F=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,E),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,M),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),E.width=L,E.height=O,F&&R.bindTexture(R.TEXTURE_2D,F)}return E},setTextureFilter:function(S,E){var M=this.gl,R=[M.LINEAR,M.NEAREST][E];M.activeTexture(M.TEXTURE0);var L=M.getParameter(M.TEXTURE_BINDING_2D);return M.bindTexture(M.TEXTURE_2D,S),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,R),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,R),L&&M.bindTexture(M.TEXTURE_2D,L),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.deleteTexture(E[M]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=C},function(e,d,t){var n=t(0),u=t(92),s=t(102),o=t(373),h=t(376),a=t(377),l=t(108),c=t(378),f=t(379),v=t(380),p=t(381),g=new n({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new s([[u.UTILITY_PIPELINE,p],[u.MULTI_PIPELINE,l],[u.BITMAPMASK_PIPELINE,o],[u.SINGLE_PIPELINE,v],[u.ROPE_PIPELINE,f],[u.LIGHT_PIPELINE,a],[u.POINTLIGHT_PIPELINE,c],[u.GRAPHICS_PIPELINE,h]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,C=this.game;if(this.classes.each(function(E,M){x=T.add(E,new M({game:C})),E===u.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(u.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(u.BITMAPMASK_PIPELINE),m)for(y in m){var S=m[y];x=new S(C),x.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var C=new T(this.game);return x&&(C.gameObject=x),C}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,C),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,C),this},blendFramesAdditive:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,C),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,C,S),this},copyFrameRect:function(m,x,y,T,C,S,E,M){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,C,S,E,M),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,d,t){var n=t(0),u=t(2),s=t(866),o=t(867),h=t(107),a=t(58),l=new n({Extends:a,initialize:function(f){f.fragShader=u(f,"fragShader",s),f.vertShader=u(f,"vertShader",o),f.batchSize=u(f,"batchSize",1),f.vertices=u(f,"vertices",[-1,1,-1,-7,7,1]),f.attributes=u(f,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),a.call(this,f)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,f){a.prototype.resize.call(this,c,f),this.set2f("uResolution",c,f)},beginMask:function(c,f,v){var p=this.gl;if(c.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(c.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==c&&(g.currentMask.mask=c,g.currentMask.camera=v)}},endMask:function(c,f){var v=this.gl,p=this.renderer,g=c.bitmapMask;if(g&&v){p.flush(),p.pushFramebuffer(c.maskFramebuffer),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,f),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(v.enable(v.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),v.activeTexture(v.TEXTURE1),v.bindTexture(v.TEXTURE_2D,c.maskTexture),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,c.mainTexture),this.set1i("uInvertMaskAlpha",c.invertAlpha),v.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=l},function(e,d,t){e.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(e,d,t){var n=t(0),u=t(2),s=t(107),o=new n({initialize:function(a,l,c,f,v){this.pipeline=a,this.name=l,this.renderer=a.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(c,f),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(h){var a=0,l=0,c=[];this.vertexComponentCount=0;for(var f=0;f<h.length;f++){var v=h[f],p=v.name,g=u(v,"size",1),m=u(v,"type",s.FLOAT),x=m.enum,y=m.size,T=!!v.normalized;c.push({name:p,size:g,type:x,normalized:T,offset:l,enabled:!1,location:-1}),y===4?a+=g:a++,l+=g*y}this.vertexSize=l,this.vertexComponentCount=a,this.attributes=c},bind:function(h,a){return h===void 0&&(h=!1),a===void 0&&(a=!1),a&&this.pipeline.flush(),this.renderer.setProgram(this.program),h&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(h){h===void 0&&(h=!1);for(var a=this.gl,l=this.vertexSize,c=this.attributes,f=this.program,v=0;v<c.length;v++){var p=c[v],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,C=!!p.normalized;if(h){var S=a.getAttribLocation(f,p.name);S>=0?(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,g,m,C,l,x),p.enabled=!0,p.location=S):S!==-1&&a.disableVertexAttribArray(S)}else y?a.vertexAttribPointer(T,g,m,C,l,x):!y&&T>-1&&(a.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var h=this.gl,a=this.program,l=this.uniforms,c,f,v,p=h.getProgramParameter(a,h.ACTIVE_UNIFORMS);for(c=0;c<p;c++){var g=h.getActiveUniform(a,c);if(g){f=g.name,v=h.getUniformLocation(a,f),v!==null&&(l[f]={name:f,location:v,value1:null,value2:null,value3:null,value4:null});var m=f.indexOf("[");m>0&&(f=f.substr(0,m),l.hasOwnProperty(f)||(v=h.getUniformLocation(a,f),v!==null&&(l[f]={name:f,location:v,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(h){return this.uniforms.hasOwnProperty(h)},resetUniform:function(h){var a=this.uniforms[h];return a&&(a.value1=null,a.value2=null,a.value3=null,a.value4=null),this},setUniform1:function(h,a,l,c){var f=this.uniforms[a];return f?((c||f.value1!==l)&&(f.value1=l,this.renderer.setProgram(this.program),h.call(this.gl,f.location,l),this.pipeline.currentShader=this),this):this},setUniform2:function(h,a,l,c,f){var v=this.uniforms[a];return v?((f||v.value1!==l||v.value2!==c)&&(v.value1=l,v.value2=c,this.renderer.setProgram(this.program),h.call(this.gl,v.location,l,c),this.pipeline.currentShader=this),this):this},setUniform3:function(h,a,l,c,f,v){var p=this.uniforms[a];return p?((v||p.value1!==l||p.value2!==c||p.value3!==f)&&(p.value1=l,p.value2=c,p.value3=f,this.renderer.setProgram(this.program),h.call(this.gl,p.location,l,c,f),this.pipeline.currentShader=this),this):this},setUniform4:function(h,a,l,c,f,v,p){var g=this.uniforms[a];return g?((p||g.value1!==l||g.value2!==c||g.value3!==f||g.value4!==v)&&(g.value1=l,g.value2=c,g.value3=f,g.value4=v,this.renderer.setProgram(this.program),h.call(this.gl,g.location,l,c,f,v),this.pipeline.currentShader=this),this):this},set1f:function(h,a){return this.setUniform1(this.gl.uniform1f,h,a)},set2f:function(h,a,l){return this.setUniform2(this.gl.uniform2f,h,a,l)},set3f:function(h,a,l,c){return this.setUniform3(this.gl.uniform3f,h,a,l,c)},set4f:function(h,a,l,c,f){return this.setUniform4(this.gl.uniform4f,h,a,l,c,f)},set1fv:function(h,a){return this.setUniform1(this.gl.uniform1fv,h,a,!0)},set2fv:function(h,a){return this.setUniform1(this.gl.uniform2fv,h,a,!0)},set3fv:function(h,a){return this.setUniform1(this.gl.uniform3fv,h,a,!0)},set4fv:function(h,a){return this.setUniform1(this.gl.uniform4fv,h,a,!0)},set1iv:function(h,a){return this.setUniform1(this.gl.uniform1iv,h,a,!0)},set2iv:function(h,a){return this.setUniform1(this.gl.uniform2iv,h,a,!0)},set3iv:function(h,a){return this.setUniform1(this.gl.uniform3iv,h,a,!0)},set4iv:function(h,a){return this.setUniform1(this.gl.uniform4iv,h,a,!0)},set1i:function(h,a){return this.setUniform1(this.gl.uniform1i,h,a)},set2i:function(h,a,l){return this.setUniform2(this.gl.uniform2i,h,a,l)},set3i:function(h,a,l,c){return this.setUniform3(this.gl.uniform3i,h,a,l,c)},set4i:function(h,a,l,c,f){return this.setUniform4(this.gl.uniform4i,h,a,l,c,f)},setMatrix2fv:function(h,a,l){return this.setUniform2(this.gl.uniformMatrix2fv,h,a,l,!0)},setMatrix3fv:function(h,a,l){return this.setUniform2(this.gl.uniformMatrix3fv,h,a,l,!0)},setMatrix4fv:function(h,a,l){return this.setUniform2(this.gl.uniformMatrix4fv,h,a,l,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=o},function(e,d,t){var n=t(0),u=t(59),s=t(2),o=t(875),h=t(876),a=t(25),l=t(107),c=t(58),f=new n({Extends:c,initialize:function(p){p.fragShader=s(p,"fragShader",o),p.vertShader=s(p,"vertShader",h),p.attributes=s(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),c.call(this,p),this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(v,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var C=v+g,S=p+m,E=T.getX(v,p),M=T.getY(v,p),R=T.getX(v,S),L=T.getY(v,S),O=T.getX(C,S),F=T.getY(C,S),D=T.getX(C,p),B=T.getY(C,p),b=this.fillTint;this.batchQuad(E,M,R,L,O,F,D,B,b.TL,b.TR,b.BL,b.BR)},batchFillTriangle:function(v,p,g,m,x,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(v,p),M=S.getY(v,p),R=S.getX(g,m),L=S.getY(g,m),O=S.getX(x,y),F=S.getY(x,y),D=this.fillTint;this.batchTri(E,M,R,L,O,F,D.TL,D.TR,D.BL)},batchStrokeTriangle:function(v,p,g,m,x,y,T,C,S){var E=this.tempTriangle;E[0].x=v,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=v,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(v,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=v.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,M=this.fillTint.BL,R=0;R<x;++R)C=v[R],y.push(C.x,C.y);T=u(y),x=T.length;for(var L=0;L<x;L+=3){var O=T[L+0]*2,F=T[L+1]*2,D=T[L+2]*2,B=y[O+0],b=y[O+1],V=y[F+0],X=y[F+1],K=y[D+0],J=y[D+1],G=m.getX(B,b),w=m.getY(B,b),N=m.getX(V,X),z=m.getY(V,X),U=m.getX(K,J),W=m.getY(K,J);this.batchTri(G,w,N,z,U,W,S,E,M)}y.length=0},batchStrokePath:function(v,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=v.length-1,T=0;T<y;T++){var C=v[T],S=v[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(v,p,g,m,x,y,T,C,S,E,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(E,R);var L=g-v,O=m-p,F=Math.sqrt(L*L+O*O),D=x*(m-p)/F,B=x*(v-g)/F,b=y*(m-p)/F,V=y*(v-g)/F,X=g-b,K=m-V,J=v-D,G=p-B,w=g+b,N=m+V,z=v+D,U=p+B,W=R.getX(X,K),H=R.getY(X,K),Z=R.getX(J,G),q=R.getY(J,G),_=R.getX(w,N),nt=R.getY(w,N),rt=R.getX(z,U),at=R.getY(z,U),vt=this.strokeTint,ut=vt.TL,ct=vt.TR,Ft=vt.BL,yt=vt.BR;if(this.batchQuad(rt,at,Z,q,W,H,_,nt,ut,ct,Ft,yt),!(T<=2)){var Tt=this.prevQuad,dt=this.firstQuad;C>0&&Tt[4]?this.batchQuad(rt,at,Z,q,Tt[0],Tt[1],Tt[2],Tt[3],ut,ct,Ft,yt):(dt[0]=rt,dt[1]=at,dt[2]=Z,dt[3]=q,dt[4]=1),S&&dt[4]?this.batchQuad(W,H,_,nt,dt[0],dt[1],dt[2],dt[3],ut,ct,Ft,yt):(Tt[0]=W,Tt[1]=H,Tt[2]=_,Tt[3]=nt,Tt[4]=1)}},batchVert:function(v,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=v,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(v,p,g,m,x,y,T,C,S,E,M,R){var L=!1;return this.shouldFlush(6)&&(this.flush(),L=!0),this.batchVert(v,p,S),this.batchVert(g,m,M),this.batchVert(x,y,R),this.batchVert(v,p,S),this.batchVert(x,y,R),this.batchVert(T,C,E),L},batchTri:function(v,p,g,m,x,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(v,p,T),this.batchVert(g,m,C),this.batchVert(x,y,S),E},destroy:function(){return c.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=f},function(e,d,t){var n=t(0),u=t(2),s=t(877),o=t(108),h=t(3),a=t(58),l=10,c=new h,f=new n({Extends:o,initialize:function(p){l=p.game.renderer.config.maxLights;for(var g=u(p,"fragShader",s),m=[],x=1;x<=l;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,o.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){a.prototype.boot.call(this);var v=this.gl,p=v.createTexture();v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,p),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(v,p){var g=v.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,C=T.height,S=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,M=E.color,R="uLights["+y+"].";S.transformPoint(E.x,E.y,c),this.set2f(R+"position",c.x-p.scrollX*E.scrollFactorX*p.zoom,C-(c.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(R+"color",M.r,M.g,M.b),this.set1f(R+"intensity",E.intensity),this.set1f(R+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(v){if(v!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(v){var g=-v,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=v}},setTexture2D:function(v,p){var g=this.renderer;v===void 0&&(v=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(v,m)&&(this.flush(),g.setTextureZero(v),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(v,p){p===void 0&&(p=v.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(v);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(v.rotation),this.currentUnit=0,0},getNormalMap:function(v){var p;return v?v.displayTexture?p=v.displayTexture.dataSource[v.displayFrame.sourceIndex]:v.texture?p=v.texture.dataSource[v.frame.sourceIndex]:v.tileset&&(Array.isArray(v.tileset)?p=v.tileset[0].image.dataSource[0]:p=v.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(v,p,g){this.lightsActive&&o.prototype.batchSprite.call(this,v,p,g)},batchTexture:function(v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,b,V,X,K,J,G,w,N,z,U,W,H,Z,q,_){this.lightsActive&&o.prototype.batchTexture.call(this,v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,b,V,X,K,J,G,w,N,z,U,W,H,Z,q,_)},batchTextureFrame:function(v,p,g,m,x,y,T){this.lightsActive&&o.prototype.batchTextureFrame.call(this,v,p,g,m,x,y,T)}});f.LIGHT_COUNT=l,e.exports=f},function(e,d,t){var n=t(0),u=t(2),s=t(880),o=t(881),h=t(58),a=new n({Extends:h,initialize:function(c){c.vertShader=u(c,"vertShader",o),c.fragShader=u(c,"fragShader",s),c.attributes=u(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,c)},onRender:function(l,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(l,c,f,v,p,g,m,x,y,T,C,S){var E=l.color,M=l.intensity,R=l.radius,L=l.attenuation,O=E.r*M,F=E.g*M,D=E.b*M,B=c.alpha*l.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(f,v,C,S,R,L,O,F,D,B),this.batchLightVert(p,g,C,S,R,L,O,F,D,B),this.batchLightVert(m,x,C,S,R,L,O,F,D,B),this.batchLightVert(f,v,C,S,R,L,O,F,D,B),this.batchLightVert(m,x,C,S,R,L,O,F,D,B),this.batchLightVert(y,T,C,S,R,L,O,F,D,B)},batchLightVert:function(l,c,f,v,p,g,m,x,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=l,C[++S]=c,C[++S]=f,C[++S]=v,C[++S]=p,C[++S]=g,C[++S]=m,C[++S]=x,C[++S]=y,C[++S]=T,this.vertexCount++}});e.exports=a},function(e,d,t){var n=t(0),u=t(2),s=t(108),o=new n({Extends:s,initialize:function(a){a.topology=5,a.batchSize=u(a,"batchSize",256),s.call(this,a)}});e.exports=o},function(e,d,t){var n=t(0),u=t(2),s=t(108),o=t(882),h=t(883),a=t(58),l=new n({Extends:s,initialize:function(f){f.fragShader=u(f,"fragShader",o),f.vertShader=u(f,"vertShader",h),f.forceZero=!0,s.call(this,f)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=l},function(e,d,t){var n=t(884),u=t(35),s=t(0),o=t(198),h=t(885),a=t(886),l=t(2),c=t(887),f=t(382),v=t(58),p=new s({Extends:v,initialize:function(m){m.renderTarget=l(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=l(m,"vertShader",f),m.shaders=l(m,"shaders",[{name:"Copy",fragShader:a},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:h}]),m.attributes=l(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,v.call(this,m),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),m?(C.viewport(0,0,m.width,m.height),C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,C){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>m.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(M),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,g.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,g.texture,0),S&&(E?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,m.texture),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,x,y,T,C),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,m.texture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,C,S,E){var M=this.vertexViewF32;M[2]=g,M[3]=m,M[6]=x,M[7]=y,M[10]=T,M[11]=C,M[14]=g,M[15]=m,M[18]=T,M[19]=C,M[22]=S,M[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,d){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,d,t){var n=t(31),u=t(38),s=t(2),o=function(h,a){var l=h.getContext("experimental-webgl"),c=s(a,"callback"),f=s(a,"type","image/png"),v=s(a,"encoder",.92),p=s(a,"x",0),g=s(a,"y",0),m=s(a,"getPixel",!1),x=s(a,"isFramebuffer",!1),y=x?s(a,"bufferWidth",1):l.drawingBufferWidth,T=x?s(a,"bufferHeight",1):l.drawingBufferHeight;if(m){var C=new Uint8Array(4),S=x?g:T-g;l.readPixels(p,S,1,1,l.RGBA,l.UNSIGNED_BYTE,C),c.call(null,new u(C[0],C[1],C[2],C[3]/255))}else{var E=s(a,"width",y),M=s(a,"height",T),R=E*M*4,L=new Uint8Array(R);l.readPixels(p,T-g-M,E,M,l.RGBA,l.UNSIGNED_BYTE,L);for(var O=n.createWebGL(this,E,M),F=O.getContext("2d"),D=F.getImageData(0,0,E,M),B=D.data,b=0;b<M;b++)for(var V=0;V<E;V++){var X=((M-b-1)*E+V)*4,K=(b*E+V)*4;B[K+0]=L[X+0],B[K+1]=L[X+1],B[K+2]=L[X+2],B[K+3]=L[X+3]}F.putImageData(D,0,0);var J=new Image;J.onerror=function(){c.call(null),n.remove(O)},J.onload=function(){c.call(null,J),n.remove(O)},J.src=O.toDataURL(f,v)}};e.exports=o},function(e,d,t){var n=t(33),u=function(s){var o=s.config;if(!o.hideBanner){var h="WebGL";o.renderType===n.CANVAS?h="Canvas":o.renderType===n.HEADLESS&&(h="Headless");var a=o.audio,l=s.device.audio,c;if(l.webAudio&&!a.disableWebAudio?c="Web Audio":a.noAudio||!l.webAudio&&!l.audioData?c="No Audio":c="HTML5 Audio",s.device.browser.ie)window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io");else{var f="",v=[f];if(Array.isArray(o.bannerBackgroundColor)){var p;o.bannerBackgroundColor.forEach(function(m){f=f.concat("%c "),v.push("background: "+m),p=m}),v[v.length-1]="color: "+o.bannerTextColor+"; background: "+p}else f=f.concat("%c "),v.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);v.push("background: transparent"),o.gameTitle&&(f=f.concat(o.gameTitle),o.gameVersion&&(f=f.concat(" v"+o.gameVersion)),o.hidePhaser||(f=f.concat(" / ")));var g="";o.hidePhaser||(f=f.concat("Phaser v"+n.VERSION+g+" ("+h+" | "+c+")")),f=f.concat(" %c "+o.gameURL),v[0]=f,console.log.apply(console,v)}}};e.exports=u},function(e,d,t){var n=t(0),u=t(6),s=t(1),o=t(386),h=new n({initialize:function(l,c){this.game=l,this.raf=new o,this.started=!1,this.running=!1,this.minFps=u(c,"min",5),this.targetFps=u(c,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=u(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(c,"deltaHistory",10),this.panicMax=u(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var a=window.performance.now();this.time=a,this.lastTime=a,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=Math.min(this._target,this.deltaHistory[l]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(a){if(this.started)return this;this.started=!0,this.running=!0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=a,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var a=window.performance.now();this.now=a;var l=a-this.lastTime;l<0&&(l=0),this.rawDelta=l;var c=this.deltaIndex,f=this.deltaHistory,v=this.deltaSmoothingMax,p=l,g=l;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=f[c],p=Math.min(p,this._min)),f[c]=p,this.deltaIndex++,this.deltaIndex>v&&(this.deltaIndex=0),g=0;for(var m=0;m<v;m++)g+=f[m];g/=v}this.delta=g,this.time+=this.rawDelta,a>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(a,g,x),this.lastTime=a,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(a){this.running||(a&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});e.exports=h},function(e,d,t){var n=t(0),u=t(1),s=new n({initialize:function(){this.isRunning=!1,this.callback=u,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var h=this;this.step=function a(){var l=window.performance.now();h.lastTime=h.tick,h.tick=l,h.callback(l),h.timeOutID=window.requestAnimationFrame(a)},this.stepTimeout=function a(){var l=Date.now(),c=Math.min(Math.max(h.target*2+h.tick-l,0),h.target);h.lastTime=h.tick,h.tick=l,h.callback(l),h.timeOutID=window.setTimeout(a,c)}},start:function(o,h,a){this.isRunning||(this.callback=o,this.isSetTimeOut=h,this.target=a,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=u}});e.exports=s},function(e,d,t){var n=t(22),u=function(s){var o,h=s.events;if(document.hidden!==void 0)o="visibilitychange";else{var a=["webkit","moz","ms"];a.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},o=c+"visibilitychange")})}var l=function(c){document.hidden||c.type==="pause"?h.emit(n.HIDDEN):h.emit(n.VISIBLE)};o&&document.addEventListener(o,l,!1),window.onblur=function(){h.emit(n.BLUR)},window.onfocus=function(){h.emit(n.FOCUS)},window.focus&&s.config.autoFocus&&window.focus()};e.exports=u},function(e,d,t){var n=t(389),u=t(31),s=t(6),o=function(h){var a=s(h,"data",[]),l=s(h,"canvas",null),c=s(h,"palette",n),f=s(h,"pixelWidth",1),v=s(h,"pixelHeight",f),p=s(h,"resizeCanvas",!0),g=s(h,"clearCanvas",!0),m=s(h,"preRender",null),x=s(h,"postRender",null),y=Math.floor(Math.abs(a[0].length*f)),T=Math.floor(Math.abs(a.length*v));l||(l=u.create2D(this,y,T),p=!1,g=!1),p&&(l.width=y,l.height=T);var C=l.getContext("2d");g&&C.clearRect(0,0,y,T),m&&m(l,C);for(var S=0;S<a.length;S++)for(var E=a[S],M=0;M<E.length;M++){var R=E[M];R!=="."&&R!==" "&&(C.fillStyle=c[R],C.fillRect(M*f,S*v,f,v))}return x&&x(l,C),l};e.exports=o},function(e,d){e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,d,t){var n=t(0),u=t(358),s=t(94),o=t(3),h=new n({Extends:s,initialize:function(l,c,f,v){s.call(this,"CubicBezierCurve"),Array.isArray(l)&&(v=new o(l[6],l[7]),f=new o(l[4],l[5]),c=new o(l[2],l[3]),l=new o(l[0],l[1])),this.p0=l,this.p1=c,this.p2=f,this.p3=v},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,l){l===void 0&&(l=new o);var c=this.p0,f=this.p1,v=this.p2,p=this.p3;return l.set(u(a,c.x,f.x,v.x,p.x),u(a,c.y,f.y,v.y,p.y))},draw:function(a,l){l===void 0&&(l=32);var c=this.getPoints(l);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var f=1;f<c.length;f++)a.lineTo(c[f].x,c[f].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(a){var l=a.points,c=new o(l[0],l[1]),f=new o(l[2],l[3]),v=new o(l[4],l[5]),p=new o(l[6],l[7]);return new h(c,f,v,p)},e.exports=h},function(e,d,t){var n=t(0),u=t(94),s=t(36),o=t(6),h=t(196),a=t(3),l=new n({Extends:u,initialize:function(f,v,p,g,m,x,y,T){if(typeof f=="object"){var C=f;f=o(C,"x",0),v=o(C,"y",0),p=o(C,"xRadius",0),g=o(C,"yRadius",p),m=o(C,"startAngle",0),x=o(C,"endAngle",360),y=o(C,"clockwise",!1),T=o(C,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);u.call(this,"EllipseCurve"),this.p0=new a(f,v),this._xRadius=p,this._yRadius=g,this._startAngle=s(m),this._endAngle=s(x),this._clockwise=y,this._rotation=s(T)},getStartPoint:function(c){return c===void 0&&(c=new a),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,f){f===void 0&&(f=new a);for(var v=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=v;for(;p>v;)p-=v;p<Number.EPSILON&&(g?p=0:p=v),this._clockwise&&!g&&(p===v?p=-v:p=p-v);var m=this._startAngle+c*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=x-this.p0.x,E=y-this.p0.y;x=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return f.set(x,y)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return h(this._startAngle)},set:function(c){this._startAngle=s(c)}},endAngle:{get:function(){return h(this._endAngle)},set:function(c){this._endAngle=s(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return h(this._rotation)},set:function(c){this._rotation=s(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});l.fromJSON=function(c){return new l(c)},e.exports=l},function(e,d,t){var n=t(0),u=t(94),s=t(199),o=t(10),h=t(3),a=new n({Extends:u,initialize:function(c,f){u.call(this,"LineCurve"),Array.isArray(c)&&(f=new h(c[2],c[3]),c=new h(c[0],c[1])),this.p0=c,this.p1=f,this.arcLengthDivisions=1},getBounds:function(l){return l===void 0&&(l=new o),s([this.p0,this.p1],l)},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l===void 0&&(l=1),l},getPoint:function(l,c){return c===void 0&&(c=new h),l===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(l).add(this.p0),c)},getPointAt:function(l,c){return this.getPoint(l,c)},getTangent:function(l,c){return c===void 0&&(c=new h),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(l,c,f){var v;if(c){var p=this.getLengths(f),g=p[p.length-1],m=Math.min(c,g);v=m/g}else v=l;return v},draw:function(l){return l.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});a.fromJSON=function(l){var c=l.points,f=new h(c[0],c[1]),v=new h(c[2],c[3]);return new a(f,v)},e.exports=a},function(e,d,t){var n=t(0),u=t(3),s=new n({initialize:function(h,a){this.active=!1,this.p0=new u(h,a)},getPoint:function(o,h){return h===void 0&&(h=new u),h.copy(this.p0)},getPointAt:function(o,h){return this.getPoint(o,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=s},function(e,d,t){var n=t(0),u=t(94),s=t(359),o=t(3),h=new n({Extends:u,initialize:function(l,c,f){u.call(this,"QuadraticBezier"),Array.isArray(l)&&(f=new o(l[4],l[5]),c=new o(l[2],l[3]),l=new o(l[0],l[1])),this.p0=l,this.p1=c,this.p2=f},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,l){l===void 0&&(l=new o);var c=this.p0,f=this.p1,v=this.p2;return l.set(s(a,c.x,f.x,v.x),s(a,c.y,f.y,v.y))},draw:function(a,l){l===void 0&&(l=32);var c=this.getPoints(l);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var f=1;f<c.length;f++)a.lineTo(c[f].x,c[f].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(a){var l=a.points,c=new o(l[0],l[1]),f=new o(l[2],l[3]),v=new o(l[4],l[5]);return new h(c,f,v)},e.exports=h},function(e,d,t){var n=t(194),u=t(0),s=t(94),o=t(3),h=new u({Extends:s,initialize:function(l){l===void 0&&(l=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(l)},addPoints:function(a){for(var l=0;l<a.length;l++){var c=new o;typeof a[l]=="number"?(c.x=a[l],c.y=a[l+1],l++):Array.isArray(a[l])?(c.x=a[l][0],c.y=a[l][1]):(c.x=a[l].x,c.y=a[l].y),this.points.push(c)}return this},addPoint:function(a,l){var c=new o(a,l);return this.points.push(c),c},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.points[0])},getResolution:function(a){return a*this.points.length},getPoint:function(a,l){l===void 0&&(l=new o);var c=this.points,f=(c.length-1)*a,v=Math.floor(f),p=f-v,g=c[v===0?v:v-1],m=c[v],x=c[v>c.length-2?c.length-1:v+1],y=c[v>c.length-3?c.length-1:v+2];return l.set(n(p,g.x,m.x,x.x,y.x),n(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var a=[],l=0;l<this.points.length;l++)a.push(this.points[l].x),a.push(this.points[l].y);return{type:this.type,points:a}}});h.fromJSON=function(a){return new h(a.points)},e.exports=h},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!a||a==="")&&(a=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),l===void 0&&(l=null),this.key=o,this.fragmentSrc=h,this.vertexSrc=a,this.uniforms=l}});e.exports=u},function(e,d,t){var n=t(38);n.ColorSpectrum=t(909),n.ColorToRGBA=t(910),n.ComponentToHex=t(398),n.GetColor=t(103),n.GetColor32=t(328),n.HexStringToColor=t(327),n.HSLToColor=t(911),n.HSVColorWheel=t(912),n.HSVToRGB=t(188),n.HueToComponent=t(399),n.IntegerToColor=t(189),n.IntegerToRGB=t(330),n.Interpolate=t(913),n.ObjectToColor=t(331),n.RandomRGB=t(914),n.RGBStringToColor=t(332),n.RGBToHSV=t(329),n.RGBToString=t(915),n.ValueToColor=t(187),e.exports=n},function(e,d){var t=function(n){var u=n.toString(16);return u.length===1?"0"+u:u};e.exports=t},function(e,d){var t=function(n,u,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(u-n)*6*s:s<1/2?u:s<2/3?n+(u-n)*(2/3-s)*6:n};e.exports=t},function(e,d,t){var n=t(105),u=function(s){if(document.readyState==="complete"||document.readyState==="interactive"){s();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),s()};document.body?n.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};e.exports=u},function(e,d){var t=function(n){if(!n)return window.innerHeight;var u=Math.abs(window.orientation),s={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),s.w=u===90?o.offsetHeight:window.innerWidth,s.h=u===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?s.h:s.w};e.exports=t},function(e,d,t){var n=t(201),u=function(s,o){var h=window.screen,a=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(a&&typeof a.type=="string")return a.type;if(typeof a=="string")return a;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}else return o>s?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE};e.exports=u},function(e,d){e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,d){e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,d){e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,d){e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,d){var t=function(n){var u;return n!==""&&(typeof n=="string"?u=document.getElementById(n):n&&n.nodeType===1&&(u=n)),u||(u=document.body),u};e.exports=t},function(e,d){var t=function(n){var u="";try{if(window.DOMParser){var s=new DOMParser;u=s.parseFromString(n,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(n)}catch(o){u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};e.exports=t},function(e,d,t){var n=t(0),u=t(203),s=t(9),o=t(51),h=t(22),a=t(410),l=t(411),c=t(412),f=t(413),v=t(25),p=t(177),g=new n({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new a(this):null,this.mouse=y.inputMouse?new l(this):null,this.touch=y.inputTouch?new f(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new c(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(h.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(h.PRE_RENDER,this.preRender,this),this.game.events.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(o.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(o.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(o.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,C=new c(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,x.push(C)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(m,x);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(!E.active){E.touchstart(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(u.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(u.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,m),y.push(E);break}}this.updateInputPlugins(u.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,m),y.push(E);break}}this.updateInputPlugins(u.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(o.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,C=m.parentContainer;if(C)do{if(!C.willRender(x)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var M=m.x,R=m.y;y.getWorldPoint(M,R,C),m.worldX=C.x,m.worldY=C.y;for(var L={x:0,y:0},O=this._tempMatrix,F=this._tempMatrix2,D=0;D<x.length;D++){var B=x[D];if(!!this.inputCandidate(B,y)){var b=C.x+S*B.scrollFactorX-S,V=C.y+E*B.scrollFactorY-E;B.parentContainer?(B.getWorldTransformMatrix(O,F),O.applyInverse(b,V,L)):p(b,V,B.x,B.y,B.rotation,B.scaleX,B.scaleY,L),this.pointWithinHitArea(B,L.x,L.y)&&T.push(B)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var C=m.position,S=m.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(x),M=this.scaleManager.transformY(y),R=m.smoothFactor;!T||R===0?(C.x=E,C.y=M):(C.x=E*R+S.x*(1-R),C.y=M*R+S.y*(1-R))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,d,t){var n=t(93),u=t(0),s=t(22),o=t(51),h=t(143),a=t(1),l=new u({initialize:function(f){this.manager=f,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=a,this.onKeyUp=a,f.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(o.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(o.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var f=this.target;f&&(f.addEventListener("keydown",this.onKeyDown,!1),f.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var f=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=h[p.trim().toUpperCase()]),f.indexOf(p)===-1&&f.push(p)}this.preventDefault=f.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var f=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=h[p.toUpperCase()]),n(f,p)}this.preventDefault=f.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=l},function(e,d,t){var n=t(0),u=t(191),s=t(51),o=t(1),h=new n({initialize:function(l){this.manager=l,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,l.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputMouse,this.target=a.inputMouseEventTarget,this.passive=a.inputMousePassive,this.preventDefaultDown=a.inputMousePreventDefaultDown,this.preventDefaultUp=a.inputMousePreventDefaultUp,this.preventDefaultMove=a.inputMousePreventDefaultMove,this.preventDefaultWheel=a.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},requestPointerLock:function(){if(u.pointerLock){var a=this.target;a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock,a.requestPointerLock()}},releasePointerLock:function(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var a=this.target;if(!!a){var l=this,c=this.manager,f=c.canvas,v=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onMouseMove(g),l.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){v&&window.focus(),!g.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onMouseDown(g),l.preventDefaultDown&&g.target===f&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&g.target!==f&&c.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onMouseUp(g),l.preventDefaultUp&&g.target===f&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&g.target!==f&&c.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&c.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&c.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&l.enabled&&c&&c.enabled&&c.onMouseWheel(g),l.preventDefaultWheel&&g.target===f&&g.preventDefault()};var p={passive:!0};if(a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("mousedown",this.onMouseDown),a.addEventListener("mouseup",this.onMouseUp),a.addEventListener("mouseover",this.onMouseOver,p),a.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?a.addEventListener("wheel",this.onMouseWheel,{passive:!1}):a.addEventListener("wheel",this.onMouseWheel,p),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch(g){window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}u.pointerLock&&(this.pointerLockChange=function(g){var m=l.target;l.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,c.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("mousedown",this.onMouseDown),a.removeEventListener("mouseup",this.onMouseUp),a.removeEventListener("mouseover",this.onMouseOver),a.removeEventListener("mouseout",this.onMouseOut),window&&(a=this.isTop?window.top:window,a.removeEventListener("mousedown",this.onMouseDownWindow),a.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=h},function(e,d,t){var n=t(349),u=t(0),s=t(50),o=t(124),h=t(360),a=t(3),l=t(105),c=new u({initialize:function(v,p){this.manager=v,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new a,this.prevPosition=new a,this.midPoint=new a(-1,-1),this.velocity=new a,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(f){var v=f.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(f,v){return f.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var f=this.position.x,v=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(f===p&&v===g)){var m=h(this.motionFactor,p,f),x=h(this.motionFactor,g,v);o(m,f,.1)&&(m=f),o(x,v,.1)&&(x=v),this.midPoint.set(m,x);var y=f-m,T=v-x;this.velocity.set(y,T),this.angle=n(m,x,f,v),this.distance=Math.sqrt(y*y+T*T)}},up:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=f.timeStamp,this.wasTouch=!1)},down:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&f.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=f.timeStamp),this.wasTouch=!1},move:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.locked&&(this.movementX=f.movementX||f.mozMovementX||f.webkitMovementX||0,this.movementY=f.movementY||f.mozMovementY||f.webkitMovementY||0),this.moveTime=f.timeStamp,this.wasTouch=!1},wheel:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.deltaX=f.deltaX,this.deltaY=f.deltaY,this.deltaZ=f.deltaZ,this.wasTouch=!1},touchstart:function(f,v){f.pointerId&&(this.pointerId=f.pointerId),this.identifier=f.identifier,this.target=f.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(f,v){this.event=v,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(f,v){f===void 0&&(f=10),v===void 0&&(v=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<f;y++){var T=1/f*y;v[y]={x:h(T,p,m),y:h(T,g,x)}}return v},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=c},function(e,d,t){var n=t(0),u=t(51),s=t(1),o=new n({initialize:function(a){this.manager=a,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,a.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this,a=this.manager.canvas,l=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){l&&window.focus(),!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchStart(p),h.capture&&p.cancelable&&p.target===a&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&p.target!==a&&h.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchMove(p),h.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchEnd(p),h.capture&&p.cancelable&&p.target===a&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&p.target!==a&&h.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&(h.manager.onTouchCancel(p),h.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&h.enabled&&h.manager&&h.manager.enabled&&h.manager.setCanvasOut(p)};var c=this.target;if(!!c){var f={passive:!0},v={passive:!1};c.addEventListener("touchstart",this.onTouchStart,this.capture?v:f),c.addEventListener("touchmove",this.onTouchMove,this.capture?v:f),c.addEventListener("touchend",this.onTouchEnd,this.capture?v:f),c.addEventListener("touchcancel",this.onTouchCancel,this.capture?v:f),c.addEventListener("touchover",this.onTouchOver,this.capture?v:f),c.addEventListener("touchout",this.onTouchOut,this.capture?v:f),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v)),this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),h.removeEventListener("touchover",this.onTouchOver),h.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=o},function(e,d,t){var n=t(0),u=t(22),s=t(9),o=t(8),h=t(16),a=t(5),l=t(2),c=t(24),f=t(93),v=new n({Extends:s,initialize:function(g){s.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(u.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=l(g,"key",null),x=l(g,"plugin",null),y=l(g,"start",!1),T=l(g,"mapping",null),C=l(g,"data",null),m&&(x?this.install(m,x,y,T,C):console.warn("Missing `plugin` for key: "+m));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=l(g,"key",null),x=l(g,"plugin",null),T=l(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,C=this.game,S=p.scene,E=p.settings.map,M=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],C[y]?(p[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var R=0;R<m.length;R++)for(T=m[R],x=0;x<T.length;x++)if(y=T[x],!!c.hasCore(y)){var L=c.getCore(y),O=L.mapping,F=new L.plugin(S,this,O);p[O]=F,L.custom?S[O]=F:E.hasOwnProperty(O)&&(S[E[O]]=F),M&&F.boot()}for(T=this.plugins,x=0;x<T.length;x++){var D=T[x];D.mapping&&(S[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!c.hasCore(p))c.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(c.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=c.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&f(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){f(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,m){return g&&a.register(p,g),m&&h.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&a.remove(p),m&&h.remove(p),this},registerFileType:function(p,g,m){o.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=v},function(e,d,t){var n=t(201),u=t(0),s=t(9),o=t(104),h=t(22),a=t(401),l=t(407),c=t(402),f=t(1),v=t(10),p=t(416),g=t(76),m=t(3),x=new u({Extends:s,initialize:function(T){s.call(this),this.game=T,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:f,windowResize:f,fullScreenChange:f,fullScreenError:f}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(h.PRE_STEP,this.step,this),y.events.once(h.READY,this.refresh,this),y.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,M=y.autoRound;if(typeof T=="string"){var R=this.parentSize.width;R===0&&(R=window.innerWidth);var L=parseInt(T,10)/100;T=Math.floor(R*L)}if(typeof C=="string"){var O=this.parentSize.height;O===0&&(O=window.innerHeight);var F=parseInt(C,10)/100;C=Math.floor(O*F)}this.scaleMode=S,this.autoRound=M,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,M&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===n.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=c(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=l(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==n.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=a(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,M=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,L=y*C,O=T*C;return S&&(L=Math.floor(L),O=Math.floor(O)),(L!==y||O!==T)&&(R.width=L+"px",R.height=O+"px"),this.refresh(E,M)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=c(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(o.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,M=this.zoom,R=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(T*M,C*M),S=this.displaySize.width,E=this.displaySize.height,R&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,R&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,R&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==n.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,M=S.height,R=Math.floor((this.parentSize.width-E)/2),L=Math.floor((this.parentSize.height-M)/2);y===n.CENTER.CENTER_HORIZONTALLY?L=0:y===n.CENTER.CENTER_VERTICALLY&&(R=0),C.marginLeft=R+"px",C.marginTop=L+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,d,t){var n=t(18),u=t(0),s=t(76),o=t(3),h=new u({initialize:function(l,c,f,v){l===void 0&&(l=0),c===void 0&&(c=l),f===void 0&&(f=0),v===void 0&&(v=null),this._width=l,this._height=c,this._parent=v,this.aspectMode=f,this.aspectRatio=c===0?1:l/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(a){return a===void 0&&(a=0),this.aspectMode=a,this.setSize(this._width,this._height)},setSnap:function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.snapTo.set(a,l),this.setSize(this._width,this._height)},setParent:function(a){return this._parent=a,this.setSize(this._width,this._height)},setMin:function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.minWidth=n(a,0,this.maxWidth),this.minHeight=n(l,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(a,l){return a===void 0&&(a=Number.MAX_VALUE),l===void 0&&(l=a),this.maxWidth=n(a,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(l,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(a,l){switch(a===void 0&&(a=0),l===void 0&&(l=a),this.aspectMode){case h.NONE:this._width=this.getNewWidth(s(a,this.snapTo.x)),this._height=this.getNewHeight(s(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(a,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(l,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(a,l,!0);break;case h.ENVELOP:this.constrain(a,l,!1);break}return this},setAspectRatio:function(a){return this.aspectRatio=a,this.setSize(this._width,this._height)},resize:function(a,l){return this._width=this.getNewWidth(s(a,this.snapTo.x)),this._height=this.getNewHeight(s(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(a,l){return l===void 0&&(l=!0),a=n(a,this.minWidth,this.maxWidth),l&&this._parent&&a>this._parent.width&&(a=Math.max(this.minWidth,this._parent.width)),a},getNewHeight:function(a,l){return l===void 0&&(l=!0),a=n(a,this.minHeight,this.maxHeight),l&&this._parent&&a>this._parent.height&&(a=Math.max(this.minHeight,this._parent.height)),a},constrain:function(a,l,c){a===void 0&&(a=0),l===void 0&&(l=a),c===void 0&&(c=!0),a=this.getNewWidth(a),l=this.getNewHeight(l);var f=this.snapTo,v=l===0?1:a/l;return c&&this.aspectRatio>v||!c&&this.aspectRatio<v?(a=s(a,f.x),l=a/this.aspectRatio,f.y>0&&(l=s(l,f.y),a=l*this.aspectRatio)):(c&&this.aspectRatio<v||!c&&this.aspectRatio>v)&&(l=s(l,f.y),a=l*this.aspectRatio,f.x>0&&(a=s(a,f.x),l=a*(1/this.aspectRatio))),this._width=a,this._height=l,this},fitTo:function(a,l){return this.constrain(a,l,!0)},envelop:function(a,l){return this.constrain(a,l,!1)},setWidth:function(a){return this.setSize(a,this._height)},setHeight:function(a){return this.setSize(this._width,a)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(a){a&&a.style&&(a.style.width=this._width+"px",a.style.height=this._height+"px")},copy:function(a){return a.setAspectMode(this.aspectMode),a.aspectRatio=this.aspectRatio,a.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(a){this.setSize(a,this._height)}},height:{get:function(){return this._height},set:function(a){this.setSize(this._width,a)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,e.exports=h},function(e,d,t){var n=t(0),u=t(144),s=t(20),o=t(22),h=t(6),a=t(95),l=t(1),c=t(418),f=t(204),v=new n({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof c?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof c?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=l,p.init&&(p.init.call(p,m.data),m.status=u.INIT,m.isTransition&&g.events.emit(s.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=u.LOADING,x.once(a.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>u.START&&x.settings.status<=u.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=u.LOADING&&m.settings.status<u.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=u.CREATING,p.create.call(p,m.data),m.status===u.DESTROYED)||(m.isTransition&&g.events.emit(s.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=u.RUNNING,g.events.emit(s.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof c){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new f(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new c(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=h(g,y[T],null);C&&(m[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):S!=="sys"&&(m[S]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof c?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=l,x.start(g);else{x.sceneUpdate=l,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=u.LOADING,y.once(a.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===u.RUNNING||x.settings.status===u.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=v},function(e,d,t){var n=t(0),u=t(204),s=new n({initialize:function(h){this.sys=new u(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=s},function(e,d,t){var n=t(2),u=t(205),s=function(o){var h=o.game.config.defaultPhysicsSystem,a=n(o.settings,"physics",!1);if(!(!h&&!a)){var l=[];if(h&&l.push(u(h+"Physics")),a)for(var c in a)c=u(c.concat("Physics")),l.indexOf(c)===-1&&l.push(c);return l}};e.exports=s},function(e,d,t){var n=t(2),u=function(s){var o=s.plugins.getDefaultScenePlugins(),h=n(s.settings,"plugins",!1);return Array.isArray(h)?h:o||[]};e.exports=u},function(e,d,t){var n=t(144),u=t(6),s=t(127),o=t(978),h={create:function(a){return typeof a=="string"?a={key:a}:a===void 0&&(a={}),{status:n.PENDING,key:u(a,"key",""),active:u(a,"active",!1),visible:u(a,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(a,"pack",!1),cameras:u(a,"cameras",null),map:u(a,"map",s(o,u(a,"mapAdd",{}))),physics:u(a,"physics",{}),loader:u(a,"loader",{}),plugins:u(a,"plugins",!1),input:u(a,"input",{})}}};e.exports=h},function(e,d,t){var n=t(31),u=t(423),s=t(0),o=t(38),h=t(33),a=t(9),l=t(106),c=t(22),f=t(388),v=t(6),p=t(425),g=t(206),m=new s({Extends:a,initialize:function(y){a.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(l.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,C=new Image;C.onerror=function(){T.emit(l.ERROR,x)},C.onload=function(){var S=T.create(x,C);p.Image(S,0),T.emit(l.ADD,x,S),T.emit(l.LOAD,x,S)},C.src=y}return this},getBase64:function(x,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var M=E.canvasData,R=n.create2D(this,M.width,M.height),L=R.getContext("2d");L.drawImage(E.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),S=R.toDataURL(T,C),n.remove(R)}return S},addImage:function(x,y,T){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.Image(C,0),T&&C.setDataSource(T),this.emit(l.ADD,x,C)),C},addGLTexture:function(x,y,T,C){var S=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(x,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(l.ADD,x,S)),S},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(l.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=n.create(this,1,1);return y.canvas=T,f(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var C=n.create(this,y,T,h.CANVAS,!0);return this.addCanvas(x,C)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var C=null;return T?C=new u(this,x,y,y.width,y.height):this.checkKey(x)&&(C=new u(this,x,y,y.width,y.height),this.list[x]=C,this.emit(l.ADD,x,C)),C},addAtlas:function(x,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,C):this.addAtlasJSONHash(x,y,T,C)},addAtlasJSONArray:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=T.length===1,M=0;M<S.source.length;M++){var R=E?T[0]:T[M];p.JSONArray(S,M,R)}else p.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(l.ADD,x,S)}return S},addAtlasJSONHash:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(S,E,T[E]);else p.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(l.ADD,x,S)}return S},addAtlasXML:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(l.ADD,x,S)),S},addUnityAtlas:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(l.ADD,x,S)),S},addSpriteSheet:function(x,y,T){var C=null;if(this.checkKey(x)){C=this.create(x,y);var S=C.source[0].width,E=C.source[0].height;p.SpriteSheet(C,0,0,0,S,E,T),this.emit(l.ADD,x,C)}return C},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=v(y,"atlas",null),C=v(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var M=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(M,E,y):p.SpriteSheet(M,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(l.ADD,x,M),M}}},create:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=new g(this,x,y,T,C),this.list[x]=S),S},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var R=M.getImageData(0,0,1,1);return new o(R.data[0],R.data[1],R.data[2],R.data[3])}}return null},getPixelAlpha:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var R=M.getImageData(0,0,1,1);return R.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});e.exports=m},function(e,d,t){var n=t(0),u=t(18),s=t(38),o=t(33),h=t(138),a=t(206),l=new n({Extends:a,initialize:function(f,v,p,g,m){a.call(this,f,v,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(c,f,v){return this.context.drawImage(v,c,f),this.update()},drawFrame:function(c,f,v,p){v===void 0&&(v=0),p===void 0&&(p=0);var g=this.manager.getFrame(c,f);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,v,p,x/T,y/T),this.update()}else return this},setPixel:function(c,f,v,p,g,m){m===void 0&&(m=255),c=Math.abs(Math.floor(c)),f=Math.abs(Math.floor(f));var x=this.getIndex(c,f);if(x>-1){var y=this.context.getImageData(c,f,1,1);y.data[0]=v,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,c,f)}return this},putData:function(c,f,v,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=c.width),x===void 0&&(x=c.height),this.context.putImageData(c,f,v,p,g,m,x),this},getData:function(c,f,v,p){c=u(Math.floor(c),0,this.width-1),f=u(Math.floor(f),0,this.height-1),v=u(v,1,this.width-c),p=u(p,1,this.height-f);var g=this.context.getImageData(c,f,v,p);return g},getPixel:function(c,f,v){v||(v=new s);var p=this.getIndex(c,f);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];v.setTo(m,x,y,T)}return v},getPixels:function(c,f,v,p){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=this.width),p===void 0&&(p=v),c=Math.abs(Math.round(c)),f=Math.abs(Math.round(f));for(var g=u(c,0,this.width),m=u(c+v,0,this.width),x=u(f,0,this.height),y=u(f+p,0,this.height),T=new s,C=[],S=x;S<y;S++){for(var E=[],M=g;M<m;M++)T=this.getPixel(M,S,T),E.push({x:M,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(c,f){return c=Math.abs(Math.round(c)),f=Math.abs(Math.round(f)),c<this.width&&f<this.height?(c+f*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,f,v,p){return c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=this.width),p===void 0&&(p=this.height),this.context.clearRect(c,f,v,p),this.update()},setSize:function(c,f){return f===void 0&&(f=c),(c!==this.width||f!==this.height)&&(this.canvas.width=c,this.canvas.height=f,this._source.width=c,this._source.height=f,this._source.isPowerOf2=h(c,f),this.frames.__BASE.setSize(c,f,0,0),this.width=c,this.height=f,this.refresh()),this},destroy:function(){a.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=l},function(e,d,t){var n=t(31),u=t(0),s=t(138),o=t(168),h=new u({initialize:function(l,c,f,v,p){p===void 0&&(p=!1);var g=l.manager.game;this.renderer=g.renderer,this.texture=l,this.source=c,this.image=c,this.compressionAlgorithm=null,this.resolution=1,this.width=f||c.naturalWidth||c.videoWidth||c.width||0,this.height=v||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(a){var l=this.renderer;l&&(l.gl?this.isCanvas?this.glTexture=l.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=l.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=l.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=l.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),a.config.antialias||this.setFilter(1)},setFilter:function(a){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,a),this.scaleMode=a},setFlipY:function(a){return a===void 0&&(a=!0),this.flipY=a,this},update:function(){var a=this.renderer.gl;a&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):a&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=h},function(e,d,t){e.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(e,d,t){var n=t(427),u=t(430),s=t(432),o={create:function(h){var a=h.config.audio,l=h.device.audio;return a.noAudio||!l.webAudio&&!l.audioData?new u(h):l.webAudio&&!a.disableWebAudio?new s(h):new n(h)}};e.exports=o},function(e,d,t){var n=t(145),u=t(0),s=t(70),o=t(429),h=new u({Extends:n,initialize:function(l){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,l)},add:function(a,l){var c=new o(this,a,l);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var a=this;if(this.game.cache.audio.entries.each(function(v,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return a.locked=!0,!1;return!0}),!!this.locked){var l=!1,c=function(){l=!0},f=function(){if(l){l=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",f);var v=[];if(a.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&v.push(y)}return!0}),v.length!==0){var p=v[v.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,v.forEach(function(g){g.dataset.locked="false"}),a.unlocked=!0},v.forEach(function(g){g.load()})}};this.once(s.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",f,!1)}},onBlur:function(){this.forEachActiveSound(function(a){a.isPlaying&&(this.onBlurPausedSounds.push(a),a.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(a){a.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(a,l,c){return a.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:a,prop:l,value:c}),!0):!1},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this._mute},set:function(a){this._mute=a,this.forEachActiveSound(function(l){l.updateMute()}),this.emit(s.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this._volume},set:function(a){this._volume=a,this.forEachActiveSound(function(l){l.updateVolume()}),this.emit(s.GLOBAL_VOLUME,this,a)}}});e.exports=h},function(e,d,t){var n=t(78),u=function(s,o,h,a,l){if(a===void 0&&(a=0),l===void 0&&(l=s.length),n(s,a,l))for(var c=a;c<l;c++){var f=s[c];if(!o||o&&h===void 0&&f.hasOwnProperty(o)||o&&h!==void 0&&f[o]===h)return f}return null};e.exports=u},function(e,d,t){var n=t(146),u=t(0),s=t(70),o=t(18),h=new u({Extends:n,initialize:function(l,c,f){if(f===void 0&&(f={}),this.tags=l.game.cache.audio.get(c),!this.tags)throw new Error('There is no audio asset with key "'+c+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,l,c,f)},play:function(a,l){return this.manager.isLocked(this,"play",[a,l])||!n.prototype.play.call(this,a,l)||!this.pickAndPlayAudioTag()?!1:(this.emit(s.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(s.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!n.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var a=this.currentConfig.seek,l=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+a;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),l===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+l*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var a=0;a<this.tags.length;a++){var l=this.tags[a];if(l.dataset.used==="false")return l.dataset.used="true",this.audio=l,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&c.push(v)},this),c.sort(function(v,p){return v.loop===p.loop?p.seek/p.duration-v.seek/v.duration:v.loop?1:-1});var f=c[0];return this.audio=f.audio,f.reset(),f.audio=null,f.startTime=0,f.previousTime=0,!0},playCatchPromise:function(){var a=this.audio.play();a&&a.catch(function(l){console.warn(l)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(a){if(!!this.isPlaying){if(this.startTime>0){this.startTime<a-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,a-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var l=this.currentMarker?this.currentMarker.start:0,c=l+this.duration,f=this.audio.currentTime;if(this.currentConfig.loop)f>=c-this.manager.loopEndOffset?(this.audio.currentTime=l+Math.max(0,f-c),f=this.audio.currentTime):f<l&&(this.audio.currentTime+=l,f=this.audio.currentTime),f<this.previousTime&&this.emit(s.LOOPED,this);else if(f>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(s.COMPLETE,this);return}this.previousTime=f}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(a){this.currentConfig.mute=a,!this.manager.isLocked(this,"mute",a)&&(this.updateMute(),this.emit(s.MUTE,this,a))}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.currentConfig.volume},set:function(a){this.currentConfig.volume=a,!this.manager.isLocked(this,"volume",a)&&(this.updateVolume(),this.emit(s.VOLUME,this,a))}},setVolume:function(a){return this.volume=a,this},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,!this.manager.isLocked(this,s.RATE,a)&&(this.calculateRate(),this.emit(s.RATE,this,a))}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,!this.manager.isLocked(this,s.DETUNE,a)&&(this.calculateRate(),this.emit(s.DETUNE,this,a))}},setDetune:function(a){return this.detune=a,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.isLocked(this,"seek",a)||this.startTime>0||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.isPlaying?(this.previousTime=a,this.audio.currentTime=a):this.isPaused&&(this.currentConfig.seek=a),this.emit(s.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,!this.manager.isLocked(this,"loop",a)&&(this.audio&&(this.audio.loop=a),this.emit(s.LOOP,this,a))}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.currentConfig.pan},set:function(a){this.currentConfig.pan=a,this.emit(s.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});e.exports=h},function(e,d,t){var n=t(145),u=t(0),s=t(9),o=t(431),h=t(1),a=new u({Extends:s,initialize:function(c){s.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(l,c){var f=new o(this,l,c);return this.sounds.push(f),f},addAudioSprite:function(l,c){var f=this.add(l,c);return f.spritemap={},f},play:function(l,c){return!1},playAudioSprite:function(l,c,f){return!1},remove:function(l){return n.prototype.remove.call(this,l)},removeByKey:function(l){return n.prototype.removeByKey.call(this,l)},pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,forEachActiveSound:function(l,c){n.prototype.forEachActiveSound.call(this,l,c)},destroy:function(){n.prototype.destroy.call(this)}});e.exports=a},function(e,d,t){var n=t(146),u=t(0),s=t(9),o=t(17),h=function(){return!1},a=function(){return null},l=function(){return this},c=new u({Extends:s,initialize:function(v,p,g){g===void 0&&(g={}),s.call(this),this.manager=v,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:a,play:h,pause:h,resume:h,stop:h,destroy:function(){n.prototype.destroy.call(this)},setMute:l,setVolume:l,setRate:l,setDetune:l,setSeek:l,setLoop:l,setPan:l});e.exports=c},function(e,d,t){var n=t(433),u=t(145),s=t(0),o=t(70),h=t(22),a=t(434),l=new s({Extends:u,initialize:function(f){this.context=this.createAudioContext(f),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),u.call(this,f),this.locked&&f.isBooted?this.unlock():f.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(c){var f=c.config.audio;if(f.context)return f.context.resume(),f.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(c){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=c,this.masterMuteNode=c.createGain(),this.masterVolumeNode=c.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(c.destination),this.destination=this.masterMuteNode,this},add:function(c,f){var v=new a(this,c,f);return this.sounds.push(v),v},decodeAudio:function(c,f){var v;Array.isArray(c)?v=c:v=[{key:c,data:f}];for(var p=this.game.cache.audio,g=v.length,m=0;m<v.length;m++){var x=v[m],y=x.key,T=x.data;typeof T=="string"&&(T=n(T));var C=function(E,M){p.add(E,M),this.emit(o.DECODED,E),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y),S=function(E,M){console.error("Error decoding audio: "+E+" - ",M?M.message:""),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var c=this,f=document.body,v=function p(){if(c.context&&f){var g=f.removeEventListener;c.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),c.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};f&&(f.addEventListener("touchstart",v,!1),f.addEventListener("touchend",v,!1),f.addEventListener("click",v,!1),f.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var c=this.context;(c.state==="suspended"||c.state==="interrupted")&&!this.locked&&c.resume()},update:function(c,f){u.prototype.update.call(this,c,f);var v=this.context;v&&v.state==="interrupted"&&v.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var c=this;this.context.close().then(function(){c.context=null})}u.prototype.destroy.call(this)},setMute:function(c){return this.mute=c,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(c){this.masterMuteNode.gain.setValueAtTime(c?0:1,0),this.emit(o.GLOBAL_MUTE,this,c)}},setVolume:function(c){return this.volume=c,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(c){this.masterVolumeNode.gain.setValueAtTime(c,0),this.emit(o.GLOBAL_VOLUME,this,c)}}});e.exports=l},function(e,d){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),u=0;u<t.length;u++)n[t.charCodeAt(u)]=u;var s=function(o){o=o.substr(o.indexOf(",")+1);var h=o.length,a=h*.75,l=0,c,f,v,p;o[h-1]==="="&&(a--,o[h-2]==="="&&a--);for(var g=new ArrayBuffer(a),m=new Uint8Array(g),x=0;x<h;x+=4)c=n[o.charCodeAt(x)],f=n[o.charCodeAt(x+1)],v=n[o.charCodeAt(x+2)],p=n[o.charCodeAt(x+3)],m[l++]=c<<2|f>>4,m[l++]=(f&15)<<4|v>>2,m[l++]=(v&3)<<6|p&63;return g};e.exports=s},function(e,d,t){var n=t(146),u=t(0),s=t(70),o=new u({Extends:n,initialize:function(a,l,c){if(c===void 0&&(c={}),this.audioBuffer=a.game.cache.audio.get(l),!this.audioBuffer)throw new Error('Audio key "'+l+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=a.context.createGain(),this.volumeNode=a.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),a.context.createStereoPanner?(this.pannerNode=a.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(a.destination)):this.volumeNode.connect(a.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,a,l,c)},play:function(h,a){return n.prototype.play.call(this,h,a)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(s.RESUME,this),!0)},stop:function(){return n.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0):!1},createAndStartBufferSource:function(){var h=this.currentConfig.seek,a=this.currentConfig.delay,l=this.manager.context.currentTime+a,c=(this.currentMarker?this.currentMarker.start:0)+h,f=this.duration-h;this.playTime=l-h,this.startTime=l,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,l),Math.max(0,c),Math.max(0,f)),this.resetConfig()},createAndStartLoopBufferSource:function(){var h=this.getLoopTime(),a=this.currentMarker?this.currentMarker.start:0,l=this.duration;this.loopTime=h,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,h),Math.max(0,a),Math.max(0,l))},createBufferSource:function(){var h=this,a=this.manager.context.createBufferSource();return a.buffer=this.audioBuffer,a.connect(this.muteNode),a.onended=function(l){l.target===h.source&&(h.currentConfig.loop?h.hasLooped=!0:h.hasEnded=!0)},a},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var h=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,h),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,h)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var h=0,a=0;a<this.rateUpdates.length;a++){var l=0;a<this.rateUpdates.length-1?l=this.rateUpdates[a+1].time:l=this.manager.context.currentTime-this.playTime,h+=(l-this.rateUpdates[a].time)*this.rateUpdates[a].rate}return h},getLoopTime:function(){for(var h=0,a=0;a<this.rateUpdates.length-1;a++)h+=(this.rateUpdates[a+1].time-this.rateUpdates[a].time)*this.rateUpdates[a].rate;var l=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+l.time+(this.duration-h)/l.rate},rate:{get:function(){return this.currentConfig.rate},set:function(h){this.currentConfig.rate=h,this.calculateRate(),this.emit(s.RATE,this,h)}},setRate:function(h){return this.rate=h,this},detune:{get:function(){return this.currentConfig.detune},set:function(h){this.currentConfig.detune=h,this.calculateRate(),this.emit(s.DETUNE,this,h)}},setDetune:function(h){return this.detune=h,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(h){this.currentConfig.mute=h,this.muteNode.gain.setValueAtTime(h?0:1,0),this.emit(s.MUTE,this,h)}},setMute:function(h){return this.mute=h,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(h){this.currentConfig.volume=h,this.volumeNode.gain.setValueAtTime(h,0),this.emit(s.VOLUME,this,h)}},setVolume:function(h){return this.volume=h,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(h){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(h=Math.min(Math.max(0,h),this.duration),this.currentConfig.seek=h,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,h))}},setSeek:function(h){return this.seek=h,this},loop:{get:function(){return this.currentConfig.loop},set:function(h){this.currentConfig.loop=h,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),h&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,h)}},setLoop:function(h){return this.loop=h,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(h){this.currentConfig.pan=h,this.pannerNode&&this.pannerNode.pan.setValueAtTime(h,this.manager.context.currentTime),this.emit(s.PAN,this,h)}},setPan:function(h){return this.pan=h,this}});e.exports=o},function(e,d){var t=function(n){for(var u=n.length,s=n[0].length,o=new Array(s),h=0;h<s;h++){o[h]=new Array(u);for(var a=u-1;a>-1;a--)o[h][a]=n[a][h]}return o};e.exports=t},function(e,d){function t(s,o,h){var a=s[o];s[o]=s[h],s[h]=a}function n(s,o){return s<o?-1:s>o?1:0}var u=function(s,o,h,a,l){for(h===void 0&&(h=0),a===void 0&&(a=s.length-1),l===void 0&&(l=n);a>h;){if(a-h>600){var c=a-h+1,f=o-h+1,v=Math.log(c),p=.5*Math.exp(2*v/3),g=.5*Math.sqrt(v*p*(c-p)/c)*(f-c/2<0?-1:1),m=Math.max(h,Math.floor(o-f*p/c+g)),x=Math.min(a,Math.floor(o+(c-f)*p/c+g));u(s,o,m,x,l)}var y=s[o],T=h,C=a;for(t(s,h,o),l(s[a],y)>0&&t(s,h,a);T<C;){for(t(s,T,C),T++,C--;l(s[T],y)<0;)T++;for(;l(s[C],y)>0;)C--}l(s[h],y)===0?t(s,h,C):(C++,t(s,C,a)),C<=o&&(h=C+1),o<=C&&(a=C-1)}};e.exports=u},function(e,d,t){var n=t(6),u=t(131),s=function(h,a,l){for(var c=[],f=0;f<h.length;f++)for(var v=0;v<a.length;v++)for(var p=0;p<l;p++)c.push({a:h[f],b:a[v]});return c},o=function(h,a,l){var c=n(l,"max",0),f=n(l,"qty",1),v=n(l,"random",!1),p=n(l,"randomB",!1),g=n(l,"repeat",0),m=n(l,"yoyo",!1),x=[];if(p&&u(a),g===-1)if(c===0)g=0;else{var y=h.length*a.length*f;m&&(y*=2),g=Math.ceil(c/y)}for(var T=0;T<=g;T++){var C=s(h,a,f);v&&u(C),x=x.concat(C),m&&(C.reverse(),x=x.concat(C))}return c&&x.splice(c),x};e.exports=o},function(e,d,t){e.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(e,d,t){var n=t(13),u=function(s,o){var h=n(o,"anims",null);if(h===null)return s;if(typeof h=="string")s.anims.play(h);else if(typeof h=="object"){var a=s.anims,l=n(h,"key",void 0);if(l){var c=n(h,"startFrame",void 0),f=n(h,"delay",0),v=n(h,"repeat",0),p=n(h,"repeatDelay",0),g=n(h,"yoyo",!1),m=n(h,"play",!1),x=n(h,"delayedPlay",0),y={key:l,delay:f,repeat:v,repeatDelay:p,yoyo:g,startFrame:c};m?a.play(y):x>0?a.playAfterDelay(y,x):a.load(y)}}return s};e.exports=u},function(e,d,t){var n=t(0),u=t(109),s=new n({initialize:function(h,a,l,c,f){this.parent=h,this.x=a,this.y=l,this.frame=c,this.data={},this.tint=16777215,this._visible=f,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof u&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,h,a){return this.x=o,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,a&&this.setFrame(a),this},setPosition:function(o,h){return this.x=o,this.y=h,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,h){return this.flipX=o,this.flipY=h,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});e.exports=s},function(e,d,t){var n=t(10),u=function(s,o,h){h===void 0&&(h=new n);var a=Math.min(s.x,o.x),l=Math.min(s.y,o.y),c=Math.max(s.right,o.right)-a,f=Math.max(s.bottom,o.bottom)-l;return h.setTo(a,l,c,f)};e.exports=u},function(e,d,t){var n=t(0),u=t(11),s=t(1055),o=t(15),h=t(7),a=t(202),l=t(20),c=t(140),f=new n({Extends:o,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Origin,u.ScrollFactor,u.Transform,u.Visible,s],initialize:function(p,g,m,x,y,T){o.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(l.SLEEP,this.handleSceneEvent,this),p.sys.events.on(l.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(v){var p=this.node,g=p.style;p&&(g.display=v.settings.visible?"block":"none")},setSkew:function(v,p){return v===void 0&&(v=0),p===void 0&&(p=v),this.skewX=v,this.skewY=p,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.addEventListener(v[p],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.removeEventListener(v[p],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,p,g){return this.setElement(document.createElement(v),p,g)},setElement:function(v,p,g){this.removeElement();var m;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),m=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(m=v),!m)return this;if(this.node=m,p&&h(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(v,p){var g=this.cache.get(v);return g&&this.createFromHTML(g,p),this},createFromHTML:function(v,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(a(this.node),this.node=null),this},updateSize:function(){var v=this.node,p=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(v,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][v]===p)return g[m]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preUpdate:function(){var v=this.parentContainer,p=this.node;p&&v&&!v.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this)}});e.exports=f},function(e,d,t){var n=t(1056),u=t(15),s=t(25),o=new s,h=new s,a=new s,l=function(c,f,v,p){if(!!f.node){var g=f.node.style,m=f.scene.sys.settings;if(!g||!m.visible||u.RENDER_MASK!==f.renderFlags||f.cameraFilter!==0&&f.cameraFilter&v.id||f.parentContainer&&!f.parentContainer.willRender()){g.display="none";return}var x=f.parentContainer,y=v.alpha*f.alpha;x&&(y*=x.alpha);var T=o,C=h,S=a,E=0,M=0,R="0%",L="0%";p?(E=f.width*f.scaleX*f.originX,M=f.height*f.scaleY*f.originY,C.applyITRS(f.x-E,f.y-M,f.rotation,f.scaleX,f.scaleY),T.copyFrom(v.matrix),T.multiplyWithOffset(p,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),C.e=f.x-E,C.f=f.y-M,T.multiply(C,S)):(E=f.width*f.originX,M=f.height*f.originY,C.applyITRS(f.x-E,f.y-M,f.rotation,f.scaleX,f.scaleY),T.copyFrom(v.matrix),R=100*f.originX+"%",L=100*f.originY+"%",C.e-=v.scrollX*f.scrollFactorX,C.f-=v.scrollY*f.scrollFactorY,T.multiply(C,S)),f.transformOnly||(g.display="block",g.opacity=y,g.zIndex=f._depth,g.pointerEvents=f.pointerEvents,g.mixBlendMode=n[f._blendMode]),g.transform=S.getCSSMatrix()+" skew("+f.skewX+"rad, "+f.skewY+"rad) rotate3d("+f.rotate3d.x+","+f.rotate3d.y+","+f.rotate3d.z+","+f.rotate3d.w+f.rotate3dAngle+")",g.transformOrigin=R+" "+L}};e.exports=l},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(1060),h=new n({Extends:s,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.Origin,u.ScrollFactor,u.Size,u.Texture,u.Tint,u.Transform,u.Visible,o],initialize:function(l){s.call(this,l,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=h},function(e,d,t){var n=t(218),u=t(98),s=t(14),o=t(4),h=function(a,l,c){c===void 0&&(c=new o);var f=u(l,0,s.PI2);return n(a,f,c)};e.exports=h},function(e,d,t){var n=t(447),u=t(218),s=t(98),o=t(14),h=function(a,l,c,f){f===void 0&&(f=[]),!l&&c>0&&(l=n(a)/c);for(var v=0;v<l;v++){var p=s(v/l,0,o.PI2);f.push(u(a,p))}return f};e.exports=h},function(e,d){var t=function(n){var u=n.width/2,s=n.height/2,o=Math.pow(u-s,2)/Math.pow(u+s,2);return Math.PI*(u+s)*(1+3*o/(10+Math.sqrt(4-3*o)))};e.exports=t},function(e,d,t){var n=t(217),u=t(30),s=function(o,h,a,l,c,f){var v=h.commandBuffer,p=v.length,g=c||o.currentContext;if(!(p===0||!u(o,g,h,a,l))){a.addToRenderList(h);var m=1,x=1,y=0,T=0,C=1,S=0,E=0,M=0;g.beginPath();for(var R=0;R<p;++R){var L=v[R];switch(L){case n.ARC:g.arc(v[R+1],v[R+2],v[R+3],v[R+4],v[R+5],v[R+6]),R+=7;break;case n.LINE_STYLE:C=v[R+1],y=v[R+2],m=v[R+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,M=y&255,g.strokeStyle="rgba("+S+","+E+","+M+","+m+")",g.lineWidth=C,R+=3;break;case n.FILL_STYLE:T=v[R+1],x=v[R+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,M=T&255,g.fillStyle="rgba("+S+","+E+","+M+","+x+")",R+=2;break;case n.BEGIN_PATH:g.beginPath();break;case n.CLOSE_PATH:g.closePath();break;case n.FILL_PATH:f||g.fill();break;case n.STROKE_PATH:f||g.stroke();break;case n.FILL_RECT:f?g.rect(v[R+1],v[R+2],v[R+3],v[R+4]):g.fillRect(v[R+1],v[R+2],v[R+3],v[R+4]),R+=4;break;case n.FILL_TRIANGLE:g.beginPath(),g.moveTo(v[R+1],v[R+2]),g.lineTo(v[R+3],v[R+4]),g.lineTo(v[R+5],v[R+6]),g.closePath(),f||g.fill(),R+=6;break;case n.STROKE_TRIANGLE:g.beginPath(),g.moveTo(v[R+1],v[R+2]),g.lineTo(v[R+3],v[R+4]),g.lineTo(v[R+5],v[R+6]),g.closePath(),f||g.stroke(),R+=6;break;case n.LINE_TO:g.lineTo(v[R+1],v[R+2]),R+=2;break;case n.MOVE_TO:g.moveTo(v[R+1],v[R+2]),R+=2;break;case n.LINE_FX_TO:g.lineTo(v[R+1],v[R+2]),R+=5;break;case n.MOVE_FX_TO:g.moveTo(v[R+1],v[R+2]),R+=5;break;case n.SAVE:g.save();break;case n.RESTORE:g.restore();break;case n.TRANSLATE:g.translate(v[R+1],v[R+2]),R+=2;break;case n.SCALE:g.scale(v[R+1],v[R+2]),R+=2;break;case n.ROTATE:g.rotate(v[R+1]),R+=1;break;case n.GRADIENT_FILL_STYLE:R+=5;break;case n.GRADIENT_LINE_STYLE:R+=6;break}}g.restore()}};e.exports=s},function(e,d,t){var n=t(0),u=t(137),s=t(80),o=t(2),h=t(68),a=new n({initialize:function(c,f,v,p){p===void 0&&(p=!1),this.propertyKey=f,this.propertyValue=v,this.defaultValue=v,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(c)},loadConfig:function(l,c){l===void 0&&(l={}),c&&(this.propertyKey=c),this.propertyValue=o(l,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(l){return this.propertyValue=l,this.setMethods()},setMethods:function(){var l=this.propertyValue,c=typeof l;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,c==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(l))this.onEmit=this.randomStaticValueEmit;else if(c==="function")this.emitOnly?this.onEmit=l:this.onUpdate=l;else if(c==="object"&&this.hasBoth(l,"start","end")){this.start=l.start,this.end=l.end;var f=this.has(l,"random");if(f&&(this.onEmit=this.randomRangedValueEmit),this.has(l,"steps"))this.steps=l.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var v=this.has(l,"ease")?l.ease:"Linear";this.ease=s(v,l.easeParams),f||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(c==="object"&&this.hasBoth(l,"min","max"))this.start=l.min,this.end=l.max,this.onEmit=this.randomRangedValueEmit;else if(c==="object"&&this.has(l,"random")){var p=l.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else c==="object"&&this.hasEither(l,"onEmit","onUpdate")&&(this.has(l,"onEmit")&&(this.onEmit=l.onEmit),this.has(l,"onUpdate")&&(this.onUpdate=l.onUpdate));return this},has:function(l,c){return l.hasOwnProperty(c)},hasBoth:function(l,c,f){return l.hasOwnProperty(c)&&l.hasOwnProperty(f)},hasEither:function(l,c,f){return l.hasOwnProperty(c)||l.hasOwnProperty(f)},defaultEmit:function(l,c,f){return f},defaultUpdate:function(l,c,f,v){return v},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var l=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[l]},randomRangedValueEmit:function(l,c){var f=u(this.start,this.end);return l&&l.data[c]&&(l.data[c].min=f),f},steppedEmit:function(){var l=this.counter,c=this.counter+(this.end-this.start)/this.steps;return this.counter=h(c,this.start,this.end),l},easedValueEmit:function(l,c){if(l&&l.data[c]){var f=l.data[c];f.min=this.start,f.max=this.end}return this.start},easeValueUpdate:function(l,c,f){var v=l.data[c];return(v.max-v.min)*this.ease(f)+v.min}});e.exports=a},function(e,d,t){var n=t(0),u=t(2),s=new n({initialize:function(h,a,l,c,f){if(typeof h=="object"){var v=h;h=u(v,"x",0),a=u(v,"y",0),l=u(v,"power",0),c=u(v,"epsilon",100),f=u(v,"gravity",50)}else h===void 0&&(h=0),a===void 0&&(a=0),l===void 0&&(l=0),c===void 0&&(c=100),f===void 0&&(f=50);this.x=h,this.y=a,this.active=!0,this._gravity=f,this._power=0,this._epsilon=0,this.power=l,this.epsilon=c},update:function(o,h){var a=this.x-o.x,l=this.y-o.y,c=a*a+l*l;if(c!==0){var f=Math.sqrt(c);c<this._epsilon&&(c=this._epsilon);var v=this._power*h/(c*f)*100;o.velocityX+=a*v,o.velocityY+=l*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var h=this.power;this._gravity=o,this.power=h}}});e.exports=s},function(e,d,t){var n=t(0),u=t(36),s=t(50),o=new n({initialize:function(a){this.emitter=a,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(h,a){var l=this.emitter;this.frame=l.getFrame(),l.emitZone&&l.emitZone.getPoint(this),h===void 0?this.x+=l.x.onEmit(this,"x"):this.x+=h,a===void 0?this.y+=l.y.onEmit(this,"y"):this.y+=a,this.life=l.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var c=l.speedX.onEmit(this,"speedX"),f=l.speedY?l.speedY.onEmit(this,"speedY"):c;if(l.radial){var v=u(l.angle.onEmit(this,"angle"));this.velocityX=Math.cos(v)*Math.abs(c),this.velocityY=Math.sin(v)*Math.abs(f)}else if(l.moveTo){var p=l.moveToX.onEmit(this,"moveToX"),g=l.moveToY?l.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=s(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=c,this.velocityY=f;l.acceleration&&(this.accelerationX=l.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=l.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=l.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=l.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=l.delay.onEmit(this,"delay"),this.scaleX=l.scaleX.onEmit(this,"scaleX"),this.scaleY=l.scaleY?l.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=l.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),this.bounce=l.bounce.onEmit(this,"bounce"),this.alpha=l.alpha.onEmit(this,"alpha"),this.tint=l.tint.onEmit(this,"tint")},computeVelocity:function(h,a,l,c){var f=this.velocityX,v=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;f+=h.gravityX*l,v+=h.gravityY*l,p&&(f+=p*l),g&&(v+=g*l),f>m?f=m:f<-m&&(f=-m),v>x?v=x:v<-x&&(v=-x),this.velocityX=f,this.velocityY=v;for(var y=0;y<c.length;y++)c[y].update(this,a,l)},checkBounds:function(h){var a=h.bounds,l=-this.bounce;this.x<a.x&&h.collideLeft?(this.x=a.x,this.velocityX*=l):this.x>a.right&&h.collideRight&&(this.x=a.right,this.velocityX*=l),this.y<a.y&&h.collideTop?(this.y=a.y,this.velocityY*=l):this.y>a.bottom&&h.collideBottom&&(this.y=a.bottom,this.velocityY*=l)},update:function(h,a,l){if(this.delayCurrent>0)return this.delayCurrent-=h,!1;var c=this.emitter,f=1-this.lifeCurrent/this.life;return this.lifeT=f,this.computeVelocity(c,h,a,l),this.x+=this.velocityX*a,this.y+=this.velocityY*a,c.bounds&&this.checkBounds(c),c.deathZone&&c.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=c.scaleX.onUpdate(this,"scaleX",f,this.scaleX),c.scaleY?this.scaleY=c.scaleY.onUpdate(this,"scaleY",f,this.scaleY):this.scaleY=this.scaleX,this.angle=c.rotate.onUpdate(this,"rotate",f,this.angle),this.rotation=u(this.angle),this.alpha=c.alpha.onUpdate(this,"alpha",f,this.alpha),this.tint=c.tint.onUpdate(this,"tint",f,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0)}});e.exports=o},function(e,d,t){var n=t(35),u=t(0),s=t(11),o=t(453),h=t(454),a=t(449),l=t(2),c=t(210),f=t(455),v=t(126),p=t(451),g=t(456),m=t(10),x=t(79),y=t(3),T=t(68),C=new u({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(E,M){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new a(M,"x",0,!0),this.y=new a(M,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new a(M,"accelerationX",0,!0),this.accelerationY=new a(M,"accelerationY",0,!0),this.maxVelocityX=new a(M,"maxVelocityX",1e4,!0),this.maxVelocityY=new a(M,"maxVelocityY",1e4,!0),this.speedX=new a(M,"speedX",0,!0),this.speedY=new a(M,"speedY",0,!0),this.moveTo=!1,this.moveToX=new a(M,"moveToX",0,!0),this.moveToY=new a(M,"moveToY",0,!0),this.bounce=new a(M,"bounce",0,!0),this.scaleX=new a(M,"scaleX",1),this.scaleY=new a(M,"scaleY",1),this.tint=new a(M,"tint",16777215),this.alpha=new a(M,"alpha",1),this.lifespan=new a(M,"lifespan",1e3,!0),this.angle=new a(M,"angle",{min:0,max:360},!0),this.rotate=new a(M,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new a(M,"quantity",1,!0),this.delay=new a(M,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,M&&this.fromJSON(M)},fromJSON:function(S){if(!S)return this;var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],v(S,M)&&(this[M]=l(S,M));for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],v(S,M)&&this[M].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,v(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(f(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),v(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),v(S,"callbackScope")){var R=l(S,"callbackScope",null);this.emitCallbackScope=R,this.deathCallbackScope=R}return v(S,"emitZone")&&this.setEmitZone(S.emitZone),v(S,"deathZone")&&this.setDeathZone(S.deathZone),v(S,"bounds")&&this.setBounds(S.bounds),v(S,"followOffset")&&this.followOffset.setFromObject(l(S,"followOffset",0)),v(S,"frame")&&this.setFrame(S.frame),v(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],S[M]=this[M];for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],this[M]&&(S[M]=this[M].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,M,R){return E===void 0&&(E=0),M===void 0&&(M=0),R===void 0&&(R=!1),this.follow=S,this.followOffset.set(E,M),this.trackVisible=R,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,M){E===void 0&&(E=!0),M===void 0&&(M=1),this.randomFrame=E,this.frameQuantity=M,this.currentFrame=0,this._frameCounter=0;var R=typeof S;if(Array.isArray(S)||R==="string"||R==="number")this.manager.setEmitterFrames(S,this);else if(R==="object"){var L=S;S=l(L,"frames",null),S&&this.manager.setEmitterFrames(S,this);var O=l(L,"cycle",!1);this.randomFrame=!O,this.frameQuantity=l(L,"quantity",M)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,M,R){if(typeof S=="object"){var L=S;S=L.x,E=L.y,M=v(L,"w")?L.w:L.width,R=v(L,"h")?L.h:L.height}return this.bounds?this.bounds.setTo(S,E,M,R):this.bounds=new m(S,E,M,R),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=l(S,"type","random"),M=l(S,"source",null);switch(E){case"random":this.emitZone=new g(M);break;case"edge":var R=l(S,"quantity",1),L=l(S,"stepRate",0),O=l(S,"yoyo",!1),F=l(S,"seamless",!0);this.emitZone=new h(M,R,L,O,F);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=l(S,"type","onEnter"),M=l(S,"source",null);if(M&&typeof M.contains=="function"){var R=E==="onEnter";this.deathZone=new o(M,R)}}return this},reserve:function(S){for(var E=this.dead,M=0;M<S;M++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var M=this.alive,R=M.length,L=0;L<R;++L)S.call(E,M[L],this);return this},forEachDead:function(S,E){for(var M=this.dead,R=M.length,L=0;L<R;++L)S.call(E,M[L],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,M){return this.frequency=-1,this.emitParticle(S,E,M)},emitParticleAt:function(S,E,M){return this.emitParticle(M,S,E)},emitParticle:function(S,E,M){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var R=this.dead,L=this.follow?this.follow.x+this.followOffset.x:E,O=this.follow?this.follow.y+this.followOffset.y:M,F=0;F<S;F++){var D=R.pop();if(D||(D=new this.particleClass(this)),D.fire(L,O),this.particleBringToTop?this.alive.push(D):this.alive.unshift(D),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,D,this),this.atLimit())break}return D}},preUpdate:function(S,E){E*=this.timeScale;var M=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var R=this.manager.getProcessors(),L=this.alive,O=this.dead,F=0,D=[],B=L.length;for(F=0;F<B;F++){var b=L[F];b.update(E,M,R)&&D.push({index:F,particle:b})}if(B=D.length,B>0){var V=this.deathCallback,X=this.deathCallbackScope;for(F=B-1;F>=0;F--){var K=D[F];L.splice(K.index,1),O.push(K.particle),V&&V.call(X,K.particle),K.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});e.exports=C},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h){this.source=o,this.killOnEnter=h},willKill:function(s){var o=this.source.contains(s.x,s.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});e.exports=u},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l,c){l===void 0&&(l=!1),c===void 0&&(c=!0),this.source=o,this.points=[],this.quantity=h,this.stepRate=a,this.yoyo=l,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var s=this.points[0],o=this.points[this.points.length-1];s.x===o.x&&s.y===o.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(s){return this.source=s,this.updateSource()},getPoint:function(s){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(s.x=o.x,s.y=o.y)}});e.exports=u},function(e,d){var t=function(n,u){for(var s=0;s<u.length;s++)if(n.hasOwnProperty(u[s]))return!0;return!1};e.exports=t},function(e,d,t){var n=t(0),u=t(3),s=new n({initialize:function(h){this.source=h,this._tempVec=new u},getPoint:function(o){var h=this._tempVec;this.source.getRandomPoint(h),o.x=h.x,o.y=h.y}});e.exports=s},function(e,d,t){var n=t(0),u=t(11),s=t(73),o=new n({Extends:s,Mixins:[u.PathFollower],initialize:function(a,l,c,f,v,p){s.call(this,a,c,f,v,p),this.path=l},preUpdate:function(h,a){this.anims.update(h,a),this.pathUpdate(h)}});e.exports=o},function(e,d){var t=function(n,u,s){var o=n.canvas,h=n.context,a=n.style,l=[],c=0,f=s.length;a.maxLines>0&&a.maxLines<s.length&&(f=a.maxLines),a.syncFont(o,h);for(var v=0;v<f;v++){var p=a.strokeThickness;p+=h.measureText(s[v]).width,a.wordWrap&&(p-=h.measureText(" ").width),l[v]=Math.ceil(p),c=Math.max(c,l[v])}var g=u.fontSize+a.strokeThickness,m=g*f,x=n.lineSpacing;return f>1&&(m+=x*(f-1)),{width:c,height:m,lines:f,lineWidths:l,lineSpacing:x,lineHeight:g}};e.exports=t},function(e,d,t){var n=t(0),u=t(13),s=t(6),o=t(460),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},a=new n({initialize:function(c,f){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(f,!1,!0);var v=s(f,"metrics",!1);v?this.metrics={ascent:s(v,"ascent",0),descent:s(v,"descent",0),fontSize:s(v,"fontSize",0)}:this.metrics=o(this)},setStyle:function(l,c,f){c===void 0&&(c=!0),f===void 0&&(f=!1),l&&l.hasOwnProperty("fontSize")&&typeof l.fontSize=="number"&&(l.fontSize=l.fontSize.toString()+"px");for(var v in h){var p=f?h[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=s(l,h[v][0],p):this[v]=u(l,h[v][0],p)}var g=s(l,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=s(l,"fill",null);return m!==null&&(this.color=m),c?this.update(!0):this.parent},syncFont:function(l,c){c.font=this._font},syncStyle:function(l,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(l,c){c?(l.shadowOffsetX=this.shadowOffsetX,l.shadowOffsetY=this.shadowOffsetY,l.shadowColor=this.shadowColor,l.shadowBlur=this.shadowBlur):(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowColor=0,l.shadowBlur=0)},update:function(l){return l&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(l,c){c===void 0&&(c=!0);var f=l,v="",p="";if(typeof l!="string")f=s(l,"fontFamily","Courier"),v=s(l,"fontSize","16px"),p=s(l,"fontStyle","");else{var g=l.split(" "),m=0;p=g.length>2?g[m++]:"",v=g[m++]||"16px",f=g[m++]||"Courier"}return(f!==this.fontFamily||v!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=f,this.fontSize=v,this.fontStyle=p,c&&this.update(!0)),this.parent},setFontFamily:function(l){return this.fontFamily!==l&&(this.fontFamily=l,this.update(!0)),this.parent},setFontStyle:function(l){return this.fontStyle!==l&&(this.fontStyle=l,this.update(!0)),this.parent},setFontSize:function(l){return typeof l=="number"&&(l=l.toString()+"px"),this.fontSize!==l&&(this.fontSize=l,this.update(!0)),this.parent},setTestString:function(l){return this.testString=l,this.update(!0)},setFixedSize:function(l,c){return this.fixedWidth=l,this.fixedHeight=c,l&&(this.parent.width=l),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(l){return this.backgroundColor=l,this.update(!1)},setFill:function(l){return this.color=l,this.update(!1)},setColor:function(l){return this.color=l,this.update(!1)},setResolution:function(l){return this.resolution=l,this.update(!1)},setStroke:function(l,c){return c===void 0&&(c=this.strokeThickness),l===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==l||this.strokeThickness!==c)&&(this.stroke=l,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(l,c,f,v,p,g){return l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f="#000"),v===void 0&&(v=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=l,this.shadowOffsetY=c,this.shadowColor=f,this.shadowBlur=v,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this.shadowOffsetX=l,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(l){return l===void 0&&(l="#000"),this.shadowColor=l,this.update(!1)},setShadowBlur:function(l){return l===void 0&&(l=0),this.shadowBlur=l,this.update(!1)},setShadowStroke:function(l){return this.shadowStroke=l,this.update(!1)},setShadowFill:function(l){return this.shadowFill=l,this.update(!1)},setWordWrapWidth:function(l,c){return c===void 0&&(c=!1),this.wordWrapWidth=l,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(l,c){return c===void 0&&(c=null),this.wordWrapCallback=l,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(l){return l===void 0&&(l="left"),this.align=l,this.update(!1)},setMaxLines:function(l){return l===void 0&&(l=0),this.maxLines=l,this.update(!1)},getTextMetrics:function(){var l=this.metrics;return{ascent:l.ascent,descent:l.descent,fontSize:l.fontSize}},toJSON:function(){var l={};for(var c in h)l[c]=this[c];return l.metrics=this.getTextMetrics(),l},destroy:function(){this.parent=void 0}});e.exports=a},function(e,d,t){var n=t(31),u=function(s){var o=n.create(this),h=o.getContext("2d");s.syncFont(o,h);var a=h.measureText(s.testString);if("actualBoundingBoxAscent"in a){var l=a.actualBoundingBoxAscent,c=a.actualBoundingBoxDescent;return n.remove(o),{ascent:l,descent:c,fontSize:l+c}}var f=Math.ceil(a.width*s.baselineX),v=f,p=2*v;v=v*s.baselineY|0,o.width=f,o.height=p,h.fillStyle="#f00",h.fillRect(0,0,f,p),h.font=s._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(s.testString,0,v);var g={ascent:0,descent:0,fontSize:0},m=h.getImageData(0,0,f,p);if(!m)return g.ascent=v,g.descent=v+6,g.fontSize=g.ascent+g.descent,n.remove(o),g;var x=m.data,y=x.length,T=f*4,C,S,E=0,M=!1;for(C=0;C<v;C++){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E+=T;else break}for(g.ascent=v-C,E=y-T,M=!1,C=p;C>v;C--){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E-=T;else break}return g.descent=C-v,g.fontSize=g.ascent+g.descent,n.remove(o),g};e.exports=u},function(e,d,t){var n=t(1097),u=t(0),s=t(36),o=t(59),h=t(65),a=t(14),l=t(34),c=new u({Extends:l,Mixins:[n],initialize:function(v,p,g,m,x,y,T,C,S){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),l.call(this,v,"Arc",new h(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(f){this._iterations=f,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(f){this.geom.radius=f;var v=f*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(f){this._startAngle=f,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(f){this._endAngle=f,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(f){this._anticlockwise=f,this.updateData()}},setRadius:function(f){return this.radius=f,this},setIterations:function(f){return f===void 0&&(f=.01),this.iterations=f,this},setStartAngle:function(f,v){return this._startAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(f,v){return this._endAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var f=this._iterations,v=f,p=this.geom.radius,g=s(this._startAngle),m=s(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-a.PI2?m=-a.PI2:m>0&&(m=-a.PI2+m%a.PI2):m>a.PI2?m=a.PI2:m<0&&(m=a.PI2+m%a.PI2);for(var C=[y+Math.cos(g)*p,T+Math.sin(g)*p],S;v<1;)S=m*v+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),v+=f;return S=m+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),C.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=o(C),this.pathData=C,this}});e.exports=c},function(e,d,t){var n=t(0),u=t(1100),s=t(59),o=t(10),h=t(34),a=new n({Extends:h,Mixins:[u],initialize:function(c,f,v,p,g,m){f===void 0&&(f=0),v===void 0&&(v=0),h.call(this,c,"Curve",p),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(f,v),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){var l=this._curveBounds,c=this._smoothness;this.geom.getBounds(l,c),this.setSize(l.width,l.height),this.updateDisplayOrigin();for(var f=[],v=this.geom.getPoints(c),p=0;p<v.length;p++)f.push(v[p].x,v[p].y);return f.push(v[0].x,v[0].y),this.pathIndexes=s(f),this.pathData=f,this}});e.exports=a},function(e,d,t){var n=t(0),u=t(59),s=t(1103),o=t(111),h=t(34),a=new n({Extends:h,Mixins:[s],initialize:function(c,f,v,p,g,m,x){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=128),h.call(this,c,"Ellipse",new o(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(f,v),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSize:function(l,c){return this.width=l,this.height=c,this.geom.setPosition(l/2,c/2),this.geom.setSize(l,c),this.updateData()},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){for(var l=[],c=this.geom.getPoints(this._smoothness),f=0;f<c.length;f++)l.push(c[f].x,c[f].y);return l.push(c[0].x,c[0].y),this.pathIndexes=u(l),this.pathData=l,this}});e.exports=a},function(e,d,t){var n=t(0),u=t(34),s=t(1106),o=new n({Extends:u,Mixins:[s],initialize:function(a,l,c,f,v,p,g,m,x,y,T){l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=128),v===void 0&&(v=128),p===void 0&&(p=32),g===void 0&&(g=32),u.call(this,a,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(l,c),this.setSize(f,v),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(h,a){return a===void 0&&(a=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=a,this.showCells=!0),this},setAltFillStyle:function(h,a){return a===void 0&&(a=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=a,this.showAltCells=!0),this},setOutlineStyle:function(h,a){return a===void 0&&(a=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=a,this.showOutline=!0),this}});e.exports=o},function(e,d,t){var n=t(1109),u=t(0),s=t(34),o=new u({Extends:s,Mixins:[n],initialize:function(a,l,c,f,v,p,g,m){l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=48),v===void 0&&(v=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),s.call(this,a,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(l,c),this.setSize(f,v),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,a,l){return h===void 0&&(h=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),this.showTop=h,this.showLeft=a,this.showRight=l,this},setFillStyle:function(h,a,l){return this.fillTop=h,this.fillLeft=a,this.fillRight=l,this.isFilled=!0,this}});e.exports=o},function(e,d,t){var n=t(0),u=t(1112),s=t(34),o=new n({Extends:s,Mixins:[u],initialize:function(a,l,c,f,v,p,g,m,x){l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=48),v===void 0&&(v=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),s.call(this,a,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(l,c),this.setSize(f,v),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,a,l){return h===void 0&&(h=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),this.showTop=h,this.showLeft=a,this.showRight=l,this},setFillStyle:function(h,a,l){return this.fillTop=h,this.fillLeft=a,this.fillRight=l,this.isFilled=!0,this}});e.exports=o},function(e,d,t){var n=t(0),u=t(34),s=t(47),o=t(1115),h=new n({Extends:u,Mixins:[o],initialize:function(l,c,f,v,p,g,m,x,y){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),u.call(this,l,"Line",new s(v,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,f),this.setSize(T,C),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(a,l){return l===void 0&&(l=a),this._startWidth=a,this._endWidth=l,this.lineWidth=a,this},setTo:function(a,l,c,f){return this.geom.setTo(a,l,c,f),this}});e.exports=h},function(e,d,t){var n=t(1118),u=t(0),s=t(59),o=t(469),h=t(227),a=t(34),l=t(472),c=new u({Extends:a,Mixins:[n],initialize:function(v,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),a.call(this,v,"Polygon",new h(m));var T=o(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(f){f===void 0&&(f=1);for(var v=0;v<f;v++)l(this.geom);return this.updateData()},updateData:function(){for(var f=[],v=this.geom.points,p=0;p<v.length;p++)f.push(v[p].x,v[p].y);return f.push(v[0].x,v[0].y),this.pathIndexes=s(f),this.pathData=f,this}});e.exports=c},function(e,d,t){var n=t(10),u=function(s,o){o===void 0&&(o=new n);for(var h=Infinity,a=Infinity,l=-h,c=-a,f,v=0;v<s.points.length;v++)f=s.points[v],h=Math.min(h,f.x),a=Math.min(a,f.y),l=Math.max(l,f.x),c=Math.max(c,f.y);return o.x=h,o.y=a,o.width=l-h,o.height=c-a,o};e.exports=u},function(e,d,t){var n=t(67),u=t(47),s=t(471),o=function(h,a,l,c){c===void 0&&(c=[]);var f=h.points,v=s(h);!a&&l>0&&(a=v/l);for(var p=0;p<a;p++)for(var g=v*(p/a),m=0,x=0;x<f.length;x++){var y=f[x],T=f[(x+1)%f.length],C=new u(y.x,y.y,T.x,T.y),S=n(C);if(g<m||g>m+S){m+=S;continue}var E=C.getPoint((g-m)/S);c.push(E);break}return c};e.exports=o},function(e,d,t){var n=t(67),u=t(47),s=function(o){for(var h=o.points,a=0,l=0;l<h.length;l++){var c=h[l],f=h[(l+1)%h.length],v=new u(c.x,c.y,f.x,f.y);a+=n(v)}return a};e.exports=s},function(e,d){var t=function(u,s){return u[0]=s[0],u[1]=s[1],u},n=function(u){var s,o=[],h=u.points;for(s=0;s<h.length;s++)o.push([h[s].x,h[s].y]);var a=[];for(o.length>0&&a.push(t([0,0],o[0])),s=0;s<o.length-1;s++){var l=o[s],c=o[s+1],f=l[0],v=l[1],p=c[0],g=c[1];a.push([.85*f+.15*p,.85*v+.15*g]),a.push([.15*f+.85*p,.15*v+.85*g])}return o.length>1&&a.push(t([0,0],o[o.length-1])),u.setTo(a)};e.exports=n},function(e,d,t){var n=t(0),u=t(10),s=t(34),o=t(1121),h=new n({Extends:s,Mixins:[o],initialize:function(l,c,f,v,p,g,m){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=128),p===void 0&&(p=128),s.call(this,l,"Rectangle",new u(0,0,v,p)),this.setPosition(c,f),this.setSize(v,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(a,l){return this.width=a,this.height=l,this.geom.setSize(a,l),this.updateData(),this},updateData:function(){var a=[],l=this.geom,c=this._tempLine;return l.getLineA(c),a.push(c.x1,c.y1,c.x2,c.y2),l.getLineB(c),a.push(c.x2,c.y2),l.getLineC(c),a.push(c.x2,c.y2),l.getLineD(c),a.push(c.x2,c.y2),this.pathData=a,this}});e.exports=h},function(e,d,t){var n=t(1124),u=t(0),s=t(59),o=t(34),h=new u({Extends:o,Mixins:[n],initialize:function(l,c,f,v,p,g,m,x){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=5),p===void 0&&(p=32),g===void 0&&(g=64),o.call(this,l,"Star",null),this._points=v,this._innerRadius=p,this._outerRadius=g,this.setPosition(c,f),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(a){return this._points=a,this.updateData()},setInnerRadius:function(a){return this._innerRadius=a,this.updateData()},setOuterRadius:function(a){return this._outerRadius=a,this.updateData()},points:{get:function(){return this._points},set:function(a){this._points=a,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(a){this._innerRadius=a,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(a){this._outerRadius=a,this.updateData()}},updateData:function(){var a=[],l=this._points,c=this._innerRadius,f=this._outerRadius,v=Math.PI/2*3,p=Math.PI/l,g=f,m=f;a.push(g,m+-f);for(var x=0;x<l;x++)a.push(g+Math.cos(v)*f,m+Math.sin(v)*f),v+=p,a.push(g+Math.cos(v)*c,m+Math.sin(v)*c),v+=p;return a.push(g,m+-f),this.pathIndexes=s(a),this.pathData=a,this}});e.exports=h},function(e,d,t){var n=t(0),u=t(34),s=t(82),o=t(1127),h=new n({Extends:u,Mixins:[o],initialize:function(l,c,f,v,p,g,m,x,y,T,C){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),u.call(this,l,"Triangle",new s(v,p,g,m,x,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(c,f),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(a,l,c,f,v,p){return this.geom.setTo(a,l,c,f,v,p),this.updateData()},updateData:function(){var a=[],l=this.geom,c=this._tempLine;return l.getLineA(c),a.push(c.x1,c.y1,c.x2,c.y2),l.getLineB(c),a.push(c.x2,c.y2),l.getLineC(c),a.push(c.x2,c.y2),this.pathData=a,this}});e.exports=h},function(e,d,t){var n=t(4),u=t(67),s=function(o,h,a){a===void 0&&(a=new n);var l=o.getLineA(),c=o.getLineB(),f=o.getLineC();if(h<=0||h>=1)return a.x=l.x1,a.y=l.y1,a;var v=u(l),p=u(c),g=u(f),m=v+p+g,x=m*h,y=0;return x<v?(y=x/v,a.x=l.x1+(l.x2-l.x1)*y,a.y=l.y1+(l.y2-l.y1)*y):x>v+p?(x-=v+p,y=x/g,a.x=f.x1+(f.x2-f.x1)*y,a.y=f.y1+(f.y2-f.y1)*y):(x-=v,y=x/p,a.x=c.x1+(c.x2-c.x1)*y,a.y=c.y1+(c.y2-c.y1)*y),a};e.exports=s},function(e,d,t){var n=t(67),u=t(4),s=function(o,h,a,l){l===void 0&&(l=[]);var c=o.getLineA(),f=o.getLineB(),v=o.getLineC(),p=n(c),g=n(f),m=n(v),x=p+g+m;!h&&a>0&&(h=x/a);for(var y=0;y<h;y++){var T=x*(y/h),C=0,S=new u;T<p?(C=T/p,S.x=c.x1+(c.x2-c.x1)*C,S.y=c.y1+(c.y2-c.y1)*C):T>p+g?(T-=p+g,C=T/m,S.x=v.x1+(v.x2-v.x1)*C,S.y=v.y1+(v.y2-v.y1)*C):(T-=p,C=T/g,S.x=f.x1+(f.x2-f.x1)*C,S.y=f.y1+(f.y2-f.y1)*C),l.push(S)}return l};e.exports=s},function(e,d){var t=function(n,u,s){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(u))return n[u]=s,!0;if(u.indexOf(".")!==-1){for(var o=u.split("."),h=n,a=n,l=0;l<o.length;l++)if(h.hasOwnProperty(o[l]))a=h,h=h[o[l]];else return!1;return a[o[o.length-1]]=s,!0}return!1};e.exports=t},function(e,d,t){var n=t(116),u=t(117),s=function(o,h,a,l,c,f,v){if(l===void 0&&(l=!1),f===void 0&&(f=16777215),v===void 0&&(v=1),o.length!==h.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,C,S,E,M,R,L,O=l?3:2,F=Array.isArray(f),D=Array.isArray(v);if(Array.isArray(a)&&a.length>0)for(g=0;g<a.length;g++){var B=a[g],b=a[g]*2,V=a[g]*O;m=o[V],x=o[V+1],y=l?o[V+2]:0,T=h[b],C=h[b+1],S=F?f[B]:f,E=D?v[B]:v,M=0,R=0,L=0,c&&(M=c[V],R=c[V+1],L=l?c[V+2]:0),p.vertices.push(new u(m,x,y,T,C,S,E,M,R,L))}else{var X=0,K=0;for(g=0;g<o.length;g+=O)m=o[g],x=o[g+1],y=l?o[g+2]:0,T=h[X],C=h[X+1],S=F?f[K]:f,E=D?v[K]:v,M=0,R=0,L=0,c&&(M=c[g],R=c[g+1],L=l?c[g+2]:0),p.vertices.push(new u(m,x,y,T,C,S,E,M,R,L)),X+=2,K++}for(g=0;g<p.vertices.length;g+=3){var J=p.vertices[g],G=p.vertices[g+1],w=p.vertices[g+2];p.faces.push(new n(J,G,w))}return p};e.exports=s},function(e,d,t){var n=t(116),u=t(69),s=t(39),o=t(117),h=new s,a=new s,l=new u,c=function(f,v,p,g,m,x,y,T,C,S){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},M=f.materials;h.set(g,m,x),a.set(y,T,C),l.fromRotationXYTranslation(a,h,S);for(var R=0;R<f.models.length;R++)for(var L=f.models[R],O=L.vertices,F=L.textureCoords,D=L.faces,B=0;B<D.length;B++){var b=D[B],V=b.vertices[0],X=b.vertices[1],K=b.vertices[2],J=O[V.vertexIndex],G=O[X.vertexIndex],w=O[K.vertexIndex],N=V.textureCoordsIndex,z=X.textureCoordsIndex,U=K.textureCoordsIndex,W=N===-1?{u:0,v:1}:F[N],H=z===-1?{u:0,v:0}:F[z],Z=U===-1?{u:1,v:1}:F[U],q=16777215;b.material!==""&&M[b.material]&&(q=M[b.material]);var _=new o(J.x*p,J.y*p,J.z*p,W.u,W.v,q).transformMat4(l),nt=new o(G.x*p,G.y*p,G.z*p,H.u,H.v,q).transformMat4(l),rt=new o(w.x*p,w.y*p,w.z*p,Z.u,Z.v,q).transformMat4(l);E.verts.push(_,nt,rt),E.faces.push(new n(_,nt,rt))}return v&&(v.faces=v.faces.concat(E.faces),v.vertices=v.vertices.concat(E.verts)),E};e.exports=c},function(e,d,t){var n=t(65),u=t(0),s=t(11),o=t(200),h=t(12),a=new u({Extends:n,Mixins:[s.ScrollFactor,s.Visible],initialize:function(c,f,v,p,g,m,x){n.call(this,c,f,v),this.color=new o(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(l){return!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setColor:function(l){var c=h.getFloatsFromUintRGB(l);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(l){return this.intensity=l,this},setRadius:function(l){return this.radius=l,this}});a.RENDER_MASK=15,e.exports=a},function(e,d,t){var n=t(151),u=t(0),s=t(50),o=t(481),h=t(150),a=t(200),l=t(74),c=t(79),f=t(12),v=new u({initialize:function(){this.lights=[],this.ambientColor=new a(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new h(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&n(T,m)&&x.push({light:T,distance:s(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(c(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=f.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=f.getFloatsFromUintRGB(x),C=new o(p,g,m,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&l(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=v},function(e,d,t){var n=t(56),u=t(17),s={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};s=u(!1,s,n),e.exports=s},function(e,d,t){e.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(e,d,t){var n=t(39),u=function(s,o,h){var a=s.x1,l=s.y1,c=s.x2,f=s.y2,v=o.x1,p=o.y1,g=o.x2,m=o.y2,x=c-a,y=f-l,T=g-v,C=m-p,S=C*x-T*y;if(x===0||S===0)return!1;var E=(x*(p-l)+y*(a-v))/(T*y-C*x),M=(v+T*E-a)/x;return M<0||E<0||E>1?null:(h===void 0&&(h=new n),h.set(a+x*M,l+y*M,M))};e.exports=u},function(e,d,t){var n=t(39),u=t(485),s=t(47),o=new s,h=new n,a=function(l,c,f){f===void 0&&(f=new n);var v=!1;f.set(),h.set();for(var p=c[0],g=1;g<c.length;g++){var m=c[g];o.setTo(p.x,p.y,m.x,m.y),p=m,u(l,o,h)&&(!v||h.z<f.z)&&(f.copy(h),v=!0)}return v?f:null};e.exports=a},function(e,d,t){var n=t(39),u=t(140),s=t(486),o=new n,h=function(a,l,c){c===void 0&&(c=new u),Array.isArray(l)||(l=[l]);var f=!1;c.set(),o.set();for(var v=0;v<l.length;v++)s(a,l[v].points,o)&&(!f||o.z<c.z)&&(c.set(o.x,o.y,o.z,v),f=!0);return f?c:null};e.exports=h},function(e,d){var t=function(n,u){var s=n.x1,o=n.y1,h=n.x2,a=n.y2,l=u.x,c=u.y,f=u.right,v=u.bottom,p=0;if(s>=l&&s<=f&&o>=c&&o<=v||h>=l&&h<=f&&a>=c&&a<=v)return!0;if(s<l&&h>=l){if(p=o+(a-o)*(l-s)/(h-s),p>c&&p<=v)return!0}else if(s>f&&h<=f&&(p=o+(a-o)*(f-s)/(h-s),p>=c&&p<=v))return!0;if(o<c&&a>=c){if(p=s+(h-s)*(c-o)/(a-o),p>=l&&p<=f)return!0}else if(o>v&&a<=v&&(p=s+(h-s)*(v-o)/(a-o),p>=l&&p<=f))return!0;return!1};e.exports=t},function(e,d,t){var n=t(96),u=t(57),s=t(235),o=t(490),h=function(a,l){if(l.left>a.right||l.right<a.left||l.top>a.bottom||l.bottom<a.top)return!1;var c=l.getLineA(),f=l.getLineB(),v=l.getLineC();if(u(a,c.x1,c.y1)||u(a,c.x2,c.y2)||u(a,f.x1,f.y1)||u(a,f.x2,f.y2)||u(a,v.x1,v.y1)||u(a,v.x2,v.y2))return!0;var p=a.getLineA(),g=a.getLineB(),m=a.getLineC(),x=a.getLineD();if(n(c,p)||n(c,g)||n(c,m)||n(c,x)||n(f,p)||n(f,g)||n(f,m)||n(f,x)||n(v,p)||n(v,g)||n(v,m)||n(v,x))return!0;var y=o(a),T=s(l,y,!0);return T.length>0};e.exports=h},function(e,d){var t=function(n,u){return u===void 0&&(u=[]),u.push({x:n.x,y:n.y}),u.push({x:n.right,y:n.y}),u.push({x:n.right,y:n.bottom}),u.push({x:n.x,y:n.bottom}),u};e.exports=t},function(e,d,t){var n=t(233),u=t(115),s=function(o,h){return o.left>h.right||o.right<h.left||o.top>h.bottom||o.bottom<h.top?!1:!!(u(o,h.x,h.y)||n(o.getLineA(),h)||n(o.getLineB(),h)||n(o.getLineC(),h))};e.exports=s},function(e,d,t){var n=t(4),u=t(493),s=t(96),o=function(h,a,l){if(l===void 0&&(l=[]),u(h,a))for(var c=h.getLineA(),f=h.getLineB(),v=h.getLineC(),p=[new n,new n,new n],g=[s(c,a,p[0]),s(f,a,p[1]),s(v,a,p[2])],m=0;m<3;m++)g[m]&&l.push(p[m]);return l};e.exports=o},function(e,d,t){var n=t(96),u=function(s,o){return!!(s.contains(o.x1,o.y1)||s.contains(o.x2,o.y2)||n(s.getLineA(),o)||n(s.getLineB(),o)||n(s.getLineC(),o))};e.exports=u},function(e,d,t){var n=t(235),u=t(495),s=t(96),o=function(h,a){if(h.left>a.right||h.right<a.left||h.top>a.bottom||h.bottom<a.top)return!1;var l=h.getLineA(),c=h.getLineB(),f=h.getLineC(),v=a.getLineA(),p=a.getLineB(),g=a.getLineC();if(s(l,v)||s(l,p)||s(l,g)||s(c,v)||s(c,p)||s(c,g)||s(f,v)||s(f,p)||s(f,g))return!0;var m=u(h),x=n(a,m,!0);return!!(x.length>0||(m=u(a),x=n(h,m,!0),x.length>0))};e.exports=o},function(e,d){var t=function(n,u){return u===void 0&&(u=[]),u.push({x:n.x1,y:n.y1}),u.push({x:n.x2,y:n.y2}),u.push({x:n.x3,y:n.y3}),u};e.exports=t},function(e,d){var t=function(n,u,s){s===void 0&&(s=1);var o=u.x1,h=u.y1,a=u.x2,l=u.y2,c=n.x,f=n.y,v=(a-o)*(a-o)+(l-h)*(l-h);if(v===0)return!1;var p=((c-o)*(a-o)+(f-h)*(l-h))/v;if(p<0)return Math.sqrt((o-c)*(o-c)+(h-f)*(h-f))<=s;if(p>=0&&p<=1){var g=((h-f)*(a-o)-(o-c)*(l-h))/v;return Math.abs(g)*Math.sqrt(v)<=s}else return Math.sqrt((a-c)*(a-c)+(l-f)*(l-f))<=s};e.exports=t},function(e,d,t){var n=t(14),u=t(68),s=t(97),o=function(h){var a=s(h)-n.TAU;return u(a,-Math.PI,Math.PI)};e.exports=o},function(e,d){var t=!0,n="untitled",u="",s="";function o(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function h(y){return y.models.length===0&&y.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),u="",y.models[y.models.length-1]}function a(y,T){var C=y.length>=2?y[1]:n;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function l(y){y.length===2&&(u=y[1])}function c(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;h(T).vertices.push({x:S,y:E,z:M})}function f(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(M)&&(M=0),t&&(E=1-E),h(T).textureCoords.push({u:S,v:E,w:M})}function v(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;h(T).vertexNormals.push({x:S,y:E,z:M})}function p(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:u,material:s,vertices:[]},E=0;E<C;E++){var M=y[E+1],R=M.split("/"),L=R.length;if(!(L<1||L>3)){var O=0,F=0,D=0;O=parseInt(R[0],10),L>1&&R[1]!==""&&(F=parseInt(R[1],10)),L>2&&(D=parseInt(R[2],10)),O!==0&&(O<0&&(O=h(T).vertices.length+1+O),F-=1,O-=1,D-=1,S.vertices.push({textureCoordsIndex:F,vertexIndex:O,vertexNormalIndex:D}))}}h(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(s=y[1])}var x=function(y,T){T===void 0&&(T=!0),t=T;var C={materials:{},materialLibraries:[],models:[]};u="",s="";for(var S=y.split(`
`),E=0;E<S.length;E++){var M=o(S[E]),R=M.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":a(R,C);break;case"g":l(R);break;case"v":c(R,C);break;case"vt":f(R,C);break;case"vn":v(R,C);break;case"f":p(R,C);break;case"mtllib":g(R,C);break;case"usemtl":m(R);break}}return C};e.exports=x},function(e,d,t){var n=t(103),u=function(s){for(var o={},h=s.split(`
`),a="",l=0;l<h.length;l++){var c=h[l].trim();if(!(c.indexOf("#")===0||c==="")){var f=c.replace(/\s\s+/g," ").trim().split(" ");switch(f[0].toLowerCase()){case"newmtl":{a=f[1];break}case"kd":{var v=Math.floor(f[1]*255),p=f.length>=2?Math.floor(f[2]*255):v,g=f.length>=3?Math.floor(f[3]*255):v;o[a]=n(v,p,g);break}}}}return o};e.exports=u},function(e,d){var t=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)};e.exports=t},function(e,d){var t=function(n){return n.x*n.x+n.y*n.y};e.exports=t},function(e,d,t){var n=t(10);n.Area=t(1267),n.Ceil=t(1268),n.CeilAll=t(1269),n.CenterOn=t(190),n.Clone=t(1270),n.Contains=t(57),n.ContainsPoint=t(1271),n.ContainsRect=t(503),n.CopyFrom=t(1272),n.Decompose=t(490),n.Equals=t(1273),n.FitInside=t(1274),n.FitOutside=t(1275),n.Floor=t(1276),n.FloorAll=t(1277),n.FromPoints=t(199),n.FromXY=t(1278),n.GetAspectRatio=t(237),n.GetCenter=t(1279),n.GetPoint=t(171),n.GetPoints=t(306),n.GetSize=t(1280),n.Inflate=t(1281),n.Intersection=t(1282),n.MarchingAnts=t(316),n.MergePoints=t(1283),n.MergeRect=t(1284),n.MergeXY=t(1285),n.Offset=t(1286),n.OffsetPoint=t(1287),n.Overlaps=t(1288),n.Perimeter=t(130),n.PerimeterPoint=t(1289),n.Random=t(174),n.RandomOutside=t(1290),n.SameDimensions=t(1291),n.Scale=t(1292),n.Union=t(441),e.exports=n},function(e,d){var t=function(n,u){return u.width*u.height>n.width*n.height?!1:u.x>n.x&&u.x<n.right&&u.right>n.x&&u.right<n.right&&u.y>n.y&&u.y<n.bottom&&u.bottom>n.y&&u.bottom<n.bottom};e.exports=t},function(e,d,t){var n=t(4),u=function(s,o){return o===void 0&&(o=new n),o.x=(s.x1+s.x2+s.x3)/3,o.y=(s.y1+s.y2+s.y3)/3,o};e.exports=u},function(e,d){var t=function(n,u,s){return n.x1+=u,n.y1+=s,n.x2+=u,n.y2+=s,n.x3+=u,n.y3+=s,n};e.exports=t},function(e,d,t){var n=t(4);function u(o,h,a,l){var c=o-a,f=h-l,v=c*c+f*f;return Math.sqrt(v)}var s=function(o,h){h===void 0&&(h=new n);var a=o.x1,l=o.y1,c=o.x2,f=o.y2,v=o.x3,p=o.y3,g=u(v,p,c,f),m=u(a,l,v,p),x=u(c,f,a,l),y=g+m+x;return h.x=(a*g+c*m+v*x)/y,h.y=(l*g+f*m+p*x)/y,h};e.exports=s},function(e,d){var t=function(n,u){return function(s,o,h,a){var l=n.getPixelAlpha(o,h,a.texture.key,a.frame.name);return l&&l>=u}};e.exports=t},function(e,d){var t=function(n,u,s){return{gameObject:n,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:s,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=t},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h){this.pad=o,this.events=o.events,this.index=h,this.value=0,this.threshold=.1},update:function(s){this.value=s},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=u},function(e,d,t){var n=t(0),u=t(239),s=new n({initialize:function(h,a){this.pad=h,this.events=h.manager,this.index=a,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var h=this.pad,a=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,h,this,o),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,a,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,h,this,o),this.pad.emit(u.GAMEPAD_BUTTON_UP,a,o,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=s},function(e,d,t){var n=t(509),u=t(510),s=t(0),o=t(9),h=t(3),a=new s({Extends:o,initialize:function(c,f){o.call(this),this.manager=c,this.pad=f,this.id=f.id,this.index=f.index;for(var v=[],p=0;p<f.buttons.length;p++)v.push(new u(this,p));this.buttons=v;var g=[];for(p=0;p<f.axes.length;p++)g.push(new n(this,p));this.axes=g,this.vibration=f.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:m,this._LCRight=v[15]?v[15]:m,this._LCTop=v[12]?v[12]:m,this._LCBottom=v[13]?v[13]:m,this._RCLeft=v[2]?v[2]:m,this._RCRight=v[1]?v[1]:m,this._RCTop=v[3]?v[3]:m,this._RCBottom=v[0]?v[0]:m,this._FBLeftTop=v[4]?v[4]:m,this._FBLeftBottom=v[6]?v[6]:m,this._FBRightTop=v[5]?v[5]:m,this._FBRightBottom=v[7]?v[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(l){return this.axes[l].getValue()},setAxisThreshold:function(l){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=l},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(l){return this.buttons[l].value},isButtonDown:function(l){return this.buttons[l].pressed},update:function(l){if(!(l.timestamp<this._created)){var c,f=this.buttons,v=l.buttons,p=f.length;for(c=0;c<p;c++)f[c].update(v[c].value);var g=this.axes,m=l.axes;for(p=g.length,c=0;c<p;c++)g[c].update(m[c]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var l;for(l=0;l<this.buttons.length;l++)this.buttons[l].destroy();for(l=0;l<this.axes.length;l++)this.axes[l].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=a},function(e,d,t){var n=t(0),u=t(9),s=t(154),o=new n({Extends:u,initialize:function(a,l){u.call(this),this.plugin=a,this.keyCode=l,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,!!this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,!!this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,h))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=o},function(e,d,t){var n=t(0),u=t(154),s=t(2),o=t(514),h=t(516),a=new n({initialize:function(c,f,v){if(v===void 0&&(v={}),f.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var p=0;p<f.length;p++){var g=f[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(v,"resetOnWrongKey",!0),this.maxKeyDelay=s(v,"maxKeyDelay",0),this.resetOnMatch=s(v,"resetOnMatch",!1),this.deleteOnMatch=s(v,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=o(y,m);T&&(m.manager.emit(u.COMBO_MATCH,m,y),m.resetOnMatch?h(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=a},function(e,d,t){var n=t(515),u=function(s,o){if(o.matched)return!0;var h=!1,a=!1;if(s.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var l=o.timeLastMatched+o.maxKeyDelay;s.timeStamp<=l&&(a=!0,h=n(s,o))}else a=!0,h=n(s,o);return!a&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),h&&(o.timeLastMatched=s.timeStamp,o.matched=!0,o.timeMatched=s.timeStamp),h};e.exports=u},function(e,d){var t=function(n,u){return u.timeLastMatched=n.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};e.exports=t},function(e,d){var t=function(n){return n.current=n.keyCodes[0],n.index=0,n.timeLastMatched=0,n.matched=!1,n.timeMatched=0,n};e.exports=t},function(e,d,t){var n=t(240),u=function(s,o){var h=n(o,s.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",s.src,h.async,h.user,h.password),a.responseType=s.xhrSettings.responseType,a.timeout=h.timeout,h.headers)for(var l in h.headers)a.setRequestHeader(l,h.headers[l]);return h.header&&h.headerValue&&a.setRequestHeader(h.header,h.headerValue),h.requestedWith&&a.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&a.overrideMimeType(h.overrideMimeType),h.withCredentials&&(a.withCredentials=!0),a.onload=s.onLoad.bind(s,a),a.onerror=s.onError.bind(s,a),a.onprogress=s.onProgress.bind(s),a.send(),a};e.exports=u},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(519),l=t(7),c=new n({Extends:s,initialize:function(v,p,g,m,x){if(l(p)){var y=p;p=h(y,"key"),m=h(y,"xhrSettings"),x=h(y,"context",x)}var T={type:"audio",cache:v.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};s.call(this,v,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var f=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){f.data=v,f.onProcessComplete()},function(v){console.error("Error decoding audio: "+f.key+" - ",v?v.message:null),f.onProcessError()}),this.config.context=null}});c.create=function(f,v,p,g,m){var x=f.systems.game,y=x.config.audio,T=x.device.audio;l(v)&&(p=h(v,"url",[]),g=h(v,"config",{}));var C=c.getAudioURL(x,p);return C?T.webAudio&&!y.disableWebAudio?new c(f,v,C,m,x.sound.context):new a(f,v,C,g):null},c.getAudioURL=function(f,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=h(v[p],"url",v[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=h(v[p],"type",m?m[1]:"").toLowerCase(),f.device.audio[m])return{url:g,type:m}}return null},o.register("audio",function(f,v,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(f))for(var C=0;C<f.length;C++)T=c.create(this,f[C]),T&&this.addFile(T);else T=c.create(this,f,v,p,g),T&&this.addFile(T);return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(95),s=t(23),o=t(2),h=t(155),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g){if(a(v)){var m=v;v=o(m,"key"),g=o(m,"config",g)}var x={type:"audio",cache:f.cacheManager.audio,extension:p.type,key:v,url:p.url,config:g};s.call(this,f,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var f=this.data[c];f.oncanplaythrough=null,f.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var f=c.target;f.oncanplaythrough=null,f.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var f=0;f<c;f++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+f).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(f=0;f<this.data.length;f++)v=this.data[f],v.src=h(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=l},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g){var m="js";if(a(v)){var x=v;v=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};s.call(this,f,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,f,v));return this}),e.exports=l},function(e,d,t){var n=t(522),u=t(157),s=t(0),o=t(62),h=t(524),a=t(525),l=new s({initialize:function(f){this.world=f,this.scene=f.scene,this.sys=f.scene.sys},collider:function(c,f,v,p,g){return this.world.addCollider(c,f,v,p,g)},overlap:function(c,f,v,p,g){return this.world.addOverlap(c,f,v,p,g)},existing:function(c,f){var v=f?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(c,v),c},staticImage:function(c,f,v,p){var g=new n(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},image:function(c,f,v,p){var g=new n(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticSprite:function(c,f,v,p){var g=new u(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},sprite:function(c,f,v,p){var g=new u(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticGroup:function(c,f){return this.sys.updateList.add(new a(this.world,this.world.scene,c,f))},group:function(c,f){return this.sys.updateList.add(new h(this.world,this.world.scene,c,f))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=l},function(e,d,t){var n=t(0),u=t(243),s=t(125),o=new n({Extends:s,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function(a,l,c,f,v){s.call(this,a,l,c,f,v),this.body=null}});e.exports=o},function(e,d,t){var n=t(244),u=t(65),s=t(231),o=t(151),h=function(a,l,c,f,v,p){var g=n(a,l-f,c-f,2*f,2*f,v,p);if(g.length===0)return g;for(var m=new u(l,c,f),x=new u,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(x.setTo(C.center.x,C.center.y,C.halfWidth),s(m,x)&&y.push(C)):o(m,C)&&y.push(C)}return y};e.exports=h},function(e,d,t){var n=t(157),u=t(0),s=t(62),o=t(2),h=t(113),a=t(7),l=new u({Extends:h,initialize:function(f,v,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(a(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&a(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=f,g.classType=o(g,"classType",n),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(g,"collideWorldBounds",!1),setBoundsRectangle:o(g,"customBoundsRectangle",null),setAccelerationX:o(g,"accelerationX",0),setAccelerationY:o(g,"accelerationY",0),setAllowDrag:o(g,"allowDrag",!0),setAllowGravity:o(g,"allowGravity",!0),setAllowRotation:o(g,"allowRotation",!0),setBounceX:o(g,"bounceX",0),setBounceY:o(g,"bounceY",0),setDragX:o(g,"dragX",0),setDragY:o(g,"dragY",0),setEnable:o(g,"enable",!0),setGravityX:o(g,"gravityX",0),setGravityY:o(g,"gravityY",0),setFrictionX:o(g,"frictionX",0),setFrictionY:o(g,"frictionY",0),setMaxVelocityX:o(g,"maxVelocityX",1e4),setMaxVelocityY:o(g,"maxVelocityY",1e4),setVelocityX:o(g,"velocityX",0),setVelocityY:o(g,"velocityY",0),setAngularVelocity:o(g,"angularVelocity",0),setAngularAcceleration:o(g,"angularAcceleration",0),setAngularDrag:o(g,"angularDrag",0),setMass:o(g,"mass",1),setImmovable:o(g,"immovable",!1)},h.call(this,v,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,s.DYNAMIC_BODY);var f=c.body;for(var v in this.defaults)f[v](this.defaults[v])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,f,v){v===void 0&&(v=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(c+g*v,f+g*v);return this},setVelocityX:function(c,f){f===void 0&&(f=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.x=c+p*f;return this},setVelocityY:function(c,f){f===void 0&&(f=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.y=c+p*f;return this}});e.exports=l},function(e,d,t){var n=t(157),u=t(0),s=t(62),o=t(2),h=t(113),a=t(7),l=new u({Extends:h,initialize:function(f,v,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n}:a(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=o(g,"classType",n)):Array.isArray(p)&&a(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=o(m,"classType",n)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=f,this.physicsType=s.STATIC_BODY,h.call(this,v,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,s.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,f=0;f<c.length;f++)c[f].body.reset();return this}});e.exports=l},function(e,d,t){var n=t(350),u=t(527),s=t(18),o=t(0),h=t(528),a=t(62),l=t(50),c=t(9),f=t(245),v=t(124),p=t(354),g=t(355),m=t(246),x=t(247),y=t(529),T=t(6),C=t(14),S=t(211),E=t(530),M=t(10),R=t(531),L=t(532),O=t(537),F=t(538),D=t(149),B=t(539),b=t(248),V=t(25),X=t(3),K=t(68),J=new o({Extends:c,initialize:function(w,N){c.call(this),this.scene=w,this.bodies=new D,this.staticBodies=new D,this.pendingDestroy=new D,this.colliders=new S,this.gravity=new X(T(N,"gravity.x",0),T(N,"gravity.y",0)),this.bounds=new M(T(N,"x",0),T(N,"y",0),T(N,"width",w.sys.scale.width),T(N,"height",w.sys.scale.height)),this.checkCollision={up:T(N,"checkCollision.up",!0),down:T(N,"checkCollision.down",!0),left:T(N,"checkCollision.left",!0),right:T(N,"checkCollision.right",!0)},this.fps=T(N,"fps",60),this.fixedStep=T(N,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(N,"timeScale",1),this.OVERLAP_BIAS=T(N,"overlapBias",4),this.TILE_BIAS=T(N,"tileBias",16),this.forceX=T(N,"forceX",!1),this.isPaused=T(N,"isPaused",!1),this._total=0,this.drawDebug=T(N,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(N,"debugShowBody",!0),debugShowStaticBody:T(N,"debugShowStaticBody",!0),debugShowVelocity:T(N,"debugShowVelocity",!0),bodyDebugColor:T(N,"debugBodyColor",16711935),staticBodyDebugColor:T(N,"debugStaticBodyColor",255),velocityDebugColor:T(N,"debugVelocityColor",65280)},this.maxEntries=T(N,"maxEntries",16),this.useTree=T(N,"useTree",!0),this.tree=new R(this.maxEntries),this.staticTree=new R(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new V,this._tempMatrix2=new V,this.drawDebug&&this.createDebugGraphic()},enable:function(G,w){w===void 0&&(w=a.DYNAMIC_BODY),Array.isArray(G)||(G=[G]);for(var N=0;N<G.length;N++){var z=G[N];if(z.isParent)for(var U=z.getChildren(),W=0;W<U.length;W++){var H=U[W];H.isParent?this.enable(H,w):this.enableBody(H,w)}else this.enableBody(z,w)}},enableBody:function(G,w){return w===void 0&&(w=a.DYNAMIC_BODY),G.body||(w===a.DYNAMIC_BODY?G.body=new u(this,G):w===a.STATIC_BODY&&(G.body=new B(this,G))),this.add(G.body),G},add:function(G){return G.physicsType===a.DYNAMIC_BODY?this.bodies.set(G):G.physicsType===a.STATIC_BODY&&(this.staticBodies.set(G),this.staticTree.insert(G)),G.enable=!0,G},disable:function(G){Array.isArray(G)||(G=[G]);for(var w=0;w<G.length;w++){var N=G[w];if(N.isParent)for(var z=N.getChildren(),U=0;U<z.length;U++){var W=z[U];W.isParent?this.disable(W):this.disableBody(W.body)}else this.disableBody(N.body)}},disableBody:function(G){this.remove(G),G.enable=!1},remove:function(G){G.physicsType===a.DYNAMIC_BODY?(this.tree.remove(G),this.bodies.delete(G)):G.physicsType===a.STATIC_BODY&&(this.staticBodies.delete(G),this.staticTree.remove(G))},createDebugGraphic:function(){var G=this.scene.sys.add.graphics({x:0,y:0});return G.setDepth(Number.MAX_VALUE),this.debugGraphic=G,this.drawDebug=!0,G},setBounds:function(G,w,N,z,U,W,H,Z){return this.bounds.setTo(G,w,N,z),U!==void 0&&this.setBoundsCollision(U,W,H,Z),this},setBoundsCollision:function(G,w,N,z){return G===void 0&&(G=!0),w===void 0&&(w=!0),N===void 0&&(N=!0),z===void 0&&(z=!0),this.checkCollision.left=G,this.checkCollision.right=w,this.checkCollision.up=N,this.checkCollision.down=z,this},pause:function(){return this.isPaused=!0,this.emit(f.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(f.RESUME),this},addCollider:function(G,w,N,z,U){N===void 0&&(N=null),z===void 0&&(z=null),U===void 0&&(U=N);var W=new h(this,!1,G,w,N,z,U);return this.colliders.add(W),W},addOverlap:function(G,w,N,z,U){N===void 0&&(N=null),z===void 0&&(z=null),U===void 0&&(U=N);var W=new h(this,!0,G,w,N,z,U);return this.colliders.add(W),W},removeCollider:function(G){return this.colliders.remove(G),this},setFPS:function(G){return this.fps=G,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(G,w){if(!(this.isPaused||this.bodies.size===0)){var N,z=this._frameTime,U=this._frameTimeMS*this.timeScale;this._elapsed+=w;var W,H=this.bodies.entries,Z=this._elapsed>=U;for(this.fixedStep||(z=w*.001,Z=!0,this._elapsed=0),N=0;N<H.length;N++)W=H[N],W.enable&&W.preUpdate(Z,z);if(Z){this._elapsed-=U,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(H));var q=this.colliders.update();for(N=0;N<q.length;N++){var _=q[N];_.active&&_.update()}this.emit(f.WORLD_STEP,z)}for(;this._elapsed>=U;)this._elapsed-=U,this.step(z)}},step:function(G){var w,N,z=this.bodies.entries,U=z.length;for(w=0;w<U;w++)N=z[w],N.enable&&N.update(G);this.useTree&&(this.tree.clear(),this.tree.load(z));var W=this.colliders.update();for(w=0;w<W.length;w++){var H=W[w];H.active&&H.update()}this.emit(f.WORLD_STEP,G),this.stepsLastFrame++},postUpdate:function(){var G,w,N=this.bodies.entries,z=N.length,U=this.bodies,W=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,G=0;G<z;G++)w=N[G],w.enable&&w.postUpdate();if(this.drawDebug){var H=this.debugGraphic;for(H.clear(),G=0;G<z;G++)w=N[G],w.willDrawDebug()&&w.drawDebug(H);for(N=W.entries,z=N.length,G=0;G<z;G++)w=N[G],w.willDrawDebug()&&w.drawDebug(H)}var Z=this.pendingDestroy;if(Z.size>0){var q=this.tree,_=this.staticTree;for(N=Z.entries,z=N.length,G=0;G<z;G++)w=N[G],w.physicsType===a.DYNAMIC_BODY?(q.remove(w),U.delete(w)):w.physicsType===a.STATIC_BODY&&(_.remove(w),W.delete(w)),w.world=void 0,w.gameObject=void 0;Z.clear()}},updateMotion:function(G,w){G.allowRotation&&this.computeAngularVelocity(G,w),this.computeVelocity(G,w)},computeAngularVelocity:function(G,w){var N=G.angularVelocity,z=G.angularAcceleration,U=G.angularDrag,W=G.maxAngular;z?N+=z*w:G.allowDrag&&U&&(U*=w,p(N-U,0,.1)?N-=U:g(N+U,0,.1)?N+=U:N=0),N=s(N,-W,W);var H=N-G.angularVelocity;G.angularVelocity+=H,G.rotation+=G.angularVelocity*w},computeVelocity:function(G,w){var N=G.velocity.x,z=G.acceleration.x,U=G.drag.x,W=G.maxVelocity.x,H=G.velocity.y,Z=G.acceleration.y,q=G.drag.y,_=G.maxVelocity.y,nt=G.speed,rt=G.maxSpeed,at=G.allowDrag,vt=G.useDamping;G.allowGravity&&(N+=(this.gravity.x+G.gravity.x)*w,H+=(this.gravity.y+G.gravity.y)*w),z?N+=z*w:at&&U&&(vt?(U=Math.pow(U,w),N*=U,nt=Math.sqrt(N*N+H*H),v(nt,0,.001)&&(N=0)):(U*=w,p(N-U,0,.01)?N-=U:g(N+U,0,.01)?N+=U:N=0)),Z?H+=Z*w:at&&q&&(vt?(q=Math.pow(q,w),H*=q,nt=Math.sqrt(N*N+H*H),v(nt,0,.001)&&(H=0)):(q*=w,p(H-q,0,.01)?H-=q:g(H+q,0,.01)?H+=q:H=0)),N=s(N,-W,W),H=s(H,-_,_),G.velocity.set(N,H),rt>-1&&nt>rt&&(G.velocity.normalize().scale(rt),nt=rt),G.speed=nt},separate:function(G,w,N,z,U,W){if(!W&&!G.enable||!w.enable||G.checkCollision.none||w.checkCollision.none||!this.intersects(G,w)||N&&N.call(z,G.gameObject,w.gameObject)===!1)return!1;if(G.isCircle&&w.isCircle)return this.separateCircle(G,w,U);if(G.isCircle!==w.isCircle){var H=G.isCircle?w:G,Z=G.isCircle?G:w,q={x:H.x,y:H.y,right:H.right,bottom:H.bottom},_=Z.center;if((_.y<q.y||_.y>q.bottom)&&(_.x<q.x||_.x>q.right))return this.separateCircle(G,w,U)}var nt=!1,rt=!1;U?(nt=O(G,w,U,this.OVERLAP_BIAS),rt=F(G,w,U,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+G.gravity.y)<Math.abs(this.gravity.x+G.gravity.x)?(nt=O(G,w,U,this.OVERLAP_BIAS),this.intersects(G,w)&&(rt=F(G,w,U,this.OVERLAP_BIAS))):(rt=F(G,w,U,this.OVERLAP_BIAS),this.intersects(G,w)&&(nt=O(G,w,U,this.OVERLAP_BIAS)));var at=nt||rt;return at&&(U?(G.onOverlap||w.onOverlap)&&this.emit(f.OVERLAP,G.gameObject,w.gameObject,G,w):(G.onCollide||w.onCollide)&&this.emit(f.COLLIDE,G.gameObject,w.gameObject,G,w)),at},separateCircle:function(G,w,N,z){m(G,w,!1,z),x(G,w,!1,z);var U=0;if(G.isCircle!==w.isCircle){var W={x:w.isCircle?G.position.x:w.position.x,y:w.isCircle?G.position.y:w.position.y,right:w.isCircle?G.right:w.right,bottom:w.isCircle?G.bottom:w.bottom},H={x:G.isCircle?G.center.x:w.center.x,y:G.isCircle?G.center.y:w.center.y,radius:G.isCircle?G.halfWidth:w.halfWidth};H.y<W.y?H.x<W.x?U=l(H.x,H.y,W.x,W.y)-H.radius:H.x>W.right&&(U=l(H.x,H.y,W.right,W.y)-H.radius):H.y>W.bottom&&(H.x<W.x?U=l(H.x,H.y,W.x,W.bottom)-H.radius:H.x>W.right&&(U=l(H.x,H.y,W.right,W.bottom)-H.radius)),U*=-1}else U=G.halfWidth+w.halfWidth-l(G.center.x,G.center.y,w.center.x,w.center.y);if(G.overlapR=U,w.overlapR=U,N||U===0||G.immovable&&w.immovable||G.customSeparateX||w.customSeparateX)return U!==0&&(G.onOverlap||w.onOverlap)&&this.emit(f.OVERLAP,G.gameObject,w.gameObject,G,w),U!==0;var Z=G.center.x-w.center.x,q=G.center.y-w.center.y,_=Math.sqrt(Math.pow(Z,2)+Math.pow(q,2)),nt=(w.center.x-G.center.x)/_||0,rt=(w.center.y-G.center.y)/_||0,at=2*(G.velocity.x*nt+G.velocity.y*rt-w.velocity.x*nt-w.velocity.y*rt)/(G.mass+w.mass);(G.immovable||w.immovable)&&(at*=2),G.immovable||(G.velocity.x=G.velocity.x-at/G.mass*nt,G.velocity.y=G.velocity.y-at/G.mass*rt),w.immovable||(w.velocity.x=w.velocity.x+at/w.mass*nt,w.velocity.y=w.velocity.y+at/w.mass*rt),!G.immovable&&!w.immovable&&(U/=2);var vt=n(G.center,w.center),ut=(U+C.EPSILON)*Math.cos(vt),ct=(U+C.EPSILON)*Math.sin(vt);return G.immovable||(G.x-=ut,G.y-=ct,G.updateCenter()),w.immovable||(w.x+=ut,w.y+=ct,w.updateCenter()),G.velocity.x*=G.bounce.x,G.velocity.y*=G.bounce.y,w.velocity.x*=w.bounce.x,w.velocity.y*=w.bounce.y,(G.onCollide||w.onCollide)&&this.emit(f.COLLIDE,G.gameObject,w.gameObject,G,w),!0},intersects:function(G,w){return G===w?!1:!G.isCircle&&!w.isCircle?!(G.right<=w.position.x||G.bottom<=w.position.y||G.position.x>=w.right||G.position.y>=w.bottom):G.isCircle?w.isCircle?l(G.center.x,G.center.y,w.center.x,w.center.y)<=G.halfWidth+w.halfWidth:this.circleBodyIntersects(G,w):this.circleBodyIntersects(w,G)},circleBodyIntersects:function(G,w){var N=s(G.center.x,w.left,w.right),z=s(G.center.y,w.top,w.bottom),U=(G.center.x-N)*(G.center.x-N),W=(G.center.y-z)*(G.center.y-z);return U+W<=G.halfWidth*G.halfWidth},overlap:function(G,w,N,z,U){return N===void 0&&(N=null),z===void 0&&(z=null),U===void 0&&(U=N),this.collideObjects(G,w,N,z,U,!0)},collide:function(G,w,N,z,U){return N===void 0&&(N=null),z===void 0&&(z=null),U===void 0&&(U=N),this.collideObjects(G,w,N,z,U,!1)},collideObjects:function(G,w,N,z,U,W){var H,Z;G.isParent&&G.physicsType===void 0&&(G=G.children.entries),w&&w.isParent&&w.physicsType===void 0&&(w=w.children.entries);var q=Array.isArray(G),_=Array.isArray(w);if(this._total=0,!q&&!_)this.collideHandler(G,w,N,z,U,W);else if(!q&&_)for(H=0;H<w.length;H++)this.collideHandler(G,w[H],N,z,U,W);else if(q&&!_)if(w)for(H=0;H<G.length;H++)this.collideHandler(G[H],w,N,z,U,W);else for(H=0;H<G.length;H++){var nt=G[H];for(Z=H+1;Z<G.length;Z++)H!==Z&&this.collideHandler(nt,G[Z],N,z,U,W)}else for(H=0;H<G.length;H++)for(Z=0;Z<w.length;Z++)this.collideHandler(G[H],w[Z],N,z,U,W);return this._total>0},collideHandler:function(G,w,N,z,U,W){if(w===void 0&&G.isParent)return this.collideGroupVsGroup(G,G,N,z,U,W);if(!G||!w)return!1;if(G.body){if(w.body)return this.collideSpriteVsSprite(G,w,N,z,U,W);if(w.isParent)return this.collideSpriteVsGroup(G,w,N,z,U,W);if(w.isTilemap)return this.collideSpriteVsTilemapLayer(G,w,N,z,U,W)}else if(G.isParent){if(w.body)return this.collideSpriteVsGroup(w,G,N,z,U,W);if(w.isParent)return this.collideGroupVsGroup(G,w,N,z,U,W);if(w.isTilemap)return this.collideGroupVsTilemapLayer(G,w,N,z,U,W)}else if(G.isTilemap){if(w.body)return this.collideSpriteVsTilemapLayer(w,G,N,z,U,W);if(w.isParent)return this.collideGroupVsTilemapLayer(w,G,N,z,U,W)}},collideSpriteVsSprite:function(G,w,N,z,U,W){return!G.body||!w.body?!1:(this.separate(G.body,w.body,z,U,W)&&(N&&N.call(U,G,w),this._total++),!0)},collideSpriteVsGroup:function(G,w,N,z,U,W){var H=G.body;if(!(w.length===0||!H||!H.enable||H.checkCollision.none)){var Z,q,_;if(this.useTree||w.physicsType===a.STATIC_BODY){var nt=this.treeMinMax;nt.minX=H.left,nt.minY=H.top,nt.maxX=H.right,nt.maxY=H.bottom;var rt=w.physicsType===a.DYNAMIC_BODY?this.tree.search(nt):this.staticTree.search(nt);for(q=rt.length,Z=0;Z<q;Z++)_=rt[Z],!(H===_||!_.enable||_.checkCollision.none||!w.contains(_.gameObject))&&this.separate(H,_,z,U,W,!0)&&(N&&N.call(U,H.gameObject,_.gameObject),this._total++)}else{var at=w.getChildren(),vt=w.children.entries.indexOf(G);for(q=at.length,Z=0;Z<q;Z++)_=at[Z].body,!(!_||Z===vt||!_.enable)&&this.separate(H,_,z,U,W)&&(N&&N.call(U,H.gameObject,_.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(G,w,N,z,U,W){var H=G.getChildren();if(H.length===0)return!1;for(var Z=!1,q=0;q<H.length;q++)H[q].body&&this.collideSpriteVsTilemapLayer(H[q],w,N,z,U,W)&&(Z=!0);return Z},collideTiles:function(G,w,N,z,U){return!G.body.enable||w.length===0?!1:this.collideSpriteVsTilesHandler(G,w,N,z,U,!1,!1)},overlapTiles:function(G,w,N,z,U){return!G.body.enable||w.length===0?!1:this.collideSpriteVsTilesHandler(G,w,N,z,U,!0,!1)},collideSpriteVsTilemapLayer:function(G,w,N,z,U,W){var H=G.body;if(!H.enable||H.checkCollision.none)return!1;var Z=H.position.x,q=H.position.y,_=H.width,nt=H.height,rt=w.layer;if(rt.tileWidth>rt.baseTileWidth){var at=(rt.tileWidth-rt.baseTileWidth)*w.scaleX;Z-=at,_+=at}if(rt.tileHeight>rt.baseTileHeight){var vt=(rt.tileHeight-rt.baseTileHeight)*w.scaleY;nt+=vt}var ut=y(Z,q,_,nt,null,w.scene.cameras.main,w.layer);return ut.length===0?!1:this.collideSpriteVsTilesHandler(G,ut,N,z,U,W,!0)},collideSpriteVsTilesHandler:function(G,w,N,z,U,W,H){for(var Z=G.body,q,_={left:0,right:0,top:0,bottom:0},nt,rt=!1,at=0;at<w.length;at++){q=w[at],nt=q.tilemapLayer;var vt=nt.tileToWorldXY(q.x,q.y);_.left=vt.x,_.top=vt.y,q.baseHeight!==q.height&&(_.top-=(q.height-q.baseHeight)*nt.scaleY),_.right=_.left+q.width*nt.scaleX,_.bottom=_.top+q.height*nt.scaleY,b(_,Z)&&(!z||z.call(U,G,q))&&E(q,G)&&(W||L(at,Z,q,_,nt,this.TILE_BIAS,H))&&(this._total++,rt=!0,N&&N.call(U,G,q),W&&Z.onOverlap?this.emit(f.TILE_OVERLAP,G,q,Z):Z.onCollide&&this.emit(f.TILE_COLLIDE,G,q,Z))}return rt},collideGroupVsGroup:function(G,w,N,z,U,W){if(!(G.length===0||w.length===0))for(var H=G.getChildren(),Z=0;Z<H.length;Z++)this.collideSpriteVsGroup(H[Z],w,N,z,U,W)},wrap:function(G,w){G.body?this.wrapObject(G,w):G.getChildren?this.wrapArray(G.getChildren(),w):Array.isArray(G)?this.wrapArray(G,w):this.wrapObject(G,w)},wrapArray:function(G,w){for(var N=0;N<G.length;N++)this.wrapObject(G[N],w)},wrapObject:function(G,w){w===void 0&&(w=0),G.x=K(G.x,this.bounds.left-w,this.bounds.right+w),G.y=K(G.y,this.bounds.top-w,this.bounds.bottom+w)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=J},function(e,d,t){var n=t(0),u=t(62),s=t(245),o=t(196),h=t(10),a=t(57),l=t(3),c=new n({initialize:function(v,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=v,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var f=this.gameObject,v=this.transform;if(f.parentContainer){var p=f.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=p.tx,v.y=p.ty,v.rotation=o(p.rotation),v.scaleX=p.scaleX,v.scaleY=p.scaleY,v.displayOriginX=f.displayOriginX,v.displayOriginY=f.displayOriginY}else v.x=f.x,v.y=f.y,v.rotation=f.angle,v.scaleX=f.scaleX,v.scaleY=f.scaleY,v.displayOriginX=f.displayOriginX,v.displayOriginY=f.displayOriginY;var g=!1;if(this.syncBounds){var m=f.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(v.scaleX),y=Math.abs(v.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var f=this.transform;this.position.x=f.x+f.scaleX*(this.offset.x-f.displayOriginX),this.position.y=f.y+f.scaleY*(this.offset.y-f.displayOriginY),this.updateCenter()},resetFlags:function(f){f===void 0&&(f=!1);var v=this.wasTouching,p=this.touching,g=this.blocked;f?(v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1):(v.none=p.none,v.up=p.up,v.down=p.down,v.left=p.left,v.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(f,v){f&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),f&&this.update(v)},update:function(f){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,f);var v=this.velocity.x,p=this.velocity.y;this.newVelocity.set(v*f,p*f),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,v),this.speed=Math.sqrt(v*v+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var f=this.position.x-this.prevFrame.x,v=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&f!==0&&(f<0&&f<-p?f=-p:f>0&&f>p&&(f=p)),g!==0&&v!==0&&(v<0&&v<-g?v=-g:v>0&&v>g&&(v=g)),this.gameObject.x+=f,this.gameObject.y+=v}f<0?this.facing=u.FACING_LEFT:f>0&&(this.facing=u.FACING_RIGHT),v<0?this.facing=u.FACING_UP:v>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=f,this._ty=v},setBoundsRectangle:function(f){return this.customBoundsRectangle=f||this.world.bounds,this},checkWorldBounds:function(){var f=this.position,v=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return f.x<v.x&&p.left?(f.x=v.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>v.right&&p.right&&(f.x=v.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),f.y<v.y&&p.up?(f.y=v.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>v.bottom&&p.down&&(f.y=v.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(f,v){return v===void 0&&(v=f),this.offset.set(f,v),this},setSize:function(f,v,p){p===void 0&&(p=!0);var g=this.gameObject;if(!f&&g.frame&&(f=g.frame.realWidth),!v&&g.frame&&(v=g.frame.realHeight),this.sourceWidth=f,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-f)/2,x=(g.height-v)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(f,v,p){return v===void 0&&(v=this.offset.x),p===void 0&&(p=this.offset.y),f>0?(this.isCircle=!0,this.radius=f,this.sourceWidth=f*2,this.sourceHeight=f*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,p),this.updateCenter()):this.isCircle=!1,this},reset:function(f,v){this.stop();var p=this.gameObject;p.setPosition(f,v),p.getTopLeft?p.getTopLeft(this.position):this.position.set(f,v),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,v){if(!this.isCircle)return a(this,f,v);if(this.radius>0&&f>=this.left&&f<=this.right&&v>=this.top&&v<=this.bottom){var p=(this.center.x-f)*(this.center.x-f),g=(this.center.y-v)*(this.center.y-v);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(f){var v=this.position,p=v.x+this.halfWidth,g=v.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor),this.isCircle?f.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&f.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&f.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&f.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&f.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(f.lineStyle(f.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),f.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(f,v,p,g){f===void 0&&(f=!0),this.collideWorldBounds=f;var m=v!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new l),m&&(this.worldBounce.x=v),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(f,v){return this.velocity.set(f,v),f=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(f*f+v*v),this},setVelocityX:function(f){this.velocity.x=f;var v=f,p=this.velocity.y;return this.speed=Math.sqrt(v*v+p*p),this},setVelocityY:function(f){this.velocity.y=f;var v=this.velocity.x,p=f;return this.speed=Math.sqrt(v*v+p*p),this},setMaxVelocity:function(f,v){return this.maxVelocity.set(f,v),this},setMaxVelocityX:function(f){return this.maxVelocity.x=f,this},setMaxVelocityY:function(f){return this.maxVelocity.y=f,this},setMaxSpeed:function(f){return this.maxSpeed=f,this},setBounce:function(f,v){return this.bounce.set(f,v),this},setBounceX:function(f){return this.bounce.x=f,this},setBounceY:function(f){return this.bounce.y=f,this},setAcceleration:function(f,v){return this.acceleration.set(f,v),this},setAccelerationX:function(f){return this.acceleration.x=f,this},setAccelerationY:function(f){return this.acceleration.y=f,this},setAllowDrag:function(f){return f===void 0&&(f=!0),this.allowDrag=f,this},setAllowGravity:function(f){return f===void 0&&(f=!0),this.allowGravity=f,this},setAllowRotation:function(f){return f===void 0&&(f=!0),this.allowRotation=f,this},setDrag:function(f,v){return this.drag.set(f,v),this},setDamping:function(f){return this.useDamping=f,this},setDragX:function(f){return this.drag.x=f,this},setDragY:function(f){return this.drag.y=f,this},setGravity:function(f,v){return this.gravity.set(f,v),this},setGravityX:function(f){return this.gravity.x=f,this},setGravityY:function(f){return this.gravity.y=f,this},setFriction:function(f,v){return this.friction.set(f,v),this},setFrictionX:function(f){return this.friction.x=f,this},setFrictionY:function(f){return this.friction.y=f,this},setAngularVelocity:function(f){return this.angularVelocity=f,this},setAngularAcceleration:function(f){return this.angularAcceleration=f,this},setAngularDrag:function(f){return this.angularDrag=f,this},setMass:function(f){return this.mass=f,this},setImmovable:function(f){return f===void 0&&(f=!0),this.immovable=f,this},setEnable:function(f){return f===void 0&&(f=!0),this.enable=f,this},processX:function(f,v,p,g){this.x+=f,this.updateCenter(),v!==null&&(this.velocity.x=v);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(f,v,p,g){this.y+=f,this.updateCenter(),v!==null&&(this.velocity.y=v);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=c},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l,c,f,v){this.world=o,this.name="",this.active=!0,this.overlapOnly=h,this.object1=a,this.object2=l,this.collideCallback=c,this.processCallback=f,this.callbackContext=v},setName:function(s){return this.name=s,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=u},function(e,d,t){var n=t(26),u=t(3),s=new u,o=new u,h=function(a,l,c,f,v,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(a,l,!0,s,p,g);var x=s.x,y=s.y;m(a+c,l+f,!1,o,p,g);var T=Math.ceil(o.x),C=Math.ceil(o.y);return n(x,y,T-x,C-y,v,g)};e.exports=h},function(e,d){var t=function(n,u){return n.collisionCallback?!n.collisionCallback.call(n.collisionCallbackContext,u,n):n.layer.callbacks[n.index]?!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,u,n):!0};e.exports=t},function(e,d,t){var n=t(436);function u(C){var S=[".left",".top",".right",".bottom"];if(!(this instanceof u))return new u(C,S);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}u.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],M=this.toBBox;if(!x(C,S))return E;for(var R=[],L,O,F,D;S;){for(L=0,O=S.children.length;L<O;L++)F=S.children[L],D=S.leaf?M(F):F,x(C,D)&&(S.leaf?E.push(F):m(C,D)?this._all(F,E):R.push(F));S=R.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!x(C,S))return!1;for(var M=[],R,L,O,F;S;){for(R=0,L=S.children.length;R<L;R++)if(O=S.children[R],F=S.leaf?E(O):O,x(C,F)){if(S.leaf||m(C,F))return!0;M.push(O)}S=M.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var M=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var R=this.data;this.data=M,M=R}this._insert(M,this.data.height-M.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,M=this.toBBox(C),R=[],L=[],O,F,D,B;E||R.length;){if(E||(E=R.pop(),F=R[R.length-1],O=L.pop(),B=!0),E.leaf&&(D=s(C,E.children,S),D!==-1))return E.children.splice(D,1),R.push(E),this._condense(R),this;!B&&!E.leaf&&m(E,M)?(R.push(E),L.push(O),O=0,F=E,E=E.children[0]):F?(O++,E=F.children[O],B=!1):E=null}return this},toBBox:function(C){return C},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,M){var R=E-S+1,L=this._maxEntries,O;if(R<=L)return O=y(C.slice(S,E+1)),o(O,this.toBBox),O;M||(M=Math.ceil(Math.log(R)/Math.log(L)),L=Math.ceil(R/Math.pow(L,M-1))),O=y([]),O.leaf=!1,O.height=M;var F=Math.ceil(R/L),D=F*Math.ceil(Math.sqrt(L)),B,b,V,X;for(T(C,S,E,D,this.compareMinX),B=S;B<=E;B+=D)for(V=Math.min(B+D-1,E),T(C,B,V,F,this.compareMinY),b=B;b<=V;b+=F)X=Math.min(b+F-1,V),O.children.push(this._build(C,b,X,M-1));return o(O,this.toBBox),O},_chooseSubtree:function(C,S,E,M){for(var R,L,O,F,D,B,b,V;M.push(S),!(S.leaf||M.length-1===E);){for(b=V=Infinity,R=0,L=S.children.length;R<L;R++)O=S.children[R],D=f(O),B=p(C,O)-D,B<V?(V=B,b=D<b?D:b,F=O):B===V&&D<b&&(b=D,F=O);S=F||S.children[0]}return S},_insert:function(C,S,E){var M=this.toBBox,R=E?C:M(C),L=[],O=this._chooseSubtree(R,this.data,S,L);for(O.children.push(C),a(O,R);S>=0&&L[S].children.length>this._maxEntries;)this._split(L,S),S--;this._adjustParentBBoxes(R,L,S)},_split:function(C,S){var E=C[S],M=E.children.length,R=this._minEntries;this._chooseSplitAxis(E,R,M);var L=this._chooseSplitIndex(E,R,M),O=y(E.children.splice(L,E.children.length-L));O.height=E.height,O.leaf=E.leaf,o(E,this.toBBox),o(O,this.toBBox),S?C[S-1].children.push(O):this._splitRoot(E,O)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var M,R,L,O,F,D,B,b;for(D=B=Infinity,M=S;M<=E-S;M++)R=h(C,0,M,this.toBBox),L=h(C,M,E,this.toBBox),O=g(R,L),F=f(R)+f(L),O<D?(D=O,b=M,B=F<B?F:B):O===D&&F<B&&(B=F,b=M);return b},_chooseSplitAxis:function(C,S,E){var M=C.leaf?this.compareMinX:l,R=C.leaf?this.compareMinY:c,L=this._allDistMargin(C,S,E,M),O=this._allDistMargin(C,S,E,R);L<O&&C.children.sort(M)},_allDistMargin:function(C,S,E,M){C.children.sort(M);var R=this.toBBox,L=h(C,0,S,R),O=h(C,E-S,E,R),F=v(L)+v(O),D,B;for(D=S;D<E-S;D++)B=C.children[D],a(L,C.leaf?R(B):B),F+=v(L);for(D=E-S-1;D>=S;D--)B=C.children[D],a(O,C.leaf?R(B):B),F+=v(O);return F},_adjustParentBBoxes:function(C,S,E){for(var M=E;M>=0;M--)a(S[M],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():o(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function s(C,S,E){if(!E)return S.indexOf(C);for(var M=0;M<S.length;M++)if(E(C,S[M]))return M;return-1}function o(C,S){h(C,0,C.children.length,S,C)}function h(C,S,E,M,R){R||(R=y(null)),R.minX=Infinity,R.minY=Infinity,R.maxX=-Infinity,R.maxY=-Infinity;for(var L=S,O;L<E;L++)O=C.children[L],a(R,C.leaf?M(O):O);return R}function a(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function l(C,S){return C.minX-S.minX}function c(C,S){return C.minY-S.minY}function f(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function v(C){return C.maxX-C.minX+(C.maxY-C.minY)}function p(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),M=Math.max(C.minY,S.minY),R=Math.min(C.maxX,S.maxX),L=Math.min(C.maxY,S.maxY);return Math.max(0,R-E)*Math.max(0,L-M)}function m(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function x(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function T(C,S,E,M,R){for(var L=[S,E],O;L.length;)E=L.pop(),S=L.pop(),!(E-S<=M)&&(O=S+Math.ceil((E-S)/M/2)*M,n(C,O,S,E,R),L.push(S,O,O,E))}e.exports=u},function(e,d,t){var n=t(533),u=t(535),s=t(248),o=function(h,a,l,c,f,v,p){var g=c.left,m=c.top,x=c.right,y=c.bottom,T=l.faceLeft||l.faceRight,C=l.faceTop||l.faceBottom;if(p||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,M=0,R=1;if(a.deltaAbsX()>a.deltaAbsY()?M=-1:a.deltaAbsX()<a.deltaAbsY()&&(R=-1),a.deltaX()!==0&&a.deltaY()!==0&&T&&C&&(M=Math.min(Math.abs(a.position.x-x),Math.abs(a.right-g)),R=Math.min(Math.abs(a.position.y-y),Math.abs(a.bottom-m))),M<R){if(T&&(S=n(a,l,g,x,v,p),S!==0&&!s(c,a)))return!0;C&&(E=u(a,l,m,y,v,p))}else{if(C&&(E=u(a,l,m,y,v,p),E!==0&&!s(c,a)))return!0;T&&(S=n(a,l,g,x,v,p))}return S!==0||E!==0};e.exports=o},function(e,d,t){var n=t(534),u=function(s,o,h,a,l,c){var f=0,v=o.faceLeft,p=o.faceRight,g=o.collideLeft,m=o.collideRight;return c||(v=!0,p=!0,g=!0,m=!0),s.deltaX()<0&&m&&s.checkCollision.left?p&&s.x<a&&(f=s.x-a,f<-l&&(f=0)):s.deltaX()>0&&g&&s.checkCollision.right&&v&&s.right>h&&(f=s.right-h,f>l&&(f=0)),f!==0&&(s.customSeparateX?s.overlapX=f:n(s,f)),f};e.exports=u},function(e,d){var t=function(n,u){u<0?(n.blocked.none=!1,n.blocked.left=!0):u>0&&(n.blocked.none=!1,n.blocked.right=!0),n.position.x-=u,n.bounce.x===0?n.velocity.x=0:n.velocity.x=-n.velocity.x*n.bounce.x};e.exports=t},function(e,d,t){var n=t(536),u=function(s,o,h,a,l,c){var f=0,v=o.faceTop,p=o.faceBottom,g=o.collideUp,m=o.collideDown;return c||(v=!0,p=!0,g=!0,m=!0),s.deltaY()<0&&m&&s.checkCollision.up?p&&s.y<a&&(f=s.y-a,f<-l&&(f=0)):s.deltaY()>0&&g&&s.checkCollision.down&&v&&s.bottom>h&&(f=s.bottom-h,f>l&&(f=0)),f!==0&&(s.customSeparateY?s.overlapY=f:n(s,f)),f};e.exports=u},function(e,d){var t=function(n,u){u<0?(n.blocked.none=!1,n.blocked.up=!0):u>0&&(n.blocked.none=!1,n.blocked.down=!0),n.position.y-=u,n.bounce.y===0?n.velocity.y=0:n.velocity.y=-n.velocity.y*n.bounce.y};e.exports=t},function(e,d,t){var n=t(246),u=t(1389),s=function(o,h,a,l){var c=n(o,h,a,l),f=o.immovable,v=h.immovable;if(a||c===0||f&&v||o.customSeparateX||h.customSeparateX)return c!==0||o.embedded&&h.embedded;var p=u.Set(o,h,c);return!f&&!v?p>0?!0:u.Check():(f?u.RunImmovableBody1(p):v&&u.RunImmovableBody2(p),!0)};e.exports=s},function(e,d,t){var n=t(247),u=t(1390),s=function(o,h,a,l){var c=n(o,h,a,l),f=o.immovable,v=h.immovable;if(a||c===0||f&&v||o.customSeparateY||h.customSeparateY)return c!==0||o.embedded&&h.embedded;var p=u.Set(o,h,c);return!f&&!v?p>0?!0:u.Check():(f?u.RunImmovableBody1(p):v&&u.RunImmovableBody2(p),!0)};e.exports=s},function(e,d,t){var n=t(66),u=t(0),s=t(62),o=t(57),h=t(3),a=new u({initialize:function(c,f){var v=f.displayWidth?f.displayWidth:64,p=f.displayHeight?f.displayHeight:64;this.world=c,this.gameObject=f,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(f.x-v*f.originX,f.y-p*f.originY),this.width=v,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(l,c){return l&&l!==this.gameObject&&(this.gameObject.body=null,l.body=this,this.gameObject=l),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var l=this.gameObject;return l.getTopLeft(this.position),this.width=l.displayWidth,this.height=l.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(l,c){return c===void 0&&(c=l),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(l,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(l,c,f){f===void 0&&(f=!0);var v=this.gameObject;if(!l&&v.frame&&(l=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight),this.world.staticTree.remove(this),this.width=l,this.height=c,this.halfWidth=Math.floor(l/2),this.halfHeight=Math.floor(c/2),f&&v.getCenter){var p=v.displayWidth/2,g=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(l,c,f){return c===void 0&&(c=this.offset.x),f===void 0&&(f=this.offset.y),l>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=l,this.width=l*2,this.height=l*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,f),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(l,c){var f=this.gameObject;l===void 0&&(l=f.x),c===void 0&&(c=f.y),this.world.staticTree.remove(this),f.setPosition(l,c),f.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,c){return this.isCircle?n(this,l,c):o(this,l,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(l){var c=this.position,f=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?l.strokeCircle(f,v,this.width/2):l.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(l){return l<=0&&(l=.1),this.mass=l,this},x:{get:function(){return this.position.x},set:function(l){this.world.staticTree.remove(this),this.position.x=l,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(l){this.world.staticTree.remove(this),this.position.y=l,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=a},function(e,d,t){var n=t(0),u=new n({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=u},function(e,d,t){var n=t(3),u=new n,s=function(o,h,a,l){var c=a.tilemapLayer,f=c.cullPaddingX,v=c.cullPaddingY,p=c.tilemap.tileToWorldXY(o,h,u,l,c);return p.x>l.worldView.x+c.scaleX*a.tileWidth*(-f-.5)&&p.x<l.worldView.right+c.scaleX*a.tileWidth*(f-.5)&&p.y>l.worldView.y+c.scaleY*a.tileHeight*(-v-1)&&p.y<l.worldView.bottom+c.scaleY*a.tileHeight*(v-.5)};e.exports=s},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c,f){for(var v=n(h,a,l,c,null,f),p=0;p<v.length;p++)v[p]&&v[p].index===s&&(v[p].index=o)};e.exports=u},function(e,d,t){var n=t(10),u=t(139),s=t(76),o=new n,h=function(a,l){var c=a.tilemapLayer.tilemap,f=a.tilemapLayer,v=Math.floor(c.tileWidth*f.scaleX),p=Math.floor(c.tileHeight*f.scaleY),g=s(l.worldView.x-f.x,v,0,!0)-f.cullPaddingX,m=u(l.worldView.right-f.x,v,0,!0)+f.cullPaddingX,x=s(l.worldView.y-f.y,p,0,!0)-f.cullPaddingY,y=u(l.worldView.bottom-f.y,p,0,!0)+f.cullPaddingY;return o.setTo(g,x,m-g,y-x)};e.exports=h},function(e,d,t){var n=t(543),u=t(159),s=function(o,h,a,l){a===void 0&&(a=[]),l===void 0&&(l=0),a.length=0;var c=o.tilemapLayer,f=n(o,h);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(f.left=0,f.right=o.width,f.top=0,f.bottom=o.height),u(o,f,l,a),a};e.exports=s},function(e,d,t){var n=t(546),u=t(159),s=function(o,h,a,l){a===void 0&&(a=[]),l===void 0&&(l=0),a.length=0;var c=o.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var f=n(o,h);u(o,f,l,a)}return a};e.exports=s},function(e,d,t){var n=t(139),u=t(76),s=function(o,h){var a=o.tilemapLayer.tilemap,l=o.tilemapLayer,c=Math.floor(a.tileWidth*l.scaleX),f=Math.floor(a.tileHeight*l.scaleY),v=o.hexSideLength,p=(f-v)/2+v,g=u(h.worldView.x-l.x,c,0,!0)-l.cullPaddingX,m=n(h.worldView.right-l.x,c,0,!0)+l.cullPaddingX,x=u(h.worldView.y-l.y,p,0,!0)-l.cullPaddingY,y=n(h.worldView.bottom-l.y,p,0,!0)+l.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};e.exports=s},function(e,d,t){var n=t(541),u=function(s,o,h,a){h===void 0&&(h=[]),a===void 0&&(a=0),h.length=0;var l=s.tilemapLayer,c=s.data,f=s.width,v=s.height,p=0,g=f,m=0,x=v;if(!l.skipCull){var y,T,C;if(a===0){for(T=m;T<x;T++)for(y=p;c[T]&&y<g;y++)if(n(y,T,s,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;h.push(C)}}else if(a===1){for(T=m;T<x;T++)for(y=g;c[T]&&y>=p;y--)if(n(y,T,s,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;h.push(C)}}else if(a===2){for(T=x;T>=m;T--)for(y=p;c[T]&&y<g;y++)if(n(y,T,s,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;h.push(C)}}else if(a===3){for(T=x;T>=m;T--)for(y=g;c[T]&&y>=p;y--)if(n(y,T,s,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;h.push(C)}}}return l.tilesDrawn=h.length,l.tilesTotal=f*v,h};e.exports=u},function(e,d,t){var n=t(549),u=t(159),s=function(o,h,a,l){a===void 0&&(a=[]),l===void 0&&(l=0),a.length=0;var c=o.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var f=n(o,h);u(o,f,l,a)}return a};e.exports=s},function(e,d,t){var n=t(139),u=t(76),s=function(o,h){var a=o.tilemapLayer.tilemap,l=o.tilemapLayer,c=Math.floor(a.tileWidth*l.scaleX),f=Math.floor(a.tileHeight*l.scaleY),v=u(h.worldView.x-l.x,c,0,!0)-l.cullPaddingX,p=n(h.worldView.right-l.x,c,0,!0)+l.cullPaddingX,g=u(h.worldView.y-l.y,f/2,0,!0)-l.cullPaddingY,m=n(h.worldView.bottom-l.y,f/2,0,!0)+l.cullPaddingY;return{left:v,right:p,top:g,bottom:m}};e.exports=s},function(e,d,t){var n=t(3),u=function(s,o,h,a,l){h||(h=new n);var c=l.baseTileWidth,f=l.baseTileHeight,v=l.tilemapLayer,p=0,g=0;v&&(a||(a=v.scene.cameras.main),p=v.x+a.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+a.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var m=l.hexSideLength,x=(f-m)/2+m,y=p+s*c+o%2*(c/2),T=g+o*x;return h.set(y,T)};e.exports=u},function(e,d,t){var n=t(3),u=function(s,o,h,a,l){h||(h=new n);var c=l.baseTileWidth,f=l.baseTileHeight,v=l.tilemapLayer,p=0,g=0;v&&(a||(a=v.scene.cameras.main),p=v.x+a.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+a.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var m=p+(s-o)*(c/2),x=g+(s+o)*(f/2);return h.set(m,x)};e.exports=u},function(e,d,t){var n=t(3),u=function(s,o,h,a,l){h||(h=new n);var c=l.baseTileWidth,f=l.baseTileHeight,v=l.tilemapLayer,p=0,g=0;v&&(a||(a=v.scene.cameras.main),p=v.x+a.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+a.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var m=p+s*c+o%2*(c/2),x=g+o*(f/2);return h.set(m,x)};e.exports=u},function(e,d,t){var n=t(253),u=t(254),s=t(3),o=function(h,a,l,c,f){return l||(l=new s(0,0)),l.x=n(h,c,f),l.y=u(a,c,f),l};e.exports=o},function(e,d){var t=function(n,u,s){var o=s.baseTileHeight,h=s.tilemapLayer,a=0;h&&(u===void 0&&(u=h.scene.cameras.main),a=h.y+u.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var l=h.tilemap.hexSideLength,c=(o-l)/2+l;return a+n*c};e.exports=t},function(e,d){var t=function(n,u,s){var o=s.baseTileHeight,h=s.tilemapLayer,a=0;return h&&(u===void 0&&(u=h.scene.cameras.main),a=h.y+u.scrollY*(1-h.scrollFactorY),o*=h.scaleY),a+n*(o/2)};e.exports=t},function(e,d,t){var n=t(3),u=function(s,o,h,a,l,c){a||(a=new n);var f=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(l||(l=p.scene.cameras.main),o=o-(p.y+l.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,s=s-(p.x+l.scrollX*(1-p.scrollFactorX)),f*=p.scaleX);var g=c.hexSideLength,m=(v-g)/2+g,x=h?Math.floor(o/m):o/m,y=h?Math.floor((s-x%2*.5*f)/f):(s-x%2*.5*f)/f;return a.set(y,x)};e.exports=u},function(e,d,t){var n=t(3),u=function(s,o,h,a,l,c){a||(a=new n);var f=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(l||(l=p.scene.cameras.main),o=o-(p.y+l.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,s=s-(p.x+l.scrollX*(1-p.scrollFactorX)),f*=p.scaleX);var g=h?Math.floor((s/(f/2)+o/(v/2))/2):(s/(f/2)+o/(v/2))/2,m=h?Math.floor((o/(v/2)-s/(f/2))/2):(o/(v/2)-s/(f/2))/2;return a.set(g,m)};e.exports=u},function(e,d,t){var n=t(3),u=function(s,o,h,a,l,c){a||(a=new n);var f=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(l||(l=p.scene.cameras.main),o=o-(p.y+l.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,s=s-(p.x+l.scrollX*(1-p.scrollFactorX)),f*=p.scaleX);var g=h?Math.floor(o/(v/2)):o/(v/2),m=h?Math.floor((s+g%2*.5*f)/f):(s+g%2*.5*f)/f;return a.set(m,g)};e.exports=u},function(e,d,t){var n=t(255),u=t(256),s=t(3),o=function(h,a,l,c,f,v){return l===void 0&&(l=!0),c||(c=new s(0,0)),c.x=n(h,l,f,v),c.y=u(a,l,f,v),c};e.exports=o},function(e,d){var t=function(n,u,s,o){var h=o.baseTileHeight,a=o.tilemapLayer;a&&(s||(s=a.scene.cameras.main),n=n-(a.y+s.scrollY*(1-a.scrollFactorY)),h*=a.scaleY);var l=o.hexSideLength,c=(h-l)/2+l;return u?Math.floor(n/c):n/c};e.exports=t},function(e,d){var t=function(n,u,s,o){var h=o.baseTileHeight,a=o.tilemapLayer;return a&&(s||(s=a.scene.cameras.main),n=n-(a.y+s.scrollY*(1-a.scrollFactorY)),h*=a.scaleY),u?Math.floor(n/(h/2)):n/(h/2)};e.exports=t},function(e,d,t){var n=t(119),u=function(s,o,h){if(n(s,o,h)){var a=h.data[o][s];return a!==null&&a.index>-1}else return!1};e.exports=u},function(e,d,t){var n=t(85),u=t(119),s=t(252),o=function(h,a,l,c,f){if(l===void 0&&(l=!0),c===void 0&&(c=!0),!u(h,a,f))return null;var v=f.data[a][h];if(v)f.data[a][h]=l?null:new n(f,-1,h,a,f.tileWidth,f.tileHeight);else return null;return c&&v&&v.collides&&s(h,a,f),v};e.exports=o},function(e,d,t){var n=t(40),u=t(259),s=t(565),o=t(566),h=t(577),a=function(l,c,f,v,p,g){var m;switch(c){case n.ARRAY_2D:m=u(l,f,v,p,g);break;case n.CSV:m=s(l,f,v,p,g);break;case n.TILED_JSON:m=o(l,f,g);break;case n.WELTMEISTER:m=h(l,f,g);break;default:console.warn("Unrecognized tilemap data format: "+c),m=null}return m};e.exports=a},function(e,d,t){var n=t(40),u=t(259),s=function(o,h,a,l,c){var f=h.trim().split(`
`).map(function(p){return p.split(",")}),v=u(o,f,a,l,c);return v.format=n.CSV,v};e.exports=s},function(e,d,t){var n=t(567),u=t(568),s=t(29),o=t(40),h=t(258),a=t(121),l=t(569),c=t(570),f=t(573),v=t(575),p=function(g,m,x){var y=new a({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:h(m.orientation),format:o.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===s.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=f(m,x),y.images=l(m);var T=v(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=c(m),y.tiles=u(y),n(y),y};e.exports=p},function(e,d,t){var n=t(17),u=function(s){for(var o,h,a,l,c,f=0;f<s.layers.length;f++){o=s.layers[f],l=null;for(var v=0;v<o.data.length;v++){c=o.data[v];for(var p=0;p<c.length;p++)h=c[p],!(h===null||h.index<0)&&(a=s.tiles[h.index][2],l=s.tilesets[a],h.width=l.tileWidth,h.height=l.tileHeight,l.tileProperties&&l.tileProperties[h.index-l.firstgid]&&(h.properties=n(h.properties,l.tileProperties[h.index-l.firstgid])))}}};e.exports=u},function(e,d,t){var n=t(122),u=function(s){var o,h,a=[];for(o=0;o<s.imageCollections.length;o++)for(var l=s.imageCollections[o],c=l.images,f=0;f<c.length;f++){var v=c[f];h=new n(v.image,v.gid,l.imageWidth,l.imageHeight,0,0),h.updateTileData(l.imageWidth,l.imageHeight),s.tilesets.push(h)}for(o=0;o<s.tilesets.length;o++){h=s.tilesets[o];for(var p=h.tileMargin,g=h.tileMargin,m=0,x=0,y=0,T=h.firstgid;T<h.firstgid+h.total&&(a[T]=[p,g,o],p+=h.tileWidth+h.tileSpacing,m++,!(m===h.total||(x++,x===h.columns&&(p=h.tileMargin,g+=h.tileHeight+h.tileSpacing,x=0,y++,y===h.rows))));T++);}return a};e.exports=u},function(e,d,t){var n=t(2),u=t(161),s=function(o){for(var h=[],a=[],l=u(o);l.i<l.layers.length||a.length>0;){if(l.i>=l.layers.length){if(a.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=a.pop();continue}var c=l.layers[l.i];if(l.i++,c.type!=="imagelayer"){if(c.type==="group"){var f=u(o,c,l);a.push(l),l=f}continue}var v=n(c,"offsetx",0)+n(c,"startx",0),p=n(c,"offsety",0)+n(c,"starty",0);h.push({name:l.name+c.name,image:c.image,x:l.x+v+c.x,y:l.y+p+c.y,alpha:l.opacity*c.opacity,visible:l.visible&&c.visible,properties:n(c,"properties",{})})}return h};e.exports=s},function(e,d,t){var n=t(2),u=t(260),s=t(572),o=t(161),h=function(a){for(var l=[],c=[],f=o(a);f.i<f.layers.length||c.length>0;){if(f.i>=f.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=c.pop();continue}var v=f.layers[f.i];if(f.i++,v.opacity*=f.opacity,v.visible=f.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var p=o(a,v,f);c.push(f),f=p}continue}v.name=f.name+v.name;for(var g=f.x+n(v,"startx",0)+n(v,"offsetx",0),m=f.y+n(v,"starty",0)+n(v,"offsety",0),x=[],y=0;y<v.objects.length;y++){var T=u(v.objects[y],g,m);x.push(T)}var C=new s(v);C.objects=x,l.push(C)}return l};e.exports=h},function(e,d,t){var n=t(126),u=function(s,o){for(var h={},a=0;a<o.length;a++){var l=o[a];n(s,l)&&(h[l]=s[l])}return h};e.exports=u},function(e,d,t){var n=t(0),u=t(2),s=new n({initialize:function(h){h===void 0&&(h={}),this.name=u(h,"name","object layer"),this.opacity=u(h,"opacity",1),this.properties=u(h,"properties",{}),this.propertyTypes=u(h,"propertytypes",{}),this.type=u(h,"type","objectgroup"),this.visible=u(h,"visible",!0),this.objects=u(h,"objects",[])}});e.exports=s},function(e,d,t){var n=t(574),u=t(29),s=t(161),o=t(258),h=t(2),a=t(120),l=t(261),c=t(85),f=function(v,p){for(var g=h(v,"infinite",!1),m=[],x=[],y=s(v);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=s(v,T,y);x.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=n(T.chunks[S].data);T.data&&(T.data=n(T.data)),delete T.encoding}var E,M,R,L,O=[],F=0;if(g){var D=h(T,"startx",0)+T.x,B=h(T,"starty",0)+T.y;E=new a({name:y.name+T.name,x:y.x+h(T,"offsetx",0)+D*v.tilewidth,y:y.y+h(T,"offsety",0)+B*v.tileheight,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:h(T,"properties",[]),orientation:o(v.orientation)}),E.orientation===u.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var b=0;b<T.height;b++){O.push([null]);for(var V=0;V<T.width;V++)O[b][V]=null}for(b=0,Z=T.chunks.length;b<Z;b++)for(var X=T.chunks[b],K=X.x-D,J=X.y-B,G=0,w=0,N=X.data.length;w<N;w++){var z=F+K,U=G+J;M=l(X.data[w]),M.gid>0?(R=new c(E,M.gid,z,U,v.tilewidth,v.tileheight),R.rotation=M.rotation,R.flipX=M.flipped,O[U][z]=R):(L=p?null:new c(E,-1,z,U,v.tilewidth,v.tileheight),O[U][z]=L),F++,F===X.width&&(G++,F=0)}}else{E=new a({name:y.name+T.name,x:y.x+h(T,"offsetx",0)+T.x,y:y.y+h(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:h(T,"properties",[]),orientation:o(v.orientation)}),E.orientation===u.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var W=[],H=0,Z=T.data.length;H<Z;H++)M=l(T.data[H]),M.gid>0?(R=new c(E,M.gid,F,O.length,v.tilewidth,v.tileheight),R.rotation=M.rotation,R.flipX=M.flipped,W.push(R)):(L=p?null:new c(E,-1,F,O.length,v.tilewidth,v.tileheight),W.push(L)),F++,F===T.width&&(O.push(W),F=0,W=[])}E.data=O,m.push(E)}return m};e.exports=f},function(e,d){var t=function(n){for(var u=window.atob(n),s=u.length,o=new Array(s/4),h=0;h<s;h+=4)o[h/4]=(u.charCodeAt(h)|u.charCodeAt(h+1)<<8|u.charCodeAt(h+2)<<16|u.charCodeAt(h+3)<<24)>>>0;return o};e.exports=t},function(e,d,t){var n=t(122),u=t(576),s=t(260),o=t(1453),h=function(a){for(var l=[],c=[],f=null,v,p=0;p<a.tilesets.length;p++){var g=a.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new n(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(a.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(b){S[b.name]=b.value}),y[C.id]=S}if(C.objectgroup&&((x[C.id]||(x[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(b){return s(b)});x[C.id].objectgroup.objects=E}C.animation&&((x[C.id]||(x[C.id]={})).animation=C.animation),C.type&&((x[C.id]||(x[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},o(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(v in m.tileData){var M=m.tileData[v].objectgroup;if(M&&M.objects){var R=M.objects.map(function(b){return s(b)});m.tileData[v].objectgroup.objects=R}}}m.updateTileData(g.imagewidth,g.imageheight),l.push(m)}else{var L=new u(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),O=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var F=C.image,D=parseInt(C.id,10),B=g.firstgid+D;L.addImage(B,F),O=Math.max(D,O)}L.maxId=O,c.push(L)}f&&(f.lastgid=g.firstgid-1),f=g}return{tilesets:l,imageCollections:c}};e.exports=h},function(e,d,t){var n=t(0),u=new n({initialize:function(o,h,a,l,c,f,v){(a===void 0||a<=0)&&(a=32),(l===void 0||l<=0)&&(l=32),c===void 0&&(c=0),f===void 0&&(f=0),this.name=o,this.firstgid=h|0,this.imageWidth=a|0,this.imageHeight=l|0,this.imageMargin=c|0,this.imageSpacing=f|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(s){return s>=this.firstgid&&s<this.firstgid+this.total},addImage:function(s,o){return this.images.push({gid:s,image:o}),this.total++,this}});e.exports=u},function(e,d,t){var n=t(40),u=t(121),s=t(578),o=t(579),h=function(a,l,c){if(l.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+a),null;for(var f=0,v=0,p=0;p<l.layer.length;p++)l.layer[p].width>f&&(f=l.layer[p].width),l.layer[p].height>v&&(v=l.layer[p].height);var g=new u({width:f,height:v,name:a,tileWidth:l.layer[0].tilesize,tileHeight:l.layer[0].tilesize,format:n.WELTMEISTER});return g.layers=s(l,c),g.tilesets=o(l),g};e.exports=h},function(e,d,t){var n=t(120),u=t(85),s=function(o,h){for(var a=[],l=0;l<o.layer.length;l++){for(var c=o.layer[l],f=new n({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),v=[],p=[],g=0;g<c.data.length;g++){for(var m=0;m<c.data[g].length;m++){var x=c.data[g][m]-1,y;x>-1?y=new u(f,x,m,g,c.tilesize,c.tilesize):y=h?null:new u(f,-1,m,g,c.tilesize,c.tilesize),v.push(y)}p.push(v),v=[]}f.data=p,a.push(f)}return a};e.exports=s},function(e,d,t){var n=t(122),u=function(s){for(var o=[],h=[],a=0;a<s.layer.length;a++){var l=s.layer[a],c=l.tilesetName;c!==""&&h.indexOf(c)===-1&&(h.push(c),o.push(new n(c,0,l.tilesize,l.tilesize,0,0)))}return o};e.exports=u},function(e,d,t){var n=t(0),u=t(36),s=t(40),o=t(2),h=t(120),a=t(29),l=t(362),c=t(74),f=t(73),v=t(85),p=t(251),g=t(581),m=t(122),x=new n({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(S),WorldToTileX:p.GetWorldToTileXFunction(S),WorldToTileY:p.GetWorldToTileYFunction(S),TileToWorldXY:p.GetTileToWorldXYFunction(S),TileToWorldX:p.GetTileToWorldXFunction(S),TileToWorldY:p.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,M,R,L){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,M,R,L)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,M,R){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var L=this.scene.sys.textures.get(T),O=this.getTilesetIndex(y);if(O===null&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var F=this.tilesets[O];return F?(F.setTileSize(C,S),F.setSpacing(E,M),F.setImage(L),F):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),M===void 0&&(M=0),R===void 0&&(R=0),F=new m(y,R,C,S,E,M),F.setImage(L),this.tilesets.push(F),F)},copy:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L!==null?(p.Copy(y,T,C,S,E,M,R,L),this):null},createBlankLayer:function(y,T,C,S,E,M,R,L){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),M===void 0&&(M=this.height),R===void 0&&(R=this.tileWidth),L===void 0&&(L=this.tileHeight);var O=this.getLayerIndex(y);if(O!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var F=new h({name:y,tileWidth:R,tileHeight:L,width:E,height:M,orientation:this.orientation}),D,B=0;B<M;B++){D=[];for(var b=0;b<E;b++)D.push(new v(F,-1,b,B,R,L,this.tileWidth,this.tileHeight));F.data.push(D)}this.layers.push(F),this.currentLayerIndex=this.layers.length-1;var V=new g(this.scene,this,this.currentLayerIndex,T,C,S);return V.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(V),V},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var M=this.layers[E];if(M.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=M.x),S===void 0&&(S=M.y);var R=new g(this.scene,this,E,T,C,S);return R.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(R),R},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,M=0;M<T.length;M++){for(var R=T[M],L=o(R,"id",null),O=o(R,"gid",null),F=o(R,"name",null),D,B=[],b=0;b<E.length;b++)D=E[b],(L===null&&O===null&&F===null||L!==null&&D.id===L||O!==null&&D.gid===O||F!==null&&D.name===F)&&B.push(D);for(var V=o(R,"classType",f),X=o(R,"scene",this.scene),K=o(R,"container",null),J=o(R,"key",null),G=o(R,"frame",null),w=0;w<B.length;w++){D=B[w];var N=new V(X);N.setName(D.name),N.setPosition(D.x,D.y),N.setTexture(J,G),D.width&&(N.displayWidth=D.width),D.height&&(N.displayHeight=D.height);var z={x:N.originX*D.width,y:(N.originY-1)*D.height};if(D.rotation){var U=u(D.rotation);l(z,U),N.rotation=U}if(N.x+=z.x,N.y+=z.y,(D.flippedHorizontal!==void 0||D.flippedVertical!==void 0)&&N.setFlip(D.flippedHorizontal,D.flippedVertical),D.visible||(N.visible=!1),Array.isArray(D.properties))D.properties.forEach(function(H){var Z=H.name;N[Z]!==void 0?N[Z]=H.value:N.setData(Z,H.value)});else for(var W in D.properties)N[W]!==void 0?N[W]=D.properties[W]:N.setData(W,D.properties[W]);K?K.add(N):X.add.existing(N),C.push(N)}}return C},createFromTiles:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.CreateFromTiles(y,T,C,S,E,M)},fill:function(y,T,C,S,E,M,R){return M===void 0&&(M=!0),R=this.getLayer(R),R===null?null:(p.Fill(y,T,C,S,E,M,R),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L===null?null:p.FilterTiles(y,T,C,S,E,M,R,L)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L===null?null:p.FindTile(y,T,C,S,E,M,R,L)},forEachTile:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L===null?null:(p.ForEachTile(y,T,C,S,E,M,R,L),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithin(y,T,C,S,E,M)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:p.GetTilesWithinWorldXY(y,T,C,S,E,M,R)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:p.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,M){return S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.PutTileAtWorldXY(y,T,C,S,E,M)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.Randomize(y,T,C,S,E,M),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(p.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){c(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),c(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var M=y[E];S.push(this.removeTileAt(M.x,M.y,!0,C,M.tilemapLayer)),T>-1&&this.putTileAt(T,M.x,M.y,C,M.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,M){return C===void 0&&(C=!0),S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.RemoveTileAtWorldXY(y,T,C,S,E,M)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===a.ORTHOGONAL&&p.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)p.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:(p.ReplaceByIndex(y,T,C,S,E,M,R),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(p.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(p.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:(p.SetTileLocationCallback(y,T,C,S,E,M,R),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,M=this.layers[C].height,R=0;R<M;R++)for(var L=0;L<E;L++){var O=S[R][L];O!==null&&O.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,M=C.height,R=0;R<M;R++)for(var L=0;L<E;L++){var O=S[R][L];O!==null&&O.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:(p.SwapByIndex(y,T,C,S,E,M,R),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.WeightedRandomize(T,C,S,E,y,M),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileXY(y,T,C,S,E,M)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,d,t){var n=t(0),u=t(11),s=t(15),o=t(251),h=t(1456),a=new n({Extends:s,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Origin,u.Pipeline,u.Transform,u.Visible,u.ScrollFactor,h],initialize:function(c,f,v,p,g,m){s.call(this,c,"TilemapLayer"),this.isTilemap=!0,this.tilemap=f,this.layerIndex=v,this.layer=f.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(f.tileWidth*this.layer.width,f.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(l){var c=[],f=[],v=this.tilemap;Array.isArray(l)||(l=[l]);for(var p=0;p<l.length;p++){var g=l[p];if(typeof g=="string"&&(g=v.getTileset(g)),g){f.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)c[m+x]=g}}this.gidMap=c,this.tileset=f},setRenderOrder:function(l){var c=["right-down","left-down","right-up","left-up"];return typeof l=="string"&&(l=c.indexOf(l)),l>=0&&l<4&&(this._renderOrder=l),this},calculateFacesAt:function(l,c){return o.CalculateFacesAt(l,c,this.layer),this},calculateFacesWithin:function(l,c,f,v){return o.CalculateFacesWithin(l,c,f,v,this.layer),this},createFromTiles:function(l,c,f,v,p){return o.CreateFromTiles(l,c,f,v,p,this.layer)},cull:function(l){return this.cullCallback(this.layer,l,this.culledTiles,this._renderOrder)},copy:function(l,c,f,v,p,g,m){return o.Copy(l,c,f,v,p,g,m,this.layer),this},fill:function(l,c,f,v,p,g){return o.Fill(l,c,f,v,p,g,this.layer),this},filterTiles:function(l,c,f,v,p,g,m){return o.FilterTiles(l,c,f,v,p,g,m,this.layer)},findByIndex:function(l,c,f){return o.FindByIndex(l,c,f,this.layer)},findTile:function(l,c,f,v,p,g,m){return o.FindTile(l,c,f,v,p,g,m,this.layer)},forEachTile:function(l,c,f,v,p,g,m){return o.ForEachTile(l,c,f,v,p,g,m,this.layer),this},getTileAt:function(l,c,f){return o.GetTileAt(l,c,f,this.layer)},getTileAtWorldXY:function(l,c,f,v){return o.GetTileAtWorldXY(l,c,f,v,this.layer)},getTilesWithin:function(l,c,f,v,p){return o.GetTilesWithin(l,c,f,v,p,this.layer)},getTilesWithinShape:function(l,c,f){return o.GetTilesWithinShape(l,c,f,this.layer)},getTilesWithinWorldXY:function(l,c,f,v,p,g){return o.GetTilesWithinWorldXY(l,c,f,v,p,g,this.layer)},hasTileAt:function(l,c){return o.HasTileAt(l,c,this.layer)},hasTileAtWorldXY:function(l,c,f){return o.HasTileAtWorldXY(l,c,f,this.layer)},putTileAt:function(l,c,f,v){return o.PutTileAt(l,c,f,v,this.layer)},putTileAtWorldXY:function(l,c,f,v,p){return o.PutTileAtWorldXY(l,c,f,v,p,this.layer)},putTilesAt:function(l,c,f,v){return o.PutTilesAt(l,c,f,v,this.layer),this},randomize:function(l,c,f,v,p){return o.Randomize(l,c,f,v,p,this.layer),this},removeTileAt:function(l,c,f,v){return o.RemoveTileAt(l,c,f,v,this.layer)},removeTileAtWorldXY:function(l,c,f,v,p){return o.RemoveTileAtWorldXY(l,c,f,v,p,this.layer)},renderDebug:function(l,c){return o.RenderDebug(l,c,this.layer),this},replaceByIndex:function(l,c,f,v,p,g){return o.ReplaceByIndex(l,c,f,v,p,g,this.layer),this},setSkipCull:function(l){return l===void 0&&(l=!0),this.skipCull=l,this},setCullPadding:function(l,c){return l===void 0&&(l=1),c===void 0&&(c=1),this.cullPaddingX=l,this.cullPaddingY=c,this},setCollision:function(l,c,f,v){return o.SetCollision(l,c,f,this.layer,v),this},setCollisionBetween:function(l,c,f,v){return o.SetCollisionBetween(l,c,f,v,this.layer),this},setCollisionByProperty:function(l,c,f){return o.SetCollisionByProperty(l,c,f,this.layer),this},setCollisionByExclusion:function(l,c,f){return o.SetCollisionByExclusion(l,c,f,this.layer),this},setCollisionFromCollisionGroup:function(l,c){return o.SetCollisionFromCollisionGroup(l,c,this.layer),this},setTileIndexCallback:function(l,c,f){return o.SetTileIndexCallback(l,c,f,this.layer),this},setTileLocationCallback:function(l,c,f,v,p,g){return o.SetTileLocationCallback(l,c,f,v,p,g,this.layer),this},shuffle:function(l,c,f,v){return o.Shuffle(l,c,f,v,this.layer),this},swapByIndex:function(l,c,f,v,p,g){return o.SwapByIndex(l,c,f,v,p,g,this.layer),this},tileToWorldX:function(l,c){return this.tilemap.tileToWorldX(l,c,this)},tileToWorldY:function(l,c){return this.tilemap.tileToWorldY(l,c,this)},tileToWorldXY:function(l,c,f,v){return this.tilemap.tileToWorldXY(l,c,f,v,this)},weightedRandomize:function(l,c,f,v,p){return o.WeightedRandomize(c,f,v,p,l,this.layer),this},worldToTileX:function(l,c,f){return this.tilemap.worldToTileX(l,c,f,this)},worldToTileY:function(l,c,f){return this.tilemap.worldToTileY(l,c,f,this)},worldToTileXY:function(l,c,f,v,p){return this.tilemap.worldToTileXY(l,c,f,v,p,this)},destroy:function(l){l===void 0&&(l=!0),!!this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),l&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});e.exports=a},function(e,d,t){var n=t(0),u=t(2),s=new n({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(o){return this.delay=u(o,"delay",0),this.repeat=u(o,"repeat",0),this.loop=u(o,"loop",!1),this.callback=u(o,"callback",void 0),this.callbackScope=u(o,"callbackScope",this.callback),this.args=u(o,"args",[]),this.timeScale=u(o,"timeScale",1),this.startAt=u(o,"startAt",0),this.paused=u(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=s},function(e,d,t){var n=t(1465),u=function(s){var o,h=[];if(s.hasOwnProperty("props"))for(o in s.props)o.substr(0,1)!=="_"&&h.push({key:o,value:s.props[o]});else for(o in s)n.indexOf(o)===-1&&o.substr(0,1)!=="_"&&h.push({key:o,value:s[o]});return h};e.exports=u},function(e,d,t){var n=t(6),u=function(s){var o=n(s,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};e.exports=u},function(e,d,t){var n=t(265),u=t(13),s=t(99),o=t(80),h=t(162),a=t(6),l=t(264),c=t(266),f=t(268),v=function(p,g,m){m===void 0&&(m=n);var x=a(g,"from",0),y=a(g,"to",1),T=[{value:x}],C=h(g,"delay",m.delay),S=h(g,"duration",m.duration),E=a(g,"easeParams",m.easeParams),M=o(a(g,"ease",m.ease),E),R=h(g,"hold",m.hold),L=h(g,"repeat",m.repeat),O=h(g,"repeatDelay",m.repeatDelay),F=s(g,"yoyo",m.yoyo),D=[],B=l("value",y),b=f(T[0],0,"value",B.getEnd,B.getStart,B.getActive,M,C,S,F,R,L,O,!1,!1);b.start=x,b.current=x,b.to=y,D.push(b);var V=new c(p,D,T);V.offset=u(g,"offset",null),V.completeDelay=u(g,"completeDelay",0),V.loop=Math.round(u(g,"loop",0)),V.loopDelay=Math.round(u(g,"loopDelay",0)),V.paused=s(g,"paused",!1),V.useFrames=s(g,"useFrames",!1);for(var X=a(g,"callbackScope",V),K=[V,null],J=c.TYPES,G=0;G<J.length;G++){var w=J[G],N=a(g,w,!1);if(N){var z=a(g,w+"Scope",X),U=a(g,w+"Params",[]);V.setCallback(w,N,K.concat(U),z)}}return V};e.exports=v},function(e,d,t){var n=t(80),u=t(6),s=t(14),o=function(h,a){a===void 0&&(a={});var l,c=u(a,"start",0),f=u(a,"ease",null),v=u(a,"grid",null),p=u(a,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(h),C=parseFloat(T?h[0]:h),S=T?parseFloat(h[1]):0,E=Math.max(C,S);if(T&&(c+=C),v){var M=v[0],R=v[1],L=0,O=0,F=0,D=0,B=[];x?(L=M-1,O=R-1):y?(L=p%M,O=Math.floor(p/M)):m&&(L=(M-1)/2,O=(R-1)/2);for(var b=s.MIN_SAFE_INTEGER,V=0;V<R;V++){B[V]=[];for(var X=0;X<M;X++){F=L-X,D=O-V;var K=Math.sqrt(F*F+D*D);K>b&&(b=K),B[V][X]=K}}}var J=f?n(f):null;return v?l=function(G,w,N,z){var U=0,W=z%M,H=Math.floor(z/M);W>=0&&W<M&&H>=0&&H<R&&(U=B[H][W]);var Z;if(T){var q=S-C;J?Z=U/b*q*J(U/b):Z=U/b*q}else J?Z=U*C*J(U/b):Z=U*C;return Z+c}:l=function(G,w,N,z,U){U--;var W;g?W=z:m?W=Math.abs(U/2-z):x?W=U-z:y&&(W=Math.abs(p-z));var H;if(T){var Z;m?Z=(S-C)/U*(W*2):Z=(S-C)/U*W,J?H=Z*J(W/U):H=Z}else J?H=U*E*J(W/U):H=W*C;return H+c},l};e.exports=o},function(e,d,t){var n=t(77),u=t(265),s=t(13),o=t(99),h=t(80),a=t(162),l=t(263),c=t(584),f=t(6),v=t(588),p=t(163),g=function(m,x){var y=new v(m);y.completeDelay=s(x,"completeDelay",0),y.loop=Math.round(s(x,"loop",0)),y.loopDelay=Math.round(s(x,"loopDelay",0)),y.paused=o(x,"paused",!1),y.useFrames=o(x,"useFrames",!1);var T=f(x,"callbackScope",y),C=[y],S=f(x,"onStart",!1);if(S){var E=f(x,"onStartScope",T),M=f(x,"onStartParams",[]);y.setCallback("onStart",S,C.concat(M),E)}var R=f(x,"onUpdate",!1);if(R){var L=f(x,"onUpdateScope",T),O=f(x,"onUpdateParams",[]);y.setCallback("onUpdate",R,C.concat(O),L)}var F=f(x,"onLoop",!1);if(F){var D=f(x,"onLoopScope",T),B=f(x,"onLoopParams",[]);y.setCallback("onLoop",F,C.concat(B),D)}var b=f(x,"onYoyo",!1);if(b){var V=f(x,"onYoyoScope",T),X=f(x,"onYoyoParams",[]);y.setCallback("onYoyo",b,C.concat(null,X),V)}var K=f(x,"onComplete",!1);if(K){var J=f(x,"onCompleteScope",T),G=f(x,"onCompleteParams",[]);y.setCallback("onComplete",K,C.concat(G),J)}var w=c(x);if(w.length===0)return y.paused=!0,y;var N=n(u);N.targets=l(x);var z=s(x,"totalDuration",0);z>0?N.duration=Math.floor(z/w.length):N.duration=a(x,"duration",N.duration),N.delay=a(x,"delay",N.delay),N.easeParams=f(x,"easeParams",N.easeParams),N.ease=h(f(x,"ease",N.ease),N.easeParams),N.hold=a(x,"hold",N.hold),N.repeat=a(x,"repeat",N.repeat),N.repeatDelay=a(x,"repeatDelay",N.repeatDelay),N.yoyo=o(x,"yoyo",N.yoyo),N.flipX=o(x,"flipX",N.flipX),N.flipY=o(x,"flipY",N.flipY);for(var U=0;U<w.length;U++)y.queue(p(y,w[U],N));return y};e.exports=g},function(e,d,t){var n=t(0),u=t(9),s=t(267),o=t(163),h=t(100),a=new n({Extends:u,initialize:function(c){u.call(this),this.manager=c,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING_ADD,this._pausedState=h.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(l,c){this.emit(l,this),c&&c.func.apply(c.scope,c.params)},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===h.ACTIVE},add:function(l){return this.queue(o(this,l))},queue:function(l){return this.isPlaying()||(l.parent=this,l.parentIsTimeline=!0,this.data.push(l),this.totalData=this.data.length),this},hasOffset:function(l){return l.offset!==null},isOffsetAbsolute:function(l){return typeof l=="number"},isOffsetRelative:function(l){var c=typeof l;if(c==="string"){var f=l[0];if(f==="-"||f==="+")return!0}return!1},getRelativeOffset:function(l,c){var f=l[0],v=parseFloat(l.substr(2)),p=c;switch(f){case"+":p+=v;break;case"-":p-=v;break}return Math.max(0,p)},calcDuration:function(){for(var l=0,c=0,f=0,v=0;v<this.totalData;v++){var p=this.data[v];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(f=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,l)):p.calculatedOffset=f,l=p.totalDuration+p.calculatedOffset,c+=p.totalDuration,f+=p.totalDuration}this.duration=c,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=h.PAUSED,!1):!0},resetTweens:function(l){for(var c=0;c<this.totalData;c++){var f=this.data[c];f.play(l)}},setCallback:function(l,c,f,v){return a.TYPES.indexOf(l)!==-1&&(this.callbacks[l]={func:c,scope:v,params:f}),this},makeActive:function(l){return this.manager.makeActive(l)},play:function(){if(this.state!==h.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=h.ACTIVE;this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=h.LOOP_DELAY):(this.state=h.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=h.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(l,c){if(this.state!==h.PAUSED){switch(this.useFrames&&(c=1*this.manager.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case h.ACTIVE:for(var f=this.totalData,v=0;v<this.totalData;v++){var p=this.data[v];p.update(l,c)&&f--}this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),f===0&&this.nextState();break;case h.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case h.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=h.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===h.PENDING_REMOVE}},stop:function(){this.state=h.PENDING_REMOVE},pause:function(){if(this.state!==h.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=h.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===h.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(l){for(var c=0;c<this.data.length;c++)if(this.data[c].hasTarget(l))return!0;return!1},destroy:function(){for(var l=0;l<this.data.length;l++)this.data[l].stop()}});a.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=a},function(e,d,t){var n=t(86),u=t(41),s=t(32),o=t(2),h=t(64),a={parseBody:function(l,c,f,v){v===void 0&&(v={});for(var p=o(f,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=s.clone(f,!0);s.extend(T,v,!0),delete T.fixtures,delete T.type;var C=u.create(T);return u.setParts(C,g),u.setPosition(C,{x:l,y:c}),C},parseFixture:function(l){var c=s.extend({},!1,l);delete c.circle,delete c.vertices;var f;if(l.circle){var v=o(l.circle,"x"),p=o(l.circle,"y"),g=o(l.circle,"radius");f=[n.circle(v,p,g,c)]}else l.vertices&&(f=this.parseVertices(l.vertices,c));return f},parseVertices:function(l,c){c===void 0&&(c={});for(var f=[],v=0;v<l.length;v++)h.clockwiseSort(l[v]),f.push(u.create(s.extend({position:h.centre(l[v]),vertices:l[v]},c)));return n.flagCoincidentParts(f)}};e.exports=a},function(e,d,t){var n=t(86),u=t(41),s={parseBody:function(o,h,a,l){l===void 0&&(l={});var c,f=a.vertices;if(f.length===1)l.vertices=f[0],c=u.create(l),n.flagCoincidentParts(c.parts);else{for(var v=[],p=0;p<f.length;p++){var g=u.create({vertices:f[p]});v.push(g)}n.flagCoincidentParts(v),l.parts=v,c=u.create(l)}return c.label=a.label,u.setPosition(c,{x:o,y:h}),c}};e.exports=s},function(e,d,t){var n={};e.exports=n;var u=t(118),s=t(128),o=t(32),h=t(41),a=t(86);(function(){n.stack=function(l,c,f,v,p,g,m){for(var x=u.create({label:"Stack"}),y=l,T=c,C,S=0,E=0;E<v;E++){for(var M=0,R=0;R<f;R++){var L=m(y,T,R,E,C,S);if(L){var O=L.bounds.max.y-L.bounds.min.y,F=L.bounds.max.x-L.bounds.min.x;O>M&&(M=O),h.translate(L,{x:F*.5,y:O*.5}),y=L.bounds.max.x+p,u.addBody(x,L),C=L,S+=1}else y+=p}T+=M+g,y=l}return x},n.chain=function(l,c,f,v,p,g){for(var m=l.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,M=T.bounds.max.x-T.bounds.min.x,R={bodyA:y,pointA:{x:S*c,y:C*f},bodyB:T,pointB:{x:M*v,y:E*p}},L=o.extend(R,g);u.addConstraint(l,s.create(L))}return l.label+=" Chain",l},n.mesh=function(l,c,f,v,p){var g=l.bodies,m,x,y,T,C;for(m=0;m<f;m++){for(x=1;x<c;x++)y=g[x-1+m*c],T=g[x+m*c],u.addConstraint(l,s.create(o.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<c;x++)y=g[x+(m-1)*c],T=g[x+m*c],u.addConstraint(l,s.create(o.extend({bodyA:y,bodyB:T},p))),v&&x>0&&(C=g[x-1+(m-1)*c],u.addConstraint(l,s.create(o.extend({bodyA:C,bodyB:T},p)))),v&&x<c-1&&(C=g[x+1+(m-1)*c],u.addConstraint(l,s.create(o.extend({bodyA:C,bodyB:T},p))))}return l.label+=" Mesh",l},n.pyramid=function(l,c,f,v,p,g,m){return n.stack(l,c,f,v,p,g,function(x,y,T,C,S,E){var M=Math.min(v,Math.ceil(f/2)),R=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>M)){C=M-C;var L=C,O=f-1-C;if(!(T<L||T>O)){E===1&&h.translate(S,{x:(T+(f%2==1?1:-1))*R,y:0});var F=S?T*R:0;return m(l+F+T*p,y,T,C,S,E)}}})},n.newtonsCradle=function(l,c,f,v,p){for(var g=u.create({label:"Newtons Cradle"}),m=0;m<f;m++){var x=1.9,y=a.circle(l+m*(v*x),c+p,v,{inertia:Infinity,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=s.create({pointA:{x:l+m*(v*x),y:c},bodyB:y});u.addBody(g,y),u.addConstraint(g,T)}return g},n.car=function(l,c,f,v,p){var g=h.nextGroup(!0),m=20,x=-f*.5+m,y=f*.5-m,T=0,C=u.create({label:"Car"}),S=a.rectangle(l,c,f,v,{collisionFilter:{group:g},chamfer:{radius:v*.5},density:2e-4}),E=a.circle(l+x,c+T,p,{collisionFilter:{group:g},friction:.8}),M=a.circle(l+y,c+T,p,{collisionFilter:{group:g},friction:.8}),R=s.create({bodyB:S,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),L=s.create({bodyB:S,pointB:{x:y,y:T},bodyA:M,stiffness:1,length:0});return u.addBody(C,S),u.addBody(C,E),u.addBody(C,M),u.addConstraint(C,R),u.addConstraint(C,L),C},n.softBody=function(l,c,f,v,p,g,m,x,y,T){y=o.extend({inertia:Infinity},y),T=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=n.stack(l,c,f,v,p,g,function(S,E){return a.circle(S,E,x,y)});return n.mesh(C,f,v,m,T),C.label="Soft Body",C}})()},function(e,d,t){var n={};e.exports=n;var u=t(84),s=t(32);(function(){n.pathToVertices=function(o,h){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,l,c,f,v,p,g,m,x,y,T=[],C,S,E=0,M=0,R=0;h=h||15;var L=function(F,D,B){var b=B%2==1&&B>1;if(!x||F!=x.x||D!=x.y){x&&b?(C=x.x,S=x.y):(C=0,S=0);var V={x:C+F,y:S+D};(b||!x)&&(x=V),T.push(V),M=C+F,R=S+D}},O=function(F){var D=F.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":M=F.x,R=F.y;break;case"H":M=F.x;break;case"V":R=F.y;break}L(M,R,F.pathSegType)}};for(n._svgPathToAbsolute(o),c=o.getTotalLength(),p=[],a=0;a<o.pathSegList.numberOfItems;a+=1)p.push(o.pathSegList.getItem(a));for(g=p.concat();E<c;){if(y=o.getPathSegAtLength(E),v=p[y],v!=m){for(;g.length&&g[0]!=v;)O(g.shift());m=v}switch(v.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=o.getPointAtLength(E),L(f.x,f.y,0);break}E+=h}for(a=0,l=g.length;a<l;++a)O(g[a]);return T},n._svgPathToAbsolute=function(o){for(var h,a,l,c,f,v,p=o.pathSegList,g=0,m=0,x=p.numberOfItems,y=0;y<x;++y){var T=p.getItem(y),C=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in T&&(g=T.x),"y"in T&&(m=T.y);else switch("x1"in T&&(l=g+T.x1),"x2"in T&&(f=g+T.x2),"y1"in T&&(c=m+T.y1),"y2"in T&&(v=m+T.y2),"x"in T&&(g+=T.x),"y"in T&&(m+=T.y),C){case"m":p.replaceItem(o.createSVGPathSegMovetoAbs(g,m),y);break;case"l":p.replaceItem(o.createSVGPathSegLinetoAbs(g,m),y);break;case"h":p.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(g),y);break;case"v":p.replaceItem(o.createSVGPathSegLinetoVerticalAbs(m),y);break;case"c":p.replaceItem(o.createSVGPathSegCurvetoCubicAbs(g,m,l,c,f,v),y);break;case"s":p.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(g,m,f,v),y);break;case"q":p.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(g,m,l,c),y);break;case"t":p.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(g,m),y);break;case"a":p.replaceItem(o.createSVGPathSegArcAbs(g,m,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),y);break;case"z":case"Z":g=h,m=a;break}(C=="M"||C=="m")&&(h=g,a=m)}}})()},function(e,d,t){var n=t(86),u=t(41),s=t(0),o=t(249),h=t(9),a=t(2),l=t(126),c=t(64),f=new s({Extends:h,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(p,g,m){h.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=a(m,"body",null),y=a(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),C=a(T,"objects",[]);C.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(v){v===void 0&&(v={}),l(v,"isStatic")||(v.isStatic=!0),l(v,"addToWorld")||(v.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=n.rectangle(g,m,p.width,p.height,v);return this.setBody(x,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),l(v,"isStatic")||(v.isStatic=!0),l(v,"addToWorld")||(v.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=a(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],M=m+E.x*p,R=x+E.y*g,L=E.width*p,O=E.height*g,F=null;if(E.rectangle)F=n.rectangle(M+L/2,R+O/2,L,O,v);else if(E.ellipse)F=n.circle(M+L/2,R+O/2,L/2,v);else if(E.polygon||E.polyline){var D=E.polygon?E.polygon:E.polyline,B=D.map(function(X){return{x:X.x*p,y:X.y*g}}),b=c.create(B),V=c.centre(b);M+=V.x,R+=V.y,F=n.fromVertices(M,R,b,v)}F&&C.push(F)}return C.length===1?this.setBody(C[0],v.addToWorld):C.length>1&&(v.parts=C,this.setBody(u.create(v),v.addToWorld)),this},setBody:function(v,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=f},function(e,d,t){var n=t(1399);n.Body=t(41),n.Composite=t(118),n.World=t(596),n.Detector=t(273),n.Grid=t(597),n.Pairs=t(598),n.Pair=t(250),n.Query=t(1400),n.Resolver=t(599),n.SAT=t(274),n.Constraint=t(128),n.Common=t(32),n.Engine=t(1401),n.Events=t(166),n.Sleeping=t(165),n.Plugin=t(595),n.Bodies=t(86),n.Composites=t(591),n.Axes=t(271),n.Bounds=t(84),n.Svg=t(592),n.Vector=t(83),n.Vertices=t(64),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,e.exports=n},function(e,d,t){var n={};e.exports=n;var u=t(32);(function(){n._registry={},n.register=function(s){if(n.isPlugin(s)||u.warn("Plugin.register:",n.toString(s),"does not implement all required fields."),s.name in n._registry){var o=n._registry[s.name],h=n.versionParse(s.version).number,a=n.versionParse(o.version).number;h>a?(u.warn("Plugin.register:",n.toString(o),"was upgraded to",n.toString(s)),n._registry[s.name]=s):h<a?u.warn("Plugin.register:",n.toString(o),"can not be downgraded to",n.toString(s)):s!==o&&u.warn("Plugin.register:",n.toString(s),"is already registered to different plugin object")}else n._registry[s.name]=s;return s},n.resolve=function(s){return n._registry[n.dependencyParse(s).name]},n.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},n.isPlugin=function(s){return s&&s.name&&s.version&&s.install},n.isUsed=function(s,o){return s.used.indexOf(o)>-1},n.isFor=function(s,o){var h=s.for&&n.dependencyParse(s.for);return!s.for||o.name===h.name&&n.versionSatisfies(o.version,h.range)},n.use=function(s,o){if(s.uses=(s.uses||[]).concat(o||[]),s.uses.length===0){u.warn("Plugin.use:",n.toString(s),"does not specify any dependencies to install.");return}for(var h=n.dependencies(s),a=u.topologicalSort(h),l=[],c=0;c<a.length;c+=1)if(a[c]!==s.name){var f=n.resolve(a[c]);if(!f){l.push("❌ "+a[c]);continue}n.isUsed(s,f.name)||(n.isFor(f,s)||(u.warn("Plugin.use:",n.toString(f),"is for",f.for,"but installed on",n.toString(s)+"."),f._warned=!0),f.install?f.install(s):(u.warn("Plugin.use:",n.toString(f),"does not specify an install function."),f._warned=!0),f._warned?(l.push("🔶 "+n.toString(f)),delete f._warned):l.push("✅ "+n.toString(f)),s.used.push(f.name))}l.length>0&&!f.silent&&u.info(l.join("  "))},n.dependencies=function(s,o){var h=n.dependencyParse(s),a=h.name;if(o=o||{},!(a in o)){s=n.resolve(s)||s,o[a]=u.map(s.uses||[],function(c){n.isPlugin(c)&&n.register(c);var f=n.dependencyParse(c),v=n.resolve(c);return v&&!n.versionSatisfies(v.version,f.range)?(u.warn("Plugin.dependencies:",n.toString(v),"does not satisfy",n.toString(f),"used by",n.toString(h)+"."),v._warned=!0,s._warned=!0):v||(u.warn("Plugin.dependencies:",n.toString(c),"used by",n.toString(h),"could not be resolved."),s._warned=!0),f.name});for(var l=0;l<o[a].length;l+=1)n.dependencies(o[a][l],o);return o}},n.dependencyParse=function(s){if(u.isString(s)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(s)||u.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},n.versionParse=function(s){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(s)||u.warn("Plugin.versionParse:",s,"is not a valid version or range.");var h=s.split("-");s=h[0];var a=isNaN(Number(s[0])),l=a?s.substr(1):s,c=u.map(l.split("."),function(f){return Number(f)});return{isRange:a,version:l,range:s,operator:a?s[0]:"",parts:c,prerelease:h[1],number:c[0]*1e8+c[1]*1e4+c[2]}},n.versionSatisfies=function(s,o){o=o||"*";var h=n.versionParse(o),a=h.parts,l=n.versionParse(s),c=l.parts;if(h.isRange){if(h.operator==="*"||s==="*")return!0;if(h.operator==="~")return c[0]===a[0]&&c[1]===a[1]&&c[2]>=a[2];if(h.operator==="^")return a[0]>0?c[0]===a[0]&&l.number>=h.number:a[1]>0?c[1]===a[1]&&c[2]>=a[2]:c[2]===a[2]}return s===o||s==="*"}})()},function(e,d,t){var n={};e.exports=n;var u=t(118),s=t(128),o=t(32);(function(){n.create=function(h){var a=u.create(),l={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}}};return o.extend(a,l,h)}})()},function(e,d,t){var n={};e.exports=n;var u=t(250),s=t(273),o=t(32);(function(){n.create=function(h){var a={controller:n,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(a,h)},n.update=function(h,a,l,c){var f,v,p,g=l.world,m=h.buckets,x,y,T=!1,C=l.metrics;for(C.broadphaseTests=0,f=0;f<a.length;f++){var S=a[f];if(!(S.isSleeping&&!c)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=n._getRegion(h,S);if(!S.region||E.id!==S.region.id||c){C.broadphaseTests+=1,(!S.region||c)&&(S.region=E);var M=n._regionUnion(E,S.region);for(v=M.startCol;v<=M.endCol;v++)for(p=M.startRow;p<=M.endRow;p++){y=n._getBucketId(v,p),x=m[y];var R=v>=E.startCol&&v<=E.endCol&&p>=E.startRow&&p<=E.endRow,L=v>=S.region.startCol&&v<=S.region.endCol&&p>=S.region.startRow&&p<=S.region.endRow;!R&&L&&L&&x&&n._bucketRemoveBody(h,x,S),(S.region===E||R&&!L||c)&&(x||(x=n._createBucket(m,y)),n._bucketAddBody(h,x,S))}S.region=E,T=!0}}}T&&(h.pairsList=n._createActivePairsList(h))},n.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},n._regionUnion=function(h,a){var l=Math.min(h.startCol,a.startCol),c=Math.max(h.endCol,a.endCol),f=Math.min(h.startRow,a.startRow),v=Math.max(h.endRow,a.endRow);return n._createRegion(l,c,f,v)},n._getRegion=function(h,a){var l=a.bounds,c=Math.floor(l.min.x/h.bucketWidth),f=Math.floor(l.max.x/h.bucketWidth),v=Math.floor(l.min.y/h.bucketHeight),p=Math.floor(l.max.y/h.bucketHeight);return n._createRegion(c,f,v,p)},n._createRegion=function(h,a,l,c){return{id:h+","+a+","+l+","+c,startCol:h,endCol:a,startRow:l,endRow:c}},n._getBucketId=function(h,a){return"C"+h+"R"+a},n._createBucket=function(h,a){var l=h[a]=[];return l},n._bucketAddBody=function(h,a,l){for(var c=0;c<a.length;c++){var f=a[c];if(!(l.id===f.id||l.isStatic&&f.isStatic)){var v=u.id(l,f),p=h.pairs[v];p?p[2]+=1:h.pairs[v]=[l,f,1]}}a.push(l)},n._bucketRemoveBody=function(h,a,l){a.splice(a.indexOf(l),1);for(var c=0;c<a.length;c++){var f=a[c],v=u.id(l,f),p=h.pairs[v];p&&(p[2]-=1)}},n._createActivePairsList=function(h){var a,l,c=[];a=o.keys(h.pairs);for(var f=0;f<a.length;f++)l=h.pairs[a[f]],l[2]>0?c.push(l):delete h.pairs[a[f]];return c}})()},function(e,d,t){var n={};e.exports=n;var u=t(250),s=t(32);(function(){n._pairMaxIdleLife=1e3,n.create=function(o){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},n.update=function(o,h,a){var l=o.list,c=o.table,f=o.collisionStart,v=o.collisionEnd,p=o.collisionActive,g,m,x,y;for(f.length=0,v.length=0,p.length=0,y=0;y<l.length;y++)l[y].confirmedActive=!1;for(y=0;y<h.length;y++)g=h[y],g.collided&&(m=u.id(g.bodyA,g.bodyB),x=c[m],x?(x.isActive?p.push(x):f.push(x),u.update(x,g,a),x.confirmedActive=!0):(x=u.create(g,a),c[m]=x,f.push(x),l.push(x)));for(y=0;y<l.length;y++)x=l[y],x.isActive&&!x.confirmedActive&&(u.setActive(x,!1,a),v.push(x))},n.removeOld=function(o,h){var a=o.list,l=o.table,c=[],f,v,p,g;for(g=0;g<a.length;g++){if(f=a[g],v=f.collision,v.bodyA.isSleeping||v.bodyB.isSleeping){f.timeUpdated=h;continue}h-f.timeUpdated>n._pairMaxIdleLife&&c.push(g)}for(g=0;g<c.length;g++)p=c[g]-g,f=a[p],delete l[f.id],a.splice(p,1)},n.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(e,d,t){var n={};e.exports=n;var u=t(64),s=t(83),o=t(32),h=t(84);(function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(a){var l,c,f;for(l=0;l<a.length;l++)c=a[l],!!c.isActive&&(f=c.activeContacts.length,c.collision.parentA.totalContacts+=f,c.collision.parentB.totalContacts+=f)},n.solvePosition=function(a,l,c){var f,v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D=c*n._positionDampen;for(f=0;f<l.length;f++){var B=l[f];B.previousPositionImpulse.x=B.positionImpulse.x,B.previousPositionImpulse.y=B.positionImpulse.y}for(f=0;f<a.length;f++)g=a[f],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,M=y.previousPositionImpulse,S=m.penetration,L=M.x-E.x+S.x,O=M.y-E.y+S.y,v=T.x,p=T.y,C=v*L+p*O,g.separation=C,F=(C-g.slop)*D,(x.isStatic||y.isStatic)&&(F*=2),x.isStatic||x.isSleeping||(R=F/x.totalContacts,x.positionImpulse.x+=v*R,x.positionImpulse.y+=p*R),y.isStatic||y.isSleeping||(R=F/y.totalContacts,y.positionImpulse.x-=v*R,y.positionImpulse.y-=p*R))},n.postSolvePosition=function(a){for(var l=0;l<a.length;l++){var c=a[l];if(c.totalContacts=0,c.positionImpulse.x!==0||c.positionImpulse.y!==0){for(var f=0;f<c.parts.length;f++){var v=c.parts[f];u.translate(v.vertices,c.positionImpulse),h.update(v.bounds,v.vertices,c.velocity),v.position.x+=c.positionImpulse.x,v.position.y+=c.positionImpulse.y}c.positionPrev.x+=c.positionImpulse.x,c.positionPrev.y+=c.positionImpulse.y,s.dot(c.positionImpulse,c.velocity)<0?(c.positionImpulse.x=0,c.positionImpulse.y=0):(c.positionImpulse.x*=n._positionWarming,c.positionImpulse.y*=n._positionWarming)}}},n.preSolveVelocity=function(a){var l,c,f,v,p,g,m,x,y,T,C,S,E,M,R=s._temp[0],L=s._temp[1];for(l=0;l<a.length;l++)if(f=a[l],!(!f.isActive||f.isSensor))for(v=f.activeContacts,p=f.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,c=0;c<v.length;c++)T=v[c],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(R.x=x.x*S+y.x*E,R.y=x.y*S+y.y*E,g.isStatic||g.isSleeping||(M=s.sub(C,g.position,L),g.positionPrev.x+=R.x*g.inverseMass,g.positionPrev.y+=R.y*g.inverseMass,g.anglePrev+=s.cross(M,R)*g.inverseInertia),m.isStatic||m.isSleeping||(M=s.sub(C,m.position,L),m.positionPrev.x-=R.x*m.inverseMass,m.positionPrev.y-=R.y*m.inverseMass,m.anglePrev-=s.cross(M,R)*m.inverseInertia))},n.solveVelocity=function(a,l){for(var c=l*l,f=s._temp[0],v=s._temp[1],p=s._temp[2],g=s._temp[3],m=s._temp[4],x=s._temp[5],y=0;y<a.length;y++){var T=a[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,M=C.normal,R=C.tangent,L=T.activeContacts,O=1/L.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var F=0;F<L.length;F++){var D=L[F],B=D.vertex,b=s.sub(B,S.position,v),V=s.sub(B,E.position,p),X=s.add(S.velocity,s.mult(s.perp(b),S.angularVelocity),g),K=s.add(E.velocity,s.mult(s.perp(V),E.angularVelocity),m),J=s.sub(X,K,x),G=s.dot(M,J),w=s.dot(R,J),N=Math.abs(w),z=o.sign(w),U=(1+T.restitution)*G,W=o.clamp(T.separation+G,0,1)*n._frictionNormalMultiplier,H=w,Z=Infinity;N>T.friction*T.frictionStatic*W*c&&(Z=N,H=o.clamp(T.friction*z*c,-Z,Z));var q=s.cross(b,M),_=s.cross(V,M),nt=O/(S.inverseMass+E.inverseMass+S.inverseInertia*q*q+E.inverseInertia*_*_);if(U*=nt,H*=nt,G<0&&G*G>n._restingThresh*c)D.normalImpulse=0;else{var rt=D.normalImpulse;D.normalImpulse=Math.min(D.normalImpulse+U,0),U=D.normalImpulse-rt}if(w*w>n._restingThreshTangent*c)D.tangentImpulse=0;else{var at=D.tangentImpulse;D.tangentImpulse=o.clamp(D.tangentImpulse+H,-Z,Z),H=D.tangentImpulse-at}f.x=M.x*U+R.x*H,f.y=M.y*U+R.y*H,S.isStatic||S.isSleeping||(S.positionPrev.x+=f.x*S.inverseMass,S.positionPrev.y+=f.y*S.inverseMass,S.anglePrev+=s.cross(b,f)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=f.x*E.inverseMass,E.positionPrev.y-=f.y*E.inverseMass,E.anglePrev-=s.cross(V,f)*E.inverseInertia)}}}}})()},function(e,d){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(n){typeof window=="object"&&(t=window)}e.exports=t},function(e,d,t){var n=t(276),u=function(s,o,h,a){for(var l=s[0],c=1;c<s.length;c++){var f=s[c];n(f,l,o,h,a),l=f}return s};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"angle",o,h,a,l)};e.exports=u},function(e,d){var t=function(n,u,s){for(var o=0;o<n.length;o++){var h=n[o];u.call(s,h)}return n};e.exports=t},function(e,d){var t=function(n,u,s){s===void 0&&(s=0);for(var o=s;o<n.length;o++){var h=n[o],a=!0;for(var l in u)h[l]!==u[l]&&(a=!1);if(a)return h}return null};e.exports=t},function(e,d){var t=function(n,u,s){s===void 0&&(s=0);for(var o=s;o<n.length;o++){var h=n[o],a=!0;for(var l in u)h[l]!==u[l]&&(a=!1);if(a)return h}return null};e.exports=t},function(e,d,t){var n=t(289),u=t(123),s=t(2),o=t(1),h=t(129),a=new h({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),l=function(c,f){f===void 0&&(f={});var v=f.hasOwnProperty("width"),p=f.hasOwnProperty("height"),g=s(f,"width",-1),m=s(f,"height",-1),x=s(f,"cellWidth",1),y=s(f,"cellHeight",x),T=s(f,"position",u.TOP_LEFT),C=s(f,"x",0),S=s(f,"y",0),E=0,M=0,R=g*x,L=m*y;a.setPosition(C,S),a.setSize(x,y);for(var O=0;O<c.length;O++)if(n(c[O],a,T),v&&g===-1)a.x+=x;else if(p&&m===-1)a.y+=y;else if(p&&!v){if(M+=y,a.y+=y,M===L&&(M=0,E+=x,a.y=S,a.x+=x,E===R))break}else if(E+=x,a.x+=x,E===R&&(E=0,M+=y,a.x=C,a.y+=y,M===L))break;return c};e.exports=l},function(e,d,t){var n=t(18),u=2,s={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,h,a,l){return o===void 0&&(o=1),h===void 0?this.alpha=o:(this._alphaTL=n(o,0,1),this._alphaTR=n(h,0,1),this._alphaBL=n(a,0,1),this._alphaBR=n(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var h=n(o,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~u:this.renderFlags|=u}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var h=n(o,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=u)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var h=n(o,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=u)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var h=n(o,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=u)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var h=n(o,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=u)}}};e.exports=s},function(e,d){var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,u){return this.width=n,this.height=u,this},setDisplaySize:function(n,u){return this.displayWidth=n,this.displayHeight=u,this}};e.exports=t},function(e,d){var t={texture:null,frame:null,isCropped:!1,setCrop:function(n,u,s,o){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,u,s,o,this.flipX,this.flipY);else{var h=n;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=t},function(e,d){var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,u){return this.flipX=n,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=t},function(e,d,t){var n=t(10),u=t(308),s=t(3),o={prepareBoundsOutput:function(h,a){if(a===void 0&&(a=!1),this.rotation!==0&&u(h,this.x,this.y,this.rotation),a&&this.parentContainer){var l=this.parentContainer.getBoundsTransformMatrix();l.transformPoint(h.x,h.y,h)}return h},getCenter:function(h){return h===void 0&&(h=new s),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,h},getTopLeft:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,a)},getTopCenter:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,a)},getTopRight:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,a)},getLeftCenter:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,a)},getRightCenter:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,a)},getBottomLeft:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,a)},getBottomCenter:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,a)},getBottomRight:function(h,a){return h||(h=new s),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,a)},getBounds:function(h){h===void 0&&(h=new n);var a,l,c,f,v,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),x.transformPoint(h.x,h.y,h),a=h.x,l=h.y,this.getTopRight(h),x.transformPoint(h.x,h.y,h),c=h.x,f=h.y,this.getBottomLeft(h),x.transformPoint(h.x,h.y,h),v=h.x,p=h.y,this.getBottomRight(h),x.transformPoint(h.x,h.y,h),g=h.x,m=h.y}else this.getTopLeft(h),a=h.x,l=h.y,this.getTopRight(h),c=h.x,f=h.y,this.getBottomLeft(h),v=h.x,p=h.y,this.getBottomRight(h),g=h.x,m=h.y;return h.x=Math.min(a,c,v,g),h.y=Math.min(l,f,p,m),h.width=Math.max(a,c,v,g)-h.x,h.height=Math.max(l,f,p,m)-h.y,h}};e.exports=o},function(e,d){e.exports="blur"},function(e,d){e.exports="boot"},function(e,d){e.exports="contextlost"},function(e,d){e.exports="contextrestored"},function(e,d){e.exports="destroy"},function(e,d){e.exports="focus"},function(e,d){e.exports="hidden"},function(e,d){e.exports="pause"},function(e,d){e.exports="postrender"},function(e,d){e.exports="poststep"},function(e,d){e.exports="prerender"},function(e,d){e.exports="prestep"},function(e,d){e.exports="ready"},function(e,d){e.exports="resume"},function(e,d){e.exports="step"},function(e,d){e.exports="visible"},function(e,d){e.exports="postrender"},function(e,d){e.exports="prerender"},function(e,d){e.exports="render"},function(e,d){e.exports="resize"},function(e,d){var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,u){return n===void 0&&(n=.5),u===void 0&&(u=n),this.originX=n,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this.displayOriginX=n,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=t},function(e,d,t){var n=t(36),u=t(99),s=t(6),o=t(100),h=t(3),a={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(l,c){c===void 0&&(c=this.pathConfig);var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this.path=l,c&&this.startFollow(c),this},setRotateToPath:function(l,c){return c===void 0&&(c=0),this.rotateToPath=l,this.pathRotationOffset=c,this},isFollowing:function(){var l=this.pathTween;return l&&l.isPlaying()},startFollow:function(l,c){l===void 0&&(l={}),c===void 0&&(c=0);var f=this.pathTween;f&&f.isPlaying()&&f.stop(),typeof l=="number"&&(l={duration:l}),l.from=s(l,"from",0),l.to=s(l,"to",1);var v=u(l,"positionOnPath",!1);this.rotateToPath=u(l,"rotateToPath",!1),this.pathRotationOffset=s(l,"rotationOffset",0);var p=s(l,"startAt",c);if(p&&(l.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(l),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=l,this},pauseFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.pause(),this},resumeFollow:function(){var l=this.pathTween;return l&&l.isPaused()&&l.resume(),this},stopFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this},pathUpdate:function(){var l=this.pathTween;if(l){var c=l.data[0],f=this.pathDelta,v=this.pathVector;if(f.copy(v).negate(),c.state===o.COMPLETE){this.path.getPoint(1,v),f.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(c.state!==o.PLAYING_FORWARD&&c.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(l.getValue(),v),f.add(v),v.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(v.x,v.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+n(this.pathRotationOffset))}}};e.exports=a},function(e,d){var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){return n===void 0&&(n=this.frame),this.width=n.realWidth,this.height=n.realHeight,this},setSize:function(n,u){return this.width=n,this.height=u,this},setDisplaySize:function(n,u){return this.displayWidth=n,this.displayHeight=u,this}};e.exports=t},function(e,d){var t=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(u,s){return this.texture=this.scene.sys.textures.get(u),this.setFrame(s)},setFrame:function(u,s,o){return s===void 0&&(s=!0),o===void 0&&(o=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&s&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=n},function(e,d){var t=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(u,s,o,h){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,s,o,h,this.flipX,this.flipY);else{var a=u;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,s){return this.texture=this.scene.sys.textures.get(u),this.setFrame(s)},setFrame:function(u,s,o){return s===void 0&&(s=!0),o===void 0&&(o=!0),this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&s&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=n},function(e,d){var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(n,u,s,o){return n===void 0&&(n=16777215),u===void 0&&(u=n,s=n,o=n),this.tintTopLeft=n,this.tintTopRight=u,this.tintBottomLeft=s,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(n,u,s,o){return this.setTint(n,u,s,o),this.tintFill=!0,this},tint:{set:function(n){this.setTint(n,n,n,n)}},isTinted:{get:function(){var n=16777215;return this.tintFill||this.tintTopLeft!==n||this.tintTopRight!==n||this.tintBottomLeft!==n||this.tintBottomRight!==n}}};e.exports=t},function(e,d){e.exports="changedata"},function(e,d){e.exports="changedata-"},function(e,d){e.exports="destroy"},function(e,d){e.exports="removedata"},function(e,d){e.exports="setdata"},function(e,d){e.exports="addedtoscene"},function(e,d){e.exports="destroy"},function(e,d){e.exports="removedfromscene"},function(e,d){e.exports="complete"},function(e,d){e.exports="created"},function(e,d){e.exports="error"},function(e,d){e.exports="loop"},function(e,d){e.exports="play"},function(e,d){e.exports="seeked"},function(e,d){e.exports="seeking"},function(e,d){e.exports="stop"},function(e,d){e.exports="timeout"},function(e,d){e.exports="unlocked"},function(e,d){e.exports="addedtoscene"},function(e,d){e.exports="boot"},function(e,d){e.exports="create"},function(e,d){e.exports="destroy"},function(e,d){e.exports="pause"},function(e,d){e.exports="postupdate"},function(e,d){e.exports="prerender"},function(e,d){e.exports="preupdate"},function(e,d){e.exports="ready"},function(e,d){e.exports="removedfromscene"},function(e,d){e.exports="render"},function(e,d){e.exports="resume"},function(e,d){e.exports="shutdown"},function(e,d){e.exports="sleep"},function(e,d){e.exports="start"},function(e,d){e.exports="transitioncomplete"},function(e,d){e.exports="transitioninit"},function(e,d){e.exports="transitionout"},function(e,d){e.exports="transitionstart"},function(e,d){e.exports="transitionwake"},function(e,d){e.exports="update"},function(e,d){e.exports="wake"},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"alpha",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"x",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l,c,f){return h==null&&(h=o),n(s,"x",o,a,c,f),n(s,"y",h,l,c,f)};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"y",o,h,a,l)};e.exports=u},function(e,d){var t=function(n,u,s,o){s===void 0&&(s=0),o===void 0&&(o=6.28);for(var h=s,a=(o-s)/n.length,l=0;l<n.length;l++)n[l].x=u.x+u.radius*Math.cos(h),n[l].y=u.y+u.radius*Math.sin(h),h+=a;return n};e.exports=t},function(e,d){var t=function(n,u,s,o){s===void 0&&(s=0),o===void 0&&(o=6.28);for(var h=s,a=(o-s)/n.length,l=u.width/2,c=u.height/2,f=0;f<n.length;f++)n[f].x=u.x+l*Math.cos(h),n[f].y=u.y+c*Math.sin(h),h+=a;return n};e.exports=t},function(e,d,t){var n=t(172),u=function(s,o){for(var h=n(o,s.length),a=0;a<s.length;a++){var l=s[a],c=h[a];l.x=c.x,l.y=c.y}return s};e.exports=u},function(e,d,t){var n=t(316),u=t(178),s=t(179),o=function(h,a,l){l===void 0&&(l=0);var c=n(a,!1,h.length);l>0?u(c,l):l<0&&s(c,Math.abs(l));for(var f=0;f<h.length;f++)h[f].x=c[f].x,h[f].y=c[f].y;return h};e.exports=o},function(e,d,t){var n=t(317),u=function(s,o,h){var a=n({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},h),l=n({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},h),c=n({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},h);a.pop(),l.pop(),c.pop(),a=a.concat(l,c);for(var f=a.length/s.length,v=0,p=0;p<s.length;p++){var g=s[p],m=a[Math.floor(v)];g.x=m.x,g.y=m.y,v+=f}return s};e.exports=u},function(e,d){var t=function(n,u,s){for(var o=0;o<n.length;o++){var h=n[o];h.anims&&h.anims.play(u,s)}return n};e.exports=t},function(e,d,t){var n=t(170),u=function(s,o){for(var h=0;h<s.length;h++)n(o,s[h]);return s};e.exports=u},function(e,d,t){var n=t(180),u=function(s,o){for(var h=0;h<s.length;h++)n(o,s[h]);return s};e.exports=u},function(e,d,t){var n=t(173),u=function(s,o){for(var h=0;h<s.length;h++)n(o,s[h]);return s};e.exports=u},function(e,d,t){var n=t(174),u=function(s,o){for(var h=0;h<s.length;h++)n(o,s[h]);return s};e.exports=u},function(e,d,t){var n=t(181),u=function(s,o){for(var h=0;h<s.length;h++)n(o,s[h]);return s};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"rotation",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(182),u=t(50),s=function(o,h,a){for(var l=h.x,c=h.y,f=0;f<o.length;f++){var v=o[f];n(v,l,c,a,Math.max(1,u(v.x,v.y,l,c)))}return o};e.exports=s},function(e,d,t){var n=t(182),u=function(s,o,h,a){var l=o.x,c=o.y;if(a===0)return s;for(var f=0;f<s.length;f++)n(s[f],l,c,h,a);return s};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"scaleX",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l,c,f){return h==null&&(h=o),n(s,"scaleX",o,a,c,f),n(s,"scaleY",h,l,c,f)};e.exports=u},function(e,d,t){var n=t(46),u=function(s,o,h,a,l){return n(s,"scaleY",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"alpha",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a){return n(s,"blendMode",o,0,h,a)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"depth",o,h,a,l)};e.exports=u},function(e,d){var t=function(n,u,s){for(var o=0;o<n.length;o++)n[o].setInteractive(u,s);return n};e.exports=t},function(e,d,t){var n=t(27),u=function(s,o,h,a,l,c,f){return h==null&&(h=o),n(s,"originX",o,a,c,f),n(s,"originY",h,l,c,f),s.forEach(function(v){v.updateDisplayOrigin()}),s};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"rotation",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l,c,f){return h==null&&(h=o),n(s,"scaleX",o,a,c,f),n(s,"scaleY",h,l,c,f)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"scaleX",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"scaleY",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l,c,f){return h==null&&(h=o),n(s,"scrollFactorX",o,a,c,f),n(s,"scrollFactorY",h,l,c,f)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"scrollFactorX",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"scrollFactorY",o,h,a,l)};e.exports=u},function(e,d){var t=function(n,u,s,o,h){for(var a=0;a<n.length;a++)n[a].setTint(u,s,o,h);return n};e.exports=t},function(e,d,t){var n=t(27),u=function(s,o,h,a){return n(s,"visible",o,0,h,a)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"x",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l,c,f){return h==null&&(h=o),n(s,"x",o,a,c,f),n(s,"y",h,l,c,f)};e.exports=u},function(e,d,t){var n=t(27),u=function(s,o,h,a,l){return n(s,"y",o,h,a,l)};e.exports=u},function(e,d,t){var n=t(3),u=function(s,o,h,a,l){a===void 0&&(a=0),l===void 0&&(l=new n);var c,f;if(s.length>1){var v,p,g,m;if(a===0){var x=s.length-1;for(c=s[x].x,f=s[x].y,v=x-1;v>=0;v--)m=s[v],p=m.x,g=m.y,m.x=c,m.y=f,c=p,f=g;s[x].x=o,s[x].y=h}else{for(c=s[0].x,f=s[0].y,v=1;v<s.length;v++)m=s[v],p=m.x,g=m.y,m.x=c,m.y=f,c=p,f=g;s[0].x=o,s[0].y=h}}else c=s[0].x,f=s[0].y,s[0].x=o,s[0].y=h;return l.x=c,l.y=f,l};e.exports=u},function(e,d,t){var n=t(131),u=function(s){return n(s)};e.exports=u},function(e,d,t){var n=t(183),u=function(s,o,h,a,l){l===void 0&&(l=!1);var c=Math.abs(a-h)/s.length,f;if(l)for(f=0;f<s.length;f++)s[f][o]+=n(f*c,h,a);else for(f=0;f<s.length;f++)s[f][o]=n(f*c,h,a);return s};e.exports=u},function(e,d,t){var n=t(184),u=function(s,o,h,a,l){l===void 0&&(l=!1);var c=Math.abs(a-h)/s.length,f;if(l)for(f=0;f<s.length;f++)s[f][o]+=n(f*c,h,a);else for(f=0;f<s.length;f++)s[f][o]=n(f*c,h,a);return s};e.exports=u},function(e,d){var t=function(n,u,s,o,h){h===void 0&&(h=!1);var a=Math.abs(o-s)/n.length,l;if(h)for(l=0;l<n.length;l++)n[l][u]+=l*a+s;else for(l=0;l<n.length;l++)n[l][u]=l*a+s;return n};e.exports=t},function(e,d){var t=function(n){for(var u=0;u<n.length;u++)n[u].visible=!n[u].visible;return n};e.exports=t},function(e,d,t){var n=t(68),u=function(s,o,h){h===void 0&&(h=0);for(var a=0;a<s.length;a++){var l=s[a];l.x=n(l.x,o.left-h,o.right+h),l.y=n(l.y,o.top-h,o.bottom+h)}return s};e.exports=u},function(e,d,t){e.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(e,d){e.exports="add"},function(e,d){e.exports="animationcomplete"},function(e,d){e.exports="animationcomplete-"},function(e,d){e.exports="animationrepeat"},function(e,d){e.exports="animationrestart"},function(e,d){e.exports="animationstart"},function(e,d){e.exports="animationstop"},function(e,d){e.exports="animationupdate"},function(e,d){e.exports="pauseall"},function(e,d){e.exports="remove"},function(e,d){e.exports="resumeall"},function(e,d,t){e.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(e,d){e.exports="add"},function(e,d){e.exports="remove"},function(e,d,t){e.exports={Controls:t(739),Scene2D:t(742)}},function(e,d,t){e.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(e,d,t){var n=t(0),u=t(6),s=new n({initialize:function(h){this.camera=u(h,"camera",null),this.left=u(h,"left",null),this.right=u(h,"right",null),this.up=u(h,"up",null),this.down=u(h,"down",null),this.zoomIn=u(h,"zoomIn",null),this.zoomOut=u(h,"zoomOut",null),this.zoomSpeed=u(h,"zoomSpeed",.01),this.minZoom=u(h,"minZoom",.001),this.maxZoom=u(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var a=u(h,"speed",null);typeof a=="number"?(this.speedX=a,this.speedY=a):(this.speedX=u(h,"speed.x",0),this.speedY=u(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=s},function(e,d,t){var n=t(0),u=t(6),s=new n({initialize:function(h){this.camera=u(h,"camera",null),this.left=u(h,"left",null),this.right=u(h,"right",null),this.up=u(h,"up",null),this.down=u(h,"down",null),this.zoomIn=u(h,"zoomIn",null),this.zoomOut=u(h,"zoomOut",null),this.zoomSpeed=u(h,"zoomSpeed",.01),this.minZoom=u(h,"minZoom",.001),this.maxZoom=u(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var a=u(h,"acceleration",null);typeof a=="number"?(this.accelX=a,this.accelY=a):(this.accelX=u(h,"acceleration.x",0),this.accelY=u(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var l=u(h,"drag",null);typeof l=="number"?(this.dragX=l,this.dragY=l):(this.dragX=u(h,"drag.x",0),this.dragY=u(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=u(h,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=u(h,"maxSpeed.x",0),this.maxSpeedY=u(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*o|0),this._speedY!==0&&(h.scrollY-=this._speedY*o|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=s},function(e,d,t){e.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(e,d){e.exports="cameradestroy"},function(e,d){e.exports="camerafadeincomplete"},function(e,d){e.exports="camerafadeinstart"},function(e,d){e.exports="camerafadeoutcomplete"},function(e,d){e.exports="camerafadeoutstart"},function(e,d){e.exports="cameraflashcomplete"},function(e,d){e.exports="cameraflashstart"},function(e,d){e.exports="followupdate"},function(e,d){e.exports="camerapancomplete"},function(e,d){e.exports="camerapanstart"},function(e,d){e.exports="postrender"},function(e,d){e.exports="prerender"},function(e,d){e.exports="camerarotatecomplete"},function(e,d){e.exports="camerarotatestart"},function(e,d){e.exports="camerashakecomplete"},function(e,d){e.exports="camerashakestart"},function(e,d){e.exports="camerazoomcomplete"},function(e,d){e.exports="camerazoomstart"},function(e,d,t){var n=t(18),u=t(0),s=t(37),o=new u({initialize:function(a){this.camera=a,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,a,l,c,f,v,p,g){if(h===void 0&&(h=!0),a===void 0&&(a=1e3),l===void 0&&(l=0),c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=a,this.direction=h,this.progress=0,this.red=l,this.green=c,this.blue=f,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=h?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(m,this.camera,this,a,l,c,f),this.camera},update:function(h,a){!this.isRunning||(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(h,a){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera,c=this.red/255,f=this.green/255,v=this.blue/255;return h.drawFillRect(l.x,l.y,l.width,l.height,a(v,f,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=o},function(e,d,t){var n=t(18),u=t(0),s=t(37),o=new u({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,a,l,c,f,v,p){return h===void 0&&(h=250),a===void 0&&(a=255),l===void 0&&(l=255),c===void 0&&(c=255),f===void 0&&(f=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene),!f&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=a,this.green=l,this.blue=c,this.alpha=1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(s.FLASH_START,this.camera,this,h,a,l,c),this.camera)},update:function(h,a){!this.isRunning||(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var a=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(h,a){if(!this.isRunning)return!1;var l=this.camera,c=this.red/255,f=this.green/255,v=this.blue/255;return h.drawFillRect(l.x,l.y,l.width,l.height,a(v,f,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=o},function(e,d,t){var n=t(18),u=t(0),s=t(134),o=t(37),h=t(3),a=new u({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,c,f,v,p,g,m){f===void 0&&(f=1e3),v===void 0&&(v=s.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(l,c),x.getScroll(l,c,this.current),typeof v=="string"&&s.hasOwnProperty(v)?this.ease=s[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(o.PAN_START,this.camera,this,f,l,c)),x},update:function(l,c){if(!!this.isRunning){this._elapsed+=c;var f=n(this._elapsed/this.duration,0,1);this.progress=f;var v=this.camera;if(this._elapsed<this.duration){var p=this.ease(f);v.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;v.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,g,m)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=a},function(e,d){var t=function(n,u){return u===void 0&&(u=1.70158),n*n*((u+1)*n-u)};e.exports=t},function(e,d){var t=function(n,u){return u===void 0&&(u=1.70158),--n*n*((u+1)*n+u)+1};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u=1.70158);var s=u*1.525;return(n*=2)<1?.5*(n*n*((s+1)*n-s)):.5*((n-=2)*n*((s+1)*n+s)+2)};e.exports=t},function(e,d){var t=function(n){return n=1-n,n<1/2.75?1-7.5625*n*n:n<2/2.75?1-(7.5625*(n-=1.5/2.75)*n+.75):n<2.5/2.75?1-(7.5625*(n-=2.25/2.75)*n+.9375):1-(7.5625*(n-=2.625/2.75)*n+.984375)};e.exports=t},function(e,d){var t=function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375};e.exports=t},function(e,d){var t=function(n){var u=!1;return n<.5?(n=1-n*2,u=!0):n=n*2-1,n<1/2.75?n=7.5625*n*n:n<2/2.75?n=7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?n=7.5625*(n-=2.25/2.75)*n+.9375:n=7.5625*(n-=2.625/2.75)*n+.984375,u?(1-n)*.5:n*.5+.5};e.exports=t},function(e,d){var t=function(n){return 1-Math.sqrt(1-n*n)};e.exports=t},function(e,d){var t=function(n){return Math.sqrt(1- --n*n)};e.exports=t},function(e,d){var t=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)};e.exports=t},function(e,d){var t=function(n){return n*n*n};e.exports=t},function(e,d){var t=function(n){return--n*n*n+1};e.exports=t},function(e,d){var t=function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)};e.exports=t},function(e,d){var t=function(n,u,s){if(u===void 0&&(u=.1),s===void 0&&(s=.1),n===0)return 0;if(n===1)return 1;var o=s/4;return u<1?u=1:o=s*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(n-=1))*Math.sin((n-o)*(2*Math.PI)/s))};e.exports=t},function(e,d){var t=function(n,u,s){if(u===void 0&&(u=.1),s===void 0&&(s=.1),n===0)return 0;if(n===1)return 1;var o=s/4;return u<1?u=1:o=s*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*n)*Math.sin((n-o)*(2*Math.PI)/s)+1};e.exports=t},function(e,d){var t=function(n,u,s){if(u===void 0&&(u=.1),s===void 0&&(s=.1),n===0)return 0;if(n===1)return 1;var o=s/4;return u<1?u=1:o=s*Math.asin(1/u)/(2*Math.PI),(n*=2)<1?-.5*(u*Math.pow(2,10*(n-=1))*Math.sin((n-o)*(2*Math.PI)/s)):u*Math.pow(2,-10*(n-=1))*Math.sin((n-o)*(2*Math.PI)/s)*.5+1};e.exports=t},function(e,d){var t=function(n){return Math.pow(2,10*(n-1))-.001};e.exports=t},function(e,d){var t=function(n){return 1-Math.pow(2,-10*n)};e.exports=t},function(e,d){var t=function(n){return(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(2-Math.pow(2,-10*(n-1)))};e.exports=t},function(e,d){var t=function(n){return n};e.exports=t},function(e,d){var t=function(n){return n*n};e.exports=t},function(e,d){var t=function(n){return n*(2-n)};e.exports=t},function(e,d){var t=function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)};e.exports=t},function(e,d){var t=function(n){return n*n*n*n};e.exports=t},function(e,d){var t=function(n){return 1- --n*n*n*n};e.exports=t},function(e,d){var t=function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)};e.exports=t},function(e,d){var t=function(n){return n*n*n*n*n};e.exports=t},function(e,d){var t=function(n){return--n*n*n*n*n+1};e.exports=t},function(e,d){var t=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};e.exports=t},function(e,d){var t=function(n){return n===0?0:n===1?1:1-Math.cos(n*Math.PI/2)};e.exports=t},function(e,d){var t=function(n){return n===0?0:n===1?1:Math.sin(n*Math.PI/2)};e.exports=t},function(e,d){var t=function(n){return n===0?0:n===1?1:.5*(1-Math.cos(Math.PI*n))};e.exports=t},function(e,d){var t=function(n,u){return u===void 0&&(u=1),n<=0?0:n>=1?1:((u*n|0)+1)*(1/u)};e.exports=t},function(e,d,t){var n=t(18),u=t(0),s=t(37),o=t(3),h=new u({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(a,l,c,f,v){return a===void 0&&(a=100),l===void 0&&(l=.05),c===void 0&&(c=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,typeof l=="number"?this.intensity.set(l):this.intensity.set(l.x,l.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(s.SHAKE_START,this.camera,this,a,l),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(a,l){if(!!this.isRunning)if(this._elapsed+=l,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,f=this.camera.width,v=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*c.x*f*2-c.x*f)*p,this._offsetY=(Math.random()*c.y*v*2-c.y*v)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=h},function(e,d,t){var n=t(18),u=t(0),s=t(37),o=t(134),h=new u({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(a,l,c,f,v,p,g){c===void 0&&(c=1e3),f===void 0&&(f=o.Linear),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),l===void 0&&(l=!1),this.shortestPath=l;var m=a;a<0?(m=-1*a,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!v&&this.isRunning)return y;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=y.rotation,this.destination=m,typeof f=="string"&&o.hasOwnProperty(f)?this.ease=o[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+x)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(s.ROTATE_START,this.camera,this,c,m),y},update:function(a,l){if(!!this.isRunning){this._elapsed+=l;var c=n(this._elapsed/this.duration,0,1);this.progress=c;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(c);this.current=f.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=f.rotation+p*v:y=f.rotation-p*v,f.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,c,y)}else f.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=h},function(e,d,t){var n=t(18),u=t(0),s=t(134),o=t(37),h=new u({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,l,c,f,v,p){l===void 0&&(l=1e3),c===void 0&&(c=s.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source=g.zoom,this.destination=a,typeof c=="string"&&s.hasOwnProperty(c)?this.ease=s[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(o.ZOOM_START,this.camera,this,l,a)),g},update:function(a,l){!this.isRunning||(this._elapsed+=l,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,d,t){var n=t(326),u=t(0),s=t(2),o=t(24),h=t(57),a=t(104),l=t(20),c=new u({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(l.BOOT,this.boot,this),v.sys.events.on(l.START,this.start,this)},boot:function(){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,f.scale.width,f.scale.height).setScene(this.scene),f.game.scale.on(a.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){if(!this.main){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(l.UPDATE,this.update,this),v.once(l.SHUTDOWN,this.shutdown,this)},add:function(f,v,p,g,m,x){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new n(f,v,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(f,v){v===void 0&&(v=!1);var p=this.cameras.indexOf(f);return p===-1?(f.id=this.getNextID(),f.setRoundPixels(this.roundPixels),this.cameras.push(f),v&&(this.main=f),f):null},getNextID:function(){for(var f=this.cameras,v=1,p=0;p<32;p++){for(var g=!1,m=0;m<f.length;m++){var x=f[m];if(x&&x.id===v){g=!0;continue}}if(g)v=v<<1;else return v}return 0},getTotal:function(f){f===void 0&&(f=!1);for(var v=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!f||f&&m.visible)&&v++}return v},fromJSON:function(f){Array.isArray(f)||(f=[f]);for(var v=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<f.length;g++){var m=f[g],x=s(m,"x",0),y=s(m,"y",0),T=s(m,"width",v),C=s(m,"height",p),S=this.add(x,y,T,C);S.name=s(m,"name",""),S.zoom=s(m,"zoom",1),S.rotation=s(m,"rotation",0),S.scrollX=s(m,"scrollX",0),S.scrollY=s(m,"scrollY",0),S.roundPixels=s(m,"roundPixels",!1),S.visible=s(m,"visible",!0);var E=s(m,"backgroundColor",!1);E&&S.setBackgroundColor(E);var M=s(m,"bounds",null);if(M){var R=s(M,"x",0),L=s(M,"y",0),O=s(M,"width",v),F=s(M,"height",p);S.setBounds(R,L,O,F)}}return this},getCamera:function(f){for(var v=this.cameras,p=0;p<v.length;p++)if(v[p].name===f)return v[p];return null},getCamerasBelowPointer:function(f){for(var v=this.cameras,p=f.x,g=f.y,m=[],x=0;x<v.length;x++){var y=v[x];y.visible&&y.inputEnabled&&h(y,p,g)&&m.unshift(y)}return m},remove:function(f,v){v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);for(var p=0,g=this.cameras,m=0;m<f.length;m++){var x=g.indexOf(f[m]);x!==-1&&(v?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(f,v){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(v.getChildren(),x);f.render(p,y,x)}}},getVisibleChildren:function(f,v){for(var p=[],g=0;g<f.length;g++){var m=f[g];m.willRender(v)&&p.push(m)}return p},resetAll:function(){for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(f,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(f,v)},onResize:function(f,v,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(v.width,v.height)}},resize:function(f,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(f,v)},shutdown:function(){this.main=void 0;for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();this.cameras=[];var v=this.systems.events;v.off(l.UPDATE,this.update,this),v.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",c,"cameras"),e.exports=c},function(e,d){e.exports="enterfullscreen"},function(e,d){e.exports="fullscreenfailed"},function(e,d){e.exports="fullscreenunsupported"},function(e,d){e.exports="leavefullscreen"},function(e,d){e.exports="orientationchange"},function(e,d){e.exports="resize"},function(e,d,t){e.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(e,d){var t=e.exports={},n,u;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=s}catch(y){n=s}try{typeof clearTimeout=="function"?u=clearTimeout:u=o}catch(y){u=o}})();function h(y){if(n===setTimeout)return setTimeout(y,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch(T){try{return n.call(null,y,0)}catch(C){return n.call(this,y,0)}}}function a(y){if(u===clearTimeout)return clearTimeout(y);if((u===o||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(y);try{return u(y)}catch(T){try{return u.call(null,y)}catch(C){return u.call(this,y)}}}var l=[],c=!1,f,v=-1;function p(){!c||!f||(c=!1,f.length?l=f.concat(l):v=-1,l.length&&g())}function g(){if(!c){var y=h(p);c=!0;for(var T=l.length;T;){for(f=l,l=[];++v<T;)f&&f[v].run();v=-1,T=l.length}f=null,c=!1,a(y)}}t.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];l.push(new m(y,T)),l.length===1&&!c&&h(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function x(){}t.on=x,t.addListener=x,t.once=x,t.off=x,t.removeListener=x,t.removeAllListeners=x,t.emit=x,t.prependListener=x,t.prependOnceListener=x,t.listeners=function(y){return[]},t.binding=function(y){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(y){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(e,d,t){var n=t(136),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function s(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll")),u}e.exports=s()},function(e,d,t){var n=t(136),u={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function s(){if(typeof importScripts=="function")return u;u.audioData=!!window.Audio,u.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),h=!!o.canPlayType;try{if(h&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(u.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(u.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(u.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(u.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(u.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(u.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(n.edge)u.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var a=parseInt(RegExp.$1,10),l=parseInt(RegExp.$2,10);(a===10&&l>=11||a>10)&&(u.dolby=!0)}}}catch(c){}return u}e.exports=s()},function(e,d){var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function n(){if(typeof importScripts=="function")return t;var u=document.createElement("video"),s=!!u.canPlayType;try{s&&(u.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch(o){}return t}e.exports=n()},function(e,d){var t={available:!1,cancel:"",keyboard:!1,request:""};function n(){if(typeof importScripts=="function")return t;var u,s="Fullscreen",o="FullScreen",h=["request"+s,"request"+o,"webkitRequest"+s,"webkitRequest"+o,"msRequest"+s,"msRequest"+o,"mozRequest"+o,"mozRequest"+s];for(u=0;u<h.length;u++)if(document.documentElement[h[u]]){t.available=!0,t.request=h[u];break}var a=["cancel"+o,"exit"+s,"webkitCancel"+o,"webkitExit"+s,"msCancel"+o,"msExit"+s,"mozCancel"+o,"mozExit"+s];if(t.available){for(u=0;u<a.length;u++)if(document[a[u]]){t.cancel=a[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}e.exports=n()},function(e,d,t){e.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(e,d){var t=function(n,u){return Math.atan2(u.x-n.x,u.y-n.y)};e.exports=t},function(e,d){var t=function(n,u,s,o){return Math.atan2(s-n,o-u)};e.exports=t},function(e,d,t){var n=t(14),u=function(s){return s>Math.PI&&(s-=n.PI2),Math.abs(((s+n.TAU)%n.PI2-n.PI2)%n.PI2)};e.exports=u},function(e,d,t){var n=t(137),u=function(){return n(-Math.PI,Math.PI)};e.exports=u},function(e,d,t){var n=t(137),u=function(){return n(-180,180)};e.exports=u},function(e,d,t){var n=t(351),u=function(s){return n(s+Math.PI)};e.exports=u},function(e,d,t){var n=t(14),u=function(s,o,h){return h===void 0&&(h=.05),s===o||(Math.abs(o-s)<=h||Math.abs(o-s)>=n.PI2-h?s=o:(Math.abs(o-s)>Math.PI&&(o<s?o+=n.PI2:o-=n.PI2),o>s?s+=h:o<s&&(s-=h))),s};e.exports=u},function(e,d){var t=function(n,u){var s=u-n;if(s===0)return 0;var o=Math.floor((s- -180)/360);return s-o*360};e.exports=t},function(e,d,t){e.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(e,d){var t=function(n,u){var s=n.x-u.x,o=n.y-u.y;return s*s+o*o};e.exports=t},function(e,d){var t=function(n,u,s,o){return Math.max(Math.abs(n-s),Math.abs(u-o))};e.exports=t},function(e,d){var t=function(n,u,s,o,h){return h===void 0&&(h=2),Math.sqrt(Math.pow(s-n,h)+Math.pow(o-u,h))};e.exports=t},function(e,d){var t=function(n,u,s,o){return Math.abs(n-s)+Math.abs(u-o)};e.exports=t},function(e,d,t){e.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(e,d,t){e.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(e,d){var t=function(n,u){return u===void 0&&(u=1e-4),Math.ceil(n-u)};e.exports=t},function(e,d){var t=function(n,u){return u===void 0&&(u=1e-4),Math.floor(n+u)};e.exports=t},function(e,d,t){e.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(e,d,t){var n=t(356),u=function(s,o){for(var h=0,a=s.length-1,l=0;l<=a;l++)h+=Math.pow(1-o,a-l)*Math.pow(o,l)*s[l]*n(a,l);return h};e.exports=u},function(e,d,t){var n=t(194),u=function(s,o){var h=s.length-1,a=h*o,l=Math.floor(a);return s[0]===s[h]?(o<0&&(l=Math.floor(a=h*(1+o))),n(a-l,s[(l-1+h)%h],s[l],s[(l+1)%h],s[(l+2)%h])):o<0?s[0]-(n(-a,s[0],s[0],s[1],s[1])-s[0]):o>1?s[h]-(n(a-h,s[h],s[h],s[h-1],s[h-1])-s[h]):n(a-l,s[l?l-1:0],s[l],s[h<l+1?h:l+1],s[h<l+2?h:l+2])};e.exports=u},function(e,d,t){var n=t(135),u=function(s,o){var h=s.length-1,a=h*o,l=Math.floor(a);return o<0?n(s[0],s[1],a):o>1?n(s[h],s[h-1],h-a):n(s[l],s[l+1>h?h:l+1],a-l)};e.exports=u},function(e,d,t){var n=t(183),u=function(s,o,h){return o+(h-o)*n(s,0,1)};e.exports=u},function(e,d,t){e.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(e,d){var t=function(n){return n>0&&(n&n-1)==0};e.exports=t},function(e,d,t){e.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(e,d){var t=function(n,u,s,o){return s===void 0&&(s=0),u===0?n:(n-=s,n=u*Math.round(n/u),o?(s+n)/u:s+n)};e.exports=t},function(e,d,t){var n=t(0),u=new n({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var s=2091639*this.s0+this.c*23283064365386963e-26;return this.c=s|0,this.s0=this.s1,this.s1=this.s2,this.s2=s-this.c,this.s2},hash:function(s){var o,h=this.n;s=s.toString();for(var a=0;a<s.length;a++)h+=s.charCodeAt(a),o=.02519603282416938*h,h=o>>>0,o-=h,o*=h,h=o>>>0,o-=h,h+=o*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(s){typeof s=="string"?this.state(s):this.sow(s)},sow:function(s){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!s)for(var o=0;o<s.length&&s[o]!=null;o++){var h=s[o];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(s,o){return Math.floor(this.realInRange(0,o-s+1)+s)},between:function(s,o){return Math.floor(this.realInRange(0,o-s+1)+s)},realInRange:function(s,o){return this.frac()*(o-s)+s},normal:function(){return 1-2*this.frac()},uuid:function(){var s="",o="";for(o=s="";s++<36;o+=~s%5|s*3&4?(s^15?8^this.frac()*(s^20?16:4):4).toString(16):"-");return o},pick:function(s){return s[this.integerInRange(0,s.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(s){return s[~~(Math.pow(this.frac(),2)*(s.length-1)+.5)]},timestamp:function(s,o){return this.realInRange(s||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(s){return typeof s=="string"&&s.match(/^!rnd/)&&(s=s.split(","),this.c=parseFloat(s[1]),this.s0=parseFloat(s[2]),this.s1=parseFloat(s[3]),this.s2=parseFloat(s[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(s){for(var o=s.length-1,h=o;h>0;h--){var a=Math.floor(this.frac()*(h+1)),l=s[a];s[a]=s[h],s[h]=l}return s}});e.exports=u},function(e,d){var t=function(n){for(var u=0,s=0;s<n.length;s++)u+=+n[s];return u/n.length};e.exports=t},function(e,d){var t=function(n,u,s){u===void 0&&(u=0),s===void 0&&(s=10);var o=Math.pow(s,-u);return Math.ceil(n*o)/o};e.exports=t},function(e,d){var t=function(n,u){return Math.abs(n-u)};e.exports=t},function(e,d,t){var n=t(18),u=t(0),s=t(69),o=t(1),h=new s,a=new u({initialize:function l(c,f,v,p){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=l.DefaultOrder),this._x=c,this._y=f,this._z=v,this._order=p,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(l){this._x=l,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(l){this._y=l,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(l){this._z=l,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(l){this._order=l,this.onChangeCallback(this)}},set:function(l,c,f,v){return v===void 0&&(v=this._order),this._x=l,this._y=c,this._z=f,this._order=v,this.onChangeCallback(this),this},copy:function(l){return this.set(l.x,l.y,l.z,l.order)},setFromQuaternion:function(l,c,f){return c===void 0&&(c=this._order),f===void 0&&(f=!1),h.fromQuat(l),this.setFromRotationMatrix(h,c,f)},setFromRotationMatrix:function(l,c,f){c===void 0&&(c=this._order),f===void 0&&(f=!1);var v=l.val,p=v[0],g=v[4],m=v[8],x=v[1],y=v[5],T=v[9],C=v[2],S=v[6],E=v[10],M=0,R=0,L=0,O=.99999;switch(c){case"XYZ":{R=Math.asin(n(m,-1,1)),Math.abs(m)<O?(M=Math.atan2(-T,E),L=Math.atan2(-g,p)):M=Math.atan2(S,y);break}case"YXZ":{M=Math.asin(-n(T,-1,1)),Math.abs(T)<O?(R=Math.atan2(m,E),L=Math.atan2(x,y)):R=Math.atan2(-C,p);break}case"ZXY":{M=Math.asin(n(S,-1,1)),Math.abs(S)<O?(R=Math.atan2(-C,E),L=Math.atan2(-g,y)):L=Math.atan2(x,p);break}case"ZYX":{R=Math.asin(-n(C,-1,1)),Math.abs(C)<O?(M=Math.atan2(S,E),L=Math.atan2(x,p)):L=Math.atan2(-g,y);break}case"YZX":{L=Math.asin(n(x,-1,1)),Math.abs(x)<O?(M=Math.atan2(-T,y),R=Math.atan2(-C,p)):R=Math.atan2(m,E);break}case"XZY":{L=Math.asin(-n(g,-1,1)),Math.abs(g)<O?(M=Math.atan2(S,y),R=Math.atan2(m,p)):M=Math.atan2(-T,E);break}}return this._x=M,this._y=R,this._z=L,this._order=c,f&&this.onChangeCallback(this),this}});a.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],a.DefaultOrder="XYZ",e.exports=a},function(e,d){var t=function(n,u,s){u===void 0&&(u=0),s===void 0&&(s=10);var o=Math.pow(s,-u);return Math.floor(n*o)/o};e.exports=t},function(e,d){var t=function(n,u){return n/u/1e3};e.exports=t},function(e,d){var t=function(n){return n==parseFloat(n)?!(n%2):void 0};e.exports=t},function(e,d){var t=function(n){return n===parseFloat(n)?!(n%2):void 0};e.exports=t},function(e,d){var t=function(n,u,s){return Math.min(n+u,s)};e.exports=t},function(e,d){var t=function(n){var u=n.length;if(u===0)return 0;n.sort(function(o,h){return o-h});var s=Math.floor(u/2);return u%2==0?(n[s]+n[s-1])/2:n[s]};e.exports=t},function(e,d){var t=function(n,u,s){return Math.max(n-u,s)};e.exports=t},function(e,d){var t=function(n,u,s,o){s===void 0&&(s=u+1);var h=(n-u)/(s-u);return h>1?o!==void 0?(h=(o-n)/(o-s),h<0&&(h=0)):h=1:h<0&&(h=0),h};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u=1);var s=Math.random()*2*Math.PI;return n.x=Math.cos(s)*u,n.y=Math.sin(s)*u,n};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u=1);var s=Math.random()*2*Math.PI,o=Math.random()*2-1,h=Math.sqrt(1-o*o)*u;return n.x=Math.cos(s)*h,n.y=Math.sin(s)*h,n.z=o*u,n};e.exports=t},function(e,d){var t=function(n,u){return u===void 0&&(u=1),n.x=(Math.random()*2-1)*u,n.y=(Math.random()*2-1)*u,n.z=(Math.random()*2-1)*u,n.w=(Math.random()*2-1)*u,n};e.exports=t},function(e,d){var t=function(n,u,s,o,h){return n.x=u+h*Math.cos(o),n.y=s+h*Math.sin(o),n};e.exports=t},function(e,d){var t=function(n,u,s){u===void 0&&(u=0),s===void 0&&(s=10);var o=Math.pow(s,-u);return Math.round(n*o)/o};e.exports=t},function(e,d){var t=function(n,u,s,o){u===void 0&&(u=1),s===void 0&&(s=1),o===void 0&&(o=1),o*=Math.PI/n;for(var h=[],a=[],l=0;l<n;l++)s-=u*o,u+=s*o,h[l]=s,a[l]=u;return{sin:a,cos:h,length:n}};e.exports=t},function(e,d,t){var n=t(3),u=function(s,o,h,a){a===void 0&&(a=new n);var l=0,c=0,f=o*h;return s>0&&s<=f&&(s>o-1?(c=Math.floor(s/o),l=s-c*o):l=s),a.set(l,c)};e.exports=u},function(e,d){var t=function(n,u,s){return Math.abs(n-u)<=s};e.exports=t},function(e,d,t){var n=t(39),u=t(69),s=t(365),o=new u,h=new s,a=new n,l=function(c,f,v){return h.setAxisAngle(f,v),o.fromRotationTranslation(h,a.set(0,0,0)),c.transformMat4(o)};e.exports=l},function(e,d){e.exports="addtexture"},function(e,d){e.exports="onerror"},function(e,d){e.exports="onload"},function(e,d){e.exports="ready"},function(e,d){e.exports="removetexture"},function(e,d){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,d){e.exports="pipelineafterflush"},function(e,d){e.exports="pipelinebeforeflush"},function(e,d){e.exports="pipelinebind"},function(e,d){e.exports="pipelineboot"},function(e,d){e.exports="pipelinedestroy"},function(e,d){e.exports="pipelinerebind"},function(e,d){e.exports="pipelineresize"},function(e,d){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,d){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,d,t){e.exports={GenerateTexture:t(388),Palettes:t(889)}},function(e,d,t){e.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(e,d){e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,d){e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,d){e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,d){e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,d,t){e.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(e,d,t){var n=t(0),u=t(390),s=t(391),o=t(5),h=t(392),a=t(393),l=t(394),c=t(10),f=t(395),v=t(3),p=t(14),g=new n({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new h(x,m)),this},cubicBezierTo:function(m,x,y,T,C,S){var E=this.getEndPoint(),M,R,L;return m instanceof v?(M=m,R=x,L=y):(M=new v(y,T),R=new v(C,S),L=new v(m,x)),this.add(new u(E,M,R,L))},quadraticBezierTo:function(m,x,y,T){var C=this.getEndPoint(),S,E;return m instanceof v?(S=m,E=x):(S=new v(y,T),E=new v(m,x)),this.add(new l(C,S,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,C,S){var E=new s(0,0,m,x,y,T,C,S),M=this.getEndPoint(this._tmpVec2A),R=E.getStartPoint(this._tmpVec2B);return M.subtract(R),E.x=M.x,E.y=M.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(h.fromJSON(y));break;case"EllipseCurve":this.add(s.fromJSON(y));break;case"SplineCurve":this.add(f.fromJSON(y));break;case"CubicBezierCurve":this.add(u.fromJSON(y));break;case"QuadraticBezierCurve":this.add(l.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new c),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new c,T=p.MIN_SAFE_INTEGER,C=p.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return m.right=T,m.bottom=C,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),R=M===0?0:1-S/M;return E.getPointAt(R,x)}C++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(!!C.active)for(var S=C.getResolution(m),E=C.getPoints(S),M=0;M<E.length;M++){var R=E[M];y&&y.equals(R)||(x.push(R),y=R)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new v),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new v),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),R=M===0?0:1-S/M;return E.getTangentAt(R,x)}C++}return null},lineTo:function(m,x){m instanceof v?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new h([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new f(m))},moveTo:function(m,x){return m instanceof v?this.add(new a(m.x,m.y)):this.add(new a(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(m,x){return new g(m,x)}),e.exports=g},function(e,d,t){e.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(e,d,t){var n=t(0),u=t(101),s=t(24),o=t(20),h=new n({Extends:u,initialize:function(l){u.call(this,l,l.sys.events),this.scene=l,this.systems=l.sys,l.sys.events.once(o.BOOT,this.boot,this),l.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){u.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",h,"data"),e.exports=h},function(e,d,t){e.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(e,d,t){var n=t(123),u=t(17),s={In:t(900),To:t(901)};s=u(!1,s,n),e.exports=s},function(e,d,t){e.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(e,d,t){e.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(e,d,t){e.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(e,d,t){var n=t(42),u=t(43),s=t(44),o=t(45),h=function(a,l){l===void 0&&(l={});var c=u(a),f=o(a);return l.x=c,l.y=f,l.width=s(a)-c,l.height=n(a)-f,l};e.exports=h},function(e,d){var t=function(n){return n.width*n.originX};e.exports=t},function(e,d){var t=function(n){return n.height*n.originY};e.exports=t},function(e,d,t){e.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(e,d){var t=function(n,u){return u===void 0&&(u="none"),n.style.msTouchAction=u,n.style["ms-touch-action"]=u,n.style["touch-action"]=u,n};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u="none");var s=["-webkit-","-khtml-","-moz-","-ms-",""];return s.forEach(function(o){n.style[o+"user-select"]=u}),n.style["-webkit-touch-callout"]=u,n.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",n};e.exports=t},function(e,d,t){var n=t(103),u=function(s){s===void 0&&(s=1024);var o=[],h=255,a,l=255,c=0,f=0;for(a=0;a<=h;a++)o.push({r:l,g:a,b:f,color:n(l,a,f)});for(c=255,a=h;a>=0;a--)o.push({r:a,g:c,b:f,color:n(a,c,f)});for(l=0,a=0;a<=h;a++,c--)o.push({r:l,g:c,b:a,color:n(l,c,a)});for(c=0,f=255,a=0;a<=h;a++,f--,l++)o.push({r:l,g:c,b:f,color:n(l,c,f)});if(s===1024)return o;var v=[],p=0,g=1024/s;for(a=0;a<s;a++)v.push(o[Math.floor(p)]),p+=g;return v};e.exports=u},function(e,d){var t=function(n){var u={r:n>>16&255,g:n>>8&255,b:n&255,a:255};return n>16777215&&(u.a=n>>>24),u};e.exports=t},function(e,d,t){var n=t(38),u=t(399),s=function(o,h,a){var l=a,c=a,f=a;if(h!==0){var v=a<.5?a*(1+h):a+h-a*h,p=2*a-v;l=u(p,v,o+1/3),c=u(p,v,o),f=u(p,v,o-1/3)}var g=new n;return g.setGLTo(l,c,f,1)};e.exports=s},function(e,d,t){var n=t(188),u=function(s,o){s===void 0&&(s=1),o===void 0&&(o=1);for(var h=[],a=0;a<=359;a++)h.push(n(a/359,s,o));return h};e.exports=u},function(e,d,t){var n=t(135),u=function(h,a,l,c,f,v,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:n(h,c,m),g:n(a,f,m),b:n(l,v,m)}},s=function(h,a,l,c){return l===void 0&&(l=100),c===void 0&&(c=0),u(h.r,h.g,h.b,a.r,a.g,a.b,l,c)},o=function(h,a,l,c,f,v){return f===void 0&&(f=100),v===void 0&&(v=0),u(h.r,h.g,h.b,a,l,c,f,v)};e.exports={RGBWithRGB:u,ColorWithRGB:o,ColorWithColor:s}},function(e,d,t){var n=t(195),u=t(38),s=function(o,h){return o===void 0&&(o=0),h===void 0&&(h=255),new u(n(o,h),n(o,h),n(o,h))};e.exports=s},function(e,d,t){var n=t(398),u=function(s,o,h,a,l){return a===void 0&&(a=255),l===void 0&&(l="#"),l==="#"?"#"+((1<<24)+(s<<16)+(o<<8)+h).toString(16).slice(1,7):"0x"+n(a)+n(s)+n(o)+n(h)};e.exports=u},function(e,d,t){e.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(e,d,t){var n={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};e.exports=n},function(e,d,t){e.exports={EventEmitter:t(919)}},function(e,d,t){var n=t(0),u=t(9),s=t(24),o=new n({Extends:u,initialize:function(){u.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",o,"events"),e.exports=o},function(e,d,t){var n=t(142),u=t(321),s=t(325),o=t(31),h=t(0),a=t(346),l=t(921),c=t(366),f=t(101),v=t(384),p=t(347),g=t(400),m=t(9),x=t(22),y=t(409),T=t(24),C=t(414),S=t(415),E=t(417),M=t(106),R=t(422),L=t(385),O=t(387),F=t(426),D=new h({initialize:function(b){this.config=new a(b),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new u(this),this.textures=new R(this),this.cache=new s(this),this.registry=new f(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new S(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new L(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),l(this),v(this),n(this.canvas,this.config.parent),this.textures.once(M.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),O(this);var B=this.events;B.on(x.HIDDEN,this.onHidden,this),B.on(x.VISIBLE,this.onVisible,this),B.on(x.BLUR,this.onBlur,this),B.on(x.FOCUS,this.onFocus,this)},step:function(B,b){if(this.pendingDestroy)return this.runDestroy();var V=this.events;V.emit(x.PRE_STEP,B,b),V.emit(x.STEP,B,b),this.scene.update(B,b),V.emit(x.POST_STEP,B,b);var X=this.renderer;X.preRender(),V.emit(x.PRE_RENDER,X,B,b),this.scene.render(X),X.postRender(),V.emit(x.POST_RENDER,X,B,b)},headlessStep:function(B,b){if(this.pendingDestroy)return this.runDestroy();var V=this.events;V.emit(x.PRE_STEP,B,b),V.emit(x.STEP,B,b),this.scene.update(B,b),V.emit(x.POST_STEP,B,b),V.emit(x.PRE_RENDER),V.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,b){b===void 0&&(b=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=b},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=D},function(e,d,t){var n=t(142),u=function(s){var o=s.config;if(!(!o.parent||!o.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+s.scale.width+"px;","height: "+s.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),s.domContainer=h,n(h,o.parent)}};e.exports=u},function(e,d){e.exports="boot"},function(e,d){e.exports="destroy"},function(e,d){e.exports="dragend"},function(e,d){e.exports="dragenter"},function(e,d){e.exports="drag"},function(e,d){e.exports="dragleave"},function(e,d){e.exports="dragover"},function(e,d){e.exports="dragstart"},function(e,d){e.exports="drop"},function(e,d){e.exports="gameout"},function(e,d){e.exports="gameover"},function(e,d){e.exports="gameobjectdown"},function(e,d){e.exports="dragend"},function(e,d){e.exports="dragenter"},function(e,d){e.exports="drag"},function(e,d){e.exports="dragleave"},function(e,d){e.exports="dragover"},function(e,d){e.exports="dragstart"},function(e,d){e.exports="drop"},function(e,d){e.exports="gameobjectmove"},function(e,d){e.exports="gameobjectout"},function(e,d){e.exports="gameobjectover"},function(e,d){e.exports="pointerdown"},function(e,d){e.exports="pointermove"},function(e,d){e.exports="pointerout"},function(e,d){e.exports="pointerover"},function(e,d){e.exports="pointerup"},function(e,d){e.exports="wheel"},function(e,d){e.exports="gameobjectup"},function(e,d){e.exports="gameobjectwheel"},function(e,d){e.exports="boot"},function(e,d){e.exports="process"},function(e,d){e.exports="update"},function(e,d){e.exports="pointerdown"},function(e,d){e.exports="pointerdownoutside"},function(e,d){e.exports="pointermove"},function(e,d){e.exports="pointerout"},function(e,d){e.exports="pointerover"},function(e,d){e.exports="pointerup"},function(e,d){e.exports="pointerupoutside"},function(e,d){e.exports="wheel"},function(e,d){e.exports="pointerlockchange"},function(e,d){e.exports="preupdate"},function(e,d){e.exports="shutdown"},function(e,d){e.exports="start"},function(e,d){e.exports="update"},function(e,d){e.exports="addfile"},function(e,d){e.exports="complete"},function(e,d){e.exports="filecomplete"},function(e,d){e.exports="filecomplete-"},function(e,d){e.exports="loaderror"},function(e,d){e.exports="load"},function(e,d){e.exports="fileprogress"},function(e,d){e.exports="postprocess"},function(e,d){e.exports="progress"},function(e,d){e.exports="start"},function(e,d,t){var n={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=n},function(e,d){var t=function(n,u,s){if(!s.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=n.source[u];n.add("__BASE",u,0,0,o.width,o.height);for(var h=s.getElementsByTagName("SubTexture"),a,l=0;l<h.length;l++){var c=h[l].attributes,f=c.name.value,v=parseInt(c.x.value,10),p=parseInt(c.y.value,10),g=parseInt(c.width.value,10),m=parseInt(c.height.value,10);if(a=n.add(f,u,v,p,g,m),c.frameX){var x=Math.abs(parseInt(c.frameX.value,10)),y=Math.abs(parseInt(c.frameY.value,10)),T=parseInt(c.frameWidth.value,10),C=parseInt(c.frameHeight.value,10);a.setTrim(g,m,x,y,T,C)}}return n};e.exports=t},function(e,d){var t=function(n,u){var s=n.source[u];return n.add("__BASE",u,0,0,s.width,s.height),n};e.exports=t},function(e,d){var t=function(n,u){var s=n.source[u];return n.add("__BASE",u,0,0,s.width,s.height),n};e.exports=t},function(e,d,t){var n=t(77),u=function(s,o,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var a=s.source[o];s.add("__BASE",o,0,0,a.width,a.height);for(var l=Array.isArray(h.textures)?h.textures[o].frames:h.frames,c,f=0;f<l.length;f++){var v=l[f];c=s.add(v.filename,o,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=n(v)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?s.customData[g]=h[g].slice(0):s.customData[g]=h[g]);return s};e.exports=u},function(e,d,t){var n=t(77),u=function(s,o,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var a=s.source[o];s.add("__BASE",o,0,0,a.width,a.height);var l=h.frames,c;for(var f in l)if(!!l.hasOwnProperty(f)){var v=l[f];c=s.add(f,o,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=n(v)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?s.customData[g]=h[g].slice(0):s.customData[g]=h[g]);return s};e.exports=u},function(e,d,t){var n=t(2),u=function(s,o,h,a,l,c,f){var v=n(f,"frameWidth",null),p=n(f,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=s.source[o];s.add("__BASE",o,0,0,g.width,g.height);var m=n(f,"startFrame",0),x=n(f,"endFrame",-1),y=n(f,"margin",0),T=n(f,"spacing",0),C=Math.floor((l-y+T)/(v+T)),S=Math.floor((c-y+T)/(p+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",s.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var M=y,R=y,L=0,O=0,F=0;F<E;F++){L=0,O=0;var D=M+v,B=R+p;D>l&&(L=D-l),B>c&&(O=B-c),s.add(F,o,h+M,a+R,v-L,p-O),M+=v+T,M+v>l&&(M=y,R+=p+T)}return s};e.exports=u},function(e,d,t){var n=t(2),u=function(s,o,h){var a=n(h,"frameWidth",null),l=n(h,"frameHeight",a);if(!a)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=s.source[0];s.add("__BASE",0,0,0,c.width,c.height);var f=n(h,"startFrame",0),v=n(h,"endFrame",-1),p=n(h,"margin",0),g=n(h,"spacing",0),m=o.cutX,x=o.cutY,y=o.cutWidth,T=o.cutHeight,C=o.realWidth,S=o.realHeight,E=Math.floor((C-p+g)/(a+g)),M=Math.floor((S-p+g)/(l+g)),R=E*M,L=o.x,O=a-L,F=a-(C-y-L),D=o.y,B=l-D,b=l-(S-T-D);(f>R||f<-R)&&(f=0),f<0&&(f=R+f),v!==-1&&(R=f+(v+1));for(var V,X=p,K=p,J=0,G=o.sourceIndex,w=0;w<M;w++){for(var N=w===0,z=w===M-1,U=0;U<E;U++){var W=U===0,H=U===E-1;if(V=s.add(J,G,m+X,x+K,a,l),W||N||H||z){var Z=W?L:0,q=N?D:0,_=0,nt=0;W&&(_+=a-O),H&&(_+=a-F),N&&(nt+=l-B),z&&(nt+=l-b);var rt=a-_,at=l-nt;V.cutWidth=rt,V.cutHeight=at,V.setTrim(a,l,Z,q,rt,at)}X+=g,W?X+=O:H?X+=F:X+=a,J++}X=p,K+=g,N?K+=B:z?K+=b:K+=l}return s};e.exports=u},function(e,d){var t=0,n=function(s,o,h,a){var l=t-a.y-a.height;s.add(h,o,a.x,l,a.width,a.height)},u=function(s,o,h){var a=s.source[o];s.add("__BASE",o,0,0,a.width,a.height),t=a.height;for(var l=h.split(`
`),c=/^[ ]*(- )*(\w+)+[: ]+(.*)/,f="",v="",p={x:0,y:0,width:0,height:0},g=0;g<l.length;g++){var m=l[g].match(c);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(v!==f&&(n(s,o,v,p),f=v),p={x:0,y:0,width:0,height:0}),y==="name"){v=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return v!==f&&n(s,o,v,p),s};e.exports=u},function(e,d){e.exports="complete"},function(e,d){e.exports="decoded"},function(e,d){e.exports="decodedall"},function(e,d){e.exports="destroy"},function(e,d){e.exports="detune"},function(e,d){e.exports="detune"},function(e,d){e.exports="mute"},function(e,d){e.exports="rate"},function(e,d){e.exports="volume"},function(e,d){e.exports="loop"},function(e,d){e.exports="looped"},function(e,d){e.exports="mute"},function(e,d){e.exports="pan"},function(e,d){e.exports="pauseall"},function(e,d){e.exports="pause"},function(e,d){e.exports="play"},function(e,d){e.exports="rate"},function(e,d){e.exports="resumeall"},function(e,d){e.exports="resume"},function(e,d){e.exports="seek"},function(e,d){e.exports="stopall"},function(e,d){e.exports="stop"},function(e,d){e.exports="unlocked"},function(e,d){e.exports="volume"},function(e,d,t){var n={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};n.Shader=t(229),n.Mesh=t(230),n.PointLight=t(150),n.Factories.Shader=t(1184),n.Factories.Mesh=t(1185),n.Factories.PointLight=t(1186),n.Creators.Shader=t(1187),n.Creators.Mesh=t(1188),n.Creators.PointLight=t(1189),n.Light=t(481),n.LightsManager=t(482),n.LightsPlugin=t(1190),e.exports=n},function(e,d,t){var n=t(0),u=t(110),s=t(24),o=t(75),h=t(20),a=t(79),l=new n({Extends:u,initialize:function(f){u.call(this,f),this.sortChildrenFlag=!1,this.scene=f,this.systems=f.sys,this.events=f.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(o.ADDED_TO_SCENE,c,this.scene),this.events.emit(h.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(o.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(a(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,f){return c._depth-f._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,f=c.length;f--;)c[f].destroy(!0);c.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",l,"displayList"),e.exports=l},function(e,d,t){e.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(e,d,t){var n=t(186),u=t(209),s=function(o){var h="";if(!u(o))return h;for(var a=0;a<o.length;a++){for(var l=0;l<o[a].length;l++){var c=o[a][l].toString();c!=="undefined"?h+=n(c,2):h+="?",l<o[a].length-1&&(h+=" |")}if(a<o.length-1){h+=`
`;for(var f=0;f<o[a].length;f++)h+="---",f<o[a].length-1&&(h+="+");h+=`
`}}return h};e.exports=s},function(e,d){var t=function(n){return n.reverse()};e.exports=t},function(e,d){var t=function(n){for(var u=0;u<n.length;u++)n[u].reverse();return n};e.exports=t},function(e,d,t){var n=t(147),u=function(s){return n(s,180)};e.exports=u},function(e,d,t){var n=t(147),u=function(s){return n(s,90)};e.exports=u},function(e,d,t){var n=t(147),u=function(s){return n(s,-90)};e.exports=u},function(e,d,t){var n=t(178),u=t(179),s=function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),a!==0&&(a<0?n(o,Math.abs(a)):u(o,a)),h!==0)for(var l=0;l<o.length;l++){var c=o[l];h<0?n(c,Math.abs(h)):u(c,h)}return o};e.exports=s},function(e,d){var t=function(n,u,s,o,h){if(h===void 0&&(h=n),s>0){var a=s-n.length;if(a<=0)return null}if(!Array.isArray(u))return n.indexOf(u)===-1?(n.push(u),o&&o.call(h,u),u):null;for(var l=u.length-1;l>=0;)n.indexOf(u[l])!==-1&&u.splice(l,1),l--;if(l=u.length,l===0)return null;s>0&&l>a&&(u.splice(a),l=a);for(var c=0;c<l;c++){var f=u[c];n.push(f),o&&o.call(h,f)}return u};e.exports=t},function(e,d){var t=function(n,u,s,o,h,a){if(s===void 0&&(s=0),a===void 0&&(a=n),o>0){var l=o-n.length;if(l<=0)return null}if(!Array.isArray(u))return n.indexOf(u)===-1?(n.splice(s,0,u),h&&h.call(a,u),u):null;for(var c=u.length-1;c>=0;)n.indexOf(u[c])!==-1&&u.pop(),c--;if(c=u.length,c===0)return null;o>0&&c>l&&(u.splice(l),c=l);for(var f=c-1;f>=0;f--){var v=u[f];n.splice(s,0,v),h&&h.call(a,v)}return u};e.exports=t},function(e,d){var t=function(n,u){var s=n.indexOf(u);return s!==-1&&s<n.length&&(n.splice(s,1),n.push(u)),u};e.exports=t},function(e,d,t){var n=t(78),u=function(s,o,h,a,l){a===void 0&&(a=0),l===void 0&&(l=s.length);var c=0;if(n(s,a,l))for(var f=a;f<l;f++){var v=s[f];v[o]===h&&c++}return c};e.exports=u},function(e,d){var t=function(n,u,s){var o,h=[null];for(o=3;o<arguments.length;o++)h.push(arguments[o]);for(o=0;o<n.length;o++)h[0]=n[o],u.apply(s,h);return n};e.exports=t},function(e,d,t){var n=t(78),u=function(s,o,h,a,l){if(a===void 0&&(a=0),l===void 0&&(l=s.length),n(s,a,l)){var c,f=[null];for(c=5;c<arguments.length;c++)f.push(arguments[c]);for(c=a;c<l;c++)f[0]=s[c],o.apply(h,f)}return s};e.exports=u},function(e,d){var t=function(n,u){var s=n.indexOf(u);if(s>0){var o=n[s-1],h=n.indexOf(o);n[s]=o,n[h]=u}return n};e.exports=t},function(e,d){var t=function(n,u,s){var o=n.indexOf(u);if(o===-1||s<0||s>=n.length)throw new Error("Supplied index out of bounds");return o!==s&&(n.splice(o,1),n.splice(s,0,u)),u};e.exports=t},function(e,d){var t=function(n,u){var s=n.indexOf(u);if(s!==-1&&s<n.length-1){var o=n[s+1],h=n.indexOf(o);n[s]=o,n[h]=u}return n};e.exports=t},function(e,d){var t=function(n,u,s){if(u===s)return n;var o=n.indexOf(u),h=n.indexOf(s);if(o<0||h<0)throw new Error("Supplied items must be elements of the same array");return o>h||(n.splice(o,1),h===n.length-1?n.push(u):n.splice(h,0,u)),n};e.exports=t},function(e,d){var t=function(n,u,s){if(u===s)return n;var o=n.indexOf(u),h=n.indexOf(s);if(o<0||h<0)throw new Error("Supplied items must be elements of the same array");return o<h||(n.splice(o,1),h===0?n.unshift(u):n.splice(h,0,u)),n};e.exports=t},function(e,d,t){var n=t(363),u=function(s,o,h){s===void 0&&(s=0),o===void 0&&(o=null),h===void 0&&(h=1),o===null&&(o=s,s=0);for(var a=[],l=Math.max(n((o-s)/(h||1)),0),c=0;c<l;c++)a.push(s),s+=h;return a};e.exports=u},function(e,d,t){var n=t(74),u=function(s,o,h,a){if(a===void 0&&(a=s),o<0||o>s.length-1)throw new Error("Index out of bounds");var l=n(s,o);return h&&h.call(a,l),l};e.exports=u},function(e,d,t){var n=t(78),u=function(s,o,h,a,l){if(o===void 0&&(o=0),h===void 0&&(h=s.length),l===void 0&&(l=s),n(s,o,h)){var c=h-o,f=s.splice(o,c);if(a)for(var v=0;v<f.length;v++){var p=f[v];a.call(l,p)}return f}else return[]};e.exports=u},function(e,d,t){var n=t(74),u=function(s,o,h){o===void 0&&(o=0),h===void 0&&(h=s.length);var a=o+Math.floor(Math.random()*h);return n(s,a)};e.exports=u},function(e,d){var t=function(n,u,s){var o=n.indexOf(u),h=n.indexOf(s);return o!==-1&&h===-1?(n[o]=s,!0):!1};e.exports=t},function(e,d){var t=function(n,u){var s=n.indexOf(u);return s!==-1&&s>0&&(n.splice(s,1),n.unshift(u)),u};e.exports=t},function(e,d,t){var n=t(78),u=function(s,o,h,a,l){if(a===void 0&&(a=0),l===void 0&&(l=s.length),n(s,a,l))for(var c=a;c<l;c++){var f=s[c];f.hasOwnProperty(o)&&(f[o]=h)}return s};e.exports=u},function(e,d){var t=function(n,u,s){if(u===s)return n;var o=n.indexOf(u),h=n.indexOf(s);if(o<0||h<0)throw new Error("Supplied items must be elements of the same array");return n[o]=s,n[h]=u,n};e.exports=t},function(e,d,t){var n=t(0),u=t(211),s=t(24),o=t(20),h=new n({Extends:u,initialize:function(l){u.call(this),this.checkQueue=!0,this.scene=l,this.systems=l.sys,l.sys.events.once(o.BOOT,this.boot,this),l.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(o.PRE_UPDATE,this.update,this),a.on(o.UPDATE,this.sceneUpdate,this),a.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(a,l){for(var c=this._active,f=c.length,v=0;v<f;v++){var p=c[v];p.active&&p.preUpdate.call(p,a,l)}},shutdown:function(){for(var a=this._active.length;a--;)this._active[a].destroy(!0);for(a=this._pending.length;a--;)this._pending[a].destroy(!0);for(a=this._destroy.length;a--;)this._destroy[a].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var l=this.systems.events;l.off(o.PRE_UPDATE,this.update,this),l.off(o.UPDATE,this.sceneUpdate,this),l.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",h,"updateList"),e.exports=h},function(e,d){e.exports="add"},function(e,d){e.exports="remove"},function(e,d){var t=function(n,u,s,o){if(s===void 0&&(s=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var h=n.text,a=h.length,l=n.maxWidth,c=n.wordWrapCharCode,f=Number.MAX_VALUE,v=Number.MAX_VALUE,p=0,g=0,m=n.fontData.chars,x=n.fontData.lineHeight,y=n.letterSpacing,T=0,C=0,S=0,E=null,M=n._align,R=0,L=0,O=n.fontSize/n.fontData.size,F=O*n.scaleX,D=O*n.scaleY,B=null,b=0,V=[],X=Number.MAX_VALUE,K=0,J=0,G=0,w,N=[],z=[],U=null;if(l>0){for(w=0;w<a;w++){if(S=h.charCodeAt(w),S===10){U!==null&&(N.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!0}),U=null),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(B!==null)var W=E.kerning[b];S===c?U!==null&&(N.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!1}),U=null):(U===null&&(U={word:"",i:w,x:T,y:C,w:0,h:x,cr:!1}),U.word=U.word.concat(h[w]),U.w+=E.xOffset+E.xAdvance+(W!==void 0?W:0)),T+=E.xAdvance+y,B=E,b=S}}U!==null&&N.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!1}),T=0,C=0,B=null,b=0;var H,Z=0,q=[];for(w=0;w<N.length;w++){var _=N[w],nt=_.x,rt=_.x+_.w;if(H){var at=nt-(H.x+H.w);Z=nt-(at+H.w),H=null}var vt=nt-Z,ut=rt-Z;vt>l||ut>l?(q.push(_.i-1),_.cr?(q.push(_.i+_.word.length),Z=0,H=null):H=_):_.cr&&(q.push(_.i+_.word.length),Z=0,H=null)}var ct=function(qt,ee,Ee){return qt.substr(0,ee)+Ee+qt.substr(ee+1)};for(w=q.length-1;w>=0;w--)h=ct(h,q[w],`
`);o.wrappedText=h,a=h.length,N=[],U=null}var Ft=0;for(w=0;w<a;w++){if(S=h.charCodeAt(w),S===10){U!==null&&(N.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),U=null),T=0,C+=x,B=null,V[J]=G,G>K&&(K=G),G<X&&(X=G),J++,G=0;continue}if(E=m[S],!!E){if(R=T,L=C,B!==null){var yt=E.kerning[b];R+=yt!==void 0?yt:0}f>R&&(f=R),v>L&&(v=L);var Tt=R+E.xAdvance,dt=L+x;p<Tt&&(p=Tt),g<dt&&(g=dt);var It=E.xOffset+E.xAdvance+(yt!==void 0?yt:0);S===c?U!==null&&(N.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),U=null):(U===null&&(U={word:"",i:Ft,x:T,y:C,w:0,h:x}),U.word=U.word.concat(h[w]),U.w+=It),z.push({i:Ft,char:h[w],code:S,x:(E.xOffset+T)*O,y:(E.yOffset+C)*O,w:E.width*O,h:E.height*O,t:C*O,r:Tt*O,b:x*O,line:J,glyph:E}),T+=E.xAdvance+y,B=E,b=S,G=Tt*O,Ft++}}if(U!==null&&N.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),V[J]=G,G>K&&(K=G),G<X&&(X=G),M>0)for(var gt=0;gt<z.length;gt++){var Pt=z[gt];if(M===1){var ge=(K-V[Pt.line])/2;Pt.x+=ge,Pt.r+=ge}else if(M===2){var Ge=K-V[Pt.line];Pt.x+=Ge,Pt.r+=Ge}}var Ht=o.local,Vt=o.global,te=o.lines;return Ht.x=f*O,Ht.y=v*O,Ht.width=p*O,Ht.height=g*O,Vt.x=n.x-n._displayOriginX+f*F,Vt.y=n.y-n._displayOriginY+v*D,Vt.width=p*F,Vt.height=g*D,te.shortest=X,te.longest=K,te.lengths=V,u&&(Ht.x=Math.ceil(Ht.x),Ht.y=Math.ceil(Ht.y),Ht.width=Math.ceil(Ht.width),Ht.height=Math.ceil(Ht.height),Vt.x=Math.ceil(Vt.x),Vt.y=Math.ceil(Vt.y),Vt.width=Math.ceil(Vt.width),Vt.height=Math.ceil(Vt.height),te.shortest=Math.ceil(X),te.longest=Math.ceil(K)),s&&(n._displayOriginX=n.originX*Ht.width,n._displayOriginY=n.originY*Ht.height,Vt.x=n.x-n._displayOriginX*n.scaleX,Vt.y=n.y-n._displayOriginY*n.scaleY,u&&(Vt.x=Math.ceil(Vt.x),Vt.y=Math.ceil(Vt.y))),o.words=N,o.characters=z,o.lines.height=x,o.scale=O,o.scaleX=n.scaleX,o.scaleY=n.scaleY,o};e.exports=t},function(e,d,t){var n=t(212),u=function(s,o,h,a,l,c,f){var v=s.sys.textures.get(h),p=v.get(a),g=s.sys.cache.xml.get(l);if(p&&g){var m=n(g,p,c,f,v);return s.sys.cache.bitmapFont.add(o,{data:m,texture:h,frame:a,fromAtlas:!0}),!0}else return!1};e.exports=u},function(e,d,t){var n=t(1),u=t(1);n=t(1046),u=t(1048),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(1047),u=t(19),s=t(12),o=function(h,a,l,c){var f=a._text,v=f.length;if(v!==0){l.addToRenderList(a);var p=h.pipelines.set(a.pipeline,a),g=u(a,l,c).calc,m=l.roundPixels,x=l.alpha,y=a.charColors,T=a.tintFill,C=s.getTintAppendFloatAlpha,S=C(a.tintTopLeft,x*a._alphaTL),E=C(a.tintTopRight,x*a._alphaTR),M=C(a.tintBottomLeft,x*a._alphaBL),R=C(a.tintBottomRight,x*a._alphaBR),L=a.frame.glTexture,O=p.setGameObject(a),F=a.getTextBounds(!1),D,B,b,V=F.characters,X=a.dropShadowX,K=a.dropShadowY,J=X!==0||K!==0;if(h.pipelines.preBatch(a),J){var G=a.dropShadowColor,w=a.dropShadowAlpha,N=C(G,x*w*a._alphaTL),z=C(G,x*w*a._alphaTR),U=C(G,x*w*a._alphaBL),W=C(G,x*w*a._alphaBR);for(D=0;D<V.length;D++)B=V[D],b=B.glyph,!(B.code===32||b.width===0||b.height===0)&&n(p,a,B,b,X,K,g,m,N,z,U,W,1,L,O)}for(D=0;D<V.length;D++)if(B=V[D],b=B.glyph,!(B.code===32||b.width===0||b.height===0))if(y[B.i]){var H=y[B.i],Z=H.tintEffect,q=C(H.tintTL,x*a._alphaTL),_=C(H.tintTR,x*a._alphaTR),nt=C(H.tintBL,x*a._alphaBL),rt=C(H.tintBR,x*a._alphaBR);n(p,a,B,b,0,0,g,m,q,_,nt,rt,Z,L,O)}else n(p,a,B,b,0,0,g,m,S,E,M,R,T,L,O);h.pipelines.postBatch(a)}};e.exports=o},function(e,d){var t=function(n,u,s,o,h,a,l,c,f,v,p,g,m,x,y){var T=s.x-u.displayOriginX+h,C=s.y-u.displayOriginY+a,S=T+s.w,E=C+s.h,M=l.getXRound(T,C,c),R=l.getYRound(T,C,c),L=l.getXRound(T,E,c),O=l.getYRound(T,E,c),F=l.getXRound(S,E,c),D=l.getYRound(S,E,c),B=l.getXRound(S,C,c),b=l.getYRound(S,C,c);n.batchQuad(u,M,R,L,O,F,D,B,b,o.u0,o.v0,o.u1,o.v1,f,v,p,g,m,x,y)};e.exports=t},function(e,d,t){var n=t(30),u=function(s,o,h,a){var l=o._text,c=l.length,f=s.currentContext;if(!(c===0||!n(s,f,o,h,a))){h.addToRenderList(o);var v=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.fontData.chars,g=o.fontData.lineHeight,m=o._letterSpacing,x=0,y=0,T=0,C=null,S=0,E=0,M=0,R=0,L=0,O=0,F=null,D=0,B=v.source.image,b=v.cutX,V=v.cutY,X=o._fontSize/o.fontData.size,K=o._align,J=0,G=0,w=o.getTextBounds(!1);o.maxWidth>0&&(l=w.wrappedText,c=l.length);var N=o._bounds.lines;K===1?G=(N.longest-N.lengths[0])/2:K===2&&(G=N.longest-N.lengths[0]),f.translate(-o.displayOriginX,-o.displayOriginY);for(var z=h.roundPixels,U=0;U<c;U++){if(T=l.charCodeAt(U),T===10){J++,K===1?G=(N.longest-N.lengths[J])/2:K===2&&(G=N.longest-N.lengths[J]),x=0,y+=g,F=null;continue}if(C=p[T],!!C){if(S=b+C.x,E=V+C.y,M=C.width,R=C.height,L=C.xOffset+x,O=C.yOffset+y,F!==null){var W=C.kerning[D];L+=W!==void 0?W:0}L*=X,O*=X,L+=G,x+=C.xAdvance+m,F=C,D=T,!(M===0||R===0||T===32)&&(z&&(L=Math.round(L),O=Math.round(O)),f.save(),f.translate(L,O),f.scale(X,X),f.drawImage(B,S,E,M,R,0,0,M,R),f.restore())}}f.restore()}};e.exports=u},function(e,d,t){var n=t(1),u=t(1);n=t(1050),u=t(1051),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(25),u=t(12),s=new n,o=function(h,a,l,c){var f=a.getRenderList();if(f.length!==0){var v=l.alpha*a.alpha;if(v!==0){l.addToRenderList(a);var p=h.pipelines.set(this.pipeline,a),g=l.scrollX*a.scrollFactorX,m=l.scrollY*a.scrollFactorY,x=s.copyFrom(l.matrix);c&&(x.multiplyWithOffset(c,-g,-m),g=0,m=0);var y=a.x-g,T=a.y-m,C=-1,S=!1,E=l.roundPixels;h.pipelines.preBatch(a);for(var M=0;M<f.length;M++){var R=f[M],L=R.frame,O=R.alpha*v;if(O!==0){var F=L.width,D=L.height,B=y+R.x+L.x,b=T+R.y+L.y;R.flipX&&(F*=-1,B+=L.width),R.flipY&&(D*=-1,b+=L.height);var V=B+F,X=b+D,K=x.getX(B,b),J=x.getY(B,b),G=x.getX(V,X),w=x.getY(V,X),N=u.getTintAppendFloatAlpha(R.tint,O);if(L.sourceIndex!==C){var z=p.setGameObject(a,L);C=L.sourceIndex}E&&(K=Math.round(K),J=Math.round(J),G=Math.round(G),w=Math.round(w)),p.batchQuad(a,K,J,K,w,G,w,G,J,L.u0,L.v0,L.u1,L.v1,N,N,N,N,S,L.glTexture,z)&&(C=-1)}}h.pipelines.postBatch(a)}}};e.exports=o},function(e,d){var t=function(n,u,s,o){var h=u.getRenderList();if(h.length!==0){var a=n.currentContext,l=s.alpha*u.alpha;if(l!==0){s.addToRenderList(u),a.globalCompositeOperation=n.blendModes[u.blendMode],a.imageSmoothingEnabled=!(!n.antialias||u.frame.source.scaleMode);var c=u.x-s.scrollX*u.scrollFactorX,f=u.y-s.scrollY*u.scrollFactorY;a.save(),o&&o.copyToContext(a);for(var v=s.roundPixels,p=0;p<h.length;p++){var g=h[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,C=x.y,S=1,E=1,M=g.alpha*l;M!==0&&(a.globalAlpha=M,m?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),a.save(),a.translate(g.x+c,g.y+f),a.scale(S,E),a.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),a.restore()):(v&&(T=Math.round(T),C=Math.round(C)),a.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+c,C+g.y+f,y.width,y.height)))}a.restore()}}};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1053),u=t(1054),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u);var h=u.list,a=h.length;if(a!==0){var l=u.localTransform;o?(l.loadIdentity(),l.multiply(o),l.translate(u.x,u.y),l.rotate(u.rotation),l.scale(u.scaleX,u.scaleY)):l.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),n.pipelines.preBatch(u);var c=u.blendMode!==-1;c||n.setBlendMode(0);for(var f=u.alpha,v=u.scrollFactorX,p=u.scrollFactorY,g=0;g<a;g++){var m=h[g];if(!!m.willRender(s)){var x,y,T,C;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,C=m.alphaBottomRight;else{var S=m.alpha;x=S,y=S,T=S,C=S}var E=m.scrollFactorX,M=m.scrollFactorY;!c&&m.blendMode!==n.currentBlendMode&&n.setBlendMode(m.blendMode);var R=m.mask;R&&R.preRenderWebGL(n,m,s);var L=m.type;L!==n.currentType&&(n.newType=!0,n.currentType=L),n.nextTypeMatch=g<a-1?h[g+1].type===n.currentType:!1,m.setScrollFactor(E*v,M*p),m.setAlpha(x*f,y*f,T*f,C*f),m.renderWebGL(n,m,s,l),m.setAlpha(x,y,T,C),m.setScrollFactor(E,M),R&&R.postRenderWebGL(n,s),n.newType=!1}}n.pipelines.postBatch(u)}};e.exports=t},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u);var h=u.list;if(h.length!==0){var a=u.localTransform;o?(a.loadIdentity(),a.multiply(o),a.translate(u.x,u.y),a.rotate(u.rotation),a.scale(u.scaleX,u.scaleY)):a.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var l=u.blendMode!==-1;l||n.setBlendMode(0);var c=u._alpha,f=u.scrollFactorX,v=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(n,null,s);for(var p=0;p<h.length;p++){var g=h[p];if(!!g.willRender(s)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!l&&g.blendMode!==n.currentBlendMode&&n.setBlendMode(g.blendMode),g.setScrollFactor(x*f,y*v),g.setAlpha(m*c),g.renderCanvas(n,g,s,a),g.setAlpha(m),g.setScrollFactor(x,y)}}u.mask&&u.mask.postRenderCanvas(n)}};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(443),u=t(443),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d){e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,d,t){var n=t(1),u=t(1);n=t(1058),u=t(1059),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(25),s=t(12),o=new u,h=function(a,l,c,f){var v=l.text,p=v.length;if(p!==0){c.addToRenderList(l);var g=a.pipelines.set(l.pipeline,l),m=n(l,c,f),x=m.sprite,y=m.calc,T=o,C=l.cropWidth>0||l.cropHeight>0;C&&(g.flush(),a.pushScissor(y.tx,y.ty,l.cropWidth*y.scaleX,l.cropHeight*y.scaleY));var S=l.frame,E=S.glTexture,M=l.tintFill,R=s.getTintAppendFloatAlpha(l.tintTopLeft,c.alpha*l._alphaTL),L=s.getTintAppendFloatAlpha(l.tintTopRight,c.alpha*l._alphaTR),O=s.getTintAppendFloatAlpha(l.tintBottomLeft,c.alpha*l._alphaBL),F=s.getTintAppendFloatAlpha(l.tintBottomRight,c.alpha*l._alphaBR),D=g.setGameObject(l),B=0,b=0,V=0,X=0,K=l.letterSpacing,J,G=0,w=0,N,z=l.scrollX,U=l.scrollY,W=l.fontData,H=W.chars,Z=W.lineHeight,q=l.fontSize/W.size,_=0,nt=l._align,rt=0,at=0,vt=l.getTextBounds(!1);l.maxWidth>0&&(v=vt.wrappedText,p=v.length);var ut=l._bounds.lines;nt===1?at=(ut.longest-ut.lengths[0])/2:nt===2&&(at=ut.longest-ut.lengths[0]);var ct=c.roundPixels,Ft=l.displayCallback,yt=l.callbackData;a.pipelines.preBatch(l);for(var Tt=0;Tt<p;Tt++){if(V=v.charCodeAt(Tt),V===10){rt++,nt===1?at=(ut.longest-ut.lengths[rt])/2:nt===2&&(at=ut.longest-ut.lengths[rt]),B=0,b+=Z,N=null;continue}if(J=H[V],!!J){G=J.width,w=J.height;var dt=J.xOffset+B-z,It=J.yOffset+b-U;if(N!==null){var gt=J.kerning[X];dt+=gt!==void 0?gt:0}if(B+=J.xAdvance+K,N=J,X=V,!(G===0||w===0||V===32)){if(q=l.fontSize/l.fontData.size,_=0,Ft){yt.color=0,yt.tint.topLeft=R,yt.tint.topRight=L,yt.tint.bottomLeft=O,yt.tint.bottomRight=F,yt.index=Tt,yt.charCode=V,yt.x=dt,yt.y=It,yt.scale=q,yt.rotation=_,yt.data=J.data;var Pt=Ft(yt);dt=Pt.x,It=Pt.y,q=Pt.scale,_=Pt.rotation,Pt.color?(R=Pt.color,L=Pt.color,O=Pt.color,F=Pt.color):(R=Pt.tint.topLeft,L=Pt.tint.topRight,O=Pt.tint.bottomLeft,F=Pt.tint.bottomRight),R=s.getTintAppendFloatAlpha(R,c.alpha*l._alphaTL),L=s.getTintAppendFloatAlpha(L,c.alpha*l._alphaTR),O=s.getTintAppendFloatAlpha(O,c.alpha*l._alphaBL),F=s.getTintAppendFloatAlpha(F,c.alpha*l._alphaBR)}dt*=q,It*=q,dt-=l.displayOriginX,It-=l.displayOriginY,dt+=at,T.applyITRS(dt,It,_,q,q),y.multiply(T,x);var ge=J.u0,Ge=J.v0,Ht=J.u1,Vt=J.v1,te=G,qt=w,ee=x.e,Ee=x.f,hi=qt*x.c+x.e,li=qt*x.d+x.f,ui=te*x.a+qt*x.c+x.e,fi=te*x.b+qt*x.d+x.f,di=te*x.a+x.e,vi=te*x.b+x.f;ct&&(ee=Math.round(ee),Ee=Math.round(Ee),hi=Math.round(hi),li=Math.round(li),ui=Math.round(ui),fi=Math.round(fi),di=Math.round(di),vi=Math.round(vi)),g.batchQuad(l,ee,Ee,hi,li,ui,fi,di,vi,ge,Ge,Ht,Vt,R,L,O,F,M,E,D)}}}C&&(g.flush(),a.popScissor()),a.pipelines.postBatch(l)}};e.exports=h},function(e,d,t){var n=t(30),u=function(s,o,h,a){var l=o._text,c=l.length,f=s.currentContext;if(!(c===0||!n(s,f,o,h,a))){h.addToRenderList(o);var v=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.displayCallback,g=o.callbackData,m=o.fontData.chars,x=o.fontData.lineHeight,y=o._letterSpacing,T=0,C=0,S=0,E=null,M=0,R=0,L=0,O=0,F=0,D=0,B=null,b=0,V=o.frame.source.image,X=v.cutX,K=v.cutY,J=0,G=0,w=o._fontSize/o.fontData.size,N=o._align,z=0,U=0;o.getTextBounds(!1);var W=o._bounds.lines;N===1?U=(W.longest-W.lengths[0])/2:N===2&&(U=W.longest-W.lengths[0]),f.translate(-o.displayOriginX,-o.displayOriginY);var H=h.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(f.beginPath(),f.rect(0,0,o.cropWidth,o.cropHeight),f.clip());for(var Z=0;Z<c;Z++){if(G=w,J=0,S=l.charCodeAt(Z),S===10){z++,N===1?U=(W.longest-W.lengths[z])/2:N===2&&(U=W.longest-W.lengths[z]),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(M=X+E.x,R=K+E.y,L=E.width,O=E.height,F=E.xOffset+T-o.scrollX,D=E.yOffset+C-o.scrollY,B!==null){var q=E.kerning[b];F+=q!==void 0?q:0}if(p){g.index=Z,g.charCode=S,g.x=F,g.y=D,g.scale=G,g.rotation=J,g.data=E.data;var _=p(g);F=_.x,D=_.y,G=_.scale,J=_.rotation}F*=G,D*=G,F+=U,T+=E.xAdvance+y,B=E,b=S,!(L===0||O===0||S===32)&&(H&&(F=Math.round(F),D=Math.round(D)),f.save(),f.translate(F,D),f.rotate(J),f.scale(G,G),f.drawImage(V,M,R,L,O,0,0,L,O),f.restore())}}f.restore()}};e.exports=u},function(e,d,t){var n=t(1),u=t(1);n=t(1061),u=t(1062),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=function(s,o,h,a){s.pipelines.clear();var l=n(o,h,a).calc;o.render.call(o,s,h,l),s.pipelines.rebind()};e.exports=u},function(e,d){},function(e,d,t){var n=t(1),u=t(1);n=t(1064),u=t(448),u=t(448),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(217),u=t(19),s=t(25),o=t(12),h=function(v,p,g){this.x=v,this.y=p,this.width=g},a=function(v,p,g){this.points=[],this.pointsLength=1,this.points[0]=new h(v,p,g)},l=[],c=new s,f=function(v,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=v.pipelines.set(p.pipeline,p);v.pipelines.preBatch(p);for(var y=u(p,g,m).calc,T=c.loadIdentity(),C=p.commandBuffer,S=g.alpha*p.alpha,E=1,M=x.fillTint,R=x.strokeTint,L=0,O=0,F=0,D=.01,B=Math.PI*2,b,V=[],X=0,K=!0,J=null,G=o.getTintAppendFloatAlpha,w=0;w<C.length;w++)switch(b=C[w],b){case n.BEGIN_PATH:{V.length=0,J=null,K=!0;break}case n.CLOSE_PATH:{K=!1,J&&J.points.length&&J.points.push(J.points[0]);break}case n.FILL_PATH:{for(X=0;X<V.length;X++)x.batchFillPath(V[X].points,T,y);break}case n.STROKE_PATH:{for(X=0;X<V.length;X++)x.batchStrokePath(V[X].points,E,K,T,y);break}case n.LINE_STYLE:{E=C[++w];var N=C[++w],z=C[++w]*S,U=G(N,z);R.TL=U,R.TR=U,R.BL=U,R.BR=U;break}case n.FILL_STYLE:{var W=C[++w],H=C[++w]*S,Z=G(W,H);M.TL=Z,M.TR=Z,M.BL=Z,M.BR=Z;break}case n.GRADIENT_FILL_STYLE:{var q=C[++w]*S,_=C[++w]*S,nt=C[++w]*S,rt=C[++w]*S;M.TL=G(C[++w],q),M.TR=G(C[++w],_),M.BL=G(C[++w],nt),M.BR=G(C[++w],rt);break}case n.GRADIENT_LINE_STYLE:{E=C[++w];var at=C[++w]*S;R.TL=G(C[++w],at),R.TR=G(C[++w],at),R.BL=G(C[++w],at),R.BR=G(C[++w],at);break}case n.ARC:{var vt=0,ut=C[++w],ct=C[++w],Ft=C[++w],yt=C[++w],Tt=C[++w],dt=C[++w],It=C[++w];for(Tt-=yt,dt?Tt<-B?Tt=-B:Tt>0&&(Tt=-B+Tt%B):Tt>B?Tt=B:Tt<0&&(Tt=B+Tt%B),J===null&&(J=new a(ut+Math.cos(yt)*Ft,ct+Math.sin(yt)*Ft,E),V.push(J),vt+=D);vt<1+It;)F=Tt*vt+yt,L=ut+Math.cos(F)*Ft,O=ct+Math.sin(F)*Ft,J.points.push(new h(L,O,E)),vt+=D;F=Tt+yt,L=ut+Math.cos(F)*Ft,O=ct+Math.sin(F)*Ft,J.points.push(new h(L,O,E));break}case n.FILL_RECT:{x.batchFillRect(C[++w],C[++w],C[++w],C[++w],T,y);break}case n.FILL_TRIANGLE:{x.batchFillTriangle(C[++w],C[++w],C[++w],C[++w],C[++w],C[++w],T,y);break}case n.STROKE_TRIANGLE:{x.batchStrokeTriangle(C[++w],C[++w],C[++w],C[++w],C[++w],C[++w],E,T,y);break}case n.LINE_TO:{J!==null?J.points.push(new h(C[++w],C[++w],E)):(J=new a(C[++w],C[++w],E),V.push(J));break}case n.MOVE_TO:{J=new a(C[++w],C[++w],E),V.push(J);break}case n.SAVE:{l.push(T.copyToArray());break}case n.RESTORE:{T.copyFromArray(l.pop());break}case n.TRANSLATE:{ut=C[++w],ct=C[++w],T.translate(ut,ct);break}case n.SCALE:{ut=C[++w],ct=C[++w],T.scale(ut,ct);break}case n.ROTATE:{T.rotate(C[++w]);break}}v.pipelines.postBatch(p)}};e.exports=f},function(e,d,t){var n=t(1),u=t(1);n=t(1066),u=t(1067),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u),u.pipeline.batchSprite(u,s,o)};e.exports=t},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u),n.batchSprite(u,u.frame,s,o)};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1069),u=t(1070),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u),this.pipeline.batchSprite(u,s,o)};e.exports=t},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u),n.batchSprite(u,u.frame,s,o)};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1072),u=t(1073),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d){var t=function(n,u,s){var o=u.list,h=o.length;if(h!==0){u.depthSort(),n.pipelines.preBatch(u);var a=u.blendMode!==-1;a||n.setBlendMode(0);for(var l=u.alpha,c=0;c<h;c++){var f=o[c];if(!!f.willRender(s)){var v,p,g,m;if(f.alphaTopLeft!==void 0)v=f.alphaTopLeft,p=f.alphaTopRight,g=f.alphaBottomLeft,m=f.alphaBottomRight;else{var x=f.alpha;v=x,p=x,g=x,m=x}!a&&f.blendMode!==n.currentBlendMode&&n.setBlendMode(f.blendMode);var y=f.mask;y&&y.preRenderWebGL(n,f,s);var T=f.type;T!==n.currentType&&(n.newType=!0,n.currentType=T),n.nextTypeMatch=c<h-1?o[c+1].type===n.currentType:!1,f.setAlpha(v*l,p*l,g*l,m*l),f.renderWebGL(n,f,s),f.setAlpha(v,p,g,m),y&&y.postRenderWebGL(n,s),n.newType=!1}}n.pipelines.postBatch(u)}};e.exports=t},function(e,d){var t=function(n,u,s){var o=u.list;if(o.length!==0){u.depthSort();var h=u.blendMode!==-1;h||n.setBlendMode(0);var a=u._alpha;u.mask&&u.mask.preRenderCanvas(n,null,s);for(var l=0;l<o.length;l++){var c=o[l];if(!!c.willRender(s)){var f=c.alpha;!h&&c.blendMode!==n.currentBlendMode&&n.setBlendMode(c.blendMode),c.setAlpha(f*a),c.renderCanvas(n,c,s),c.setAlpha(f)}}u.mask&&u.mask.postRenderCanvas(n)}};e.exports=t},function(e,d,t){e.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(e,d,t){var n=t(1),u=t(1);n=t(1076),u=t(1077),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(25),u=t(12),s=new n,o=new n,h=new n,a=new n,l=function(c,f,v,p){var g=f.emitters.list,m=g.length;if(m!==0){var x=c.pipelines.set(f.pipeline),y=s,T=o,C=h,S=a;p?(S.loadIdentity(),S.multiply(p),S.translate(f.x,f.y),S.rotate(f.rotation),S.scale(f.scaleX,f.scaleY)):S.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var E=v.roundPixels,M=f.defaultFrame.glTexture,R=u.getTintAppendFloatAlpha,L=x.setGameObject(f,f.defaultFrame);c.pipelines.preBatch(f);for(var O=0;O<m;O++){var F=g[O],D=F.alive,B=D.length;if(!(!F.visible||B===0)){v.addToRenderList(F);var b=F.scrollFactorX,V=F.scrollFactorY;c.setBlendMode(F.blendMode),F.mask&&(F.mask.preRenderWebGL(c,F,v),c.pipelines.set(f.pipeline));for(var X=0,K=0;K<B;K++){var J=D[K],G=J.alpha*v.alpha;if(!(G<=0)){C.applyITRS(J.x,J.y,J.rotation,J.scaleX,J.scaleY),y.copyFrom(v.matrix),y.multiplyWithOffset(S,-v.scrollX*b,-v.scrollY*V),C.e=J.x,C.f=J.y,y.multiply(C,T);var w=J.frame,N=-w.halfWidth,z=-w.halfHeight,U=N+w.width,W=z+w.height,H=T.getXRound(N,z,E),Z=T.getYRound(N,z,E),q=T.getXRound(N,W,E),_=T.getYRound(N,W,E),nt=T.getXRound(U,W,E),rt=T.getYRound(U,W,E),at=T.getXRound(U,z,E),vt=T.getYRound(U,z,E),ut=R(J.tint,G);x.batchQuad(F,H,Z,q,_,nt,rt,at,vt,w.u0,w.v0,w.u1,w.v1,ut,ut,ut,ut,X,M,L)}}F.mask&&F.mask.postRenderWebGL(c,v)}}c.pipelines.postBatch(f)}};e.exports=l},function(e,d,t){var n=t(25),u=new n,s=new n,o=new n,h=new n,a=function(l,c,f,v){var p=c.emitters.list,g=p.length;if(g!==0){var m=u.copyFrom(f.matrix),x=s,y=o,T=h;v?(T.loadIdentity(),T.multiply(v),T.translate(c.x,c.y),T.rotate(c.rotation),T.scale(c.scaleX,c.scaleY)):T.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);for(var C=l.currentContext,S=f.roundPixels,E=0;E<g;E++){var M=p[E],R=M.alive,L=R.length;if(!(!M.visible||L===0)){f.addToRenderList(M);var O=M.scrollFactorX,F=M.scrollFactorY;C.save(),C.globalCompositeOperation=l.blendModes[M.blendMode];for(var D=0;D<L;D++){var B=R[D],b=B.alpha*f.alpha;if(!(b<=0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),m.copyFrom(f.matrix),m.multiplyWithOffset(T,-f.scrollX*O,-f.scrollY*F),y.e=B.x,y.f=B.y,m.multiply(y,x);var V=B.frame,X=V.canvasData,K=-V.halfWidth,J=-V.halfHeight;C.globalAlpha=b,C.save(),x.setToContext(C),S&&(K=Math.round(K),J=Math.round(J)),C.imageSmoothingEnabled=!(!l.antialias||V.source.scaleMode),C.drawImage(V.source.image,X.x,X.y,X.width,X.height,K,J,X.width,X.height),C.restore()}}C.restore()}}}};e.exports=a},function(e,d,t){e.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(e,d,t){var n=t(1),u=t(1);n=t(1080),u=t(1081),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(12),u=function(s,o,h,a){h.addToRenderList(o);var l=h.alpha,c=o.renderTarget,f=c.width,v=c.height,p=n.getTintAppendFloatAlpha,g=s.pipelines.set(o.pipeline),m=g.setTexture2D(c.texture);s.pipelines.preBatch(o),g.batchTexture(o,c.texture,f,v,o.x,o.y,f,v,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,f,v,p(o.tintTopLeft,l*o._alphaTL),p(o.tintTopRight,l*o._alphaTR),p(o.tintBottomLeft,l*o._alphaBL),p(o.tintBottomRight,l*o._alphaBR),o.tintFill,0,0,h,a,!0,m),s.resetTextures(),s.pipelines.postBatch(o)};e.exports=u},function(e,d){var t=function(n,u,s,o){s.addToRenderList(u),n.batchSprite(u,u.frame,s,o)};e.exports=t},function(e,d,t){var n=t(1083),u=t(17),s={Parse:t(1084)};s=u(!1,s,n),e.exports=s},function(e,d){var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=t},function(e,d,t){var n=t(6),u=function(s,o){var h=o.width,a=o.height,l=Math.floor(h/2),c=Math.floor(a/2),f=n(o,"chars","");if(f!==""){var v=n(o,"image",""),p=s.sys.textures.getFrame(v),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=n(o,"offset.x",0),C=n(o,"offset.y",0),S=n(o,"spacing.x",0),E=n(o,"spacing.y",0),M=n(o,"lineSpacing",0),R=n(o,"charsPerRow",null);R===null&&(R=x/h,R>f.length&&(R=f.length));for(var L=T,O=C,F={retroFont:!0,font:v,size:h,lineHeight:a+M,chars:{}},D=0,B=0;B<f.length;B++){var b=f.charCodeAt(B),V=(g+L)/x,X=(m+O)/y,K=(g+L+h)/x,J=(m+O+a)/y;F.chars[b]={x:L,y:O,width:h,height:a,centerX:l,centerY:c,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:V,v0:X,u1:K,v1:J},D++,D===R?(D=0,L=T,O+=a+E):L+=h+S}var G={data:F,frame:null,texture:v};return G}};e.exports=u},function(e,d,t){var n=t(1),u=t(1);n=t(1086),u=t(1087),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(12),s=function(o,h,a,l){a.addToRenderList(h);var c=o.pipelines.set(h.pipeline,h),f=n(h,a,l).calc,v=h.vertices,p=h.uv,g=h.colors,m=h.alphas,x=h.alpha,y=u.getTintAppendFloatAlpha,T=a.roundPixels,C=v.length,S=Math.floor(C*.5);c.flush(),o.pipelines.preBatch(h);var E=c.setGameObject(h),M=c.vertexViewF32,R=c.vertexViewU32,L=c.vertexCount*c.currentShader.vertexComponentCount-1,O=0,F=h.tintFill;h.dirty&&h.updateVertices();for(var D=h.debugCallback,B=[],b=0;b<C;b+=2){var V=v[b+0],X=v[b+1],K=V*f.a+X*f.c+f.e,J=V*f.b+X*f.d+f.f;T&&(K=Math.round(K),J=Math.round(J)),M[++L]=K,M[++L]=J,M[++L]=p[b+0],M[++L]=p[b+1],M[++L]=E,M[++L]=F,R[++L]=y(g[O],a.alpha*(m[O]*x)),O++,D&&(B[b+0]=K,B[b+1]=J)}D&&D.call(h,h,C,B),c.vertexCount+=S,o.pipelines.postBatch(h)};e.exports=s},function(e,d){var t=function(){};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1089),u=t(1090),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(12),u=function(s,o,h,a){if(!(o.width===0||o.height===0)){h.addToRenderList(o);var l=o.frame,c=l.width,f=l.height,v=n.getTintAppendFloatAlpha,p=s.pipelines.set(o.pipeline,o),g=p.setTexture2D(l.glTexture,o);s.pipelines.preBatch(o),p.batchTexture(o,l.glTexture,c,f,o.x,o.y,c/o.style.resolution,f/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,c,f,v(o.tintTopLeft,h.alpha*o._alphaTL),v(o.tintTopRight,h.alpha*o._alphaTR),v(o.tintBottomLeft,h.alpha*o._alphaBL),v(o.tintBottomRight,h.alpha*o._alphaBR),o.tintFill,0,0,h,a,!1,g),s.pipelines.postBatch(o)}};e.exports=u},function(e,d){var t=function(n,u,s,o){u.width===0||u.height===0||(s.addToRenderList(u),n.batchSprite(u,u.frame,s,o))};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1092),u=t(1093),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(12),u=function(s,o,h,a){o.updateCanvas();var l=o.width,c=o.height;if(!(l===0||c===0)){h.addToRenderList(o),s.pipelines.preBatch(o);var f=n.getTintAppendFloatAlpha,v=s.pipelines.set(o.pipeline,o),p=v.setTexture2D(o.fillPattern,o);v.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,l,c,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*l,o.originY*c,0,0,l,c,f(o.tintTopLeft,h.alpha*o._alphaTL),f(o.tintTopRight,h.alpha*o._alphaTR),f(o.tintBottomLeft,h.alpha*o._alphaBL),f(o.tintBottomRight,h.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,h,a,!1,p),s.pipelines.postBatch(o)}};e.exports=u},function(e,d){var t=function(n,u,s,o){u.updateCanvas(),s.addToRenderList(u),n.batchSprite(u,u.frame,s,o)};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1095),u=t(1096),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d){var t=function(n,u,s,o){u.videoTexture&&(s.addToRenderList(u),u.pipeline.batchSprite(u,s,o))};e.exports=t},function(e,d){var t=function(n,u,s,o){u.videoTexture&&(s.addToRenderList(u),n.batchSprite(u,u.frame,s,o))};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1098),u=t(1099),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(114),s=t(81),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=n(a,l,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=l.alpha*a.alpha;h.pipelines.preBatch(a),a.isFilled&&u(f,p,a,x,g,m),a.isStroked&&s(f,a,x,g,m),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(36),u=t(48),s=t(60),o=t(30),h=function(a,l,c,f){c.addToRenderList(l);var v=a.currentContext;if(o(a,v,l,c,f)){var p=l.radius;v.beginPath(),v.arc(p-l.originX*(p*2),p-l.originY*(p*2),p,n(l._startAngle),n(l._endAngle),l.anticlockwise),l.closePath&&v.closePath(),l.isFilled&&(u(v,l),v.fill()),l.isStroked&&(s(v,l),v.stroke()),v.restore()}};e.exports=h},function(e,d,t){var n=t(1),u=t(1);n=t(1101),u=t(1102),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(114),u=t(19),s=t(81),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=u(a,l,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX+a._curveBounds.x,m=a._displayOriginY+a._curveBounds.y,x=l.alpha*a.alpha;h.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&s(f,a,x,g,m),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=a._displayOriginX+a._curveBounds.x,p=a._displayOriginY+a._curveBounds.y,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}a.closePath&&f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(u(f,a),f.stroke()),f.restore()}};e.exports=o},function(e,d,t){var n=t(1),u=t(1);n=t(1104),u=t(1105),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(114),u=t(19),s=t(81),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=u(a,l,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=l.alpha*a.alpha;h.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&s(f,a,x,g,m),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(u(f,a),f.stroke()),f.restore()}};e.exports=o},function(e,d,t){var n=t(1),u=t(1);n=t(1107),u=t(1108),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(12),s=function(o,h,a,l){a.addToRenderList(h);var c=o.pipelines.set(h.pipeline),f=n(h,a,l),v=c.calcMatrix.copyFrom(f.calc);v.translate(-h._displayOriginX,-h._displayOriginY);var p=a.alpha*h.alpha,g=h.width,m=h.height,x=h.cellWidth,y=h.cellHeight,T=Math.ceil(g/x),C=Math.ceil(m/y),S=x,E=y,M=x-(T*x-g),R=y-(C*y-m),L,O,F=h.showCells,D=h.showAltCells,B=h.showOutline,b=0,V=0,X=0,K=0,J=0;if(B&&(S--,E--,M===x&&M--,R===y&&R--),o.pipelines.preBatch(h),F&&h.fillAlpha>0)for(L=c.fillTint,O=u.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*p),L.TL=O,L.TR=O,L.BL=O,L.BR=O,V=0;V<C;V++)for(D&&(X=V%2),b=0;b<T;b++){if(D&&X){X=0;continue}X++,K=b<T-1?S:M,J=V<C-1?E:R,c.batchFillRect(b*x,V*y,K,J)}if(D&&h.altFillAlpha>0)for(L=c.fillTint,O=u.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*p),L.TL=O,L.TR=O,L.BL=O,L.BR=O,V=0;V<C;V++)for(D&&(X=V%2),b=0;b<T;b++){if(D&&!X){X=1;continue}X=0,K=b<T-1?S:M,J=V<C-1?E:R,c.batchFillRect(b*x,V*y,K,J)}if(B&&h.outlineFillAlpha>0){var G=c.strokeTint,w=u.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*p);for(G.TL=w,G.TR=w,G.BL=w,G.BR=w,b=1;b<T;b++){var N=b*x;c.batchLine(N,0,N,m,1,1,1,0,!1)}for(V=1;V<C;V++){var z=V*y;c.batchLine(0,z,g,z,1,1,1,0,!1)}}o.pipelines.postBatch(h)};e.exports=s},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=-a._displayOriginX,p=-a._displayOriginY,g=l.alpha*a.alpha,m=a.width,x=a.height,y=a.cellWidth,T=a.cellHeight,C=Math.ceil(m/y),S=Math.ceil(x/T),E=y,M=T,R=y-(C*y-m),L=T-(S*T-x),O=a.showCells,F=a.showAltCells,D=a.showOutline,B=0,b=0,V=0,X=0,K=0;if(D&&(E--,M--,R===y&&R--,L===T&&L--),O&&a.fillAlpha>0)for(n(f,a),b=0;b<S;b++)for(F&&(V=b%2),B=0;B<C;B++){if(F&&V){V=0;continue}V++,X=B<C-1?E:R,K=b<S-1?M:L,f.fillRect(v+B*y,p+b*T,X,K)}if(F&&a.altFillAlpha>0)for(n(f,a,a.altFillColor,a.altFillAlpha*g),b=0;b<S;b++)for(F&&(V=b%2),B=0;B<C;B++){if(F&&!V){V=1;continue}V=0,X=B<C-1?E:R,K=b<S-1?M:L,f.fillRect(v+B*y,p+b*T,X,K)}if(D&&a.outlineFillAlpha>0){for(u(f,a,a.outlineFillColor,a.outlineFillAlpha*g),B=1;B<C;B++){var J=B*y;f.beginPath(),f.moveTo(J+v,p),f.lineTo(J+v,x+p),f.stroke()}for(b=1;b<S;b++){var G=b*T;f.beginPath(),f.moveTo(v,G+p),f.lineTo(v+m,G+p),f.stroke()}}f.restore()}};e.exports=o},function(e,d,t){var n=t(1),u=t(1);n=t(1110),u=t(1111),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(12),s=function(o,h,a,l){a.addToRenderList(h);var c=o.pipelines.set(h.pipeline),f=n(h,a,l),v=c.calcMatrix.copyFrom(f.calc),p=h.width,g=h.height,m=p/2,x=p/h.projection,y=a.alpha*h.alpha;if(!!h.isFilled){var T,C,S,E,M,R,L,O,F;o.pipelines.preBatch(h),h.showTop&&(T=u.getTintAppendFloatAlpha(h.fillTop,y),C=v.getX(-m,-g),S=v.getY(-m,-g),E=v.getX(0,-x-g),M=v.getY(0,-x-g),R=v.getX(m,-g),L=v.getY(m,-g),O=v.getX(0,x-g),F=v.getY(0,x-g),c.batchQuad(h,C,S,E,M,R,L,O,F,0,0,1,1,T,T,T,T,2)),h.showLeft&&(T=u.getTintAppendFloatAlpha(h.fillLeft,y),C=v.getX(-m,0),S=v.getY(-m,0),E=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),L=v.getY(0,x-g),O=v.getX(-m,-g),F=v.getY(-m,-g),c.batchQuad(h,C,S,E,M,R,L,O,F,0,0,1,1,T,T,T,T,2)),h.showRight&&(T=u.getTintAppendFloatAlpha(h.fillRight,y),C=v.getX(m,0),S=v.getY(m,0),E=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),L=v.getY(0,x-g),O=v.getX(m,-g),F=v.getY(m,-g),c.batchQuad(h,C,S,E,M,R,L,O,F,0,0,1,1,T,T,T,T,2)),o.pipelines.postBatch(h)}};e.exports=s},function(e,d,t){var n=t(48),u=t(30),s=function(o,h,a,l){a.addToRenderList(h);var c=o.currentContext;if(u(o,c,h,a,l)&&h.isFilled){var f=h.width,v=h.height,p=f/2,g=f/h.projection;h.showTop&&(n(c,h,h.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(p,-1),c.lineTo(0,g-1),c.lineTo(-p,-1),c.lineTo(-p,-v),c.fill()),h.showLeft&&(n(c,h,h.fillLeft),c.beginPath(),c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(-p,-v),c.lineTo(-p,0),c.fill()),h.showRight&&(n(c,h,h.fillRight),c.beginPath(),c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(p,-v),c.lineTo(p,0),c.fill()),c.restore()}};e.exports=s},function(e,d,t){var n=t(1),u=t(1);n=t(1113),u=t(1114),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(12),s=function(o,h,a,l){a.addToRenderList(h);var c=o.pipelines.set(h.pipeline),f=n(h,a,l),v=c.calcMatrix.copyFrom(f.calc),p=h.width,g=h.height,m=p/2,x=p/h.projection,y=h.isReversed,T=a.alpha*h.alpha;if(!!h.isFilled){o.pipelines.preBatch(h);var C,S,E,M,R,L,O;if(h.showTop&&y){C=u.getTintAppendFloatAlpha(h.fillTop,T),S=v.getX(-m,-g),E=v.getY(-m,-g),M=v.getX(0,-x-g),R=v.getY(0,-x-g),L=v.getX(m,-g),O=v.getY(m,-g);var F=v.getX(0,x-g),D=v.getY(0,x-g);c.batchQuad(h,S,E,M,R,L,O,F,D,0,0,1,1,C,C,C,C,2)}h.showLeft&&(C=u.getTintAppendFloatAlpha(h.fillLeft,T),y?(S=v.getX(-m,-g),E=v.getY(-m,-g),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)):(S=v.getX(-m,0),E=v.getY(-m,0),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)),c.batchTri(h,S,E,M,R,L,O,0,0,1,1,C,C,C,2)),h.showRight&&(C=u.getTintAppendFloatAlpha(h.fillRight,T),y?(S=v.getX(m,-g),E=v.getY(m,-g),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)):(S=v.getX(m,0),E=v.getY(m,0),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)),c.batchTri(h,S,E,M,R,L,O,0,0,1,1,C,C,C,2)),o.pipelines.postBatch(h)}};e.exports=s},function(e,d,t){var n=t(48),u=t(30),s=function(o,h,a,l){a.addToRenderList(h);var c=o.currentContext;if(u(o,c,h,a,l)&&h.isFilled){var f=h.width,v=h.height,p=f/2,g=f/h.projection,m=h.isReversed;h.showTop&&m&&(n(c,h,h.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(0,g-v),c.fill()),h.showLeft&&(n(c,h,h.fillLeft),c.beginPath(),m?(c.moveTo(-p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),h.showRight&&(n(c,h,h.fillRight),c.beginPath(),m?(c.moveTo(p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),c.restore()}};e.exports=s},function(e,d,t){var n=t(1),u=t(1);n=t(1116),u=t(1117),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(12),s=function(o,h,a,l){a.addToRenderList(h);var c=o.pipelines.set(h.pipeline),f=n(h,a,l);c.calcMatrix.copyFrom(f.calc);var v=h._displayOriginX,p=h._displayOriginY,g=a.alpha*h.alpha;if(o.pipelines.preBatch(h),h.isStroked){var m=c.strokeTint,x=u.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=h._startWidth,T=h._endWidth;c.batchLine(h.geom.x1-v,h.geom.y1-p,h.geom.x2-v,h.geom.y2-p,y,T,1,0,!1,f.sprite,f.camera)}o.pipelines.postBatch(h)};e.exports=s},function(e,d,t){var n=t(60),u=t(30),s=function(o,h,a,l){a.addToRenderList(h);var c=o.currentContext;if(u(o,c,h,a,l)){var f=h._displayOriginX,v=h._displayOriginY;h.isStroked&&(n(c,h),c.beginPath(),c.moveTo(h.geom.x1-f,h.geom.y1-v),c.lineTo(h.geom.x2-f,h.geom.y2-v),c.stroke()),c.restore()}};e.exports=s},function(e,d,t){var n=t(1),u=t(1);n=t(1119),u=t(1120),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(114),u=t(19),s=t(81),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=u(a,l,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=l.alpha*a.alpha;h.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&s(f,a,x,g,m),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(u(f,a),f.stroke()),f.restore()}};e.exports=o},function(e,d,t){var n=t(1),u=t(1);n=t(1122),u=t(1123),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(81),s=t(12),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=n(a,l,c);f.calcMatrix.copyFrom(v.calc);var p=a._displayOriginX,g=a._displayOriginY,m=l.alpha*a.alpha;if(h.pipelines.preBatch(a),a.isFilled){var x=f.fillTint,y=s.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,f.batchFillRect(-p,-g,a.width,a.height)}a.isStroked&&u(f,a,m,p,g),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=a._displayOriginX,p=a._displayOriginY;a.isFilled&&(n(f,a),f.fillRect(-v,-p,a.width,a.height)),a.isStroked&&(u(f,a),f.beginPath(),f.rect(-v,-p,a.width,a.height),f.stroke()),f.restore()}};e.exports=o},function(e,d,t){var n=t(1),u=t(1);n=t(1125),u=t(1126),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(114),u=t(19),s=t(81),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=u(a,l,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=l.alpha*a.alpha;h.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&s(f,a,x,g,m),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(u(f,a),f.stroke()),f.restore()}};e.exports=o},function(e,d,t){var n=t(1),u=t(1);n=t(1128),u=t(1129),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=t(81),s=t(12),o=function(h,a,l,c){l.addToRenderList(a);var f=h.pipelines.set(a.pipeline),v=n(a,l,c);f.calcMatrix.copyFrom(v.calc);var p=a._displayOriginX,g=a._displayOriginY,m=l.alpha*a.alpha;if(h.pipelines.preBatch(a),a.isFilled){var x=f.fillTint,y=s.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=a.geom.x1-p,C=a.geom.y1-g,S=a.geom.x2-p,E=a.geom.y2-g,M=a.geom.x3-p,R=a.geom.y3-g;f.batchFillTriangle(T,C,S,E,M,R,v.sprite,v.camera)}a.isStroked&&u(f,a,m,p,g),h.pipelines.postBatch(a)};e.exports=o},function(e,d,t){var n=t(48),u=t(60),s=t(30),o=function(h,a,l,c){l.addToRenderList(a);var f=h.currentContext;if(s(h,f,a,l,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.geom.x1-v,m=a.geom.y1-p,x=a.geom.x2-v,y=a.geom.y2-p,T=a.geom.x3-v,C=a.geom.y3-p;f.beginPath(),f.moveTo(g,m),f.lineTo(x,y),f.lineTo(T,C),f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(u(f,a),f.stroke()),f.restore()}};e.exports=o},function(e,d,t){var n=t(213),u=t(5);u.register("blitter",function(s,o,h,a){return this.displayList.add(new n(this.scene,s,o,h,a))})},function(e,d,t){var n=t(214),u=t(5);u.register("container",function(s,o,h){return this.displayList.add(new n(this.scene,s,o,h))})},function(e,d,t){var n=t(442),u=t(5);u.register("dom",function(s,o,h,a,l){var c=new n(this.scene,s,o,h,a,l);return this.displayList.add(c),c})},function(e,d,t){var n=t(215),u=t(5);u.register("dynamicBitmapText",function(s,o,h,a,l){return this.displayList.add(new n(this.scene,s,o,h,a,l))})},function(e,d,t){var n=t(444),u=t(5);u.register("extern",function(){var s=new n(this.scene);return this.displayList.add(s),s})},function(e,d,t){var n=t(216),u=t(5);u.register("graphics",function(s){return this.displayList.add(new n(this.scene,s))})},function(e,d,t){var n=t(113),u=t(5);u.register("group",function(s,o){return this.updateList.add(new n(this.scene,s,o))})},function(e,d,t){var n=t(125),u=t(5);u.register("image",function(s,o,h,a){return this.displayList.add(new n(this.scene,s,o,h,a))})},function(e,d,t){var n=t(219),u=t(5);u.register("layer",function(s){return this.displayList.add(new n(this.scene,s))})},function(e,d,t){var n=t(5),u=t(220);n.register("particles",function(s,o,h){return this.displayList.add(new u(this.scene,s,o,h))})},function(e,d,t){var n=t(5),u=t(457);n.register("follower",function(s,o,h,a,l){var c=new u(this.scene,s,o,h,a,l);return this.displayList.add(c),this.updateList.add(c),c})},function(e,d,t){var n=t(5),u=t(221);n.register("renderTexture",function(s,o,h,a,l,c){return this.displayList.add(new u(this.scene,s,o,h,a,l,c))})},function(e,d,t){var n=t(223),u=t(5);u.register("rope",function(s,o,h,a,l,c,f,v){return this.displayList.add(new n(this.scene,s,o,h,a,l,c,f,v))})},function(e,d,t){var n=t(5),u=t(73);n.register("sprite",function(s,o,h,a){var l=new u(this.scene,s,o,h,a);return this.displayList.add(l),l})},function(e,d,t){var n=t(148),u=t(5);u.register("bitmapText",function(s,o,h,a,l,c){return this.displayList.add(new n(this.scene,s,o,h,a,l,c))})},function(e,d,t){var n=t(224),u=t(5);u.register("text",function(s,o,h,a){return this.displayList.add(new n(this.scene,s,o,h,a))})},function(e,d,t){var n=t(225),u=t(5);u.register("tileSprite",function(s,o,h,a,l,c){return this.displayList.add(new n(this.scene,s,o,h,a,l,c))})},function(e,d,t){var n=t(129),u=t(5);u.register("zone",function(s,o,h,a){return this.displayList.add(new n(this.scene,s,o,h,a))})},function(e,d,t){var n=t(226),u=t(5);u.register("video",function(s,o,h){return this.displayList.add(new n(this.scene,s,o,h))})},function(e,d,t){var n=t(461),u=t(5);u.register("arc",function(s,o,h,a,l,c,f,v){return this.displayList.add(new n(this.scene,s,o,h,a,l,c,f,v))}),u.register("circle",function(s,o,h,a,l){return this.displayList.add(new n(this.scene,s,o,h,0,360,!1,a,l))})},function(e,d,t){var n=t(5),u=t(462);n.register("curve",function(s,o,h,a,l){return this.displayList.add(new u(this.scene,s,o,h,a,l))})},function(e,d,t){var n=t(463),u=t(5);u.register("ellipse",function(s,o,h,a,l,c){return this.displayList.add(new n(this.scene,s,o,h,a,l,c))})},function(e,d,t){var n=t(5),u=t(464);n.register("grid",function(s,o,h,a,l,c,f,v,p,g){return this.displayList.add(new u(this.scene,s,o,h,a,l,c,f,v,p,g))})},function(e,d,t){var n=t(5),u=t(465);n.register("isobox",function(s,o,h,a,l,c,f){return this.displayList.add(new u(this.scene,s,o,h,a,l,c,f))})},function(e,d,t){var n=t(5),u=t(466);n.register("isotriangle",function(s,o,h,a,l,c,f,v){return this.displayList.add(new u(this.scene,s,o,h,a,l,c,f,v))})},function(e,d,t){var n=t(5),u=t(467);n.register("line",function(s,o,h,a,l,c,f,v){return this.displayList.add(new u(this.scene,s,o,h,a,l,c,f,v))})},function(e,d,t){var n=t(5),u=t(468);n.register("polygon",function(s,o,h,a,l){return this.displayList.add(new u(this.scene,s,o,h,a,l))})},function(e,d,t){var n=t(5),u=t(473);n.register("rectangle",function(s,o,h,a,l,c){return this.displayList.add(new u(this.scene,s,o,h,a,l,c))})},function(e,d,t){var n=t(474),u=t(5);u.register("star",function(s,o,h,a,l,c,f){return this.displayList.add(new n(this.scene,s,o,h,a,l,c,f))})},function(e,d,t){var n=t(5),u=t(475);n.register("triangle",function(s,o,h,a,l,c,f,v,p,g){return this.displayList.add(new u(this.scene,s,o,h,a,l,c,f,v,p,g))})},function(e,d,t){var n=t(213),u=t(28),s=t(16),o=t(13);s.register("blitter",function(h,a){h===void 0&&(h={});var l=o(h,"key",null),c=o(h,"frame",null),f=new n(this.scene,0,0,l,c);return a!==void 0&&(h.add=a),u(this.scene,f,h),f})},function(e,d,t){var n=t(28),u=t(214),s=t(16),o=t(13);s.register("container",function(h,a){h===void 0&&(h={});var l=o(h,"x",0),c=o(h,"y",0),f=o(h,"children",null),v=new u(this.scene,l,c,f);return a!==void 0&&(h.add=a),n(this.scene,v,h),v})},function(e,d,t){var n=t(215),u=t(28),s=t(16),o=t(13);s.register("dynamicBitmapText",function(h,a){h===void 0&&(h={});var l=o(h,"font",""),c=o(h,"text",""),f=o(h,"size",!1),v=new n(this.scene,0,0,l,c,f);return a!==void 0&&(h.add=a),u(this.scene,v,h),v})},function(e,d,t){var n=t(16),u=t(216);n.register("graphics",function(s,o){s===void 0&&(s={}),o!==void 0&&(s.add=o);var h=new u(this.scene,s);return s.add&&this.scene.sys.displayList.add(h),h})},function(e,d,t){var n=t(16),u=t(113);n.register("group",function(s){return new u(this.scene,null,s)})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(125);u.register("image",function(h,a){h===void 0&&(h={});var l=s(h,"key",null),c=s(h,"frame",null),f=new o(this.scene,0,0,l,c);return a!==void 0&&(h.add=a),n(this.scene,f,h),f})},function(e,d,t){var n=t(28),u=t(219),s=t(16),o=t(13);s.register("layer",function(h,a){h===void 0&&(h={});var l=o(h,"children",null),c=new u(this.scene,l);return a!==void 0&&(h.add=a),n(this.scene,c,h),c})},function(e,d,t){var n=t(16),u=t(13),s=t(2),o=t(220);n.register("particles",function(h,a){h===void 0&&(h={});var l=u(h,"key",null),c=u(h,"frame",null),f=s(h,"emitters",null),v=new o(this.scene,l,c,f);a!==void 0&&(h.add=a);var p=s(h,"add",!1);return p?this.displayList.add(v):this.updateList.add(v),v})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(221);u.register("renderTexture",function(h,a){h===void 0&&(h={});var l=s(h,"x",0),c=s(h,"y",0),f=s(h,"width",32),v=s(h,"height",32),p=s(h,"key",void 0),g=s(h,"frame",void 0),m=new o(this.scene,l,c,f,v,p,g);return a!==void 0&&(h.add=a),n(this.scene,m,h),m})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(6),h=t(223);u.register("rope",function(a,l){a===void 0&&(a={});var c=s(a,"key",null),f=s(a,"frame",null),v=s(a,"horizontal",!0),p=o(a,"points",void 0),g=o(a,"colors",void 0),m=o(a,"alphas",void 0),x=new h(this.scene,0,0,c,f,p,v,g,m);return l!==void 0&&(a.add=l),n(this.scene,x,a),a.add||this.updateList.add(x),x})},function(e,d,t){var n=t(28),u=t(439),s=t(16),o=t(13),h=t(73);s.register("sprite",function(a,l){a===void 0&&(a={});var c=o(a,"key",null),f=o(a,"frame",null),v=new h(this.scene,0,0,c,f);return l!==void 0&&(a.add=l),n(this.scene,v,a),u(v,a),v})},function(e,d,t){var n=t(148),u=t(28),s=t(16),o=t(13),h=t(6);s.register("bitmapText",function(a,l){a===void 0&&(a={});var c=h(a,"font",""),f=o(a,"text",""),v=o(a,"size",!1),p=h(a,"align",0),g=new n(this.scene,0,0,c,f,v,p);return l!==void 0&&(a.add=l),u(this.scene,g,a),g})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(224);u.register("text",function(h,a){h===void 0&&(h={});var l=s(h,"text",""),c=s(h,"style",null),f=s(h,"padding",null);f!==null&&(c.padding=f);var v=new o(this.scene,0,0,l,c);return a!==void 0&&(h.add=a),n(this.scene,v,h),v.autoRound=s(h,"autoRound",!0),v.resolution=s(h,"resolution",1),v})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(225);u.register("tileSprite",function(h,a){h===void 0&&(h={});var l=s(h,"x",0),c=s(h,"y",0),f=s(h,"width",512),v=s(h,"height",512),p=s(h,"key",""),g=s(h,"frame",""),m=new o(this.scene,l,c,f,v,p,g);return a!==void 0&&(h.add=a),n(this.scene,m,h),m})},function(e,d,t){var n=t(16),u=t(13),s=t(129);n.register("zone",function(o){var h=u(o,"x",0),a=u(o,"y",0),l=u(o,"width",1),c=u(o,"height",l);return new s(this.scene,h,a,l,c)})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(226);u.register("video",function(h,a){h===void 0&&(h={});var l=s(h,"key",null),c=new o(this.scene,0,0,l);return a!==void 0&&(h.add=a),n(this.scene,c,h),h.add||this.updateList.add(c),c})},function(e,d,t){var n=t(1),u=t(1);n=t(1177),u=t(1178),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=function(s,o,h,a){if(!!o.shader){if(h.addToRenderList(o),s.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var l=n(o,h,a).calc;(s.width!==o._rendererWidth||s.height!==o._rendererHeight)&&o.projOrtho(0,s.width,s.height,0),o.load(l.matrix),o.flush()}s.pipelines.rebind()}};e.exports=u},function(e,d){var t=function(){};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1180),u=t(1181),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=function(s,o,h,a){var l=o.faces,c=l.length;if(c!==0){h.addToRenderList(o);var f=s.pipelines.set(o.pipeline,o),v=n(o,h,a).calc,p=f.setGameObject(o),g=f.vertexViewF32,m=f.vertexViewU32,x=f.vertexCount*f.currentShader.vertexComponentCount-1,y=o.tintFill,T=[],C=o.debugCallback,S=v.a,E=v.b,M=v.c,R=v.d,L=v.e,O=v.f,F=o.viewPosition.z,D=o.hideCCW,B=h.roundPixels,b=h.alpha*o.alpha,V=0;s.pipelines.preBatch(o);for(var X=0;X<c;X++){var K=l[X];!K.isInView(h,D,F,b,S,E,M,R,L,O,B)||(f.shouldFlush(3)&&(f.flush(),x=0),x=K.load(g,m,x,p,y),V++,f.vertexCount+=3,C&&T.push(K))}o.totalFrame+=V,C&&C.call(o,o,T),s.pipelines.postBatch(o)}};e.exports=u},function(e,d){var t=function(){};e.exports=t},function(e,d,t){var n=t(1),u=t(1);n=t(1183),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(19),u=function(s,o,h,a){h.addToRenderList(o);var l=s.pipelines.set(o.pipeline),c=n(o,h,a).calc,f=o.width,v=o.height,p=-o._radius,g=-o._radius,m=p+f,x=g+v,y=c.getX(0,0),T=c.getY(0,0),C=c.getX(p,g),S=c.getY(p,g),E=c.getX(p,x),M=c.getY(p,x),R=c.getX(m,x),L=c.getY(m,x),O=c.getX(m,g),F=c.getY(m,g);s.pipelines.preBatch(o),l.batchPointLight(o,h,C,S,E,M,R,L,O,F,y,T),s.pipelines.postBatch(o)};e.exports=u},function(e,d,t){var n=t(229),u=t(5);u.register("shader",function(s,o,h,a,l,c,f){return this.displayList.add(new n(this.scene,s,o,h,a,l,c,f))})},function(e,d,t){var n=t(230),u=t(5);u.register("mesh",function(s,o,h,a,l,c,f,v,p,g,m){return this.displayList.add(new n(this.scene,s,o,h,a,l,c,f,v,p,g,m))})},function(e,d,t){var n=t(5),u=t(150);n.register("pointlight",function(s,o,h,a,l,c){return this.displayList.add(new u(this.scene,s,o,h,a,l,c))})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(229);u.register("shader",function(h,a){h===void 0&&(h={});var l=s(h,"key",null),c=s(h,"x",0),f=s(h,"y",0),v=s(h,"width",128),p=s(h,"height",128),g=new o(this.scene,l,c,f,v,p);return a!==void 0&&(h.add=a),n(this.scene,g,h),g})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(6),h=t(230);u.register("mesh",function(a,l){a===void 0&&(a={});var c=s(a,"key",null),f=s(a,"frame",null),v=o(a,"vertices",[]),p=o(a,"uvs",[]),g=o(a,"indicies",[]),m=o(a,"containsZ",!1),x=o(a,"normals",[]),y=o(a,"colors",16777215),T=o(a,"alphas",1),C=new h(this.scene,0,0,c,f,v,p,g,m,x,y,T);return l!==void 0&&(a.add=l),n(this.scene,C,a),C})},function(e,d,t){var n=t(28),u=t(16),s=t(13),o=t(150);u.register("pointlight",function(h,a){h===void 0&&(h={});var l=s(h,"color",16777215),c=s(h,"radius",128),f=s(h,"intensity",1),v=s(h,"attenuation",.1),p=new o(this.scene,0,0,l,c,f,v);return a!==void 0&&(h.add=a),n(this.scene,p,h),p})},function(e,d,t){var n=t(0),u=t(482),s=t(24),o=t(20),h=new n({Extends:u,initialize:function(l){this.scene=l,this.systems=l.sys,l.sys.settings.isBooted||l.sys.events.once(o.BOOT,this.boot,this),u.call(this)},boot:function(){var a=this.systems.events;a.on(o.SHUTDOWN,this.shutdown,this),a.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",h,"lights"),e.exports=h},function(e,d,t){var n=t(65);n.Area=t(1192),n.Circumference=t(302),n.CircumferencePoint=t(169),n.Clone=t(1193),n.Contains=t(66),n.ContainsPoint=t(1194),n.ContainsRect=t(1195),n.CopyFrom=t(1196),n.Equals=t(1197),n.GetBounds=t(1198),n.GetPoint=t(300),n.GetPoints=t(301),n.Offset=t(1199),n.OffsetPoint=t(1200),n.Random=t(170),e.exports=n},function(e,d){var t=function(n){return n.radius>0?Math.PI*n.radius*n.radius:0};e.exports=t},function(e,d,t){var n=t(65),u=function(s){return new n(s.x,s.y,s.radius)};e.exports=u},function(e,d,t){var n=t(66),u=function(s,o){return n(s,o.x,o.y)};e.exports=u},function(e,d,t){var n=t(66),u=function(s,o){return n(s,o.x,o.y)&&n(s,o.right,o.y)&&n(s,o.x,o.bottom)&&n(s,o.right,o.bottom)};e.exports=u},function(e,d){var t=function(n,u){return u.setTo(n.x,n.y,n.radius)};e.exports=t},function(e,d){var t=function(n,u){return n.x===u.x&&n.y===u.y&&n.radius===u.radius};e.exports=t},function(e,d,t){var n=t(10),u=function(s,o){return o===void 0&&(o=new n),o.x=s.left,o.y=s.top,o.width=s.diameter,o.height=s.diameter,o};e.exports=u},function(e,d){var t=function(n,u,s){return n.x+=u,n.y+=s,n};e.exports=t},function(e,d){var t=function(n,u){return n.x+=u.x,n.y+=u.y,n};e.exports=t},function(e,d,t){var n=t(111);n.Area=t(1202),n.Circumference=t(447),n.CircumferencePoint=t(218),n.Clone=t(1203),n.Contains=t(112),n.ContainsPoint=t(1204),n.ContainsRect=t(1205),n.CopyFrom=t(1206),n.Equals=t(1207),n.GetBounds=t(1208),n.GetPoint=t(445),n.GetPoints=t(446),n.Offset=t(1209),n.OffsetPoint=t(1210),n.Random=t(180),e.exports=n},function(e,d){var t=function(n){return n.isEmpty()?0:n.getMajorRadius()*n.getMinorRadius()*Math.PI};e.exports=t},function(e,d,t){var n=t(111),u=function(s){return new n(s.x,s.y,s.width,s.height)};e.exports=u},function(e,d,t){var n=t(112),u=function(s,o){return n(s,o.x,o.y)};e.exports=u},function(e,d,t){var n=t(112),u=function(s,o){return n(s,o.x,o.y)&&n(s,o.right,o.y)&&n(s,o.x,o.bottom)&&n(s,o.right,o.bottom)};e.exports=u},function(e,d){var t=function(n,u){return u.setTo(n.x,n.y,n.width,n.height)};e.exports=t},function(e,d){var t=function(n,u){return n.x===u.x&&n.y===u.y&&n.width===u.width&&n.height===u.height};e.exports=t},function(e,d,t){var n=t(10),u=function(s,o){return o===void 0&&(o=new n),o.x=s.left,o.y=s.top,o.width=s.width,o.height=s.height,o};e.exports=u},function(e,d){var t=function(n,u,s){return n.x+=u,n.y+=s,n};e.exports=t},function(e,d){var t=function(n,u){return n.x+=u.x,n.y+=u.y,n};e.exports=t},function(e,d,t){var n=t(4),u=t(231),s=function(o,h,a){if(a===void 0&&(a=[]),u(o,h)){var l=o.x,c=o.y,f=o.radius,v=h.x,p=h.y,g=h.radius,m,x,y,T,C;if(c===p)C=(g*g-f*f-v*v+l*l)/(2*(l-v)),m=1,x=-2*p,y=v*v+C*C-2*v*C+p*p-g*g,T=x*x-4*m*y,T===0?a.push(new n(C,-x/(2*m))):T>0&&(a.push(new n(C,(-x+Math.sqrt(T))/(2*m))),a.push(new n(C,(-x-Math.sqrt(T))/(2*m))));else{var S=(l-v)/(c-p),E=(g*g-f*f-v*v+l*l-p*p+c*c)/(2*(c-p));m=S*S+1,x=2*c*S-2*E*S-2*l,y=l*l+c*c+E*E-f*f-2*c*E,T=x*x-4*m*y,T===0?(C=-x/(2*m),a.push(new n(C,E-C*S))):T>0&&(C=(-x+Math.sqrt(T))/(2*m),a.push(new n(C,E-C*S)),C=(-x-Math.sqrt(T))/(2*m),a.push(new n(C,E-C*S)))}}return a};e.exports=s},function(e,d,t){var n=t(232),u=t(151),s=function(o,h,a){if(a===void 0&&(a=[]),u(o,h)){var l=h.getLineA(),c=h.getLineB(),f=h.getLineC(),v=h.getLineD();n(l,o,a),n(c,o,a),n(f,o,a),n(v,o,a)}return a};e.exports=s},function(e,d,t){var n=t(140),u=t(487),s=t(47),o=new s;function h(c,f,v,p,g){var m=Math.cos(c),x=Math.sin(c);o.setTo(f,v,f+m,v+x);var y=u(o,p);y&&g.push(new n(y.x,y.y,c,y.w))}function a(c,f){return c.z-f.z}var l=function(c,f,v){Array.isArray(v)||(v=[v]);for(var p=[],g=[],m=0;m<v.length;m++)for(var x=v[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-f,x[y].x-c);g.indexOf(T)===-1&&(h(T,c,f,v,p),h(T-1e-5,c,f,v,p),h(T+1e-5,c,f,v,p),g.push(T))}return p.sort(a)};e.exports=l},function(e,d,t){var n=t(10),u=t(152),s=function(o,h,a){return a===void 0&&(a=new n),u(o,h)&&(a.x=Math.max(o.x,h.x),a.y=Math.max(o.y,h.y),a.width=Math.min(o.right,h.right)-a.x,a.height=Math.min(o.bottom,h.bottom)-a.y),a};e.exports=s},function(e,d,t){var n=t(234),u=t(152),s=function(o,h,a){if(a===void 0&&(a=[]),u(o,h)){var l=o.getLineA(),c=o.getLineB(),f=o.getLineC(),v=o.getLineD();n(l,h,a),n(c,h,a),n(f,h,a),n(v,h,a)}return a};e.exports=s},function(e,d,t){var n=t(489),u=t(234),s=function(o,h,a){if(a===void 0&&(a=[]),n(o,h)){var l=h.getLineA(),c=h.getLineB(),f=h.getLineC();u(l,o,a),u(c,o,a),u(f,o,a)}return a};e.exports=s},function(e,d,t){var n=t(232),u=t(491),s=function(o,h,a){if(a===void 0&&(a=[]),u(o,h)){var l=o.getLineA(),c=o.getLineB(),f=o.getLineC();n(l,h,a),n(c,h,a),n(f,h,a)}return a};e.exports=s},function(e,d,t){var n=t(494),u=t(492),s=function(o,h,a){if(a===void 0&&(a=[]),n(o,h)){var l=h.getLineA(),c=h.getLineB(),f=h.getLineC();u(o,l,a),u(o,c,a),u(o,f,a)}return a};e.exports=s},function(e,d,t){var n=t(496),u=function(s,o){if(!n(s,o))return!1;var h=Math.min(o.x1,o.x2),a=Math.max(o.x1,o.x2),l=Math.min(o.y1,o.y2),c=Math.max(o.y1,o.y2);return s.x>=h&&s.x<=a&&s.y>=l&&s.y<=c};e.exports=u},function(e,d){var t=function(n,u,s,o,h,a){return a===void 0&&(a=0),!(u>n.right+a||s<n.left-a||o>n.bottom+a||h<n.top-a)};e.exports=t},function(e,d,t){var n=t(47);n.Angle=t(97),n.BresenhamPoints=t(317),n.CenterOn=t(1222),n.Clone=t(1223),n.CopyFrom=t(1224),n.Equals=t(1225),n.Extend=t(1226),n.GetEasedPoints=t(1227),n.GetMidPoint=t(1228),n.GetNearestPoint=t(1229),n.GetNormal=t(1230),n.GetPoint=t(307),n.GetPoints=t(172),n.GetShortestDistance=t(1231),n.Height=t(1232),n.Length=t(67),n.NormalAngle=t(497),n.NormalX=t(1233),n.NormalY=t(1234),n.Offset=t(1235),n.PerpSlope=t(1236),n.Random=t(173),n.ReflectAngle=t(1237),n.Rotate=t(1238),n.RotateAroundPoint=t(1239),n.RotateAroundXY=t(236),n.SetToAngle=t(1240),n.Slope=t(1241),n.Width=t(1242),e.exports=n},function(e,d){var t=function(n,u,s){var o=u-(n.x1+n.x2)/2,h=s-(n.y1+n.y2)/2;return n.x1+=o,n.y1+=h,n.x2+=o,n.y2+=h,n};e.exports=t},function(e,d,t){var n=t(47),u=function(s){return new n(s.x1,s.y1,s.x2,s.y2)};e.exports=u},function(e,d){var t=function(n,u){return u.setTo(n.x1,n.y1,n.x2,n.y2)};e.exports=t},function(e,d){var t=function(n,u){return n.x1===u.x1&&n.y1===u.y1&&n.x2===u.x2&&n.y2===u.y2};e.exports=t},function(e,d,t){var n=t(67),u=function(s,o,h){h===void 0&&(h=o);var a=n(s),l=s.x2-s.x1,c=s.y2-s.y1;return o&&(s.x1=s.x1-l/a*o,s.y1=s.y1-c/a*o),h&&(s.x2=s.x2+l/a*h,s.y2=s.y2+c/a*h),s};e.exports=u},function(e,d,t){var n=t(352),u=t(80),s=t(4),o=function(h,a,l,c,f){c===void 0&&(c=0),f===void 0&&(f=[]);var v=[],p=h.x1,g=h.y1,m=h.x2-p,x=h.y2-g,y=u(a,f),T,C,S=l-1;for(T=0;T<S;T++)C=y(T/S),v.push(new s(p+m*C,g+x*C));if(C=y(1),v.push(new s(p+m*C,g+x*C)),c>0){var E=v[0],M=[E];for(T=1;T<v.length-1;T++){var R=v[T];n(E,R)>=c&&(M.push(R),E=R)}var L=v[v.length-1];return n(E,L)<c&&M.pop(),M.push(L),M}else return v};e.exports=o},function(e,d,t){var n=t(4),u=function(s,o){return o===void 0&&(o=new n),o.x=(s.x1+s.x2)/2,o.y=(s.y1+s.y2)/2,o};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o,h){h===void 0&&(h=new n);var a=s.x1,l=s.y1,c=s.x2,f=s.y2,v=(c-a)*(c-a)+(f-l)*(f-l);if(v===0)return h;var p=((o.x-a)*(c-a)+(o.y-l)*(f-l))/v;return h.x=a+p*(c-a),h.y=l+p*(f-l),h};e.exports=u},function(e,d,t){var n=t(14),u=t(97),s=t(4),o=function(h,a){a===void 0&&(a=new s);var l=u(h)-n.TAU;return a.x=Math.cos(l),a.y=Math.sin(l),a};e.exports=o},function(e,d){var t=function(n,u){var s=n.x1,o=n.y1,h=n.x2,a=n.y2,l=(h-s)*(h-s)+(a-o)*(a-o);if(l===0)return!1;var c=((o-u.y)*(h-s)-(s-u.x)*(a-o))/l;return Math.abs(c)*Math.sqrt(l)};e.exports=t},function(e,d){var t=function(n){return Math.abs(n.y1-n.y2)};e.exports=t},function(e,d,t){var n=t(14),u=t(97),s=function(o){return Math.cos(u(o)-n.TAU)};e.exports=s},function(e,d,t){var n=t(14),u=t(97),s=function(o){return Math.sin(u(o)-n.TAU)};e.exports=s},function(e,d){var t=function(n,u,s){return n.x1+=u,n.y1+=s,n.x2+=u,n.y2+=s,n};e.exports=t},function(e,d){var t=function(n){return-((n.x2-n.x1)/(n.y2-n.y1))};e.exports=t},function(e,d,t){var n=t(97),u=t(497),s=function(o,h){return 2*u(h)-Math.PI-n(o)};e.exports=s},function(e,d,t){var n=t(236),u=function(s,o){var h=(s.x1+s.x2)/2,a=(s.y1+s.y2)/2;return n(s,h,a,o)};e.exports=u},function(e,d,t){var n=t(236),u=function(s,o,h){return n(s,o.x,o.y,h)};e.exports=u},function(e,d){var t=function(n,u,s,o,h){return n.x1=u,n.y1=s,n.x2=u+Math.cos(o)*h,n.y2=s+Math.sin(o)*h,n};e.exports=t},function(e,d){var t=function(n){return(n.y2-n.y1)/(n.x2-n.x1)};e.exports=t},function(e,d){var t=function(n){return Math.abs(n.x1-n.x2)};e.exports=t},function(e,d,t){var n={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};e.exports=n},function(e,d,t){var n=t(116),u=t(2),s=t(69),o=t(39),h=t(117),a=new o,l=new o,c=new s,f=function(v){var p=u(v,"mesh"),g=u(v,"texture",null),m=u(v,"frame"),x=u(v,"width",1),y=u(v,"height",x),T=u(v,"widthSegments",1),C=u(v,"heightSegments",T),S=u(v,"x",0),E=u(v,"y",0),M=u(v,"z",0),R=u(v,"rotateX",0),L=u(v,"rotateY",0),O=u(v,"rotateZ",0),F=u(v,"zIsUp",!0),D=u(v,"isOrtho",p?p.dirtyCache[11]:!1),B=u(v,"colors",[16777215]),b=u(v,"alphas",[1]),V=u(v,"tile",!1),X=u(v,"flipY",!1),K=u(v,"width",null),J={faces:[],verts:[]};if(a.set(S,E,M),l.set(R,L,O),c.fromRotationXYTranslation(l,a,F),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return J;var G=g.get(m);!K&&D&&g&&p&&(x=G.width/p.height,y=G.height/p.height);var w=x/2,N=y/2,z=Math.floor(T),U=Math.floor(C),W=z+1,H=U+1,Z=x/z,q=y/U,_=[],nt=[],rt,at,vt=0,ut=1,ct=0,Ft=1;G&&(vt=G.u0,ut=G.u1,X?(ct=G.v1,Ft=G.v0):(ct=G.v0,Ft=G.v1));var yt=ut-vt,Tt=Ft-ct;for(at=0;at<H;at++){var dt=at*q-N;for(rt=0;rt<W;rt++){var It=rt*Z-w;nt.push(It,-dt);var gt=vt+yt*(rt/z),Pt=ct+Tt*(at/U);_.push(gt,Pt)}}Array.isArray(B)||(B=[B]),Array.isArray(b)||(b=[b]);var ge=0,Ge=0;for(at=0;at<U;at++)for(rt=0;rt<z;rt++){var Ht=(rt+W*at)*2,Vt=(rt+W*(at+1))*2,te=(rt+1+W*(at+1))*2,qt=(rt+1+W*at)*2,ee=B[Ge],Ee=b[ge],hi=new h(nt[Ht],nt[Ht+1],0,_[Ht],_[Ht+1],ee,Ee).transformMat4(c),li=new h(nt[Vt],nt[Vt+1],0,_[Vt],_[Vt+1],ee,Ee).transformMat4(c),ui=new h(nt[qt],nt[qt+1],0,_[qt],_[qt+1],ee,Ee).transformMat4(c),fi=new h(nt[Vt],nt[Vt+1],0,_[Vt],_[Vt+1],ee,Ee).transformMat4(c),di=new h(nt[te],nt[te+1],0,_[te],_[te+1],ee,Ee).transformMat4(c),vi=new h(nt[qt],nt[qt+1],0,_[qt],_[qt+1],ee,Ee).transformMat4(c);V&&(hi.setUVs(vt,Ft),li.setUVs(vt,ct),ui.setUVs(ut,Ft),fi.setUVs(vt,ct),di.setUVs(ut,ct),vi.setUVs(ut,Ft)),Ge++,Ge===B.length&&(Ge=0),ge++,ge===b.length&&(ge=0),J.verts.push(hi,li,ui,fi,di,vi),J.faces.push(new n(hi,li,ui),new n(fi,di,vi))}return p&&(p.faces=p.faces.concat(J.faces),p.vertices=p.vertices.concat(J.verts)),J};e.exports=f},function(e,d){var t=function(n,u,s,o){var h,a;if(s===void 0&&o===void 0){var l=n.getInCenter();h=l.x,a=l.y}var c=Math.cos(u),f=Math.sin(u),v=n.vertex1,p=n.vertex2,g=n.vertex3,m=v.x-h,x=v.y-a;v.set(m*c-x*f+h,m*f+x*c+a),m=p.x-h,x=p.y-a,p.set(m*c-x*f+h,m*f+x*c+a),m=g.x-h,x=g.y-a,g.set(m*c-x*f+h,m*f+x*c+a)};e.exports=t},function(e,d,t){var n=t(4);n.Ceil=t(1247),n.Clone=t(1248),n.CopyFrom=t(1249),n.Equals=t(1250),n.Floor=t(1251),n.GetCentroid=t(1252),n.GetMagnitude=t(500),n.GetMagnitudeSq=t(501),n.GetRectangleFromPoints=t(1253),n.Interpolate=t(1254),n.Invert=t(1255),n.Negative=t(1256),n.Project=t(1257),n.ProjectUnit=t(1258),n.SetMagnitude=t(1259),e.exports=n},function(e,d){var t=function(n){return n.setTo(Math.ceil(n.x),Math.ceil(n.y))};e.exports=t},function(e,d,t){var n=t(4),u=function(s){return new n(s.x,s.y)};e.exports=u},function(e,d){var t=function(n,u){return u.setTo(n.x,n.y)};e.exports=t},function(e,d){var t=function(n,u){return n.x===u.x&&n.y===u.y};e.exports=t},function(e,d){var t=function(n){return n.setTo(Math.floor(n.x),Math.floor(n.y))};e.exports=t},function(e,d,t){var n=t(4),u=function(s,o){if(o===void 0&&(o=new n),!Array.isArray(s))throw new Error("GetCentroid points argument must be an array");var h=s.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)o.x=s[0].x,o.y=s[0].y;else{for(var a=0;a<h;a++)o.x+=s[a].x,o.y+=s[a].y;o.x/=h,o.y/=h}return o};e.exports=u},function(e,d,t){var n=t(10),u=function(s,o){o===void 0&&(o=new n);for(var h=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,f=0;f<s.length;f++){var v=s[f];v.x>h&&(h=v.x),v.x<a&&(a=v.x),v.y>l&&(l=v.y),v.y<c&&(c=v.y)}return o.x=a,o.y=c,o.width=h-a,o.height=l-c,o};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o,h,a){return h===void 0&&(h=0),a===void 0&&(a=new n),a.x=s.x+(o.x-s.x)*h,a.y=s.y+(o.y-s.y)*h,a};e.exports=u},function(e,d){var t=function(n){return n.setTo(n.y,n.x)};e.exports=t},function(e,d,t){var n=t(4),u=function(s,o){return o===void 0&&(o=new n),o.setTo(-s.x,-s.y)};e.exports=u},function(e,d,t){var n=t(4),u=t(501),s=function(o,h,a){a===void 0&&(a=new n);var l=o.x*h.x+o.y*h.y,c=l/u(h);return c!==0&&(a.x=c*h.x,a.y=c*h.y),a};e.exports=s},function(e,d,t){var n=t(4),u=function(s,o,h){h===void 0&&(h=new n);var a=s.x*o.x+s.y*o.y;return a!==0&&(h.x=a*o.x,h.y=a*o.y),h};e.exports=u},function(e,d,t){var n=t(500),u=function(s,o){if(s.x!==0||s.y!==0){var h=n(s);s.x/=h,s.y/=h}return s.x*=o,s.y*=o,s};e.exports=u},function(e,d,t){var n=t(227);n.Clone=t(1261),n.Contains=t(228),n.ContainsPoint=t(1262),n.Earcut=t(59),n.GetAABB=t(469),n.GetNumberArray=t(1263),n.GetPoints=t(470),n.Perimeter=t(471),n.Reverse=t(1264),n.Simplify=t(1265),n.Smooth=t(472),n.Translate=t(1266),e.exports=n},function(e,d,t){var n=t(227),u=function(s){return new n(s.points)};e.exports=u},function(e,d,t){var n=t(228),u=function(s,o){return n(s,o.x,o.y)};e.exports=u},function(e,d){var t=function(n,u){u===void 0&&(u=[]);for(var s=0;s<n.points.length;s++)u.push(n.points[s].x),u.push(n.points[s].y);return u};e.exports=t},function(e,d){var t=function(n){return n.points.reverse(),n};e.exports=t},function(e,d){function t(a,l){var c=a.x-l.x,f=a.y-l.y;return c*c+f*f}function n(a,l,c){var f=l.x,v=l.y,p=c.x-f,g=c.y-v;if(p!==0||g!==0){var m=((a.x-f)*p+(a.y-v)*g)/(p*p+g*g);m>1?(f=c.x,v=c.y):m>0&&(f+=p*m,v+=g*m)}return p=a.x-f,g=a.y-v,p*p+g*g}function u(a,l){for(var c=a[0],f=[c],v,p=1,g=a.length;p<g;p++)v=a[p],t(v,c)>l&&(f.push(v),c=v);return c!==v&&f.push(v),f}function s(a,l,c,f,v){for(var p=f,g,m=l+1;m<c;m++){var x=n(a[m],a[l],a[c]);x>p&&(g=m,p=x)}p>f&&(g-l>1&&s(a,l,g,f,v),v.push(a[g]),c-g>1&&s(a,g,c,f,v))}function o(a,l){var c=a.length-1,f=[a[0]];return s(a,0,c,l,f),f.push(a[c]),f}var h=function(a,l,c){l===void 0&&(l=1),c===void 0&&(c=!1);var f=a.points;if(f.length>2){var v=l*l;c||(f=u(f,v)),a.setTo(o(f,v))}return a};e.exports=h},function(e,d){var t=function(n,u,s){for(var o=n.points,h=0;h<o.length;h++)o[h].x+=u,o[h].y+=s;return n};e.exports=t},function(e,d){var t=function(n){return n.width*n.height};e.exports=t},function(e,d){var t=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n};e.exports=t},function(e,d){var t=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n};e.exports=t},function(e,d,t){var n=t(10),u=function(s){return new n(s.x,s.y,s.width,s.height)};e.exports=u},function(e,d,t){var n=t(57),u=function(s,o){return n(s,o.x,o.y)};e.exports=u},function(e,d){var t=function(n,u){return u.setTo(n.x,n.y,n.width,n.height)};e.exports=t},function(e,d){var t=function(n,u){return n.x===u.x&&n.y===u.y&&n.width===u.width&&n.height===u.height};e.exports=t},function(e,d,t){var n=t(237),u=function(s,o){var h=n(s);return h<n(o)?s.setSize(o.height*h,o.height):s.setSize(o.width,o.width/h),s.setPosition(o.centerX-s.width/2,o.centerY-s.height/2)};e.exports=u},function(e,d,t){var n=t(237),u=function(s,o){var h=n(s);return h>n(o)?s.setSize(o.height*h,o.height):s.setSize(o.width,o.width/h),s.setPosition(o.centerX-s.width/2,o.centerY-s.height/2)};e.exports=u},function(e,d){var t=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n};e.exports=t},function(e,d){var t=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n.width=Math.floor(n.width),n.height=Math.floor(n.height),n};e.exports=t},function(e,d,t){var n=t(10),u=function(s,o,h,a,l){return l===void 0&&(l=new n),l.setTo(Math.min(s,h),Math.min(o,a),Math.abs(s-h),Math.abs(o-a))};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o){return o===void 0&&(o=new n),o.x=s.centerX,o.y=s.centerY,o};e.exports=u},function(e,d,t){var n=t(4),u=function(s,o){return o===void 0&&(o=new n),o.x=s.width,o.y=s.height,o};e.exports=u},function(e,d,t){var n=t(190),u=function(s,o,h){var a=s.centerX,l=s.centerY;return s.setSize(s.width+o*2,s.height+h*2),n(s,a,l)};e.exports=u},function(e,d,t){var n=t(10),u=t(152),s=function(o,h,a){return a===void 0&&(a=new n),u(o,h)?(a.x=Math.max(o.x,h.x),a.y=Math.max(o.y,h.y),a.width=Math.min(o.right,h.right)-a.x,a.height=Math.min(o.bottom,h.bottom)-a.y):a.setEmpty(),a};e.exports=s},function(e,d){var t=function(n,u){for(var s=n.x,o=n.right,h=n.y,a=n.bottom,l=0;l<u.length;l++)s=Math.min(s,u[l].x),o=Math.max(o,u[l].x),h=Math.min(h,u[l].y),a=Math.max(a,u[l].y);return n.x=s,n.y=h,n.width=o-s,n.height=a-h,n};e.exports=t},function(e,d){var t=function(n,u){var s=Math.min(n.x,u.x),o=Math.max(n.right,u.right);n.x=s,n.width=o-s;var h=Math.min(n.y,u.y),a=Math.max(n.bottom,u.bottom);return n.y=h,n.height=a-h,n};e.exports=t},function(e,d){var t=function(n,u,s){var o=Math.min(n.x,u),h=Math.max(n.right,u);n.x=o,n.width=h-o;var a=Math.min(n.y,s),l=Math.max(n.bottom,s);return n.y=a,n.height=l-a,n};e.exports=t},function(e,d){var t=function(n,u,s){return n.x+=u,n.y+=s,n};e.exports=t},function(e,d){var t=function(n,u){return n.x+=u.x,n.y+=u.y,n};e.exports=t},function(e,d){var t=function(n,u){return n.x<u.right&&n.right>u.x&&n.y<u.bottom&&n.bottom>u.y};e.exports=t},function(e,d,t){var n=t(4),u=t(36),s=function(o,h,a){a===void 0&&(a=new n),h=u(h);var l=Math.sin(h),c=Math.cos(h),f=c>0?o.width/2:o.width/-2,v=l>0?o.height/2:o.height/-2;return Math.abs(f*l)<Math.abs(v*c)?v=f*l/c:f=v*c/l,a.x=f+o.centerX,a.y=v+o.centerY,a};e.exports=s},function(e,d,t){var n=t(195),u=t(503),s=t(4),o=function(h,a,l){if(l===void 0&&(l=new s),u(h,a))switch(n(0,3)){case 0:l.x=h.x+Math.random()*(a.right-h.x),l.y=h.y+Math.random()*(a.top-h.y);break;case 1:l.x=a.x+Math.random()*(h.right-a.x),l.y=a.bottom+Math.random()*(h.bottom-a.bottom);break;case 2:l.x=h.x+Math.random()*(a.x-h.x),l.y=a.y+Math.random()*(h.bottom-a.y);break;case 3:l.x=a.right+Math.random()*(h.right-a.right),l.y=h.y+Math.random()*(a.bottom-h.y);break}return l};e.exports=o},function(e,d){var t=function(n,u){return n.width===u.width&&n.height===u.height};e.exports=t},function(e,d){var t=function(n,u,s){return s===void 0&&(s=u),n.width*=u,n.height*=s,n};e.exports=t},function(e,d,t){var n=t(82);n.Area=t(1294),n.BuildEquilateral=t(1295),n.BuildFromPolygon=t(1296),n.BuildRight=t(1297),n.CenterOn=t(1298),n.Centroid=t(504),n.CircumCenter=t(1299),n.CircumCircle=t(1300),n.Clone=t(1301),n.Contains=t(115),n.ContainsArray=t(235),n.ContainsPoint=t(1302),n.CopyFrom=t(1303),n.Decompose=t(495),n.Equals=t(1304),n.GetPoint=t(476),n.GetPoints=t(477),n.InCenter=t(506),n.Perimeter=t(1305),n.Offset=t(505),n.Random=t(181),n.Rotate=t(1306),n.RotateAroundPoint=t(1307),n.RotateAroundXY=t(238),e.exports=n},function(e,d){var t=function(n){var u=n.x1,s=n.y1,o=n.x2,h=n.y2,a=n.x3,l=n.y3;return Math.abs(((a-u)*(h-s)-(o-u)*(l-s))/2)};e.exports=t},function(e,d,t){var n=t(82),u=function(s,o,h){var a=h*(Math.sqrt(3)/2),l=s,c=o,f=s+h/2,v=o+a,p=s-h/2,g=o+a;return new n(l,c,f,v,p,g)};e.exports=u},function(e,d,t){var n=t(59),u=t(82),s=function(o,h,a,l,c){h===void 0&&(h=null),a===void 0&&(a=1),l===void 0&&(l=1),c===void 0&&(c=[]);for(var f=n(o,h),v,p,g,m,x,y,T,C,S,E=0;E<f.length;E+=3)v=f[E],p=f[E+1],g=f[E+2],m=o[v*2]*a,x=o[v*2+1]*l,y=o[p*2]*a,T=o[p*2+1]*l,C=o[g*2]*a,S=o[g*2+1]*l,c.push(new u(m,x,y,T,C,S));return c};e.exports=s},function(e,d,t){var n=t(82),u=function(s,o,h,a){a===void 0&&(a=h);var l=s,c=o,f=s,v=o-a,p=s+h,g=o;return new n(l,c,f,v,p,g)};e.exports=u},function(e,d,t){var n=t(504),u=t(505),s=function(o,h,a,l){l===void 0&&(l=n);var c=l(o),f=h-c.x,v=a-c.y;return u(o,f,v)};e.exports=s},function(e,d,t){var n=t(3);function u(o,h,a,l){return o*l-h*a}var s=function(o,h){h===void 0&&(h=new n);var a=o.x3,l=o.y3,c=o.x1-a,f=o.y1-l,v=o.x2-a,p=o.y2-l,g=2*u(c,f,v,p),m=u(f,c*c+f*f,p,v*v+p*p),x=u(c,c*c+f*f,v,v*v+p*p);return h.x=a-m/g,h.y=l+x/g,h};e.exports=s},function(e,d,t){var n=t(65),u=function(s,o){o===void 0&&(o=new n);var h=s.x1,a=s.y1,l=s.x2,c=s.y2,f=s.x3,v=s.y3,p=l-h,g=c-a,m=f-h,x=v-a,y=p*(h+l)+g*(a+c),T=m*(h+f)+x*(a+v),C=2*(p*(v-c)-g*(f-l)),S,E;if(Math.abs(C)<1e-6){var M=Math.min(h,l,f),R=Math.min(a,c,v);S=(Math.max(h,l,f)-M)*.5,E=(Math.max(a,c,v)-R)*.5,o.x=M+S,o.y=R+E,o.radius=Math.sqrt(S*S+E*E)}else o.x=(x*y-g*T)/C,o.y=(p*T-m*y)/C,S=o.x-h,E=o.y-a,o.radius=Math.sqrt(S*S+E*E);return o};e.exports=u},function(e,d,t){var n=t(82),u=function(s){return new n(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};e.exports=u},function(e,d,t){var n=t(115),u=function(s,o){return n(s,o.x,o.y)};e.exports=u},function(e,d){var t=function(n,u){return u.setTo(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=t},function(e,d){var t=function(n,u){return n.x1===u.x1&&n.y1===u.y1&&n.x2===u.x2&&n.y2===u.y2&&n.x3===u.x3&&n.y3===u.y3};e.exports=t},function(e,d,t){var n=t(67),u=function(s){var o=s.getLineA(),h=s.getLineB(),a=s.getLineC();return n(o)+n(h)+n(a)};e.exports=u},function(e,d,t){var n=t(238),u=t(506),s=function(o,h){var a=u(o);return n(o,a.x,a.y,h)};e.exports=s},function(e,d,t){var n=t(238),u=function(s,o,h){return n(s,o.x,o.y,h)};e.exports=u},function(e,d,t){var n=t(203),u=t(17),s={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};s=u(!1,s,n),e.exports=s},function(e,d,t){e.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(e,d){e.exports="down"},function(e,d){e.exports="up"},function(e,d){e.exports="connected"},function(e,d){e.exports="disconnected"},function(e,d){e.exports="down"},function(e,d){e.exports="up"},function(e,d,t){var n=t(0),u=t(9),s=t(239),o=t(511),h=t(6),a=t(153),l=t(51),c=new n({Extends:u,initialize:function(v){u.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(l.BOOT,this.boot,this),v.pluginEvents.on(l.START,this.start,this)},boot:function(){var f=this.scene.sys.game,v=this.settings.input,p=f.config;this.enabled=h(v,"gamepad",p.inputGamepad)&&f.device.input.gamepads,this.target=h(v,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var f=this,v=this.target,p=function(g){g.defaultPrevented||!f.isActive()||(f.refreshPads(),f.queue.push(g))};this.onGamepadHandler=p,v.addEventListener("gamepadconnected",p,!1),v.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].removeAllListeners()},disconnectAll:function(){for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].pad.connected=!1},refreshPads:function(){var f=navigator.getGamepads();if(!f)this.disconnectAll();else for(var v=this.gamepads,p=0;p<f.length;p++){var g=f[p];if(!!g){var m=g.id,x=g.index,y=v[x];if(y)y.id!==m?(y.destroy(),v[x]=new o(this,g)):y.update(g);else{var T=new o(this,g);v[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var f=[],v=this.gamepads,p=0;p<v.length;p++)v[p]&&f.push(v[p]);return f},getPad:function(f){for(var v=this.gamepads,p=0;p<v.length;p++)if(v[p]&&v[p].index===f)return v[p]},update:function(){if(!!this.enabled){this.refreshPads();var f=this.queue.length;if(f!==0)for(var v=this.queue.splice(0,f),p=0;p<f;p++){var g=v[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(s.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(s.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var f=0;f<this.gamepads.length;f++)this.gamepads[f]&&this.gamepads[f].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});a.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),e.exports=c},function(e,d,t){e.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(e,d){e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,d){e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,d){e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,d,t){var n=t(65),u=t(66),s=t(0),o=t(203),h=t(508),a=t(507),l=t(50),c=t(111),f=t(112),v=t(51),p=t(9),g=t(2),m=t(56),x=t(153),y=t(7),T=t(24),C=t(10),S=t(57),E=t(20),M=t(82),R=t(115),L=new s({Extends:p,initialize:function(F){p.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(E.BOOT,this.boot,this),F.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var O=this.systems.events;O.on(E.TRANSITION_START,this.transitionIn,this),O.on(E.TRANSITION_OUT,this.transitionOut,this),O.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),O.on(E.PRE_UPDATE,this.preUpdate,this),O.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(O){this.isActive()&&this.emit(v.GAME_OVER,O.timeStamp,O)},onGameOut:function(O){this.isActive()&&this.emit(v.GAME_OUT,O.timeStamp,O)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var O=this._pendingRemoval,F=this._pendingInsertion,D=O.length,B=F.length;if(!(D===0&&B===0)){for(var b=this._list,V=0;V<D;V++){var X=O[V],K=b.indexOf(X);K>-1&&(b.splice(K,1),this.clear(X,!0))}O.length=0,this._pendingRemoval.length=0,this._list=b.concat(F.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(O,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,O,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,B=this.manager,b=B.pointers,V=B.pointersTotal;for(D=0;D<V;D++)b[D].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(D=0;D<V;D++){var J=0,G=b[D];this._tempZones=[],this._temp=this.hitTestPointer(G),this.sortGameObjects(this._temp,G),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),J+=this.processOverOutEvents(G),this.getDragState(G)===2&&this.processDragThresholdEvent(G,O),J>0&&(K=!0)}return K},update:function(O,F){if(!this.isActive())return!1;for(var D=F.length,B=!1,b=0;b<D;b++){var V=0,X=F[b];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),O){case o.MOUSE_DOWN:V+=this.processDragDownEvent(X),V+=this.processDownEvents(X),V+=this.processOverOutEvents(X);break;case o.MOUSE_UP:V+=this.processDragUpEvent(X),V+=this.processUpEvents(X),V+=this.processOverOutEvents(X);break;case o.TOUCH_START:V+=this.processDragDownEvent(X),V+=this.processDownEvents(X),V+=this.processOverEvents(X);break;case o.TOUCH_END:case o.TOUCH_CANCEL:V+=this.processDragUpEvent(X),V+=this.processUpEvents(X),V+=this.processOutEvents(X);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:V+=this.processDragMoveEvent(X),V+=this.processMoveEvents(X),V+=this.processOverOutEvents(X);break;case o.MOUSE_WHEEL:V+=this.processWheelEvent(X);break}V>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(O,F){F===void 0&&(F=!1);var D=O.input;if(!!D){F||this.queueForRemoval(O),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,O.input=null;var B=this._draggable.indexOf(O);return B>-1&&this._draggable.splice(B,1),B=this._drag[0].indexOf(O),B>-1&&this._drag[0].splice(B,1),B=this._over[0].indexOf(O),B>-1&&(this._over[0].splice(B,1),this.manager.resetCursor(D)),O}},disable:function(O){O.input.enabled=!1},enable:function(O,F,D,B){return B===void 0&&(B=!1),O.input?O.input.enabled=!0:this.setHitArea(O,F,D),O.input&&B&&!O.input.dropZone&&(O.input.dropZone=B),this},hitTestPointer:function(O){for(var F=this.cameras.getCamerasBelowPointer(O),D=0;D<F.length;D++){for(var B=F[D],b=this.manager.hitTest(O,this._list,B),V=0;V<b.length;V++){var X=b[V];X.input.dropZone&&this._tempZones.push(X)}if(b.length>0)return O.camera=B,b}return O.camera=F[0],[]},processDownEvents:function(O){var F=0,D=this._temp,B=this._eventData,b=this._eventContainer;B.cancelled=!1;for(var V=!1,X=0;X<D.length;X++){var K=D[X];if(!!K.input){if(F++,K.emit(v.GAMEOBJECT_POINTER_DOWN,O,K.input.localX,K.input.localY,b),B.cancelled||!K.input){V=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,O,K,b),B.cancelled||!K.input){V=!0;break}}}return!V&&this.manager&&(O.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,O,D):this.emit(v.POINTER_DOWN_OUTSIDE,O)),F},getDragState:function(O){return this._dragState[O.id]},setDragState:function(O,F){this._dragState[O.id]=F},processDragThresholdEvent:function(O,F){var D=!1,B=this.dragTimeThreshold,b=this.dragDistanceThreshold;if((b>0&&l(O.x,O.y,O.downX,O.downY)>=b||B>0&&F>=O.downTime+B)&&(D=!0),D)return this.setDragState(O,3),this.processDragStartList(O)},processDragStartList:function(O){if(this.getDragState(O)!==3)return 0;for(var F=this._drag[O.id],D=0;D<F.length;D++){var B=F[D],b=B.input;b.dragState=2,b.dragStartX=B.x,b.dragStartY=B.y,b.dragStartXGlobal=O.worldX,b.dragStartYGlobal=O.worldY,b.dragX=b.dragStartXGlobal-b.dragStartX,b.dragY=b.dragStartYGlobal-b.dragStartY,B.emit(v.GAMEOBJECT_DRAG_START,O,b.dragX,b.dragY),this.emit(v.DRAG_START,O,B)}return this.setDragState(O,4),F.length},processDragDownEvent:function(O){var F=this._temp;if(this._draggable.length===0||F.length===0||!O.primaryDown||this.getDragState(O)!==0)return 0;this.setDragState(O,1);for(var D=[],B=0;B<F.length;B++){var b=F[B];b.input.draggable&&b.input.dragState===0&&D.push(b)}return D.length===0?(this.setDragState(O,0),0):(D.length>1&&(this.sortGameObjects(D,O),this.topOnly&&D.splice(1)),this._drag[O.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(O,3),this.processDragStartList(O)):(this.setDragState(O,2),0))},processDragMoveEvent:function(O){if(this.getDragState(O)===2&&this.processDragThresholdEvent(O,this.manager.game.loop.now),this.getDragState(O)!==4)return 0;for(var F=this._tempZones,D=this._drag[O.id],B=0;B<D.length;B++){var b=D[B],V=b.input,X=V.target;if(X){var K=F.indexOf(X);K===0?(b.emit(v.GAMEOBJECT_DRAG_OVER,O,X),this.emit(v.DRAG_OVER,O,b,X)):K>0?(b.emit(v.GAMEOBJECT_DRAG_LEAVE,O,X),this.emit(v.DRAG_LEAVE,O,b,X),V.target=F[0],X=V.target,b.emit(v.GAMEOBJECT_DRAG_ENTER,O,X),this.emit(v.DRAG_ENTER,O,b,X)):(b.emit(v.GAMEOBJECT_DRAG_LEAVE,O,X),this.emit(v.DRAG_LEAVE,O,b,X),F[0]?(V.target=F[0],X=V.target,b.emit(v.GAMEOBJECT_DRAG_ENTER,O,X),this.emit(v.DRAG_ENTER,O,b,X)):V.target=null)}else!X&&F[0]&&(V.target=F[0],X=V.target,b.emit(v.GAMEOBJECT_DRAG_ENTER,O,X),this.emit(v.DRAG_ENTER,O,b,X));var J,G;if(!b.parentContainer)J=O.worldX-V.dragX,G=O.worldY-V.dragY;else{var w=O.worldX-V.dragStartXGlobal,N=O.worldY-V.dragStartYGlobal,z=b.getParentRotation(),U=w*Math.cos(z)+N*Math.sin(z),W=N*Math.cos(z)-w*Math.sin(z);U*=1/b.parentContainer.scaleX,W*=1/b.parentContainer.scaleY,J=U+V.dragStartX,G=W+V.dragStartY}b.emit(v.GAMEOBJECT_DRAG,O,J,G),this.emit(v.DRAG,O,b,J,G)}return D.length},processDragUpEvent:function(O){for(var F=this._drag[O.id],D=0;D<F.length;D++){var B=F[D],b=B.input;if(b&&b.dragState===2){b.dragState=0,b.dragX=b.localX-B.displayOriginX,b.dragY=b.localY-B.displayOriginY;var V=!1,X=b.target;X&&(B.emit(v.GAMEOBJECT_DROP,O,X),this.emit(v.DROP,O,B,X),b.target=null,V=!0),B.input&&(B.emit(v.GAMEOBJECT_DRAG_END,O,b.dragX,b.dragY,V),this.emit(v.DRAG_END,O,B,V))}}return this.setDragState(O,0),F.splice(0),0},processMoveEvents:function(O){var F=0,D=this._temp,B=this._eventData,b=this._eventContainer;B.cancelled=!1;for(var V=!1,X=0;X<D.length;X++){var K=D[X];if(!!K.input){if(F++,K.emit(v.GAMEOBJECT_POINTER_MOVE,O,K.input.localX,K.input.localY,b),B.cancelled||!K.input){V=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,O,K,b),B.cancelled||!K.input){V=!0;break}if(this.topOnly)break}}return V||this.emit(v.POINTER_MOVE,O,D),F},processWheelEvent:function(O){var F=0,D=this._temp,B=this._eventData,b=this._eventContainer;B.cancelled=!1;for(var V=!1,X=O.deltaX,K=O.deltaY,J=O.deltaZ,G=0;G<D.length;G++){var w=D[G];if(!!w.input){if(F++,w.emit(v.GAMEOBJECT_POINTER_WHEEL,O,X,K,J,b),B.cancelled||!w.input){V=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,O,w,X,K,J,b),B.cancelled||!w.input){V=!0;break}}}return V||this.emit(v.POINTER_WHEEL,O,D,X,K,J),F},processOverEvents:function(O){var F=this._temp,D=0,B=F.length,b=[];if(B>0){var V=this.manager,X=this._eventData,K=this._eventContainer;X.cancelled=!1;for(var J=!1,G=0;G<B;G++){var w=F[G];if(!!w.input){if(b.push(w),V.setCursor(w.input),w.emit(v.GAMEOBJECT_POINTER_OVER,O,w.input.localX,w.input.localY,K),D++,X.cancelled||!w.input){J=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,w,K),X.cancelled||!w.input){J=!0;break}}}J||this.emit(v.POINTER_OVER,O,b)}return this._over[O.id]=b,D},processOutEvents:function(O){var F=this._over[O.id],D=0,B=F.length;if(B>0){var b=this.manager,V=this._eventData,X=this._eventContainer;V.cancelled=!1;var K=!1;this.sortGameObjects(F,O);for(var J=0;J<B;J++){var G=F[J];if(G=F[J],!!G.input){if(b.resetCursor(G.input),G.emit(v.GAMEOBJECT_POINTER_OUT,O,X),D++,V.cancelled||!G.input){K=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,G,X),V.cancelled||!G.input){K=!0;break}K||this.emit(v.POINTER_OUT,O,F)}}this._over[O.id]=[]}return D},processOverOutEvents:function(O){var F=this._temp,D,B,b=[],V=[],X=[],K=this._over[O.id],J=this._drag[O.id],G=this.manager;for(D=0;D<K.length;D++)B=K[D],F.indexOf(B)===-1&&J.indexOf(B)===-1?b.push(B):X.push(B);for(D=0;D<F.length;D++)B=F[D],K.indexOf(B)===-1&&V.push(B);var w=b.length,N=0,z=this._eventData,U=this._eventContainer;z.cancelled=!1;var W=!1;if(w>0){for(this.sortGameObjects(b,O),D=0;D<w;D++)if(B=b[D],!!B.input){if(G.resetCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OUT,O,U),N++,z.cancelled||!B.input){W=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,B,U),z.cancelled||!B.input){W=!0;break}}W||this.emit(v.POINTER_OUT,O,b)}if(w=V.length,z.cancelled=!1,W=!1,w>0){for(this.sortGameObjects(V,O),D=0;D<w;D++)if(B=V[D],!!B.input){if(G.setCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OVER,O,B.input.localX,B.input.localY,U),N++,z.cancelled||!B.input){W=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,B,U),z.cancelled||!B.input){W=!0;break}}W||this.emit(v.POINTER_OVER,O,V)}return K=X.concat(V),this._over[O.id]=this.sortGameObjects(K,O),N},processUpEvents:function(O){var F=this._temp,D=this._eventData,B=this._eventContainer;D.cancelled=!1;for(var b=!1,V=0;V<F.length;V++){var X=F[V];if(!!X.input){if(X.emit(v.GAMEOBJECT_POINTER_UP,O,X.input.localX,X.input.localY,B),D.cancelled||!X.input){b=!0;break}if(this.emit(v.GAMEOBJECT_UP,O,X,B),D.cancelled||!X.input){b=!0;break}}}return!b&&this.manager&&(O.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,O,F):this.emit(v.POINTER_UP_OUTSIDE,O)),F.length},queueForInsertion:function(O){return this._pendingInsertion.indexOf(O)===-1&&this._list.indexOf(O)===-1&&this._pendingInsertion.push(O),this},queueForRemoval:function(O){return this._pendingRemoval.push(O),this},setDraggable:function(O,F){F===void 0&&(F=!0),Array.isArray(O)||(O=[O]);for(var D=0;D<O.length;D++){var B=O[D];B.input.draggable=F;var b=this._draggable.indexOf(B);F&&b===-1?this._draggable.push(B):!F&&b>-1&&this._draggable.splice(b,1)}return this},makePixelPerfect:function(O){O===void 0&&(O=1);var F=this.systems.textures;return a(F,O)},setHitArea:function(O,F,D){if(F===void 0)return this.setHitAreaFromTexture(O);Array.isArray(O)||(O=[O]);var B=!1,b=!1,V=!1,X=!1,K=!1,J=!0;if(y(F)){var G=F;F=g(G,"hitArea",null),D=g(G,"hitAreaCallback",null),B=g(G,"draggable",!1),b=g(G,"dropZone",!1),V=g(G,"cursor",!1),X=g(G,"useHandCursor",!1),K=g(G,"pixelPerfect",!1);var w=g(G,"alphaTolerance",1);K&&(F={},D=this.makePixelPerfect(w)),(!F||!D)&&(this.setHitAreaFromTexture(O),J=!1)}else typeof F=="function"&&!D&&(D=F,F={});for(var N=0;N<O.length;N++){var z=O[N];if(K&&z.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var U=z.input?z.input:h(z,F,D);U.customHitArea=J,U.dropZone=b,U.cursor=X?"pointer":V,z.input=U,B&&this.setDraggable(z),this.queueForInsertion(z)}return this},setHitAreaCircle:function(O,F,D,B,b){b===void 0&&(b=u);var V=new n(F,D,B);return this.setHitArea(O,V,b)},setHitAreaEllipse:function(O,F,D,B,b,V){V===void 0&&(V=f);var X=new c(F,D,B,b);return this.setHitArea(O,X,V)},setHitAreaFromTexture:function(O,F){F===void 0&&(F=S),Array.isArray(O)||(O=[O]);for(var D=0;D<O.length;D++){var B=O[D],b=B.frame,V=0,X=0;if(B.width?(V=B.width,X=B.height):b&&(V=b.realWidth,X=b.realHeight),B.type==="Container"&&(V===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}V!==0&&X!==0&&(B.input=h(B,new C(0,0,V,X),F),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(O,F,D,B,b,V){V===void 0&&(V=S);var X=new C(F,D,B,b);return this.setHitArea(O,X,V)},setHitAreaTriangle:function(O,F,D,B,b,V,X,K){K===void 0&&(K=R);var J=new M(F,D,B,b,V,X);return this.setHitArea(O,J,K)},enableDebug:function(O,F){F===void 0&&(F=65280);var D=O.input;if(!D||!D.hitArea)return this;var B=D.hitArea,b=B.type,V=D.hitAreaDebug,X=this.systems.add,K=this.systems.updateList;V&&(K.remove(V),V.destroy(),V=null);var J=0,G=0;switch(b){case m.CIRCLE:V=X.arc(0,0,B.radius),J=B.x-B.radius,G=B.y-B.radius;break;case m.ELLIPSE:V=X.ellipse(0,0,B.width,B.height),J=B.x-B.width/2,G=B.y-B.height/2;break;case m.LINE:V=X.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:V=X.polygon(0,0,B.points);break;case m.RECTANGLE:V=X.rectangle(0,0,B.width,B.height),J=B.x,G=B.y;break;case m.TRIANGLE:V=X.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return V&&(V.isFilled=!1,V.preUpdate=function(){V.setStrokeStyle(1/O.scale,F),V.setDisplayOrigin(O.displayOriginX,O.displayOriginY);var w=O.x,N=O.y,z=O.rotation,U=O.scaleX,W=O.scaleY;if(O.parentContainer){var H=O.getWorldTransformMatrix();w=H.tx,N=H.ty,z=H.rotation,U=H.scaleX,W=H.scaleY}V.setRotation(z),V.setScale(U,W),V.setPosition(w+J,N+G),V.setScrollFactor(O.scrollFactorX,O.scrollFactorY),V.setDepth(O.depth)},K.add(V),D.hitAreaDebug=V),this},removeDebug:function(O){var F=O.input;if(F&&F.hitAreaDebug){var D=F.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(O){return this.pollRate=O,this._pollTimer=0,this},setGlobalTopOnly:function(O){return this.manager.globalTopOnly=O,this},setTopOnly:function(O){return this.topOnly=O,this},sortGameObjects:function(O,F){if(O.length<2)return O;var D=F.camera.renderList;return O.sort(function(B,b){return D.indexOf(b)-D.indexOf(B)})},sortDropZones:function(O){return O.length<2?O:(this.scene.sys.depthSort(),O.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(O,F){if(!O.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(O);if(O.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-O.parentContainer.getIndex(O);if(O.parentContainer===F)return-1;if(F.parentContainer===O)return 1;for(var D=O.getIndexList(),B=F.getIndexList(),b=Math.min(D.length,B.length),V=0;V<b;V++){var X=D[V],K=B[V];if(X!==K)return K-X}return B.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(O){return this.manager.addPointer(O)},setDefaultCursor:function(O){return this.manager.setDefaultCursor(O),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var O=0;O<10;O++)this._drag[O]=[],this._over[O]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var D=this.systems.events;D.off(E.TRANSITION_START,this.transitionIn,this),D.off(E.TRANSITION_OUT,this.transitionOut,this),D.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(E.PRE_UPDATE,this.preUpdate,this),F.events.off(v.GAME_OUT,this.onGameOut,this),F.events.off(v.GAME_OVER,this.onGameOver,this),D.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",L,"input"),e.exports=L},function(e,d,t){e.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(e,d){e.exports="keydown"},function(e,d){e.exports="keyup"},function(e,d){e.exports="keycombomatch"},function(e,d){e.exports="down"},function(e,d){e.exports="keydown-"},function(e,d){e.exports="keyup-"},function(e,d){e.exports="up"},function(e,d,t){var n=t(0),u=t(9),s=t(154),o=t(22),h=t(6),a=t(51),l=t(153),c=t(512),f=t(143),v=t(513),p=t(1331),g=t(20),m=t(76),x=new n({Extends:u,initialize:function(T){u.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(a.BOOT,this.boot,this),T.pluginEvents.on(a.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=h(y,"keyboard",!0);var T=h(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:f.UP,down:f.DOWN,left:f.LEFT,right:f.RIGHT,space:f.SPACE,shift:f.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var M=y[E].trim();M&&(S[M]=this.addKey(M,T,C))}}else for(var R in y)S[R]=this.addKey(y[R],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof c){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=f[y.toUpperCase()]),S[y]||(S[y]=new c(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof c){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=f[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new v(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=m(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],M=E.keyCode,R=C[M],L=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(M===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=M,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(R&&(L=R.isDown,R.onDown(E)),!E.cancelled&&(!R||!L)&&(p[M]&&this.emit(s.KEY_DOWN+p[M],E),E.cancelled||this.emit(s.ANY_KEY_DOWN,E))):(R&&R.onUp(E),E.cancelled||(p[M]&&this.emit(s.KEY_UP+p[M],E),E.cancelled||this.emit(s.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(a.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,d,t){var n=t(143),u={};for(var s in n)u[n[s]]=s;e.exports=u},function(e,d){var t=function(n){return n._justDown?(n._justDown=!1,!0):!1};e.exports=t},function(e,d){var t=function(n){return n._justUp?(n._justUp=!1,!0):!1};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u=50);var s=n.plugin.game.loop.time-n.timeDown;return n.isDown&&s<u};e.exports=t},function(e,d){var t=function(n,u){u===void 0&&(u=50);var s=n.plugin.game.loop.time-n.timeUp;return n.isUp&&s<u};e.exports=t},function(e,d,t){e.exports={MouseManager:t(411)}},function(e,d,t){e.exports={TouchManager:t(413)}},function(e,d,t){var n=t(21),u=t(17),s={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};s=u(!1,s,n),e.exports=s},function(e,d,t){e.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(e,d,t){var n=t(0),u=t(8),s=t(61),o=t(95),h=new n({Extends:s,initialize:function(l,c,f,v,p){s.call(this,l,c,f,v,p),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});u.register("animation",function(a,l,c,f){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new h(this,a[v]));else this.addFile(new h(this,a,l,f,c));return this}),e.exports=h},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(71),h=t(7),a=t(61),l=t(49),c=new n({Extends:l,initialize:function(v,p,g,m,x,y){var T,C;if(h(p)){var S=p;p=s(S,"key"),T=new o(v,{key:p,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),C=new a(v,{key:p,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","json"),xhrSettings:s(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new a(v,p,m,y);T.linkFile?l.call(this,v,"atlasjson",p,[T,C,T.linkFile]):l.call(this,v,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,p),v.addToCache(),this.complete=!0}}});u.register("aseprite",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(71),h=t(7),a=t(61),l=t(49),c=new n({Extends:l,initialize:function(v,p,g,m,x,y){var T,C;if(h(p)){var S=p;p=s(S,"key"),T=new o(v,{key:p,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),C=new a(v,{key:p,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","json"),xhrSettings:s(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new a(v,p,m,y);T.linkFile?l.call(this,v,"atlasjson",p,[T,C,T.linkFile]):l.call(this,v,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});u.register("atlas",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(71),h=t(7),a=t(49),l=t(241),c=new n({Extends:a,initialize:function(v,p,g,m,x,y){var T,C;if(h(p)){var S=p;p=s(S,"key"),T=new o(v,{key:p,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),C=new l(v,{key:p,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","xml"),xhrSettings:s(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new l(v,p,m,y);T.linkFile?a.call(this,v,"atlasxml",p,[T,C,T.linkFile]):a.call(this,v,"atlasxml",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(f.key,f.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});u.register("atlasXML",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){var n=t(518),u=t(0),s=t(8),o=t(2),h=t(7),a=t(61),l=t(49),c=new u({Extends:l,initialize:function(v,p,g,m,x,y,T){if(h(p)){var C=p;p=o(C,"key"),g=o(C,"jsonURL"),m=o(C,"audioURL"),x=o(C,"audioConfig"),y=o(C,"audioXhrSettings"),T=o(C,"jsonXhrSettings")}var S;if(!m)S=new a(v,p,g,T),l.call(this,v,"audiosprite",p,[S]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=n.create(v,p,m,x,y);E&&(S=new a(v,p,g,T),l.call(this,v,"audiosprite",p,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(f){var v=this.files.indexOf(f);if(v!==-1&&(this.pending--,this.config.resourceLoad&&f.type==="json"&&f.data.hasOwnProperty("resources"))){var p=f.data.resources,g=o(this.config,"audioConfig"),m=o(this.config,"audioXhrSettings"),x=n.create(this.loader,f.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache(),v.addToCache(),this.complete=!0}}});s.register("audioSprite",function(f,v,p,g,m,x){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(f))for(var E=0;E<f.length;E++)S=new c(this,f[E]),S.files&&this.addFile(S.files);else S=new c(this,f,v,p,g,m,x),S.files&&this.addFile(S.files);return this})},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g,m){var x="bin";if(a(v)){var y=v;v=h(y,"key"),p=h(y,"url"),g=h(y,"xhrSettings"),x=h(y,"extension",x),m=h(y,"dataType",m)}var T={type:"binary",cache:f.cacheManager.binary,extension:x,responseType:"arraybuffer",key:v,url:p,xhrSettings:g,config:{dataType:m}};s.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(c,f,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new l(this,c[g]));else this.addFile(new l(this,c,f,p,v));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(71),h=t(7),a=t(49),l=t(212),c=t(241),f=new n({Extends:a,initialize:function(p,g,m,x,y,T){var C,S;if(h(g)){var E=g;g=s(E,"key"),C=new o(p,{key:g,url:s(E,"textureURL"),extension:s(E,"textureExtension","png"),normalMap:s(E,"normalMap"),xhrSettings:s(E,"textureXhrSettings")}),S=new c(p,{key:g,url:s(E,"fontDataURL"),extension:s(E,"fontDataExtension","xml"),xhrSettings:s(E,"fontDataXhrSettings")})}else C=new o(p,g,m,y),S=new c(p,g,x,T);C.linkFile?a.call(this,p,"bitmapfont",g,[C,S,C.linkFile]):a.call(this,p,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1];v.addToCache(),p.pendingDestroy();var g=v.cache.get(v.key),m=l(p.data,v.cache.getFrame(v.key),0,0,g);this.loader.cacheManager.bitmapFont.add(v.key,{data:m,texture:v.key,frame:null}),this.complete=!0}}});u.register("bitmapFont",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new f(this,v[T]),this.addFile(y.files);else y=new f(this,v,p,g,m,x),this.addFile(y.files);return this}),e.exports=f},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g){var m="css";if(a(v)){var x=v;v=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};s.call(this,f,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,f,v));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=t(396),c=new n({Extends:s,initialize:function(v,p,g,m,x){var y="glsl";if(a(p)){var T=p;p=h(T,"key"),g=h(T,"url"),m=h(T,"shaderType","fragment"),x=h(T,"xhrSettings"),y=h(T,"extension",y)}else m===void 0&&(m="fragment");var C={type:"glsl",cache:v.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};s.call(this,v,C)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.split(`
`),v=this.extractBlock(f,0);if(v)for(;v;){var p=this.getShaderName(v.header),g=this.getShaderType(v.header),m=this.getShaderUniforms(v.header),x=v.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new l(p,x,"",m)):this.cache.add(p,new l(p,"",x,m));v=this.extractBlock(f,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(f){for(var v=0;v<f.length;v++){var p=f[v].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(f){for(var v=0;v<f.length;v++){var p=f[v].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(f){for(var v={},p=0;p<f.length;p++){var g=f[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{v[x]=JSON.parse(g.substring(m+1))}catch(y){console.warn("Invalid uniform JSON: "+x)}}}}return v},extractBlock:function(f,v){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],C=[],S=v;S<f.length;S++){var E=f[S].trim();if(E==="---")if(p===-1)p=S,x=!0;else if(x)g=S,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(C.push(E),m=S)}return!x&&g!==-1?{header:T,shader:C.join(`
`),offset:m}:null}});o.register("glsl",function(f,v,p,g){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new c(this,f[m]));else this.addFile(new c(this,f,v,p,g));return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g){var m="html";if(a(v)){var x=v;v=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"text",cache:f.cacheManager.html,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};s.call(this,f,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,f,v));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(a(v)){var T=v;v=h(T,"key"),p=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"width",g),m=h(T,"height",m)}var C={type:"html",cache:f.textureManager,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{width:g,height:m}};s.call(this,f,C)},onProcess:function(){this.state=u.FILE_PROCESSING;var c=this.config.width,f=this.config.height,v=[];v.push('<svg width="'+c+'px" height="'+f+'px" viewBox="0 0 '+c+" "+f+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var p=[v.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch(x){g.state=u.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(g.data),g.onProcessError()},s.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});o.register("htmlTexture",function(c,f,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,f,v,p,g));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(71),h=t(7),a=t(61),l=t(49),c=new n({Extends:l,initialize:function(v,p,g,m,x,y,T){if(h(p)){var C=p;p=s(C,"key"),s(C,"url",!1)?g=s(C,"url"):g=s(C,"atlasURL"),y=s(C,"xhrSettings"),m=s(C,"path"),x=s(C,"baseURL"),T=s(C,"textureXhrSettings")}var S=new a(v,p,g,y);l.call(this,v,"multiatlas",p,[S]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(f){var v=this.files.indexOf(f);if(v!==-1&&(this.pending--,f.type==="json"&&f.data.hasOwnProperty("textures"))){var p=f.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,C=s(g,"baseURL",this.baseURL),S=s(g,"path",this.path),E=s(g,"prefix",this.prefix),M=s(g,"textureXhrSettings");m.setBaseURL(C),m.setPath(S),m.setPrefix(E);for(var R=0;R<p.length;R++){var L=p[R].image,O="MA"+this.multiKeyIndex+"_"+L,F=new o(m,O,L,M);if(this.addToMultiFile(F),m.addFile(F),p[R].normalMap){var D=new o(m,O,p[R].normalMap,M);D.type="normalMap",F.setLink(D),this.addToMultiFile(D),m.addFile(D)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var f=this.files[0],v=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),C=x.data,S=0;S<f.data.textures.length;S++){var E=f.data.textures[S];if(E.image===T){p.push(C),v.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,v,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});u.register("multiatlas",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(7),h=t(49),a=t(520),l=new n({Extends:h,initialize:function(f,v,p,g){var m="js",x=[];if(o(v)){var y=v;v=s(y,"key"),p=s(y,"url"),g=s(y,"xhrSettings"),m=s(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var C=new a(f,{key:v+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},x.push(C)}h.call(this,f,"scripts",v,x)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var f=this.files[c];f.data=document.createElement("script"),f.data.language="javascript",f.data.type="text/javascript",f.data.defer=!1,f.data.text=f.xhrLoader.responseText,document.head.appendChild(f.data)}this.complete=!0}}});u.register("scripts",function(c,f,v){var p;if(Array.isArray(c))for(var g=0;g<c.length;g++)p=new l(this,c[g]),this.addFile(p.files);else p=new l(this,c,f,v),this.addFile(p.files);return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(7),h=t(49),a=t(498),l=t(499),c=t(242),f=new n({Extends:h,initialize:function(p,g,m,x,y,T){var C,S,E=p.cacheManager.obj;if(o(g)){var M=g;g=s(M,"key"),C=new c(p,{key:g,type:"obj",cache:E,url:s(M,"url"),extension:s(M,"extension","obj"),xhrSettings:s(M,"xhrSettings"),config:{flipUV:s(M,"flipUV",y)}}),x=s(M,"matURL"),x&&(S=new c(p,{key:g,type:"mat",cache:E,url:x,extension:s(M,"matExtension","mat"),xhrSettings:s(M,"xhrSettings")}))}else C=new c(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(S=new c(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));h.call(this,p,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1],g=a(v.data,v.config.flipUV);p&&(g.materials=l(p.data)),v.cache.add(v.key,g),this.complete=!0}}});u.register("obj",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new f(this,v[T]),this.addFile(y.files);else y=new f(this,v,p,g,m,x),this.addFile(y.files);return this}),e.exports=f},function(e,d,t){var n=t(0),u=t(21),s=t(8),o=t(61),h=new n({Extends:o,initialize:function(l,c,f,v,p){o.call(this,l,c,f,v,p),this.type="packfile"},onProcess:function(){this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",function(a,l,c,f){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new h(this,a[v]));else this.addFile(new h(this,a,l,f,c));return this}),e.exports=h},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g,m,x){var y="js";if(a(v)){var T=v;v=h(T,"key"),p=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"start"),m=h(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{start:g,mapping:m}};s.call(this,f,C),typeof p=="function"&&(this.data=p,this.state=u.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,f=this.config,v=h(f,"start",!1),p=h(f,"mapping",null);if(this.state===u.FILE_POPULATED)c.install(this.key,this.data,v,p);else{this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=c.install(this.key,window[this.key],v,p);(v||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});o.register("plugin",function(c,f,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,f,v,p,g));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g){var m="js";if(a(v)){var x=v;v=h(x,"key"),p=h(x,"url"),g=h(x,"xhrSettings"),m=h(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:v,url:p,xhrSettings:g};s.call(this,f,y)},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),f=eval;this.loader.sceneManager.add(this.key,f(c)),this.complete=!0}});o.register("sceneFile",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,f,v));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g,m,x){var y="js";if(a(v)){var T=v;v=h(T,"key"),p=h(T,"url"),x=h(T,"xhrSettings"),y=h(T,"extension",y),g=h(T,"systemKey"),m=h(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};s.call(this,f,C),typeof p=="function"&&(this.data=p,this.state=u.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,f=this.config,v=this.key,p=h(f,"systemKey",v),g=h(f,"sceneKey",v);this.state===u.FILE_POPULATED?c.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(c,f,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,f,v,p,g));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(8),s=t(71),o=new n({Extends:s,initialize:function(a,l,c,f,v){s.call(this,a,l,c,v,f),this.type="spritesheet"},addToCache:function(){var h=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(h)}});u.register("spritesheet",function(h,a,l,c){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new o(this,h[f]));else this.addFile(new o(this,h,a,l,c));return this}),e.exports=o},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=new n({Extends:s,initialize:function(f,v,p,g,m){var x="svg";if(a(v)){var y=v;v=h(y,"key"),p=h(y,"url"),g=h(y,"svgConfig",{}),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"svg",cache:f.textureManager,extension:x,responseType:"text",key:v,url:p,xhrSettings:m,config:{width:h(g,"width"),height:h(g,"height"),scale:h(g,"scale")}};s.call(this,f,T)},onProcess:function(){this.state=u.FILE_PROCESSING;var c=this.xhrLoader.responseText,f=[c],v=this.config.width,p=this.config.height,g=this.config.scale;t:if(v&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(c,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)v=C*g,p=S*g;else break t;y.setAttribute("width",v.toString()+"px"),y.setAttribute("height",p.toString()+"px"),f=[new XMLSerializer().serializeToString(y)]}try{var M=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch(O){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var R=this,L=!1;this.data.onload=function(){L||s.revokeObjectURL(R.data),R.onProcessComplete()},this.data.onerror=function(){L?R.onProcessError():(L=!0,s.revokeObjectURL(R.data),R.data.src="data:image/svg+xml,"+encodeURIComponent(f.join("")))},s.createObjectURL(this.data,M,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});o.register("svg",function(c,f,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new l(this,c[g]));else this.addFile(new l(this,c,f,v,p));return this}),e.exports=l},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(2),a=t(7),l=t(40),c=new n({Extends:s,initialize:function(v,p,g,m){var x="csv";if(a(p)){var y=p;p=h(y,"key"),g=h(y,"url"),m=h(y,"xhrSettings"),x=h(y,"extension",x)}var T={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};s.call(this,v,T),this.tilemapFormat=l.CSV},onProcess:function(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,f),this.pendingDestroy(f)}});o.register("tilemapCSV",function(f,v,p){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new c(this,f[g]));else this.addFile(new c(this,f,v,p));return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(8),s=t(61),o=t(40),h=new n({Extends:s,initialize:function(l,c,f,v){s.call(this,l,c,f,v),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var a={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});u.register("tilemapImpact",function(a,l,c){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new h(this,a[f]));else this.addFile(new h(this,a,l,c));return this}),e.exports=h},function(e,d,t){var n=t(0),u=t(8),s=t(61),o=t(40),h=new n({Extends:s,initialize:function(l,c,f,v){s.call(this,l,c,f,v),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var a={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});u.register("tilemapTiledJSON",function(a,l,c){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new h(this,a[f]));else this.addFile(new h(this,a,l,c));return this}),e.exports=h},function(e,d,t){var n=t(0),u=t(8),s=t(2),o=t(71),h=t(7),a=t(49),l=t(242),c=new n({Extends:a,initialize:function(v,p,g,m,x,y){var T,C;if(h(p)){var S=p;p=s(S,"key"),T=new o(v,{key:p,url:s(S,"textureURL"),extension:s(S,"textureExtension","png"),normalMap:s(S,"normalMap"),xhrSettings:s(S,"textureXhrSettings")}),C=new l(v,{key:p,url:s(S,"atlasURL"),extension:s(S,"atlasExtension","txt"),xhrSettings:s(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new l(v,p,m,y);T.linkFile?a.call(this,v,"unityatlas",p,[T,C,T.linkFile]):a.call(this,v,"unityatlas",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(f.key,f.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});u.register("unityAtlas",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(21),s=t(23),o=t(8),h=t(155),a=t(2),l=t(7),c=new n({Extends:s,initialize:function(v,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var C={type:"video",cache:v.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,v,C)},onProcess:function(){if(this.state=u.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var f=this.createVideoElement();this.data=f;var v=this;this.data.onloadeddata=function(){v.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(v.data),v.onProcessError()},s.createObjectURL(f,this.xhrLoader.response,""),f.load()},createVideoElement:function(){var f=document.createElement("video");return f.controls=!1,f.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(f.muted=!0,f.defaultMuted=!0,f.setAttribute("autoplay","autoplay")),f.setAttribute("playsinline","playsinline"),f.setAttribute("preload","auto"),f},onVideoLoadHandler:function(f){var v=f.target;v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0),this.data=v,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(f){var v=f.target;v&&(v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var f=this.config.loadEvent;if(this.config.asBlob)s.prototype.load.call(this);else{this.percentComplete=0;var v=this.createVideoElement();v.addEventListener(f,this.onLoadCallback,!0),v.addEventListener("error",this.onErrorCallback,!0),v.src=h(this,this.loader.baseURL),v.load()}}});c.create=function(f,v,p,g,m,x,y){var T=f.systems.game;l(v)&&(p=a(v,"url",[]),g=a(v,"loadEvent","loadeddata"),m=a(v,"asBlob",!1),x=a(v,"noAudio",!1),y=a(v,"xhrSettings"),v=a(v,"key"));var C=c.getVideoURL(T,p);if(C)return new c(f,v,C,g,m,x,y)},c.getVideoURL=function(f,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=a(v[p],"url",v[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=a(v[p],"type",m?m[1]:"").toLowerCase(),f.device.video[m])return{url:g,type:m}}return null},o.register("video",function(f,v,p,g,m,x){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=c.create(this,f[T]),y&&this.addFile(y);else y=c.create(this,f,v,p,g,m,x),y&&this.addFile(y);return this}),e.exports=c},function(e,d,t){var n=t(0),u=t(21),s=t(149),o=t(9),h=t(95),a=t(8),l=t(2),c=t(24),f=t(20),v=t(156),p=new n({Extends:o,initialize:function(m){o.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,a.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(y,"baseURL",x.loaderBaseURL)),this.setPath(l(y,"path",x.loaderPath)),this.setPrefix(l(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=l(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=v(l(y,"responseType",x.loaderResponseType),l(y,"async",x.loaderAsync),l(y,"user",x.loaderUser),l(y,"password",x.loaderPassword),l(y,"timeout",x.loaderTimeout),l(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=l(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(f.BOOT,this.boot,this),m.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(h.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],M=l(E,"baseURL",y),R=l(E,"path",T),L=l(E,"prefix",C),O=l(E,"files",null),F=l(E,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(M),this.setPath(R),this.setPrefix(L);for(var D=0;D<O.length;D++){var B=O[D],b=B.hasOwnProperty("type")?B.type:F;this[b]&&(this[b](B),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),x>0},isLoading:function(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(f.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===u.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===u.FILE_POPULATED||g.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(h.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(h.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===u.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===u.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(f.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=m,C.textContent="Download "+m,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(l(m,"baseURL",g.loaderBaseURL)),this.setPath(l(m,"path",g.loaderPath)),this.setPrefix(l(m,"prefix",g.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});c.register("Loader",p,"load"),e.exports=p},function(e,d,t){var n=t(62),u=t(17),s={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};s=u(!1,s,n),e.exports=s},function(e,d,t){var n=t(0),u=t(36),s=t(50),o=t(353),h=t(521),a=t(2),l=t(127),c=t(523),f=t(244),v=t(24),p=t(20),g=t(3),m=t(526),x=new n({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new h(this.world));var y=this.systems.events;a(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=l(a(T,"arcade",{}),a(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,M){S===void 0&&(S=60);var R=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(R,S),E!==void 0&&M!==void 0&&y.body.maxVelocity.set(E,M),R},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,M=y.y,R=T.length,L=0;L<R;L++){var O=T[L],F=O.body||O;if(!(y===O||y===F||y===F.gameObject||y===F.center)){var D=o(E,M,F.center.x,F.center.y);D<C&&(S=O,C=D)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,M=y.y,R=T.length,L=0;L<R;L++){var O=T[L],F=O.body||O;if(!(y===O||y===F||y===F.gameObject||y===F.center)){var D=o(E,M,F.center.x,F.center.y);D>C&&(S=O,C=D)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var M=Math.atan2(C-y.y,T-y.x);return E>0&&(S=s(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(M,S),M},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(u(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,M){return f(this.world,y,T,C,S,E,M)},overlapCirc:function(y,T,C,S,E){return c(this.world,y,T,C,S,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,d){var t={setAcceleration:function(n,u){return this.body.acceleration.set(n,u),this},setAccelerationX:function(n){return this.body.acceleration.x=n,this},setAccelerationY:function(n){return this.body.acceleration.y=n,this}};e.exports=t},function(e,d){var t={setAngularVelocity:function(n){return this.body.angularVelocity=n,this},setAngularAcceleration:function(n){return this.body.angularAcceleration=n,this},setAngularDrag:function(n){return this.body.angularDrag=n,this}};e.exports=t},function(e,d){var t={setBounce:function(n,u){return this.body.bounce.set(n,u),this},setBounceX:function(n){return this.body.bounce.x=n,this},setBounceY:function(n){return this.body.bounce.y=n,this},setCollideWorldBounds:function(n,u,s){return this.body.setCollideWorldBounds(n,u,s),this}};e.exports=t},function(e,d){var t={setDebug:function(n,u,s){return this.debugShowBody=n,this.debugShowVelocity=u,this.debugBodyColor=s,this},setDebugBodyColor:function(n){return this.body.debugBodyColor=n,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(n){this.body.debugShowBody=n}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(n){this.body.debugShowVelocity=n}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(n){this.body.debugBodyColor=n}}};e.exports=t},function(e,d){var t={setDrag:function(n,u){return this.body.drag.set(n,u),this},setDragX:function(n){return this.body.drag.x=n,this},setDragY:function(n){return this.body.drag.y=n,this},setDamping:function(n){return this.body.useDamping=n,this}};e.exports=t},function(e,d){var t={enableBody:function(n,u,s,o,h){return n&&this.body.reset(u,s),o&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,u){return n===void 0&&(n=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=t},function(e,d){var t={setFriction:function(n,u){return this.body.friction.set(n,u),this},setFrictionX:function(n){return this.body.friction.x=n,this},setFrictionY:function(n){return this.body.friction.y=n,this}};e.exports=t},function(e,d){var t={setGravity:function(n,u){return this.body.gravity.set(n,u),this},setGravityX:function(n){return this.body.gravity.x=n,this},setGravityY:function(n){return this.body.gravity.y=n,this}};e.exports=t},function(e,d){var t={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};e.exports=t},function(e,d){var t={setMass:function(n){return this.body.mass=n,this}};e.exports=t},function(e,d){var t={setPushable:function(n){return n===void 0&&(n=!0),this.body.pushable=n,this}};e.exports=t},function(e,d){var t={setOffset:function(n,u){return this.body.setOffset(n,u),this},setSize:function(n,u,s){return this.body.setSize(n,u,s),this},setBodySize:function(n,u,s){return this.body.setSize(n,u,s),this},setCircle:function(n,u,s){return this.body.setCircle(n,u,s),this}};e.exports=t},function(e,d){var t={setVelocity:function(n,u){return this.body.setVelocity(n,u),this},setVelocityX:function(n){return this.body.setVelocityX(n),this},setVelocityY:function(n){return this.body.setVelocityY(n),this},setMaxVelocity:function(n,u){return this.body.maxVelocity.set(n,u),this}};e.exports=t},function(e,d){e.exports="collide"},function(e,d){e.exports="overlap"},function(e,d){e.exports="pause"},function(e,d){e.exports="resume"},function(e,d){e.exports="tilecollide"},function(e,d){e.exports="tileoverlap"},function(e,d){e.exports="worldbounds"},function(e,d){e.exports="worldstep"},function(e,d){var t,n,u,s,o,h,a,l,c,f,v,p,g,m,x,y,T,C=function(O,F,D){t=O,n=F;var B=t.velocity.x,b=n.velocity.x;return u=t.pushable,c=t._dx<0,f=t._dx>0,v=t._dx===0,x=Math.abs(t.right-n.x)<=Math.abs(n.right-t.x),a=b-B*t.bounce.x,s=n.pushable,p=n._dx<0,g=n._dx>0,m=n._dx===0,y=!x,l=B-b*n.bounce.x,T=Math.abs(D),S()},S=function(){return f&&x&&n.blocked.right?(t.processX(-T,a,!1,!0),1):c&&y&&n.blocked.left?(t.processX(T,a,!0),1):g&&y&&t.blocked.right?(n.processX(-T,l,!1,!0),2):p&&x&&t.blocked.left?(n.processX(T,l,!0),2):0},E=function(){var O=t.velocity.x,F=n.velocity.x,D=Math.sqrt(F*F*n.mass/t.mass)*(F>0?1:-1),B=Math.sqrt(O*O*t.mass/n.mass)*(O>0?1:-1),b=(D+B)*.5;return D-=b,B-=b,o=b+D*t.bounce.x,h=b+B*n.bounce.x,c&&y?M(0):p&&x?M(1):f&&x?M(2):g&&y?M(3):!1},M=function(O){if(u&&s)T*=.5,O===0||O===3?(t.processX(T,o),n.processX(-T,h)):(t.processX(-T,o),n.processX(T,h));else if(u&&!s)O===0||O===3?t.processX(T,a,!0):t.processX(-T,a,!1,!0);else if(!u&&s)O===0||O===3?n.processX(-T,l,!1,!0):n.processX(T,l,!0);else{var F=T*.5;O===0?m?(t.processX(T,0,!0),n.processX(0,null,!1,!0)):g?(t.processX(F,0,!0),n.processX(-F,0,!1,!0)):(t.processX(F,n.velocity.x,!0),n.processX(-F,null,!1,!0)):O===1?v?(t.processX(0,null,!1,!0),n.processX(T,0,!0)):f?(t.processX(-F,0,!1,!0),n.processX(F,0,!0)):(t.processX(-F,null,!1,!0),n.processX(F,t.velocity.x,!0)):O===2?m?(t.processX(-T,0,!1,!0),n.processX(0,null,!0)):p?(t.processX(-F,0,!1,!0),n.processX(F,0,!0)):(t.processX(-F,n.velocity.x,!1,!0),n.processX(F,null,!0)):O===3&&(v?(t.processX(0,null,!0),n.processX(-T,0,!1,!0)):c?(t.processX(F,0,!0),n.processX(-F,0,!1,!0)):(t.processX(F,n.velocity.y,!0),n.processX(-F,null,!1,!0)))}return!0},R=function(O){O===1?n.velocity.x=0:x?n.processX(T,l,!0):n.processX(-T,l,!1,!0),t.moves&&(n.y+=(t.y-t.prev.y)*t.friction.y,n._dy=n.y-n.prev.y)},L=function(O){O===2?t.velocity.x=0:y?t.processX(T,a,!0):t.processX(-T,a,!1,!0),n.moves&&(t.y+=(n.y-n.prev.y)*n.friction.y,t._dy=t.y-t.prev.y)};e.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:R,RunImmovableBody2:L}},function(e,d){var t,n,u,s,o,h,a,l,c,f,v,p,g,m,x,y,T,C=function(O,F,D){t=O,n=F;var B=t.velocity.y,b=n.velocity.y;return u=t.pushable,c=t._dy<0,f=t._dy>0,v=t._dy===0,x=Math.abs(t.bottom-n.y)<=Math.abs(n.bottom-t.y),a=b-B*t.bounce.y,s=n.pushable,p=n._dy<0,g=n._dy>0,m=n._dy===0,y=!x,l=B-b*n.bounce.y,T=Math.abs(D),S()},S=function(){return f&&x&&n.blocked.down?(t.processY(-T,a,!1,!0),1):c&&y&&n.blocked.up?(t.processY(T,a,!0),1):g&&y&&t.blocked.down?(n.processY(-T,l,!1,!0),2):p&&x&&t.blocked.up?(n.processY(T,l,!0),2):0},E=function(){var O=t.velocity.y,F=n.velocity.y,D=Math.sqrt(F*F*n.mass/t.mass)*(F>0?1:-1),B=Math.sqrt(O*O*t.mass/n.mass)*(O>0?1:-1),b=(D+B)*.5;return D-=b,B-=b,o=b+D*t.bounce.y,h=b+B*n.bounce.y,c&&y?M(0):p&&x?M(1):f&&x?M(2):g&&y?M(3):!1},M=function(O){if(u&&s)T*=.5,O===0||O===3?(t.processY(T,o),n.processY(-T,h)):(t.processY(-T,o),n.processY(T,h));else if(u&&!s)O===0||O===3?t.processY(T,a,!0):t.processY(-T,a,!1,!0);else if(!u&&s)O===0||O===3?n.processY(-T,l,!1,!0):n.processY(T,l,!0);else{var F=T*.5;O===0?m?(t.processY(T,0,!0),n.processY(0,null,!1,!0)):g?(t.processY(F,0,!0),n.processY(-F,0,!1,!0)):(t.processY(F,n.velocity.y,!0),n.processY(-F,null,!1,!0)):O===1?v?(t.processY(0,null,!1,!0),n.processY(T,0,!0)):f?(t.processY(-F,0,!1,!0),n.processY(F,0,!0)):(t.processY(-F,null,!1,!0),n.processY(F,t.velocity.y,!0)):O===2?m?(t.processY(-T,0,!1,!0),n.processY(0,null,!0)):p?(t.processY(-F,0,!1,!0),n.processY(F,0,!0)):(t.processY(-F,n.velocity.y,!1,!0),n.processY(F,null,!0)):O===3&&(v?(t.processY(0,null,!0),n.processY(-T,0,!1,!0)):c?(t.processY(F,0,!0),n.processY(-F,0,!1,!0)):(t.processY(F,n.velocity.y,!0),n.processY(-F,null,!1,!0)))}return!0},R=function(O){O===1?n.velocity.y=0:x?n.processY(T,l,!0):n.processY(-T,l,!1,!0),t.moves&&(n.x+=(t.x-t.prev.x)*t.friction.x,n._dx=n.x-n.prev.x)},L=function(O){O===2?t.velocity.y=0:y?t.processY(T,a,!0):t.processY(-T,a,!1,!0),n.moves&&(t.x+=(n.x-n.prev.x)*n.friction.x,t._dx=t.x-t.prev.x)};e.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:R,RunImmovableBody2:L}},function(e,d,t){var n={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};e.exports=n},function(e,d,t){var n=t(0),u=t(3),s=new n({initialize:function(){this.boundsCenter=new u,this.centerDiff=new u},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,a=this.centerDiff,l=o.bounds.max.x-o.bounds.min.x,c=o.bounds.max.y-o.bounds.min.y,f=l*o.centerOfMass.x,v=c*o.centerOfMass.y;return h.set(l/2,c/2),a.set(f-h.x,v-h.y),!0},getTopLeft:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h+l.x+c.x,a+l.y+c.y)}return!1},getTopCenter:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h+c.x,a+l.y+c.y)}return!1},getTopRight:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h-(l.x-c.x),a+l.y+c.y)}return!1},getLeftCenter:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h+l.x+c.x,a+c.y)}return!1},getCenter:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.centerDiff;return new u(h+l.x,a+l.y)}return!1},getRightCenter:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h-(l.x-c.x),a+c.y)}return!1},getBottomLeft:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h+l.x+c.x,a-(l.y-c.y))}return!1},getBottomCenter:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h+c.x,a-(l.y-c.y))}return!1},getBottomRight:function(o,h,a){if(h===void 0&&(h=0),a===void 0&&(a=0),this.parseBody(o)){var l=this.boundsCenter,c=this.centerDiff;return new u(h-(l.x-c.x),a-(l.y-c.y))}return!1}});e.exports=s},function(e,d){e.exports={decomp:O,quickDecomp:b,isSimple:D,removeCollinearPoints:V,removeDuplicatePoints:X,makeCCW:x};function t(G,w,N){N=N||0;var z=[0,0],U,W,H,Z,q,_,nt;return U=G[1][1]-G[0][1],W=G[0][0]-G[1][0],H=U*G[0][0]+W*G[0][1],Z=w[1][1]-w[0][1],q=w[0][0]-w[1][0],_=Z*w[0][0]+q*w[0][1],nt=U*q-Z*W,K(nt,0,N)||(z[0]=(q*H-W*_)/nt,z[1]=(U*_-Z*H)/nt),z}function n(G,w,N,z){var U=w[0]-G[0],W=w[1]-G[1],H=z[0]-N[0],Z=z[1]-N[1];if(H*W-Z*U==0)return!1;var q=(U*(N[1]-G[1])+W*(G[0]-N[0]))/(H*W-Z*U),_=(H*(G[1]-N[1])+Z*(N[0]-G[0]))/(Z*U-H*W);return q>=0&&q<=1&&_>=0&&_<=1}function u(G,w,N){return(w[0]-G[0])*(N[1]-G[1])-(N[0]-G[0])*(w[1]-G[1])}function s(G,w,N){return u(G,w,N)>0}function o(G,w,N){return u(G,w,N)>=0}function h(G,w,N){return u(G,w,N)<0}function a(G,w,N){return u(G,w,N)<=0}var l=[],c=[];function f(G,w,N,z){if(z){var U=l,W=c;U[0]=w[0]-G[0],U[1]=w[1]-G[1],W[0]=N[0]-w[0],W[1]=N[1]-w[1];var H=U[0]*W[0]+U[1]*W[1],Z=Math.sqrt(U[0]*U[0]+U[1]*U[1]),q=Math.sqrt(W[0]*W[0]+W[1]*W[1]),_=Math.acos(H/(Z*q));return _<z}else return u(G,w,N)===0}function v(G,w){var N=w[0]-G[0],z=w[1]-G[1];return N*N+z*z}function p(G,w){var N=G.length;return G[w<0?w%N+N:w%N]}function g(G){G.length=0}function m(G,w,N,z){for(var U=N;U<z;U++)G.push(w[U])}function x(G){for(var w=0,N=G,z=1;z<G.length;++z)(N[z][1]<N[w][1]||N[z][1]===N[w][1]&&N[z][0]>N[w][0])&&(w=z);return s(p(G,w-1),p(G,w),p(G,w+1))?!1:(y(G),!0)}function y(G){for(var w=[],N=G.length,z=0;z!==N;z++)w.push(G.pop());for(var z=0;z!==N;z++)G[z]=w[z]}function T(G,w){return h(p(G,w-1),p(G,w),p(G,w+1))}var C=[],S=[];function E(G,w,N){var z,U,W=C,H=S;if(o(p(G,w+1),p(G,w),p(G,N))&&a(p(G,w-1),p(G,w),p(G,N)))return!1;U=v(p(G,w),p(G,N));for(var Z=0;Z!==G.length;++Z)if(!((Z+1)%G.length===w||Z===w)&&o(p(G,w),p(G,N),p(G,Z+1))&&a(p(G,w),p(G,N),p(G,Z))&&(W[0]=p(G,w),W[1]=p(G,N),H[0]=p(G,Z),H[1]=p(G,Z+1),z=t(W,H),v(p(G,w),z)<U))return!1;return!0}function M(G,w,N){for(var z=0;z!==G.length;++z)if(!(z===w||z===N||(z+1)%G.length===w||(z+1)%G.length===N)&&n(p(G,w),p(G,N),p(G,z),p(G,z+1)))return!1;return!0}function R(G,w,N,z){var U=z||[];if(g(U),w<N)for(var W=w;W<=N;W++)U.push(G[W]);else{for(var W=0;W<=N;W++)U.push(G[W]);for(var W=w;W<G.length;W++)U.push(G[W])}return U}function L(G){for(var w=[],N=[],z=[],U=[],W=Number.MAX_VALUE,H=0;H<G.length;++H)if(T(G,H)){for(var Z=0;Z<G.length;++Z)if(E(G,H,Z)){N=L(R(G,H,Z,U)),z=L(R(G,Z,H,U));for(var q=0;q<z.length;q++)N.push(z[q]);N.length<W&&(w=N,W=N.length,w.push([p(G,H),p(G,Z)]))}}return w}function O(G){var w=L(G);return w.length>0?F(G,w):[G]}function F(G,w){if(w.length===0)return[G];if(w instanceof Array&&w.length&&w[0]instanceof Array&&w[0].length===2&&w[0][0]instanceof Array){for(var N=[G],z=0;z<w.length;z++)for(var U=w[z],W=0;W<N.length;W++){var H=N[W],Z=F(H,U);if(Z){N.splice(W,1),N.push(Z[0],Z[1]);break}}return N}else{var U=w,z=G.indexOf(U[0]),W=G.indexOf(U[1]);return z!==-1&&W!==-1?[R(G,z,W),R(G,W,z)]:!1}}function D(G){var w=G,N;for(N=0;N<w.length-1;N++)for(var z=0;z<N-1;z++)if(n(w[N],w[N+1],w[z],w[z+1]))return!1;for(N=1;N<w.length-2;N++)if(n(w[0],w[w.length-1],w[N],w[N+1]))return!1;return!0}function B(G,w,N,z,U){U=U||0;var W=w[1]-G[1],H=G[0]-w[0],Z=W*G[0]+H*G[1],q=z[1]-N[1],_=N[0]-z[0],nt=q*N[0]+_*N[1],rt=W*_-q*H;return K(rt,0,U)?[0,0]:[(_*Z-H*nt)/rt,(W*nt-q*Z)/rt]}function b(G,w,N,z,U,W,H){W=W||100,H=H||0,U=U||25,w=typeof w!="undefined"?w:[],N=N||[],z=z||[];var Z=[0,0],q=[0,0],_=[0,0],nt=0,rt=0,at=0,vt=0,ut=0,ct=0,Ft=0,yt=[],Tt=[],dt=G,It=G;if(It.length<3)return w;if(H++,H>W)return console.warn("quickDecomp: max level ("+W+") reached."),w;for(var gt=0;gt<G.length;++gt)if(T(dt,gt)){N.push(dt[gt]),nt=rt=Number.MAX_VALUE;for(var Pt=0;Pt<G.length;++Pt)s(p(dt,gt-1),p(dt,gt),p(dt,Pt))&&a(p(dt,gt-1),p(dt,gt),p(dt,Pt-1))&&(_=B(p(dt,gt-1),p(dt,gt),p(dt,Pt),p(dt,Pt-1)),h(p(dt,gt+1),p(dt,gt),_)&&(at=v(dt[gt],_),at<rt&&(rt=at,q=_,ct=Pt))),s(p(dt,gt+1),p(dt,gt),p(dt,Pt+1))&&a(p(dt,gt+1),p(dt,gt),p(dt,Pt))&&(_=B(p(dt,gt+1),p(dt,gt),p(dt,Pt),p(dt,Pt+1)),s(p(dt,gt-1),p(dt,gt),_)&&(at=v(dt[gt],_),at<nt&&(nt=at,Z=_,ut=Pt)));if(ct===(ut+1)%G.length)_[0]=(q[0]+Z[0])/2,_[1]=(q[1]+Z[1])/2,z.push(_),gt<ut?(m(yt,dt,gt,ut+1),yt.push(_),Tt.push(_),ct!==0&&m(Tt,dt,ct,dt.length),m(Tt,dt,0,gt+1)):(gt!==0&&m(yt,dt,gt,dt.length),m(yt,dt,0,ut+1),yt.push(_),Tt.push(_),m(Tt,dt,ct,gt+1));else{if(ct>ut&&(ut+=G.length),vt=Number.MAX_VALUE,ut<ct)return w;for(var Pt=ct;Pt<=ut;++Pt)o(p(dt,gt-1),p(dt,gt),p(dt,Pt))&&a(p(dt,gt+1),p(dt,gt),p(dt,Pt))&&(at=v(p(dt,gt),p(dt,Pt)),at<vt&&M(dt,gt,Pt)&&(vt=at,Ft=Pt%G.length));gt<Ft?(m(yt,dt,gt,Ft+1),Ft!==0&&m(Tt,dt,Ft,It.length),m(Tt,dt,0,gt+1)):(gt!==0&&m(yt,dt,gt,It.length),m(yt,dt,0,Ft+1),m(Tt,dt,Ft,gt+1))}return yt.length<Tt.length?(b(yt,w,N,z,U,W,H),b(Tt,w,N,z,U,W,H)):(b(Tt,w,N,z,U,W,H),b(yt,w,N,z,U,W,H)),w}return w.push(G),w}function V(G,w){for(var N=0,z=G.length-1;G.length>3&&z>=0;--z)f(p(G,z-1),p(G,z),p(G,z+1),w)&&(G.splice(z%G.length,1),N++);return N}function X(G,w){for(var N=G.length-1;N>=1;--N)for(var z=G[N],U=N-1;U>=0;--U)if(J(z,G[U],w)){G.splice(N,1);continue}}function K(G,w,N){return N=N||0,Math.abs(G-w)<=N}function J(G,w,N){return K(G[0],w[0],N)&&K(G[1],w[1],N)}},function(e,d,t){var n=t(86),u=t(0),s=t(591),o=t(128),h=t(592),a=t(1395),l=t(1396),c=t(1397),f=t(593),v=t(589),p=t(590),g=t(1398),m=t(64),x=new u({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var M=n.rectangle(y,T,C,S,E);return this.world.add(M),M},trapezoid:function(y,T,C,S,E,M){var R=n.trapezoid(y,T,C,S,E,M);return this.world.add(R),R},circle:function(y,T,C,S,E){var M=n.circle(y,T,C,S,E);return this.world.add(M),M},polygon:function(y,T,C,S,E){var M=n.polygon(y,T,C,S,E);return this.world.add(M),M},fromVertices:function(y,T,C,S,E,M,R){typeof C=="string"&&(C=m.fromPath(C));var L=n.fromVertices(y,T,C,S,E,M,R);return this.world.add(L),L},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var M=v.parseBody(y,T,C,S);return E&&!this.world.has(M)&&this.world.add(M),M},fromSVG:function(y,T,C,S,E,M){S===void 0&&(S=1),E===void 0&&(E={}),M===void 0&&(M=!0);for(var R=C.getElementsByTagName("path"),L=[],O=0;O<R.length;O++){var F=h.pathToVertices(R[O],30);S!==1&&m.scale(F,S,S),L.push(F)}var D=n.fromVertices(y,T,L,E);return M&&this.world.add(D),D},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var M=p.parseBody(y,T,C,S);return M&&E&&this.world.add(M),M},imageStack:function(y,T,C,S,E,M,R,L,O){R===void 0&&(R=0),L===void 0&&(L=0),O===void 0&&(O={});var F=this.world,D=this.sys.displayList;O.addToWorld=!1;var B=s.stack(C,S,E,M,R,L,function(b,V){var X=new l(F,b,V,y,T,O);return D.add(X),X.body});return F.add(B),B},stack:function(y,T,C,S,E,M,R){var L=s.stack(y,T,C,S,E,M,R);return this.world.add(L),L},pyramid:function(y,T,C,S,E,M,R){var L=s.pyramid(y,T,C,S,E,M,R);return this.world.add(L),L},chain:function(y,T,C,S,E,M){return s.chain(y,T,C,S,E,M)},mesh:function(y,T,C,S,E){return s.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var M=s.newtonsCradle(y,T,C,S,E);return this.world.add(M),M},car:function(y,T,C,S,E){var M=s.car(y,T,C,S,E);return this.world.add(M),M},softBody:function(y,T,C,S,E,M,R,L,O,F){var D=s.softBody(y,T,C,S,E,M,R,L,O,F);return this.world.add(D),D},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var M=o.create(E);return this.world.add(M),M},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=o.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var M=new l(this.world,y,T,C,S,E);return this.sys.displayList.add(M),M},tileBody:function(y,T){return new f(this.world,y,T)},sprite:function(y,T,C,S,E){var M=new c(this.world,y,T,C,S,E);return this.sys.displayList.add(M),this.sys.updateList.add(M),M},gameObject:function(y,T,C){return a(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,d,t){var n=t(249),u=t(2),s=t(3);function o(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}var h=function(a,l,c,f){c===void 0&&(c={}),f===void 0&&(f=!0);var v=l.x,p=l.y;l.body={temp:!0,position:{x:v,y:p}};var g=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];if(g.forEach(function(x){for(var y in x)o(x[y])?Object.defineProperty(l,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(l,y,{value:x[y]})}),l.world=a,l._tempVec2=new s(v,p),c.hasOwnProperty("type")&&c.type==="body")l.setExistingBody(c,f);else{var m=u(c,"shape",null);m||(m="rectangle"),c.addToWorld=f,l.setBody(m,c)}return l};e.exports=h},function(e,d,t){var n=t(0),u=t(249),s=t(15),o=t(2),h=t(125),a=t(167),l=t(3),c=new n({Extends:h,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,a],initialize:function(v,p,g,m,x,y){s.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new l(p,g);var T=o(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=c},function(e,d,t){var n=t(164),u=t(0),s=t(249),o=t(15),h=t(2),a=t(167),l=t(73),c=t(3),f=new u({Extends:l,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,a],initialize:function(p,g,m,x,y,T){o.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new c(g,m);var C=h(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});e.exports=f},function(e,d,t){var n=t(84),u=t(0),s=t(118),o=t(128),h=t(273),a=t(272),l=t(51),c=t(127),f=t(165),v=t(3),p=t(64),g=new u({initialize:function(x,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=o.create(c(T,C)),this.world.on(a.BEFORE_UPDATE,this.update,this),x.sys.input.on(l.POINTER_DOWN,this.onDown,this),x.sys.input.on(l.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=s.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&n.contains(S.bounds,x)&&h.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(a.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=m.parts[S];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,f.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,f.set(x,!1),this.world.emit(a.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(a.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(a.BEFORE_UPDATE,this.update),this.scene.sys.input.off(l.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(l.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,d,t){var n={};e.exports=n;var u=t(595),s=t(32);(function(){n.name="matter-js",n.version="0.14.2",n.uses=[],n.used=[],n.use=function(){u.use(n,Array.prototype.slice.call(arguments))},n.before=function(o,h){return o=o.replace(/^Matter./,""),s.chainPathBefore(n,o,h)},n.after=function(o,h){return o=o.replace(/^Matter./,""),s.chainPathAfter(n,o,h)}})()},function(e,d,t){var n={};e.exports=n;var u=t(83),s=t(274),o=t(84),h=t(86),a=t(64);(function(){n.collides=function(l,c){for(var f=[],v=0;v<c.length;v++){var p=c[v];if(l!==p&&o.overlaps(p.bounds,l.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(o.overlaps(m.bounds,l.bounds)){var x=s.collides(m,l);if(x.collided){f.push(x);break}}}}return f},n.ray=function(l,c,f,v){v=v||1e-100;for(var p=u.angle(c,f),g=u.magnitude(u.sub(c,f)),m=(f.x+c.x)*.5,x=(f.y+c.y)*.5,y=h.rectangle(m,x,g,v,{angle:p}),T=n.collides(y,l),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},n.region=function(l,c,f){for(var v=[],p=0;p<l.length;p++){var g=l[p],m=o.overlaps(g.bounds,c);(m&&!f||!m&&f)&&v.push(g)}return v},n.point=function(l,c){for(var f=[],v=0;v<l.length;v++){var p=l[v];if(o.contains(p.bounds,c))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(o.contains(m.bounds,c)&&a.contains(m.vertices,c)){f.push(p);break}}}return f}})()},function(e,d,t){var n={};e.exports=n;var u=t(596),s=t(165),o=t(599),h=t(598),a=t(1523),l=t(597),c=t(166),f=t(118),v=t(128),p=t(32),g=t(41);(function(){n.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:l}},T=p.extend(y,x);return T.world=x.world||u.create(T.world),T.pairs=h.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=a.create(T.metrics),T},n.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,C=m.timing,S=m.broadphase,E=[],M;C.timestamp+=x*C.timeScale;var R={timestamp:C.timestamp};c.trigger(m,"beforeUpdate",R);var L=f.allBodies(T),O=f.allConstraints(T);for(a.reset(m.metrics),m.enableSleeping&&s.update(L,C.timeScale),n._bodiesApplyGravity(L,T.gravity),n._bodiesUpdate(L,x,C.timeScale,y,T.bounds),v.preSolveAll(L),M=0;M<m.constraintIterations;M++)v.solveAll(O,C.timeScale);v.postSolveAll(L),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,L,m,T.isModified),E=S.pairsList):E=L,T.isModified&&f.setModified(T,!1,!1,!0);var F=S.detector(E,m),D=m.pairs,B=C.timestamp;for(h.update(D,F,B),h.removeOld(D,B),m.enableSleeping&&s.afterCollisions(D.list,C.timeScale),D.collisionStart.length>0&&c.trigger(m,"collisionStart",{pairs:D.collisionStart}),o.preSolvePosition(D.list),M=0;M<m.positionIterations;M++)o.solvePosition(D.list,L,C.timeScale);for(o.postSolvePosition(L),v.preSolveAll(L),M=0;M<m.constraintIterations;M++)v.solveAll(O,C.timeScale);for(v.postSolveAll(L),o.preSolveVelocity(D.list),M=0;M<m.velocityIterations;M++)o.solveVelocity(D.list,C.timeScale);return D.collisionActive.length>0&&c.trigger(m,"collisionActive",{pairs:D.collisionActive}),D.collisionEnd.length>0&&c.trigger(m,"collisionEnd",{pairs:D.collisionEnd}),a.update(m.metrics,m),n._bodiesClearForces(L),c.trigger(m,"afterUpdate",R),m},n.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,n.clear(m);for(var y=f.allBodies(m.world),T=0;T<y.length;T++){var C=y[T];s.set(C,!1),C.id=p.nextId()}}},n.clear=function(m){var x=m.world;h.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=f.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},n._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},n._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var C=m[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*x.x*y*C.gravityScale.x,C.force.y+=C.mass*x.y*y*C.gravityScale.y)}},n._bodiesUpdate=function(m,x,y,T,C){for(var S=0;S<m.length;S++){var E=m[S];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(e,d,t){var n=t(86),u=t(41),s=t(0),o=t(32),h=t(118),a=t(1401),l=t(9),c=t(272),f=t(2),v=t(6),p=t(41),g=t(166),m=t(593),x=t(596),y=t(83),T=new s({Extends:l,initialize:function(S,E){l.call(this),this.scene=S,this.engine=a.create(E),this.localWorld=this.engine.world;var M=v(E,"gravity",null);M?this.setGravity(M.x,M.y,M.scale):M===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(E,"enabled",!0),this.correction=v(E,"correction",1),this.getDelta=v(E,"getDelta",this.update60Hz);var R=f(E,"runner",{}),L=f(R,"fps",!1),O=f(R,"fps",60),F=f(R,"delta",1e3/O),D=f(R,"deltaMin",1e3/O),B=f(R,"deltaMax",1e3/(O*.5));L||(O=1e3/F),this.runner={fps:O,correction:f(R,"correction",1),deltaSampleSize:f(R,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:f(R,"isFixed",!1),delta:F,deltaMin:D,deltaMax:B},this.autoUpdate=v(E,"autoUpdate",!0);var b=v(E,"debug",!1);if(this.drawDebug=typeof b=="object"?!0:b,this.debugGraphic,this.debugConfig={showAxes:f(b,"showAxes",!1),showAngleIndicator:f(b,"showAngleIndicator",!1),angleColor:f(b,"angleColor",15208787),showBroadphase:f(b,"showBroadphase",!1),broadphaseColor:f(b,"broadphaseColor",16757760),showBounds:f(b,"showBounds",!1),boundsColor:f(b,"boundsColor",16777215),showVelocity:f(b,"showVelocity",!1),velocityColor:f(b,"velocityColor",44783),showCollisions:f(b,"showCollisions",!1),collisionColor:f(b,"collisionColor",16094476),showSeparations:f(b,"showSeparations",!1),separationColor:f(b,"separationColor",16753920),showBody:f(b,"showBody",!0),showStaticBody:f(b,"showStaticBody",!0),showInternalEdges:f(b,"showInternalEdges",!1),renderFill:f(b,"renderFill",!1),renderLine:f(b,"renderLine",!0),fillColor:f(b,"fillColor",1075465),fillOpacity:f(b,"fillOpacity",1),lineColor:f(b,"lineColor",2678297),lineOpacity:f(b,"lineOpacity",1),lineThickness:f(b,"lineThickness",1),staticFillColor:f(b,"staticFillColor",857979),staticLineColor:f(b,"staticLineColor",1255396),showSleeping:f(b,"showSleeping",!1),staticBodySleepOpacity:f(b,"staticBodySleepOpacity",.7),sleepFillColor:f(b,"sleepFillColor",4605510),sleepLineColor:f(b,"sleepLineColor",10066585),showSensors:f(b,"showSensors",!0),sensorFillColor:f(b,"sensorFillColor",857979),sensorLineColor:f(b,"sensorLineColor",1255396),showPositions:f(b,"showPositions",!0),positionSize:f(b,"positionSize",4),positionColor:f(b,"positionColor",14697178),showJoint:f(b,"showJoint",!0),jointColor:f(b,"jointColor",14737474),jointLineOpacity:f(b,"jointLineOpacity",1),jointLineThickness:f(b,"jointLineThickness",2),pinSize:f(b,"pinSize",4),pinColor:f(b,"pinColor",4382944),springColor:f(b,"springColor",14697184),anchorColor:f(b,"anchorColor",15724527),anchorSize:f(b,"anchorSize",4),showConvexHulls:f(b,"showConvexHulls",!1),hullColor:f(b,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),f(E,"setBounds",!1)){var V=E.setBounds;if(typeof V=="boolean")this.setBounds();else{var X=f(V,"x",0),K=f(V,"y",0),J=f(V,"width",S.sys.scale.width),G=f(V,"height",S.sys.scale.height),w=f(V,"thickness",64),N=f(V,"left",!0),z=f(V,"right",!0),U=f(V,"top",!0),W=f(V,"bottom",!0);this.setBounds(X,K,J,G,w,N,z,U,W)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,M=C.composites,R,L,O;for(R=0;R<S.length;R++)L=S[R],O=L.render,this.setBodyRenderStyle(L,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity);for(R=0;R<E.length;R++)L=E[R],O=L.render,this.setConstraintRenderStyle(L,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize);for(R=0;R<M.length;R++)L=M[R],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(C,S,E,M,R,L){var O=C.render,F=this.debugConfig;return O?(S==null&&(S=C.isStatic?F.staticLineColor:F.lineColor),E==null&&(E=F.lineOpacity),M==null&&(M=F.lineThickness),R==null&&(R=C.isStatic?F.staticFillColor:F.fillColor),L==null&&(L=F.fillOpacity),S!==!1&&(O.lineColor=S),E!==!1&&(O.lineOpacity=E),M!==!1&&(O.lineThickness=M),R!==!1&&(O.fillColor=R),L!==!1&&(O.fillOpacity=L),this):this},setConstraintRenderStyle:function(C,S,E,M,R,L,O){var F=C.render,D=this.debugConfig;if(!F)return this;if(S==null){var B=F.type;B==="line"?S=D.jointColor:B==="pin"?S=D.pinColor:B==="spring"&&(S=D.springColor)}return E==null&&(E=D.jointLineOpacity),M==null&&(M=D.jointLineThickness),R==null&&(R=D.pinSize),L==null&&(L=D.anchorColor),O==null&&(O=D.anchorSize),S!==!1&&(F.lineColor=S),E!==!1&&(F.lineOpacity=E),M!==!1&&(F.lineThickness=M),R!==!1&&(F.pinSize=R),L!==!1&&(F.anchorColor=L),O!==!1&&(F.anchorSize=O),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(M){C.setCompositeRenderStyle(M)}),g.on(E,"beforeAdd",function(M){for(var R=[].concat(M.object),L=0;L<R.length;L++){var O=R[L],F=O.render;O.type==="body"?C.setBodyRenderStyle(O,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity):O.type==="composite"?C.setCompositeRenderStyle(O):O.type==="constraint"&&C.setConstraintRenderStyle(O,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize)}})),g.on(E,"beforeAdd",function(M){C.emit(c.BEFORE_ADD,M)}),g.on(E,"afterAdd",function(M){C.emit(c.AFTER_ADD,M)}),g.on(E,"beforeRemove",function(M){C.emit(c.BEFORE_REMOVE,M)}),g.on(E,"afterRemove",function(M){C.emit(c.AFTER_REMOVE,M)}),g.on(S,"beforeUpdate",function(M){C.emit(c.BEFORE_UPDATE,M)}),g.on(S,"afterUpdate",function(M){C.emit(c.AFTER_UPDATE,M)}),g.on(S,"collisionStart",function(M){var R=M.pairs,L,O;R.length>0&&(L=R[0].bodyA,O=R[0].bodyB),C.emit(c.COLLISION_START,M,L,O)}),g.on(S,"collisionActive",function(M){var R=M.pairs,L,O;R.length>0&&(L=R[0].bodyA,O=R[0].bodyB),C.emit(c.COLLISION_ACTIVE,M,L,O)}),g.on(S,"collisionEnd",function(M){var R=M.pairs,L,O;R.length>0&&(L=R[0].bodyA,O=R[0].bodyB),C.emit(c.COLLISION_END,M,L,O)})},setBounds:function(C,S,E,M,R,L,O,F,D){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),M===void 0&&(M=this.scene.sys.scale.height),R===void 0&&(R=64),L===void 0&&(L=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),D===void 0&&(D=!0),this.updateWall(L,"left",C-R,S-R,R,M+R*2),this.updateWall(O,"right",C+E,S-R,R,M+R*2),this.updateWall(F,"top",C,S-R,E,R),this.updateWall(D,"bottom",C,S+M,E,R),this},updateWall:function(C,S,E,M,R,L){var O=this.walls[S];C?(O&&x.remove(this.localWorld,O),E+=R/2,M+=L/2,this.walls[S]=this.create(E,M,R,L,{isStatic:!0,friction:0,frictionStatic:0})):(O&&x.remove(this.localWorld,O),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,M,R){var L=n.rectangle(C,S,E,M,R);return x.add(this.localWorld,L),L},add:function(C){return x.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var M=C[E],R=M.body?M.body:M;h.remove(this.localWorld,R,S)}return this},removeConstraint:function(C,S){return h.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,M=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(M,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new m(this,C[E],S);return this},nextGroup:function(C){return p.nextGroup(C)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,M=this.runner,R=E.timing,L=this.correction;M.isFixed?S=this.getDelta(C,S):(S=C-M.timePrev||M.delta,M.timePrev=C,M.deltaHistory.push(S),M.deltaHistory=M.deltaHistory.slice(-M.deltaSampleSize),S=Math.min.apply(null,M.deltaHistory),S=S<M.deltaMin?M.deltaMin:S,S=S>M.deltaMax?M.deltaMax:S,L=S/M.delta,M.delta=S),M.timeScalePrev!==0&&(L*=R.timeScale/M.timeScalePrev),R.timeScale===0&&(L=0),M.timeScalePrev=R.timeScale,M.correction=L,M.frameCounter+=1,C-M.counterTimestamp>=1e3&&(M.fps=M.frameCounter*((C-M.counterTimestamp)/1e3),M.counterTimestamp=C,M.frameCounter=0),a.update(E,S,L)}},step:function(C,S){a.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return h.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,M=h.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(M,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(M),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(M,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(M,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,M){S.lineStyle(1,E,M);for(var R=o.keys(C.buckets),L=0;L<R.length;L++){var O=R[L];if(!(C.buckets[O].length<2)){var F=O.split(/C|R/);S.strokeRect(parseInt(F[1],10)*C.bucketWidth,parseInt(F[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var M=0;M<C.length;M++){var R=C[M];if(!!R.isActive){var L=R.collision,O=L.bodyA,F=L.bodyB,D=O.position,B=F.position,b=L.penetration,V=!O.isStatic&&!F.isStatic?4:1;F.isStatic&&(V=0),S.lineBetween(B.x,B.y,B.x-b.x*V,B.y-b.y*V),V=!O.isStatic&&!F.isStatic?4:1,O.isStatic&&(V=0),S.lineBetween(D.x,D.y,D.x-b.x*V,D.y-b.y*V)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var M,R;for(M=0;M<C.length;M++)if(R=C[M],!!R.isActive)for(var L=0;L<R.activeContacts.length;L++){var O=R.activeContacts[L],F=O.vertex;S.fillRect(F.x-2,F.y-2,5,5)}for(M=0;M<C.length;M++)if(R=C[M],!!R.isActive){var D=R.collision,B=R.activeContacts;if(B.length>0){var b=B[0].vertex.x,V=B[0].vertex.y;B.length===2&&(b=(B[0].vertex.x+B[1].vertex.x)/2,V=(B[0].vertex.y+B[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?S.lineBetween(b-D.normal.x*8,V-D.normal.y*8,b,V):S.lineBetween(b+D.normal.x*8,V+D.normal.y*8,b,V)}}return this},renderBodyBounds:function(C,S,E,M){S.lineStyle(1,E,M);for(var R=0;R<C.length;R++){var L=C[R];if(!!L.render.visible){var O=L.bounds;if(O)S.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var F=L.parts,D=F.length>1?1:0;D<F.length;D++){var B=F[D];S.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,M,R){S.lineStyle(1,M,R);for(var L=0;L<C.length;L++){var O=C[L],F=O.parts;if(!!O.render.visible){var D,B,b;if(E)for(B=F.length>1?1:0;B<F.length;B++)for(D=F[B],b=0;b<D.axes.length;b++){var V=D.axes[b];S.lineBetween(D.position.x,D.position.y,D.position.x+V.x*20,D.position.y+V.y*20)}else for(B=F.length>1?1:0;B<F.length;B++)for(D=F[B],b=0;b<D.axes.length;b++)S.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,M,R){S.lineStyle(R,E,M);for(var L=0;L<C.length;L++){var O=C[L];!O.render.visible||S.lineBetween(O.position.x,O.position.y,O.position.x+(O.position.x-O.positionPrev.x)*2,O.position.y+(O.position.y-O.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,M=E.showBody,R=E.showStaticBody,L=E.showSleeping,O=E.showInternalEdges,F=E.showConvexHulls,D=E.renderFill,B=E.renderLine,b=E.staticBodySleepOpacity,V=E.sleepFillColor,X=E.sleepLineColor,K=E.hullColor,J=0;J<C.length;J++){var G=C[J];if(!!G.render.visible&&!(!R&&G.isStatic||!M&&!G.isStatic)){var w=G.render.lineColor,N=G.render.lineOpacity,z=G.render.lineThickness,U=G.render.fillColor,W=G.render.fillOpacity;L&&G.isSleeping&&(G.isStatic?(N*=b,W*=b):(w=X,U=V)),D||(U=null),B||(w=null),this.renderBody(G,S,O,w,N,z,U,W);var H=G.parts.length;F&&H>1&&this.renderConvexHull(G,S,K,z)}}},renderBody:function(C,S,E,M,R,L,O,F){M===void 0&&(M=null),R===void 0&&(R=null),L===void 0&&(L=1),O===void 0&&(O=null),F===void 0&&(F=null);for(var D=this.debugConfig,B=D.sensorFillColor,b=D.sensorLineColor,V=C.parts,X=V.length,K=X>1?1:0;K<X;K++){var J=V[K],G=J.render,w=G.opacity;if(!(!G.visible||w===0||J.isSensor&&!D.showSensors)){var N=J.circleRadius;if(S.beginPath(),J.isSensor?(O!==null&&S.fillStyle(B,F*w),M!==null&&S.lineStyle(L,b,R*w)):(O!==null&&S.fillStyle(O,F*w),M!==null&&S.lineStyle(L,M,R*w)),N)S.arc(J.position.x,J.position.y,N,0,2*Math.PI);else{var z=J.vertices,U=z.length;S.moveTo(z[0].x,z[0].y);for(var W=1;W<U;W++){var H=z[W];if(!z[W-1].isInternal||E?S.lineTo(H.x,H.y):S.moveTo(H.x,H.y),W<U&&H.isInternal&&!E){var Z=(W+1)%U;S.moveTo(z[Z].x,z[Z].y)}}S.closePath()}O!==null&&S.fillPath(),M!==null&&S.strokePath()}}if(D.showPositions&&!C.isStatic){var q=C.position.x,_=C.position.y,nt=Math.ceil(D.positionSize/2);S.fillStyle(D.positionColor,1),S.fillRect(q-nt,_-nt,D.positionSize,D.positionSize)}return this},renderConvexHull:function(C,S,E,M){M===void 0&&(M=1);var R=C.parts,L=R.length;if(L>1){var O=C.vertices;S.lineStyle(M,E),S.beginPath(),S.moveTo(O[0].x,O[0].y);for(var F=1;F<O.length;F++)S.lineTo(O[F].x,O[F].y);S.lineTo(O[0].x,O[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=h.allConstraints(this.localWorld),E=0;E<S.length;E++){var M=S[E].render,R=M.lineColor,L=M.lineOpacity,O=M.lineThickness,F=M.pinSize,D=M.anchorColor,B=M.anchorSize;this.renderConstraint(S[E],C,R,L,O,F,D,B)}},renderConstraint:function(C,S,E,M,R,L,O,F){var D=C.render;if(!D.visible||!C.pointA||!C.pointB)return this;S.lineStyle(R,E,M);var B=C.bodyA,b=C.bodyB,V,X;if(B?V=y.add(B.position,C.pointA):V=C.pointA,D.type==="pin")S.strokeCircle(V.x,V.y,L);else{if(b?X=y.add(b.position,C.pointB):X=C.pointB,S.beginPath(),S.moveTo(V.x,V.y),D.type==="spring")for(var K=y.sub(X,V),J=y.perp(y.normalise(K)),G=Math.ceil(o.clamp(C.length/5,12,20)),w,N=1;N<G;N+=1)w=N%2==0?1:-1,S.lineTo(V.x+K.x*(N/G)+J.x*w*4,V.y+K.y*(N/G)+J.y*w*4);S.lineTo(X.x,X.y)}return S.strokePath(),D.anchors&&F>0&&(S.fillStyle(O),S.fillCircle(V.x,V.y,F),S.fillCircle(X.x,X.y,F)),this},resetCollisionIDs:function(){return u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),a.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,d,t){e.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(e,d,t){var n=t(540),u=t(0),s=t(20),o=new u({Extends:n,initialize:function(a,l,c){n.call(this,l),this.scene=a,this.systems=a.sys,this.pluginKey=c,a.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=o},function(e,d,t){e.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(e,d,t){e.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(e,d,t){e.exports={Canvas:t(369),WebGL:t(383)}},function(e,d,t){var n=t(107),u=t(17),s={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};s=u(!1,s,n),e.exports=s},function(e,d,t){var n=t(92),u=t(17),s={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};s=u(!1,s,n),e.exports=s},function(e,d,t){var n=t(0),u=t(198),s=t(2),o=t(1411),h=t(382),a=t(58),l=new n({Extends:a,initialize:function(f){f.renderTarget=s(f,"renderTarget",1),f.fragShader=s(f,"fragShader",o),f.vertShader=s(f,"vertShader",h),f.attributes=s(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),f.batchSize=1,f.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],a.call(this,f),this.isPostFX=!0,this.gameObject,this.colorMatrix=new u,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){a.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},copyFrame:function(c,f,v,p,g){this.manager.copyFrame(c,f,v,p,g)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,f,v){this.manager.drawFrame(c,f,v,this.colorMatrix)},blendFrames:function(c,f,v,p,g){this.manager.blendFrames(c,f,v,p,g)},blendFramesAdditive:function(c,f,v,p,g){this.manager.blendFramesAdditive(c,f,v,p,g)},clearFrame:function(c,f){this.manager.clearFrame(c,f)},blitFrame:function(c,f,v,p,g,m){this.manager.blitFrame(c,f,v,p,g,m)},copyFrameRect:function(c,f,v,p,g,m,x,y){this.manager.copyFrameRect(c,f,v,p,g,m,x,y)},bindAndDraw:function(c,f,v,p,g){v===void 0&&(v=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),f?(m.viewport(0,0,f.width,f.height),m.bindFramebuffer(m.FRAMEBUFFER,f.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f.texture,0),v&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),f?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=l},function(e,d){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,d,t){var n=t(17),u=t(201),s={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};s=n(!1,s,u.CENTER),s=n(!1,s,u.ORIENTATION),s=n(!1,s,u.SCALE_MODE),s=n(!1,s,u.ZOOM),e.exports=s},function(e,d,t){var n=t(144),u=t(17),s={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};s=u(!1,s,n),e.exports=s},function(e,d,t){var n=t(18),u=t(0),s=t(20),o=t(2),h=t(24),a=new u({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(s.BOOT,this.boot,this),c.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",l,c),this},restart:function(l){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,l),this},transition:function(l){l===void 0&&(l={});var c=o(l,"target",!1),f=this.manager.getScene(c);if(!c||!this.checkValidTransition(f))return!1;var v=o(l,"duration",1e3);this._elapsed=0,this._target=f,this._duration=v,this._willSleep=o(l,"sleep",!1),this._willRemove=o(l,"remove",!1);var p=o(l,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=o(l,"onUpdateScope",this.scene));var g=o(l,"allowInput",!1);this.settings.transitionAllowInput=g;var m=f.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=v,m.transitionAllowInput=g,o(l,"moveAbove",!1)?this.manager.moveAbove(this.key,c):o(l,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),f.sys.isSleeping()?f.sys.wake(o(l,"data")):this.manager.start(c,o(l,"data")),this.systems.events.emit(s.TRANSITION_OUT,f,v),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(l){return!(!l||l.sys.isActive()||l.sys.isTransitioning()||l===this.scene||this.systems.isTransitioning())},step:function(l,c){this._elapsed+=c,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var l=this._target.sys,c=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),l.events.emit(s.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(l,c,f,v){return this.manager.add(l,c,f,v)},launch:function(l,c){return l&&l!==this.key&&this.manager.queueOp("start",l,c),this},run:function(l,c){return l&&l!==this.key&&this.manager.queueOp("run",l,c),this},pause:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("pause",l,c),this},resume:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("resume",l,c),this},sleep:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("sleep",l,c),this},wake:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("wake",l,c),this},switch:function(l){return l!==this.key&&this.manager.queueOp("switch",this.key,l),this},stop:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("stop",l,c),this},setActive:function(l,c,f){c===void 0&&(c=this.key);var v=this.manager.getScene(c);return v&&v.sys.setActive(l,f),this},setVisible:function(l,c){c===void 0&&(c=this.key);var f=this.manager.getScene(c);return f&&f.sys.setVisible(l),this},isSleeping:function(l){return l===void 0&&(l=this.key),this.manager.isSleeping(l)},isActive:function(l){return l===void 0&&(l=this.key),this.manager.isActive(l)},isPaused:function(l){return l===void 0&&(l=this.key),this.manager.isPaused(l)},isVisible:function(l){return l===void 0&&(l=this.key),this.manager.isVisible(l)},swapPosition:function(l,c){return c===void 0&&(c=this.key),l!==c&&this.manager.swapPosition(l,c),this},moveAbove:function(l,c){return c===void 0&&(c=this.key),l!==c&&this.manager.moveAbove(l,c),this},moveBelow:function(l,c){return c===void 0&&(c=this.key),l!==c&&this.manager.moveBelow(l,c),this},remove:function(l){return l===void 0&&(l=this.key),this.manager.remove(l),this},moveUp:function(l){return l===void 0&&(l=this.key),this.manager.moveUp(l),this},moveDown:function(l){return l===void 0&&(l=this.key),this.manager.moveDown(l),this},bringToTop:function(l){return l===void 0&&(l=this.key),this.manager.bringToTop(l),this},sendToBack:function(l){return l===void 0&&(l=this.key),this.manager.sendToBack(l),this},get:function(l){return this.manager.getScene(l)},getIndex:function(l){return l===void 0&&(l=this.key),this.manager.getIndex(l)},shutdown:function(){var l=this.systems.events;l.off(s.SHUTDOWN,this.shutdown,this),l.off(s.POST_UPDATE,this.step,this),l.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",a,"scenePlugin"),e.exports=a},function(e,d,t){e.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(e,d,t){var n=t(17),u=t(1417),s={CanvasTexture:t(423),Events:t(106),FilterMode:u,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};s=n(!1,s,u),e.exports=s},function(e,d){var t={LINEAR:0,NEAREST:1};e.exports=t},function(e,d,t){var n=t(17),u=t(1419),s={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};s=n(!1,s,u.ORIENTATION),e.exports=s},function(e,d,t){var n={ORIENTATION:t(29)};e.exports=n},function(e,d,t){var n=t(26),u=t(63),s=function(o,h,a,l,c,f,v,p){v===void 0&&(v=!0),o<0&&(o=0),h<0&&(h=0);for(var g=n(o,h,a,l,null,p),m=c-o,x=f-h,y=0;y<g.length;y++){var T=g[y].x+m,C=g[y].y+x;T>=0&&T<p.width&&C>=0&&C<p.height&&p.data[C][T]&&p.data[C][T].copy(g[y])}v&&u(c-1,f-1,a+2,l+2,p)};e.exports=s},function(e,d,t){var n=t(26),u=t(542),s=function(o,h,a,l,c,f){a||(a={}),Array.isArray(o)||(o=[o]);var v=f.tilemapLayer;l||(l=v.scene),c||(c=l.cameras.main);var p=n(0,0,f.width,f.height,null,f),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(o.indexOf(x.index)!==-1){var y=v.tileToWorldXY(x.x,x.y,void 0,c,f);a.x=y.x,a.y=y.y,g.push(l.make.sprite(a))}}if(typeof h=="number")for(m=0;m<o.length;m++)u(o[m],h,0,0,f.width,f.height,f);else if(Array.isArray(h))for(m=0;m<o.length;m++)u(o[m],h[m],0,0,f.width,f.height,f);return g};e.exports=s},function(e,d,t){var n=t(26),u=t(63),s=t(72),o=function(h,a,l,c,f,v,p){for(var g=p.collideIndexes.indexOf(h)!==-1,m=n(a,l,c,f,null,p),x=0;x<m.length;x++)m[x].index=h,s(m[x],g);v&&u(a-1,l-1,c+2,f+2,p)};e.exports=o},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c,f,v){var p=n(h,a,l,c,f,v);return p.filter(s,o)};e.exports=u},function(e,d){var t=function(n,u,s,o){u===void 0&&(u=0),s===void 0&&(s=!1);var h=0,a,l,c;if(s){for(l=o.height-1;l>=0;l--)for(a=o.width-1;a>=0;a--)if(c=o.data[l][a],c&&c.index===n){if(h===u)return c;h+=1}}else for(l=0;l<o.height;l++)for(a=0;a<o.width;a++)if(c=o.data[l][a],c&&c.index===n){if(h===u)return c;h+=1}return null};e.exports=t},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c,f,v){var p=n(h,a,l,c,f,v);return p.find(s,o)||null};e.exports=u},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c,f,v){var p=n(h,a,l,c,f,v);p.forEach(s,o)};e.exports=u},function(e,d,t){var n=t(29),u=t(544),s=t(545),o=t(547),h=t(1),a=t(548),l=function(c){return c===n.ORTHOGONAL?u:c===n.HEXAGONAL?s:c===n.STAGGERED?a:c===n.ISOMETRIC?o:h};e.exports=l},function(e,d,t){var n=t(158),u=t(3),s=new u,o=function(h,a,l,c,f){return f.tilemapLayer.worldToTileXY(h,a,!0,s,c),n(s.x,s.y,l,f)};e.exports=o},function(e,d,t){var n=t(483),u=t(26),s=t(484),o=t(1),h=t(3),a=function(p,g){return s.RectangleToTriangle(g,p)},l=new h,c=new h,f=new h,v=function(p,g,m,x){if(p===void 0)return[];var y=o;p instanceof n.Circle?y=s.CircleToRectangle:p instanceof n.Rectangle?y=s.RectangleToRectangle:p instanceof n.Triangle?y=a:p instanceof n.Line&&(y=s.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,c,m);var T=c.x,C=c.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,f,m);var S=Math.ceil(f.x),E=Math.ceil(f.y),M=Math.max(S-T,1),R=Math.max(E-C,1),L=u(T,C,M,R,g,x),O=x.tileWidth,F=x.tileHeight;x.tilemapLayer&&(O*=x.tilemapLayer.scaleX,F*=x.tilemapLayer.scaleY);for(var D=[],B=new n.Rectangle(0,0,O,F),b=0;b<L.length;b++){var V=L[b];x.tilemapLayer.tileToWorldXY(V.x,V.y,l,m),B.x=l.x,B.y=l.y,y(p,B)&&D.push(V)}return D};e.exports=v},function(e,d,t){var n=t(29),u=t(1),s=t(253),o=function(h){return h===n.ORTHOGONAL?s:u};e.exports=o},function(e,d,t){var n=t(29),u=t(550),s=t(551),o=t(1),h=t(552),a=t(553),l=function(c){return c===n.ORTHOGONAL?a:c===n.ISOMETRIC?s:c===n.HEXAGONAL?u:c===n.STAGGERED?h:o};e.exports=l},function(e,d,t){var n=t(29),u=t(554),s=t(1),o=t(555),h=t(254),a=function(l){return l===n.ORTHOGONAL?h:l===n.HEXAGONAL?u:l===n.STAGGERED?o:s};e.exports=a},function(e,d,t){var n=t(29),u=t(1),s=t(255),o=function(h){return h===n.ORTHOGONAL?s:u};e.exports=o},function(e,d,t){var n=t(29),u=t(556),s=t(557),o=t(1),h=t(558),a=t(559),l=function(c){return c===n.ORTHOGONAL?a:c===n.ISOMETRIC?s:c===n.HEXAGONAL?u:c===n.STAGGERED?h:o};e.exports=l},function(e,d,t){var n=t(29),u=t(560),s=t(1),o=t(561),h=t(256),a=function(l){return l===n.ORTHOGONAL?h:l===n.HEXAGONAL?u:l===n.STAGGERED?o:s};e.exports=a},function(e,d,t){var n=t(562),u=t(3),s=new u,o=function(h,a,l,c){c.tilemapLayer.worldToTileXY(h,a,!0,s,l);var f=s.x,v=s.y;return n(f,v,c)};e.exports=o},function(e,d,t){var n=t(257),u=t(3),s=new u,o=function(h,a,l,c,f,v){return v.tilemapLayer.worldToTileXY(a,l,!0,s,f,v),n(h,s.x,s.y,c,v)};e.exports=o},function(e,d,t){var n=t(63),u=t(257),s=function(o,h,a,l,c){if(l===void 0&&(l=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var f=o.length,v=o[0].length,p=0;p<f;p++)for(var g=0;g<v;g++){var m=o[p][g];u(m,h+g,a+p,!1,c)}l&&n(h-1,a-1,v+2,f+2,c)};e.exports=s},function(e,d,t){var n=t(26),u=t(210),s=function(o,h,a,l,c,f){var v,p=n(o,h,a,l,{},f);if(!c)for(c=[],v=0;v<p.length;v++)c.indexOf(p[v].index)===-1&&c.push(p[v].index);for(v=0;v<p.length;v++)p[v].index=u(c)};e.exports=s},function(e,d,t){var n=t(563),u=t(3),s=new u,o=function(h,a,l,c,f,v){return v.tilemapLayer.worldToTileXY(h,a,!0,s,f,v),n(s.x,s.y,l,c,v)};e.exports=o},function(e,d,t){var n=t(26),u=t(397),s=new u(105,210,231,150),o=new u(243,134,48,200),h=new u(40,39,37,150),a=function(l,c,f){c===void 0&&(c={});var v=c.tileColor!==void 0?c.tileColor:s,p=c.collidingTileColor!==void 0?c.collidingTileColor:o,g=c.faceColor!==void 0?c.faceColor:h,m=n(0,0,f.width,f.height,null,f);l.translateCanvas(f.tilemapLayer.x,f.tilemapLayer.y),l.scaleCanvas(f.tilemapLayer.scaleX,f.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,M=y.collides?p:v;M!==null&&(l.fillStyle(M.color,M.alpha/255),l.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(l.lineStyle(1,g.color,g.alpha/255),y.faceTop&&l.lineBetween(S,E,S+T,E),y.faceRight&&l.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&l.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&l.lineBetween(S,E,S,E+C))}};e.exports=a},function(e,d,t){var n=t(72),u=t(63),s=t(160),o=function(h,a,l,c,f){a===void 0&&(a=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),Array.isArray(h)||(h=[h]);for(var v=0;v<h.length;v++)s(h[v],a,c);if(f)for(var p=0;p<c.height;p++)for(var g=0;g<c.width;g++){var m=c.data[p][g];m&&h.indexOf(m.index)!==-1&&n(m,a)}l&&u(0,0,c.width,c.height,c)};e.exports=o},function(e,d,t){var n=t(72),u=t(63),s=t(160),o=function(h,a,l,c,f,v){if(l===void 0&&(l=!0),c===void 0&&(c=!0),v===void 0&&(v=!0),!(h>a)){for(var p=h;p<=a;p++)s(p,l,f);if(v)for(var g=0;g<f.height;g++)for(var m=0;m<f.width;m++){var x=f.data[g][m];x&&x.index>=h&&x.index<=a&&n(x,l)}c&&u(0,0,f.width,f.height,f)}};e.exports=o},function(e,d,t){var n=t(72),u=t(63),s=t(160),o=function(h,a,l,c){a===void 0&&(a=!0),l===void 0&&(l=!0),Array.isArray(h)||(h=[h]);for(var f=0;f<c.height;f++)for(var v=0;v<c.width;v++){var p=c.data[f][v];p&&h.indexOf(p.index)===-1&&(n(p,a),s(p.index,a,c))}l&&u(0,0,c.width,c.height,c)};e.exports=o},function(e,d,t){var n=t(72),u=t(63),s=t(126),o=function(h,a,l,c){a===void 0&&(a=!0),l===void 0&&(l=!0);for(var f=0;f<c.height;f++)for(var v=0;v<c.width;v++){var p=c.data[f][v];if(!!p){for(var g in h)if(!!s(p.properties,g)){var m=h[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&n(p,a)}}}l&&u(0,0,c.width,c.height,c)};e.exports=o},function(e,d,t){var n=t(72),u=t(63),s=function(o,h,a){o===void 0&&(o=!0),h===void 0&&(h=!0);for(var l=0;l<a.height;l++)for(var c=0;c<a.width;c++){var f=a.data[l][c];if(!!f){var v=f.getCollisionGroup();v&&v.objects&&v.objects.length>0&&n(f,o)}}h&&u(0,0,a.width,a.height,a)};e.exports=s},function(e,d){var t=function(n,u,s,o){if(typeof n=="number")o.callbacks[n]=u!==null?{callback:u,callbackContext:s}:void 0;else for(var h=0,a=n.length;h<a;h++)o.callbacks[n[h]]=u!==null?{callback:u,callbackContext:s}:void 0};e.exports=t},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c,f){for(var v=n(s,o,h,a,null,f),p=0;p<v.length;p++)v[p].setCollisionCallback(l,c)};e.exports=u},function(e,d,t){var n=t(26),u=t(131),s=function(o,h,a,l,c){var f=n(o,h,a,l,null,c),v=f.map(function(g){return g.index});u(v);for(var p=0;p<f.length;p++)f[p].index=v[p]};e.exports=s},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c,f){for(var v=n(h,a,l,c,null,f),p=0;p<v.length;p++)v[p]&&(v[p].index===s?v[p].index=o:v[p].index===o&&(v[p].index=s))};e.exports=u},function(e,d,t){var n=t(26),u=function(s,o,h,a,l,c){if(!!l){var f,v=n(s,o,h,a,null,c),p=0;for(f=0;f<l.length;f++)p+=l[f].weight;if(!(p<=0))for(f=0;f<v.length;f++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<l.length;y++)if(m+=l[y].weight,g<=m){var T=l[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}v[f].index=x}}};e.exports=u},function(e,d,t){e.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(e,d){var t=function(n,u){for(var s=0;s<n.length;s++){var o=n[s],h=s;if(o.name&&o.name!==""&&(h=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var a={},l={},c,f,v;if(Array.isArray(o.edgecolors))for(c=0;c<o.edgecolors.length;c++)v=1+c,f=o.edgecolors[c],f.name!==""&&(a[v]=f.name);if(Array.isArray(o.cornercolors))for(c=0;c<o.cornercolors.length;c++)v=1+c,f=o.cornercolors[c],f.name!==""&&(l[v]=f.name);if(Array.isArray(o.colors))for(c=0;c<o.colors.length;c++)f=o.colors[c],v=1+c,f.name!==""&&(a[v]=l[v]=f.name);for(var p=[a,l,a,l,a,l,a,l],g=0;g<o.wangtiles.length;g++){var m=o.wangtiles[g],x=u[m.tileid]||(u[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(f=m.wangid[T],f===0){y.push(void 0);continue}var C=p[T][f];if(C!==void 0){y.push(C);continue}y.push(f)}x[h]=y}}}};e.exports=t},function(e,d,t){e.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(e,d,t){e.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(e,d,t){var n=t(1),u=t(1);n=t(1457),u=t(1458),e.exports={renderWebGL:n,renderCanvas:u}},function(e,d,t){var n=t(12),u=function(s,o,h){var a=o.cull(h),l=a.length,c=h.alpha*o.alpha;if(!(l===0||c<=0)){var f=o.gidMap,v=s.pipelines.set(o.pipeline,o),p=n.getTintAppendFloatAlpha,g=o.scrollFactorX,m=o.scrollFactorY,x=o.x,y=o.y,T=o.scaleX,C=o.scaleY;s.pipelines.preBatch(o);for(var S=0;S<l;S++){var E=a[S],M=f[E.index];if(!!M){var R=M.getTileTextureCoordinates(E.index);if(R!==null){var L=M.glTexture,O=v.setTexture2D(L,o),F=M.tileWidth,D=M.tileHeight,B=R.x,b=R.y,V=M.tileWidth*.5,X=M.tileHeight*.5,K=p(E.tint,c*E.alpha);v.batchTexture(o,L,L.width,L.height,x+(V+E.pixelX)*T,y+(X+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,m,V,X,B,b,F,D,K,K,K,K,!1,0,0,h,null,!0,O)}}}s.pipelines.postBatch(o)}};e.exports=u},function(e,d,t){var n=t(25),u=new n,s=new n,o=new n,h=function(a,l,c,f){var v=l.cull(c),p=v.length,g=c.alpha*l.alpha;if(!(p===0||g<=0)){var m=u,x=s,y=o;x.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),m.copyFrom(c.matrix);var T=a.currentContext,C=l.gidMap;T.save(),f?(m.multiplyWithOffset(f,-c.scrollX*l.scrollFactorX,-c.scrollY*l.scrollFactorY),x.e=l.x,x.f=l.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=c.scrollX*l.scrollFactorX,x.f-=c.scrollY*l.scrollFactorY,x.copyToContext(T)),(!a.antialias||l.scaleX>1||l.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<p;S++){var E=v[S],M=C[E.index];if(!!M){var R=M.image.getSourceImage(),L=M.getTileTextureCoordinates(E.index);if(L!==null){var O=M.tileWidth,F=M.tileHeight,D=O*.5,B=F*.5;T.save(),T.translate(E.pixelX+D,E.pixelY+B),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(R,L.x,L.y,O,F,-D,-B,O,F),T.restore()}}}T.restore()}};e.exports=h},function(e,d,t){var n=t(16),u=t(262);n.register("tilemap",function(s){var o=s!==void 0?s:{};return u(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(e,d,t){var n=t(5),u=t(262);n.register("tilemap",function(s,o,h,a,l,c,f){return s===null&&(s=void 0),o===null&&(o=void 0),h===null&&(h=void 0),a===null&&(a=void 0),l===null&&(l=void 0),u(this.scene,s,o,h,a,l,c,f)})},function(e,d,t){e.exports={Clock:t(1462),TimerEvent:t(582)}},function(e,d,t){var n=t(0),u=t(24),s=t(20),o=t(582),h=t(93),a=new n({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(s.BOOT,this.boot,this),c.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(s.PRE_UPDATE,this.preUpdate,this),l.on(s.UPDATE,this.update,this),l.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(l){var c;return l instanceof o?(c=l,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new o(l),this._pendingInsertion.push(c),c},delayedCall:function(l,c,f,v){return this.addEvent({delay:l,callback:c,args:f,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var f=l[c];h(this._pendingRemoval,f),h(this._pendingInsertion,f),h(this._active,f)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var l=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(l===0&&c===0)){var f,v;for(f=0;f<l;f++){v=this._pendingRemoval[f];var p=this._active.indexOf(v);p>-1&&this._active.splice(p,1),v.destroy()}for(f=0;f<c;f++)v=this._pendingInsertion[f],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(l,c){if(this.now=l,!this.paused){c*=this.timeScale;for(var f=0;f<this._active.length;f++){var v=this._active[f];if(!v.paused&&(v.elapsed+=c*v.timeScale,v.elapsed>=v.delay)){var p=v.elapsed-v.delay;v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0?(v.repeatCount--,v.elapsed=p,v.hasDispatched=!1):this._pendingRemoval.push(v)}}}},shutdown:function(){var l;for(l=0;l<this._pendingInsertion.length;l++)this._pendingInsertion[l].destroy();for(l=0;l<this._active.length;l++)this._active[l].destroy();for(l=0;l<this._pendingRemoval.length;l++)this._pendingRemoval[l].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(s.PRE_UPDATE,this.preUpdate,this),c.off(s.UPDATE,this.update,this),c.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",a,"time"),e.exports=a},function(e,d,t){var n=t(100),u=t(17),s={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};s=u(!1,s,n),e.exports=s},function(e,d,t){e.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(e,d){e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,d){e.exports="complete"},function(e,d){e.exports="loop"},function(e,d){e.exports="pause"},function(e,d){e.exports="resume"},function(e,d){e.exports="start"},function(e,d){e.exports="update"},function(e,d){e.exports="active"},function(e,d){e.exports="complete"},function(e,d){e.exports="loop"},function(e,d){e.exports="repeat"},function(e,d){e.exports="start"},function(e,d){e.exports="stop"},function(e,d){e.exports="update"},function(e,d){e.exports="yoyo"},function(e,d,t){var n=t(93),u=t(0),s=t(585),o=t(24),h=t(20),a=t(586),l=t(587),c=t(100),f=t(163),v=new u({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(h.BOOT,this.boot,this),g.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(h.PRE_UPDATE,this.preUpdate,this),p.on(h.UPDATE,this.update,this),p.once(h.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return l(this,p)},timeline:function(p){var g=l(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return f(this,p)},add:function(p){var g=f(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=s(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return a(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=c.REMOVED,m.splice(T,1))):(y.state=c.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===c.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return n(this._add,p),n(this._pending,p),n(this._active,p),n(this._destroy,p),p.state=c.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=c.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,C;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(h.PRE_UPDATE,this.preUpdate,this),p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",v,"tweens"),e.exports=v},function(e,d,t){e.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(e,d,t){e.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(e,d){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(u,s){for(var o=new Uint8Array(u),h=o.length,a=s?"data:"+s+";base64,":"",l=0;l<h;l+=3)a+=t[o[l]>>2],a+=t[(o[l]&3)<<4|o[l+1]>>4],a+=t[(o[l+1]&15)<<2|o[l+2]>>6],a+=t[o[l+2]&63];return h%3==2?a=a.substring(0,a.length-1)+"=":h%3==1&&(a=a.substring(0,a.length-2)+"=="),a};e.exports=n},function(e,d,t){e.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(e,d,t){var n=t(6),u=t(18),s=function(o,h,a,l,c){c===void 0&&(c=a);var f=n(o,h,c);return u(f,a,l)};e.exports=s},function(e,d){var t=function(n,u){for(var s=0;s<u.length;s++)if(!n.hasOwnProperty(u[s]))return!1;return!0};e.exports=t},function(e,d,t){var n=t(77),u=function(s,o){var h=n(s);for(var a in o)h.hasOwnProperty(a)&&(h[a]=o[a]);return h};e.exports=u},function(e,d,t){e.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(e,d){var t=function(n,u){return n.replace(/%([0-9]+)/g,function(s,o){return u[Number(o)-1]})};e.exports=t},function(e,d){var t=function(n,u){return u===0?n.slice(1):n.slice(0,u-1)+n.slice(u)};e.exports=t},function(e,d){var t=function(n){return n.split("").reverse().join("")};e.exports=t},function(e,d,t){e.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(e,d,t){e.exports={Arcade:t(1366),Matter:t(1494)}},function(e,d,t){e.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(e,d){var t={setBounce:function(n){return this.body.restitution=n,this}};e.exports=t},function(e,d){var t={setCollisionCategory:function(n){return this.body.collisionFilter.category=n,this},setCollisionGroup:function(n){return this.body.collisionFilter.group=n,this},setCollidesWith:function(n){var u=0;if(!Array.isArray(n))u=n;else for(var s=0;s<n.length;s++)u|=n[s];return this.body.collisionFilter.mask=u,this},setOnCollide:function(n){return this.body.onCollideCallback=n,this},setOnCollideEnd:function(n){return this.body.onCollideEndCallback=n,this},setOnCollideActive:function(n){return this.body.onCollideActiveCallback=n,this},setOnCollideWith:function(n,u){Array.isArray(n)||(n=[n]);for(var s=0;s<n.length;s++){var o=n[s].hasOwnProperty("body")?n[s].body:n[s];this.body.setOnCollideWith(o,u)}return this}};e.exports=t},function(e,d,t){var n=t(41),u={applyForce:function(s){return this._tempVec2.set(this.body.position.x,this.body.position.y),n.applyForce(this.body,this._tempVec2,s),this},applyForceFrom:function(s,o){return n.applyForce(this.body,s,o),this},thrust:function(s){var o=this.body.angle;return this._tempVec2.set(s*Math.cos(o),s*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(s){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(s*Math.cos(o),s*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(s){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(s*Math.cos(o),s*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(s){var o=this.body.angle-Math.PI;return this._tempVec2.set(s*Math.cos(o),s*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=u},function(e,d){var t={setFriction:function(n,u,s){return this.body.friction=n,u!==void 0&&(this.body.frictionAir=u),s!==void 0&&(this.body.frictionStatic=s),this},setFrictionAir:function(n){return this.body.frictionAir=n,this},setFrictionStatic:function(n){return this.body.frictionStatic=n,this}};e.exports=t},function(e,d){var t={setIgnoreGravity:function(n){return this.body.ignoreGravity=n,this}};e.exports=t},function(e,d,t){var n=t(41),u=t(3),s={setMass:function(o){return n.setMass(this.body,o),this},setDensity:function(o){return n.setDensity(this.body,o),this},centerOfMass:{get:function(){return new u(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=s},function(e,d){var t={setSensor:function(n){return this.body.isSensor=n,this},isSensor:function(){return this.body.isSensor}};e.exports=t},function(e,d,t){var n=t(86),u=t(41),s=t(124),o=t(2),h=t(589),a=t(590),l=t(64),c={setRectangle:function(f,v,p){return this.setBody({type:"rectangle",width:f,height:v},p)},setCircle:function(f,v){return this.setBody({type:"circle",radius:f},v)},setPolygon:function(f,v,p){return this.setBody({type:"polygon",sides:v,radius:f},p)},setTrapezoid:function(f,v,p,g){return this.setBody({type:"trapezoid",width:f,height:v,slope:p},g)},setExistingBody:function(f,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=f;for(var p=0;p<f.parts.length;p++)f.parts[p].gameObject=this;var g=this;if(f.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},v&&(this.world.has(f)&&this.world.remove(f,!0),this.world.add(f)),this._originComponent){var m=f.render.sprite.xOffset,x=f.render.sprite.yOffset,y=f.centerOfMass.x,T=f.centerOfMass.y;if(s(y,.5)&&s(T,.5))this.setOrigin(m+.5,x+.5);else{var C=f.centerOffset.x,S=f.centerOffset.y;this.setOrigin(m+C/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(f,v){if(!f)return this;var p;typeof f=="string"&&(f={type:f});var g=o(f,"type","rectangle"),m=o(f,"x",this._tempVec2.x),x=o(f,"y",this._tempVec2.y),y=o(f,"width",this.width),T=o(f,"height",this.height);switch(g){case"rectangle":p=n.rectangle(m,x,y,T,v);break;case"circle":var C=o(f,"radius",Math.max(y,T)/2),S=o(f,"maxSides",25);p=n.circle(m,x,C,v,S);break;case"trapezoid":var E=o(f,"slope",.5);p=n.trapezoid(m,x,y,T,E,v);break;case"polygon":var M=o(f,"sides",5),R=o(f,"radius",Math.max(y,T)/2);p=n.polygon(m,x,M,R,v);break;case"fromVertices":case"fromVerts":var L=o(f,"verts",null);if(L)if(typeof L=="string"&&(L=l.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))u.setVertices(this.body,L),p=this.body;else{var O=o(f,"flagInternal",!1),F=o(f,"removeCollinear",.01),D=o(f,"minimumArea",10);p=n.fromVertices(m,x,L,v,O,F,D)}break;case"fromPhysicsEditor":p=h.parseBody(m,x,f,v);break;case"fromPhysicsTracer":p=a.parseBody(m,x,f,v);break}return p&&this.setExistingBody(p,f.addToWorld),this}};e.exports=c},function(e,d,t){var n=t(272),u=t(165),s=t(166),o={setToSleep:function(){return u.set(this.body,!0),this},setAwake:function(){return u.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,a){return this.setSleepStartEvent(h),this.setSleepEndEvent(a),this},setSleepStartEvent:function(h){if(h){var a=this.world;s.on(this.body,"sleepStart",function(l){a.emit(n.SLEEP_START,l,this)})}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var a=this.world;s.on(this.body,"sleepEnd",function(l){a.emit(n.SLEEP_END,l,this)})}else s.off(this.body,"sleepEnd");return this}};e.exports=o},function(e,d){e.exports="afteradd"},function(e,d){e.exports="afterremove"},function(e,d){e.exports="afterupdate"},function(e,d){e.exports="beforeadd"},function(e,d){e.exports="beforeremove"},function(e,d){e.exports="beforeupdate"},function(e,d){e.exports="collisionactive"},function(e,d){e.exports="collisionend"},function(e,d){e.exports="collisionstart"},function(e,d){e.exports="dragend"},function(e,d){e.exports="drag"},function(e,d){e.exports="dragstart"},function(e,d){e.exports="pause"},function(e,d){e.exports="resume"},function(e,d){e.exports="sleepend"},function(e,d){e.exports="sleepstart"},function(e,d,t){var n=t(41),u={setStatic:function(s){return n.setStatic(this.body,s),this},isStatic:function(){return this.body.isStatic}};e.exports=u},function(e,d,t){var n=t(41),u=t(14),s=t(269),o=t(270),h=4,a={x:{get:function(){return this.body.position.x},set:function(l){this._tempVec2.set(l,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(l){this._tempVec2.set(this.x,l),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(l){var c=1/this._scaleX,f=1/this._scaleY;this._scaleX=l,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,n.scale(this.body,c,f),n.scale(this.body,l,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(l){var c=1/this._scaleX,f=1/this._scaleY;this._scaleY=l,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,n.scale(this.body,c,f),n.scale(this.body,this._scaleX,l)}},angle:{get:function(){return o(this.body.angle*u.RAD_TO_DEG)},set:function(l){this.rotation=o(l)*u.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(l){this._rotation=s(l),n.setAngle(this.body,this._rotation)}},setPosition:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this._tempVec2.set(l,c),n.setPosition(this.body,this._tempVec2),this},setRotation:function(l){return l===void 0&&(l=0),this._rotation=s(l),n.setAngle(this.body,l),this},setFixedRotation:function(){return n.setInertia(this.body,Infinity),this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,n.setAngle(this.body,this.rotation),this},setScale:function(l,c,f){l===void 0&&(l=1),c===void 0&&(c=l);var v=1/this._scaleX,p=1/this._scaleY;return this._scaleX=l,this._scaleY=c,n.scale(this.body,v,p,f),n.scale(this.body,l,c,f),this}};e.exports=a},function(e,d,t){var n=t(41),u={setAngularVelocity:function(s){return n.setAngularVelocity(this.body,s),this},setVelocityX:function(s){return this._tempVec2.set(s,this.body.velocity.y),n.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(s){return this._tempVec2.set(this.body.velocity.x,s),n.setVelocity(this.body,this._tempVec2),this},setVelocity:function(s,o){return this._tempVec2.set(s,o),n.setVelocity(this.body,this._tempVec2),this}};e.exports=u},function(e,d,t){var n={};e.exports=n;var u=t(118),s=t(32);(function(){n.create=function(o){var h={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return s.extend(h,!1,o)},n.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},n.update=function(o,h){if(o.extended){var a=h.world,l=u.allBodies(a);o.collisions=o.narrowDetections,o.pairs=h.pairs.list.length,o.bodies=l.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(l.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(e,d,t){var n=t(123),u=t(271),s=t(86),o=t(41),h=t(1392),a=t(84),l=t(0),c=t(118),f=t(591),v=t(128),p=t(273),g=t(50),m=t(1394),x=t(2),y=t(6),T=t(597),C=t(1525),S=t(1526),E=t(1399),M=t(1527),R=t(127),L=t(250),O=t(598),F=t(595),D=t(24),B=t(1400),b=t(599),V=t(274),X=t(20),K=t(592),J=t(83),G=t(64),w=t(1402),N=new l({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=c,this.detector=p,this.grid=T,this.pair=L,this.pairs=O,this.query=B,this.resolver=b,this.sat=V,this.constraint=v,this.bodies=s,this.composites=f,this.axes=u,this.bounds=a,this.svg=K,this.vector=J,this.vertices=G,this.verts=G,this._tempVec2=J.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),b._restingThresh=y(this.config,"restingThresh",4),b._restingThreshTangent=y(this.config,"restingThreshTangent",6),b._positionDampen=y(this.config,"positionDampen",.9),b._positionWarming=y(this.config,"positionWarming",.8),b._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),U.sys.events.once(X.BOOT,this.boot,this),U.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new w(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new h,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new w(this.scene,this.config),this.add=new m(this.world));var z=this.systems.events;z.on(X.UPDATE,this.world.update,this.world),z.on(X.POST_UPDATE,this.world.postUpdate,this.world),z.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var z=this.systems.game.config.physics,U=this.systems.settings.physics,W=R(x(U,"matter",{}),x(z,"matter",{}));return W},enableAttractorPlugin:function(){return F.register(C),F.use(E,C),this},enableWrapPlugin:function(){return F.register(M),F.use(E,M),this},enableCollisionEventsPlugin:function(){return F.register(S),F.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(z,U){this.world.step(z,U)},containsPoint:function(z,U,W){z=this.getMatterBodies(z);var H=J.create(U,W),Z=B.point(z,H);return Z.length>0},intersectPoint:function(z,U,W){W=this.getMatterBodies(W);var H=J.create(z,U),Z=[],q=B.point(W,H);return q.forEach(function(_){Z.indexOf(_)===-1&&Z.push(_)}),Z},intersectRect:function(z,U,W,H,Z,q){Z===void 0&&(Z=!1),q=this.getMatterBodies(q);var _={min:{x:z,y:U},max:{x:z+W,y:U+H}},nt=[],rt=B.region(q,_,Z);return rt.forEach(function(at){nt.indexOf(at)===-1&&nt.push(at)}),nt},intersectRay:function(z,U,W,H,Z,q){Z===void 0&&(Z=1),q=this.getMatterBodies(q);for(var _=[],nt=B.ray(q,J.create(z,U),J.create(W,H),Z),rt=0;rt<nt.length;rt++)_.push(nt[rt].body);return _},intersectBody:function(z,U){U=this.getMatterBodies(U);for(var W=[],H=B.collides(z,U),Z=0;Z<H.length;Z++){var q=H[Z];q.bodyA===z?W.push(q.bodyB):W.push(q.bodyA)}return W},overlap:function(z,U,W,H,Z){W===void 0&&(W=null),H===void 0&&(H=null),Z===void 0&&(Z=W),Array.isArray(z)||(z=[z]),z=this.getMatterBodies(z),U=this.getMatterBodies(U);for(var q=!1,_=0;_<z.length;_++)for(var nt=z[_],rt=B.collides(nt,U),at=0;at<rt.length;at++){var vt=rt[at],ut=vt.bodyA.id===nt.id?vt.bodyB:vt.bodyA;if(!H||H.call(Z,nt,ut,vt)){if(q=!0,W)W.call(Z,nt,ut,vt);else if(!H)return!0}}return q},setCollisionCategory:function(z,U){return z=this.getMatterBodies(z),z.forEach(function(W){W.collisionFilter.category=U}),this},setCollisionGroup:function(z,U){return z=this.getMatterBodies(z),z.forEach(function(W){W.collisionFilter.group=U}),this},setCollidesWith:function(z,U){z=this.getMatterBodies(z);var W=0;if(!Array.isArray(U))W=U;else for(var H=0;H<U.length;H++)W|=U[H];return z.forEach(function(Z){Z.collisionFilter.mask=W}),this},getMatterBodies:function(z){if(!z)return this.world.getAllBodies();Array.isArray(z)||(z=[z]);for(var U=[],W=0;W<z.length;W++){var H=z[W].hasOwnProperty("body")?z[W].body:z[W];U.push(H)}return U},setVelocity:function(z,U,W){z=this.getMatterBodies(z);var H=this._tempVec2;return H.x=U,H.y=W,z.forEach(function(Z){o.setVelocity(Z,H)}),this},setVelocityX:function(z,U){z=this.getMatterBodies(z);var W=this._tempVec2;return W.x=U,z.forEach(function(H){W.y=H.velocity.y,o.setVelocity(H,W)}),this},setVelocityY:function(z,U){z=this.getMatterBodies(z);var W=this._tempVec2;return W.y=U,z.forEach(function(H){W.x=H.velocity.x,o.setVelocity(H,W)}),this},setAngularVelocity:function(z,U){return z=this.getMatterBodies(z),z.forEach(function(W){o.setAngularVelocity(W,U)}),this},applyForce:function(z,U){z=this.getMatterBodies(z);var W=this._tempVec2;return z.forEach(function(H){W.x=H.position.x,W.y=H.position.y,o.applyForce(H,W,U)}),this},applyForceFromPosition:function(z,U,W,H){z=this.getMatterBodies(z);var Z=this._tempVec2;return z.forEach(function(q){H===void 0&&(H=q.angle),Z.x=W*Math.cos(H),Z.y=W*Math.sin(H),o.applyForce(q,U,Z)}),this},applyForceFromAngle:function(z,U,W){z=this.getMatterBodies(z);var H=this._tempVec2;return z.forEach(function(Z){W===void 0&&(W=Z.angle),H.x=U*Math.cos(W),H.y=U*Math.sin(W),o.applyForce(Z,{x:Z.position.x,y:Z.position.y},H)}),this},getConstraintLength:function(z){var U=z.pointA.x,W=z.pointA.y,H=z.pointB.x,Z=z.pointB.y;return z.bodyA&&(U+=z.bodyA.position.x,W+=z.bodyA.position.y),z.bodyB&&(H+=z.bodyB.position.x,Z+=z.bodyB.position.y),g(U,W,H,Z)},alignBody:function(z,U,W,H){z=z.hasOwnProperty("body")?z.body:z;var Z;switch(H){case n.TOP_LEFT:case n.LEFT_TOP:Z=this.bodyBounds.getTopLeft(z,U,W);break;case n.TOP_CENTER:Z=this.bodyBounds.getTopCenter(z,U,W);break;case n.TOP_RIGHT:case n.RIGHT_TOP:Z=this.bodyBounds.getTopRight(z,U,W);break;case n.LEFT_CENTER:Z=this.bodyBounds.getLeftCenter(z,U,W);break;case n.CENTER:Z=this.bodyBounds.getCenter(z,U,W);break;case n.RIGHT_CENTER:Z=this.bodyBounds.getRightCenter(z,U,W);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:Z=this.bodyBounds.getBottomLeft(z,U,W);break;case n.BOTTOM_CENTER:Z=this.bodyBounds.getBottomCenter(z,U,W);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:Z=this.bodyBounds.getBottomRight(z,U,W);break}return Z&&o.setPosition(z,Z),this},shutdown:function(){var z=this.systems.events;this.world&&(z.off(X.UPDATE,this.world.update,this.world),z.off(X.POST_UPDATE,this.world.postUpdate,this.world)),z.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});D.register("MatterPhysics",N,"matterPhysics"),e.exports=N},function(e,d,t){var n=t(594),u={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Body.create",function(){u.Body.init(this)}),s.before("Engine.update",function(o){u.Engine.update(o)})},Body:{init:function(s){s.plugin.attractors=s.plugin.attractors||[]}},Engine:{update:function(s){for(var o=n.Composite.allBodies(s.world),h=0;h<o.length;h++){var a=o[h],l=a.plugin.attractors;if(l&&l.length>0)for(var c=0;c<o.length;c++){var f=o[c];if(h!==c)for(var v=0;v<l.length;v++){var p=l[v],g=p;n.Common.isFunction(p)&&(g=p(a,f)),g&&n.Body.applyForce(f,f.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(s,o){var h=n.Vector.sub(o.position,s.position),a=n.Vector.magnitudeSquared(h)||1e-4,l=n.Vector.normalise(h),c=-u.Attractors.gravityConstant*(s.mass*o.mass/a),f=n.Vector.mult(l,c);n.Body.applyForce(s,s.position,n.Vector.neg(f)),n.Body.applyForce(o,o.position,f)}}};e.exports=u},function(e,d){var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.create",function(){n.Events.on(this,"collisionStart",function(u){u.pairs.map(function(s){var o=s.bodyA,h=s.bodyB;o.gameObject&&o.gameObject.emit("collide",o,h,s),h.gameObject&&h.gameObject.emit("collide",h,o,s),n.Events.trigger(o,"onCollide",{pair:s}),n.Events.trigger(h,"onCollide",{pair:s}),o.onCollideCallback&&o.onCollideCallback(s),h.onCollideCallback&&h.onCollideCallback(s),o.onCollideWith[h.id]&&o.onCollideWith[h.id](h,s),h.onCollideWith[o.id]&&h.onCollideWith[o.id](o,s)})}),n.Events.on(this,"collisionActive",function(u){u.pairs.map(function(s){var o=s.bodyA,h=s.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,h,s),h.gameObject&&h.gameObject.emit("collideActive",h,o,s),n.Events.trigger(o,"onCollideActive",{pair:s}),n.Events.trigger(h,"onCollideActive",{pair:s}),o.onCollideActiveCallback&&o.onCollideActiveCallback(s),h.onCollideActiveCallback&&h.onCollideActiveCallback(s)})}),n.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(s){var o=s.bodyA,h=s.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,h,s),h.gameObject&&h.gameObject.emit("collideEnd",h,o,s),n.Events.trigger(o,"onCollideEnd",{pair:s}),n.Events.trigger(h,"onCollideEnd",{pair:s}),o.onCollideEndCallback&&o.onCollideEndCallback(s),h.onCollideEndCallback&&h.onCollideEndCallback(s)})})})}};e.exports=t},function(e,d,t){var n=t(594),u={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.update",function(){u.Engine.update(this)})},Engine:{update:function(s){for(var o=s.world,h=n.Composite.allBodies(o),a=n.Composite.allComposites(o),l=0;l<h.length;l+=1){var c=h[l];c.plugin.wrap&&u.Body.wrap(c,c.plugin.wrap)}for(l=0;l<a.length;l+=1){var f=a[l];f.plugin.wrap&&u.Composite.wrap(f,f.plugin.wrap)}}},Bounds:{wrap:function(s,o){var h=null,a=null;if(typeof o.min.x!="undefined"&&typeof o.max.x!="undefined"&&(s.min.x>o.max.x?h=o.min.x-s.max.x:s.max.x<o.min.x&&(h=o.max.x-s.min.x)),typeof o.min.y!="undefined"&&typeof o.max.y!="undefined"&&(s.min.y>o.max.y?a=o.min.y-s.max.y:s.max.y<o.min.y&&(a=o.max.y-s.min.y)),h!==null||a!==null)return{x:h||0,y:a||0}}},Body:{wrap:function(s,o){var h=u.Bounds.wrap(s.bounds,o);return h&&n.Body.translate(s,h),h}},Composite:{bounds:function(s){for(var o=n.Composite.allBodies(s),h=[],a=0;a<o.length;a+=1){var l=o[a];h.push(l.bounds.min,l.bounds.max)}return n.Bounds.create(h)},wrap:function(s,o){var h=u.Bounds.wrap(u.Composite.bounds(s),o);return h&&n.Composite.translate(s,h),h}}};e.exports=u},function(e,d,t){(function(n){var u=t(33),s=t(17),o={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};o.Sound=t(1492),o=s(!1,o,u),e.exports=o,n.Phaser=o}).call(this,t(600))}])})}),y2=bg(x2),Os=y2;var C2=function(r){return r===void 0&&(r=T2),this.getFrameNameCallback=r,this},T2=function(r,i,e){return e==="__BASE"?`${r},${i}`:`${e}_${r},${i}`},Th=function(r){var i,e,d;if(typeof r!="object"||r===null)return r;i=Array.isArray(r)?[]:{};for(d in r)e=r[d],i[d]=Th(e);return i},S2=function(r,i,e,d){Array.isArray(i)&&(d=e,e=i,i=void 0),i===void 0&&(i="__BASE"),e=Th(e),d=Th(d),this.textureKey=r,this.baseFrameName=i,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=d,this.rows.count=d?d.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var t=this.scene.sys.textures.get(r);if(!t)return this.clear(),this;if(!e||!d)return this.clear(),this;for(var n=t.frames[i],u=n.width,s=0,o=0,h=e.length;o<h;o++)e[o]===void 0?s++:typeof e[o]=="number"?u-=e[o]:u-=e[o].width;for(var a=u/s,l=n.height,c=0,o=0,h=d.length;o<h;o++)d[o]===void 0?c++:typeof d[o]=="number"?l-=d[o]:l-=d[o].width;for(var f=l/c,v,p,g,m,x,y=0,T=0,C=0,S=d.length;C<S;C++){d[C]===void 0&&(d[C]=f),typeof d[C]=="number"&&(d[C]={height:d[C],stretch:C%2}),v=d[C],g=v.height,this.rows.stretch+=v.stretch|0,this.rows.minHeight+=v.stretch>0?0:g,y=0;for(var o=0,E=e.length;o<E;o++){if(e[o]===void 0&&(e[o]=a),typeof e[o]=="number"&&(e[o]={width:e[o],stretch:o%2}),p=e[o],m=p.width,C===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(o,C,i);var M=typeof x;(M==="string"||M==="number")&&t.add(x,0,y+n.cutX,T+n.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},E2=function(){if(this.clear(),this.textureKey===void 0)return this;var r=this.scene.sys.textures.get(this.textureKey);if(!r)return this;var i=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,d=this.width-i,t=this.height-e,n=d>=0?this.maxFixedPartScaleX:this.width/i,u=t>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var s=Math.min(n,u);if(n>s){var o=(n-s)*i;d>=0?d+=o:d=o,n=s}if(u>s){var h=(u-s)*e;t>=0?t+=h:t=h,u=s}}this.columns.scale=n,this.rows.scale=u;var a;d>0?a=this.columns.stretch>0?d/this.columns.stretch:0:a=0;var l;t>0?l=this.rows.stretch>0?t/this.rows.stretch:0:l=0;for(var c,f,v,p,g,m=0,x=0,y,T=0,C=this.rows.count;T<C;T++){v=this.rows.data[T],g=v.stretch===0?v.height*u:l*v.stretch,m=0;for(var S=0,E=this.columns.count;S<E;S++)f=this.columns.data[S],p=f.stretch===0?f.width*n:a*f.stretch,c=this.getFrameNameCallback(S,T,this.baseFrameName),r.has(c)&&p>0&&g>0&&(v.stretch===0&&f.stretch===0||this.getStretchMode(S,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,c,m,x,p,g):this._drawTileSprite(this.textureKey,c,m,x,p,g)),m+=p;x+=g}},P2=Phaser.Utils.Objects.IsPlainObject,zg=Phaser.Utils.Objects.GetValue,M2=function(r){return P2(r)?(this.stretchMode.edge=Af(zg(r,"edge",0)),this.stretchMode.internal=Af(zg(r,"internal",0))):(r=Af(r),this.stretchMode.edge=r,this.stretchMode.internal=r),this},Af=function(r){return typeof r=="string"&&(r=A2[r]),r},A2={scale:0,repeat:1},R2=function(r,i){return r===0||r===this.columns.count-1||i===0||i===this.rows.count-1},O2=function(r,i){return R2.call(this,r,i)?this.stretchMode.edge:this.stretchMode.internal},L2=function(r){return r==null&&(r=!0),this.preserveRatio=r,this},F2=function(r,i){return i===void 0&&(i=r),this.maxFixedPartScaleX=r,this.maxFixedPartScaleY=i,this},_e=function(){},I2={_drawImage:_e,_drawTileSprite:_e,setGetFrameNameCallback:C2,setTexture:S2,updateTexture:E2,setStretchMode:M2,getStretchMode:O2,setPreserveRatio:L2,setMaxFixedPartScale:F2},la=Phaser.Utils.Objects.IsPlainObject,kt=Phaser.Utils.Objects.GetValue,Yg=function(r,i){class e extends r{constructor(t,n,u,s,o,h,a,l,c,f){la(n)?(f=n,n=kt(f,"x",0),u=kt(f,"y",0),s=kt(f,"width",1),o=kt(f,"height",1),h=kt(f,"key",void 0),a=kt(f,"baseFrame",void 0),l=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):la(s)?(f=s,s=kt(f,"width",1),o=kt(f,"height",1),h=kt(f,"key",void 0),a=kt(f,"baseFrame",void 0),l=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):la(h)?(f=h,h=kt(f,"key",void 0),a=kt(f,"baseFrame",void 0),l=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):la(a)?(f=a,a=kt(f,"baseFrame",void 0),l=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):Array.isArray(a)?(f=c,c=l,l=a,a=kt(f,"baseFrame",void 0)):la(l)&&(f=l,l=kt(f,"columns",void 0),c=kt(f,"rows",void 0)),super(t),this.type=i,this.setPosition(n,u).setSize(s,o).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(kt(f,"getFrameNameCallback",void 0)),this.setStretchMode(kt(f,"stretchMode",0)),this.setPreserveRatio(kt(f,"preserveRatio",!0));var v=kt(f,"maxFixedPartScale",1),p=kt(f,"maxFixedPartScaleX",v),g=kt(f,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(h,a,l,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(t,n){return this.width===t&&this.height===n?this:(super.resize(t,n),this.updateTexture(),this)}}return Object.assign(e.prototype,I2),e},Ug=function(r,i,e){return e===void 0&&(e="image"),r[i]||(r[i]=r.scene.make[e]({add:!1,origin:{x:0,y:0}}),r.once("destroy",function(){r[i]&&(r[i].destroy(),r[i]=void 0)})),r[i]},w2=function(r,i,e,d,t,n){var u=Ug(this,"_image","image").setTexture(r,i).setDisplaySize(t,n);this.draw(u,e,d)},D2=function(r,i,e,d,t,n){var u=Ug(this,"_tileSprite","tileSprite").setTexture(r,i).setSize(t,n);this.draw(u,e,d)},B2={_drawImage:w2,_drawTileSprite:D2},G2=Phaser.GameObjects.RenderTexture,or=class extends Yg(G2,"rexNinePatch"){};Object.assign(or.prototype,B2);var N2=Phaser.GameObjects.GetCalcMatrix,b2=function(r,i,e,d){var t=i.getRenderList();if(t.length!==0){e.addToRenderList(i);var n=r.pipelines.set(i.pipeline),u=i.frame.glTexture,s=n.setGameObject(i),o=e.roundPixels,h=N2(i,e,d),a=n.calcMatrix.copyFrom(h.calc),l=i._displayOriginX,c=i._displayOriginY,f=e.alpha*i.alpha;r.pipelines.preBatch(i);for(var v=0,p=t.length;v<p;v++)t[v].webglRender(n,a,f,l,c,u,s,o);r.pipelines.postBatch(i)}},z2=Phaser.Renderer.Canvas.SetTransform,Y2=function(r,i,e,d){var t=r.currentContext,n=i.getRenderList();if(!(n.length===0||!z2(r,t,i,e,d))){e.addToRenderList(i);var u=e.roundPixels,s=-i._displayOriginX,o=-i._displayOriginY;t.translate(s,o);for(var h=0,a=n.length;h<a;h++)n[h].canvasRender(t,s,o,u);t.restore()}},U2={renderWebGL:b2,renderCanvas:Y2},Vg=function(r,i){return this.texture=this.scene.sys.textures.get(r),this.frame=this.texture.get(i),this},Wg=function(r,i){if(this.width===r&&this.height===i)return this;this.width=r,this.height=i,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=r,e.hitArea.height=i),this},V2=function(r){return this.lastAppendedChildren.length=0,Array.isArray(r)?(this.children.add(r),this.lastAppendedChildren.push(...r)):(this.children.add(r),this.lastAppendedChildren.push(r)),this},W2=Phaser.Utils.Array.Remove,X2=function(r){return this.poolManager&&this.poolManager.free(r),W2(this.children.list,r),this.lastAppendedChildren.length=0,this.dirty=!0,this},Xg=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},H2=function(){return this.lastAppendedChildren},$2=function(){return this.children.list},K2={setTint(r){return this.tint=r,this.tintFill=!1,this},setTintFill(r){return this.tint=r,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},Hg={setTexture:Vg,resize:Wg,setSize:Wg,addChild:V2,removeChild:X2,removeChildren:Xg,clear:Xg,getLastAppendedChildren:H2,getChildren:$2};Object.assign(Hg,K2);var ln=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(i){return this.items.push(i),this}pushMultiple(i){return this.items.push.apply(this.items,i),i.length=0,this}clear(){return this.items.length=0,this}},Z2=Phaser.Utils.Objects.GetValue,J2={},$g=class{constructor(i){this.pools=Z2(i,"pools",J2)}destroy(){this.pools=void 0}free(i){if(!this.pools)return this;var e=i.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new ln),this.pools[e].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var e=0,d=i.length;e<d;e++)this.free(i[e]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}},Q2=Phaser.GameObjects.GameObject,k2=Phaser.Utils.Objects.IsPlainObject,ua=Phaser.Utils.Objects.GetValue,j2=Phaser.Structs.List,q2=Phaser.Utils.Array.StableSort,Rf=class extends Q2{constructor(i,e,d,t,n,u){k2(e)&&(u=e,e=ua(u,"x",0),d=ua(u,"y",0),t=ua(u,"texture"),n=ua(u,"frame")),e===void 0&&(e=0),d===void 0&&(d=0),super(i,"rexBlitter"),this.children=new j2,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var s=ua(u,"reuseBob",!0);this.poolManager=s?new $g(u):void 0,this.setTexture(t,n).setPosition(e,d).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var i=!1,e=this.children.list,d=0,t=e.length;d<t;d++){var n=e[d];_2(n)&&(this.renderList.push(n),i||(i=n.depth!==0))}i&&q2(this.renderList,tL),this.displayListDirty=!1}return this.renderList}},_2=function(r){return r.active&&r.visible&&r.alpha>0},tL=function(r,i){return r._depth-i._depth},$i=Phaser.GameObjects.Components;Phaser.Class.mixin(Rf,[$i.Alpha,$i.BlendMode,$i.ComputedSize,$i.Depth,$i.GetBounds,$i.Mask,$i.Origin,$i.Pipeline,$i.ScrollFactor,$i.Transform,$i.Visible,U2,Hg]);var Kg="image";var Ti=function(r,i,e){if(!r||typeof r=="number")return e;if(r.hasOwnProperty(i))return r[i];if(i.indexOf(".")!==-1){for(var d=i.split("."),t=r,n=e,u=0;u<d.length;u++)if(t.hasOwnProperty(d[u]))n=t[d[u]],t=t[d[u]];else{n=e;break}return n}else return e},_n=function(r){if(typeof r!="object"||r===null)return r;if(Array.isArray(r))r.length=0;else for(var i in r)delete r[i];return r},hr=function(r,i){var e=Array.isArray(r);if(i===void 0?i=e?[]:{}:_n(i),e){i.length=r.length;for(var d=0,t=r.length;d<t;d++)i[d]=r[d]}else for(var n in r)i[n]=r[n];return i},Ch={enableData(){return this.data===void 0&&(this.data={}),this},getData(r,i){return this.enableData(),r===void 0?this.data:Ti(this.data,r,i)},setData(r,i){if(this.enableData(),arguments.length===1){var e=r;for(r in e)this.data[r]=e[r]}else this.data[r]=i;return this},incData(r,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(r,this.getData(r,e)+i),this},mulData(r,i,e){return e===void 0&&(e=0),this.enableData(),this.setData(r,this.getData(r,e)*i),this},clearData(){return this.data&&_n(this.data),this}},Of=class{constructor(i,e){this.type=e,this.data=void 0,this.setParent(i).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(i){return this.parent=i,this}setDisplayListDirty(i){return i&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(i){this.setDisplayListDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}modifyPorperties(i){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Of.prototype,Ch);var eL=Phaser.Math.DegToRad,iL=Phaser.Math.RadToDeg,lr=Phaser.Utils.Objects.GetValue,Zg=class extends Of{get visible(){return this._visible}set visible(i){this.setDisplayListDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDisplayListDirty(!!this._alpha!=!!i),this._alpha=i}setAlpha(i){return this.alpha=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setPosition(i,e){return this.x=i,this.y=e,this}setRotation(i){return this.rotation=i,this}get angle(){return iL(this.rotation)}set angle(i){this.rotation=eL(i)}setAngle(i){return this.angle=i,this}setScaleX(i){return this.scaleX=i,this}get width(){return this._width}set width(i){this._width=i}setWidth(i,e){return e===void 0&&(e=!1),this.width=i,e&&(this.scaleY=this.scaleX),this}setScaleY(i){return this.scaleY=i,this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}get height(){return this._height}set height(i){this._height=i}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(i){this.scaleX=i/this._width}setDisplayWidth(i,e){return e===void 0&&(e=!1),this.displayWidth=i,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(i){this.scaleY=i/this._height}setDisplayHeight(i,e){return e===void 0&&(e=!1),this.displayHeight=i,e&&(this.scaleX=this.scaleY),this}setOriginX(i){return this.originX=i,this._displayOriginX=this.width*i,this}setOriginY(i){return this.originY=i,this._displayOriginY=this.height*i,this}setOrigin(i,e){return e===void 0&&(e=i),this.setOriginX(i).setOriginY(e),this}get depth(){return this._depth}set depth(i){this.setDisplayListDirty(this._depth!=i),this._depth=i}setDepth(i){return i===void 0&&(i=0),this.depth=i,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var e=lr(i,"width",void 0),d=lr(i,"height",void 0),t=lr(i,"scale",void 0),n=lr(i,"scaleX",t),u=lr(i,"scaleY",t);e!==void 0?d===void 0&&u===void 0?this.setWidth(e,!0):this.setWidth(e):n!==void 0?this.setScaleX(n):i.hasOwnProperty("displayWidth")&&this.setDisplayWidth(i.displayWidth),d!==void 0?e===void 0&&n===void 0?this.setHeight(d,!0):this.setHeight(d):u!==void 0?this.setScaleY(u):i.hasOwnProperty("displayHeight")&&this.setDisplayHeight(i.displayHeight);var s=lr(i,"origin",void 0);return s!==void 0?this.setOrigin(s):(i.hasOwnProperty("originX")&&this.setOriginX(i.originX),i.hasOwnProperty("originY")&&this.setOriginY(i.originY)),i.hasOwnProperty("depth")&&this.setDepth(i.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(i,e,d,t,n,u,s,o){}canvasRender(i,e,d,t){}},nL=Phaser.GameObjects.Components.TransformMatrix,sL=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Ki=new nL,rL=function(r,i,e,d,t,n,u,s){var o=this._width,h=this._height,a=o*this.originX,l=h*this.originY,c=this.x-d,f=this.y-t,v=1,p=1;this.flipX&&(c+=o-a*2,v=-1),this.flipY&&(f+=h-l*2,p=-1),Ki.applyITRS(c,f,this.rotation,this.scaleX*v,this.scaleY*p),i.multiply(Ki,Ki);var g=-a,m=-l,x=g+o,y=m+h,T=Ki.getXRound(g,m,s),C=Ki.getXRound(g,y,s),S=Ki.getXRound(x,y,s),E=Ki.getXRound(x,m,s),M=Ki.getYRound(g,m,s),R=Ki.getYRound(g,y,s),L=Ki.getYRound(x,y,s),O=Ki.getYRound(x,m,s),F=this.frame.u0,D=this.frame.v0,B=this.frame.u1,b=this.frame.v1,V=sL(this.tint,this.alpha*e);r.batchQuad(this.parent,T,M,C,R,S,L,E,O,F,D,B,b,V,V,V,V,this.tintFill,n,u)},aL=function(r,i,e,d){r.save();var t=this._width,n=this._height,u=t*this.originX,s=n*this.originY,o=this.x-u,h=this.y-s,a=1,l=1;this.flipX&&(o+=t,a=-1),this.flipY&&(h+=n,l=-1),d&&(o=Math.round(o),h=Math.round(h)),r.translate(o,h),r.rotate(this.rotation),r.scale(this.scaleX*a,this.scaleY*l);var c=this.frame;r.drawImage(c.source.image,c.cutX,c.cutY,t,n,0,0,t,n),r.restore()},oL=Phaser.Utils.Objects.IsPlainObject,Lf=class extends Zg{constructor(i,e){super(i,Kg);this.setFrame(e)}get width(){return this._width}set width(i){}get height(){return this._height}set height(i){}setFrame(i){return arguments.length>0&&!oL(i)&&(i=this.parent.texture.get(i)),this.frame=i,this._width=i?i.width:0,this._height=i?i.height:0,this}setFlipX(i){return i===void 0&&(i=!0),this.flipX=i,this}setFlipY(i){return i===void 0&&(i=!0),this.flipY=i,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(i){this._tint=i}setTint(i){return this.tint=i,this.tintFill=!1,this}setTintFill(i){return this.tint=i,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(i){this._tintFill=i}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(i){return i?(i.hasOwnProperty("width")&&(i.displayWidth=i.width,delete i.width),i.hasOwnProperty("height")&&(i.displayHeight=i.height,delete i.height),i.hasOwnProperty("frame")&&this.setFrame(i.frame),super.modifyPorperties(i),i.hasOwnProperty("flipX")&&this.setFlipX(i.flipX),i.hasOwnProperty("flipY")&&this.setFlipY(i.flipY),i.hasOwnProperty("tint")&&this.setTint(i.tint),i.hasOwnProperty("tintFill")&&this.setTintFill(i.tintFill),this):this}},hL={webglRender:rL,canvasRender:aL};Object.assign(Lf.prototype,hL);var Jg=function(r,i){typeof i=="string"&&(i={frame:i});var e=r.poolManager?r.poolManager.allocate(Kg):null;return e===null?e=new Lf(r):e.setParent(r).setActive(),e.modifyPorperties(i),r.addChild(e),e},lL=function(r,i,e,d,t,n){Jg(this,{frame:i,x:e,y:d,width:t,height:n})},uL=function(r,i,e,d,t,n){var u=this.texture.get(i),s=u.width,o=u.height,h=Math.floor(t/s),a=Math.floor(n/o);e+=(t-h*s)/2,d+=(n-a*o)/2;for(var l=0;l<h;l++)for(var c=0;c<a;c++)Jg(this,{frame:i,x:e+l*s,y:d+c*o})},fL={_drawImage:lL,_drawTileSprite:uL},ur=class extends Yg(Rf,"rexNinePatch2"){setTexture(i,e,d,t){return Vg.call(this,i,"__BASE"),this.columns?(super.setTexture(i,e,d,t),this):this}};Object.assign(ur.prototype,fL);var ts=Phaser.Utils.Objects.GetValue,Ff=class{constructor(i,e,d,t,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(i,e,d,t,n)}setTo(i,e,d,t,n){return this.setPosition(i,e),this.setRadius(n),this.setSize(d,t),this}setPosition(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.x=i,this.y=e,this}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setSize(i,e){return this.width=i,this.height=e,this}get minWidth(){var i=this.cornerRadius;return Math.max(i.tl.x+i.tr.x,i.bl.x+i.br.x)}get minHeight(){var i=this.cornerRadius;return Math.max(i.tl.y+i.bl.y,i.tr.y+i.br.y)}get width(){return this._width}set width(i){i==null&&(i=0),this._width=Math.max(i,this.minWidth)}get height(){return this._height}set height(i){i==null&&(i=0),this._height=Math.max(i,this.minHeight)}get radius(){var i=this.cornerRadius;return Math.max(i.tl.x,i.tl.y,i.tr.x,i.tr.y,i.bl.x,i.bl.y,i.br.x,i.br.y)}set radius(i){var e,d;typeof i=="number"?(e=i,d=i):(e=ts(i,"x",0),d=ts(i,"y",0));var t=this.cornerRadius;t.tl=Sh(ts(i,"tl",void 0),e,d),t.tr=Sh(ts(i,"tr",void 0),e,d),t.bl=Sh(ts(i,"bl",void 0),e,d),t.br=Sh(ts(i,"br",void 0),e,d)}get radiusTL(){var i=this.cornerRadius.tl;return Math.max(i.x,i.y)}set radiusTL(i){Eh(this.cornerRadius.tl,i)}get radiusTR(){var i=this.cornerRadius.tr;return Math.max(i.x,i.y)}set radiusTR(i){Eh(this.cornerRadius.tr,i)}get radiusBL(){var i=this.cornerRadius.bl;return Math.max(i.x,i.y)}set radiusBL(i){Eh(this.cornerRadius.bl,i)}get radiusBR(){var i=this.cornerRadius.br;return Math.max(i.x,i.y)}set radiusBR(i){Eh(this.cornerRadius.br,i)}},Sh=function(r,i,e){return r===void 0?{x:i,y:e}:typeof r=="number"?{x:r,y:r}:r},Eh=function(r,i){typeof i=="number"?(r.x=i,r.y=i):(r.x=ts(i,"x",0),r.y=ts(i,"y",0))},fr=function(r,i,e){var d=e.length;if(d>=2){var t=e[d-2],n=e[d-1];if(r===t&&i===n)return e}return e.push(r,i),e},Qg=Phaser.Math.DegToRad,dr=function(r,i,e,d,t,n,u,s,o){u&&n>t?n-=360:!u&&n<t&&(n+=360);var h=n-t,a=Qg(h)/s;t=Qg(t);for(var l=0;l<=s;l++){var c=t+a*l,f=r+e*Math.cos(c),v=i+d*Math.sin(c);fr(f,v,o)}return o},dL=Phaser.Renderer.WebGL.Utils,kg=function(r,i,e,d,t,n){for(var u=dL.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d),s=e.pathData,o=e.pathIndexes,h=0;h<o.length;h+=3){var a=o[h]*2,l=o[h+1]*2,c=o[h+2]*2,f=s[a+0]-t,v=s[a+1]-n,p=s[l+0]-t,g=s[l+1]-n,m=s[c+0]-t,x=s[c+1]-n,y=i.getX(f,v),T=i.getY(f,v),C=i.getX(p,g),S=i.getY(p,g),E=i.getX(m,x),M=i.getY(m,x);r.batchTri(e,y,T,C,S,E,M,0,0,1,1,u,u,u,2)}},vL=Phaser.Renderer.WebGL.Utils,Ph=function(r,i,e,d,t){var n=r.strokeTint,u=vL.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);n.TL=u,n.TR=u,n.BL=u,n.BR=u;var s=i.pathData,o=s.length-1,h=i.lineWidth,a=h/2,l=s[0]-d,c=s[1]-t;i.closePath||(o-=2);for(var f=2;f<o;f+=2){var v=s[f]-d,p=s[f+1]-t;r.batchLine(l,c,v,p,a,a,h,f-2,i.closePath?f===o-1:!1),l=v,c=p}},cL=Phaser.GameObjects.GetCalcMatrix,pL=function(r,i,e,d){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=r.pipelines.set(i.pipeline),n=cL(i,e,d),u=t.calcMatrix.copyFrom(n.calc),s=i._displayOriginX,o=i._displayOriginY,h=e.alpha*i.alpha;r.pipelines.preBatch(i),i.isFilled&&kg(t,u,i,h,s,o),i.isStroked&&Ph(t,i,h,s,o),r.pipelines.postBatch(i)},fa=function(r,i,e,d){var t=e||i.fillColor,n=d||i.fillAlpha,u=(t&16711680)>>>16,s=(t&65280)>>>8,o=t&255;r.fillStyle="rgba("+u+","+s+","+o+","+n+")"},da=function(r,i,e,d){var t=e||i.strokeColor,n=d||i.strokeAlpha,u=(t&16711680)>>>16,s=(t&65280)>>>8,o=t&255;r.strokeStyle="rgba("+u+","+s+","+o+","+n+")",r.lineWidth=i.lineWidth},gL=Phaser.Renderer.Canvas.SetTransform,mL=function(r,i,e,d){i.dirty&&(i.updateData(),i.dirty=!1),e.addToRenderList(i);var t=r.currentContext;if(gL(r,t,i,e,d)){var n=i._displayOriginX,u=i._displayOriginY,s=i.pathData,o=s.length-1,h=s[0]-n,a=s[1]-u;t.beginPath(),t.moveTo(h,a),i.closePath||(o-=2);for(var l=2;l<o;l+=2){var c=s[l]-n,f=s[l+1]-u;t.lineTo(c,f)}t.closePath(),i.isFilled&&(fa(t,i),t.fill()),i.isStroked&&(da(t,i),t.stroke()),t.restore()}},xL={renderWebGL:pL,renderCanvas:mL},yL=Phaser.GameObjects.Shape,jg=Phaser.Utils.Objects.GetValue,TL=Phaser.Geom.Polygon.Earcut,Zi=class extends yL{constructor(i,e,d,t,n,u,s,o){e===void 0&&(e=0),d===void 0&&(d=0);var h=new Ff;super(i,"rexRoundRectangleShape",h);var a=jg(u,"radius",u);h.setTo(0,0,t,n,a);var l=jg(u,"iteration",void 0);this.setIteration(l),this.setPosition(e,d),s!==void 0&&this.setFillStyle(s,o),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var i=this.geom,e=this.pathData;e.length=0;var d=i.cornerRadius,t,n=this.iteration+1;if(t=d.br,Mh(t)){var u=i.width-t.x,s=i.height-t.y;dr(u,s,t.x,t.y,0,90,!1,n,e)}else fr(i.width,i.height,e);if(t=d.bl,Mh(t)){var u=t.x,s=i.height-t.y;dr(u,s,t.x,t.y,90,180,!1,n,e)}else fr(0,i.height,e);if(t=d.tl,Mh(t)){var u=t.x,s=t.y;dr(u,s,t.x,t.y,180,270,!1,n,e)}else fr(0,0,e);if(t=d.tr,Mh(t)){var u=i.width-t.x,s=t.y;dr(u,s,t.x,t.y,270,360,!1,n,e)}else fr(i.width,0,e);return e.push(e[0],e[1]),this.pathIndexes=TL(e),this}get width(){return this.geom.width}set width(i){this.resize(i,this.height)}get height(){return this.geom.height}set height(i){this.resize(this.width,i)}setSize(i,e){if(e===void 0&&(e=i),this.geom.width===i&&this.geom.height===e)return this;this.geom.setSize(i,e),this.updateDisplayOrigin(),this.dirty=!0;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=i,d.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}get iteration(){return this._iteration}set iteration(i){if(this._iteration===void 0){this._iteration=i;return}this._iteration!==i&&(this._iteration=i,this.dirty=!0)}setIteration(i){return i===void 0&&(i=6),this.iteration=i,this}get radius(){return this.geom.radius}set radius(i){this.geom.setRadius(i),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(i){this.geom.radiusTL=i,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(i){this.geom.radiusTR=i,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(i){this.geom.radiusBL=i,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(i){this.geom.radiusBR=i,this.dirty=!0}setRadius(i){return i===void 0&&(i=0),this.radius=i,this}setRadiusTL(i){return i===void 0&&(i=0),this.radiusTL=i,this}setRadiusTR(i){return i===void 0&&(i=0),this.radiusTR=i,this}setRadiusBL(i){return i===void 0&&(i=0),this.radiuBL=i,this}setRadiusBR(i){return i===void 0&&(i=0),this.radiusBR=i,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(i){this.radius=i}setCornerRadius(i){return this.setRadius(i)}},Mh=function(r){return r.x!==0&&r.y!==0};Object.assign(Zi.prototype,xL);var CL=Phaser.Renderer.WebGL.Utils,SL=function(r,i,e,d){if(i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,n=t.width,u=t.height,s=CL.getTintAppendFloatAlpha,o=r.pipelines.set(i.pipeline,i),h=o.setTexture2D(t.glTexture,i);r.pipelines.preBatch(i),o.batchTexture(i,t.glTexture,n,u,i.x,i.y,n/i.resolution,u/i.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,n,u,s(i.tintTopLeft,e.alpha*i._alphaTL),s(i.tintTopRight,e.alpha*i._alphaTR),s(i.tintBottomLeft,e.alpha*i._alphaBL),s(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,d,!1,h),r.pipelines.postBatch(i)}},EL=function(r,i,e,d){i.dirty&&(i.updateTexture(),i.dirty=!1),!(i.width===0||i.height===0)&&(e.addToRenderList(i),r.batchSprite(i,i.frame,e,d))},PL={renderWebGL:SL,renderCanvas:EL},ML=Phaser.Display.Color,AL={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(r){return this.context.fillStyle=r,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(r,i){var e=this,d=new Image;return d.onload=function(){e.width!==d.width||e.height!==d.height?e.resize(d.width,d.height):e.clear(),e.context.drawImage(d,0,0),e.updateTexture(),i&&i(),d.onload=null,d.src="",d.remove()},d.src=r,this},loadFromURLPromise(r){var i=this;return new Promise(function(e,d){i.loadFromURL(r,e)})},getDataURL(r,i){return this.canvas.toDataURL(r,i)},getPixel(r,i,e){e===void 0&&(e=new ML);var d=this.context.getImageData(r,i,1,1);return e.setTo(d.data[0],d.data[1],d.data[2],d.data[3]),e},setPixel(r,i,e,d,t,n){if(typeof e!="number"){var u=e;e=u.red,d=u.green,t=u.blue,n=u.alpha}n===void 0&&(n=e!==0||d!==0||t!==0?255:0);var s=this.context.createImageData(1,1);return s.data[0]=e,s.data[1]=d,s.data[2]=t,s.data[3]=n,this.context.putImageData(s,r,i),this.dirty=!0,this}},qg=function(r,i,e,d,t,n,u){var s=r.sys.textures,o=r.renderer;d===void 0&&(d=0),t===void 0&&(t=0),n===void 0&&(n=i.width),u===void 0&&(u=i.height);var h;s.exists(e)?h=s.get(e):h=s.createCanvas(e,n,u);var a=h.getSourceImage();a.width!==n&&(a.width=n),a.height!==u&&(a.height=u);var l=a.getContext("2d");l.clearRect(0,0,n,u),l.drawImage(i,d,t,n,u),o.gl&&h&&o.canvasToTexture(a,h.source[0].glTexture,!0,0)},RL={updateTexture(r,i){r&&(i?r.call(i,this.canvas,this.context):r(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(r,i,e,d,t){var n=this.canvas;return d===void 0?d=n.width:d*=this.resolution,t===void 0?t=n.height:t*=this.resolution,qg(this.scene,n,r,i,e,d,t),this},loadTexture(r,i){var e=this.scene.sys.textures.getFrame(r,i);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.setSize(e.cutWidth,e.cutHeight):this.clear(),this.context.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}},_g=Phaser.Display.Canvas.CanvasPool,OL=Phaser.GameObjects.GameObject,Ji=class extends OL{constructor(i,e,d,t,n){e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=1),n===void 0&&(n=1),super(i,"rexCanvas"),this.renderer=i.sys.game.renderer,this.resolution=1,this._width=t,this._height=n,t=Math.max(Math.ceil(t*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=_g.create(this,t,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,d),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),_g.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setSize(i,e){return this._width===i&&this._height===e?this:(this._width=i,this._height=e,this.updateDisplayOrigin(),i=Math.max(Math.ceil(i*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=i,this.canvas.height=e,this.frame.setSize(i,e),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(i){this.scaleX=i/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(i){this.scaleY=i/this._height}setDisplaySize(i,e){return this.displayWidth=i,this.displayHeight=e,this}getCanvas(i){return i||(this.dirty=!0),this.canvas}getContext(i){return i||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(i,e){return this.setSize(i,e),this}},Ci=Phaser.GameObjects.Components;Phaser.Class.mixin(Ji,[Ci.Alpha,Ci.BlendMode,Ci.Crop,Ci.Depth,Ci.Flip,Ci.GetBounds,Ci.Mask,Ci.Origin,Ci.Pipeline,Ci.ScrollFactor,Ci.Tint,Ci.Transform,Ci.Visible,PL,AL,RL]);var LL=Phaser.Utils.String.Pad,Yt=function(r,i,e){if(r==null)return r;switch(typeof r){case"string":return r;case"number":return`#${LL(Math.floor(r).toString(16),6,"0",1)}`;case"function":return r(i,e);case"object":return r.hasOwnProperty("r")?r.hasOwnProperty("a")?`rgba(${r.r},${r.g},${r.b},${r.a})`:`rgb(${r.r},${r.g},${r.b})`:r.hasOwnProperty("h")?r.hasOwnProperty("a")?`hsla(${r.h},${r.s},${r.l},${r.a})`:`hsl(${r.h},${r.s},${r.l})`:r;default:return r}},Ah=Phaser.Math.DegToRad,t0=Ah(0),e0=Ah(90),i0=Ah(180),n0=Ah(270),s0=function(r,i,e,d,t,n,u){var s=new Ff(i,e,d,t,n),o=s.minWidth,h=s.minHeight,a=d>=o?1:d/o,l=t>=h?1:t/h,c=s.cornerRadius,f,v,p,g,m;r.save(),r.beginPath(),r.translate(i,e),f=c.br,v=f.x*a,p=f.y*l,g=d-v,m=t-p,r.moveTo(d,m),v>0&&p>0?Rh(r,g,m,v,p,t0,e0,u):(r.lineTo(d,t),r.lineTo(g,t)),f=c.bl,v=f.x*a,p=f.y*l,g=v,m=t-p,r.lineTo(v,t),v>0&&p>0?Rh(r,g,m,v,p,e0,i0,u):(r.lineTo(0,t),r.lineTo(0,m)),f=c.tl,v=f.x*a,p=f.y*l,g=v,m=p,r.lineTo(0,m),v>0&&p>0?Rh(r,g,m,v,p,i0,n0,u):(r.lineTo(0,0),r.lineTo(g,0)),f=c.tr,v=f.x*a,p=f.y*l,g=d-v,m=p,r.lineTo(g,0),v>0&&p>0?Rh(r,g,m,v,p,n0,t0,u):(r.lineTo(d,0),r.lineTo(d,m)),r.closePath(),r.restore()},Rh=function(r,i,e,d,t,n,u,s){if(s==null)r.ellipse(i,e,d,t,0,n,u);else{s+=1;for(var o,h,a,l=(u-n)/s,c=0;c<=s;c++)a=n+l*c,o=i+d*Math.cos(a),h=e+t*Math.sin(a),r.lineTo(o,h)}},FL=function(r,i,e,d,t,n,u,s,o,h,a,l,c){if(s0(i,e,d,t,n,u,c),s!=null){if(a!=null){var f;l?f=i.createLinearGradient(0,0,t,0):f=i.createLinearGradient(0,0,0,n),f.addColorStop(0,s),f.addColorStop(1,a),s=f}i.fillStyle=s,i.fill()}o!=null&&h>0&&(i.strokeStyle=o,i.lineWidth=h,i.stroke())},If=function(r,i,e,d,t,n,u,s){if(!(i==null&&e==null)){var o=r.canvas.width,h=r.canvas.height;e==null&&(d=0);var a=d/2;o-=d,h-=d,FL(r.canvas,r.context,a,a,o,h,t,i,e,d,n,u,s)}},IL=function(){If(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)},r0=Phaser.Utils.Objects.GetValue,Oh=class extends Ji{constructor(i,e,d,t,n,u,s,o,h,a,l){super(i,e,d,t,n);this.type="rexRoundRectangleCanvas";var c=r0(u,"radius",u),f=r0(u,"iteration",void 0);this.setRadius(c),this.setIteration(f),this.setFillStyle(s,a,l),this.setStrokeStyle(o,h)}get radius(){return this._radius}set radius(i){this.dirty|=this._radius!=i,this._radius=i}setRadius(i){return this.radius=i,this}get iteration(){return this._iteration}set iteration(i){this.dirty|=this._iteration!=i,this._iteration=i}setIteration(i){return this.iteration=i,this}get fillStyle(){return this._fillStyle}set fillStyle(i){i=Yt(i,this.canvas,this.context),this.dirty|=this._fillStyle!=i,this._fillStyle=i}get fillColor2(){return this._fillColor2}set fillColor2(i){i=Yt(i,this.canvas,this.context),this.dirty|=this._fillColor2!=i,this._fillColor2=i}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(i){this.dirty|=this._isHorizontalGradient!=i,this._isHorizontalGradient=i}setFillStyle(i,e,d){return d===void 0&&(d=!0),this.fillStyle=i,this.fillColor2=e,this.isHorizontalGradient=d,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(i){i=Yt(i,this.canvas,this.context),this.dirty|=this._strokeStyle!=i,this._strokeStyle=i}get lineWidth(){return this._lineWidth}set lineWidth(i){this.dirty|=this._lineWidth!=i,this._lineWidth=i}setStrokeStyle(i,e){return this.strokeStyle=i,this.lineWidth=e,this}updateTexture(){return this.clear(),IL.call(this),super.updateTexture(),this}};var wL=Phaser.Renderer.WebGL.Utils,DL=function(r,i,e,d){if(!(i.width===0||i.height===0)){e.addToRenderList(i);var t=i.frame,n=t.width,u=t.height,s=wL.getTintAppendFloatAlpha,o=r.pipelines.set(i.pipeline,i),h=o.setTexture2D(t.glTexture,i);r.pipelines.preBatch(i),o.batchTexture(i,t.glTexture,n,u,i.x,i.y,n/i.style.resolution,u/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,n,u,s(i.tintTopLeft,e.alpha*i._alphaTL),s(i.tintTopRight,e.alpha*i._alphaTR),s(i.tintBottomLeft,e.alpha*i._alphaBL),s(i.tintBottomRight,e.alpha*i._alphaBR),i.tintFill,0,0,e,d,!1,h),r.pipelines.postBatch(i)}};var BL=function(r,i,e,d){i.width===0||i.height===0||(e.addToRenderList(i),r.batchSprite(i,i.frame,e,d))},GL={renderWebGL:DL,renderCanvas:BL};var Lh=Phaser.Display.Canvas.CanvasPool,a0=function(r){var i=Lh.create(this),e=i.getContext("2d");r.syncFont(i,e);var d=e.measureText(r.testString);if("actualBoundingBoxAscent"in d){var t=d.actualBoundingBoxAscent,n=d.actualBoundingBoxDescent,h={ascent:t,descent:n,fontSize:t+n};return Lh.remove(i),h}var u=Math.ceil(d.width*r.baselineX),s=u,o=2*s;s=s*r.baselineY|0,i.width=u,i.height=o,e.fillStyle="#f00",e.fillRect(0,0,u,o),e.font=r._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(r.testString,0,s);var h={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,u,o))return h.ascent=s,h.descent=s+6,h.fontSize=h.ascent+h.descent,Lh.remove(i),h;var a=e.getImageData(0,0,u,o).data,l=a.length,c=u*4,f,v,p=0,g=!1;for(f=0;f<s;f++){for(v=0;v<c;v+=4)if(a[p+v]!==255){g=!0;break}if(!g)p+=c;else break}for(h.ascent=s-f,p=l-c,g=!1,f=o;f>s;f--){for(v=0;v<c;v+=4)if(a[p+v]!==255){g=!0;break}if(!g)p-=c;else break}return h.descent=f-s,h.fontSize=h.ascent+h.descent,Lh.remove(i),h},xe={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/},NL=Phaser.Utils.Objects.GetAdvancedValue,ti=Phaser.Utils.Objects.GetValue,wf={backgroundColor:["backgroundColor",null,Yt],backgroundColor2:["backgroundColor2",null,Yt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Yt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Yt],stroke:["stroke","#fff",Yt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Yt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Yt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]},Fh=class{constructor(i,e){this.parent=i,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0);var d=ti(e,"metrics",!1);d?this.metrics={ascent:ti(d,"ascent",0),descent:ti(d,"descent",0),fontSize:ti(d,"fontSize",0)}:this.metrics=a0(this)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==xe.NO_WRAP&&this.wrapWidth===0}setStyle(i,e,d){if(e===void 0&&(e=!0),d===void 0&&(d=!1),i&&i.hasOwnProperty("wrap")){var t=i.wrap;if(t.hasOwnProperty("mode")){var n=t.mode;typeof n=="string"&&(t.mode=o0[n])}else t.hasOwnProperty("width")&&(t.mode=1)}i&&i.rtl&&d&&!i.hasOwnProperty("halign")&&(i.halign="right"),i&&i.hasOwnProperty("fontSize")&&typeof i.fontSize=="number"&&(i.fontSize=i.fontSize.toString()+"px");for(var u in wf){var s=wf[u],o=s[0],h=d?s[1]:this[u],a=s[2];if(u==="wrapCallback"||u==="wrapCallbackScope")this[u]=ti(i,o,h);else{var l=NL(i,o,h);a&&(l=a(l)),this[u]=l}}var c=ti(i,"font",null);c===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=c;var f=ti(i,"fill",null);f!==null&&(this.color=Yt(f));var v=ti(i,"images",void 0);return v&&this.parent.addImage(v),e?this.update(!0):this.parent}syncFont(i,e){e.font=this._font}syncStyle(i,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(i,e){e?(i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur):(i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowColor=0,i.shadowBlur=0)}update(i){return i&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=a0(this)),this.parent.updateText(i)}buildFont(){var i=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return i!==this._font&&(this._font=i),this}setFont(i){return typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=ti(i,"fontFamily","Courier"),this.fontSize=ti(i,"fontSize","16px"),this.fontStyle=ti(i,"fontStyle","")),this.update(!0)}setFontFamily(i){return this.fontFamily=i,this.update(!0)}setFontStyle(i){return this.fontStyle=i,this.update(!0)}setFontSize(i){return typeof i=="number"&&(i=i.toString()+"px"),this.fontSize=i,this.update(!0)}setTestString(i){return this.testString=i,this.update(!0)}setFixedSize(i,e){return this.fixedWidth=i,this.fixedHeight=e,i&&(this.parent.width=i),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(i){return this.resolution=i,this.update(!1)}setLineSpacing(i){return this.lineSpacing=i,this.update(!1)}setXOffset(i){return this.xOffset=i,this.update(!1)}setBackgroundColor(i,e,d){return d===void 0&&(d=!0),this.backgroundColor=Yt(i,this.canvas,this.context),this.backgroundColor2=Yt(e,this.canvas,this.context),this.backgroundHorizontalGradient=d,this.update(!1)}setBackgroundStrokeColor(i,e){return this.backgroundStrokeColor=Yt(i,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(i,e){return this.backgroundCornerRadius=i,this.backgroundCornerIteration=e,this.update(!1)}setFill(i){return this.color=Yt(i,this.canvas,this.context),this.update(!1)}setColor(i){return this.color=Yt(i,this.canvas,this.context),this.update(!1)}setStroke(i,e){return i===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=Yt(i,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}setShadow(i,e,d,t,n,u){return i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d="#000"),t===void 0&&(t=0),n===void 0&&(n=!1),u===void 0&&(u=!0),this.shadowOffsetX=i,this.shadowOffsetY=e,this.shadowColor=Yt(d,this.canvas,this.context),this.shadowBlur=t,this.shadowStroke=n,this.shadowFill=u,this.update(!1)}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=i),this.shadowOffsetX=i,this.shadowOffsetY=e,this.update(!1)}setShadowColor(i){return i===void 0&&(i="#000"),this.shadowColor=Yt(i,this.canvas,this.context),this.update(!1)}setShadowBlur(i){return i===void 0&&(i=0),this.shadowBlur=i,this.update(!1)}setShadowStroke(i){return this.shadowStroke=i,this.update(!1)}setShadowFill(i){return this.shadowFill=i,this.update(!1)}setUnderline(i,e,d){return i===void 0&&(i="#000"),e===void 0&&(e=0),d===void 0&&(d=0),this.underlineColor=Yt(i,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=d,this.update(!1)}setUnderlineColor(i){return i===void 0&&(i="#000"),this.underlineColor=Yt(i,this.canvas,this.context),this.update(!1)}setUnderlineThickness(i){return i===void 0&&(i=0),this.underlineThickness=i,this.update(!1)}setUnderlineOffset(i){return i===void 0&&(i=0),this.underlineOffset=i,this.update(!1)}setWrapMode(i){return typeof i=="string"&&(i=o0[i.toLowerCase()]||0),this.wrapMode=i,this.update(!0)}setWrapWidth(i){return this.wrapWidth=i,this.update(!1)}setAlign(i,e){return i===void 0&&(i="left"),e===void 0&&(e="top"),this.halign=i,this.valign=e,this.update(!1)}setHAlign(i){return i===void 0&&(i="left"),this.halign=i,this.update(!1)}setVAlign(i){return i===void 0&&(i="top"),this.valign=i,this.update(!1)}setMaxLines(i){return i===void 0&&(i=0),this.maxLines=i,this.update(!1)}getTextMetrics(){var i=this.metrics;return{ascent:i.ascent,descent:i.descent,fontSize:i.fontSize}}setTextMetrics(i,e){return this.metrics.ascent=i.ascent,this.metrics.descent=i.descent,this.metrics.fontSize=i.fontSize,typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=ti(e,"fontFamily",this.fontFamily),this.fontSize=ti(e,"fontSize",this.fontSize),this.fontStyle=ti(e,"fontStyle",this.fontStyle)),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var i={};for(var e in wf)i[e]=this[e];return i.metrics=this.getTextMetrics(),i}destroy(){this.parent=void 0}},o0={none:xe.NO_WRAP,word:xe.WORD_WRAP,char:xe.CHAR_WRAP,character:xe.CHAR_WRAP},Df=Phaser.Display.Canvas.CanvasPool,bL=function(r,i,e){e===void 0&&(e={});var d=Df.create(this),t=d.getContext("2d");r.syncFont(d,t);var n=t.measureText(i),u=Math.ceil(n.width*r.baselineX),s=u,o=2*s;if(s=s*r.baselineY|0,d.width=u,d.height=o,t.fillStyle="#f00",t.fillRect(0,0,u,o),t.font=r._font,t.textBaseline="alphabetic",t.fillStyle="#000",t.fillText(r.testString,0,s),e.left=0,u===0||o===0||!t.getImageData(0,0,u,o))return Df.remove(d),e;for(var h=t.getImageData(0,0,u,o).data,a=!1,l=0;l<u;l++){for(var c=0;c<o;c++){var f=(c*u+l)*4;if(h[f]!==255){e.left=l,a=!0;break}}if(a)break}return Df.remove(d),e},zL={draw(r,i,e,d){var t=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var u=this.defaultStyle;this.clear(),If(this,u.backgroundColor,u.backgroundStrokeColor,u.backgroundStrokeLineWidth,u.backgroundCornerRadius,u.backgroundColor2,u.backgroundHorizontalGradient,u.backgroundCornerIteration),r+=this.startXOffset,i+=this.startYOffset;var s=u.halign,o=u.valign,h,a=u.lineHeight,l=t.lines,c=l.length,f=u.maxLines,v,p,g;f>0&&c>f?(v=f,o==="center"?p=Math.floor((c-v)/2):o==="bottom"?p=c-v:p=0):(v=c,p=0),g=p+v;var m,x,y=this.rtl,T=y?this.parent.width:void 0;o==="center"?x=Math.max((d-v*a)/2,0):o==="bottom"?x=Math.max(d-v*a-2,0):x=0,x+=i;for(var C=p;C<g;C++)if(h=t.getLineWidth(C),h!==0){for(var S=l[C],E=S.length,M=s,R=0;R<E;R++){var L=S[R].prop.align;if(L!==void 0){M=L;break}}M==="center"?m=(e-h)/2:M==="right"?m=y?0:e-h:m=y?e-h:0,m+=r;for(var R=0;R<E;R++)this.drawPen(S[R],m,x,T)}n.restore()},drawPen(r,i,e,d){i+=r.x,e+=r.y+(r.prop.y||0),d!==void 0&&(i=d-i);var t=this.canvas,n=this.context;n.save();var u=this.parser.propToContextStyle(this.defaultStyle,r.prop);u.buildFont(),u.syncFont(t,n),u.syncStyle(t,n),u.underlineThickness>0&&r.width>0&&this.drawUnderline(i,e,r.width,u),r.isTextPen&&this.drawText(i,e,r.text,u),r.isImagePen&&this.drawImage(i,e,r.prop.img,u),n.restore(),r.hasAreaMarker&&r.width>0&&this.hitAreaManager.add(r.prop.area,i,e-this.startYOffset,r.width,this.defaultStyle.lineHeight)},clear(){var r=this.canvas;this.context.clearRect(0,0,r.width,r.height)},drawUnderline(r,i,e,d){i+=d.underlineOffset-d.underlineThickness/2,this.autoRound&&(r=Math.round(r),i=Math.round(i));var t=this.context,n=t.lineCap;t.lineCap="butt",t.strokeStyle=d.underlineColor,t.lineWidth=d.underlineThickness,t.beginPath(),t.moveTo(r,i),t.lineTo(r+e,i),t.stroke(),t.lineCap=n},drawText(r,i,e,d){this.autoRound&&(r=Math.round(r),i=Math.round(i));var t=this.context;d.stroke&&d.stroke!=="none"&&d.strokeThickness>0&&(d.syncShadow(t,d.shadowStroke),t.strokeText(e,r,i)),d.color&&d.color!=="none"&&(d.syncShadow(t,d.shadowFill),t.fillText(e,r,i))},drawImage(r,i,e,d){i-=this.startYOffset,this.parent.imageManager.draw(e,this.context,r,i,this.autoRound)}},Ls=Phaser.Utils.Objects.GetValue,YL=xe.NO_NEWLINE,h0=xe.RAW_NEWLINE,l0=class{constructor(i){this.prop={},this.resetFromJSON(i)}resetFromJSON(i){this.text=Ls(i,"text",""),this.x=Ls(i,"x",0),this.y=Ls(i,"y",0),this.width=Ls(i,"width",0);var e=Ls(i,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=Ls(i,"newLineMode",0),this.startIndex=Ls(i,"startIndex",0)}get plainText(){var i=this.text;return this.newLineMode===h0&&(i+=`
`),i}get wrapText(){var i=this.text;return this.newLineMode!==YL&&(i+=`
`),i}get rawTextLength(){var i=this.text.length;return this.newLineMode===h0&&(i+=1),i}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}},Ih=Phaser.Utils.Objects.GetFastValue,u0=xe.NO_NEWLINE,UL=xe.WRAPPED_NEWLINE,VL=new ln,WL=new ln,wh=class{constructor(i){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=Ih(i,"pensPool",VL),this.LinesPool=Ih(i,"linesPool",WL),this.tagToText=Ih(i,"tagToText",_e),this.tagToTextScope=Ih(i,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var i=0,e=this.lines.length;i<e;i++)this.lines[i].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(i,e,d,t,n,u){var s=this.PensPool.pop();return s==null&&(s=new l0),Fs.text=i,Fs.x=e,Fs.y=d,Fs.width=t,Fs.prop=n,Fs.newLineMode=u,s.resetFromJSON(Fs),this.addPen(s),this}addImagePen(i,e,d,t){return this.addTextPen("",i,e,d,t,u0),this}addNewLinePen(){var i=this.lastPen,e=i?i.lastX:0,d=i?i.y:0,t=i?hr(i.prop):null;return this.addTextPen("",e,d,0,t,UL),this}addPen(i){var e=this.lastPen;e==null?i.startIndex=0:i.startIndex=e.endIndex,this.pens.push(i);var d=this.lastLine;d==null&&(d=this.LinesPool.pop()||[],this.lines.push(d)),d.push(i),i.newLineMode!==u0&&(d=this.LinesPool.pop()||[],this.lines.push(d)),this.maxLinesWidth=void 0}clone(i){i==null&&(i=new wh),i.clear();for(var e=0,d=this.lines.length;e<d;e++)for(var t=this.lines[e],n=0,u=t.length;n<u;n++){var s=t[n];i.addPen(s.text,s.x,s.y,s.width,hr(s.prop),s.newLineMode)}return i}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(i){if(i>=this.lines.length)return this.getLineEndIndex(i);var e=this.lines[i];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(i){i>=this.lines.length&&(i=this.lines.length-1);var e,d=!1,t;for(e=i;e>=0&&(t=this.lines[e],d=t!=null&&t.length>0,!d);e--);if(!d)return 0;var n=t[t.length-1];return n.endIndex}getLineWidth(i){var e=this.lines[i];if(!e)return 0;var d=e[e.length-1];if(d==null)return 0;var t=d.lastX;return t}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var i,e=0,d=0,t=this.lines.length;d<t;d++)i=this.getLineWidth(d),i>e&&(e=i);return this.maxLinesWidth=e,e}getLineWidths(){for(var i=[],e=0,d=this.lines.length;e<d;e++)i.push(this.getLineWidth(e));return i}get linesCount(){return this.lines.length}get plainText(){for(var i="",e=this.pens,d=0,t=e.length;d<t;d++)i+=e[d].plainText;return i}get rawTextLength(){for(var i=0,e=this.pens,d=0,t=this.pens.length;d<t;d++)i+=e[d].rawTextLength;return i}getSliceTagText(i,e,d){if(i===void 0&&(i=0),e===void 0){var t=this.lastPen;if(t==null)return"";e=t.endIndex}d===void 0&&(d=!1);for(var n="",u,s,o,h,a,l,c,f=0,v=this.pens.length;f<v&&(u=this.pens[f],h=u.endIndex,!(!(h<=i)&&(u=this.pens[f],s=d?u.wrapText:u.plainText,l=u.prop,o=u.startIndex,a=o>=i&&h<=e,a||(s=s.substring(i-o,e-o)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,s,l,c):n+=this.tagToText(s,l,c),c=l,h>=e)));f++);return n}get length(){return this.lines.length}set length(i){this.clear()}},Fs={},XL=Phaser.Geom.Rectangle,f0=new ln,d0=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return f0.pushMultiple(this.hitAreas),this}add(i,e,d,t,n){var u=f0.pop();return u===null?u=new XL(e,d,t,n):u.setTo(e,d,t,n),u.key=i,this.hitAreas.push(u),this}getFirst(i,e){for(var d=0,t=this.hitAreas.length;d<t;d++){var n=this.hitAreas[d];if(n.contains(i,e))return n}return null}drawBounds(i,e,d){e===void 0&&(e=16777215),d&&i.save().scaleCanvas(d.scaleX,d.scaleY).rotateCanvas(d.rotation).translateCanvas(d.x,d.y);for(var t=0,n=this.hitAreas.length;t<n;t++){var u=this.hitAreas[t];i.lineStyle(1,e).strokeRect(u.x,u.y,u.width,u.height)}return d&&i.restore(),this}},KL=function(){this.parent.on("pointerdown",HL,this).on("pointerup",$L,this).on("pointermove",Bf,this).on("pointerover",Bf,this).on("pointerout",function(r,i){Bf.call(this,r,null,null,i)},this)},HL=function(r,i,e,d){var t=this.hitAreaManager.getFirst(i,e);t!==null&&va.call(this,"areadown",t.key,r,i,e,d)},$L=function(r,i,e,d){var t=this.hitAreaManager.getFirst(i,e);t!==null&&va.call(this,"areaup",t.key,r,i,e,d)},Bf=function(r,i,e,d){if(i===null){this.lastHitAreaKey!==null&&va.call(this,"areaout",this.lastHitAreaKey,r,i,e,d),this.lastHitAreaKey=null;return}var t=this.hitAreaManager.getFirst(i,e),n=t?t.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&va.call(this,"areaout",this.lastHitAreaKey,r,i,e,d),n!==null&&va.call(this,"areaover",n,r,i,e,d),this.lastHitAreaKey=n)},va=function(r,i,e,d,t,n){this.parent.emit(`${r}-${i}`,e,d,t,n),this.parent.emit(r,i,e,d,t,n)},Gf=new ln,ZL=function(r){!r||Gf.push(r)},JL=function(r){!r||Gf.pushMultiple(r)},Is=function(r,i,e){var d=Gf.pop();return d===null&&(d={}),d.text=r,d.width=i,d.newLineMode=e,d},QL=xe.NO_NEWLINE,kL=xe.RAW_NEWLINE,Nf=xe.WRAPPED_NEWLINE,v0=xe.NO_WRAP,jL=xe.WORD_WRAP,qL=xe.CHAR_WRAP,_L=xe.SPLITREGEXP,c0=function(r,i,e,d,t){d<=0&&(e=v0);var n=[];if(!r||!r.length)return n;for(var u=e===v0,s=e===jL,o=r.split(_L),h,a,l,c=0,f=o.length;c<f;c++){if(h=o[c],l=c===f-1?QL:kL,u){var v=i(h);n.push(Is(h,v,l));continue}if(a=c===0?d-t:d,h.length<=100){var v=i(h);if(v<=a){n.push(Is(h,v,l));continue}}var p,g;s?(p=h.split(" "),g=p[p.length-1]==="",g&&(p.length-=1)):p=h;for(var m,x,y,T="",C=0,S,E=s?i(" "):void 0,M=0,R=p.length;M<R;M++){if(m=p[M],x=i(m),y=M===R-1,s&&(!y||g)&&(m+=" ",x+=E),s&&x>d){T!==""?n.push(Is(T,C,Nf)):M===0&&t>0&&n.push(Is("",0,Nf)),n.push(...c0(m,i,qL,d,0));var L=n.pop();T=L.text,C=L.width,ZL(L),T===" "&&(T="",C=0);continue}S=C+x,S>a?(n.push(Is(T,C,Nf)),T=m,C=x,a=d):(T+=m,C=S),y&&n.push(Is(T,C,l))}}return n},Dh=Phaser.Utils.Objects.GetValue,tF=xe.NO_WRAP,eF=xe.NO_NEWLINE,bf=class{constructor(i){this.parent=i.parent,this.context=Dh(i,"context",null),this.canvas=this.context.canvas,this.parser=Dh(i,"parser",null),this.defaultStyle=Dh(i,"style",null),this.autoRound=!0,this.pensPool=Dh(i,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new d0,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(d){return e.measureText(d).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(i,e,d,t,n){if(n===void 0&&(n=this.penManager),n.clear(),i==="")return n;var u=this.parent.style;if(u.isWrapFitMode){var s=this.parent.padding;d=u.fixedWidth-s.left-s.right}for(var o=this.canvas,h=this.context,a=function(B){return h.measureText(B).width},l=0,c=0,f=u.wrapCallback,v=u.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(i),T,C,S=0,E=y.length;S<E;S++)if(T=this.parser.tagTextToProp(y[S],m),g=T.plainText,m=T.prop,m.img){var M=this.imageManager.getOuterWidth(m.img);d>0&&e!==tF&&d<l+M&&(n.addNewLinePen(),c+=t,l=0),n.addImagePen(l,c,M,hr(m)),l+=M}else if(g!==""){if(h.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(o,h),x.syncStyle(o,h),!f)C=c0(g,a,e,d,l);else{C=f.call(v,g,a,d,l),typeof C=="string"&&(C=C.split(`
`));for(var O,R=0,L=C.length;R<L;R++)O=C[R],typeof O=="string"?C[R]=Is(O,a(O),R<L-1?2:0):p=!1}for(var O,R=0,L=C.length;R<L;R++)O=C[R],n.addTextPen(O.text,l,c,O.width,hr(m),O.newLineMode),O.newLineMode!==eF?(l=0,c+=t):l+=O.width;p&&JL(C),C=null,h.restore()}for(var S=0,E=this.lines.length;S<E;S++){var F=this.lines[S],D=F[F.length-1];D&&(D.width+=this.parser.getStrokeThinkness(this.defaultStyle,D.prop))}return n}get startXOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.xOffset}get startYOffset(){var i=this.defaultStyle;return i.strokeThickness/2+i.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var i=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&i>e&&(i=e),i}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var i=this.desplayLinesCount,e=this.defaultStyle.lineHeight*i;return i>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new wh({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(i,e,d){var t;if(i==null)t=this.penManager.plainText;else{var n=this.parser.splitText(i,1);t="";for(var u=0,s=n.length;u<s;u++)t+=n[u]}return(e!=null||d!=null)&&(e==null&&(e=0),d==null&&(d=t.length),t=t.substring(e,d)),t}getPenManager(i,e){if(i===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var d=this.defaultStyle;return this.updatePenManager(i,d.wrapMode,d.wrapWidth,d.lineHeight,e),e}getText(i,e,d,t){if(i==null)return this.penManager.getSliceTagText(e,d,t);var n=this.tmpPenManager,u=this.defaultStyle;return this.updatePenManager(i,u.wrapMode,u.wrapWidth,u.lineHeight,n),n.getSliceTagText(e,d,t)}copyPenManager(i,e){return e===void 0&&(e=this.penManager),e.copy(i)}getTextWidth(i){return i===void 0&&(i=this.penManager),i.getMaxLineWidth()}getLastPen(i){return i===void 0&&(i=this.penManager),i.lastPen}},iF={setInteractive:KL};Object.assign(bf.prototype,zL,iF);var zf=Phaser.Utils.Objects.GetValue,Yf=function(r,i){i===void 0&&(i={key:r}),i.hasOwnProperty("key")||(i.key=r);var e=i.key,d=i.frame,t=i.width,n=i.height;if(t===void 0||n===void 0){var u=this.textureManager.getFrame(e,d),s=u?u.cutWidth:0,o=u?u.cutHeight:0;t===void 0&&n===void 0?(t=s,n=o):t===void 0?t=s*(n/o):n===void 0&&(n=o*(t/s))}this.images[r]={key:e,frame:d,width:t,height:n,y:zf(i,"y",0),left:zf(i,"left",0),right:zf(i,"right",0)}},nF=function(r,i,e,d,t){var n=this.get(r);e+=n.left,d+=n.y,t&&(e=Math.round(e),d=Math.round(d));var u=this.textureManager.getFrame(n.key,n.frame);i.drawImage(u.source.image,u.cutX,u.cutY,u.cutWidth,u.cutHeight,e,d,n.width,n.height)},Bh=class{constructor(i){this.textureManager=i.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(i,e){if(typeof i=="string")Yf.call(this,i,e);else if(Array.isArray(i))for(var d=i,t=0,n=d.length;t<n;t++)Yf.call(this,d[t]);else{var d=i;for(var i in d)Yf.call(this,i,d[i])}return this}has(i){return this.images.hasOwnProperty(i)}remove(i){return this.has(i)&&delete this.images[i],this}get(i){return this.has(i)||this.textureManager.exists(i)&&this.add(i),this.images[i]}getOuterWidth(i){var e=this.get(i);return e?e.width+e.left+e.right:0}getFrame(i){var e=this.get(i);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(i){return!!this.getFrame(i)}},sF={draw:nF};Object.assign(Bh.prototype,sF);var rF=Phaser.Utils.Objects.IsPlainObject,aF=Phaser.DOM.AddToDOM,p0=Phaser.Display.Canvas.CanvasPool,g0=Phaser.GameObjects.GameObject,un=Phaser.Utils.Objects.GetValue,oF=Phaser.DOM.RemoveFromDOM,hF=xe.SPLITREGEXP,Uf={},ca=class extends g0{constructor(i,e,d,t,n,u,s){if(rF(e)){var o=e;e=un(o,"x",0),d=un(o,"y",0),t=un(o,"text",""),n=un(o,"style","")}if(e===void 0&&(e=0),d===void 0&&(d=0),super(i,u),this.renderer=i.sys.game.renderer,this.setPosition(e,d),this.setOrigin(0,0),this.initPipeline(),this.canvas=p0.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var h=n.align;delete n.align,n.halign=h}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new Fh(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=i.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Uf.hasOwnProperty(u)||(Uf[u]=new ln),this.canvasText=new bf({parent:this,context:this.context,parser:s,style:this.style,pensPool:Uf[u]}),this.parser=s,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(t),i.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&oF(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),p0.remove(this.canvas),this.texture.destroy()}set text(i){this.setText(i)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",aF(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(i){return i==null?i="":Array.isArray(i)?i=i.join(`
`):i=i.toString(),i===this._text?this:(this._text=i,this.updateText(),this)}appendText(i){return i==null?this:(Array.isArray(i)&&(i=i.join(`
`)),this.setText(this.text+i.toString()),this)}setStyle(i){return this.style.setStyle(i)}setFont(i){return this.style.setFont(i)}setFontFamily(i){return this.style.setFontFamily(i)}setFontSize(i){return this.style.setFontSize(i)}setFontStyle(i){return this.style.setFontStyle(i)}setTestString(i){return this.style.setTestString(i)}setFixedSize(i,e){return this.style.setFixedSize(i,e)}setBackgroundColor(i,e,d){return this.style.setBackgroundColor(i,e,d)}setBackgroundStrokeColor(i,e){return this.style.setBackgroundStrokeColor(i,e)}setBackgroundCornerRadius(i,e){return this.style.setBackgroundCornerRadius(i,e)}setFill(i){return this.style.setFill(i)}setColor(i){return this.style.setColor(i)}setStroke(i,e){return this.style.setStroke(i,e)}setShadow(i,e,d,t,n,u){return this.style.setShadow(i,e,d,t,n,u)}setShadowOffset(i,e){return this.style.setShadowOffset(i,e)}setShadowColor(i){return this.style.setShadowColor(i)}setShadowBlur(i){return this.style.setShadowBlur(i)}setShadowStroke(i){return this.style.setShadowStroke(i)}setShadowFill(i){return this.style.setShadowFill(i)}setWrapMode(i){return this.style.setWrapMode(i)}setWrapWidth(i){return this.style.setWrapWidth(i)}setWordWrapWidth(i){return this.style.setWrapWidth(i)}setAlign(i){return this.style.setHAlign(i)}setHAlign(i){return this.style.setHAlign(i)}setVAlign(i){return this.style.setVAlign(i)}setLineSpacing(i){return this.style.setLineSpacing(i)}setXOffset(i){return this.style.setXOffset(i)}setPadding(i,e,d,t){if(typeof i=="object"){var n=i,u=un(n,"x",null);u!==null?(i=u,d=u):(i=un(n,"left",0),d=un(n,"right",i));var s=un(n,"y",null);s!==null?(e=s,t=s):(e=un(n,"top",0),t=un(n,"bottom",e))}else i===void 0&&(i=0),e===void 0&&(e=i),d===void 0&&(d=i),t===void 0&&(t=e);return this.padding.left=i,this.padding.top=e,this.padding.right=d,this.padding.bottom=t,this.updateText(!1)}setMaxLines(i){return this.style.setMaxLines(i)}setResolution(i){return this.style.setResolution(i)}updateText(i){i===void 0&&(i=!0);var e=this.canvasText,d=this.style;i&&e.updatePenManager(this._text,d.wrapMode,d.wrapWidth,d.lineHeight);var t=this.padding,n,u,s=Math.ceil(e.linesWidth);d.fixedWidth===0?(this.width=s+t.left+t.right,n=s):(this.width=d.fixedWidth,n=this.width-t.left-t.right,n<s&&(n=s)),d.fixedHeight===0?(this.height=e.linesHeight+t.top+t.bottom,u=e.linesHeight):(this.height=d.fixedHeight,u=this.height-t.top-t.bottom,u<e.linesHeight&&(u=e.linesHeight));var o=this.width,h=this.height;this.updateDisplayOrigin();var a=d.resolution;o*=a,h*=a,o=Math.max(Math.ceil(o),1),h=Math.max(Math.ceil(h),1);var l=this.canvas,c=this.context;l.width!==o||l.height!==h?(l.width=o,l.height=h,this.frame.setSize(o,h)):c.clearRect(0,0,o,h),c.save(),c.scale(a,a);var f=this.style.rtl?t.right:t.left,v=t.top;e.draw(f,v,n,u),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(i,e){return this.style.setTextMetrics(i,e)}toJSON(){var i=$e.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return i.data=e,i}setInteractive(i,e,d){var t=!!this.input;return g0.prototype.setInteractive.call(this,i,e,d),t||this.canvasText.setInteractive(),this}getWrappedText(i,e,d){return i=this.canvasText.getText(i,e,d,!0),i.split(hF)}getPlainText(i,e,d){return this.canvasText.getPlainText(i,e,d)}getText(i,e,d,t){return t===void 0&&(t=!1),this.canvasText.getText(i,e,d,t)}getSubString(i,e,d){return this.getText(i,e,d)}copyPenManager(i){return this.canvasText.copyPenManager(i)}getPenManager(i,e){return this.canvasText.getPenManager(i,e)}setSize(i,e){return this.setFixedSize(i,e)}resize(i,e){return this.setFixedSize(i,e)}set lineSpacing(i){this.setLineSpacing(i)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new Bh(this.scene)),this._imageManager}addImage(i,e){return this.imageManager.add(i,e),this}drawAreaBounds(i,e){return this.canvasText.hitAreaManager.drawBounds(i,e,this),this}measureTextMargins(i,e){return bL(this.style,i,e)}generateTexture(i,e,d,t,n){var u=this.canvas;return t===void 0?t=u.width:t*=this.resolution,n===void 0?n=u.height:n*=this.resolution,qg(this.scene,u,i,e,d,t,n),this}},$e=Phaser.GameObjects.Components;Phaser.Class.mixin(ca,[$e.Alpha,$e.BlendMode,$e.ComputedSize,$e.Crop,$e.Depth,$e.Flip,$e.GetBounds,$e.Mask,$e.Origin,$e.Pipeline,$e.ScrollFactor,$e.Tint,$e.Transform,$e.Visible,GL]);var ze=function(r,i){return i===void 0?`\\[${r}\\]`:`\\[${r}=(${i})\\]`},ei=function(r){return`\\[/${r}\\]`},Vf="[-.0-9]+",Wf="[a-z]+|#[0-9abcdef]+",Xf="[^\\]]+",m0="esc",x0=ze(m0),y0=ei(m0),T0="raw",C0=ze(T0),S0=ei(T0),E0="b",P0=ze(E0),M0=ei(E0),A0="i",R0=ze(A0),O0=ei(A0),L0="weight",F0=ze(L0,Vf),I0=ei(L0),w0="size",D0=ze(w0,Vf),B0=ei(w0),G0="color",N0=ze(G0,Wf),b0=ei(G0),Hf="u",z0=ze(Hf),Y0=ze(Hf,Wf),U0=ei(Hf),V0="shadow",W0=ze(V0),X0=ei(V0),$f="stroke",H0=ze($f),$0=ze($f,Wf),K0=ei($f),Z0="y",J0=ze(Z0,Vf),Q0=ei(Z0),k0="img",j0=ze(k0,Xf),q0=ei(k0),_0="area",tm=ze(_0,Xf),em=ei(_0),im="align",nm=ze(im,Xf),sm=ei(im),rm=new RegExp(x0,"i"),Kf=new RegExp(y0,"i"),am=new RegExp(C0,"i"),Zf=new RegExp(S0,"i"),lF=new RegExp(P0,"i"),uF=new RegExp(M0,"i"),fF=new RegExp(R0,"i"),dF=new RegExp(O0,"i"),om=new RegExp(F0,"i"),vF=new RegExp(I0,"i"),hm=new RegExp(D0,"i"),cF=new RegExp(B0,"i"),lm=new RegExp(N0,"i"),pF=new RegExp(b0,"i"),gF=new RegExp(z0,"i"),um=new RegExp(Y0,"i"),mF=new RegExp(U0,"i"),xF=new RegExp(W0,"i"),yF=new RegExp(X0,"i"),TF=new RegExp(H0,"i"),fm=new RegExp($0,"i"),CF=new RegExp(K0,"i"),dm=new RegExp(J0,"i"),SF=new RegExp(Q0,"i"),vm=new RegExp(j0,"i"),EF=new RegExp(q0,"i"),cm=new RegExp(tm,"i"),PF=new RegExp(em,"i"),pm=new RegExp(nm,"i"),MF=new RegExp(sm,"i"),Jf=new RegExp([C0,S0,x0,y0,P0,M0,R0,O0,F0,I0,D0,B0,N0,b0,z0,Y0,U0,W0,X0,H0,$0,K0,J0,Q0,j0,q0,tm,em,nm,sm].join("|"),"ig"),AF=function(r,i){for(var e=[],d=0,t=!1,n=!1;;){var u=Jf.exec(r);if(!u)break;var s=u[0];if(n)if(Kf.test(s))n=!1;else continue;else if(t)if(Zf.test(s))t=!1;else continue;else rm.test(s)?n=!0:am.test(s)&&(t=!0);var o=Jf.lastIndex-s.length;if(d<o){var h=r.substring(d,o);e.push(h)}i===void 0&&e.push(s),d=Jf.lastIndex}var a=r.length;return d<a&&e.push(r.substring(d,a)),e},Ie=!1,we=!0,RF={plainText:null,prevProp:null},OF=function(r,i){i==null&&(i={});var e="";if(i.img&&Xt(i,Ie,"img"),i.esc)Kf.test(r)?Xt(i,Ie,"esc"):e=r;else if(i.raw)Zf.test(r)?Xt(i,Ie,"raw"):e=r;else if(rm.test(r))Xt(i,we,"esc",!0);else if(Kf.test(r))Xt(i,Ie,"esc");else if(am.test(r))Xt(i,we,"raw",!0);else if(Zf.test(r))Xt(i,Ie,"raw");else if(lF.test(r))Xt(i,we,"b",!0);else if(uF.test(r))Xt(i,Ie,"b");else if(fF.test(r))Xt(i,we,"i",!0);else if(dF.test(r))Xt(i,Ie,"i");else if(om.test(r)){var d=r.match(om);Xt(i,we,"weight",d[1])}else if(vF.test(r))Xt(i,Ie,"weight");else if(hm.test(r)){var d=r.match(hm);Xt(i,we,"size",`${d[1]}px`)}else if(cF.test(r))Xt(i,Ie,"size");else if(lm.test(r)){var d=r.match(lm);Xt(i,we,"color",d[1])}else if(pF.test(r))Xt(i,Ie,"color");else if(gF.test(r))Xt(i,we,"u",!0);else if(um.test(r)){var d=r.match(um);Xt(i,we,"u",d[1])}else if(mF.test(r))Xt(i,Ie,"u");else if(xF.test(r))Xt(i,we,"shadow",!0);else if(yF.test(r))Xt(i,Ie,"shadow");else if(TF.test(r))Xt(i,we,"stroke",!0);else if(fm.test(r)){var d=r.match(fm);Xt(i,we,"stroke",d[1])}else if(CF.test(r))Xt(i,Ie,"stroke");else if(dm.test(r)){var d=r.match(dm);Xt(i,we,"y",parseFloat(d[1]))}else if(SF.test(r))Xt(i,Ie,"y");else if(vm.test(r)){var d=r.match(vm);Xt(i,we,"img",d[1])}else if(EF.test(r))Xt(i,Ie,"img");else if(cm.test(r)){var d=r.match(cm);Xt(i,we,"area",d[1])}else if(PF.test(r))Xt(i,Ie,"area");else if(pm.test(r)){var d=r.match(pm);Xt(i,we,"align",d[1])}else MF.test(r)?Xt(i,Ie,"align"):e=r;var t=RF;return t.plainText=e,t.prop=i,t},Xt=function(r,i,e,d){return i===we?r[e]=d:r.hasOwnProperty(e)&&delete r[e],r},IF=function(r,i){var e=FF;if(i.hasOwnProperty("img"))e.image=i.img;else{if(e.image=null,i.hasOwnProperty("family")?e.fontFamily=i.family:e.fontFamily=r.fontFamily,i.hasOwnProperty("size")){var d=i.size;typeof d=="number"&&(d=`${d}px`),e.fontSize=d}else e.fontSize=r.fontSize;e.fontStyle=LF(i),i.hasOwnProperty("color")?e.color=i.color:e.color=r.color,i.hasOwnProperty("stroke")?i.stroke===!0?(e.stroke=r.stroke,e.strokeThickness=r.strokeThickness):(e.stroke=i.stroke,e.strokeThickness=r.strokeThickness):(e.stroke=r.stroke,e.strokeThickness=0)}return i.hasOwnProperty("shadow")?i.shadow===!0?(e.shadowColor=r.shadowColor,e.shadowOffsetX=r.shadowOffsetX,e.shadowOffsetY=r.shadowOffsetY,e.shadowBlur=r.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=i.shadow,e.shadowOffsetX=r.shadowOffsetX,e.shadowOffsetY=r.shadowOffsetY,e.shadowBlur=r.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),i.hasOwnProperty("u")?i.u===!0?(e.underlineColor=r.underlineColor,e.underlineThickness=r.underlineThickness,e.underlineOffset=r.underlineOffset):(e.underlineColor=i.u,e.underlineThickness=r.underlineThickness,e.underlineOffset=r.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},LF=function(r){var i=r.b,e=r.weight,d=r.i;return i||e||d?d?i?"bold italic":e?`${e} italic`:"italic":i?"bold":e.toString():""},FF=new Fh,DF=function(r,i,e){e==null&&(e=wF);var d=[];for(var t in e)i.hasOwnProperty(t)||d.push(`[/${t}]`);for(var t in i){var n=i[t];if(e[t]!==n)switch(t){case"size":d.push(`[size=${n.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":d.push(`[${t}=${n}]`);break;case"u":n===!0?d.push("[u]"):d.push(`[u=${n}]`);break;default:d.push(`[${t}]`);break}}return d.push(r),d.join("")},wF={},Gh=class{getStrokeThinkness(i,e){var d;return e.hasOwnProperty("stroke")?d=i.strokeThickness:d=0,d}},BF={splitText:AF,tagTextToProp:OF,propToContextStyle:IF,propToTagText:DF};Object.assign(Gh.prototype,BF);var GF={plainText:null,prevProp:null},NF=new Fh,gm=class{constructor(i){i===void 0&&(i={}),this.tags=i}addTag(i,e){this.tags[i]=e}getTag(i){return this.tags[i]}splitText(i,e){for(var d=[],t=0;;){var n=Qf.exec(i);if(!n)break;var u=n[0],s=Qf.lastIndex-u.length;if(t<s&&d.push(i.substring(t,s)),e===void 0)d.push(u);else if(e===1){if(mm.test(u)){var o=u.match(xm);d.push(o[2])}else if(ym.test(u)){var o=u.match(Tm);d.push(o[2])}}t=Qf.lastIndex}var h=i.length;return t<h&&d.push(i.substring(t,h)),d}tagTextToProp(i,e){var d,t;if(mm.test(i)){var n=i.match(xm);if(n!=null){var u=n[1],s=this.tags;s.hasOwnProperty(u)?t=s[u]:t={},t._class=u,d=n[2]}}else if(ym.test(i)){var n=i.match(Tm);if(n!=null){var o=n[1];t=bF(o),t._style=o,d=n[2]}}d==null&&(d=i),t==null&&(t={});var h=GF;return h.plainText=d,h.prop=t,h}propToContextStyle(i,e){var d=NF;if(e.hasOwnProperty("img"))d.image=e.img;else{if(d.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var t=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];d.fontFamily=t}else d.fontFamily=i.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var n=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof n=="number"&&(n=`${n}px`),d.fontSize=n}else d.fontSize=i.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var u=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];d.fontStyle=u}else d.fontStyle=i.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var s=e.hasOwnProperty("color")?e.color:e["font-color"];d.color=s}else d.color=i.color;if(e.hasOwnProperty("stroke")){var o=e.stroke;d.stroke=o.hasOwnProperty("color")?o.color:i.stroke,d.strokeThickness=o.hasOwnProperty("thickness")?o.thickness:i.strokeThickness}else d.stroke=i.stroke,d.strokeThickness=i.strokeThickness}if(e.hasOwnProperty("shadow")){var h=e.shadow;d.shadowColor=h.hasOwnProperty("color")?h.color:i.shadowColor,d.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:i.shadowOffsetX,d.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:i.shadowOffsetY,d.shadowBlur=h.hasOwnProperty("blur")?h.blur:i.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0}else d.shadowColor=i.shadowColor,d.shadowOffsetX=i.shadowOffsetX,d.shadowOffsetY=i.shadowOffsetY,d.shadowBlur=i.shadowBlur,d.shadowStroke=i.shadowStroke,d.shadowFill=i.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var a=e.hasOwnProperty("u")?e.u:e.underline;d.underlineColor=a.hasOwnProperty("color")?a.color:i.underlineColor,d.underlineThickness=a.hasOwnProperty("thickness")?a.thickness:i.underlineThickness,d.underlineOffset=a.hasOwnProperty("offset")?a.offset:i.underlineOffset}else d.underlineColor=i.underlineColor,d.underlineThickness=i.underlineThickness,d.underlineOffset=i.underlineOffset;return d}getStrokeThinkness(i,e){var d;if(e.hasOwnProperty("stroke")){var t=e.stroke;d=t.hasOwnProperty("thickness")?t.thickness:i.strokeThickness}else d=i.strokeThickness;return d}propToTagText(i,e,d){return e.hasOwnProperty("_class")?i===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${i}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${i}</style>`:i}destroy(){this.tags=void 0}isTextTag(i){var e=this.tags[i];return e?e.img==null:!1}},bF=function(r){r=r.split(";");for(var i={},e,d,t,n=0,u=r.length;n<u;n++)if(e=r[n].split(":"),d=e[0],t=e[1],!(Cm(d)||Cm(t))){switch(d){case"stroke":var s=t.split(" "),o=s.length;t={},o>=1&&(t.color=s[0]),o>=2&&(t.thickness=parseInt(s[1].replace("px","")));break;case"shadow":var h=t.split(" "),o=h.length;t={},o>=1&&(t.color=h[0]),o>=2&&(t.offsetX=parseInt(h[1].replace("px",""))),o>=3&&(t.offsetY=parseInt(h[2].replace("px",""))),o>=4&&(t.blur=parseInt(h[3].replace("px","")));break;case"u":case"underline":var a=t.split(" "),o=a.length;t={},o>=1&&(t.color=a[0]),o>=2&&(t.thickness=parseInt(a[1].replace("px",""))),o>=3&&(t.offset=parseInt(a[2].replace("px","")));break;case"y":t=parseFloat(t);break}i[d]=t}return i},Cm=function(r){return r=r.replace(zF,""),r.length===0},Qf=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,mm=/<\s*class=/i,xm=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,ym=/<\s*style=/i,Tm=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,zF=/^\s+|\s+$/,YF=Phaser.Utils.Objects.GetValue,Nh=class extends ca{constructor(i,e,d,t,n){var u=YF(n,"tags",void 0),s=new gm(u);super(i,e,d,t,n,"rexTagText",s)}addTag(i,e){return this.parser.addTag(i,e),this.updateText(!0)}addTags(i){for(var e in i)this.parser.addTag(e,i[e]);return this.updateText(!0)}getTag(i){return this.parser.getTag(i)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}},UF=function(r,i){if(this.scene.sys.scale.autoRound&&(r=Math.floor(r),i=Math.floor(i)),this.width===r&&this.height===i)return this;var e=this.node.style;return e.width=`${r}px`,e.height=`${i}px`,this.updateSize(),this},VF=Phaser.Utils.Objects.GetValue,Sm=function(r,i,e){e===void 0&&(e={});var d,t;for(var n in r)d=r[n],t=VF(i,n,d[1]),t!==void 0&&(e[d[0]]=t);return e},WF=function(r,i,e){for(let d in e)i.addEventListener(d,function(t){r.emit(e[d],r,t)})},XF=function(r){r.addEventListener("touchstart",vr,!1),r.addEventListener("touchmove",vr,!1),r.addEventListener("touchend",vr,!1),r.addEventListener("mousedown",vr,!1),r.addEventListener("mouseup",vr,!1),r.addEventListener("mousemove",vr,!1)},vr=function(r){r.stopPropagation()},HF=Phaser.GameObjects.DOMElement,Em=Phaser.Utils.Objects.IsPlainObject,Gn=Phaser.Utils.Objects.GetValue,bh=class extends HF{constructor(i,e,d,t,n,u){Em(e)?(u=e,e=Gn(u,"x",0),d=Gn(u,"y",0),t=Gn(u,"width",0),n=Gn(u,"height",0)):Em(t)&&(u=t,t=Gn(u,"width",0),n=Gn(u,"height",0)),u===void 0&&(u={});var s,o=Gn(u,"type","text");o==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=o),Sm(Pm,u,s);var h=Gn(u,"style",void 0);h=Sm(Mm,u,h);var a=s.style;for(var l in u)l in Pm||l in Mm||l in a&&(h[l]=u[l]);h["box-sizing"]="border-box",super(i,e,d,s,h),this.type="rexInputText",this.resize(t,n),WF(this,s,$F),XF(s),Gn(u,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(i){this.node.value=i}setText(i){return this.text=i,this}get maxLength(){return this.node.maxLength}set maxLength(i){this.node.maxLength=i}setMaxLength(i){return this.maxLength=i,this}get minLength(){return this.node.minLength}set minLength(i){this.node.minLength=i}setMinLength(i){return this.minLength=i,this}get placeholder(){return this.node.placeholder}set placeholder(i){this.node.placeholder=i}setPlaceholder(i){return this.placeholder=i,this}selectText(i,e){return i===void 0?this.node.select():this.node.setSelectionRange(i,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var i=this.node;return i.value.substring(i.selectionStart,i.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(i){this.node.setSelectionRange(i,i)}setCursorPosition(i){return i===void 0&&(i=0),this.cursorPosition=i,this}get tooltip(){return this.node.title}set tooltip(i){this.node.title=i}setTooltip(i){return this.tooltip=i,this}setTextChangedCallback(i){return this.onTextChanged=i,this}get readOnly(){return this.node.readOnly}set readOnly(i){this.node.readOnly=i}setReadOnly(i){return i===void 0&&(i=!0),this.readOnly=i,this}get spellCheck(){return this.node.spellcheck}set spellCheck(i){this.node.spellcheck=i}setSpellCheck(i){return this.spellCheck=i,this}get fontColor(){return this.node.style.color}set fontColor(i){this.node.style.color=i}setFontColor(i){return this.fontColor=i,this}setStyle(i,e){return this.node.style[i]=e,this}getStyle(i){return this.node.style[i]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(i){return i===void 0&&(i=!0),this.node.disabled=!i,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}},KF={resize:UF};Object.assign(bh.prototype,KF);var Pm={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Mm={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},$F={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"},kf=function(r,i,e,d){if(i)return!(e&&!e(r,i)||!Am(r,i)||d&&!d(r,i));for(var t=r.scene.input.manager,n=t.pointersTotal,u=t.pointers,i,s=0;s<n;s++)if(i=u[s],!(e&&!e(r,i))&&!!Am(r,i)&&!(d&&!d(r,i)))return!0;return!1},Am=function(r,i){for(var e=r.scene,d=e.input.cameras.getCamerasBelowPointer(i),t=e.input.manager,n=[r],u,s=0,o=d.length;s<o;s++)if(u=t.hitTest(i,n,d[s]),u.length>0)return!0;return!1},ZF=function(r,i,e){r=r.replace(" ","");var d=e.previousText;if(r===d)return r;if(isNaN(r)){r=d;var t=e.cursorPosition-1;e.setText(r),e.setCursorPosition(t)}else e.previousText=r;return r},cr=Phaser.Utils.Objects.GetValue,JF=Phaser.Math.Wrap,zh=class extends bh{constructor(i,e){super(i.scene,e);var d=this.node.style;d.position="absolute",d.opacity=0,d.pointerEvents="none",d.zIndex=0,d.transform="scale(0)",this.setCursor(cr(e,"cursor","|")),this.setCursorFlashDuration(cr(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(cr(e,"enterClose",!0)),this.onOpenCallback=cr(e,"onOpen",void 0),this.onCloseCallback=cr(e,"onClose",void 0);var t=cr(e,"onUpdate",void 0);t==="number"&&(t=ZF),this.onUpdateCallback=t,this.textObject=i,i.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(i){kf(this.textObject,i)||this.setBlur()}updateText(){var i=this.text;if(this.onUpdateCallback){var e=this.onUpdateCallback(i,this.textObject,this);e!=null&&(i=e)}if(this.isFocused&&this.hasCursor){var d=this.cursorPosition;i=i.substring(0,d)+this.cursor+i.substring(d)}return this.textObject.setText(i),this}setCursor(i){return this._cursor=i,this.hasCursor=i&&i!=="",i}setCursorFlashDuration(i){return this.cursorFlashDuration=i,this}get cursor(){if(!this._isFocused)return this._cursor;var i;this.cursorFlashTimer<this.cursorFlashDuration/2?i=this._cursor:i=" ";var e=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=JF(e,0,this.cursorFlashDuration),i}setEnterClose(i){return i===void 0&&(i=!0),this.enterClose=i,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}},QF=Phaser.GameObjects.Zone,kF=Phaser.Utils.Array.Add,jF=Phaser.Utils.Array.Remove,pr=class extends QF{constructor(i,e,d,t,n){e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=1),n===void 0&&(n=1),super(i,e,d,t,n),this.children=[]}destroy(i){if(!!this.scene){if(i)for(var e,d=this.children.length-1;d>=0;d--)e=this.children[d],!e.parentContainer&&!e.displayList&&e.destroy(i);this.clear(!i),super.destroy(i)}}contains(i){return this.children.indexOf(i)!==-1}add(i){var e=this;return kF(this.children,i,0,function(d){d.once("destroy",e.onChildDestroy,e)},this),this}remove(i,e){var d=this;return jF(this.children,i,function(t){t.off("destroy",d.onChildDestroy,d),e&&t.destroy()}),this}onChildDestroy(i,e){this.remove(i,!1)}clear(i){for(var e=this,d,t=0,n=this.children.length;t<n;t++)d=this.children[t],d.off("destroy",e.onChildDestroy,e),i&&d.destroy();return this.children.length=0,this}},Rm=Phaser.GameObjects.Components;Phaser.Class.mixin(pr,[Rm.Alpha,Rm.Flip]);var fn=function(r,i){var e;if(i===void 0)r.hasOwnProperty("rexContainer")&&(e=r.rexContainer.parent);else for(e=fn(r);e&&e.name!==i;)e=fn(e);return e},jf=function(r){for(var i=fn(r);i;)r=i,i=fn(i);return r},qF=Phaser.Math.DegToRad,_F=Phaser.Math.RadToDeg,Zt=function(r){if(!r.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return _F(this.rotation)},set:function(e){this.rotation=qF(e)}}),Object.defineProperty(i,"displayWidth",{get:function(){return r.width*this.scaleX},set:function(e){this.scaleX=e/r.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return r.height*this.scaleY},set:function(e){this.scaleY=e/r.height}}),r.rexContainer=i}return r.rexContainer},tI={setParent(r,i){i===void 0&&(i=this);var e=Zt(r);return i?(e.parent=i,e.self=r):(e.parent=null,e.self=null),this},getParent(r,i){return typeof r=="string"&&(i=r,r=void 0),r===void 0&&(r=this),fn(r,i)},getTopmostParent(r){return r===void 0&&(r=this),jf(r)}},Yh=Phaser.Utils.Objects.GetValue,Om=pr.prototype.add,qf=function(r,i){this.setParent(r);var e=Zt(r);return Lm(e,i),this.resetChildState(r).updateChildVisible(r).updateChildActive(r).updateChildScrollFactor(r).updateChildMask(r),Om.call(this,r),this},_f=function(r,i){this.setParent(r);var e=Zt(r);return Lm(e,i),e.x=r.x,e.y=r.y,e.rotation=r.rotation,e.scaleX=r.scaleX,e.scaleY=r.scaleY,e.alpha=r.alpha,e.visible=r.visible,e.active=r.active,this.updateChildPosition(r).updateChildAlpha(r).updateChildVisible(r).updateChildActive(r).updateChildScrollFactor(r).updateChildMask(r),Om.call(this,r),this},Lm=function(r,i){r.syncPosition=Yh(i,"syncPosition",!0),r.syncRotation=Yh(i,"syncRotation",!0),r.syncScale=Yh(i,"syncScale",!0),r.syncAlpha=Yh(i,"syncAlpha",!0)},eI={add(r){return Array.isArray(r)?this.addMultiple(r):qf.call(this,r),this},pin(r,i){return Array.isArray(r)?this.addMultiple(r,i):qf.call(this,r,i),this},addMultiple(r){for(var i=0,e=r.length;i<e;i++)qf.call(this,r[i]);return this},addLocal(r){return Array.isArray(r)?this.addMultiple(r):_f.call(this,r),this},pinLocal(r,i){return Array.isArray(r)?this.addMultiple(r,i):_f.call(this,r,i),this},addLocalMultiple(r){for(var i=0,e=r.length;i<e;i++)_f.call(this,r[i]);return this}},iI=pr.prototype.remove,nI=pr.prototype.clear,sI={remove(r,i){return fn(r)!==this?this:(this.setParent(r,null),iI.call(this,r,i),this)},clear(r){for(var i=0,e=this.children.length;i<e;i++)this.setParent(this.children[i],null);return nI.call(this,r),this}},rI={getLocalState(r){return Zt(r)},resetChildState(r){return this.resetChildPositionState(r).resetChildVisibleState(r).resetChildAlphaState(r).resetChildActiveState(r),this},resetChildrenState(r){for(var i=0,e=r.length;i<e;i++)this.resetChildState(r[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Fm=Phaser.Math.RotateAround,aI={worldToLocal(r){return r.x-=this.x,r.y-=this.y,Fm(r,0,0,-this.rotation),r.x/=this.scaleX,r.y/=this.scaleY,r},localToWorld(r){return r.x*=this.scaleX,r.y*=this.scaleY,Fm(r,0,0,this.rotation),r.x+=this.x,r.y+=this.y,r}},pa=function(r,i){return r===i?1:r/i},oI={updateChildPosition(r){r.isRexContainerLite&&(r.syncChildrenEnable=!1);var i=Zt(r),e=i.parent;return i.syncPosition&&(r.x=i.x,r.y=i.y,e.localToWorld(r)),i.syncRotation&&(r.rotation=i.rotation+e.rotation),i.syncScale&&(r.scaleX=i.scaleX*e.scaleX,r.scaleY=i.scaleY*e.scaleY),r.isRexContainerLite&&(r.syncChildrenEnable=!0,r.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(r){var i=Zt(r),e=i.parent;return i.x=r.x,i.y=r.y,e.worldToLocal(i),i.scaleX=pa(r.scaleX,e.scaleX),i.scaleY=pa(r.scaleY,e.scaleY),i.rotation=r.rotation-e.rotation,this},setChildPosition(r,i,e){return r.x=i,r.y=e,this.resetChildPositionState(r),this},setChildLocalPosition(r,i,e){var d=Zt(r);return d.x=i,d.y=e,this.updateChildPosition(r),this},resetLocalPositionState(){var r=Zt(this).parent;return r&&r.resetChildPositionState(this),this}},hI=Phaser.Math.DegToRad,lI={updateChildRotation(r){var i=Zt(r),e=i.parent;return i.syncRotation&&(r.rotation=e.rotation+i.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(r){var i=Zt(r),e=i.parent;return i.rotation=r.rotation-e.rotation,this},setChildRotation(r,i){return r.rotation=i,this.resetChildRotationState(r),this},setChildAngle(r,i){return r.angle=i,this.resetChildRotationState(r),this},setChildLocalRotation(r,i){var e=Zt(r);return e.rotation=i,this.updateChildRotation(r),this},setChildLocalAngle(r,i){var e=Zt(r);return e.rotation=hI(i),this.updateChildRotation(r),this},resetLocalRotationState(){var r=Zt(this).parent;return r&&r.resetChildRotationState(this),this}},uI={updateChildScale(r){var i=Zt(r),e=i.parent;return i.syncScale&&(r.scaleX=e.scaleX*i.scaleX,r.scaleY=e.scaleY*i.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(r){var i=Zt(r),e=i.parent;return i.scaleX=pa(r.scaleX,e.scaleX),i.scaleY=pa(r.scaleY,e.scaleY),this},setChildScale(r,i,e){return e===void 0&&(e=i),r.scaleX=i,r.scaleY=e,this.resetChildScaleState(r),this},setChildLocalScale(r,i,e){e===void 0&&(e=i);var d=Zt(r);return d.scaleX=i,d.scaleY=e,this.updateChildScale(r),this},setChildDisplaySize(r,i,e){return r.setDisplaySize(i,e),this.resetChildScaleState(r),this},resetLocalScaleState(){var r=Zt(this).parent;return r&&r.resetChildScaleState(this),this}},fI={updateChildVisible(r){var i=Zt(r),e=i.parent,d=i.hasOwnProperty("maskVisible")?i.maskVisible:!0;return r.visible=e.visible&&i.visible&&d,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(r){var i=Zt(r);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=r.visible,this},setChildVisible(r,i){return this.setChildLocalVisible(r,i),this},setChildLocalVisible(r,i){i===void 0&&(i=!0);var e=Zt(r);return e.visible=i,this.updateChildVisible(r),this},setChildMaskVisible(r,i){i===void 0&&(i=!0);var e=Zt(r);return e.maskVisible=i,this.updateChildVisible(r),this},resetLocalVisibleState(){var r=Zt(this).parent;return r&&r.resetChildVisibleState(this),this}},dI={updateChildAlpha(r){var i=Zt(r),e=i.parent;return i.syncAlpha&&(r.alpha=e.alpha*i.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(r){var i=Zt(r),e=i.parent;return i.alpha=pa(r.alpha,e.alpha),this},setChildAlpha(r,i){return r.alpha=i,this.resetChildAlphaState(r),this},setChildLocalAlpha(r,i){var e=Zt(r);return e.alpha=i,this.updateChildAlpha(r),this},resetLocalAlphaState(){var r=Zt(this).parent;return r&&r.resetChildAlphaState(this),this}},vI={updateChildActive(r){var i=Zt(r),e=i.parent;return r.active=e.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(r){var i=Zt(r);return i.active=r.active,this},setChildActive(r,i){return r.active=i,this.resetChildActiveState(r),this},setChildLocalActive(r,i){i===void 0&&(i=!0);var e=Zt(r);return e.active=i,this.updateChildActive(r),this},resetLocalActiveState(){var r=Zt(this).parent;return r&&r.resetChildActiveState(this),this}},cI={updateChildScrollFactor(r){var i=Zt(r),e=i.parent;return r.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},pI={updateChildMask(r){if(this.mask==null)return this;var i=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return i!==r&&(r.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(r){return this.mask=r,this},clearMask(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this}},Uh=function(r,i){if(r.length===0)return r;i===void 0&&(i=!1);var e=r[0].scene,d=e.sys.displayList;return d.depthSort(),i?r.sort(function(t,n){return d.getIndex(n)-d.getIndex(t)}):r.sort(function(t,n){return d.getIndex(t)-d.getIndex(n)}),r},gI={setDepth(r,i){if(this.depth=r,!i&&this.children)for(var e=this.getAllChildren(),d=0,t=e.length;d<t;d++)e[d].depth=r;return this},swapDepth(r){var i=this.depth,e=r.depth;return this.setDepth(e),r.setDepth(i),this},incDepth(r){if(this.depth+=r,this.children)for(var i=this.getAllChildren(),e=0,d=i.length;e<d;e++)i[e].depth+=r;return this},moveDepthBelow(r){var i=r.scene.children,e=this.getAllChildren([this]);Uh(e);for(var d=0,t=e.length;d<t;d++){var n=e[d];if(i.exists(n)){i.moveBelow(r,n);break}}return this},moveDepthAbove(r){var i=r.scene.children,e=this.getAllChildren([this]);Uh(e,!0);for(var d=0,t=e.length;d<t;d++){var n=e[d];if(i.exists(n)){i.moveAbove(r,n);break}}return this}},Im=function(r,i){var e=i(r);if(!e&&r.isRexContainerLite)for(var d=r.children,t=0,n=d.length;t<n;t++)Im(d[t],i)},td=function(r,i){for(var e=[r];e.length>0;){var d=e.shift(),t=i(d);!t&&d.isRexContainerLite&&e.push(...d.children)}},ws=Phaser.Utils.Array,mI={getChildren(r){if(!r)r=this.children;else for(var i=0,e=this.children.length;i<e;i++)r.push(this.children[i]);return r},getAllChildren(r){r===void 0&&(r=[]);var i=this;return td(i,function(e){e!==i&&r.push(e)}),r},getAllVisibleChildren(r){r===void 0&&(r=[]);var i=this;return td(i,function(e){if(e!==i){if(!e.visible)return!0;r.push(e)}}),r},bfs(r,i){return i===void 0&&(i=this),td(i,r),this},dfs(r,i){return i===void 0&&(i=this),Im(i,r),this},contains(r){var i=fn(r);return i?i===this?!0:this.contains(i):!1},getByName(r,i){if(i){for(var e=[this],d,t;e.length;){d=e.shift();for(var n=0,u=d.children.length;n<u;n++){if(t=d.children[n],t.name===r)return t;t.isRexContainerLite&&e.push(t)}}return null}else return ws.GetFirst(this.children,"name",r)},getRandom(r,i){return ws.GetRandom(this.children,r,i)},getFirst(r,i,e,d){return ws.GetFirstElement(this.children,r,i,e,d)},getAll(r,i,e,d){return ws.GetAll(this.children,r,i,e,d)},count(r,i,e,d){return ws.CountAllMatching(this.children,r,i,e,d)},swap(r,i){return ws.Swap(this.children,r,i),this},setAll(r,i,e,d){return ws.SetAll(this.children,r,i,e,d),this}},ed=function(r){for(var i=[],e=0,d=r.length;e<d;e++){var t=r[e];!t.hasOwnProperty("rexContainer")||i.push(t.rexContainer)}return i},xI=function(r){for(var i=0,e=r.length;i<e;i++){var d=r[i].scene;if(d)return d}return null},wm=function(r,i,e){if(!e.parent){r.remove();return}var d=e.parent,t=e.self;switch(i){case"x":case"y":d.updateChildPosition(t);break;case"angle":case"rotation":d.updateChildRotation(t);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":d.updateChildScale(t);break;case"alpha":d.updateChildAlpha(t);break;default:d.updateChildPosition(t),d.updateChildRotation(t),d.updateChildScale(t),d.updateChildAlpha(t);break}},yI={tweenChild(r){var i=r.targets;Array.isArray(i)||(i=[i]);var e=this.scene||xI(i);if(!!e){r.targets=ed(i);var d=e.tweens.add(r);return d.on("update",wm),d}},createTweenChildConfig(r){var i=r.targets;i&&(Array.isArray(i)||(i=[i]),r.targets=ed(i));var e=r.onUpdate;return r.onUpdate=function(d,t){e&&e(d,t),wm(d,void 0,t)},r},tween(r){var i=this.scene;return r.targets||(r.targets=this),i.tweens.add(r)},timelineChild(r){var i=r.targets;i&&(Array.isArray(i)||(i=[i]),r.targets=ed(i));for(var e=r.tweens,d=0,t=e.length;d<t;d++)e[d]=this.createTweenChildConfig(e[d]);var n=this.scene.tweens.timeline(r);return n}},Dm=function(r){var i=this.getAllChildren([this]);return Uh(i),r.add(i),this},TI={addToLayer:Dm,addToContainer:Dm},CI=Phaser.Math.RotateAround,SI=function(r,i,e){e===void 0&&(e=i);var d={x:(i-r.originX)*r.displayWidth,y:(e-r.originY)*r.displayHeight};return CI(d,0,0,r.rotation),r.originX=i,r.originY=e,r.x=r.x+d.x,r.y=r.y+d.y,r},EI=function(r,i){this.syncChildrenEnable=!1,SI(this,r,i),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),d=0,t=e.length;d<t;d++)this.resetChildPositionState(e[d]);return this},Bm={changeOrigin:EI};Object.assign(Bm,tI,eI,sI,rI,aI,oI,lI,uI,fI,dI,vI,cI,pI,gI,mI,yI,TI);var ii=class extends pr{constructor(i,e,d,t,n,u){super(i,e,d,t,n);this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,u&&this.add(u)}destroy(i){!this.scene||(this.syncChildrenEnable=!1,super.destroy(i))}resize(i,e){return this.setSize(i,e),this}get x(){return this._x}set x(i){this._x!==i&&(this._x=i,this.syncPosition())}get y(){return this._y}set y(i){this._y!==i&&(this._y=i,this.syncPosition())}get rotation(){return super.rotation}set rotation(i){this.rotation!==i&&(super.rotation=i,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(i){this.scaleX!==i&&(super.scaleX=i,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(i){this.scaleY!==i&&(super.scaleY=i,this.syncPosition())}get scale(){return super.scale}set scale(i){this.scale!==i&&(super.scale=i,this.syncPosition())}get visible(){return super.visible}set visible(i){super.visible!==i&&(super.visible=i,this.syncVisible())}get alpha(){return super.alpha}set alpha(i){super.alpha!==i&&(super.alpha=i,this.syncAlpha())}get active(){return this._active}set active(i){this._active!==i&&(this._active=i,this.syncActive())}get mask(){return this._mask}set mask(i){this._mask!==i&&(this._mask=i,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(i){this._scrollFactorX!==i&&(this._scrollFactorX=i,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(i){this._scrollFactorY!==i&&(this._scrollFactorY=i,this.syncScrollFactor())}get list(){return this.children}static GetParent(i){return fn(i)}};Object.assign(ii.prototype,Bm);var Vh=Phaser.Utils.Objects.GetValue,Wh=class extends Ji{constructor(i,e,d,t,n,u){super(i,e,d);this.type="rexCircleMaskImage",this.setTexture(t,n,u)}setTexture(i,e,d){typeof e=="object"&&(d=e,e=void 0);var t,n;if(typeof d=="string"?(t=d,n=void 0):(t=Vh(d,"maskType",0),n=Vh(d,"backgroundColor",void 0)),t===void 0?t=0:typeof t=="string"&&(t=PI[t]),this._textureKey=i,this._frameName=e,t===null)return this.loadTexture(i,e),this.dirty=!0,this;var u=n!=null;u||this.loadTexture(i,e);var s=this.canvas,o=this.context,h=s.width,a=s.height;switch(o.save(),o.globalCompositeOperation=u?"source-over":"destination-in",o.beginPath(),t){case 2:var l=Vh(d,"radius",0),c=Vh(d,"iteration",void 0);s0(o,0,0,h,a,l,c);break;default:var f=Math.floor(h/2),v=Math.floor(a/2);t===0?o.arc(f,v,Math.min(f,v),0,2*Math.PI):o.ellipse(f,v,f,v,0,0,2*Math.PI);break}return u&&(o.fillStyle=n),o.fill(),o.restore(),u&&(o.save(),o.globalCompositeOperation="destination-atop",this.loadTexture(i,e),o.restore()),this.dirty=!0,this}resize(i,e){return this.setDisplaySize(i,e),this}},PI={circle:0,ellipse:1,roundRectangle:2},Xh=class{constructor(i,e){this.setParent(i),this.type=e,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(i){return this.parent=i,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(i){return i&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(i){this.setDirty(this._active!=i),this._active=i}setActive(i){return i===void 0&&(i=!0),this.active=i,this}modifyPorperties(i){return this}onFree(){this.reset().setParent()}reset(){return this}};Object.assign(Xh.prototype,Ch);var MI=Phaser.Math.DegToRad,AI=Phaser.Math.RadToDeg,Hh=Phaser.Utils.Objects.GetValue,ga=class extends Xh{constructor(i,e){super(i,e);this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(i){this.setDirty(this._visible!=i),this._visible=i}setVisible(i){return i===void 0&&(i=!0),this.visible=i,this}get alpha(){return this._alpha}set alpha(i){this.setDirty(this._alpha!=i),this._alpha=i}setAlpha(i){return this.alpha=i,this}get x(){return this._x}set x(i){this.setDirty(this._x!=i),this._x=i}setX(i){return this.x=i,this}get y(){return this._y}set y(i){this.setDirty(this._y!=i),this._y=i}setY(i){return this.y=i,this}setPosition(i,e){return this.x=i,this.y=e,this}get rotation(){return this._rotation}set rotation(i){this.setDirty(this._rotation!=i),this._rotation=i}setRotation(i){return this.rotation=i,this}get angle(){return AI(this._rotation)}set angle(i){this.rotation=MI(i)}setAngle(i){return this.angle=i,this}get scaleX(){return this._scaleX}set scaleX(i){this.setDirty(this._scaleX!==i),this._scaleX=i}setScaleX(i){return this.scaleX=i,this}get width(){return 0}set width(i){}setWidth(i,e){return e===void 0&&(e=!1),this.width=i,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(i){this.setDirty(this._leftSpace!==i),this._leftSpace=i}setLeftSpace(i){return this.leftSpace=i,this}get rightSpace(){return this._rightSpace}set rightSpace(i){this.setDirty(this._rightSpace!==i),this._rightSpace=i}setRightSpace(i){return this.rightSpace=i,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(i){this.setDirty(this._scaleY!==i),this._scaleY=i}setScaleY(i){return this.scaleY=i,this}get height(){return 0}set height(i){}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}setScale(i,e){return e===void 0&&(e=i),this.scaleX=i,this.scaleY=e,this}setOrigin(i){return this.originX=i,this}setAlign(i){return this.align=i,this}modifyPorperties(i){if(!i)return this;i.hasOwnProperty("x")&&this.setX(i.x),i.hasOwnProperty("y")&&this.setY(i.y),i.hasOwnProperty("rotation")?this.setRotation(i.rotation):i.hasOwnProperty("angle")&&this.setAngle(i.angle),i.hasOwnProperty("alpha")&&this.setAlpha(i.alpha);var e=Hh(i,"width",void 0),d=Hh(i,"height",void 0),t=Hh(i,"scaleX",void 0),n=Hh(i,"scaleY",void 0);return e!==void 0?d===void 0&&n===void 0?this.setWidth(e,!0):this.setWidth(e):t!==void 0&&this.setScaleX(t),d!==void 0?e===void 0&&t===void 0?this.setHeight(d,!0):this.setHeight(d):n!==void 0&&this.setScaleY(n),i.hasOwnProperty("leftSpace")&&this.setLeftSpace(i.leftSpace),i.hasOwnProperty("rightSpace")&&this.setRightSpace(i.rightSpace),i.hasOwnProperty("align")&&this.setAlign(i.align),this}setDrawBelowCallback(i){return this.drawBelowCallback=i,this}setDrawAboveCallback(i){return this.drawAboveCallback=i,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var i=this.context;i.save();var e=this.x+this.leftSpace+this.offsetX-this.originX*this.width,d=this.y+this.offsetY;this.autoRound&&(e=Math.round(e),d=Math.round(d)),i.translate(e,d),i.globalAlpha=this.alpha,i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore()}},Ds=Phaser.Utils.Objects.GetValue,Gm=class extends ga{constructor(i,e){super(i,"background");this.setColor(Ds(e,"color",null),Ds(e,"color2",null),Ds(e,"horizontalGradient",!0)),this.setStroke(Ds(e,"stroke",null),Ds(e,"strokeThickness",2)),this.setCornerRadius(Ds(e,"cornerRadius",0),Ds(e,"cornerIteration",null))}set color(i){i=Yt(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=Yt(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,d){return d===void 0&&(d=!0),this.color=i,this.color2=e,this.horizontalGradient=d,this}set stroke(i){i=Yt(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}set cornerRadius(i){this.setDirty(this._cornerRadius!=i),this._cornerRadius=i}get cornerRadius(){return this._cornerRadius}set cornerIteration(i){this.setDirty(this._cornerIteration!=i),this._cornerIteration=i}get cornerIteration(){return this._cornerIteration}setCornerRadius(i,e){return this.cornerRadius=i,this.cornerIteration=e,this}drawContent(){If(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}},ma=Phaser.Utils.Objects.GetValue,Nm=class extends ga{constructor(i,e){super(i,"background");this.setColor(ma(e,"color",null),ma(e,"color2",null),ma(e,"horizontalGradient",!0)),this.setStroke(ma(e,"stroke",null),ma(e,"strokeThickness",2))}set color(i){i=Yt(i,this.canvas,this.context),this.setDirty(this._color!=i),this._color=i}get color(){return this._color}set color2(i){i=Yt(i,this.canvas,this.context),this.setDirty(this._color2!=i),this._color2=i}get color2(){return this._color2}set horizontalGradient(i){this.setDirty(this._horizontalGradient!=i),this._horizontalGradient=i}get horizontalGradient(){return this._horizontalGradient}setColor(i,e,d){return d===void 0&&(d=!0),this.color=i,this.color2=e,this.horizontalGradient=d,this}set stroke(i){i=Yt(i,this.canvas,this.context),this.setDirty(this._stroke!=i),this._stroke=i}get stroke(){return this._stroke}set strokeThickness(i){this.setDirty(this._strokeThickness!=i),this._strokeThickness=i}get strokeThickness(){return this._strokeThickness}setStroke(i,e){return this.stroke=i,this.strokeThickness=e,this}drawContent(){var i=this.parent.padding,e=i.left,d=i.top,t=this.parent.width-i.left-i.right,n=this.parent.height-i.top-i.bottom,u=this.context;if(this.color!=null){var s;if(this.color2!=null){var o;this.horizontalGradient?o=u.createLinearGradient(0,0,t,0):o=u.createLinearGradient(0,0,0,n),o.addColorStop(0,this.color),o.addColorStop(1,this.color2),s=o}else s=this.color;u.fillStyle=s,u.fillRect(e,d,t,n)}this.stroke!=null&&this.strokeThickness>0&&(u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.strokeRect(e,d,t,n))}},$h=function(r,i,e){return i.hasOwnProperty(r)?i[r]:e[r]},ni=Phaser.Utils.Objects.GetValue,xa=class{constructor(i){this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,align:this.align}}set(i){return this.setBold(ni(i,"bold",!1)),this.setItalic(ni(i,"italic",!1)),this.setFontSize(ni(i,"fontSize","16px")),this.setFontFamily(ni(i,"fontFamily","Courier")),this.setColor(ni(i,"color","#fff")),this.setStrokeStyle(ni(i,"stroke",null),ni(i,"strokeThickness",0)),this.setShadow(ni(i,"shadowColor",null),ni(i,"shadowOffsetX",0),ni(i,"shadowOffsetY",0),ni(i,"shadowBlur",0)),this.setOffset(ni(i,"offsetX",0),ni(i,"offsetY",0)),this.setAlign(ni(i,"align",void 0)),this}modify(i){return i.hasOwnProperty("bold")&&this.setBold(i.bold),i.hasOwnProperty("italic")&&this.setItalic(i.italic),i.hasOwnProperty("fontSize")&&this.setFontSize(i.fontSize),i.hasOwnProperty("fontFamily")&&this.setFontFamily(i.fontFamily),i.hasOwnProperty("color")&&this.setColor(i.color),(i.hasOwnProperty("stroke")||i.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle($h("stroke",i,this),$h("strokeThickness",i,this)),i.hasOwnProperty("shadowColor")&&this.setShadowColor(i.shadowColor),(i.hasOwnProperty("shadowOffsetX")||i.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset($h("shadowOffsetX",i,this),$h("shadowOffsetY",i,this)),i.hasOwnProperty("shadowBlur")&&this.setShadowBlur(i.shaodwBlur),i.hasOwnProperty("offsetX")&&this.setOffsetX(i.offsetX),i.hasOwnProperty("offsetY")&&this.setOffsetY(i.offsetY),i.hasOwnProperty("align")&&this.setAlign(i.align),this}clone(){return new xa(this.toJSON())}copyFrom(i){return this.set(i.toJSON()),this}copyTo(i){return i.set(this.toJSON()),this}setBold(i){return i===void 0&&(i=!0),this.bold=i,this}setItalic(i){return i===void 0&&(i=!0),this.italic=i,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(i){return typeof i=="number"&&(i=`${i}px`),this.fontSize=i,this}setFontFamily(i){return this.fontFamily=i,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(i){return this.color=Yt(i),this}get hasFill(){return this.color!=null}setStrokeStyle(i,e){return this.stroke=Yt(i),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(i){return this.strokeThickness=i,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(i){return this.shadowColor=Yt(i),this}setShadowOffset(i,e){return i===void 0&&(i=0),e===void 0&&(e=0),this.shadowOffsetX=i,this.shadowOffsetY=e,this}setShadowBlur(i){return i===void 0&&(i=0),this.shaodwBlur=i,this}setShadow(i,e,d,t){return this.setShadowColor(i).setShadowOffset(e,d).setShadowBlur(t),this}setOffsetX(i){return i===void 0&&(i=0),this.offsetX=i,this}setOffsetY(i){return i===void 0&&(i=0),this.offsetY=i,this}setOffset(i,e){return this.setOffsetX(i).setOffsetY(e),this}setAlign(i){return this.align=i,this}syncFont(i){return i.font=this.font,this}syncStyle(i){i.textBaseline="alphabetic";var e=this.hasFill,d=this.hasStroke;return i.fillStyle=e?this.color:"#000",i.strokeStyle=d?this.stroke:"#000",i.lineWidth=d?this.strokeThickness:0,i.lineCap="round",i.lineJoin="round",this}syncShadow(i){i.shadowColor!=null?(i.shadowColor=this.shadowColor,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.shadowBlur=this.shadowBlur):(i.shadowColor=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0)}getTextMetrics(i,e){return this.syncFont(i).syncStyle(i),i.measureText(e)}},RI=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=0),r>0&&i>0?(this.fixedWidth!==r||this.fixedHeight!==i)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=r,this.fixedHeight=i,this},Kh=Phaser.Utils.Objects.GetValue,Zh=function(r,i){return i===void 0?r:r[i]},Jh=function(r,i,e){var d=typeof i;d==="string"?r[i]=e:d==="number"?(r.left=i,r.right=i,r.top=i,r.bottom=i):(r.left=Kh(i,"left",0),r.right=Kh(i,"right",0),r.top=Kh(i,"top",0),r.bottom=Kh(i,"bottom",0))},OI=function(r,i){var e=this.padding,d=e.left,t=e.right,n=e.top,u=e.bottom;return Jh(e,r,i),this.dirty=this.dirty||d!=e.left||t!=e.right||n!=e.top||u!=e.bottom,this},LI=function(r){return Zh(this.padding,r)},FI=function(r){return this.textStyle.modify(r),this},II=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},wI=function(r){return this.poolManager.free(r),RemoveItem(this.children.list,r),this.lastAppendedChildren.length=0,this.dirty=!0,this},DI=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},BI=function(){return this.setText(),this},GI=function(r){return this.lastAppendedChildren.length=0,Array.isArray(r)?(this.children.push(...r),this.lastAppendedChildren.push(...r)):(this.children.push(r),this.lastAppendedChildren.push(r)),this},ya="text",id="image",nd="command",Qh=function(r){var i=r.type;return i===ya||i===id},bm=function(r){return r.type===ya&&r.text===`
`},NI=function(r){return r.type===nd},zm=class extends ga{constructor(i,e,d){super(i,ya);this.style=new xa(d),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(i){this.style&&(this.style.offsetX=i)}get offsetY(){return this.style.offsetY}set offsetY(i){this.style&&(this.style.offsetY=i)}get align(){return this.style.align}set align(i){this.style&&(this.style.align=i)}modifyStyle(i){return this.setDirty(!0),this.style.modify(i),this}modifyPorperties(i){return i?(this.modifyStyle(i),super.modifyPorperties(i),this):this}setText(i){return this.setDirty(this.text!=i),this.text=i,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var e,d;i.hasOwnProperty("actualBoundingBoxAscent")?(e=i.actualBoundingBoxAscent,d=i.actualBoundingBoxDescent):(e=0,d=0),this.textHeight=e+d}return this}get width(){return this.textWidth*this.scaleX}set width(i){this.textWidth>0?this.scaleX=i/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(i){this.textHeight>0?this.scaleY=i/this.textHeight:this.scaleY=1}drawContent(){var i=this.style,e=i.hasFill,d=i.hasStroke;if(!(!e&&!d)){var t=this.context;i.syncFont(t).syncStyle(t),d&&(i.syncShadow(t),t.strokeText(this.text,0,0)),e&&(i.syncShadow(t),t.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}},kh=function(r,i){i&&this.textStyle.modify(i);for(var e=[],d=0,t=r.length;d<t;d++){var n=r.charAt(d),u=this.poolManager.allocate(ya);u===null?u=new zm(this,n,this.textStyle):u.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),e.push(u)}return this.addChild(e),this},bI=function(r,i){return r===void 0&&(r=""),this.removeChildren(),kh.call(this,r,i),this.dirty=!0,this},Ym=class extends ga{constructor(i,e,d){super(i,id);this.setTexture(e,d)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(i){}get key(){return this._key}set key(i){this.setDirty(this._key!=i),this._key=i}get frame(){return this._frame}set frame(i){this.setDirty(this._frame!=i),this._frame=i}setTexture(i,e){return this.key=i,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(i,e),this}get width(){return this.frameWidth*this.scaleX}set width(i){this.setDirty(this.width!==i),this.scaleX=i/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(i){this.setDirty(this.height!==i),this.scaleY=i/this.frameHeight}setHeight(i,e){return e===void 0&&(e=!1),this.height=i,e&&(this.scaleX=this.scaleY),this}drawContent(){var i=this.context,e=this.frameObj,d=this.frameWidth,t=this.frameHeight;i.drawImage(e.source.image,e.cutX,e.cutY,d,t,0,0,d,t)}draw(){if(!this.visible)return this;super.draw()}},Um=function(r,i,e){var d=this.poolManager.allocate(id);return d===null?d=new Ym(this,r,i):d.setParent(this).setActive().setTexture(r,i),d.modifyPorperties(e),this.addChild(d),this},Vm=class extends Xh{constructor(i,e,d,t,n){super(i,nd);this.setName(e).setParameter(t).setCallback(d,n)}setName(i){return this.name=i,this}setParameter(i){return this.param=i,this}setCallback(i,e){return this.callback=i,this.scope=e,this}exec(){var i;return this.scope?i=this.callback.call(this.scope,this.param,this.name):i=this.callback(this.param,this.name),i}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},Ut=function(r,i,e,d){var t=this.poolManager.allocate(nd);return t===null?t=new Vm(this,r,i,e,d):t.setParent(this).setActive().setName(r).setCallback(i,d).setParameter(e),this.addChild(t),this},zI=function(r){return r===void 0&&(r={}),this.wrapConfig=r,this},YI=function(r,i,e,d){d===void 0&&(d={word:[],width:0}),d.word.length=0;for(var t=r.length,n=i,u=d.word,s=0;n<t;){var o=r[n];if(o.type===ya&&o.text!==" "&&o.text!==`
`)u.push(o),s+=o.outerWidth,n++;else{n===i&&(u.push(o),s+=o.outerWidth);break}if(e)break}return d.width=s,d},Wm=function(r,i,e){if(!(i===0&&e===0))for(var d=0,t=r.length;d<t;d++){var n=r[d];!Qh(n)||(n.x+=i,n.y+=e)}},UI=function(r){for(var i=0,e=r.length;i<e;i++){var d=r[i];if(d.align!==void 0)return d.align}},VI=function(r,i,e){var d=r.hAlign,t=r.vAlign,n,u,s=r.linesHeight;switch(t){case 1:case"center":u=(e-s)/2;break;case 2:case"bottom":u=e-s;break;default:u=0;break}for(var o=r.lines,h=0,a=o.length;h<a;h++){var l=o[h],c=l.width,f=l.children,v=UI(f);switch(v===void 0&&(v=d),v){case 1:case"center":n=(i-c)/2;break;case 2:case"right":n=i-c;break;default:n=0;break}Wm(f,n,u)}},Di=Phaser.Utils.Objects.GetValue,WI=function(r){var i=Di(r,"start",0),e=Di(r,"padding.top",0),d=Di(r,"padding.bottom",0),t=Di(r,"lineHeight",void 0),n;if(t===void 0)if(n=Di(r,"maxLines",0),this.fixedHeight>0){var N=this.fixedHeight-this.padding.top-this.padding.bottom-e-d;t=N/n}else t=0;else if(this.fixedHeight>0){if(n=Di(r,"maxLines",void 0),n===void 0){var N=this.fixedHeight-this.padding.top-this.padding.bottom-e-d;n=Math.floor(N/t)}}else n=Di(r,"maxLines",0);var u=n===0,s=Di(r,"wrapWidth",void 0);s===void 0&&(this.fixedWidth>0?s=this.fixedWidth-this.padding.left-this.padding.right:s=Infinity);for(var o=Di(r,"letterSpacing",0),h=Di(r,"hAlign",0),a=Di(r,"vAlign",0),l=Di(r,"charWrap",!1),c={start:i,isLastPage:!1,padding:{top:e,bottom:d},lineHeight:t,maxLines:n,wrapWidth:s,letterSpacing:o,hAlign:h,vAlign:a,charWrap:l,children:[],lines:[],maxLineWidth:0,linesHeight:0},f=this.children,v=0,p=f.length;v<p;v++)f[v].setActive(!1);s+=o;for(var g=this.padding.left,m=this.padding.top+t+e,x=g,y=m,T=s,C=i,S=f.length,E=c.children,M=c.lines,R=[],L=0,O=0,F;C<S;){var D=f[C];if(!Qh(D)){C++,D.setActive(),E.push(D),R.push(D);continue}F=YI(f,C,l,F);var B=F.word,b=B.length,V=F.width+b*o;C+=b;var X=bm(B[0]);if(T<V||X){if(X){var K=B[0];K.setActive().setPosition(x,y),E.push(K),R.push(K)}if(x=g,y+=t,T=s,M.push({children:R,width:L}),O=Math.max(O,L),L=0,R=[],!u&&M.length===n)break;if(X)continue}T-=V,L+=V;for(var v=0,p=B.length;v<p;v++){var K=B[v];K.setActive().setPosition(x,y),E.push(K),R.push(K),x+=K.outerWidth+o}}R.length>0&&(M.push({children:R,width:L}),O=Math.max(O,L)),c.start+=E.length,c.isLastPage=c.start===S,c.maxLineWidth=O,c.linesHeight=M.length*t+e+d;var J=this.fixedWidth>0?this.fixedWidth:c.maxLineWidth+this.padding.left+this.padding.right,G=this.fixedHeight>0?this.fixedHeight:c.linesHeight+this.padding.top+this.padding.bottom,w=J-this.padding.left-this.padding.right,N=G-this.padding.top-this.padding.bottom-e-d;return VI(c,w,N),this.setSize(J,G),c},XI=Phaser.Utils.Objects.Merge,HI=function(r){return r===void 0&&(r={}),WI.call(this,XI(r,this.wrapConfig))},$I=function(r,i,e){var d=r.hAlign,t=r.vAlign,n,u,s=r.rtl,o=r.lines,h=r.lineWidth,a=r.linesWidth;switch(d){case 1:case"center":n=(i-a)/2;break;case 2:case"right":n=i-a;break;default:n=0;break}s&&(n+=h);for(var l=0,c=o.length;l<c;l++){var f=o[s?c-l-1:l],v=f.children,p=f.height,g=GetChildrenAlign(v);switch(g===void 0&&(g=t),g){case 1:case"center":u=(e-p)/2;break;case 2:case"bottom":u=e-p;break;default:u=0;break}Wm(v,n,u),n+=h}},Ye=Phaser.Utils.Objects.GetValue,KI=function(r){var i=Ye(r,"start",0),e=Ye(r,"padding.top",0),d=Ye(r,"padding.bottom",0),t=Ye(r,"padding.left",0),n=Ye(r,"padding.right",0),u=Ye(r,"lineWidth",void 0),s;if(u===void 0)if(s=Ye(r,"maxLines",0),this.fixedWidth>0){var w=this.fixedWidth-this.padding.left-this.padding.right-t-n;u=w/s}else u=0;else if(this.fixedWidth>0){if(s=Ye(r,"maxLines",void 0),s===void 0){var w=this.fixedWidth-this.padding.left-this.padding.right;s=Math.floor(w/u)}}else s=Ye(r,"maxLines",0);var o=s===0,h=Ye(r,"fixedChildHeight",void 0);if(h===void 0){var a=Ye(r,"charPerLine",void 0);if(a!==void 0){var N=this.fixedHeight-this.padding.top-this.padding.bottom-e-d;h=Math.floor(N/a)}}var l=Ye(r,"wrapHeight",void 0);l===void 0&&(this.fixedHeight>0?l=this.fixedHeight-this.padding.top-this.padding.bottom:l=Infinity);for(var c=Ye(r,"letterSpacing",0),f=Ye(r,"rtl",!0),v=Ye(r,"hAlign",f?2:0),p=Ye(r,"vAlign",0),g={start:i,isLastPage:!1,padding:{top:e,bottom:d,left:t,right:n},lineWidth:u,maxLines:s,fixedChildHeight:h,wrapHeight:l,letterSpacing:c,hAlign:v,vAlign:p,rtl:f,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,x=0,y=m.length;x<y;x++)m[x].setActive(!1);l+=c;for(var T=this.padding.left+t,C=this.padding.top+e,S=T,E=C,M=l,R=i,L=m.length,O=g.children,F=g.lines,D=[],B=0,b=0;R<L;){var V=m[R];if(R++,!Qh(V)){V.setActive(),O.push(V),D.push(V);continue}var X=(h!==void 0?h:V.height)+c,K=bm(V);if(M<X||K){if(K&&(V.setActive().setPosition(S,E).setOrigin(.5),O.push(V),D.push(V)),S=T,E=C,M=l,F.push({children:D,height:B}),b=Math.max(b,B),B=0,D=[],!o&&F.length===s)break;if(K)continue}M-=X,B+=X,V.setActive().setPosition(S,E).setOrigin(.5),O.push(V),D.push(V),E+=X}D.length>0&&(F.push({children:D,height:B}),b=Math.max(b,B)),g.start+=O.length,g.isLastPage=g.start===L,g.maxLineHeight=b,g.linesWidth=F.length*u+t+n;var J=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,G=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,w=J-this.padding.left-this.padding.right-t-n,N=G-this.padding.top-this.padding.bottom-e-d;return $I(g,w,N),this.setSize(J,G),g},ZI=Phaser.Utils.Objects.Merge,JI=function(r){return r===void 0&&(r={}),KI.call(this,ZI(r,this.wrapConfig))},QI=function(){this.clear();var r=this.fixedWidth>0?this.fixedWidth:this.width,i=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(r,i),this.background.active&&this.background.draw();for(var e,d=0,t=this.children.length;d<t;d++)e=this.children[d],e.active&&e.visible&&e.draw();this.innerBounds.active&&this.innerBounds.draw()},kI=function(){return this.children},jI=function(){return this.lastAppendedChildren},qI=Phaser.Utils.Array.GetAll,_I=function(){return qI(this.children,"active",!0)},tw={setFixedSize:RI,setPadding:OI,getPadding:LI,modifyTextStyle:FI,resetTextStyle:II,removeChild:wI,removeChildren:DI,clearContent:BI,addChild:GI,setText:bI,appendText:kh,appendImage:Um,appendCommand:Ut,setWrapConfig:zI,runWordWrap:HI,runVerticalWrap:JI,drawContent:QI,getChildren:kI,getLastAppendedChildren:jI,getActiveChildren:_I},ew=Phaser.Utils.Objects.GetFastValue,iw={},Xm=class{constructor(i){this.pools=ew(i,"pools",iw)}free(i){if(!this.pools)return this;var e=i.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new ln),this.pools[e].push(i),i.onFree(),this}freeMultiple(i){if(!this.pools)return this;for(var e=0,d=i.length;e<d;e++)this.free(i[e]);return this}allocate(i){return!this.pools||!this.pools.hasOwnProperty(i)?null:this.pools[i].pop()}},Hm=Phaser.Utils.Objects.IsPlainObject,Bi=Phaser.Utils.Objects.GetValue,Bs=class extends Ji{constructor(i,e,d,t,n,u){Hm(e)?(u=e,e=Bi(u,"x",0),d=Bi(u,"y",0),t=Bi(u,"width",0),n=Bi(u,"height",0)):Hm(t)&&(u=t,t=Bi(u,"width",0),n=Bi(u,"height",0));var s=t===0?1:t,o=n===0?1:n;super(i,e,d,s,o);this.type="rexDynamicText",this.autoRound=!0,this.padding={};var h=Bi(u,"style",void 0);this.defaultTextStyle=new xa(h),this.textStyle=this.defaultTextStyle.clone(),this.background=new Gm(this,Bi(u,"background",void 0)),this.innerBounds=new Nm(this,Bi(u,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new Xm(u),this.setFixedSize(t,n),this.setPadding(Bi(u,"padding",0)),this.setWrapConfig(Bi(u,"wrap",void 0));var a=Bi(u,"text",void 0);a&&this.setText(a)}updateTexture(){return this.drawContent(),super.updateTexture(),this}};Object.assign(Bs.prototype,tw);var gr={setEventEmitter(r,i){return i===void 0&&(i=Phaser.Events.EventEmitter),this._privateEE=r===!0||r===void 0,this._eventEmitter=this._privateEE?new i:r,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(r){return this._eventEmitter&&r&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},$m=function(r){return r.replace(nw,"\\$&").replace(sw,"\\x2d")},nw=/[|\\{}()[\]^$+*?.]/g,sw=/-/g,rw=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,Km=function(r){return typeof r!="string"||(r===""?r=null:rw.test(r)?r=parseFloat(r):r==="false"?r=!1:r==="true"&&(r=!0)),r},aw=function(r,i){if(r==null)return[];for(var e=r.split(","),d=0,t=e.length;d<t;d++)e[d]=i(e[d]);return e},ow="[a-z0-9-_.]+",hw="[ #a-z-_.0-9,|&]+",lw=function(r){return r},sd=class{constructor(i){this.setEventEmitter(Ti(i,"eventEmitter",void 0)),this.setTagExpression(Ti(i,"regex.tag",ow)),this.setValueExpression(Ti(i,"regex.value",hw)),this.setValueConverter(Ti(i,"valueConvert",!0));var e=Ti(i,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(i){return this.tagExpression=i,this}setValueExpression(i){return this.valueExpression=i,this}setValueConverter(i){return i===!0?i=Km:i||(i=lw),this.valueConverter=i,this}setDelimiters(i,e){e===void 0&&(e=i[1],i=i[0]),this.delimiterLeft=i,this.delimiterRight=e,i=$m(i),e=$m(e);var d=`${i}(${this.tagExpression})(=(${this.valueExpression}))?${e}`,t=`${i}/(${this.tagExpression})${e}`;return this.reTagOn=RegExp(d,"i"),this.reTagOff=RegExp(t,"i"),this.reSplit=RegExp(`${d}|${t}`,"gi"),this}setSource(i){return this.source=i,this}resetIndex(i){return i===void 0&&(i=0),this.progressIndex=i,this.reSplit.lastIndex=i,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(i){return this.setSource(i).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var i=this.source,e=i.length;for(this.reSplit.lastIndex===0&&this.onStart();!this.isPaused;){var d=this.reSplit.exec(i);if(!d){this.progressIndex<e&&this.onContent(i.substring(this.progressIndex,e)),this.onComplete();return}var t=d[0],n=this.reSplit.lastIndex-t.length;this.progressIndex<n&&this.onContent(i.substring(this.progressIndex,n)),this.reTagOff.test(t)?this.onTagEnd(t):this.onTagStart(t),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(i){this.emit("content",i),this.lastContent=i}onTagStart(i){var e=i.match(this.reTagOn),d=e[1],t=aw(e[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${d}`,...t),this.skipEventFlag||this.emit("+",d,...t),this.lastTagStart=d}onTagEnd(i){var e=i.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${e}`),this.skipEventFlag||this.emit("-",e),this.lastTagEnd=e}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};Object.assign(sd.prototype,gr);var uw=Phaser.Utils.Objects.GetValue,fw=function(r,i,e){var d=uw(e,"tags.color","color"),t;i.on("start",function(){t=r.textStyle.color}).on(`+${d}`,function(n){r.textStyle.setColor(n),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setColor(t),i.skipEvent()}).on("complete",function(){r.textStyle.setColor(t)})},dw=Phaser.Utils.Objects.GetValue,vw=function(r,i,e){var d=dw(e,"tags.stroke","stroke"),t;i.on("start",function(){t=r.textStyle.stroke,r.textStyle.setStrokeStyle(null)}).on(`+${d}`,function(n){n===void 0&&(n=t),r.textStyle.setStrokeStyle(n),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setStrokeStyle(null),i.skipEvent()}).on("complete",function(){r.textStyle.setStrokeStyle(t)})},cw=Phaser.Utils.Objects.GetValue,pw=function(r,i,e){var d=cw(e,"tags.b","b");i.on("start",function(){r.textStyle.setBold(!1)}).on(`+${d}`,function(){r.textStyle.setBold(!0),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setBold(!1),i.skipEvent()})},gw=Phaser.Utils.Objects.GetValue,mw=function(r,i,e){var d=gw(e,"tags.i","i");i.on("start",function(){r.textStyle.setItalic(!1)}).on(`+${d}`,function(){r.textStyle.setItalic(!0),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setItalic(!1),i.skipEvent()})},xw=Phaser.Utils.Objects.GetValue,yw=function(r,i,e){var d=xw(e,"tags.size","size"),t;i.on("start",function(){t=r.textStyle.fontSize}).on(`+${d}`,function(n){r.textStyle.setFontSize(n),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setFontSize(t),i.skipEvent()}).on("complete",function(){r.textStyle.setFontSize(t)})},Tw=Phaser.Utils.Objects.GetValue,Cw=function(r,i,e){var d=Tw(e,"tags.y","y"),t;i.on("start",function(){t=r.textStyle.offsetY,r.textStyle.setOffsetY(0)}).on(`+${d}`,function(n){n===void 0&&(n=t),r.textStyle.setOffsetY(n),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setOffsetY(0),i.skipEvent()}).on("complete",function(){r.textStyle.setOffsetY(0)})},Sw=Phaser.Utils.Objects.GetValue,Ew=function(r,i,e){var d=Sw(e,"tags.shadow","shadow"),t;i.on("start",function(){t=r.textStyle.shadowColor,r.textStyle.setShadowColor(null)}).on(`+${d}`,function(n){n===void 0&&(n=t),r.textStyle.setShadowColor(n),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setShadowColor(null),i.skipEvent()}).on("complete",function(){r.textStyle.setShadowColor(t)})},Pw=Phaser.Utils.Objects.GetValue,Mw=function(r,i,e){var d=Pw(e,"tags.align","align");i.on(`+${d}`,function(t){r.textStyle.setAlign(t),i.skipEvent()}).on(`-${d}`,function(){r.textStyle.setAlign(),i.skipEvent()}).on("complete",function(){r.textStyle.setAlign()})},Aw=Phaser.Utils.Objects.GetValue,Rw=function(r,i,e){var d=Aw(e,"tags.img","img");i.on(`+${d}`,function(t){var n=r.imageManager.get(t);Um.call(r,n.key,n.frame,{width:n.width,hieght:n.height,leftSpace:n.left,rightSpace:n.right}),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Ow=Phaser.Utils.Objects.GetValue,Lw=function(r,i,e){var d=Ow(e,"tags.speed","speed"),t;i.on("start",function(){t=r.typeWriter.speed}).on(`+${d}`,function(n){Zm(r,n),i.skipEvent()}).on(`-${d}`,function(){Zm(r,t),i.skipEvent()}).on("complete",function(){r.typeWriter.speed=t})},Fw=function(r){this.typeWriter.setSpeed(r)},Zm=function(r,i){Ut.call(r,"speed",Fw,i,r)},Iw=Phaser.Utils.Objects.GetValue,Dw=function(r,i,e){var d=Iw(e,"tags.se","se");i.on(`+${d}`,function(t,n){Ut.call(r,"se",ww,[t,n],r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},ww=function(r){if(!this.skipSoundEffect){var i=r[0],e=r[1];this.soundManager.playSoundEffect(i),e&&this.soundManager.fadeInSoundEffect(e)}},Bw=Phaser.Utils.Objects.GetValue,Nw=function(r,i,e){var d=Bw(e,"tags.se.fadein","se.fadein");i.on(`+${d}`,function(t){Ut.call(r,"se.fadein",Gw,t,r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Gw=function(r){this.soundManager.fadeInSoundEffect(r)},bw=Phaser.Utils.Objects.GetValue,Yw=function(r,i,e){var d=bw(e,"tags.se.fadeout","se.fadeout");i.on(`+${d}`,function(t,n){n=n==="stop",Ut.call(r,"se.fadeout",zw,[t,n],r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},zw=function(r){this.soundManager.fadeOutSoundEffect(...r)},Uw=Phaser.Utils.Objects.GetValue,Ww=function(r,i,e){var d=Uw(e,"tags.se.volume","se.volume");i.on(`+${d}`,function(t){Ut.call(r,"se.volume",Vw,t,r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Vw=function(r){this.soundManager.setSoundEffectVolume(r)},Xw=Phaser.Utils.Objects.GetValue,Kw=function(r,i,e){var d=Xw(e,"tags.bgm","bgm");i.on(`+${d}`,function(t,n){Ut.call(r,"bgm",Hw,[t,n],r),i.skipEvent()}).on(`-${d}`,function(){Ut.call(r,"bgm.stop",$w,void 0,r),i.skipEvent()})},Hw=function(r){var i=r[0],e=r[1];this.soundManager.playBackgroundMusic(i),e&&this.soundManager.fadeInBackgroundMusic(e)},$w=function(){this.soundManager.stopBackgroundMusic()},Zw=Phaser.Utils.Objects.GetValue,Qw=function(r,i,e){var d=Zw(e,"tags.bgm.fadein","bgm.fadein");i.on(`+${d}`,function(t){Ut.call(r,"bgm.fadein",Jw,t,r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},Jw=function(r){this.soundManager.fadeInBackgroundMusic(r)},kw=Phaser.Utils.Objects.GetValue,qw=function(r,i,e){var d=kw(e,"tags.bgm.fadeout","bgm.fadeout");i.on(`+${d}`,function(t,n){Ut.call(r,"bgm.fadeout",jw,[t,n],r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},jw=function(r){this.soundManager.fadeOutBackgroundMusic(...r)},_w=Phaser.Utils.Objects.GetValue,eD=function(r,i,e){var d=_w(e,"tags.bgm.cross","bgm.cross");i.on(`+${d}`,function(t,n){Ut.call(r,"bgm.cross",tD,[t,n],r),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},tD=function(r){this.soundManager.crossFadeBackgroundMusic(...r)},iD=Phaser.Utils.Objects.GetValue,rD=function(r,i,e){var d=iD(e,"tags.bgm.pause","bgm.pause");i.on(`+${d}`,function(){Ut.call(r,"bgm.pause",nD,void 0,r),i.skipEvent()}).on(`-${d}`,function(){Ut.call(r,"bgm.resume",sD,void 0,r),i.skipEvent()})},nD=function(){this.soundManager.pauseBackgroundMusic()},sD=function(){this.soundManager.resumeBackgroundMusic()},aD=Phaser.Utils.Objects.GetValue,hD=function(r,i,e){var d=aD(e,"tags.camera.fadein","camera.fadein");i.on(`+${d}`,function(t,n,u,s){Ut.call(r,"camera.fadein",oD,[t,n,u,s],r),i.skipEvent()})},oD=function(r){this.camera.fadeIn(...r)},lD=Phaser.Utils.Objects.GetValue,fD=function(r,i,e){var d=lD(e,"tags.camera.fadeout","camera.fadeout");i.on(`+${d}`,function(t,n,u,s){Ut.call(r,"camera.fadeout",uD,[t,n,u,s],r),i.skipEvent()})},uD=function(r){this.camera.fadeOut(...r)},dD=Phaser.Utils.Objects.GetValue,cD=function(r,i,e){var d=dD(e,"tags.camera.shake","camera.shake");i.on(`+${d}`,function(t,n){Ut.call(r,"camera.shake",vD,[t,n],r),i.skipEvent()})},vD=function(r){this.camera.shake(...r)},pD=Phaser.Utils.Objects.GetValue,mD=function(r,i,e){var d=pD(e,"tags.camera.flash","camera.flash");i.on(`+${d}`,function(t,n,u,s){Ut.call(r,"camera.flash",gD,[t,n,u,s],r),i.skipEvent()})},gD=function(r){this.camera.flash(...r)},xD=Phaser.Utils.Objects.GetValue,CD=function(r,i,e){var d=xD(e,"tags.camera.zoom","camera.zoom");i.on(`+${d}`,function(t){Ut.call(r,"camera.zoom",yD,t,r),i.skipEvent()}).on(`+${d}.to`,function(t,n,u){Ut.call(r,"camera.zoom.to",TD,[t,n,u],r),i.skipEvent()})},yD=function(r){this.camera.setZoom(r)},TD=function(r){this.camera.zoomTo(...r)},SD=Phaser.Utils.Objects.GetValue,Jm=Phaser.Math.DegToRad,MD=function(r,i,e){var d=SD(e,"tags.camera.rotate","camera.rotate");i.on(`+${d}`,function(t){t=Jm(t),Ut.call(r,"camera.rotate",ED,t,r),i.skipEvent()}).on(`+${d}.to`,function(t,n,u){t=Jm(t),Ut.call(r,"camera.rotate.to",PD,[t,n,u],r),i.skipEvent()})},ED=function(r){this.camera.setRotation(r)},PD=function(r){var i=r[0],e=r[1],d=r[2];this.camera.rotateTo(i,!1,e,d)},AD=Phaser.Utils.Objects.GetValue,LD=function(r,i,e){var d=AD(e,"tags.camera.scroll","camera.scroll");i.on(`+${d}`,function(t,n){Ut.call(r,"camera.scroll",RD,[t,n],r),i.skipEvent()}).on(`+${d}.to`,function(t,n,u,s){Ut.call(r,"camera.scroll.to",OD,[t,n,u,s],r),i.skipEvent()})},RD=function(r){this.camera.setScroll(...r)},OD=function(r){var i=r[0],e=r[1],d=r[2],t=r[3],n=this.camera,u=n.scrollX,s=n.scrollY;n.setScroll(i,e),i+=n.centerX,e+=n.centerY,n.setScroll(u,s),n.pan(i,e,d,t)},Qm=Phaser.Utils.Objects.GetValue,FD=function(r,i,e){var d=Qm(e,"tags.wait","wait"),t=Qm(e,"tags.click","click");i.on(`+${d}`,function(n){km(r,n),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()}).on(`+${t}`,function(){km(r,"click"),i.skipEvent()}).on(`-${t}`,function(){i.skipEvent()})},ID=function(r){this.typeWriter.wait(r)},km=function(r,i){Ut.call(r,"wait",ID,i,r)},wD=Phaser.Utils.Objects.GetValue,jm=function(r,i){return r.length===2&&r[0]===i},GD=function(r,i,e){var d=wD(e,"sprite","sprite");!d||i.on("+",function(t,...n){if(!i.skipEventFlag){var u=t.split(".");if(jm(u,d)){var s=u[1];Ut.call(r,"sprite.add",DD,[s,...n],r)}else return;i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var n=t.split(".");if(jm(n,d)){var u=n[1];Ut.call(r,"sprite.remove",BD,u,r)}else return;i.skipEvent()}})},DD=function(r){this.spriteManager.add(...r)},BD=function(r){this.spriteManager.remove(r)},ND=Phaser.Utils.Objects.GetValue,zD=function(r,i,e){var d=ND(e,"sprite","sprite");!d||i.on("-",function(t){if(!i.skipEventFlag){if(t===d)Ut.call(r,"sprite.removeall",bD,void 0,r);else return;i.skipEvent()}})},bD=function(){this.spriteManager.removeAll()},YD=Phaser.Utils.Objects.GetValue,UD=function(r,i){return r.length===3&&r[0]===i&&r[2]==="texture"},WD=function(r,i,e){var d=YD(e,"sprite","sprite");!d||i.on("+",function(t,n,u){if(!i.skipEventFlag){var s=t.split(".");if(UD(s,d)){var o=s[1];Ut.call(r,"sprite.texture",VD,[o,n,u],r)}else return;i.skipEvent()}})},VD=function(r){this.spriteManager.setTexture(...r)},XD=Phaser.Utils.Objects.GetValue,qm=function(r,i){return r.length===3&&r[0]===i&&r[2]==="play"},HD=function(r,i){return r.length===3&&r[0]===i&&r[2]==="stop"},KD=function(r,i,e){var d=XD(e,"sprite","sprite");!d||i.on("+",function(t){if(!i.skipEventFlag){var n=t.split("."),u;if(qm(n,d))u=n[1];else return;var s=Array.prototype.slice.call(arguments,1);Ut.call(r,"sprite.play",$D,[u,s],r),i.skipEvent()}}).on("+",function(t){if(!i.skipEventFlag){var n=t.split("."),u;if(HD(n,d))u=n[1];else return;Ut.call(r,"sprite.stop",_m,u,r),i.skipEvent()}}).on("-",function(t){if(!i.skipEventFlag){var n=t.split("."),u;if(qm(n,d))u=n[1];else return;Ut.call(r,"sprite.stop",_m,u,r),i.skipEvent()}})},$D=function(r){var i=r[0],e=r[1],d=e.shift();this.spriteManager.playAnimation(i,d),e.length>0&&this.spriteManager.chainAnimation(i,e)},_m=function(r){this.spriteManager.stopAnimation(r)},ZD=Phaser.Utils.Objects.GetValue,JD=function(r,i){return r.length===3&&r[0]===i&&r[2]==="chain"},kD=function(r,i,e){var d=ZD(e,"sprite","sprite");!d||i.on("+",function(t){if(!i.skipEventFlag){var n=t.split("."),u;if(JD(n,d))u=n[1];else return;var s=Array.prototype.slice.call(arguments,1);Ut.call(r,"sprite.chain",QD,[u,s],r),i.skipEvent()}})},QD=function(r){this.spriteManager.chainAnimation(...r)},jD=Phaser.Utils.Objects.GetValue,qD=function(r,i){return r.length===3&&r[0]===i&&r[2]==="pause"},tB=function(r,i,e){var d=jD(e,"sprite","sprite");!d||i.on("+",function(t){if(!i.skipEventFlag){var n=t.split("."),u;if(qD(n,d))u=n[1];else return;Ut.call(r,"sprite.pause",_D,u,r),i.skipEvent()}})},_D=function(r){this.spriteManager.pauseAnimation(r)},eB=Phaser.Utils.Objects.GetValue,iB=function(r,i){return r.length===3&&r[0]===i},sB=function(r,i,e){var d=eB(e,"sprite","sprite");!d||i.on("+",function(t,n){if(!i.skipEventFlag){var u=t.split("."),s,o;if(iB(u,d))s=u[1],o=u[2];else return;Ut.call(r,"sprite.set",nB,[s,o,n],r),i.skipEvent()}})},nB=function(r){this.spriteManager.setProperty(...r)},rB=Phaser.Utils.Objects.GetValue,aB={to:!0,yoyo:!0},oB=function(r,i){return r.length===4&&r[0]===i&&aB[r[3]]},lB=function(r,i,e){var d=rB(e,"sprite","sprite");!d||i.on("+",function(t,n,u,s){if(!i.skipEventFlag){var o=t.split("."),h,a,l;if(oB(o,d))h=o[1],a=o[2],l=o[3]==="yoyo";else return;Ut.call(r,"sprite.ease",hB,[h,a,n,u,s,l],r),i.skipEvent()}})},hB=function(r){this.spriteManager.easeProperty(...r)},uB=function(r,i,e){i.on("start",function(){r.emit("parser.start",i)}).on("+",function(d,...t){if(!i.skipEventFlag){var n=`+${d}`;r.emit(`parser.${n}`,i,...t),tx(r,n,t)}}).on("-",function(d){if(!i.skipEventFlag){var t=`-${d}`;r.emit(`parser.${t}`,i),tx(r,t)}}).on("complete",function(){r.emit("parser.complete",i)})},fB=function(r,i){var e=`tag.${i}`;r==null?this.emit(e):this.emit(e,...r)},tx=function(r,i,e){Ut.call(r,i,fB,e,r)},dB=Phaser.Utils.Objects.GetValue,vB=function(r,i,e){var d=dB(e,"tags.r","r");i.on(`+${d}`,function(){kh.call(r,`
`),i.skipEvent()}).on(`-${d}`,function(){i.skipEvent()})},cB=function(r,i,e){i.on("content",function(d){kh.call(r,d)})},ex=[fw,vw,pw,mw,yw,Cw,Ew,Mw,Rw,Lw,Dw,Nw,Yw,Ww,Kw,Qw,qw,eD,rD,hD,fD,cD,mD,CD,MD,LD,FD,GD,zD,WD,KD,kD,tB,sB,lB,uB,vB,cB],pB=function(r,i,e){for(var d=0,t=ex.length;d<t;d++)ex[d](r,i,e)},gB=function(r,i){for(var e=r.commentLineStart,d=i.split(`
`),t=0,n=d.length;t<n;t++){var u=d[t];u===""||(u.trim().length===0||e&&u.startsWith(e))&&(d[t]="")}return d.join("")},mB=Phaser.Utils.Objects.GetValue,ix=class extends sd{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),pB(i,this,e),this.setCommentLineStartSymbol(mB(e,"comment","//"))}setCommentLineStartSymbol(i){return this.commentLineStart=i,this}start(i){return super.start(gB(this,i)),this}},jh=function(r,i){return new Promise(function(e,d){r.once(i,function(){e()})})},De=function(r){return jh(r,"complete")},xB=function(r){return this.children=r,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(r),this.typing(),De(this)},yB="delay",nx="anim",sx=function(r){r===void 0&&(r=0);var i=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(Qh(e)){var d=this.animationConfig;if(d.duration>0){var t=this.timeline.addTimer({name:nx,target:e,duration:d.duration,yoyo:d.yoyo,onStart:d.onStart,onProgress:d.onProgress,onComplete:d.onComplete});this.skipTypingAnimation&&t.seek(1)}else d.onStart&&d.onStart(e,0);this.textPlayer.emit("typing",e),i+=this.speed+r,r=0;var n=this.index===this.children.length;if(i>0&&!n){this.typingTimer=this.timeline.addTimer({name:yB,target:this,duration:i,onComplete:function(u,s,o){u.typingTimer=void 0,sx.call(u,o.remainder)}});break}}else NI(e)&&e.exec()}this.inTypingProcessLoop=!1},TB=function(){return this.timeline.pause(),this},CB=function(){return this.timeline.resume(),this},SB=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},EB=function(r){return this.isTypingPaused?(r===void 0&&(r=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=r):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(r)),this):this},dn="_remove.wait",rd="_remove.play",rx=[dn,rd],es=function(r,i,e,d,t){return function(){r.emit(dn,t),i.apply(d,e)}},ax=function(r,i,e,d,t){var n=es(r,e,d,t,"custom"),u=i?`wait.${i}`:"wait";r.emit(u,n)},PB=function(r,i,e,d,t){return r.typeWriter.timeline.delayCall(i,e,d,t)},MB=function(r,i,e,d,t){var n=es(r,e,d,t,"time"),u;r.once(dn,function(){u&&(u.remove(),u=void 0)}),u=PB(r,i,n),r.emit("wait.time",i)},AB=function(r,i,e,d){var t=es(r,i,e,d,"click"),n=r.clickEE;r.once(dn,function(){n.off("pointerdown",t,r)}),n.once("pointerdown",t,r),r.emit("wait.click")},ox=function(r,i,e,d,t){var n=es(r,e,d,t,"music");i&&(r.once(dn,function(){i.off("complete",n,r)}),i.once("complete",n,r)),r.emit("wait.music",i),i||n()},RB=function(r){switch(r){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},OB=function(r,i,e,d,t){var n=es(r,e,d,t,`camera.${i}`),u=r.camera,s,o;switch(i){case"camera.fadein":s=u.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":s=u.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":s=u.flashEffect,o="cameraflashcomplete";break;case"camera.shake":s=u.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":s=u.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":s=u.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":s=u.panEffect,o="camerapancomplete";break}s.isRunning?(r.once(dn,function(h){u.off(o,n,r)}),u.once(o,n,r),r.emit("wait.camera",i)):(r.emit("wait.camera",i),n())},LB=function(r,i,e,d,t){var n=es(r,e,d,t,"keydown"),u=`keydown-${i.toUpperCase()}`,s=r.scene.input.keyboard;r.once(dn,function(){s.off(u,n,r)}),s.once(u,n,r),r.emit("wait.keydown",i)},FB=function(r){var i=r.split(".");return i[0]==="sprite"&&i.length<=3},IB=function(r,i,e,d,t){var n=es(r,e,d,t),u=i.split("."),s=r.spriteManager;switch(u.length){case 1:s.isEmpty?(r.emit("wait.sprite"),n()):(r.once(dn,function(f){s.off("empty",n,r)}),s.once("empty",n,r),r.emit("wait.sprite"));break;case 2:var o=u[1];if(s.has(o)){var h=r.spriteManager.get(o),a=h.sprite;r.once(dn,function(){a.off("destroy",n,r)}),a.once("destroy",n,r),r.emit("wait.sprite",o)}else r.emit("wait.sprite",o),n();break;case 3:var o=u[1],l=u[2],c=r.spriteManager.getTweenTask(o,l);c?(r.once(dn,function(){c.off("complete",n,r)}),c.once("complete",n,r),r.emit("wait.sprite",o,l)):(r.emit("wait.sprite",o,l),n());break}},wB=Phaser.Input.Keyboard.KeyCodes,hx=function(r,i,e,d,t){typeof i=="string"&&i.length>1&&i.indexOf("|")!==-1?i=i.split("|"):i=[i];for(var n=0,u=i.length;n<u;n++){var s=i[n];if(s==null||s==="wait")ax(r,void 0,e,d,t);else if(typeof s=="number"||!isNaN(s))MB(r,parseFloat(s),e,d,t);else if(s==="click")AB(r,e,d,t);else if(s==="se"){var o=r.soundManager.getLastSoundEffect();ox(r,o,e,d,t)}else if(s==="bgm"){var o=r.soundManager.getBackgroundMusic();ox(r,o,e,d,t)}else wB.hasOwnProperty(s.toUpperCase())?LB(r,s,e,d,t):RB(s)?OB(r,s,e,d,t):FB(s)?IB(r,s,e,d,t):ax(r,s,e,d,t)}},DB=function(r){return this.ignoreWait?this:(this.pauseTyping(),hx(this.textPlayer,r,this.resumeTyping,[],this),this)},BB=function(r){return this.timeline.setTimeScale(r),this},GB=function(r){return r===void 0&&(r=!0),this.ignoreWait=r,this},NB=function(r){if(r===void 0&&(r=!0),this.skipTypingAnimation=r,r)for(var i=this.timeline.getTimers(nx),e=0,d=i.length;e<d;e++)i[e].seek(1);return this},bB=function(r){if(r===void 0&&(r=!0),this.skipSoundEffect=r,r){var i=this.textPlayer._soundManager;i&&i.fadeOutAllSoundEffects(100,!0)}return this},zB=function(){return this.typingTimer&&this.typingTimer.seek(1),this},YB={start:xB,typing:sx,pause:TB,resume:CB,pauseTyping:SB,resumeTyping:EB,wait:DB,setTimeScale:BB,setIgnoreWait:GB,setSkipTypingAnimation:NB,setSkipSoundEffect:bB,skipCurrentTypingDelay:zB},UB=Phaser.Scene,qh=function(r){return r instanceof UB},lx=function(r){if(r==null||typeof r!="object")return null;if(qh(r))return r;if(r.scene&&qh(r.scene))return r.scene;if(r.parent&&r.parent.scene&&qh(r.parent.scene))return r.parent.scene},VB=Phaser.Utils.Objects.GetValue,Me=class{constructor(i,e){this.parent=i,this.scene=lx(i),this.isShutdown=!1,this.setEventEmitter(VB(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(i){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(i){this.shutdown(i)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(i,e){this.destroy(e)}};Object.assign(Me.prototype,gr);var WB=Phaser.Utils.Objects.GetValue,Ta=class extends Me{constructor(i,e){super(i,e);this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(WB(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(i){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(i))}setTickingMode(i){typeof i=="string"&&(i=XB[i]),this.tickingMode=i}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(i){this._isRunning!==i&&(this._isRunning=i,this.tickingMode===1&&i!=this.tickingState&&(i?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}},XB={no:0,lazy:1,always:2},ad=Phaser.Utils.Objects.GetValue,ux=class extends Ta{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.isRunning=ad(i,"isRunning",!1),this.timeScale=ad(i,"timeScale",1),this.now=ad(i,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(i){return i===void 0&&(i=0),this.delta=0,this.now=i,super.start(),this}seek(i){return this.now=i,this}setTimeScale(i){return this.timeScale=i,this}tick(i){return i*=this.timeScale,this.now+=i,this.delta=i,this.emit("update",this.now,this.delta),this}},od=class extends ux{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(i,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}},HB=function(r,i){return i===void 0&&(i=.5),r<=i?r=r/i:r=1-(r-i)/(1-i),r},fx=Phaser.Math.Clamp,dx=class{constructor(i,e){this.setTimeline(i).reset(e)}setTimeline(i){return this.timeline=i,this}setName(i){return this.name=i,this}setCallbacks(i,e,d,t){return this.target=i,this.onStart=e,this.onProgress=d,this.onComplete=t,this}setDuration(i,e){return e===void 0&&(e=!1),this.duration=i,this.remainder=i,this.t=0,this.yoyo=e,this}setPaused(i){return this.isPaused=i,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(i){return this.removed=i,this}remove(){return this.removed=!0,this}seek(i){return this.remainder=this.duration*(1-i),this}reset(i){return this.setName(i.name).setDuration(i.duration,i.yoyo).setCallbacks(i.target,i.onStart,i.onProgress,i.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var i=1-this.remainder/this.duration;return i=fx(i,0,1),this.yoyo&&(i=HB(i)),i}setProgress(i){i=fx(i,0,1),this.remainder=this.duration*(1-i)}runCallback(i){!i||i(this.target,this.t,this)}update(i,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var d=this.remainder<=0;return d&&this.runCallback(this.onComplete),d}},vx=class extends ln{allocate(){return this.pop()}free(i){i.onFree(),this.push(i)}freeMultiple(i){for(var e=0,d=i.length;e<d;e++)this.free(i[e]);return this}},$B=Phaser.Utils.Objects.GetValue,KB=new vx,cx=class extends od{constructor(i,e){super(i,e);this.addedTimers=[],this.timers=[],this.timerPool=$B(e,"pool",KB)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(i){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(i):e=new dx(this,i),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(i,e,d,t){var n=this.addTimer({duration:i,onComplete:function(u,s,o){d===void 0&&(d=[]),d.push(o),e.apply(t,d)}});return n}getTimers(i){for(var e=[],d=[this.addedTimers,this.timers],t=0,n=d.length;t<n;t++)for(var u=d[t],s=0,o=u.length;s<o;s++){var h=u[s];h.name===i&&e.push(h)}return e}update(i,e){super.update(i,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var d=[],t=0,n=this.timers.length;t<n;t++){var u=this.timers[t],s=u.update(this.now,this.delta);s?this.timerPool.free(u):d.push(u)}this.timers=d,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}},hd=Phaser.Utils.Objects.GetValue,ld=class{constructor(i,e){this.setEventEmitter(),this.textPlayer=i,this.isPageTyping=!1,this.timeline=new cx(i),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(hd(e,"onTypingStart",JB)),this.setSpeed(hd(e,"speed",250)),this.setAnimationConfig(hd(e,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}setSpeed(i){return this.speed=i,this}setTypingStartCallback(i){return this.onTypeStart=i,this}setAnimationConfig(i){return i===void 0?i={}:i===!1&&(i={duration:0}),i.hasOwnProperty("duration")||(i.duration=1e3),i.hasOwnProperty("onStart")||(i.onStart=ZB),this.animationConfig=i,this}getNextChild(){var i=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),i}},ZB=function(r){r.setVisible&&r.setVisible()},JB=function(r){for(var i=0,e=r.length;i<e;i++){var d=r[i];d.setVisible&&d.setVisible(!1)}};Object.assign(ld.prototype,gr,YB);var px=class extends Ta{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}},is=Phaser.Utils.Objects.GetValue,gx=Phaser.Math.Clamp,ud=class{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){this.state=is(i,"state",Ca),this.timeScale=is(i,"timeScale",1),this.delay=is(i,"delay",0),this.repeat=is(i,"repeat",0),this.repeatCounter=is(i,"repeatCounter",0),this.duration=is(i,"duration",0),this.nowTime=is(i,"nowTime",0),this.justRestart=is(i,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(i){return this.timeScale=i,this}setDelay(i){return i===void 0&&(i=0),this.delay=i,this}setDuration(i){return this.duration=i,this}setRepeat(i){return this.repeat=i,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?xr:mr,this.repeatCounter=0,this}stop(){return this.state=Ca,this}update(i,e){this.state===Ca||this.state===_h||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.state=this.nowTime>=0?xr:mr,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=_h)))}get t(){var i;switch(this.state){case Ca:case mr:i=0;break;case xr:i=this.nowTime/this.duration;break;case _h:i=1;break}return gx(i,0,1)}set t(i){i=gx(i,-1,1),i<0?(this.state=mr,this.nowTime=-this.delay*i):(this.state=xr,this.nowTime=this.duration*i,i===1&&this.repeat!==0&&this.repeatCounter++)}setT(i){return this.t=i,this}get isIdle(){return this.state===Ca}get isDelay(){return this.state===mr}get isCountDown(){return this.state===xr}get isRunning(){return this.state===mr||this.state===xr}get isDone(){return this.state===_h}get isOddIteration(){return(this.repeatCounter&1)==1}get isEvenIteration(){return(this.repeatCounter&1)==0}},Ca=0,mr=1,xr=2,_h=-1,mx=class extends px{constructor(i,e){super(i,e);this.timer=new ud}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}},Sa=Phaser.Utils.Objects.GetValue,xx=Phaser.Utils.Objects.GetAdvancedValue,QB=Phaser.Tweens.Builders.GetEaseFunction,Gs=class extends mx{resetFromJSON(i){return this.timer.resetFromJSON(Sa(i,"timer")),this.setEnable(Sa(i,"enable",!0)),this.setTarget(Sa(i,"target",this.parent)),this.setDelay(xx(i,"delay",0)),this.setDuration(xx(i,"duration",1e3)),this.setEase(Sa(i,"ease","Linear")),this.setRepeat(Sa(i,"repeat",0)),this}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setTarget(i){return i===void 0&&(i=this.parent),this.target=i,this}setDelay(i){return this.delay=i,this}setDuration(i){return this.duration=i,this}setEase(i){return i===void 0&&(i="Linear"),this.ease=i,this.easeFn=QB(i),this}setRepeat(i){return this.repeat=i,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(i){return i===void 0&&(i=!1),super.stop(),i&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(i,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var d=this.target,t=this.timer;return t.update(i,e),t.isDelay||this.updateGameObject(d,t),this.emit("update",d,this),t.isDone&&this.complete(),this}updateGameObject(i,e){}},yx=Phaser.Utils.Objects.GetValue,Tx=Phaser.Utils.Objects.GetAdvancedValue,kB=Phaser.Math.Linear,fd=class extends Gs{constructor(i,e,d){e.scene=i,e.active=!0,super(e,d),this.volume={},this.resetFromJSON(d)}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(yx(i,"mode",0)),this.setEnable(yx(i,"enable",!0)),this.setVolumeRange(Tx(i,"volume.start",this.parent.volume),Tx(i,"volume.end",0)),this}setMode(i){return typeof i=="string"&&(i=jB[i]),this.mode=i,this}setVolumeRange(i,e){return this.volume.start=i,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(i,e){i.volume=kB(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}},jB={stop:1,destroy:2},Cx=function(r,i,e,d,t){d===void 0&&(d=1),t===void 0&&(t=0);var n={mode:0,volume:{start:t,end:d},duration:e};typeof i=="string"&&(i=r.sys.sound.add(i));var u;return i.hasOwnProperty("_fade")?(u=i._fade,u.stop().resetFromJSON(n)):(u=new fd(r,i,n),i._fade=u),u.start(),i.isPlaying||i.setVolume(t).play(),i},dd=function(r,i,e,d){d===void 0&&(d=!0);var t={mode:d?2:1,volume:{start:i.volume,end:0},duration:e},n;return i.hasOwnProperty("_fade")?(n=i._fade,n.stop().resetFromJSON(t)):(n=new fd(r,i,t),i._fade=n),n.start(),i.isPlaying||i.play(),i},vd=Phaser.Utils.Objects.GetValue,Sx=Phaser.Utils.Array.Remove,cd=class{constructor(i,e){this.scene=i,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(vd(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(vd(e,"bgm.fade",500));var d=vd(e,"bgm.initial",void 0);d&&this.setCurrentBackgroundMusic(d)}destroy(i){if(this.soundEffects.length&&!i)for(var e=this.soundEffects.length-1;e>=0;e--)this.soundEffects[e].destroy();this.soundEffects.length=0,this.backgroundMusic&&!i&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this}setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(i){var e=this.scene.sys.sound.add(i);return this.soundEffects.push(e),e.once("complete",function(){e.destroy(),!!this.scene&&Sx(this.soundEffects,e)},this).once("destroy",function(){!this.scene||Sx(this.soundEffects,e)},this).play(),this}setSoundEffectVolume(i){var e=this.getLastSoundEffect();return e&&e.setVolume(i),this}fadeInSoundEffect(i){var e=this.getLastSoundEffect();return e&&Cx(this.scene,e,i),this}fadeOutSoundEffect(i,e){var d=this.getLastSoundEffect();return d&&dd(this.scene,d,i,e),this}fadeOutAllSoundEffects(i,e){for(var d=this.soundEffects.length-1;d>=0;d--)dd(this.scene,this.soundEffects[d],i,e);return this}setCurrentBackgroundMusic(i){this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),i.isPlaying||i.play())}playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(i){return this.backgroundMusic&&Cx(this.scene,this.backgroundMusic,i),this}fadeOutBackgroundMusic(i,e){return this.backgroundMusic&&dd(this.scene,this.backgroundMusic,i,e),this}crossFadeBackgroundMusic(i,e){var d=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(e,!0).playBackgroundMusic(i).fadeInBackgroundMusic(e),this.backgroundMusicFadeTime=d,this}},Ex=class{constructor(i,e,d){this.spriteManager=i,this.sprite=e.setName(d),this.tweens={},this.name=d}get scene(){return this.spriteManager.scene}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var i=this.tweens;for(var e in i)i[e].remove(),delete i[e];return this}setProperty(i,e){return this.sprite[i]=e,this}easeProperty(i,e,d,t,n,u){var s=this.tweens;s.hasOwnProperty(i)&&s[i].remove();var o={targets:this.sprite,duration:d,ease:t,yoyo:n,onComplete:function(){s[i].remove(),delete s[i],u&&u()},onCompleteScope:this};return o[i]=e,s[i]=this.scene.tweens.add(o),this}setTexture(i,e){return this.sprite.setTexture(i,e),this}playAnimation(i){return this.sprite.play(i),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(i){return this.sprite.chain(i),this}pauseAnimation(){return this.sprite.anims.pause(),this}},Px=function(r){return r>>16&255},Mx=function(r){return r>>8&255},Ax=function(r){return r&255},qB=~(255<<16)&16777215,_B=~(255<<8)&16777215,tG=~255&16777215,eG=function(r,i){return(i&255)<<16|r&qB},iG=function(r,i){return(i&255)<<8|r&_B},nG=function(r,i){return i&255|r&tG},sG=function(r,i,e,d){return(i&255)<<16|(e&255)<<8|d&255},rG=function(r,i){if(r.hasOwnProperty("tintR"))return r;i===void 0&&(i=16777215);var e=Px(i),d=Mx(i),t=Ax(i);return Object.defineProperty(r,"tint",{get:function(){return i},set:function(n){n=Math.floor(n)&16777215,r.setTint(n),i!==n&&(i=n,e=Px(i),d=Mx(i),t=Ax(i))}}),Object.defineProperty(r,"tintR",{get:function(){return e},set:function(n){n=Math.floor(n)&255,e!==n&&(e=n,r.tint=eG(i,n))}}),Object.defineProperty(r,"tintG",{get:function(){return d},set:function(n){n=Math.floor(n)&255,d!==n&&(d=n,r.tint=iG(i,n))}}),Object.defineProperty(r,"tintB",{get:function(){return t},set:function(n){n=Math.floor(n)&255,t!==n&&(t=n,r.tint=nG(i,n))}}),Object.defineProperty(r,"tintGray",{get:function(){return Math.floor((e+d+t)/3)},set:function(n){n=Math.floor(n)&255,(e!==n||d!==n||t!==n)&&(e=n,d=n,t=n,r.tint=sG(i,n,n,n))}}),r.tint=i,r},aG=function(r){for(var i in r)return!1;return!0},pd=Phaser.Utils.Objects.GetValue,oG=Phaser.Utils.Array.Remove,tl=class{constructor(i,e){this.scene=i,this.setEventEmitter(pd(e,"eventEmitter",void 0)),this.setCreateCallback(pd(e,"createCallback","sprite")),this.setSpriteFadeTime(pd(e,"fade",500)),this.sprites={},this.removedSprites=[]}destroy(i){this.clear(!i),this.createCallback=void 0,this.scene=void 0}setCreateCallback(i){return i==="sprite"?this.createCallback=function(e,d,t){return e.add.sprite(0,0,d,t)}:i==="image"?this.createCallback=function(e,d,t){return e.add.image(0,0,d,t)}:this.createCallback=i,this}setSpriteFadeTime(i){return this.fadeTime=i,this}has(i){return this.sprites.hasOwnProperty(i)}get(i){return this.sprites[i]}getTweenTask(i,e){if(this.has(i)){var d=this.get(i).tweens;if(d.hasOwnProperty(e))return d[e]}return null}get isEmpty(){return aG(this.sprites)&&this.removedSprites.length===0}clear(i){i===void 0&&(i=!0);for(var e in this.sprites)i&&this.sprites[e].destroy(),delete this.sprites[e];return this.removedSprites.length=0,this}add(i,e,d){this.remove(i);var t;if(arguments.length===3)t=this.createCallback(this.scene,e,d);else{var n=Array.prototype.slice.call(arguments,1);t=this.createCallback(this.scene,...n)}this.fadeTime>0&&rG(t),t.once("destroy",function(){oG(this.removedSprites,t),this.isEmpty&&this.emit("empty")},this);var u=new Ex(this,t,i);return this.sprites[i]=u,this.fadeTime>0&&u.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}setProperty(i,e,d){return this.has(i)?(this.get(i).setProperty(e,d),this):this}easeProperty(i,e,d,t,n,u,s){return this.has(i)?(t===void 0&&(t=1e3),n===void 0&&(n="Linear"),this.get(i).easeProperty(e,d,t,n,u,s),this):this}remove(i){if(!this.has(i))return this;var e=this.get(i);return delete this.sprites[i],this.removedSprites.push(e.sprite),this.fadeTime>0?e.easeProperty("tintGray",0,this.fadeTime,"Linear",!1,function(){e.destroy()}):e.destroy(),this}removeAll(){for(var i in this.sprites)this.remove(i);return this}setTexture(i,e,d){return this.has(i)?(this.get(i).setTexture(e,d),this):this}playAnimation(i,e){return this.has(i)||this.add(i),this.get(i).playAnimation(e),this}stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this}chainAnimation(i,e){return this.has(i)?(this.get(i).chainAnimation(e),this):this}pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}};Object.assign(tl.prototype,gr);var hG=function(r){return qh(r)?this.clickEE=r.input:this.clickEE=r.setInteractive(),this},lG=function(r){return this.camera=r,this},uG=function(r){var i=this;r?typeof r=="function"?this.nextPageInput=function(e,d,t){var n=es(i,e,d,t);r.call(i,n)}:this.nextPageInput=function(e,d,t){hx(i,r,e,d,t)}:this.nextPageInput=null},fG=function(r,i){return this.imageManager.add(r,i),this},dG=function(r){return this.isPlaying?this:(this.removeChildren(),this.parser.start(r),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},vG=function(r){var i=De(this);return this.play(r),i},cG=Phaser.Utils.Objects.GetValue,Rx=function(){if(!this.isPlaying||this.isPageTyping)return this;var r=cG(this.wrapConfig,"callback",this.runWordWrap);typeof r=="string"&&(r=this[r]);var i=r.call(this,this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var e=function(){this.emit(rd),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.nextPageInput&&this.nextPageInput(Rx,[],this))};this.once(rd,function(){this.typeWriter.off("complete",e,this)}),this.typeWriter.once("complete",e,this).start(i.children)},pG=function(){return this.typeWriter.pause(),this},gG=function(){return this.typeWriter.resume(),this},mG=function(r){return this.typeWriter.setTimeScale(r),this},xG=function(r){return this.typeWriter.setIgnoreWait(r),this},yG=function(){if(!this.isPlaying||!this.isPageTyping)return this;var r=this.typeWriter.speed,i=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,d=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setSpeed(r).setIgnoreWait(i).setSkipTypingAnimation(e).setSkipSoundEffect(d)},this).setSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},TG={setClickTarget:hG,setTargetCamera:lG,setNextPageInput:uG,addImage:fG,play:dG,playPromise:vG,typingNextPage:Rx,pause:pG,resume:gG,setTimeScale:mG,setIgnoreWait:xG,showPage:yG},CG=function(r){for(var i=0,e=rx.length;i<e;i++)r.emit(rx[i])},Ox=Phaser.Utils.Objects.IsPlainObject,ns=Phaser.Utils.Objects.GetValue,Ea=class extends Bs{constructor(i,e,d,t,n,u){Ox(e)?u=e:Ox(t)&&(u=t),u===void 0&&(u={});var s=u.text;delete u.text,super(i,e,d,t,n,u),this.type="rexTextPlayer",this.parser=new ix(this,ns(u,"parser",void 0)),this.typeWriter=new ld(this,ns(u,"typing",void 0)),this._imageManager=void 0;var o=ns(u,"images",void 0);o&&this.addImage(o),this._soundManager=void 0;var h=ns(u,"sounds",void 0);h&&(this._soundManager=new cd(this.scene,h)),this.setTargetCamera(ns(u,"camera",this.scene.sys.cameras.main)),this._spriteManager=void 0;var a=ns(u,"sprites",void 0);a&&(this._spriteManager=new tl(this.scene,a)),this.setClickTarget(ns(u,"clickTarget",this)),this.setNextPageInput(ns(u,"nextPageInput",null)),this.isPlaying=!1,s&&this.play(s)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Bh(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new cd(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new tl(this.scene)),this._spriteManager}destroy(i){!this.scene||(CG(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(i),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(i),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(i),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(i),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(i))}get isPageTyping(){return this.typeWriter.isPageTyping}};Object.assign(Ea.prototype,TG);var gd=function(r,i,e,d,t,n,u,s,o,h,a,l){h===void 0&&(h=0),a===void 0&&(a=2*Math.PI),l===void 0&&(l=!1),i.beginPath(),i.ellipse(e,d,t,n,0,h,a,l),u!=null&&(i.fillStyle=u,i.fill()),s!=null&&(i.strokeStyle=s,i.lineWidth=o,i.stroke())},SG=function(r,i,e,d,t,n,u,s,o,h,a){o===void 0&&s!=null&&(o=2),h===void 0&&(h="start"),a===void 0&&(a="alphabetic"),i.font=n,i.textAlign=h,i.textBaseline=a,i.fillStyle=u,i.strokeStyle=s,i.lineWidth=o,i.lineCap="round",i.lineJoin="round",s!=null&&s!=="none"&&o>0&&i.strokeText(t,e,d),u!=null&&u!=="none"&&i.fillText(t,e,d)},EG=function(){var r=this.radius,i=this.thickness*this.radius,e=this.radius-i/2,d=this.radius-i,t=this.canvas,n=this.context;if(this.trackColor&&i>0&&(n.save(),gd(t,n,r,r,e,e,void 0,this.trackColor,i),n.restore()),this.barColor&&e>0){var u,s,o;if(this.value===1)u=!1,s=0,o=2*Math.PI;else{u=this.anticlockwise,s=this.startAngle;var h=2*Math.PI*(u?1-this.value:this.value);o=h+s}n.save(),gd(t,n,r,r,e,e,void 0,this.barColor,i,s,o,u),n.restore()}if(this.centerColor&&d>0){var a;this.centerColor2?(a=this.context.createRadialGradient(r,r,0,r,r,d),a.addColorStop(0,this.centerColor),a.addColorStop(1,this.centerColor2)):a=this.centerColor,n.save(),gd(t,n,r,r,d,d,a),n.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(n.save(),SG(t,n,r,r,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),n.restore())},Pa=Phaser.Utils.Objects.GetValue,PG=Phaser.Math.Linear,el=class extends Gs{constructor(i,e){super(i,e);this.resetFromJSON(),this.boot()}start(i){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=Pa(i,"key","value");var d=e[this.propertyKey];return this.fromValue=Pa(i,"from",d),this.toValue=Pa(i,"to",d),this.setEase(Pa(i,"ease",this.ease)),this.setDuration(Pa(i,"duration",this.duration)),this.timer.setDuration(this.duration),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(i,e){var d=e.t;d=this.easeFn(d),i[this.propertyKey]=PG(this.fromValue,this.toValue,d)}},MG=Phaser.Math.Percent,AG=function(r){return this.easeValuePropName=r,this},RG=function(r){return this.easeValueDuration=r,this},OG=function(r){return this.easeFunction=r,this},LG=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},FG=function(r,i,e){return r==null?this:(i!==void 0&&(r=MG(r,i,e)),this.easeValueTask===void 0&&(this.easeValueTask=new el(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:r,duration:this.easeValueDuration,ease:this.easeFunction}),this)},Ma={setEaseValuePropName:AG,setEaseValueDuration:RG,setEaseValueFunction:OG,stopEaseValue:LG,easeValueTo:FG},he=Phaser.Utils.Objects.GetValue,IG=Phaser.Utils.Objects.IsPlainObject,Lx=Phaser.Math.Clamp,wG=Phaser.Math.Linear,Fx=Phaser.Math.Percent,DG=Phaser.Math.DegToRad(270),Aa=class extends Ji{constructor(i,e,d,t,n,u,s){IG(e)&&(s=e,e=he(s,"x",0),d=he(s,"y",0),t=he(s,"radius",1),n=he(s,"barColor",void 0),u=he(s,"value",0));var o=t*2;super(i,e,d,o,o);this.type="rexCircularProgressCanvas",this.eventEmitter=he(s,"eventEmitter",this),this.setRadius(t),this.setTrackColor(he(s,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(he(s,"centerColor",void 0)),this.setThickness(he(s,"thickness",.2)),this.setStartAngle(he(s,"startAngle",DG)),this.setAnticlockwise(he(s,"anticlockwise",!1)),this.setTextColor(he(s,"textColor",void 0)),this.setTextStrokeColor(he(s,"textStrokeColor",void 0),he(s,"textStrokeThickness",void 0));var h=he(s,"textFont",void 0);h?this.setTextFont(h):this.setTextFont(he(s,"textSize","16px"),he(s,"textFamily","Courier"),he(s,"textStyle","")),this.setTextFormatCallback(he(s,"textFormatCallback",void 0),he(s,"textFormatCallbackScope",void 0));var a=he(s,"valuechangeCallback",null);if(a!==null){var l=he(s,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,l)}this.setEaseValuePropName("value").setEaseValueDuration(he(s,"easeValue.duration",0)).setEaseValueFunction(he(s,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=Lx(i,0,1);var e=this._value,d=e!=i;this.dirty=this.dirty||d,this._value=i,d&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=Fx(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=Fx(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=wG(i,e,d)),d}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){i=Yt(i,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){i=Yt(i,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=Lx(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){i=Yt(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}get centerColor2(){return this._centerColor2}set centerColor2(i){i=Yt(i,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=i,this._centerColor2=i}setCenterColor(i,e){return this.centerColor=i,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(i){i=Yt(i,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=i,this._textColor=i}setTextColor(i){return this.textColor=i,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(i){i=Yt(i,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=i,this._textStrokeColor=i}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(i){this.dirty=this.dirty||this._textStrokeThickness!=i,this._textStrokeThickness=i}setTextStrokeColor(i,e){return e===void 0&&(e=2),this.textStrokeColor=i,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(i){this.dirty=this.dirty||this._textFont!=i,this._textFont=i}setTextFont(i,e,d){var t;return e===void 0?t=i:t=d+" "+i+" "+e,this.textFont=t,this}setTextFormatCallback(i,e){return this.textFormatCallback=i,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),EG.call(this),super.updateTexture(),this}getFormatText(i){i===void 0&&(i=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(i):e=this.textFormatCallback.call(this.textFormatCallbackScope,i),e}};Object.assign(Aa.prototype,Ma);var BG=Phaser.GameObjects.GetCalcMatrix,GG=function(r,i,e,d){i.updateData(),e.addToRenderList(i);var t=r.pipelines.set(i.pipeline),n=BG(i,e,d),u=t.calcMatrix.copyFrom(n.calc),s=i._displayOriginX,o=i._displayOriginY,h=e.alpha*i.alpha;r.pipelines.preBatch(i);for(var a=i.geom,l=0,c=a.length;l<c;l++)a[l].webglRender(t,u,h,s,o);r.pipelines.postBatch(i)},NG=Phaser.Renderer.Canvas.SetTransform,bG=function(r,i,e,d){i.updateData(),e.addToRenderList(i);var t=r.currentContext;if(NG(r,t,i,e,d)){for(var n=i._displayOriginX,u=i._displayOriginY,s=i.geom,o=0,h=s.length;o<h;o++)s[o].canvasRender(t,n,u);t.restore()}},zG={renderWebGL:GG,renderCanvas:bG},YG=Phaser.GameObjects.Shape,UG=Phaser.Utils.Array.Remove,il=class extends YG{constructor(i,e,d,t,n){e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),n===void 0&&(n=t),super(i,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,d),this.setSize(t,n),this.updateDisplayOrigin()}get width(){return this._width}set width(i){this.setSize(i,this._height)}get height(){return this._height}set height(i){this.setSize(this._width,i)}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSize(i,e){this.isSizeChanged=this.isSizeChanged||this._width!==i||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=i,this._height=e,this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=i,d.hitArea.height=e),this}resize(i,e){return this.setSize(i,e),this}get fillColor(){return this._fillColor}set fillColor(i){this.setFillStyle(i,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(i){this.setFillStyle(this._fillColor,i)}setFillStyle(i,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==i||this.fillAlpha!==e,this._fillColor=i,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(i){this.setStrokeStyle(i,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(i){this.setStrokeStyle(this._lineWidth,i,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(i){this.setStrokeStyle(this._lineWidth,this._strokeColor,i)}setStrokeStyle(i,e,d){return d===void 0&&(d=1),this.dirty=this.dirty||this.lineWidth!==i||this.strokeColor!==e||this.strokeAlpha!==d,this._lineWidth=i,this._strokeColor=e,this._strokeAlpha=d,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var i=this.geom,e=0,d=i.length;e<d;e++){var t=i[e];t.dirty&&t.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,_n(this.shapes),this}getShape(i){return this.shapes[i]}getShapes(){return this.geom}addShape(i){this.geom.push(i);var e=i.name;return e&&(this.shapes[e]=i),this.dirty=!0,this}deleteShape(i){var e=this.getShape(i);return e&&(delete this.shapes[i],UG(this.geom,e)),this}};Object.assign(il.prototype,zG);var VG=function(r,i){return r===void 0?this.isFilled=!1:(i===void 0&&(i=1),this.isFilled=!0,this.fillColor=r,this.fillAlpha=i),this},WG=function(r,i,e){return r===void 0||i===void 0?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=r,this.strokeColor=i,this.strokeAlpha=e),this},XG={fillStyle:VG,lineStyle:WG},Ra=class{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(i){return this.name=i,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(i,e,d,t,n){}canvasRender(i,e,d){}updateData(){this.dirty=!1}};Object.assign(Ra.prototype,XG,Ch);var HG=Phaser.Geom.Polygon.Earcut,Oa=class extends Ra{constructor(){super();this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=HG(this.pathData),super.updateData(),this}webglRender(i,e,d,t,n){this.isFilled&&kg(i,e,this,d,t,n),this.isStroked&&Ph(i,this,d,t,n)}canvasRender(i,e,d){var t=this.pathData,n=t.length-1,u=t[0]-e,s=t[1]-d;i.beginPath(),i.moveTo(u,s),this.closePath||(n-=2);for(var o=2;o<n;o+=2){var h=t[o]-e,a=t[o+1]-d;i.lineTo(h,a)}this.closePath&&i.closePath(),this.isFilled&&(fa(i,this),i.fill()),this.isStroked&&(da(i,this),i.stroke())}},Ix=Phaser.Math.DegToRad,La=class extends Oa{constructor(i,e,d,t,n,u,s,o){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),n===void 0&&(n=0),u===void 0&&(u=360),s===void 0&&(s=!1),o===void 0&&(o=!1),super(),this.setCenterPosition(i,e),this.setRadius(d,t),this.setAngle(n,u,s),this.setPie(o),this.setIterations(32)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setCenterPosition(i,e){return e===void 0&&(e=i),this.x=i,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(i){this.dirty=this.dirty||this._radiusX!==i,this._radiusX=i}get radiusY(){return this._radiusY}set radiusY(i){this.dirty=this.dirty||this._radiusY!==i,this._radiusY=i}setRadius(i,e){return e===void 0&&(e=i),this.radiusX=i,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!==i,this._startAngle=i}get endAngle(){return this._endAngle}set endAngle(i){this.dirty=this.dirty||this._endAngle!==i,this._endAngle=i}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!==i,this._anticlockwise=i}setAngle(i,e,d){return d===void 0&&(d=!1),this.startAngle=i,this.endAngle=e,this.anticlockwise=d,this}get pie(){return this._pie}set pie(i){this.dirty=this.dirty||this._pie!==i,this._pie=i}setPie(i){return i===void 0&&(i=!0),this.pie=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),dr(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(i,e,d){i.beginPath();var t=this.x-e,n=this.y-d,u=Ix(this.startAngle),s=Ix(this.endAngle);this.pie&&(i.moveTo(t,n),i.lineTo(t+Math.cos(u)*this.radiusX,n+Math.sin(u)*this.radiusY)),i.ellipse(t,n,this.radiusX,this.radiusY,0,u,s,this.anticlockwise),this.pie&&i.lineTo(t,n),this.isFilled&&(fa(i,this),i.fill()),this.isStroked&&(da(i,this),i.stroke())}},nl=class extends La{constructor(i,e,d){super(i,e,d,d,0,360)}},wx=class extends Oa{constructor(i){super();this.setCurve(i),this.setIterations(32)}get curve(){return this._curve}set curve(i){this.dirty=this.dirty||this._curve!==i,this._curve=i}setCurve(i){return this.curve=i,this}get iterations(){return this._iterations}set iterations(i){this.dirty=this.dirty||this._iterations!==i,this._iterations=i}setIterations(i){return this.iterations=i,this}updateData(){this.pathData.length=0;for(var i=this.curve.getPoints(this.iterations),e=0,d=i.length;e<d;e++)this.pathData.push(i[e].x,i[e].y);return this.pathData.push(i[0].x,i[0].y),super.updateData(),this}},Dx=class extends La{constructor(i,e,d,t){super(i,e,d,t,0,360)}},Bx=class extends Oa{constructor(i,e,d,t){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),super(),this.setP0(i,e),this.setP1(d,t)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},$G=function(r,i,e){return e.length=0,e.push(r,i),e},Gx=Phaser.Math.Interpolation.QuadraticBezier,Nx=function(r,i,e,d,t,n){for(var u=n.length,s=n[u-2],o=n[u-1],h=1,a=t-1;h<=a;h++){var l=h/a;n.push(Gx(l,s,r,e),Gx(l,o,i,d))}return n},KG=Phaser.Math.RotateAround,ZG=function(r,i,e,d){for(var t={x:0,y:0},n=0,u=d.length-1;n<u;n+=2)t.x=d[n],t.y=d[n+1],KG(t,r,i,e),d[n]=t.x,d[n+1]=t.y;return d},JG=function(r,i,e){for(var d=0,t=e.length-1;d<t;d+=2)e[d]+=r,e[d+1]+=i;return e},QG=function(r,i){i===void 0&&(i=[]);for(var e=0,d=r.length-1;e<d;e+=2)i.push({x:r[e],y:r[e+1]});return i},kG=Phaser.Geom.Polygon,jG=function(r,i){return i===void 0&&(i=new kG),i.setTo(r),i},qG=Phaser.Math.DegToRad,bx=class{constructor(i){i===void 0&&(i=[]),this.pathData=i,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(i){return this.iterations=i,this}startAt(i,e){return $G(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}lineTo(i,e,d){return d===void 0&&(d=!1),d&&(i+=this.lastPointX,e+=this.lastPointY),fr(i,e,this.pathData),this.lastPointX=i,this.lastPointY=e,this}verticalLineTo(i,e){return this.lineTo(i,this.lastPointY,e),this}horizontalLineTo(i,e){return this.lineTo(this.lastPointX,i,e),this}ellipticalArc(i,e,d,t,n,u,s){s===void 0&&(s=!1),dr(i,e,d,t,n,u,s,this.iterations,this.pathData);var o=this.pathData.length;return this.lastPointX=this.pathData[o-2],this.lastPointY=this.pathData[o-1],this}arc(i,e,d,t,n,u){return this.ellipticalArc(i,e,d,d,t,n,u),this}quadraticBezierTo(i,e,d,t){return Nx(i,e,d,t,this.iterations,this.pathData),this.lastPointX=d,this.lastPointY=t,this.lastCX=i,this.lastCY=e,this}smoothQuadraticBezierTo(i,e){var d=this.lastPointX*2-this.lastCX,t=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(d,t,i,e),this}cubicBezierCurveTo(i,e,d,t,n,u){return Nx(i,e,d,t,n,u,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=u,this.lastCX=d,this.lastCY=t,this}smoothCubicBezierCurveTo(i,e,d,t){var n=this.lastPointX*2-this.lastCX,u=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(n,u,i,e,d,t),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(i,e,d){if(this.pathData.length===0)return this;d=qG(d),ZG(i,e,d,this.pathData);var t=this.pathData.length;if(this.lastPointX=this.pathData[t-2],this.lastPointY=this.pathData[t-1],this.lastCX!==void 0){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,i,e,d),this.lastCX=n.x,this.lastCY=n.y}return this}offset(i,e){return JG(i,e,this.pathData),this}toPoints(){return QG(this.pathData)}toPolygon(i){return jG(this.pathData,i)}draw(i,e,d){var t=this.toPoints();return e&&i.fillPoints(t,this.closePath,this.closePath),d&&i.strokePoints(t,this.closePath,this.closePath),this}},zx=class extends Oa{constructor(){super();this.builder=new bx(this.pathData)}get iterations(){return this.builder.iterations}set iterations(i){this.dirty=this.dirty||this.builder.iterations!==i,this.builder.setIterations(i)}setIterations(i){return this.iterations=i,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(i,e){return this.builder.startAt(i,e),this.dirty=!0,this}lineTo(i,e,d){return this.builder.lineTo(i,e,d),this.dirty=!0,this}verticalLineTo(i,e){return this.builder.verticalLineTo(i,e),this.dirty=!0,this}horizontalLineTo(i,e){return this.builder.horizontalLineTo(i,e),this.dirty=!0,this}ellipticalArc(i,e,d,t,n,u,s){return this.builder.ellipticalArc(i,e,d,t,n,u,s),this.dirty=!0,this}arc(i,e,d,t,n,u){return this.builder.arc(i,e,d,t,n,u),this.dirty=!0,this}quadraticBezierTo(i,e,d,t){return this.builder.quadraticBezierTo(i,e,d,t),this.dirty=!0,this}smoothQuadraticBezierTo(i,e){return this.builder.smoothQuadraticBezierTo(i,e),this.dirty=!0,this}cubicBezierCurveTo(i,e,d,t,n,u){return this.builder.cubicBezierCurveTo(i,e,d,t,n,u),this.dirty=!0,this}smoothCubicBezierCurveTo(i,e,d,t){return this.builder.smoothCubicBezierCurveTo(i,e,d,t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(i,e,d){return this.builder.rotateAround(i,e,d),this.dirty=!0,this}offset(i,e){return this.builder.offset(i,e),this.dirty=!0,this}toPolygon(i){return this.builder.toPolygon(i)}},_G=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Yx=class extends Ra{constructor(i,e,d,t){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=d),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(i,e),this.setSize(d,t)}get x(){return this._x}set x(i){this.dirty=this.dirty||this._x!==i,this._x=i}get y(){return this._y}set y(i){this.dirty=this.dirty||this._y!==i,this._y=i}setTopLeftPosition(i,e){return this.x=i,this.y=e,this}get width(){return this._width}set width(i){this.dirty=this.dirty||this._width!==i,this._width=i}get height(){return this._height}set height(i){this.dirty=this.dirty||this._height!==i,this._height=i}setSize(i,e){return this.width=i,this.height=e,this}updateData(){this.pathData.length=0;var i=this.x,e=i+this.width,d=this.y,t=d+this.height;return this.pathData.push(i,d),this.pathData.push(e,d),this.pathData.push(e,t),this.pathData.push(i,t),this.pathData.push(i,d),super.updateData(),this}webglRender(i,e,d,t,n){if(this.isFilled){var u=i.fillTint,s=_G(this.fillColor,this.fillAlpha*d);u.TL=s,u.TR=s,u.BL=s,u.BR=s,i.batchFillRect(-t+this.x,-n+this.y,this.width,this.height)}this.isStroked&&Ph(i,this,d,t,n)}canvasRender(i,e,d){this.isFilled&&(fa(i,this),i.fillRect(-e,-d,this.width,this.height)),this.isStroked&&(da(i,this),i.beginPath(),i.rect(-e,-d,this.width,this.height),i.stroke())}},t3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Ux=class extends Ra{constructor(i,e,d,t,n,u){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),n===void 0&&(n=0),u===void 0&&(u=0),super(),this.pathData=[],this.closePath=!0,this.setP0(i,e),this.setP1(d,t),this.setP2(n,u)}get x0(){return this._x0}set x0(i){this.dirty=this.dirty||this._x0!==i,this._x0=i}get y0(){return this._y0}set y0(i){this.dirty=this.dirty||this._y0!==i,this._y0=i}setP0(i,e){return this.x0=i,this.y0=e,this}get x1(){return this._x1}set x1(i){this.dirty=this.dirty||this._x1!==i,this._x1=i}get y1(){return this._y1}set y1(i){this.dirty=this.dirty||this._y1!==i,this._y1=i}setP1(i,e){return this.x1=i,this.y1=e,this}get x2(){return this._x2}set x2(i){this.dirty=this.dirty||this._x2!==i,this._x2=i}get y2(){return this._y2}set y2(i){this.dirty=this.dirty||this._y2!==i,this._y2=i}setP2(i,e){return this.dirty=this.dirty||this.x2!==i||this.y2!==e,this.x2=i,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(i,e,d,t,n){if(this.isFilled){var u=t3(this.fillColor,this.fillAlpha*d),s=this.x0-t,o=this.y0-n,h=this.x1-t,a=this.y1-n,l=this.x2-t,c=this.y2-n,f=e.getX(s,o),v=e.getY(s,o),p=e.getX(h,a),g=e.getY(h,a),m=e.getX(l,c),x=e.getY(l,c);i.batchTri(f,v,p,g,m,x,u,u,u)}this.isStroked&&Ph(i,this,d,t,n)}canvasRender(i,e,d){var t=this.x1-e,n=this.y1-d,u=this.x2-e,s=this.y2-d,o=this.x3-e,h=this.y3-d;i.beginPath(),i.moveTo(t,n),i.lineTo(u,s),i.lineTo(o,h),i.closePath(),this.isFilled&&(fa(i,this),i.fill()),this.isStroked&&(da(i,this),i.stroke())}},Ke=Phaser.Utils.Objects.GetValue,e3=Phaser.Utils.Objects.IsPlainObject,Vx=Phaser.Math.Clamp,i3=Phaser.Math.Linear,Wx=Phaser.Math.Percent,n3=Phaser.Math.DegToRad(270),s3=Phaser.Math.RadToDeg,yr=class extends il{constructor(i,e,d,t,n,u,s){e3(e)&&(s=e,e=Ke(s,"x",0),d=Ke(s,"y",0),t=Ke(s,"radius",1),n=Ke(s,"barColor",void 0),u=Ke(s,"value",0));var o=t*2;super(i,e,d,o,o);this.type="rexCircularProgress",this.eventEmitter=Ke(s,"eventEmitter",this),this.addShape(new nl().setName("track")).addShape(new La().setName("bar")).addShape(new nl().setName("center")),this.setRadius(t),this.setTrackColor(Ke(s,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(Ke(s,"centerColor",void 0)),this.setThickness(Ke(s,"thickness",.2)),this.setStartAngle(Ke(s,"startAngle",n3)),this.setAnticlockwise(Ke(s,"anticlockwise",!1));var h=Ke(s,"valuechangeCallback",null);if(h!==null){var a=Ke(s,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,a)}this.setEaseValuePropName("value").setEaseValueDuration(Ke(s,"easeValue.duration",0)).setEaseValueFunction(Ke(s,"easeValue.ease","Linear")),this.setValue(u)}resize(i,e){return i=Math.floor(Math.min(i,e)),i===this.width?this:(super.resize(i,i),this.setRadius(i/2),this)}get value(){return this._value}set value(i){i=Vx(i,0,1);var e=this._value,d=e!=i;this.dirty=this.dirty||d,this._value=i,d&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=Wx(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=Wx(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=i3(i,e,d)),d}get radius(){return this._radius}set radius(i){this.dirty=this.dirty||this._radius!=i,this._radius=i;var e=i*2;this.resize(e,e)}setRadius(i){return this.radius=i,this}get trackColor(){return this._trackColor}set trackColor(i){this.dirty=this.dirty||this._trackColor!=i,this._trackColor=i}setTrackColor(i){return this.trackColor=i,this}get barColor(){return this._barColor}set barColor(i){this.dirty=this.dirty||this._barColor!=i,this._barColor=i}setBarColor(i){return this.barColor=i,this}get startAngle(){return this._startAngle}set startAngle(i){this.dirty=this.dirty||this._startAngle!=i,this._startAngle=i}setStartAngle(i){return this.startAngle=i,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(i){this.dirty=this.dirty||this._anticlockwise!=i,this._anticlockwise=i}setAnticlockwise(i){return i===void 0&&(i=!0),this.anticlockwise=i,this}get thickness(){return this._thickness}set thickness(i){i=Vx(i,0,1),this.dirty=this.dirty||this._thickness!=i,this._thickness=i}setThickness(i){return this.thickness=i,this}get centerColor(){return this._centerColor}set centerColor(i){this.dirty=this.dirty||this._centerColor!=i,this._centerColor=i}setCenterColor(i){return this.centerColor=i,this}updateShapes(){var i=this.radius,e=this.thickness*this.radius,d=this.radius-e/2,t=this.radius-e,n=this.getShape("track");this.trackColor!=null&&e>0?n.setCenterPosition(i,i).setRadius(d).lineStyle(e,this.trackColor):n.reset();var u=this.getShape("bar");if(this.barColor!=null&&d>0){var s,o,h;if(this.value===1)s=!1,o=0,h=361;else{s=this.anticlockwise,o=s3(this.startAngle);var a=360*(s?1-this.value:this.value);h=a+o}u.setCenterPosition(i,i).setRadius(d).setAngle(o,h,s).lineStyle(e,this.barColor)}else u.reset();var l=this.getShape("center");this.centerColor&&t>0?l.setCenterPosition(i,i).setRadius(t).fillStyle(this.centerColor):l.reset()}};Object.assign(yr.prototype,Ma);var sl=function(r){return r.hasOwnProperty("rexSizer")||(r.rexSizer={}),r.rexSizer},r3=function(r){var i=sl(r);return i.hasOwnProperty("prevState")||(i.prevState={}),i.prevState},Xx=Phaser.Geom.Rectangle,CH=Phaser.Scale.Center,Tr=function(r,i){i===void 0?i=new Xx:i===!0&&(i=a3);var e=r.sys.scale,d=e.baseSize,t=e.parentSize,n=e.canvasBounds,u=e.displayScale,s=n.x>=0?0:-(n.x*u.x),o=n.y>=0?0:-(n.y*u.y),h;t.width>=n.width?h=d.width:h=d.width-(n.width-t.width)*u.x;var a;return t.height>=n.height?a=d.height:a=d.height-(n.height-t.height)*u.y,i.setTo(s,o,h,a),i},a3=new Xx,o3=function(r){return r===void 0&&(r=Tr(this.scene)),this.left=Math.max(this.left,r.left),this.right=Math.min(this.right,r.right),this.top=Math.max(this.top,r.top),this.bottom=Math.min(this.bottom,r.bottom),this},si=Phaser.Display.Align,rl={center:si.CENTER,left:si.LEFT_CENTER,right:si.RIGHT_CENTER,top:si.TOP_CENTER,bottom:si.BOTTOM_CENTER,"left-top":si.TOP_LEFT,"left-center":si.LEFT_CENTER,"left-bottom":si.BOTTOM_LEFT,"center-top":si.TOP_CENTER,"center-center":si.CENTER,"center-bottom":si.BOTTOM_CENTER,"right-top":si.TOP_RIGHT,"right-center":si.RIGHT_CENTER,"right-bottom":si.BOTTOM_RIGHT},md=new Phaser.GameObjects.Zone({sys:{queueDepthSort:_e,events:{once:_e}}},0,0,1,1);md.setOrigin(0);var Nn={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},_t=function(r){return r.displayWidth!==void 0?r.displayWidth:r.width},Jt=function(r){return r.displayHeight!==void 0?r.displayHeight:r.height},xd=function(r){var i=Jt(r);return r.y+i-i*r.originY},yd=function(r){var i=_t(r);return r.x-i*r.originX+i*.5},Td=function(r,i){var e=Jt(r);return r.y=i-e+e*r.originY,r},Cd=function(r,i){var e=_t(r),d=e*r.originX;return r.x=i+d-e*.5,r},h3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Cd(r,yd(i)+e),Td(r,xd(i)+d),r},Sd=function(r){var i=_t(r);return r.x-i*r.originX},Ed=function(r,i){var e=_t(r);return r.x=i+e*r.originX,r},l3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ed(r,Sd(i)-e),Td(r,xd(i)+d),r},Pd=function(r){var i=_t(r);return r.x+i-i*r.originX},Md=function(r,i){var e=_t(r);return r.x=i-e+e*r.originX,r},u3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Md(r,Pd(i)+e),Td(r,xd(i)+d),r},Ad=function(r,i){var e=Jt(r),d=e*r.originY;return r.y=i+d-e*.5,r},f3=function(r,i,e){return Cd(r,i),Ad(r,e)},Rd=function(r){var i=Jt(r);return r.y-i*r.originY+i*.5},d3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),f3(r,yd(i)+e,Rd(i)+d),r},v3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ed(r,Sd(i)-e),Ad(r,Rd(i)+d),r},c3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Md(r,Pd(i)+e),Ad(r,Rd(i)+d),r},Od=function(r){var i=Jt(r);return r.y-i*r.originY},Ld=function(r,i){var e=Jt(r);return r.y=i+e*r.originY,r},p3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Cd(r,yd(i)+e),Ld(r,Od(i)-d),r},g3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Ed(r,Sd(i)-e),Ld(r,Od(i)-d),r},m3=function(r,i,e,d){return e===void 0&&(e=0),d===void 0&&(d=0),Md(r,Pd(i)+e),Ld(r,Od(i)-d),r},vn=[];vn[Nn.BOTTOM_CENTER]=h3;vn[Nn.BOTTOM_LEFT]=l3;vn[Nn.BOTTOM_RIGHT]=u3;vn[Nn.CENTER]=d3;vn[Nn.LEFT_CENTER]=v3;vn[Nn.RIGHT_CENTER]=c3;vn[Nn.TOP_CENTER]=p3;vn[Nn.TOP_LEFT]=g3;vn[Nn.TOP_RIGHT]=m3;var Hx=function(r,i,e,d,t){return vn[e](r,i,d,t)},al=function(r,i,e,d,t,n){md.setPosition(i,e).setSize(d,t),Hx(r,md,n)},$x=Phaser.Geom.Rectangle,ss=Phaser.Math.Vector2,x3=Phaser.Math.RotateAround,Id=function(r,i){if(i===void 0?i=new $x:i===!0&&(Fd===void 0&&(Fd=new $x),i=Fd),r.getBounds)return r.getBounds(i);var e,d,t,n,u,s,o,h;if(r.parentContainer){var a=r.parentContainer.getBoundsTransformMatrix();Kx(r,i),a.transformPoint(i.x,i.y,i),e=i.x,d=i.y,Zx(r,i),a.transformPoint(i.x,i.y,i),t=i.x,n=i.y,Jx(r,i),a.transformPoint(i.x,i.y,i),u=i.x,s=i.y,Qx(r,i),a.transformPoint(i.x,i.y,i),o=i.x,h=i.y}else Kx(r,i),e=i.x,d=i.y,Zx(r,i),t=i.x,n=i.y,Jx(r,i),u=i.x,s=i.y,Qx(r,i),o=i.x,h=i.y;return i.x=Math.min(e,t,u,o),i.y=Math.min(d,n,s,h),i.width=Math.max(e,t,u,o)-i.x,i.height=Math.max(d,n,s,h)-i.y,i},Fd=void 0,Kx=function(r,i,e){return i===void 0?i=new ss:i===!0&&(Gi===void 0&&(Gi=new ss),i=Gi),r.getTopLeft?r.getTopLeft(i):(i.x=r.x-_t(r)*r.originX,i.y=r.y-Jt(r)*r.originY,ol(r,i,e))},Zx=function(r,i,e){return i===void 0?i=new ss:i===!0&&(Gi===void 0&&(Gi=new ss),i=Gi),r.getTopRight?r.getTopRight(i):(i.x=r.x-_t(r)*r.originX+_t(r),i.y=r.y-Jt(r)*r.originY,ol(r,i,e))},Jx=function(r,i,e){return i===void 0?i=new ss:i===!0&&(Gi===void 0&&(Gi=new ss),i=Gi),r.getBottomLeft?r.getBottomLeft(i):(i.x=r.x-_t(r)*r.originX,i.y=r.y-Jt(r)*r.originY+Jt(r),ol(r,i,e))},Qx=function(r,i,e){return i===void 0?i=new ss:i===!0&&(Gi===void 0&&(Gi=new ss),i=Gi),r.getBottomRight?r.getBottomRight(i):(i.x=r.x-_t(r)*r.originX+_t(r),i.y=r.y-Jt(r)*r.originY+Jt(r),ol(r,i,e))},Gi=void 0,ol=function(r,i,e){if(e===void 0&&(e=!1),r.rotation!==0&&x3(i,r.x,r.y,r.rotation),e&&r.parentContainer){var d=r.parentContainer.getBoundsTransformMatrix();d.transformPoint(i.x,i.y,i)}return i},Fa=Phaser.Utils.Objects.GetValue,y3=Phaser.GameObjects.Group,C3=function(r,i){var e=r.scene,d,t,n,u;if(typeof i=="number")d=i;else{d=Fa(i,"color",16777215);var s=Fa(i,"name",!1);s&&(t=Fa(s,"createTextCallback",T3),n=Fa(s,"createTextCallbackScope",void 0),u=Fa(s,"align","left-top"),typeof u=="string"&&(u=rl[u]))}if(t&&!r.children){r.children=new y3(e),r.once("destroy",function(v,p){v.children.destroy(!p),v.children=void 0});var o=r.clear.bind(r);r.clear=function(){o(),r.children.clear(!1,!0)}}for(var h=this.getAllShownChildren([this]),a,l,c=0,f=h.length;c<f;c++){if(a=h[c],a.getBounds||a.width!==void 0&&a.height!==void 0)Ns=Id(a,Ns);else continue;d!=null&&r.lineStyle(1,d).strokeRectShape(Ns),a.name&&t&&(n?l=t.call(n,e):l=t(e),l&&(l.setText(a.name),r.children.add(l),al(l,Ns.x,Ns.y,Ns.width,Ns.height,u)))}return this},T3=function(r,i,e){return r.add.text(0,0,"")},Ns=void 0,hl=Phaser.Utils.Objects.GetValue,Cr=function(r,i){return i===void 0&&(i={}),typeof r=="number"?(i.left=r,i.right=r,i.top=r,i.bottom=r):(i.left=hl(r,"left",0),i.right=hl(r,"right",0),i.top=hl(r,"top",0),i.bottom=hl(r,"bottom",0)),i},S3=ii.prototype.add,Ia=function(r){return S3.call(this,r),this.sizerEventsEnable&&(r.emit("sizer.add",r,this),this.emit("add",r,this)),this},E3={addBackground(r,i,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof i=="string"&&(e=i,i=void 0),i===void 0&&(i=0),Ia.call(this,r),this.backgroundChildren.push(r);var d=this.getSizerConfig(r);return d.padding=Cr(i),e!==void 0&&this.addChildrenMap(e,r),this},isBackground(r){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(r)!==-1}},P3={removeFromParentSizer(){var r=this.getParentSizer();return r&&r.remove(this),this}},kx=function(r,i){return this.childrenMap===void 0&&(this.childrenMap={}),this.childrenMap[r]=i,this},M3=function(r){if(typeof r=="object"){var i=r;for(var r in this.childrenMap)if(this.childrenMap[r]===i)return delete this.childrenMap[r],this}return delete this.childrenMap[r],this},R3=function(r,i){if(typeof r=="string"&&(r=r.split(".")),r.length!==0){var e=r.shift(),d=null;if(e.charAt(0)==="#")e=e.substring(1),d=this.getByName(e,i);else if(e.indexOf("[")===-1)this.childrenMap&&(d=this.childrenMap[e]);else{var t=e.match(A3);if(t!=null&&this.childrenMap){var n=this.childrenMap[t[1]];n&&(d=n[t[2]])}}return r.length===0?d:d&&d.childrenMap?d.getElement(r):null}},A3=/(\S+)\[(\d+)\]/i,O3={getInnerPadding(r){return Zh(this.space,r)},setInnerPadding(r,i){return Jh(this.space,r,i),this},getOuterPadding(r){return Zh(this.getSizerConfig(this).padding,r)},setOuterPadding(r,i){return Jh(this.getSizerConfig(this).padding,r,i),this},getChildOuterPadding(r,i){return typeof r=="string"&&(r=this.getElement(r)),Zh(this.getSizerConfig(r).padding,i)},setChildOuterPadding(r,i,e){return typeof r=="string"&&(r=this.getElement(r)),Jh(this.getSizerConfig(r).padding,i,e),this}},wd=function(r){return r===void 0&&(r=Math.max(this.childrenWidth,this.minWidth)),r},L3=function(r){var i,e;for(var d in this.sizerChildren)i=this.sizerChildren[d],i&&i.isRexSizer&&!i.ignoreLayout&&(e=this.getExpandedChildWidth(i,r),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},Dd=function(r){var i=Math.max(this.childrenHeight,this.minHeight);return r===void 0&&(r=i),r},F3=function(r){var i;return r.isRexSizer?i=Math.max(r.minWidth,r.childrenWidth):r.minWidth!==void 0?i=r.minWidth:i=_t(r),i},I3=function(r){var i;return r.isRexSizer?i=Math.max(r.minHeight,r.childrenHeight):r.minHeight!==void 0?i=r.minHeight:i=Jt(r),i},w3=function(r,i){return i},D3=function(r,i){return i},B3=function(){return 0},G3=function(){return 0},N3=function(r){r===void 0&&(r=[]);for(var i=r.length,e=this.getChildrenSizers(r),d=r.length,t=i;t<d;t++)e[t].getAllChildrenSizers(r);return r},b3=function(r){return r===void 0&&(r=[]),r},z3={getShownChildren(r){r===void 0&&(r=[]);for(var i=this.children,e,d=0,t=i.length;d<t;d++)e=i[d],!(e.rexSizer&&e.rexSizer.hidden)&&r.push(e);return r},getAllShownChildren(r){r===void 0&&(r=[]);for(var i=this.children,e,d=0,t=i.length;d<t;d++)e=i[d],!(e.rexSizer&&e.rexSizer.hidden)&&(r.push(e),e.hasOwnProperty("isRexContainerLite")&&r.push(...e.getAllShownChildren()));return r}},wa=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var r=this.getChildrenSizers(),i,e=0,d=r.length;e<d;e++)i=r[e],!i.ignoreLayout&&i.preLayout()},Y3=function(){return this.runLayout(),this},U3=function(r,i,e){if(this.ignoreLayout)return this;var d=!r;return d&&this.preLayout(),i=this.resolveWidth(i),d&&(this.resolveChildrenWidth(i),this.runWidthWrap(i)),e=this.resolveHeight(e),this.resize(i,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},V3=function(){},W3=function(r,i,e){return this._anchor&&this._anchor.updatePosition(),this},jx=function(r){var i,e;for(var d in this.sizerChildren)i=this.sizerChildren[d],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(e=this.getExpandedChildWidth(i,r),i.isRexSizer&&(e=i.resolveWidth(e)),i.runWidthWrap(e));return this},Da=class extends Me{constructor(i,e){super(i,{eventEmitter:!1});this.viewport=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){i===void 0&&(i={});var e,d;i.x!==void 0?(e=null,d=i.x):i.left!==void 0?(e=0,d=i.left):i.right!==void 0?(e=1,d=i.right):i.centerX!==void 0&&(e=.5,d=i.centerX);var t,n;i.y!==void 0?(t=null,n=i.y):i.top!==void 0?(t=0,n=i.top):i.bottom!==void 0?(t=1,n=i.bottom):i.centerY!==void 0&&(t=.5,n=i.centerY);var u,s;d!==void 0&&(d=d.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),u=parseFloat(d[0])/100,s=d[1]===""?0:parseFloat(d[1]));var o,h;n!==void 0&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),o=parseFloat(n[0])/100,h=n[1]===""?0:parseFloat(n[1]));var a=i.width,l,c;a!==void 0&&(a=a.split("%"),l=parseFloat(a[0])/100,c=a[1]===""?0:parseFloat(a[1]));var f=i.height,v,p;f!==void 0&&(f=f.split("%"),v=parseFloat(f[0])/100,p=f[1]===""?0:parseFloat(f[1])),this.setAlign(e,t),this.setPercentage(u,o),this.setOffset(s,h),this.setSizePercentage(l,v),this.setSizePadding(c,p);var g=i.onResizeCallback,m=i.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=i.onUpdateViewportCallback,y=i.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this}boot(){this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()}shutdown(i){this.isShutdown||(this.scene.sys.scale.off("resize",this.anchor,this),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(i))}setAlign(i,e){return this.alignX=i,this.alignY=e,this}setPercentage(i,e){return this.percentageX=i,this.percentageY=e,this}setOffset(i,e){return this.offsetX=i,this.offsetY=e,this}setSizePercentage(i,e){return this.percentageWidth=i,this.percentageHeight=e,this}setSizePadding(i,e){return this.paddingWidth=i,this.paddingHeight=e,this}setResizeCallback(i,e){return this.onResizeCallback=i,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(i,e){return this.onUpdateViewportCallback=i,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var i=this.onResizeCallback,e=this.onResizeCallbackScope,d=this.anchorWidth,t=this.anchorHeight;if(!(d===void 0&&t===void 0||!i)){var n=this.parent;d===void 0&&(d=n.width),t===void 0&&(t=n.height),e?i.call(e,d,t,n,this):i(d,t,n,this)}}updatePosition(){var i=this.parent;return this.alignX===null?i.x=this.anchorX:this.alignX!==void 0&&(i.x=this.anchorX+i.displayWidth*(i.originX-this.alignX)),this.alignY===null?i.y=this.anchorY:this.alignY!==void 0&&(i.y=this.anchorY+i.displayHeight*(i.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=Tr(this.scene,this.viewport?this.viewport:!0);var i=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;i&&(e?i.call(e,this.viewport,this.parent,this):i(this.viewport,this.parent,this))}},X3=function(r){r===void 0&&(r={});var i=r.hasOwnProperty("width"),e=r.hasOwnProperty("height"),d=r.hasOwnProperty("onResizeCallback");return(i||e)&&!d&&(r.onResizeCallback=function(t,n,u){i&&u.setMinWidth(t),e&&u.setMinHeight(n),u.layout()}),this._anchor===void 0?this._anchor=new Da(this,r):this._anchor.resetFromJSON(r),this},H3=Phaser.Utils.Objects.GetValue,Sr=Phaser.Utils.Objects.GetAdvancedValue,qx=Phaser.Math.Linear,ll=class extends Gs{constructor(i,e){super(i,e);this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(H3(i,"mode",0)),this.setScaleRange(Sr(i,"start",void 0),Sr(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=$3[i]),this.mode=i,this}setScaleRange(i,e){return typeof i=="number"?(this.startX=i,this.startY=i):(this.startX=Sr(i,"x",this.parent.scaleX),this.startY=Sr(i,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=Sr(e,"x",void 0),this.endY=Sr(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasScaleX&&(i.scaleX=this.startX),this.hasScaleY&&(i.scaleY=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var d=e.t;e.isOddIteration&&(d=1-d),d=this.easeFn(d),this.hasScaleX&&(i.scaleX=qx(this.startX,this.endX,d)),this.hasScaleY&&(i.scaleY=qx(this.startY,this.endY,d))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},$3={stop:0,destroy:1,yoyo:2},_x=function(r,i,e,d,t){var n,u;switch(e){case 0:case"x":n={x:0},u={x:r.scaleX};break;case 1:case"y":n={y:0},u={y:r.scaleY};break;default:n=0,u=r.scale;break}var s={mode:0,start:n,end:u,duration:i,ease:d===void 0?"Cubic":d};return t===void 0?t=new ll(r,s):t.resetFromJSON(s),t.restart(),t},ty=function(r,i,e,d,t,n){t instanceof ll&&(n=t,t=void 0),t===void 0&&(t=!0);var u={};switch(u.mode=t?1:0,e){case 0:case"x":u.end={x:0};break;case 1:case"y":u.end={y:0};break;default:u.end=0;break}return u.duration=i,u.ease=d===void 0?"Linear":d,n===void 0?n=new ll(r,u):n.resetFromJSON(u),n.restart(),n},ey=Phaser.Utils.Objects.IsPlainObject,iy=function(r,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(r.emit(i.completeEventName,r),i.completeEventName=void 0)}),i.on("update",function(){var e=r.getParentSizer();e&&e.resetChildPositionState(r)})},K3={popUp(r,i,e){if(ey(r)){var d=r;r=d.duration,i=d.orientation,e=d.ease}var t=this._scale===void 0;return this._scale=_x(this,r,i,e,this._scale),t&&iy(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(r,i,e){return this.popUp(r,i,e),De(this._scale)},scaleDownDestroy(r,i,e,d){if(ey(r)){var t=r;r=t.duration,i=t.orientation,e=t.ease,d=t.destroy}var n=this._scale===void 0;return this._scale=ty(this,r,i,e,d,this._scale),n&&iy(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(r,i,e,d){return this.scaleDownDestroy(r,i,e,d),De(this._scale)},scaleDown(r,i,e){return this.scaleDownDestroy(r,i,e,!1),this},scaleDownPromise(r,i,e){return this.scaleDown(r,i,e),De(this._scale)}},Z3=Phaser.Utils.Objects.GetValue,ny=Phaser.Utils.Objects.GetAdvancedValue,J3=Phaser.Math.Linear,ul=class extends Gs{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setMode(Z3(i,"mode",0)),this.setAlphaRange(ny(i,"start",this.parent.alpha),ny(i,"end",0)),this}setMode(i){return typeof i=="string"&&(i=Q3[i]),this.mode=i,this}setAlphaRange(i,e){return this.alphaStart=i,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return i.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var d=e.t;e.isOddIteration&&(d=1-d),i.alpha=J3(this.alphaStart,this.alphaEnd,d)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},Q3={stop:0,destroy:1,yoyo:2},k3=Phaser.Utils.Objects.IsPlainObject,Ba=function(r,i,e,d){var t,n;k3(e)?(t=e.start,n=e.end):n=e,t===void 0&&(t=0),n===void 0&&(n=1);var u={mode:0,start:t,end:n,duration:i};return d===void 0?d=new ul(r,u):d.resetFromJSON(u),d.restart(),d},Ga=function(r,i,e,d){e instanceof ul&&(d=e,e=void 0),e===void 0&&(e=!0);var t={mode:e?1:0,end:0,duration:i};return d===void 0?d=new ul(r,t):d.resetFromJSON(t),d.restart(),d},sy=Phaser.Utils.Objects.IsPlainObject,ry=function(r,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(r.emit(i.completeEventName,r),i.completeEventName=void 0)}),i.on("update",function(){var e=r.getParentSizer();e&&e.resetChildAlphaState(r)})},j3={fadeIn(r,i){if(sy(r)){var e=r;r=e.duration,i=e.alpha}var d=this._fade===void 0;return this._fade=Ba(this,r,i,this._fade),d&&ry(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(r,i){return this.fadeIn(r,i),De(this._fade)},fadeOutDestroy(r,i){if(sy(r)){var e=r;r=e.duration,i=e.destroy}var d=this._fade===void 0;return this._fade=Ga(this,r,i,this._fade),d&&ry(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(r,i){return this.fadeOutDestroy(r,i),De(this._fade)},fadeOut(r){return this.fadeOutDestroy(r,!1),this},fadeOutPromise(r){return this.fadeOut(r),De(this._fade)}},q3=Phaser.Utils.Objects.GetValue,Er=Phaser.Utils.Objects.GetAdvancedValue,ay=Phaser.Math.Linear,Na=class extends Gs{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){if(super.resetFromJSON(i),this.setMode(q3(i,"mode",0)),i&&(i.hasOwnProperty("x")||i.hasOwnProperty("y"))){var e=Er(i,"x",void 0),d=Er(i,"y",void 0);this.setTargetPosition(e,d)}else this.setTargetPosition(i);return this}setMode(i){return typeof i=="string"&&(i=_3[i]),this.mode=i,this}setTargetPosition(i,e){if(typeof i=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=i,this.endY=e;else{var d=i;this.startX=Er(d,"startX",void 0),this.startY=Er(d,"startY",void 0),this.endX=Er(d,"endX",void 0),this.endY=Er(d,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var i=this.parent;return this.hasMoveX&&(i.x=this.startX),this.hasMoveY&&(i.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(i,e){var d=e.t;e.isOddIteration&&(d=1-d),d=this.easeFn(d),this.hasMoveX&&(i.x=ay(this.startX,this.endX,d)),this.hasMoveY&&(i.y=ay(this.startY,this.endY,d))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},_3={stop:0,destroy:1,yoyo:2},fl=function(r,i){if(typeof r=="number")return r;var e=r[0],d=parseFloat(r.substr(2));switch(e){case"+":return i+d;case"-":return i-d;case"*":return i*d;case"/":return i/d}},Bd=function(r,i,e,d,t,n,u){n instanceof Na&&(u=n,n=void 0),n===void 0&&(n=!1);var s={};return s.mode=n?1:0,e!==void 0&&(s.startX=r.x,s.endX=fl(e,r.x)),d!==void 0&&(s.startY=r.y,s.endY=fl(d,r.y)),s.duration=i,s.ease=t===void 0?"Linear":t,u===void 0?u=new Na(r,s):u.resetFromJSON(s),u.restart(),u},Gd=function(r,i,e,d,t,n,u){n instanceof Na&&(u=n,n=void 0),n===void 0&&(n=!1);var s={};return s.mode=n?1:0,e!==void 0&&(s.startX=fl(e,r.x),s.endX=r.x),d!==void 0&&(s.startY=fl(d,r.y),s.endY=r.y),s.duration=i,s.ease=t===void 0?"Linear":t,u===void 0?u=new Na(r,s):u.resetFromJSON(s),u.restart(),u},oy=Phaser.Utils.Objects.IsPlainObject,hy=Phaser.Math.Distance.Between,ly=function(r,i){i.completeEventName=void 0,i.on("complete",function(){i.completeEventName&&(r.emit(i.completeEventName,r),i.completeEventName=void 0)}),i.on("update",function(){var e=r.getParentSizer();e&&e.resetChildPositionState(r)})},tN={moveFrom(r,i,e,d,t){if(oy(r)){var n=r;i=n.x,e=n.y,n.hasOwnProperty("speed")?r=hy(i,e,this.x,this.y)*1e3/n.speed:r=n.duration,d=n.ease}var u=this._easeMove===void 0;return this._easeMove=Gd(this,r,i,e,d,t,this._easeMove),u&&ly(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(r,i,e,d,t){return this.moveFrom(r,i,e,d,t),De(this._easeMove)},moveFromDestroy(r,i,e,d){return this.moveFrom(r,i,e,d,!0),this},moveFromDestroyPromise(r,i,e,d){return this.moveFromDestroy(r,i,e,d),De(this._easeMove)},moveTo(r,i,e,d,t){if(oy(r)){var n=r;i=n.x,e=n.y,n.hasOwnProperty("speed")?r=hy(i,e,this.x,this.y)*1e3/n.speed:r=n.duration,d=n.ease}var u=this._easeMove===void 0;return this._easeMove=Bd(this,r,i,e,d,t,this._easeMove),u&&ly(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(r,i,e,d,t){return this.moveTo(r,i,e,d,t),De(this._easeMove)},moveToDestroy(r,i,e,d){return this.moveTo(r,i,e,d,!0),this},moveToDestroyPromise(r,i,e,d){return this.moveToDestroy(r,i,e,d,!0),De(this._easeMove)}},Qi=Phaser.Utils.Objects.GetValue,ba=class extends Ta{constructor(i,e){super(i,e);this.timer=new ud,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.timer.resetFromJSON(Qi(i,"timer")),this.setEnable(Qi(i,"enable",!0)),this.setMode(Qi(i,"mode",1)),this.isRunning=Qi(i,"isRunning",!1),this.setMagnitudeMode(Qi(i,"magnitudeMode",1)),this.setDuration(Qi(i,"duration",500)),this.setMagnitude(Qi(i,"magnitude",10)),this.ox=Qi(i,"ox",void 0),this.oy=Qi(i,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(i){this.isShutdown||(super.shutdown(i),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(i){return i==null&&(i=!0),this.enable=i,this}setMode(i){return typeof i=="string"&&(i=eN[i]),this.mode=i,this}setMagnitudeMode(i){return typeof i=="string"&&(i=iN[i]),this.magnitudeMode=i,this}setDuration(i){return this.duration=i,this}setMagnitude(i){return this.magnitude=i,this}start(i,e){if(typeof i!="number"){var d=i;e=Qi(d,"magnitude",void 0),i=Qi(d,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),i!==void 0&&this.setDuration(i),this.timer.setDuration(this.duration).start(),super.start(),this}shake(i,e){return this.start(i,e),this}update(i,e){if(!this.isRunning||!this.enable)return this;var d=this.parent;if(!d.active)return this;if(this.timer.update(i,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=d.x,this.oy=d.y);var t=this.magnitude;this.magnitudeMode===1&&(t*=1-this.timer.t);var n=Math.random()*Math.PI*2,u=Math.cos(n)*t,s=Math.sin(n)*t;d.setPosition(this.ox+u,this.oy+s)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var i=this.parent;return this.ox===i.x&&this.oy===i.y?this:(i.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}},eN={effect:0,behavior:1},iN={constant:0,decay:1},nN=Phaser.Utils.Objects.IsPlainObject,sN=function(r,i){i.on("complete",function(){r.emit("shake.complete",r)})},rN={shake(r,i,e){if(nN(r)){var d=r;r=d.duration,i=d.magnitude,e=d.magnitudeMode}return this._shake===void 0&&(this._shake=new ba(this,{mode:0,magnitudeMode:1}),sN(this,this._shake)),r!==void 0&&this._shake.setDuration(r),i!==void 0&&this._shake.setMagnitude(i),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(r,i){return this.shake(r,i),De(this._shake)}},uy=Phaser.Utils.Objects.IsPlainObject,fy=class extends Me{constructor(i,e){super(i,e);this.parent.setDataEnabled(),this.easeTasks={}}complete(i){this.emit(`complete-${i}`,this.parent,this),this.emit("complete",i,this.parent,this)}getEaseTask(i){var e=this.easeTasks[i];return e===void 0&&(e=new el(this.parent),this.easeTasks[i]=e,e.setTarget(this.parent.data.values).on("complete",function(){this.complete(i)},this)),e}easeTo(i,e,d,t){if(uy(i)){var n=i;i=n.key,e=n.value,d=n.duration,t=n.ease;var u=n.speed;d===void 0&&u!==void 0&&(d=Math.abs(e-this.parent.data.values[i])/u*1e3)}d===void 0&&(d=1e3),t===void 0&&(t="Linear");var s=this.getEaseTask(i);return s.restart({key:i,to:e,duration:d,ease:t}),this}easeFrom(i,e,d,t){if(uy(i)){var n=i;i=n.key,e=n.value,d=n.duration,t=n.ease;var u=n.speed;d===void 0&&u!==void 0&&(d=Math.abs(e-this.parent.data.values[i])/u*1e3)}d===void 0&&(d=1e3),t===void 0&&(t="Linear");var s=this.getEaseTask(i);return s.restart({key:i,from:e,duration:d,ease:t}),this}stopEase(i,e){e===void 0&&(e=!0);var d=this.easeTasks[i];return d&&d.stop(e),this}stopAll(i){i===void 0&&(i=!0);for(var e in this.easeTasks)this.stopEase(e,i);return this}},aN=function(r,i){i.on("complete",function(e){r.emit(`easedata.${e}.complete`,r),r.emit("easedata.complete",e,r)})},oN={easeDataTo(r,i,e,d){return this._easeData||(this._easeData=new fy(this),aN(this,this._easeData)),this._easeData.easeTo(r,i,e,d),this},easeDataToPromise(r,i,e,d){return this.easeDataTo(r,i,e,d),jh(this._easeData,`complete-${r}`)},stopEaseData(r,i){return this._easeData?(this._easeData.stopEase(r,i),this):this},stopAllEaseData(r){return this._easeData?(this._easeData.stopAll(r),this):this}},bn=function(r){dy(r,!1)},zn=function(r){dy(r,!0)},dl=function(r){if(!r)return!1;var i=sl(r);return!i.hidden},dy=function(r,i){if(!!r){var e=sl(r);e.hidden=i;var d=r.rexContainer.parent;d?d.setChildVisible(r,!i):this.setVisible(!i)}},hN={show(r){return r===void 0&&(r=this),bn(r),this},hide(r){return r===void 0&&(r=this),zn(r),this},isShow(r){return r===void 0&&(r=this),dl(r)}},Nd=function(r,i,e,d,t){if(!r||!r.getBounds||d&&!d(r,i,e))return!1;var n=Id(r,!0);return!(!n.contains(i,e)||t&&!t(r,i,e))},vl=function(r,i,e,d){if(i)return Nd(r,i.x,i.y,e,d);for(var t=r.scene.input.manager,n=t.pointersTotal,u=t.pointers,s=0;s<n;s++)if(i=u[s],Nd(r,i.x,i.y,e,d))return!0;return!1},lN=function(r,i){return i===void 0&&(i=this),vl(i,r)},cl=function(r){return r&&typeof r=="function"},ki=function(r){return Object.prototype.toString.call(r)==="[object Array]"},bd=function(r,i,e,d,t){return Nd(r,i,e,uN(d),fN(t))},vy=function(r){var i=r.rexSizer&&r.rexSizer.hidden;return!i},uN=function(r){return r?function(i,e,d){return vy(i)?(r(i,e,d),!0):!1}:vy},fN=function(r){return r},dN=function(r,i,e,d,t){if(cl(e)||(t=e,e=void 0,d=void 0),t===void 0&&(this.sizerChildren?t=this.sizerChildren:t=this.children),ki(t)){for(var n,u=0,s=t.length;u<s;u++)if(n=t[u],bd(n,r,i,e,d))return n}else{var n;for(var o in t)if(n=t[o],bd(n,r,i,e,d))return n}return null},vN={getParentSizer(r,i){return this.getParent(r,i)},getTopmostSizer(r){return this.getTopmostParent(r)}},rs=function(r,i,e){!r||i===void 0&&e===void 0||(r.resize?(i===void 0&&(i=r.width),e===void 0&&(e=r.height),r.resize(i,e)):(i!==void 0&&(r.displayWidth=i),e!==void 0&&(r.displayHeight=e)))},pN=function(r,i){return i===void 0?i={}:i===!0&&(i=cN),i.x=r.x,i.y=r.y,i.scaleX=r.scaleX,i.scaleY=r.scaleY,i.width=r.width,i.height=r.height,i.displayWidth=r.displayWidth,i.displayHeight=r.displayHeight,i},cN={},za=function(r){this.sizerEventsEnable&&(pN(r,this.getChildPrevState(r)),this.layoutedChildren.push(r))},Ya=function(r,i,e,d,t,n,u,s){al(r,i,e,d,t,n),u!==void 0&&(r.x+=u),s!==void 0&&(r.y+=s),this.resetChildPositionState(r),this.sizerEventsEnable&&r.emit("sizer.postlayout",r,this)},gN=Phaser.Display.Align.CENTER,mN=function(){if(this.backgroundChildren!==void 0)for(var r=this.backgroundChildren,i=this.left,e=this.top,d=this.width,t=this.height,n,u,s,o,h,a,l,c=0,f=r.length;c<f;c++)n=r[c],u=n.rexSizer,!u.hidden&&(s=u.padding,za.call(this,n),o=i+s.left,h=e+s.top,a=d-s.left-s.right,l=t-s.top-s.bottom,rs(n,a,l),Ya.call(this,n,o,h,a,l,gN))},xN=function(r,i){var e=typeof r;return e==="string"?r=this.getElement(r):(r===void 0||e!="object")&&(i=r,r=this),i===void 0&&(i=!0),r.input&&r.input.hasOwnProperty("draggable")?r.input.draggable=i:i&&(r.setInteractive(),r.scene.input.setDraggable(r),r.on("drag",function(d,t,n){var u=this.getTopmostSizer();u.x+=t-r.x,u.y+=n-r.y,u.emit("sizer.drag",d,t,n)},this).on("dragstart",function(d,t,n){var u=this.getTopmostSizer();u.emit("sizer.dragstart",d,t,n)},this).on("dragend",function(d,t,n,u){var s=this.getTopmostSizer();s.emit("sizer.dragend",d,t,n,u)},this)),this},Ua=Phaser.Utils.Objects.GetValue,as=class extends Me{constructor(i,e){super(i,e);this._enable=void 0,i.setInteractive(Ua(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(Ua(i,"enable",!0)),this.setMode(Ua(i,"mode",1)),this.setClickInterval(Ua(i,"clickInterval",100)),this.setDragThreshold(Ua(i,"threshold",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPress,this),i.on("pointerup",this.onRelease,this),i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onMove,this),i.on("pointerover",this.onOver,this),i.on("pointeroutr",this.onOut,this)}shutdown(i){this.isShutdown||(this.pointer=null,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i){i||this.cancel(),this._enable=i;var e=i?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=yN[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}onPress(i,e,d,t){this.pointer===void 0&&(this.pointer=i,this.mode===0&&this.click(i.downTime,i,t))}onRelease(i,e,d,t){this.pointer===i&&(this.mode===1&&this.click(i.upTime,i,t),this.pointer=void 0)}onPointOut(i,e){this.pointer===i&&this.cancel()}onMove(i,e,d,t){this.pointer===i&&this.dragThreshold!==void 0&&i.getDistance()>=this.dragThreshold&&this.cancel()}click(i,e,d){if(!this.enable)return this;if(i===void 0)return this.emit("click",this,this.parent,e,d),this;this.pointer=void 0;var t=this.lastClickTime;return t!==void 0&&i-t<=this.clickInterval?this:(this.lastClickTime=i,this.emit("click",this,this.parent,e,d),this)}cancel(){return this.pointer=void 0,this}onOver(i,e,d,t){return this.enable?(this.emit("over",this,this.parent,i,t),this):this}onOut(i,e){return this.enable?(this.emit("out",this,this.parent,i,e),this):this}},yN={press:0,pointerdown:0,release:1,pointerup:1},TN={onClick(r,i,e){return r?(this._click===void 0&&(this._click=new as(this,e)),this._click.on("click",r,i),this):this},offClick(r,i){return this._click===void 0?this:(this._click.off("click",r,i),this)},enableClick(r){return this._click===void 0?this:(this._click.setEnable(r),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}},pl=Phaser.Utils.Objects.GetValue,Va=class extends Me{constructor(i,e){super(i,e);this._enable=void 0;var d=pl(e,"inputConfig",void 0);d&&i.setInteractive(d),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(pl(i,"enable",!0)),this.setMode(pl(i,"mode",1)),this.setClickInterval(pl(i,"clickInterval",100)),this}boot(){var i=this.parent.scene;i.input.on("pointerdown",this.onPress,this),i.input.on("pointerup",this.onRelease,this)}shutdown(i){if(!this.isShutdown){var e=this.parent.scene;e.input.off("pointerdown",this.onPress,this),e.input.off("pointerup",this.onRelease,this),super.shutdown(i)}}get enable(){return this._enable}set enable(i){if(this._enable!==i){this._enable=i;var e=i?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(i){return typeof i=="string"&&(i=CN[i]),this.mode=i,this}setClickInterval(i){return this.clickInterval=i,this}isPointerInside(i){var e=this.parent,d=e.input?kf:vl;return d(e,i)}onPress(i){if(this.mode===0){if(!this.parent.willRender(i.camera))return;this.isPointerInside(i)||this.click(i.downTime,i)}}onRelease(i){if(this.mode===1){if(!this.parent.willRender(i.camera))return;this.isPointerInside(i)||this.click(i.upTime,i)}}click(i,e){if(!this.enable)return this;if(i===void 0)return this.emit("clickoutside",this,this.parent,e),this;var d=this.lastClickTime;return d!==void 0&&i-d<=this.clickInterval?this:(this.lastClickTime=i,this.emit("clickoutside",this,this.parent,e),this)}},CN={press:0,pointerdown:0,release:1,pointerup:1},SN={onClickOutside(r,i,e){return r?(this._clickOutside===void 0&&(this._clickOutside=new Va(this,e)),this._clickOutside.on("clickoutside",r,i),this):this},offClickOutside(r,i){return this._clickOutside===void 0?this:(this._clickOutside.off("clickoutside",r,i),this)},enableClickOutside(r){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(r),this)},disableClickOutside(){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(!1),this)}},ji=class{constructor(i){var e=Ti(i,"states",void 0);e&&this.addStates(e);var d=Ti(i,"extend",void 0);if(d)for(var t in d)(!this.hasOwnProperty(t)||this[t]===void 0)&&(this[t]=d[t]);var n=Ti(i,"eventEmitter",void 0),u=Ti(i,"EventEmitterClass",void 0);this.setEventEmitter(n,u),this._stateLock=!1,this.resetFromJSON(i)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(i){this.setEnable(Ti(i,"enable",!0)),this.start(Ti(i,"start",void 0));var e=Ti(i,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(i){if(!(!this.enable||this._stateLock)&&this._state!==i){if(this._prevState=this._state,this._state=i,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,d=this[e];d&&d.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var t="enter_"+this._state,n=this[t];n&&n.call(this),this.emit(t,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(i){return this._start=i,this._prevState=void 0,this._state=i,this}goto(i){return i!=null&&(this.state=i),this}next(){var i,e=this["next_"+this.state];return e&&(typeof e=="string"?i=e:i=e.call(this)),this.goto(i),this}addState(i,e){typeof i!="string"&&(e=i,i=e.name);var d=e.next;d&&(this["next_"+i]=d);var t=e.exit;t&&(this["exit_"+i]=t);var n=e.enter;return n&&(this["enter_"+i]=n),this}addStates(i){if(Array.isArray(i))for(var e=0,d=i.length;e<d;e++)this.addState(i[e]);else for(var t in i)this.addState(t,i[t]);return this}runMethod(i,e,d,t,n,u){var s=this[i+"_"+this.state];if(!!s){var o=arguments.length;switch(o){case 1:return s.call(this);case 2:return s.call(this,e);case 3:return s.call(this,e,d);case 4:return s.call(this,e,d,t);case 5:return s.call(this,e,d,t,n);case 6:return s.call(this,e,d,t,n,u)}for(var h=new Array(o-1),a=1;a<o;a++)h[a-1]=arguments[a];return s.apply(this,h)}}update(i,e){this.runMethod("update",i,e)}preupdate(i,e){this.runMethod("preupdate",i,e)}postupdate(i,e){this.runMethod("postupdate",i,e)}};Object.assign(ji.prototype,gr);var cy=class extends ji{constructor(){super({eventEmitter:!1});this.goto("IDLE")}setCooldownTime(i){return this.cooldownTime=i,this.cooldownMode=i!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(i,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}},zd=Phaser.Utils.Objects.GetValue,gl=class extends Me{constructor(i,e){super(i,e);this._enable=void 0,this.cooldown=new cy,this.parent.setInteractive(zd(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.setEnable(zd(i,"enable",!0)),this.setCooldown(zd(i,"cooldown",void 0)),this}boot(){var i=this.parent;i.on("pointerdown",this.onPointIn,this),i.on("pointerover",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),i.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(i){this.cooldown.setCooldownTime(i)}setCooldown(i){return this.cooldownTime=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(i,e,d){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.isInTouched=!0)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0,this.isInTouched=!1)}preupdate(i,e){this.cooldown.update(i,e),this.isInTouched&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}},EN={onTouching(r,i,e){return r?(this._inTouching===void 0&&(this._inTouching=new gl(this,e)),this._inTouching.on("intouch",r,i),this):this},offTouching(r,i){return this._click===void 0?this:(this._inTouching.off("intouch",r,i),this)}},py=function(r,i,e){for(var d,t=0,n=r.length;t<n;t++)if(d=r[t],!!bd(d,i,e))return d.pointToChild(i,e);return null},os=function(r,i,e,d,t,n,u){var s;t===void 0?s=d:s=py(e,d,t),!!s&&r.emit(i,s,n,u)},PN=Phaser.Utils.Objects.GetValue,MN=function(r){var i=PN(r,"click",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("threshold")||(i.threshold=10);var e=this._childrenInteractive;this._click=new as(this,i),this._click.on("click",function(d,t,n,u){os(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,n.worldX,n.worldY,n,u)},this)}},AN=Phaser.Utils.Objects.GetValue,ON=function(r){var i=AN(r,"over",void 0);i!==!1&&this.on("pointermove",gy,this).on("pointerover",gy,this).on("pointerout",RN,this)},gy=function(r,i,e,d){var t=this._childrenInteractive,n=py(t.targetSizers,r.worldX,r.worldY),u=t.lastOverChild;n&&u&&n===u||(t.lastOverChild=n,os(t.eventEmitter,`${t.eventNamePrefix}out`,t.targetSizers,u,void 0,r,d),os(t.eventEmitter,`${t.eventNamePrefix}over`,t.targetSizers,n,void 0,r,d))},RN=function(r,i){var e=this._childrenInteractive,d=e.lastOverChild;e.lastOverChild=null,os(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,d,void 0,r,i)},Yd=Phaser.Utils.Objects.GetValue,Wa=class extends Ta{constructor(i,e){var d=lx(i);d===i&&(i=void 0),super(d,e),this.gameObject=i,i&&i.setInteractive(Yd(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable(Yd(i,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Yd(i,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Ud,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(i){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setDetectBounds(i){return this.bounds=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i,e){if(!!this.enable&&this.pointer===void 0){var d=this.bounds?this.bounds.contains(i.x,i.y):!0;!d||this.pointer!==i&&(this.pointer=i,this.lastPointer=i,this.movedState=!1,this.tracerState=my,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;!e||this.pointer===i&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Ud,this.onDragEnd())}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,d=this.pointer===i;!d&&e||(d&&!e?this.onPointerUp(i):(this.movedState||(this.movedState=i.x!==i.downX||i.y!==i.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===my&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Ud,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(i,e){}postUpdate(i,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=LN,this}},Ud=0,my=1,LN="IDLE",bs=Phaser.Utils.Objects.GetValue,FN=Phaser.Math.Distance.Between,Pr=class extends Wa{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.stop(),d.tapsCount=0,d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var n=d.lastPointer;d.x=n.x,d.y=n.y,d.worldX=n.worldX,d.worldY=n.worldY}},BEGIN:{enter:function(){d.start(),d.tapsCount=0,d.emit("tappingstart",d,d.gameObject,d.lastPointer)}},RECOGNIZED:{enter:function(){d.start(),d.emit("tap",d,d.gameObject,d.lastPointer),d.emit(`${d.tapsCount}tap`,d,d.gameObject,d.lastPointer)}}},init:function(){this.state=zs},eventEmitter:!1};this.setRecongizedStateObject(new ji(t))}resetFromJSON(i){super.resetFromJSON(i),this.setHoldTime(bs(i,"time",250)),this.setTapInterval(bs(i,"tapInterval",200)),this.setDragThreshold(bs(i,"threshold",9)),this.setTapOffset(bs(i,"tapOffset",10));var e=bs(i,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(bs(i,"maxTaps",void 0)),this.setMinTaps(bs(i,"minTaps",void 0))),this}onDragStart(){switch(this.state){case zs:this.state=Mr;break;case Mr:var i=this.lastPointer,e=FN(i.upX,i.upY,i.x,i.y);e>this.tapOffset&&(this.state=Ar,this.state=Mr);break;case Ar:this.state=Mr;break}}onDragEnd(){this.state===Mr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Ar))}onDrag(){this.state!==zs&&this.pointer.getDistance()>this.dragThreshold&&(this.state=zs)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===Mr){var d=this.lastPointer;if(d.isDown){var t=i-d.downTime;t>this.holdTime&&(this.state=zs)}else{var n=i-d.upTime;n>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Ar:this.state=zs)}}}postUpdate(i,e){!this.isRunning||!this.enable||this.state===Ar&&(this.state=zs)}get isTapped(){return this.state===Ar}setHoldTime(i){return this.holdTime=i,this}setTapInterval(i){return this.tapInterval=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setTapOffset(i){return this.tapOffset=i,this}setMaxTaps(i){return this.maxTaps=i,this}setMinTaps(i){return this.minTaps=i,this}setTaps(i,e){return e===void 0&&(e=i),this.setMinTaps(i).setMaxTaps(e),this}},zs="IDLE",Mr="BEGIN",Ar="RECOGNIZED",xy=Phaser.Utils.Objects.GetValue,Rr=class extends Wa{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var n=d.lastPointer;d.x=n.x,d.y=n.y,d.worldX=n.worldX,d.worldY=n.worldY}},BEGIN:{enter:function(){d.start()},exit:function(){d.stop()}},RECOGNIZED:{enter:function(){d.emit("pressstart",d,d.gameObject,d.lastPointer)},exit:function(){d.emit("pressend",d,d.gameObject,d.lastPointer)}}},init:function(){this.state=ml},eventEmitter:!1};this.setRecongizedStateObject(new ji(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(xy(i,"threshold",9)),this.setHoldTime(xy(i,"time",251)),this}onDragStart(){this.state=yy,this.holdTime===0&&(this.state=Vd)}onDragEnd(){this.state=ml}onDrag(){this.state!==ml&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ml)}preUpdate(i,e){if(!(!this.isRunning||!this.enable)&&this.state===yy){var d=i-this.pointer.downTime;d>=this.holdTime&&(this.state=Vd)}}get isPressed(){return this.state===Vd}setHoldTime(i){return this.holdTime=i,this}setDragThreshold(i){return this.dragThreshold=i,this}},ml="IDLE",yy="BEGIN",Vd="RECOGNIZED",IN=Phaser.Utils.Objects.GetValue,xl=class extends Wa{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{},BEGIN:{enter:function(){var n=d.pointer;d.startX=n.x,d.startY=n.y,d.startWorldX=n.worldX,d.startWorldY=n.worldY}},RECOGNIZED:{enter:function(){d.emit("panstart",d,d.gameObject,d.lastPointer)},exit:function(){var n=d.lastPointer;d.endX=n.x,d.endY=n.y,d.endWorldX=n.worldX,d.endWorldY=n.worldY,d.emit("panend",d,d.gameObject,d.lastPointer)}}},init:function(){this.state=Ty},eventEmitter:!1};this.setRecongizedStateObject(new ji(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(IN(i,"threshold",10)),this}onDragStart(){this.state=Cy,this.dragThreshold===0&&(this.state=yl)}onDragEnd(){this.state=Ty}onDrag(){switch(this.state){case Cy:this.pointer.getDistance()>=this.dragThreshold&&(this.state=yl);break;case yl:var i=this.pointer.position,e=this.pointer.prevPosition;this.dx=i.x-e.x,this.dy=i.y-e.y;var d=this.pointer;this.x=d.x,this.y=d.y,this.worldX=d.worldX,this.worldY=d.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===yl}setDragThreshold(i){return this.dragThreshold=i,this}},Ty="IDLE",Cy="BEGIN",yl="RECOGNIZED",wN=Phaser.Math.Distance.Between,DN=Phaser.Math.Angle.Between,BN={getDt:function(){var r=this.scene.sys.game,i=r.loop.delta;return i},getVelocity:function(){var r=this.pointer.position,i=this.pointer.prevPosition,e=wN(i.x,i.y,r.x,r.y),d=e/(this.getDt()*.001);return d},getVelocityX:function(){var r=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(r.x-i.x),d=e/(this.getDt()*.001);return d},getVelocityY:function(){var r=this.pointer.position,i=this.pointer.prevPosition,e=Math.abs(r.y-i.y),d=e/(this.getDt()*.001);return d},getVelocityAngle:function(){var r=this.pointer.position,i=this.pointer.prevPosition,e=DN(i.x,i.y,r.x,r.y);return e}},GN={"up&down":0,"left&right":1,"4dir":2,"8dir":3},bN=function(r,i,e){switch(e===void 0?e={}:e===!0&&(e=NN),e.left=!1,e.right=!1,e.up=!1,e.down=!1,r=(r+360)%360,i){case 0:r<180?e.down=!0:e.up=!0;break;case 1:r>90&&r<=270?e.left=!0:e.right=!0;break;case 2:r>45&&r<=135?e.down=!0:r>135&&r<=225?e.left=!0:r>225&&r<=315?e.up=!0:e.right=!0;break;case 3:r>22.5&&r<=67.5?(e.down=!0,e.right=!0):r>67.5&&r<=112.5?e.down=!0:r>112.5&&r<=157.5?(e.down=!0,e.left=!0):r>157.5&&r<=202.5?e.left=!0:r>202.5&&r<=247.5?(e.left=!0,e.up=!0):r>247.5&&r<=292.5?e.up=!0:(r>292.5&&r<=337.5&&(e.up=!0),e.right=!0);break}return e},NN={},Wd=Phaser.Utils.Objects.GetValue,zN=Phaser.Math.RadToDeg,Ys=class extends Wa{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var n=d.lastPointer;d.x=n.x,d.y=n.y,d.worldX=n.worldX,d.worldY=n.worldY}},BEGIN:{enter:function(){d.validDrag=!1}},RECOGNIZED:{enter:function(){d.start(),d.updateDirectionStates(),d.emit("swipe",d,d.gameObject,d.lastPointer)},exit:function(){d.stop(),d.clearDirectionStates()}}},init:function(){this.state=Xd},eventEmitter:!1};this.setRecongizedStateObject(new ji(t)),this.clearDirectionStates()}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(Wd(i,"threshold",10)),this.setVelocityThreshold(Wd(i,"velocityThreshold",1e3)),this.setDirectionMode(Wd(i,"dir","8dir")),this}onDragStart(){this.state=Sy}onDragEnd(){this.state=Xd}onDrag(){this.state===Sy&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Hd))}postUpdate(i,e){!this.isRunning||!this.enable||this.state===Hd&&(this.state=Xd)}get isSwiped(){return this.state===Hd}get dragVelocity(){var i;switch(this.dirMode){case 0:i=this.getVelocityY();break;case 1:i=this.getVelocityX();break;default:i=this.getVelocity();break}return i}setDragThreshold(i){return this.dragThreshold=i,this}setVelocityThreshold(i){return this.velocityThreshold=i,this}setDirectionMode(i){return typeof i=="string"&&(i=GN[i]),this.dirMode=i,this}updateDirectionStates(){var i=zN(this.getVelocityAngle());return bN(i,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}};Object.assign(Ys.prototype,BN);var Xd="IDLE",Sy="BEGIN",Hd="RECOGNIZED",$d=Phaser.Utils.Objects.GetValue,YN=Phaser.Utils.Array.SpliceOne,UN=Phaser.Math.Distance.Between,VN=Phaser.Math.Angle.Between,Tl=class{constructor(i,e){var d=i.input.manager.pointersTotal-1;d<2&&i.input.addPointer(2-d),this.scene=i,this.setEventEmitter($d(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setEnable($d(i,"enable",!0)),this.bounds=$d(i,"bounds",void 0),this.tracerState=Cl,this.pointers.length=0,_n(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,_n(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragCancel(),this._enable=i,this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(i){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var d=this.pointers.indexOf(i);if(d===-1)switch(this.movedState[i.id]=!1,this.pointers.push(i),this.tracerState){case Cl:this.tracerState=Ha,this.onDrag1Start();break;case Ha:this.tracerState=cn,this.onDrag2Start();break}}}}onPointerUp(i){if(!!this.enable){var e=this.bounds?this.bounds.contains(i.x,i.y):!0;if(!!e){var d=this.pointers.indexOf(i);if(d!==-1)switch(delete this.movedState[i.id],YN(this.pointers,d),this.tracerState){case Ha:this.tracerState=Cl,this.onDrag1End();break;case cn:this.tracerState=Ha,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(i){if(!!this.enable&&i.isDown){var e=this.bounds?this.bounds.contains(i.x,i.y):!0,d=this.pointers.indexOf(i)!==-1;if(!(!d&&e)){if(d&&!e)this.onPointerUp(i);else if(this.movedState[i.id]||(this.movedState[i.id]=i.x!==i.downX||i.y!==i.downY),this.movedState[i.id])switch(this.tracerState){case Ha:this.onDrag1();break;case cn:this.onDrag2();break}}}}dragCancel(){return this.tracerState===cn&&this.onDrag2End(),this.pointers.length=0,_n(this.movedState),this.tracerState=Cl,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==cn)return 0;var i=this.pointers[0],e=this.pointers[1];return UN(i.x,i.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==cn)return 0;var i=this.pointers[0],e=this.pointers[1];return VN(i.x,i.y,e.x,e.y)}get drag1Vector(){var i=this.pointers[0];if(i&&this.movedState[i.id]){var e=i.position,d=i.prevPosition;Xa.x=e.x-d.x,Xa.y=e.y-d.y}else Xa.x=0,Xa.y=0;return Xa}get centerX(){if(this.tracerState!==cn)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.x+e.x)/2}get centerY(){if(this.tracerState!==cn)return 0;var i=this.pointers[0].position,e=this.pointers[1].position;return(i.y+e.y)/2}get prevCenterX(){if(this.tracerState!==cn)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.x+e.x)/2}get prevCenterY(){if(this.tracerState!==cn)return 0;var i=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(i.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(i){return this.recongizedState=i,this}get state(){return this.recongizedState.state}set state(i){this.recongizedState.state=i}cancel(){return this.state=WN,this}};Object.assign(Tl.prototype,gr);var Xa={},Cl=0,Ha=1,cn=2,WN="IDLE",XN=Phaser.Utils.Objects.GetValue,Sl=class extends Tl{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.prevDistance=void 0,d.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){d.emit("pinchstart",d)},exit:function(){d.emit("pinchend",d)}}},init:function(){this.state=Ey},eventEmitter:!1};this.setRecongizedStateObject(new ji(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(XN(i,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Py,this.dragThreshold===0&&(this.state=El)}onDrag2End(){this.state=Ey}onDrag2(){switch(this.state){case Py:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.prevDistance=i,this.state=El}break;case El:var i=this.distanceBetween;this.scaleFactor=i/this.prevDistance,this.emit("pinch",this),this.prevDistance=i;break}}get isPinched(){return this.state===El}setDragThreshold(i){return this.dragThreshold=i,this}},Ey="IDLE",Py="BEGIN",El="RECOGNIZED",HN=Phaser.Math.RotateAround,My=function(r,i,e,d){return HN(r,i,e,d),r.rotation+=d,r},KN=function(r,i,e,d){return d===void 0?d={}:d===!0&&(d=$N),e.getWorldPoint(r,i,d),d},$N={},ZN=function(r,i){if(!this.isRotation)return this;i===void 0&&(i=this.pointers[0].camera);var e=this.movementCenterX,d=this.movementCenterY,t=KN(this.centerX,this.centerY,i,!0),n=t.x,u=t.y,s=this.rotation;if(Array.isArray(r))for(var o=r,h=0,a=o.length;h<a;h++)r=o[h],r.x+=e,r.y+=d,My(r,n,u,s);else r.x+=e,r.y+=d,My(r,n,u,s);return this},JN=Phaser.Utils.Objects.GetValue,Kd=Phaser.Math.Angle.WrapDegrees,Ay=Phaser.Math.Angle.ShortestBetween,Zd=Phaser.Math.RadToDeg,QN=Phaser.Math.DegToRad,$a=class extends Tl{constructor(i,e){super(i,e);var d=this,t={states:{IDLE:{enter:function(){d.prevAngle=void 0,d.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){d.emit("rotatestart",d)},exit:function(){d.emit("rotateend",d)}}},init:function(){this.state=Ry},eventEmitter:!1};this.setRecongizedStateObject(new ji(t))}resetFromJSON(i){return super.resetFromJSON(i),this.setDragThreshold(JN(i,"threshold",0)),this}onDrag2Start(){this.prevAngle=Kd(Zd(this.angleBetween)),this.state=Oy,this.dragThreshold===0&&(this.state=Pl)}onDrag2End(){this.state=Ry}onDrag2(){switch(this.state){case Oy:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var i=Kd(Zd(this.angleBetween));this.angle=Ay(this.prevAngle,i),this.prevAngle=i,this.state=Pl}break;case Pl:var i=Kd(Zd(this.angleBetween));this.angle=Ay(this.prevAngle,i),this.prevAngle=i,this.emit("rotate",this);break}}get isRotated(){return this.state===Pl}get rotation(){return QN(this.angle)}setDragThreshold(i){return this.dragThreshold=i,this}},kN={spinObject:ZN};Object.assign($a.prototype,kN);var Ry="IDLE",Oy="BEGIN",Pl="RECOGNIZED",jN=Phaser.Utils.Objects.GetValue,qN=function(r){var i=jN(r,"tap",void 0);if(i!==!1){var e=this._childrenInteractive;this._tap=new Pr(this,i),this._tap.on("tap",function(d,t,n){os(e.eventEmitter,`${e.eventNamePrefix}${d.tapsCount}tap`,e.targetSizers,d.worldX,d.worldY,n)},this)}},_N=Phaser.Utils.Objects.GetValue,tb=function(r){var i=_N(r,"press",void 0);if(i!==!1){var e=this._childrenInteractive;this._press=new Rr(this,i),this._press.on("pressstart",function(d,t,n){os(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,d.worldX,d.worldY,n)},this).on("pressend",function(d,t,n){os(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,d.worldX,d.worldY,n)},this)}},eb=Phaser.Utils.Objects.GetValue,ib=function(r){var i=eb(r,"swipe",void 0);if(i!==!1){i===void 0&&(i={}),i.hasOwnProperty("dir")||(i.dir="4dir");var e=this._childrenInteractive;this._swipe=new Ys(this,i),this._swipe.on("swipe",function(d,t,n){var u=d.left?"left":d.right?"right":d.up?"up":"down";os(e.eventEmitter,`${e.eventNamePrefix}swipe${u}`,e.targetSizers,d.worldX,d.worldY,n)},this)}},Jd=Phaser.Utils.Objects.GetValue,Ml=function(r,i){return r.setInteractive(),r._childrenInteractive={targetSizers:Jd(i,"targets",[r]),eventEmitter:Jd(i,"eventEmitter",r),eventNamePrefix:Jd(i,"inputEventPrefix","child.")},MN.call(r,i),ON.call(r,i),qN.call(r,i),tb.call(r,i),ib.call(r,i),r},nb=function(r){return Ml(this,r),this},sb=function(){for(var r=this.getAllChildren([this]),i=0,e=r.length;i<e;i++){var d=r[i];d.emit.apply(d,arguments)}return this},Ly={getSizerConfig:sl,getChildPrevState:r3,pushIntoBounds:o3,drawBounds:C3,resolveWidth:wd,resolveChildrenWidth:L3,resolveHeight:Dd,getChildWidth:F3,getChildHeight:I3,getExpandedChildWidth:w3,getExpandedChildHeight:D3,getChildrenWidth:B3,getChildrenHeight:G3,addChildrenMap:kx,addElement:kx,removeChildrenMap:M3,getElement:R3,getAllChildrenSizers:N3,getChildrenSizers:b3,preLayout:wa,layout:Y3,runLayout:U3,layoutChildren:V3,runWidthWrap:jx,layoutBackgrounds:mN,postLayout:W3,setAnchor:X3,isInTouching:lN,pointToChild:dN,setDraggable:xN,setChildrenInteractive:nb,broadcastEvent:sb};Object.assign(Ly,O3,E3,P3,vN,K3,j3,tN,rN,oN,TN,SN,EN,hN,z3);var Ka=Phaser.Utils.Objects.GetValue,hs=class extends ii{constructor(i,e,d,t,n,u){super(i,e,d,2,2);this.isRexSizer=!0,this.setMinSize(t,n),this.setName(Ka(u,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var s=Ka(u,"anchor",void 0);s&&this.setAnchor(s),this.setInnerPadding(Ka(u,"space",0)),this.setDraggable(Ka(u,"draggable",!1)),this.setSizerEventsEnable(Ka(u,"sizerEvents",!1)),this.setDirty(!0)}destroy(i){if(!!this.scene){if(i)for(var e=this.getAllChildrenSizers([this]),d=0,t=e.length;d<t;d++)e[d].sizerEventsEnable=!1;super.destroy(i),_n(this.backgroundChildren),_n(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(i,e){return this.setMinWidth(i).setMinHeight(e),this}setMinWidth(i){return i==null&&(i=0),this.minWidth=i,this}setMinHeight(i){return i==null&&(i=0),this.minHeight=i,this}setDirty(i){return i===void 0&&(i=!0),this.dirty=i,this}setSizerEventsEnable(i){return i===void 0&&(i=!0),this.sizerEventsEnable=i,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-_t(this)*this.originX}set left(i){this.x+=i-this.left}alignLeft(i){return this.left=i,this}get right(){return this.left+_t(this)}set right(i){this.x+=i-this.right}alignRight(i){return this.right=i,this}get centerX(){return this.left+_t(this)/2}set centerX(i){this.x+=i-this.centerX}alignCenterX(i){return this.centerX=i,this}get top(){return this.y-Jt(this)*this.originY}set top(i){this.y+=i-this.top}alignTop(i){return this.top=i,this}get bottom(){return this.top+Jt(this)}set bottom(i){this.y+=i-this.bottom}alignBottom(i){return this.bottom=i,this}get centerY(){return this.top+Jt(this)/2}set centerY(i){this.y+=i-this.centerY}alignCenterY(i){return this.centerY=i,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var i=this.minWidth-this.space.left-this.space.right;return Math.max(i,0)}get minInnerHeight(){var i=this.minHeight-this.space.top-this.space.bottom;return Math.max(i,0)}};Object.assign(hs.prototype,Ly);var rb=function(){if(this.rexSizer.hidden)return 0;var r=0,i=this.sizerChildren,e,d,t;for(var n in i)e=i[n],d=e.rexSizer.padding,t=this.getChildWidth(e)+d.left+d.right,r=Math.max(t,r);return r+this.space.left+this.space.right},ab=function(){if(this.rexSizer.hidden)return 0;var r=0,i=this.sizerChildren,e,d,t;for(var n in i)e=i[n],t=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:Jt(e),d=e.rexSizer.padding,t+=d.top+d.bottom,r=Math.max(t,r);return r+this.space.top+this.space.bottom},ob=function(r,i){i===void 0&&(i=this.width);var e,d=r.rexSizer;if(d.expandWidth){var t=i-this.space.left-this.space.right,n=d.padding;e=t-n.left-n.right}return e},hb=function(r,i){i===void 0&&(i=this.height);var e,d=r.rexSizer;if(d.expandHeight){var t=i-this.space.top-this.space.bottom,n=d.padding;e=t-n.top-n.bottom}return e},lb=function(r){r===void 0&&(r=[]);var i=this.sizerChildren,e;for(var d in i)e=i[d],e.isRexSizer&&r.push(e);return r},Qd=function(r,i){r.width<r.childrenWidth&&console.warn(`Layout width error: Parent=${i.constructor.name}, Child=${r.constructor.name}`),r.height<r.childrenHeight&&console.warn(`Layout height error: Parent=${i.constructor.name}, Child=${r.constructor.name}`)},ub=function(){var r,i,e,d=this.innerLeft,t=this.innerTop,n=this.innerWidth,u=this.innerHeight,s,o,h,a,l,c,f=this.sizerChildren;for(var v in f)r=f[v],!r.rexSizer.hidden&&(i=r.rexSizer,e=i.padding,za.call(this,r),r.isRexSizer?(r.runLayout(this,this.getExpandedChildWidth(r),this.getExpandedChildHeight(r)),Qd(r,this)):(l=void 0,c=void 0,i.expandWidth&&(l=n-e.left-e.right),i.expandHeight&&(c=u-e.top-e.bottom),rs(r,l,c)),s=d+e.left,h=n-e.left-e.right,o=t+e.top,a=u-e.top-e.bottom,Ya.call(this,r,s,o,h,a,i.align,i.alignOffsetX,i.alignOffsetY))},Fy=Phaser.Utils.Objects.IsPlainObject,pn=Phaser.Utils.Objects.GetValue,Iy=Phaser.Display.Align.CENTER,fb=Phaser.Utils.String.UUID,db=function(r,i,e,d,t,n,u,s,o){if(Ia.call(this,r),Fy(i)){var a=i;i=pn(a,"key",void 0),e=pn(a,"align",Iy),s=pn(a,"offsetX",0),o=pn(a,"offsetY",0),d=pn(a,"padding",0),t=pn(a,"expand",!0),r.isRexSizer||(n=pn(a,"minWidth",r._minWidth),u=pn(a,"minHeight",r._minHeighted))}var h=i!==void 0;h||(i=fb()),typeof e=="string"&&(e=rl[e]),e===void 0&&(e=Iy),s===void 0&&(s=0),o===void 0&&(o=0),d===void 0&&(d=0),t===void 0&&(t=!0),r.isRexSizer||(n===void 0&&(n=r._minWidth),u===void 0&&(u=r._minHeight));var a=this.getSizerConfig(r);return a.align=e,a.alignOffsetX=s,a.alignOffsetY=o,a.padding=Cr(d),Fy(t)?(a.expandWidth=pn(t,"width",!1),a.expandHeight=pn(t,"height",!1)):(a.expandWidth=t,a.expandHeight=t),r.isRexSizer||(a.expandWidth&&(r.minWidth=n===void 0?_t(r):n),a.expandHeight&&(r.minHeight=u===void 0?Jt(r):u)),this.sizerChildren.hasOwnProperty(i)&&this.sizerChildren[i].destroy(),this.sizerChildren[i]=r,h&&this.addChildrenMap(i,r),this},vb={add:db},cb=Phaser.Utils.Array.Remove,pb=ii.prototype.remove,Al=function(r,i){return this.isBackground(r)&&cb(this.backgroundChildren,r),pb.call(this,r,i),!i&&this.sizerEventsEnable&&(r.emit("sizer.remove",r,this),this.emit("remove",r,this)),this},gb=ii.prototype.clear,Rl=function(r){this.backgroundChildren&&(this.backgroundChildren.length=0);var i=!r&&this.sizerEventsEnable,e;if(i&&(e=this.getChildren([])),gb.call(this,r),i)for(var d,t=0,n=e.length;t<n;t++)d=e[t],d.emit("sizer.remove",d,this),this.emit("remove",d,this);return this},mb={remove(r,i){var e;if(typeof r=="string"){if(e=r,r=this.sizerChildren[e],!r)return this}else{if(this.getParentSizer(r)!==this)return this;e=this.childToKey(r)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Al.call(this,r,i),this},removeAll(r){for(var i in this.sizerChildren)this.remove(i,r);return this},clear(r){for(var i in this.sizerChildren)delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i];return Rl.call(this,r),this}},wy={getChildrenWidth:rb,getChildrenHeight:ab,getExpandedChildWidth:ob,getExpandedChildHeight:hb,getChildrenSizers:lb,layoutChildren:ub};Object.assign(wy,vb,mb);var Ol=function(r,i){if(Array.isArray(r))return r.indexOf(i);for(var e in r)if(r[e]===i)return e;return null},Dy=Phaser.Utils.Objects.IsPlainObject,Or=Phaser.Utils.Objects.GetValue,qi=class extends hs{constructor(i,e,d,t,n,u){Dy(e)?(u=e,e=Or(u,"x",0),d=Or(u,"y",0),t=Or(u,"width",void 0),n=Or(u,"height",void 0)):Dy(t)&&(u=t,t=Or(u,"width",void 0),n=Or(u,"height",void 0)),super(i,e,d,t,n,u),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(i){if(typeof i=="string"){var e=i;if(this.sizerChildren.hasOwnPropery(e))return e}else return Ol(this.sizerChildren,i);return null}};Object.assign(qi.prototype,wy);var xb=Phaser.Math.Distance.Between,Ll=function(r,i,e){var d=r.width/2;return xb(d,d,i,e)<=d},yb=Phaser.Math.Angle.Between,Tb=Phaser.Math.Angle.Normalize,By=function(r,i,e){if(!!this.enable&&!!r.isDown){var d=this.sizerChildren.knob;if(!!Ll(d,i,e)){var t=d.width/2,n=d.startAngle,u=yb(t,t,i,e),s=d.anticlockwise?n-u:u-n,o=Tb(s)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-o)<.1?this.value=o:this.easeValueTo(o)}}},Cb=function(){var r=this.sizerChildren.knob;r.setInteractive().on("pointerdown",By,this).on("pointermove",By,this)},Gy=Phaser.Math.Angle.Between,Sb=Phaser.Math.Angle.Wrap,Eb=function(r,i,e){if(!(!this.enable||this.panPointer)){var d=this.sizerChildren.knob;!Ll(d,i,e)||Ny.call(this,r)}},Mb=function(r,i,e){if(!!this.enable&&!!r.isDown){var d=this.sizerChildren.knob;switch(this.panState){case kd:Ll(d,i,e)&&Ny.call(this,r);break;case zy:Ll(d,i,e)?Pb.call(this):by.call(this);break}}},Ab=function(r,i,e){!this.enable||this.panPointer!==r||by.call(this)},Ny=function(r){this.panPointer=r,this.panState=zy},by=function(){this.panPointer=void 0,this.panState=kd},Pb=function(){var r=this.panPointer.prevPosition,i=this.panPointer.position,e=this.sizerChildren.knob,d=Gy(e.x,e.y,r.x,r.y),t=Gy(e.x,e.y,i.x,i.y),n=e.anticlockwise?d-t:t-d,u=Sb(n)/(Math.PI*2);this.stopEaseValue(),this.value+=u},kd=0,zy=1,Rb=function(){var r=this.sizerChildren.knob;r.setInteractive().on("pointerdown",Eb,this).on("pointermove",Mb,this).on("pointerup",Ab,this),this.panPointer=void 0,this.panState=kd},Ob=function(r,i){return this.textFormatCallback=r,this.textFormatCallbackScope=i,this},Yy=function(r){r===void 0&&(r=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(r):i=this.textFormatCallback.call(this.textFormatCallbackScope,r),i},Lb=function(){var r=this.sizerChildren.text;return r&&(r.setText(Yy.call(this)),r.layout&&r.layout()),this},Fb={setTextFormatCallback:Ob,getFormatText:Yy,updateText:Lb},Ue=Phaser.Utils.Objects.GetValue,Ib=Phaser.Math.Linear,Uy=Phaser.Math.Percent,wb=Phaser.Math.Snap.To,Za=class extends qi{constructor(i,e){e===void 0&&(e={}),super(i,e),this.type="rexKnob",this.eventEmitter=Ue(e,"eventEmitter",this);var d=Ue(e,"background",void 0),t=Ue(e,"text",void 0);d&&this.addBackground(d),t&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Ue(e,"textFormatCallback",void 0),Ue(e,"textFormatCallbackScope",void 0)));var n=new yr(i,e);n.setDepth(Ue(e,"knobDepth",0)),n._value=-1,i.add.existing(n),this.add(n,"knob"),t&&(this.add(t,"text","center",0,!1),i.children.moveBelow(n,t)),this.addChildrenMap("background",d),this.addChildrenMap("knob",n),this.addChildrenMap("text",t);var u=Ue(e,"valuechangeCallback",null);if(u!==null){var s=Ue(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",u,s)}this.setEnable(Ue(e,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ue(e,"easeValue.duration",0)).setEaseValueFunction(Ue(e,"easeValue.ease","Linear")),this.setGap(Ue(e,"gap",void 0)),this.setValue(Ue(e,"value",0),Ue(e,"min",void 0),Ue(e,"max",void 0));var o=Ue(e,"input",0);switch(typeof o=="string"&&(o=Db[o]),o){case 0:Rb.call(this);break;case 1:Cb.call(this);break}}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this.sizerChildren.knob.value}set value(i){this.gap!==void 0&&(i=wb(i,this.gap));var e=this.value;this.sizerChildren.knob.value=i;var d=this.value;e!==d&&(this.updateText(),this.eventEmitter.emit("valuechange",d,e,this.eventEmitter))}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=Uy(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=Uy(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=Ib(i,e,d)),d}},Db={pan:0,drag:0,click:1,none:-1};Object.assign(Za.prototype,Fb,Ma);var Bb={arc:La,circle:nl,curve:wx,ellipse:Dx,line:Bx,lines:zx,rectangle:Yx,triangle:Ux},Vy=Phaser.Utils.Objects.GetValue,Gb=Phaser.Utils.Objects.IsPlainObject,Nb=function(){for(var r=this.getShapes(),i=0,e=r.length;i<e;i++)r[i].lineStyle().fillStyle()},bb={createShape(r,i){var e=Bb[r],d=new e;return i&&d.setName(i),d},buildShapes(r){var i=Vy(r,"create",void 0);if(Gb(i)){var e=i;for(var d in e){var t=e[d];switch(typeof t){case"number":for(var n=0;n<t;n++)this.addShape(this.createShape(d));break;case"string":this.addShape(this.createShape(d,t));break;default:for(var u=t,n=0,s=u.length;n<s;n++)this.addShape(this.createShape(d,u[n]));break}}}else if(Array.isArray(i))for(var e=i,n=0,s=e.length;n<s;n++){var o=e[n];this.addShape(this.createShape(o.type,o.name))}else typeof i=="function"&&i.call(this);this.setUpdateShapesCallback(Vy(r,"update"))},setUpdateShapesCallback(r){return r===void 0&&(r=Nb),this.dirty=this.dirty||this.updateCallback!==r,this.updateCallback=r,this},updateShapes(){this.updateCallback.call(this)}},Ja=Phaser.Utils.Objects.GetValue,zb=Phaser.Utils.Objects.IsPlainObject,Lr=class extends il{constructor(i,e,d,t,n,u){zb(e)&&(u=e,e=Ja(u,"x",0),d=Ja(u,"y",0),t=Ja(u,"width",2),n=Ja(u,"height",2)),super(i,e,d,t,n),this.type=Ja(u,"type","rexCustomShapes"),this.buildShapes(u)}};Object.assign(Lr.prototype,bb);var gn=Phaser.Utils.Objects.GetValue,Yb=Phaser.Utils.Objects.IsPlainObject,Ub=Phaser.Math.Clamp,Vb=Phaser.Math.Linear,Wy=Phaser.Math.Percent,Qa=class extends Lr{constructor(i,e,d,t,n,u){Yb(e)&&(u=e,e=gn(u,"x",0),d=gn(u,"y",0),t=gn(u,"width",2),n=gn(u,"height",2)),u===void 0&&(u={}),u.type||(u.type="rexCustomProgress"),super(i,e,d,t,n,u),this.eventEmitter=gn(u,"eventEmitter",this);var s=gn(u,"valuechangeCallback",null);if(s!==null){var o=gn(u,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",s,o)}this.setEaseValuePropName("value").setEaseValueDuration(gn(u,"easeValue.duration",0)).setEaseValueFunction(gn(u,"easeValue.ease","Linear")),this.setValue(gn(u,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(i){i=Ub(i,0,1);var e=this._value,d=e!=i;this.dirty=this.dirty||d,this._value=i,d&&this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter)}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=Wy(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=Wy(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=Vb(i,e,d)),d}};Object.assign(Qa.prototype,Ma);var Wb={setTransitionStartCallback(r,i){return this.onStartCallback=r,this.onStartCallbackScope=i,this},setTransitionProgressCallback(r,i){return this.onProgressCallback=r,this.onProgressCallbackScope=i,this},setTransitionCompleteCallback(r,i){return this.onCompleteCallback=r,this.onCompleteCallbackScope=i,this}},Xb=Phaser.Utils.Objects.IsPlainObject,Ni=Phaser.Utils.Objects.GetValue,Hb={out:0,in:1},$b={setTransitionDirection(r){return typeof r=="string"&&(r=Hb[r]),this.dir=r,this},setDuration(r){return this.duration=r,this},setEaseFunction(r){return this.easeFunction=r,this},setNextTexture(r,i){return this.nextImage.setTexture(r,i),this},transit(r,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),Xb(r)){var e=r;r=Ni(e,"key",void 0),i=Ni(e,"frame",void 0),this.setDuration(Ni(e,"duration",this.duration)).setEaseFunction(Ni(e,"ease",this.easeFunction)).setTransitionDirection(Ni(e,"dir",this.dir));var d=Ni(e,"mask",void 0);d&&this.setMaskGameObject(d),this.setMaskEnable(d===!0);var t=Ni(e,"onStart",void 0),n=Ni(e,"onProgress",void 0),u=Ni(e,"onComplete",void 0);(t!==void 0||n!==void 0||u!==void 0)&&this.setTransitionStartCallback(t,Ni(e,"onStartScope",void 0)).setTransitionProgressCallback(n,Ni(e,"onProgressScope",void 0)).setTransitionCompleteCallback(u,Ni(e,"onCompleteScope",void 0))}return this.setNextTexture(r,i),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new el(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},Xy=function(r,i,e,d,t){switch(this.clear().fillStyle(16777215),this.shape){case 1:var n=Math.min(r,i)/2;this.fillCircle(-r*(d-.5),-i*(t-.5),n+e);break;default:this.fillRect(-(r*d)-e,-(i*t)-e,r+2*e,i+2*e);break}},Kb=Phaser.GameObjects.Graphics,Fl=class extends Kb{constructor(i,e,d){e===void 0&&(e=0),typeof e=="string"&&(e=Zb[e]),d===void 0&&(d=0),super(i.scene),this.parent=i,this.shape=e,this.padding=d,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(i,e){var d=this.parent;return i===void 0&&(i=d.x),e===void 0&&(e=d.y),super.setPosition(i,e),this}resize(i,e,d){var t=this.parent;return i===void 0&&(i=t.width),e===void 0&&(e=t.height),d===void 0&&(d=this.padding),this.widthSave===i&&this.heightSave===e&&this.paddingSave===d?this:(this.widthSave=i,this.heightSave=e,this.paddingSave=d,this.originXSave=t.originX,this.originYSave=t.originY,Xy.call(this,i,e,d,t.originX,t.originY),this)}setOrigin(i,e){e===void 0&&(e=i);var d=this.parent;return i===void 0&&(i=d.originX),e===void 0&&(e=d.originY),this.originXSave===i&&this.originYSave===e?this:(this.originXSave=i,this.originYSave=e,Xy.call(this,this.widthSave,this.heightSave,this.paddingSave,i,e),this)}},Zb={rectangle:0,circle:1},Jb={setMaskGameObject(r){if(!r)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(r===!0&&this.maskGameObject instanceof Fl)return this;if(this.maskGameObject===r)return this;this.removeMaskGameObject()}return r===!0&&(r=new Fl(this)),this.maskGameObject=r,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(r,i,e){return i===void 0&&(i=!0),this.childrenMask||this.setMaskGameObject(!0),i?(r.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):r.clearMask(),this},setCurrentImageMaskEnable(r,i){return this.setImageMaskEnable(this.currentImage,r,i),this},setNextImageMaskEnable(r,i){return this.setImageMaskEnable(this.nextImage,r,i),this},setCellImagesMaskEnable(r,i){for(var e=this.getCellImages(),d=0,t=e.length;d<t;d++)this.setImageMaskEnable(e[d],r,i);return this},setMaskEnable(r,i){return this.setImageMaskEnable(this.backImage,r,i),this.setImageMaskEnable(this.frontImage,r,i),this.setCellImagesMaskEnable(r,i),this}},Qb=function(r,i){i===void 0&&(i=",");var e;return r==="__BASE"?e=function(d,t){return`${d}${i}${t}`}:e=function(d,t){return`${r}_${d}${i}${t}`},e},kb=function(r,i,e,d,t,n){e==null&&(e="__BASE"),cl(n)||(n=Qb(e,n));for(var u=r.sys.textures.get(i),s=u.frames[e],o=s.width/d,h=s.height/t,a=0,l=0,c,f=0;f<t;f++){a=0;for(var v=0;v<d;v++)c=n(v,f),u.add(c,0,a+s.cutX,l+s.cutY,o,h),a+=o;l+=h}return{getFrameNameCallback:n,cellWidth:o,cellHeight:h,columns:d,rows:t}},ls=Phaser.Utils.Objects.GetValue,jb=Phaser.GameObjects.Image,qb=Phaser.Utils.Objects.IsPlainObject,_b=Phaser.Math.RotateAround,t5=function(r,i,e,d){qb(i)&&(d=i,i=ls(d,"columns",1),e=ls(d,"rows",1));for(var t=ls(d,"ImageClass",jb),n=ls(d,"originX",.5),u=ls(d,"originY",.5),s=ls(d,"add",!0),o=ls(d,"align",s),h=ls(d,"objectPool",void 0),a=r.scene,l=r.texture.key,c=r.frame.name,f=kb(a,l,c,i,e),v=f.getFrameNameCallback,p=r.scaleX,g=r.scaleY,m=r.rotation,x=r.getTopLeft(),y=x.x,T=x.y,C=[],S=f.cellWidth*p,E=f.cellHeight*g,M=0;M<e;M++)for(var R=0;R<i;R++){var L,O=v(R,M);h&&h.length>0?L=h.pop().setTexture(l,O):L=new t(a,0,0,l,O),s&&a.add.existing(L);var F=y+S*R,D=T+E*M,B=F+n*S,b=D+u*E;o&&(L.setOrigin(n,u).setPosition(B,b).setScale(p,g).setRotation(m),_b(L,y,T,m)),C.push(L)}return C},e5={gridCutImage(r,i,e,d){d===void 0&&(d={}),d.objectPool=this.imagesPool;for(var t=t5(r,i,e,d),n,u=0,s=t.length;u<s;u++)n=t[u],n.setVisible(!0),this.add(n);return this.cellImages=t,this.setChildLocalVisible(r,!1),t},gridCutCurrentImage(r,i,e){return this.gridCutImage(this.currentImage,r,i,e)},gridCutNextImage(r,i,e){return this.gridCutImage(this.nextImage,r,i,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var r=this.cellImages[0].texture,i=this.cellImages,e,d,t=0,n=i.length;t<n;t++)e=i[t],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),d=e.frame.name,e.setTexture(),r.remove(d);return this.imagesPool.push(...i),i.length=0,this}},Hy={};Object.assign(Hy,Wb,$b,Jb,e5);var i5=function(r,i,e,d){},n5=function(r,i,e,d){r.setChildLocalAlpha(i,1-d).setChildLocalAlpha(e,d)},s5=function(r,i,e,d){r.setChildLocalAlpha(i,1)},$y=Phaser.Utils.Objects.IsPlainObject,Ae=Phaser.Utils.Objects.GetValue,r5=Phaser.Math.Clamp,ka=class extends ii{constructor(i,e,d,t,n,u){$y(e)?(u=e,e=Ae(u,"x",0),d=Ae(u,"y",0),t=Ae(u,"key",void 0),n=Ae(u,"frame",void 0)):$y(n)&&(u=n,n=void 0);var s=Ae(u,"back",void 0),o=Ae(u,"front",void 0);s||(s=i.add.image(e,d,t,n)),o||(o=i.add.image(e,d,t,n));var h=Ae(u,"width",o.width),a=Ae(u,"height",o.height);super(i,e,d,h,a);s.setVisible(!1),this.addMultiple([s,o]),this.type="rexTransitionImage",this.backImage=s,this.frontImage=o,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var l=Ae(u,"onStart",void 0),c=Ae(u,"onProgress",void 0),f=Ae(u,"onComplete",void 0),v=Ae(u,"dir",0);l===void 0&&c===void 0&&f===void 0&&(l=i5,c=n5,f=s5,v=0),this.setTransitionStartCallback(l,Ae(u,"onStartScope",void 0)).setTransitionProgressCallback(c,Ae(u,"onProgressScope",void 0)).setTransitionCompleteCallback(f,Ae(u,"onCompleteScope",void 0)).setTransitionDirection(v).setDuration(Ae(u,"duration",1e3)).setEaseFunction(Ae(u,"ease","Linear"));var p=Ae(u,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(i){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(i),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(i){if(i=r5(i,0,1),this._t!==i){this._t=i;var e=this.currentImage,d=this.nextImage;if(i===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),jd(this.onStartCallback,this.onStartCallbackScope,this,e,d,i)),jd(this.onProgressCallback,this.onProgressCallbackScope,this,e,d,i),i===1){jd(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,d,i);var t=d.texture.key,n=d.frame.name;this.frontImage.setTexture(t,n),this.backImage.setTexture(t,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}i===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(i){return this.t=i,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(i,e){return super.setOrigin(i,e),this.backImage.setOrigin(i,e),this.frontImage.setOrigin(i,e),this.maskGameObject&&this.maskGameObject.setOrigin(i,e),this}setTexture(i,e){return this.frontImage.setTexture(i,e),this.backImage.setTexture(i,e).setVisible(!1),this}},jd=function(r,i,e,d,t,n){!r||(i?r.call(i,e,d,t,n):r(e,d,t,n))};Object.assign(ka.prototype,Hy);var a5=Phaser.GameObjects.Rectangle,ja=class extends a5{constructor(i,e,d){super(i,0,0,2,2,e,1);this.setAlpha(d),this.setScrollFactor(0),this.boot()}boot(){var i=this.scene;i.sys.events.on("prerender",this.resize,this)}destroy(i){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(i))}get tint(){return this.fillColor}set tint(i){this.setFillStyle(i,this.fillAlpha)}resize(){var i=this.scene,e=i.sys.scale.gameSize,d=i.sys.cameras.main,t=e.width,n=e.height,u=1/d.zoom,s=t/2,o=n/2,h=t*u,a=n*u;(this.x!==s||this.y!==o)&&this.setPosition(s,o),(this.width!==h||this.height!==a)&&this.setSize(h,a).setOrigin(.5)}},Ky=Phaser.Utils.Objects.GetValue,qa=class extends Me{constructor(i,e){super(i,{eventEmitter:!1});this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.setHitAreaMode(Ky(i,"hitAreaMode",0)),this.setEnable(Ky(i,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(i,e,d,t){t.stopPropagation()}).on("pointerup",function(i,e,d,t){t.stopPropagation()}).on("pointermove",function(i,e,d,t){t.stopPropagation()}).on("pointerover",function(i,e,d,t){t.stopPropagation()}).on("pointerout",function(i,e){e.stopPropagation()})}setHitAreaMode(i){typeof i=="string"&&(i=o5[i]);var e=this.parent;return e.input&&e.removeInteractive(),i===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(i){return i===void 0&&(i=!0),i?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}},o5={default:0,fullWindow:1},Zy=Phaser.Utils.Objects.GetValue,_a=class extends ja{constructor(i,e){var d=Zy(e,"color",0),t=Zy(e,"alpha",.8);super(i,d,t);this.touchEventStop=new qa(this,{hitAreaMode:1})}},l5=function(r){if(!window.Chart){var i=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js');`;return console.error(i),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,h5(this,r)),this},h5=function(r,i){i===void 0&&(i={}),i.options===void 0&&(i.options={});var e=i.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var d=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(d=!0,e.animation={});var t=e.animation;d&&(t.duration=0);var n=t.onProgress;t.onProgress=function(s){n&&n(s),r.needRedraw()};var u=t.onComplete;return t.onComplete=function(s){u&&u(s),r.needRedraw()},i},u5=function(r){if(this.chart!==void 0)if(typeof r=="string"){for(var i=this.chart.data.datasets,e,d=0,t=i.length;d<t;d++)if(e=i[d],e.label===r)return e}else return this.chart.data.datasets[r]},f5=function(r,i){var e=this.getChartDataset(r);if(e!==void 0){if(typeof i=="string"){var d=this.chart.data.labels;if(i=d.indexOf(i),i===-1)return}return e.data[i]}},d5=function(r,i,e){if(this.chart===void 0)return this;var d=this.getChartDataset(r);if(typeof i=="string"){var t=this.chart.data.labels;if(i=t.indexOf(i),i===-1)return this}return d.data[i]=e,this},v5=function(){if(this.chart===void 0)return this;this.chart.update()},to=class extends Ji{constructor(i,e,d,t,n,u){super(i,e,d,t,n);this.type="rexChart",this.chart=void 0,u!==void 0&&this.setChart(u)}destroy(i){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(i))}resize(i,e){if(i===this.width&&e===this.height)return this;if(super.resize(i,e),this.chart){var d=this.chart;d.height=this.canvas.height,d.width=this.canvas.width,d.aspectRatio=d.height?d.width/d.height:null,d.update()}return this}},c5={setChart:l5,getChartDataset:u5,getChartData:f5,setChartData:d5,updateChart:v5};Object.assign(to.prototype,c5);var p5=function(r){if(this.rexSizer.hidden)return 0;r===void 0&&(r=!0);var i=0,e=this.sizerChildren,d,t,n;if(this.orientation===0)for(var u=0,s=e.length;u<s;u++)d=e[u],!d.rexSizer.hidden&&(d.rexSizer.proportion===0||r&&d.rexSizer.proportion>0?n=this.getChildWidth(d):n=0,t=d.rexSizer.padding,n+=t.left+t.right,u>0&&(n+=this.space.item),i+=n);else for(var u=0,s=e.length;u<s;u++)d=e[u],!!d.hasOwnProperty("rexSizer")&&(d.rexSizer.hidden||(t=d.rexSizer.padding,n=this.getChildWidth(d)+t.left+t.right,i=Math.max(n,i)));return i+this.space.left+this.space.right},g5=function(r){if(this.rexSizer.hidden)return 0;r===void 0&&(r=!0);var i=0,e=this.sizerChildren,d,t,n;if(this.orientation===0)for(var u=0,s=e.length;u<s;u++)d=e[u],!d.rexSizer.hidden&&(t=d.rexSizer.padding,n=this.getChildHeight(d)+t.top+t.bottom,i=Math.max(n,i));else for(var u=0,s=e.length;u<s;u++)d=e[u],!!d.hasOwnProperty("rexSizer")&&(d.rexSizer.hidden||(t=d.rexSizer.padding,d.rexSizer.proportion===0||r&&d.rexSizer.proportion>0?n=this.getChildHeight(d):n=0,n+=t.top+t.bottom,u>0&&(n+=this.space.item),i+=n));return i+this.space.top+this.space.bottom},m5=function(r,i){i===void 0&&(i=this.width);var e,d=r.rexSizer,t=d.padding;if(this.orientation===0)d.proportion>0&&this.proportionLength>0&&(e=d.proportion*this.proportionLength);else if(d.expand){var n=i-this.space.left-this.space.right;e=n-t.left-t.right}return e},x5=function(r,i){i===void 0&&(i=this.height);var e,d=r.rexSizer,t=d.padding;if(this.orientation===0){if(d.expand){var n=i-this.space.top-this.space.bottom;e=n-t.top-t.bottom}}else d.proportion>0&&this.proportionLength>0&&(e=d.proportion*this.proportionLength);return e},y5=function(r){r===void 0&&(r=[]);for(var i=this.sizerChildren,e,d=0,t=i.length;d<t;d++)e=i[d],e.isRexSizer&&r.push(e);return r},T5=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,wa.call(this),this},C5=function(){for(var r=this.sizerChildren,i,e,d,t=this.innerLeft,n=this.innerTop,u=this.innerWidth,s=this.innerHeight,o=t,h=n,a,l,c,f,v,p,g=0,m=r.length;g<m;g++)i=this.rtl?r[m-g-1]:r[g],!i.rexSizer.hidden&&(e=i.rexSizer,d=e.padding,za.call(this,i),i.isRexSpace?(v=0,p=0):(v=this.getExpandedChildWidth(i),p=this.getExpandedChildHeight(i)),i.isRexSizer?(i.runLayout(this,v,p),Qd(i,this)):rs(i,v,p),v===void 0&&(v=_t(i)),p===void 0&&(p=Jt(i)),this.orientation===0?(a=o+d.left,e.proportion===0||this.proportionLength===0?c=v:c=e.proportion*this.proportionLength,l=h+d.top,f=s-d.top-d.bottom):(a=o+d.left,c=u-d.left-d.right,l=h+d.top,e.proportion===0||this.proportionLength===0?f=p:f=e.proportion*this.proportionLength),Ya.call(this,i,a,l,c,f,e.align),this.orientation===0?o+=c+d.left+d.right+this.space.item:h+=f+d.top+d.bottom+this.space.item)},S5=function(r){var r=wd.call(this,r);if(this.proportionLength===void 0&&this.orientation===0){var i=r-this.childrenWidth;i>0?(i=r-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return r},E5=function(r,i){var i=Dd.call(this,r,i);if(this.proportionLength===void 0&&this.orientation===1){var e=i-this.childrenHeight;e>0?(e=i-this.getChildrenHeight(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return i},P5=Phaser.GameObjects.Zone,eo=class extends P5{constructor(i){super(i,0,0,1,1);this.isRexSpace=!0}},M5=function(r,i){var e=this.sizerChildren;if(e.length===0)return-1;for(var d=-1,t=Infinity,n=0,u=e.length;n<u;n++){var s=e[n],o;this.orientation===0?o=Math.abs(s.left-r):o=Math.abs(s.top-i),t>o&&(t=o,d=n)}var s=e[e.length-1],o;return this.orientation===0?o=Math.abs(s.right-r):o=Math.abs(s.bottom-i),t>o&&(t=o,d=n+1),d},Jy=Phaser.Utils.Objects.IsPlainObject,us=Phaser.Utils.Objects.GetValue,Qy=Phaser.Display.Align.CENTER,A5={min:0,full:-1},qd=function(r,i,e,d,t,n,u,s){Ia.call(this,r);var o=typeof i;if(i===null)return this;if(o!=="number"){if(o==="string")i=A5[i];else if(Jy(i)){var h=i;i=us(h,"proportion",0),e=us(h,"align",Qy),d=us(h,"padding",0),t=us(h,"expand",!1),n=us(h,"key",void 0),u=us(h,"index",void 0),r.isRexSizer||(this.orientation===0?s=us(h,"minWidth",void 0):s=us(h,"minHeight",void 0))}}typeof e=="string"&&(e=rl[e]),i===void 0&&(i=0),e===void 0&&(e=Qy),d===void 0&&(d=0),t===void 0&&(t=!1),!r.isRexSizer&&s===void 0&&(this.orientation===0?s=r._minWidth:s=r._minHeight);var h=this.getSizerConfig(r);return h.proportion=i,h.align=e,h.padding=Cr(d),h.expand=t,u===void 0||u>=this.sizerChildren.length?this.sizerChildren.push(r):this.sizerChildren.splice(u,0,r),!r.isRexSizer&&i>0&&(this.orientation===0?r.minWidth=s===void 0?_t(r):s:r.minHeight=s===void 0?Jt(r):s),n!==void 0&&this.addChildrenMap(n,r),this},R5={add:qd,addSpace(r){return this.insertSpace(void 0,r),this},insertSpace(r,i){return i===void 0&&(i=1),qd.call(this,new eo(this.scene),{proportion:i,minWidth:0,minHeight:0,index:r}),this},insert(r,i,e,d,t,n,u,s){return Jy(e)&&(e.index=r),qd.call(this,i,e,d,t,n,u,r,s),this},insertAtPosition(r,i,e,d,t,n,u,s,o){var h=M5.call(this,r,i);return h===-1&&(h=void 0),this.insert(h,e,d,t,n,u,s,o),this}},O5=Phaser.Utils.Array.Remove,L5={remove(r,i){return this.getParentSizer(r)!==this?this:(O5(this.sizerChildren,r),Al.call(this,r,i),this)},removeAll(r){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],r);return this},clear(r){return this.sizerChildren.length=0,Rl.call(this,r),this}},ky={getChildrenWidth:p5,getChildrenHeight:g5,getExpandedChildWidth:m5,getExpandedChildHeight:x5,getChildrenSizers:y5,preLayout:T5,layoutChildren:C5,resolveWidth:S5,resolveHeight:E5};Object.assign(ky,R5,L5);var F5=function(){for(var r=0,i=this.sizerChildren,e,d,t=0,n=i.length;t<n;t++)e=i[t],!e.rexSizer.hidden&&(d=e.rexSizer.proportion,d>0&&(r+=d));return r},I5={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},_d=function(r){return typeof r=="string"&&(r=I5[r]),r},tv=Phaser.Utils.Objects.IsPlainObject,_i=Phaser.Utils.Objects.GetValue,ne=class extends hs{constructor(i,e,d,t,n,u,s){tv(e)?(s=e,e=_i(s,"x",0),d=_i(s,"y",0),t=_i(s,"width",void 0),n=_i(s,"height",void 0),u=_i(s,"orientation",0)):tv(t)?(s=t,t=_i(s,"width",void 0),n=_i(s,"height",void 0),u=_i(s,"orientation",0)):tv(u)&&(s=u,u=_i(s,"orientation",0)),u===void 0&&(u=0),super(i,e,d,t,n,s),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(u),this.setItemSpacing(_i(s,"space.item",0)),this.setRTL(_i(s,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=_d(i),this}setItemSpacing(i){return this.space.item=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=F5.call(this)),this._childrenProportion}};Object.assign(ne.prototype,ky);var jy=function(){return Array.prototype.reduce.call(arguments,w5,0)},w5=function(r,i){return r+i},D5=function(){if(this.rexSizer.hidden)return 0;for(var r=0,i,e=this.sizerChildren,d,t,n,u,s=0;s<this.columnCount;s++){if(u=this.columnProportions[s],i=0,u===0){for(var o=0;o<this.rowCount;o++)d=e[o*this.columnCount+s],!!d&&(d.rexSizer.hidden||(t=d.rexSizer.padding,n=this.getChildWidth(d)+t.left+t.right,i=Math.max(i,n)));r+=i}this.columnWidth[s]=i}return r+jy(this.space.left,...this.space.column,this.space.right)},B5=function(){if(this.rexSizer.hidden)return 0;for(var r=0,i,e=this.sizerChildren,d,t,n,u,s=0;s<this.rowCount;s++){if(u=this.rowProportions[s],i=0,u===0){for(var o=0;o<this.columnCount;o++)d=e[s*this.columnCount+o],!!d&&(d.rexSizer.hidden||(n=d.isRexSizer?Math.max(d.minHeight,d.childrenHeight):d.hasOwnProperty("minHeight")?d.minHeight:Jt(d),t=d.rexSizer.padding,n+=t.top+t.bottom,i=Math.max(i,n)));r+=i}this.rowHeight[s]=i}return r+jy(this.space.top,...this.space.row,this.space.bottom)},G5=function(r,i){var e,d=r.rexSizer;if(d.expand){var t=d.padding;e=i-t.left-t.right}return e},N5=function(r,i){var e,d=r.rexSizer;if(d.expand){var t=d.padding;e=i-t.top-t.bottom}return e},b5=function(r){r===void 0&&(r=[]);for(var i=this.sizerChildren,e,d=0,t=i.length;d<t;d++)e=i[d],e&&e.isRexSizer&&r.push(e);return r},z5=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,wa.call(this),this},Y5=function(){for(var r,i,e,d=this.innerLeft,t=this.innerTop,n=d,u=t,s,o,h,a,l,c,f=this.space.column,v=this.space.row,p,g,m=0;m<this.rowCount;m++){g=this.getRowHeight(m),n=d;for(var x=0;x<this.columnCount;x++){if(p=this.getColumnWidth(x),r=this.getChildAt(x,m),!r||r.rexSizer.hidden){n+=p+f[x];continue}za.call(this,r),l=this.getExpandedChildWidth(r,p),c=this.getExpandedChildHeight(r,g),r.isRexSizer?(r.runLayout(this,l,c),Qd(r,this)):rs(r,l,c),i=r.rexSizer,e=i.padding,s=n+e.left,h=p-e.left-e.right,o=u+e.top,a=g-e.top-e.bottom,Ya.call(this,r,s,o,h,a,i.align),n+=p+f[x]}u+=g+v[m]}},U5=function(r){var r=wd.call(this,r);if(this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var e=r-this.childrenWidth;e>=0&&(this.proportionWidthLength=e/i)}else this.proportionWidthLength=0}return r},V5=function(r,i){var i=Dd.call(this,r,i);if(this.proportionHeightLength===void 0){var e=this.totalRowProportions;if(e>0){var d=i-this.childrenHeight;d>=0&&(this.proportionHeightLength=d/e)}else this.proportionHeightLength=0}return i},W5=function(r){var i,e,d;for(var t in this.sizerChildren)i=this.sizerChildren[t],i&&i.isRexSizer&&!i.ignoreLayout&&(d=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,d),e=i.resolveWidth(e),i.resolveChildrenWidth(e))},X5=function(r){var i,e,d;for(var t in this.sizerChildren)i=this.sizerChildren[t],!(!i||i.isRexSizer&&i.ignoreLayout||!i.runWidthWrap)&&(d=this.getColumnWidth(parseInt(t)%this.columnCount),e=this.getExpandedChildWidth(i,d),i.isRexSizer&&(e=i.resolveWidth(e)),i.runWidthWrap(e));return this},H5=Phaser.Utils.Objects.IsPlainObject,Fr=Phaser.Utils.Objects.GetValue,qy=Phaser.Display.Align.CENTER,_y=function(r,i,e,d,t){if(typeof r=="number"||typeof i=="number")if(r===void 0){for(var n,u=0;u<d;u++)if(n=i*d+u,!e[n])return n}else if(i===void 0){for(var n,u=0;u<t;u++)if(n=u*d+r,!e[n])return n}else{var n=i*d+r;if(!e[n])return n}else if(i===!0){for(var n,u=0;u<d;u++)for(var s=0;s<t;s++)if(n=s*d+u,!e[n])return n}else for(var u=0,o=e.length;u<o;u++)if(!e[u])return u;return null},$5=function(r,i,e,d,t,n,u){if(Ia.call(this,r),H5(i)){var o=i;i=Fr(o,"column",void 0),e=Fr(o,"row",void 0),d=Fr(o,"align",qy),t=Fr(o,"padding",0),n=Fr(o,"expand",!1),u=Fr(o,"key",void 0)}var s=_y(i,e,this.sizerChildren,this.columnCount,this.rowCount);if(s===null){if(typeof i=="number"&&typeof e=="number")return this;e===!0||typeof e=="number"?this.addEmptyColumn():this.addEmptyRow(),s=_y(i,e,this.sizerChildren,this.columnCount,this.rowCount)}typeof d=="string"&&(d=rl[d]),d===void 0&&(d=qy),t===void 0&&(t=0),n===void 0&&(n=!0);var o=this.getSizerConfig(r);return o.align=d,o.padding=Cr(t),o.expand=n,this.sizerChildren[s]=r,u!==void 0&&this.addChildrenMap(u,r),this},K5={add:$5},Ir=function(r,i,e,d){e===void 0&&(e=0),d===void 0&&(d=r.length-1);for(var t=e;t<=d;t++)r[t]=i;return r},Z5={remove(r,i){if(this.getParentSizer(r)!==this)return this;var e=this.sizerChildren.indexOf(r);return e!==-1&&(this.sizerChildren[e]=null),Al.call(this,r,i),this},removeAt(r,i,e){var d=this.getChildAt(r,i);return d&&this.remove(d,e),this},removeAll(r){for(var i=this.sizerChildren.length-1;i>=0;i--){var e=this.sizerChildren[i];!e||this.remove(e,r)}return this},clear(r){return Ir(this.sizerChildren,null),Rl.call(this,r),this}},tT=Phaser.Utils.Objects.GetValue,J5=function(r,i,e,d,t){if(e===void 0&&(e=0),d===void 0&&(d=0),this.columnCount=r,this.rowCount=i,this.gridCount=r*i,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=r*i,Ir(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=r,typeof e=="number")Ir(this.columnProportions,e);else for(var n=0;n<r;n++)this.columnProportions[n]=e[n]||0;if(this.rowProportions=[],this.rowProportions.length=i,typeof d=="number")Ir(this.rowProportions,d);else for(var n=0;n<i;n++)this.rowProportions[n]=d[n]||0;this.columnWidth=[],this.columnWidth.length=r,this.rowHeight=[],this.rowHeight.length=i,this.space.column=[],this.space.column.length=r-1;var u=tT(t,"column",0);if(typeof u=="number")Ir(this.space.column,u);else for(var n=0,s=this.space.column.length;n<s;n++)this.space.column[n]=u[n]||0;this.space.row=[],this.space.row.length=i-1;var o=tT(t,"row",0);if(typeof o=="number")Ir(this.space.row,o);else for(var n=0,s=this.space.row.length;n<s;n++)this.space.row[n]=o[n]||0;return this},eT=function(r,i,e){i===void 0&&(i=this.rowProportions[0]||0),e===void 0&&(e=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var d=[r*this.columnCount,0],t=0;t<this.columnCount;t++)d.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,d),this.rowProportions.push(i),this.rowHeight.length+=1,this.space.row.splice(r,0,e),this},Q5=function(r,i){return eT.call(this,this.rowCount,r,i),this},iT=function(r,i,e){i===void 0&&(i=this.columnProportions[0]||0),e===void 0&&(e=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var d=this.rowCount-1;d>=0;d--){var t=d*this.columnCount+r;this.sizerChildren.splice(t,0,null)}return this.columnProportions.push(i),this.columnWidth.length+=1,this.space.column.splice(r,0,e),this},k5=function(r,i){return iT.call(this,this.columnCount,r,i),this},nT={getChildrenWidth:D5,getChildrenHeight:B5,getExpandedChildWidth:G5,getExpandedChildHeight:N5,getChildrenSizers:b5,preLayout:z5,layoutChildren:Y5,resolveWidth:U5,resolveHeight:V5,resolveChildrenWidth:W5,runWidthWrap:X5,resetGrid:J5,inseryEmptyRow:eT,addEmptyRow:Q5,insertEmptyColumn:iT,addEmptyColumn:k5};Object.assign(nT,K5,Z5);var j5=function(){for(var r=0,i,e=0;e<this.columnCount;e++)i=this.columnProportions[e],i>0&&(r+=i);return r},q5=function(){for(var r=0,i,e=0;e<this.rowCount;e++)i=this.rowProportions[e],i>0&&(r+=i);return r},Il=Phaser.Utils.Objects.IsPlainObject,de=Phaser.Utils.Objects.GetValue,tn=class extends hs{constructor(i,e,d,t,n,u,s,o,h,a){Il(e)?(a=e,e=de(a,"x",0),d=de(a,"y",0),t=de(a,"width",void 0),n=de(a,"height",void 0),u=de(a,"column",0),s=de(a,"row",0),o=de(a,"columnProportions",0),h=de(a,"rowProportions",0)):Il(t)?(a=t,t=de(a,"width",void 0),n=de(a,"height",void 0),u=de(a,"column",0),s=de(a,"row",0),o=de(a,"columnProportions",0),h=de(a,"rowProportions",0)):Il(u)?(a=u,u=de(a,"column",0),s=de(a,"row",0),o=de(a,"columnProportions",0),h=de(a,"rowProportions",0)):Il(o)&&(a=o,o=de(a,"columnProportions",0),h=de(a,"rowProportions",0)),super(i,e,d,t,n,a),this.type="rexGridSizer",this.resetGrid(u,s,o,h,de(a,"space",void 0)),this.addChildrenMap("items",this.sizerChildren);var l=de(a,"createCellContainerCallback");if(l)for(var d=0,c=this.rowCount;d<c;d++)for(var e=0,f=this.columnCount;e<f;e++){var v={column:e,row:d},p=l(i,e,d,v);p&&this.add(p,v)}}destroy(i){!this.scene||(super.destroy(i),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setColumnProportion(i,e){return i>=this.columnProportions.length?this:(this.columnProportions[i]=e,this)}setRowProportion(i,e){return i>=this.rowProportions.length?this:(this.rowProportions[i]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=j5.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=q5.call(this)),this._totalRowProportions}getChildAt(i,e){return this.sizerChildren[e*this.columnCount+i]}childToGridIndex(i,e){if(!i)return null;var d=this.sizerChildren.indexOf(i);return d===-1?null:(e===void 0&&(e={}),e.x=d%this.columnCount,e.y=Math.floor(d/this.columnCount),e)}getColumnWidth(i){var e=this.columnProportions[i],d=e===0?this.columnWidth[i]:e*this.proportionWidthLength;return d}getRowHeight(i){var e=this.rowProportions[i],d=e===0?this.rowHeight[i]:e*this.proportionHeightLength;return d}};Object.assign(tn.prototype,nT);var _5=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},tz=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},ez=function(r){r===void 0&&(r=[]);for(var i=this.sizerChildren,e,d=0,t=i.length;d<t;d++)e=i[d],e!==`
`&&e.isRexSizer&&r.push(e);return r},iz=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,wa.call(this),this},nz=function(){for(var r=this.innerWidth,i=this.justifyPercentage,e,d,t,n=0,u=this.innerLeft,s=this.innerTop,o=u,h=s,a,l,c,f,v=this.widthWrapResult.lines,p,g,m,x=0,y=v.length;x<y;x++){switch(p=v[x],g=p.children,this.rtl&&g.reverse(),m=r-p.width,this.align){case 0:break;case 1:o+=m;break;case 2:o+=m/2;break;case 3:n=ev(r,m,i,g.length);break;case 4:n=ev(r,m,i,g.length),n===0&&(o+=m);break;case 5:n=ev(r,m,i,g.length),n===0&&(o+=m/2);break}for(var T=0,C=g.length;T<C;T++)e=g[T],!e.rexSizer.hidden&&(d=e.rexSizer,t=d.padding,za.call(this,e),a=o+t.left,T>0&&(a+=this.space.item),l=h+t.top,c=_t(e),f=Jt(e),o=a+c+t.right+n,Ya.call(this,e,a,l,c,f,d.align));o=u,h+=p.height+this.space.line}},ev=function(r,i,e,d){return i/r<=e?i/(d-1):0},az=function(r,i){i===void 0?i={lines:[],width:0,height:0}:(i.lines.length=0,i.width=0,i.height=0);for(var e=this.sizerChildren,d,t,n,u=0,s=i.lines,o=void 0,h,a=0,l=e.length;a<l;a++){if(d=e[a],d===`
`)d=void 0,t=0,h=!0;else{if(d.rexSizer.hidden)continue;d.isRexSizer&&d.layout(),t=sz(d),h=u<t||o===void 0}h&&(o&&(o.width=r-(u+this.space.item),i.width=Math.max(i.width,o.width),i.height+=o.height+this.space.line),o={children:[],height:0},s.push(o),u=r),u-=t+this.space.item,d&&(o.children.push(d),n=rz(d),o.height=Math.max(o.height,n))}return o&&(o.width=r-(u+this.space.item),i.width=Math.max(i.width,o.width),i.height+=o.height),i},sz=function(r){var i=r.rexSizer.padding;return _t(r)+i.left+i.right},rz=function(r){var i=r.rexSizer.padding;return Jt(r)+i.top+i.bottom},oz=function(r){var i=r-this.space.left-this.space.right;this.widthWrapResult=az.call(this,i,this.widthWrapResult),jx.call(this,r)},sT=Phaser.Math.Distance.Between,hz=function(r,i){var e=this.sizerChildren;if(e.length===0)return-1;for(var d=-1,t=Infinity,n=0,u=e.length;n<u;n++){var s=e[n];if(!(Math.abs(s.centerY-i)>s.height/2)){var o=sT(s.left,s.centerY,r,i);t>o&&(t=o,d=n);var h=e[n+1];if(!(h&&h.y===s.y)){var o=sT(s.right,s.centerY,r,i);t>o&&(t=o,d=n+1)}}}return d},lz=Phaser.Utils.Objects.IsPlainObject,iv=Phaser.Utils.Objects.GetValue,uz=Phaser.Display.Align.CENTER,nv=function(r,i,e,d){if(r===`
`)return this.addNewLine(),this;if(Ia.call(this,r),lz(i)){var t=i;i=iv(t,"padding",0),e=iv(t,"key",void 0),d=iv(t,"index",void 0)}i===void 0&&(i=0);var t=this.getSizerConfig(r);return t.align=uz,t.padding=Cr(i),d===void 0||d>=this.sizerChildren.length?this.sizerChildren.push(r):this.sizerChildren.splice(d,0,r),e!==void 0&&this.addChildrenMap(e,r),this},fz={add(r,i,e){if(ki(r))for(var d=r,t=0,n=d.length;t<n;t++)nv.call(this,d[t],i);else nv.call(this,r,i,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(r,i,e,d){return nv.call(this,i,e,d,r),this},insertAtPosition(r,i,e,d,t){var n=hz.call(this,r,i);return n===-1&&(n=void 0),this.insert(n,e,d,t),this}},dz=Phaser.Utils.Array.Remove,vz={remove(r,i){return this.getParentSizer(r)!==this?this:(dz(this.sizerChildren,r),Al.call(this,r,i),this)},removeAll(r){for(var i=this.sizerChildren.length-1;i>=0;i--)this.remove(this.sizerChildren[i],r);return this},clear(r){return this.sizerChildren.length=0,Rl.call(this,r),this}},rT={getChildrenWidth:_5,getChildrenHeight:tz,getChildrenSizers:ez,preLayout:iz,layoutChildren:nz,runWidthWrap:oz};Object.assign(rT,fz,vz);var cz=function(r){r===void 0&&(r=this.sizerChildren);for(var i=0,e,d,t=0,n=r.length;t<n;t++)e=r[t],e!==`
`&&(d=this.getChildWidth(e),i=Math.max(d,i));return i},pz=function(r){r===void 0&&(r=this.sizerChildren);for(var i=0,e,d,t=0,n=r.length;t<n;t++)e=r[t],e!==`
`&&(d=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Jt(e),i=Math.max(d,i));return i},aT=Phaser.Utils.Objects.IsPlainObject,bi=Phaser.Utils.Objects.GetValue,mn=class extends hs{constructor(i,e,d,t,n,u){aT(e)?(u=e,e=bi(u,"x",0),d=bi(u,"y",0),t=bi(u,"width",void 0),n=bi(u,"height",void 0)):aT(t)&&(u=t,t=bi(u,"width",void 0),n=bi(u,"height",void 0)),super(i,e,d,t,n,u),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(bi(u,"orientation",0)),this.setItemSpacing(bi(u,"space.item",0)),this.setLineSpacing(bi(u,"space.line",0)),this.setAlign(bi(u,"align",0)),this.setJustifyPercentage(bi(u,"justifyPercentage",.25)),this.setRTL(bi(u,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(i){return this.orientation=_d(i),this}setItemSpacing(i){return this.space.item=i,this}setLineSpacing(i){return this.space.line=i,this}setAlign(i){return typeof i=="string"&&(i=gz[i]),this.align=i,this}setJustifyPercentage(i){return this.justifyPercentage=i,this}setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=cz.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=pz.call(this)),this._maxChildHeight}},gz={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(mn.prototype,rT);var io=function(r,i,e,d){var t=new Fl(i,e,d);if(r&&!r.isRexSizer){var n=t.createGeometryMask();r.setMask(n),this.once("destroy",function(){r.setMask(),n.destroy()})}return this.pin(t),t},en=Phaser.Utils.Objects.GetValue,nn=class extends ne{constructor(i,e){super(i,e);this.type="rexLabel";var d=en(e,"background",void 0),t=en(e,"icon",void 0),n=en(e,"iconMask",void 0),u=en(e,"text",void 0),s=en(e,"action",void 0),o=en(e,"actionMask",void 0),h=en(e,"align",void 0),a=en(e,"space.icon",0),l=en(e,"space.text",0);if(d&&this.addBackground(d),(h==="right"||h==="bottom"||h==="center")&&this.addSpace(),t){var c;this.orientation===0?(u||s)&&(c={right:a}):(u||s)&&(c={bottom:a}),this.add(t,0,"center",c),n&&(n=io.call(this,t,t,1))}if(u){var f=en(e,"expandTextWidth",!1),v=en(e,"expandTextHeight",!1),p,c,g;this.orientation===0?(p=f?1:0,s&&(c={right:l}),g=v):(p=v?1:0,s&&(c={bottom:l}),g=f),this.add(u,p,"center",c,g)}s&&(this.add(s),o&&(o=io.call(this,s,s,1))),h==="center"&&this.addSpace(),this.addChildrenMap("background",d),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",u),this.addChildrenMap("action",s),this.addChildrenMap("actionMask",o)}get text(){var i=this.childrenMap.text;return i===void 0?"":i.text}set text(i){var e=this.childrenMap.text;e!==void 0&&e.setText(i)}setText(i){return this.text=i,this}appendText(i){return this.text+=i,this}setTexture(i,e){var d=this.childrenMap.icon;if(d!==void 0)return d.setTexture(i,e),this}get texture(){var i=this.childrenMap.icon;if(i!==void 0)return i.texture}get frame(){var i=this.childrenMap.icon;if(i!==void 0)return i.frame}runLayout(i,e,d){if(this.ignoreLayout)return this;super.runLayout(i,e,d);var t=this.childrenMap.iconMask;t&&(t.setPosition(),this.resetChildPositionState(t));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(i,e){super.resize(i,e);var d=this.childrenMap.iconMask;d&&d.resize();var t=this.childrenMap.actionMask;return t&&t.resize(),this}},wl=ne.prototype.add,oT=ne.prototype.addSpace,sv=function(r){var i=!r.isRexSpace,e=!i||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(i){var d=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");d&&oT.call(this),wl.call(this,r,{proportion:e,expand:!0});var t=!this.buttonsExpand&&this.buttonsAlign==="center";t&&oT.call(this),this.hasTailSpace=t}else wl.call(this,r,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;wl.call(this,r,{index:n,proportion:e,expand:!0})}else wl.call(this,r,{proportion:e,expand:!0});return i&&this.buttonGroup.add(r),this},mz={addButton(r){if(ki(r))for(var i=r,e=0,d=i.length;e<d;e++)sv.call(this,i[e]);else sv.call(this,r);return this},addButtons(r){for(var i=0,e=r.length;i<e;i++)sv.call(this,r[i]);return this}},xz=ne.prototype.remove,yz=ne.prototype.clear,rv=function(r,i){return this.getParentSizer(r)!==this?this:(this.buttonGroup.remove(r),xz.call(this,r,i),this)},Tz={remove(r,i){if(ki(r))for(var e=r,d=0,t=e.length;d<t;d++)rv.call(this,e[d],i);else rv.call(this,r,i);return this},clear(r){var i=this.buttonGroup.buttons;return i.length=0,yz.call(this,r),this},removeButton(r,i){var r=this.getButton(r);return r?(this.remove(r,i),this):this},clearButtons(r){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)rv.call(this,i[e],r);return this}},Cz={add(r){if(this.buttons.push(r),this.buttonsType){var i=r.name;this.buttonMap[i]=r,this.dataManager.set(i,void 0).set(i,!1)}return r._buttonBehavior=new as(r,this.clickConfig),r._buttonBehavior.on("click",function(e,d,t,n){this.fireEvent("button.click",d,t,n)},this).on("enable",function(e,d){this.fireEvent("button.enable",d)},this).on("disable",function(e,d){this.fireEvent("button.disable",d)},this),r.on("pointerover",function(e,d,t,n){this.fireEvent("button.over",r,e,n)},this).on("pointerout",function(e,d){this.fireEvent("button.out",r,e,d)},this),this},addMultiple(r){for(var i=0,e=r.length;i<e;i++)this.add(gameObject[i]);return this}},Sz=Phaser.Utils.Array.Remove,Ez={remove(r){if(Sz(this.buttons,r),this.buttonsType){var i=r.name;delete this.buttonMap[i],this.dataManager.remove(i)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var r in this.buttonMap)delete this.buttonMap[r],this.dataManager.remove(r);return this}},Pz=function(r,i,...e){var d;if(typeof i=="number"){if(d=i,i=this.buttons[d],!i)return}else if(d=this.buttons.indexOf(i),d===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(r,i,d,...e),this.groupName!==void 0?this.eventEmitter.emit(r,i,this.groupName,d,...e):this.eventEmitter.emit(r,i,d,...e)},wr=Phaser.Utils.Objects.GetValue,hT=function(r){var i=wr(r,"dataManager",void 0);if(i===void 0){var e=this.parent;e.setDataEnabled(),i=e.data}this.dataManager=i;var d,t;d=wr(r,"setValueCallback",void 0),t=wr(r,"setValueCallbackScope",void 0),d===void 0&&(d=wr(r,"setButtonStateCallback",void 0),t=wr(r,"setButtonStateCallbackScope",void 0)),this.setValueCallback=d,this.setValueCallbackScope=t,i.events.on("changedata",function(n,u,s,o){var h=this.buttonMap[u];if(!!h){var a=this.setValueCallback,l=this.setValueCallbackScope;a&&(l?a.call(l,h,s,o):a(h,s,o)),this.fireEvent("button.statechange",h,s,o)}},this)},Mz={setButtonsType(r){r===void 0&&(r={});var i=wr(r,"buttonsType",r.type);switch(this.buttonsType=i,i){case"radio":this.setRadioType(r);break;case"checkboxes":this.setCheckboxesType(r);break}return this},setRadioType(r){hT.call(this,r);var i=void 0,e=this.parent,d=this.buttons,t=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return i},set:function(n){n!==i&&(i=n,d.forEach(function(u){var s=u.name,o=t.get(s);s===n?o||t.set(s,!0):o&&t.set(s,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(n){e.value=n.name}),this},setCheckboxesType(r){hT.call(this,r);var i=this.parent,e=this.dataManager;return i.on("button.click",function(d){e.toggle(d.name)}),this},clearAllButtonsState(){for(var r in this.buttonMap)this.dataManager.set(r,!1);return this},getAllButtonsState(){var r={};for(var i in this.buttonMap)r[i]=this.dataManager.get(i);return r},setSelectedButtonName(r){return this.parent.value=r,this},getSelectedButtonName(){return this.parent.value},setButtonState(r,i){return i===void 0&&(i=!0),this.dataManager.set(r,i),this},getButtonState(r){return this.dataManager.get(r)}},Az=function(r,i){if(r)if(ki(r)){for(var e,d=0,t=r.length;d<t;d++)if(e=lT(r[d],i),e)return e}else{var e;for(var n in r)if(e=lT(r[n],i),e)return e}else return null},lT=function(r,i){return r?r.hasOwnProperty("name")?r.name===i?r:null:GetElementByName(r,i):null},Dl={getButton(r){var i=this.buttons,e,d=typeof r;switch(d){case"number":e=i[r];break;case"string":e=Az(i,r);break;default:e=r,i.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(r,i){var e=this.buttons;if(r===void 0||typeof r=="boolean"){i=r;for(var d=0,t=e.length;d<t;d++)e[d]._buttonBehavior.setEnable(i)}else this.getButton(r)._buttonBehavior.setEnable(i);return this},toggleButtonEnable(r){var i=this.buttons;if(r===void 0||typeof r=="boolean")for(var e=0,d=i.length;e<d;e++)i[e]._buttonBehavior.toggleEnable();else this.getButton(r)._buttonBehavior.toggleEnable();return this},getButtonEnable(r){return r===void 0&&(r=0),this.getButton(r)._buttonBehavior.enable},emitButtonClick(r){var i=this.buttonGroup?this.buttonGroup:this;return i.fireEvent("button.click",r),this},showButton(r){return bn(this.getButton(r)),this},hideButton(r){return zn(this.getButton(r)),this},isButtonShown(r){return dl(this.getButton(r)),this},forEachButtton(r,i){for(var e=this.buttons,d=0,t=e.length;d<t;d++)i?r.call(i,e[d],d,e):r(e[d],d,e);return this}},no=class{constructor(i){this.parent=i.parent,this.eventEmitter=i.eventEmitter,this.groupName=i.groupName,this.clickConfig=i.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}},Rz={fireEvent:Pz};Object.assign(no.prototype,Cz,Ez,Mz,Dl,Rz);var av={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(r){return this.buttonGroup.setSelectedButtonName(r),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(r,i){return this.buttonGroup.setButtonState(r,i),this},getButtonState(r){return this.buttonGroup.getButtonState(r)}},Us=Phaser.Utils.Objects.GetValue,ye=class extends ne{constructor(i,e){e===void 0&&(e={});var d=e.space;typeof d=="number"&&(e.space={item:d}),super(i,e),this.type="rexButtons",this.buttonGroup=new no({parent:this,eventEmitter:Us(e,"eventEmitter",this),groupName:Us(e,"groupName",void 0),clickConfig:Us(e,"click",void 0)}).setButtonsType(e);var t=Us(e,"background",void 0),n=Us(e,"buttons",void 0);this.buttonsExpand=Us(e,"expand",!1),this.buttonsAlign=Us(e,"align",void 0),t&&this.addBackground(t),n&&this.addButtons(n),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(ye.prototype,mz,Tz,Dl,av);var Oz=tn.prototype.add,Lz={addButton(r,i,e){return Oz.call(this,r,i,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(r),this},addButtons(r,i){for(var e=0,d=r;e<d;e++)this.addButton(r[e],void 0,i);return this}},Fz=tn.prototype.remove,Iz=tn.prototype.clear,ov=function(r,i){var r=this.getButton(r);return r?(this.buttonGroup.remove(r),Fz.call(this,r,i),this):this},wz={remove(r,i){if(ki(r))for(var e=r,d=0,t=e.length;d<t;d++)ov.call(this,e[d],i);else ov.call(this,r,i);return this},clear(r){var i=this.buttonGroup.buttons;return i.length=0,Iz.call(this,r),this},removeButton(r,i){return this.remove(r,i),this},clearButtons(r){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)ov.call(this,i[e],r);return this}},xn=Phaser.Utils.Objects.GetValue,Vs=class extends tn{constructor(i,e){e===void 0&&(e={});var d=xn(e,"row",0),t=xn(e,"col",0),n=xn(e,"createCellContainerCallback"),u=xn(e,"buttons",void 0),s=xn(e,"expand",!0),o=s?1:0;if(n&&(e.createCellContainerCallback=void 0),u!==void 0){d=Math.max(d,u.length);for(var h=0,a=u.length;h<a;h++)t=Math.max(t,u[h].length)}e.row=d,e.column=t,e.columnProportions=o,e.rowProportions=o,super(i,e),this.type="rexGridButtons",this.buttonGroup=new no({parent:this,eventEmitter:xn(e,"eventEmitter",this),groupName:xn(e,"groupName",void 0),clickConfig:xn(e,"click",void 0)}).setButtonsType(e);var l=xn(e,"background",void 0);this.buttonsExpand=s;var c=xn(e,"space",void 0);if(typeof c=="number"&&(c={itemX:c,itemY:c}),l&&this.addBackground(l),u)for(var f,v,p=0,g=u.length;p<g;p++){f=u[p];for(var m=0,x=f.length;m<x;m++)v=f[m],v&&this.addButton(v,m,p)}else if(n)for(var y=0;y<d;y++)for(var T=0;T<t;T++){var v=n(i,T,y);v&&this.addButton(v,T,y)}this.addChildrenMap("background",l),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Vs.prototype,Lz,wz,Dl,av);var uT=mn.prototype.add,Bl=function(r){return uT.call(this,r),this.buttonGroup.add(r),this},Dz={addButton(r){if(ki(r))for(var i=r,e=0,d=i.length;e<d;e++)Bl.call(this,i[e]);else Bl.call(this,r);return this},addButtons(r){if(ki(r[0]))for(var i=r,e,d=0,t=i.length-1;d<=t;d++){e=i[d];for(var n=0,u=e.length;n<u;n++)Bl.call(this,e[n]);d>t&&uT.addNewLine(this)}else for(var n=0,u=r.length;n<u;n++)Bl.call(this,r[n]);return this}},Bz=mn.prototype.remove,Gz=mn.prototype.clear,hv=function(r,i){var r=this.getButton(r);return r?(this.buttonGroup.remove(r),Bz.call(this,r,i),this):this},Nz={remove(r,i){if(ki(r))for(var e=r,d=0,t=e.length;d<t;d++)hv.call(this,e[d],i);else hv.call(this,r,i);return this},clear(r){var i=this.buttonGroup.buttons;return i.length=0,Gz.call(this,r),this},removeButton(r,i){return this.remove(r,i),this},clearButtons(r){for(var i=this.buttonGroup.buttons,e=i.length-1;e>=0;e--)hv.call(this,i[e],r);return this}},Dr=Phaser.Utils.Objects.GetValue,yn=class extends mn{constructor(i,e){e===void 0&&(e={});var d=e.space;typeof d=="number"&&(e.space={item:d,line:d}),super(i,e),this.type="rexFixWidthButtons",this.buttonGroup=new no({parent:this,eventEmitter:Dr(e,"eventEmitter",this),groupName:Dr(e,"groupName",void 0),clickConfig:Dr(e,"click",void 0)}).setButtonsType(e);var t=Dr(e,"background",void 0),n=Dr(e,"buttons",void 0);this.buttonsAlign=Dr(e,"align",void 0),t&&this.addBackground(t),n&&this.addButtons(n),this.addChildrenMap("background",t),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(i){!this.scene||(super.destroy(i),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(i){this.buttonGroup.groupName=i}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(yn.prototype,Dz,Nz,Dl,av);var bz={getChoice(r){return this.childrenMap.choicesSizer.getButton(r)},getAction(r){return this.childrenMap.actionsSizer.getButton(r)},getToolbar(r){return this.childrenMap.toolbarSizer.getButton(r)},getLeftToolbar(r){return this.childrenMap.leftToolbarSizer.getButton(r)},setChoiceEnable(r,i){return this.childrenMap.choicesSizer.setButtonEnable(r,i),this},setActionEnable(r,i){return this.childrenMap.actionsSizer.setButtonEnable(r,i),this},setToolbarEnable(r,i){return this.childrenMap.toolbarSizer.setButtonEnable(r,i),this},setLeftToolbarEnable(r,i){return this.childrenMap.leftToolbarSizer.setButtonEnable(r,i),this},toggleChoiceEnable(r){return this.childrenMap.choicesSizer.toggleButtonEnable(r),this},toggleActionEnable(r){return this.childrenMap.actionsSizer.toggleButtonEnable(r),this},toggleToolbarEnable(r){return this.childrenMap.toolbarSizer.toggleButtonEnable(r),this},toggleLeftToolbarEnable(r){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(r),this},getChoiceEnable(r){return this.childrenMap.choicesSizer.getButtonEnable(r)},getActionEnable(r){return this.childrenMap.actionsSizer.getButtonEnable(r)},getToolbarEnable(r){return this.childrenMap.toolbarSizer.getButtonEnable(r)},getLeftToolbarEnable(r){return this.childrenMap.leftToolbarSizer.getButtonEnable(r)},emitChoiceClick(r){return this.childrenMap.choicesSizer.emitButtonClick(r),this},emitActionClick(r){return this.childrenMap.actionsSizer.emitButtonClick(r),this},emitToolbarClick(r){return this.childrenMap.toolbarSizer.emitButtonClick(r),this},emitLeftToolbarClick(r){return this.childrenMap.leftToolbarSizer.emitButtonClick(r),this},showChoice(r){return this.childrenMap.choicesSizer.showButton(r),this},showAction(r){return this.childrenMap.actionsSizer.showButton(r),this},showToolbar(r){return this.childrenMap.toolbarSizer.showButton(r),this},showLeftToolbar(r){return this.childrenMap.leftToolbarSizer.showButton(r),this},hideChoice(r){return this.childrenMap.choicesSizer.hideButton(r),this},hideAction(r){return this.childrenMap.actionsSizer.hideButton(r),this},hideToolbar(r){return this.childrenMap.toolbarSizer.hideButton(r),this},hideLeftToolbar(r){return this.childrenMap.leftToolbarSizer.hideButton(r),this},addChoice(r){return this.childrenMap.choicesSizer.addButton(r),this},addAction(r){return this.childrenMap.actionsSizer.addButton(r),this},addToolbar(r){return this.childrenMap.toolbarSizer.addButton(r),this},addLeftToolbar(r){return this.childrenMap.leftToolbarSizer.addButton(r),this},removeChoice(r,i){return this.childrenMap.choicesSizer.removeButton(r,i),this},removeAction(r,i){return this.childrenMap.actionsSizer.removeButton(r,i),this},removeToolbar(r,i){return this.childrenMap.toolbarSizer.removeButton(r,i),this},removeLeftToolbar(r,i){return this.childrenMap.leftToolbarSizer.removeButton(r,i),this},clearChoices(r){return this.childrenMap.choicesSizer.clearButtons(r),this},clearActions(r){return this.childrenMap.actionsSizer.clearButtons(r),this},clearToolbar(r){return this.childrenMap.toolbarSizer.clearButtons(r),this},clearLeftToolbar(r){return this.childrenMap.leftToolbarSizer.clearButtons(r),this},forEachChoice(r,i){return this.childrenMap.choicesSizer.forEachButtton(r,i),this},forEachAction(r,i){return this.childrenMap.actionsSizer.forEachButtton(r,i),this},forEachToolbar(r,i){return this.childrenMap.toolbarSizer.forEachButtton(r,i),this},forEachLeftToolbar(r,i){return this.childrenMap.leftToolbarSizer.forEachButtton(r,i),this},getChoicesButtonStates(){return this.childrenMap.choicesSizer.getAllButtonsState()},getChoicesButtonState(r){return r===void 0?this.childrenMap.choicesSizer.getAllButtonsState():this.childrenMap.choicesSizer.getButtonState(r)},setChoicesButtonState(r,i){return this.childrenMap.choicesSizer.setButtonState(r,i),this},clearChoicesButtonStates(){return this.childrenMap.choicesSizer.clearAllButtonsState(),this},getChoicesSelectedButtonName(){return this.childrenMap.choicesSizer.getSelectedButtonName()},setChoicesSelectedButtonName(r){return this.childrenMap.choicesSizer.setSelectedButtonName(r),this}},St=Phaser.Utils.Objects.GetValue,Br=class extends ne{constructor(i,e){e===void 0&&(e={}),e.orientation=1,super(i,e),this.type="rexDialog",this.eventEmitter=St(e,"eventEmitter",this);var d=St(e,"background",void 0),t=St(e,"title",void 0),n=St(e,"toolbar",void 0),u=St(e,"toolbarBackground",void 0),s=St(e,"leftToolbar",void 0),o=St(e,"leftToolbarBackground",void 0),h=St(e,"content",void 0),a=St(e,"description",void 0),l,c=St(e,"choices",void 0),f=St(e,"choicesBackground",void 0),v,p=St(e,"actions",void 0),g=St(e,"actionsBackground",void 0),m=St(e,"click",void 0);d&&this.addBackground(d);var x;n&&(x=new ye(i,{groupName:"toolbar",background:u,buttons:n,orientation:0,space:{item:St(e,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(s&&(y=new ye(i,{groupName:"leftToolbar",background:o,buttons:s,orientation:0,space:{item:St(e,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),t&&!n&&!s){var T=St(e,"align.title","center"),C=St(e,"space.title",0),S;(h||a||c||p)&&(S={bottom:C});var E=St(e,"expand.title",!0);this.add(t,{align:T,padding:S,expand:E})}if(n&&!t&&!s){var C=St(e,"space.title",0),S;(h||a||c||p)&&(S={bottom:C});var E=St(e,"expand.toolbar",!0);this.add(x,{align:"right",padding:S,expand:E})}if(s&&!t&&!n){var C=St(e,"space.title",0),S;(h||a||c||p)&&(S={bottom:C});var E=St(e,"expand.leftToolbar",!0);this.add(y,{align:"left",padding:S,expand:E})}if(t&&(n||s)){var M=new ne(i,{orientation:0});y&&M.add(y,{align:"right",expand:!1});var T=St(e,"align.title","left"),E=St(e,"expand.title",!0);!E&&(T==="right"||T==="center")&&M.addSpace();var S={left:St(e,"space.titleLeft",0),right:St(e,"space.titleRight",0)},R=E?1:0;M.add(t,{proportion:R,align:"center",padding:S,expand:E}),!E&&(T==="left"||T==="center")&&M.addSpace(),x&&M.add(x,{align:"right",expand:!1});var C=St(e,"space.title",0),S;(h||a||c||p)&&(S={bottom:C}),this.add(M,{align:"center",padding:S,expand:!0})}if(h){var T=St(e,"align.content","center"),L=St(e,"space.content",0),S={left:St(e,"space.contentLeft",0),right:St(e,"space.contentRight",0),bottom:a||c||p?L:0},E=St(e,"expand.content",!0);this.add(h,{align:T,padding:S,expand:E})}if(a){var T=St(e,"align.description","center"),O=St(e,"space.description",0),S={left:St(e,"space.descriptionLeft",0),right:St(e,"space.descriptionRight",0),bottom:c||p?O:0},E=St(e,"expand.description",!0);this.add(a,{align:T,padding:S,expand:E})}if(c){var F=St(e,"choicesType","").split("-"),D=so(F,"wrap")?yn:so(F,"grid")?Vs:ye,B=so(F,"radio")?"radio":so(F,"checkboxes")?"checkboxes":void 0,b={left:St(e,"space.choicesBackgroundLeft",0),right:St(e,"space.choicesBackgroundRight",0),top:St(e,"space.choicesBackgroundTop",0),bottom:St(e,"space.choicesBackgroundBottom",0)},V=St(e,"space.choice",0);D===ye?b.item=V:D===yn?(b.item=V,b.line=St(e,"space.choiceLine",V)):(b.column=St(e,"space.choiceColumn",V),b.row=St(e,"space.choiceRow",V));var X={width:St(e,"choicesWidth",void 0),height:St(e,"choicesHeight",void 0),groupName:"choices",buttonsType:B,background:f,buttons:c,space:b,click:m,eventEmitter:this.eventEmitter,setValueCallback:St(e,"choicesSetValueCallback",void 0),setValueCallbackScope:St(e,"choicesSetValueCallbackScope",void 0)};D===ye&&(X.orientation=so(F,"x")?0:1),l=new D(i,X);var K=St(e,"space.choices",0),S={left:St(e,"space.choicesLeft",0),right:St(e,"space.choicesRight",0),bottom:p?K:0},T=St(e,"align.choices","center"),E=St(e,"expand.choices",!0);this.add(l,{align:T,padding:S,expand:E})}if(p){v=new ye(i,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:St(e,"space.action",0)},expand:St(e,"expand.actions",!1),align:St(e,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var S={left:St(e,"space.actionsLeft",0),right:St(e,"space.actionsRight",0)};this.add(v,{align:"center",padding:S,expand:!0})}this.addChildrenMap("background",d),this.addChildrenMap("title",t),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",s),this.addChildrenMap("content",h),this.addChildrenMap("description",a),this.addChildrenMap("choices",c),this.addChildrenMap("actions",p),this.addChildrenMap("choicesSizer",l),this.addChildrenMap("actionsSizer",v),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}},so=function(r,i){return r.indexOf(i)!==-1};Object.assign(Br.prototype,bz);var se=Phaser.Utils.Objects.GetValue,ro=class extends ne{constructor(i,e){e===void 0&&(e={}),e.orientation=1,super(i,e),this.type="rexHolyGrail";var d=se(e,"background",void 0);d&&this.addBackground(d);var t=se(e,"header",void 0);if(t){var n=se(e,"proportion.header",0),u=se(e,"align.header","center"),s=se(e,"space.header",void 0);typeof s=="number"&&(s={bottom:s});var o=se(e,"expand.header",!0);this.add(t,{proportion:n,align:u,padding:s,expand:o})}var h=new ne(i,{orientation:0});this.add(h,{proportion:1,align:"center",padding:0,expand:!0});var a=se(e,"leftSide",void 0);if(a){var n=se(e,"proportion.leftSide",0),u=se(e,"align.leftSide","center"),s=se(e,"space.leftSide",void 0);typeof s=="number"&&(s={right:s});var o=se(e,"expand.leftSide",!0);h.add(a,{proportion:n,align:u,padding:s,expand:o})}var l=se(e,"content",void 0);if(l){var n=se(e,"proportion.content",1),u=se(e,"align.content","center"),s=se(e,"space.content",void 0),o=se(e,"expand.content",!0);h.add(l,{proportion:n,align:u,padding:s,expand:o})}var c=se(e,"rightSide",void 0);if(c){var n=se(e,"proportion.rightSide",0),u=se(e,"align.rightSide","center"),s=se(e,"space.rightSide",void 0);typeof s=="number"&&(s={left:s});var o=se(e,"expand.rightSide",!0);h.add(c,{proportion:n,align:u,padding:s,expand:o})}var f=se(e,"footer",void 0);if(f){var n=se(e,"proportion.footer",0),u=se(e,"align.footer","center"),s=se(e,"space.footer",void 0);typeof s=="number"&&(s={top:s});var o=se(e,"expand.footer",!0);this.add(f,{proportion:n,align:u,padding:s,expand:o})}this.addChildrenMap("background",d),this.addChildrenMap("header",t),this.addChildrenMap("leftSide",a),this.addChildrenMap("content",l),this.addChildrenMap("rightSide",c),this.addChildrenMap("footer",f)}},zz={getButtonsSizer(r){return this.childrenMap[`${r}ButtonsSizer`]},getButton(r,i){var e=this.getButtonsSizer(r);return e?e.getButton(i):void 0},setButtonEnable(r,i,e){return this.getButtonsSizer(r).setButtonEnable(i,e),this},setLeftButtonEnable(r,i){return this.childrenMap.leftButtonsSizer.setButtonEnable(r,i),this},setRightButtonEnable(r,i){return this.childrenMap.rightButtonsSizer.setButtonEnable(r,i),this},setTopButtonEnable(r,i){return this.childrenMap.topButtonsSizer.setButtonEnable(r,i),this},setBottomButtonEnable(r,i){return this.childrenMap.bottomButtonsSizer.setButtonEnable(r,i),this},toggleButtonEnable(r,i){return this.getButtonsSizer(r).toggleButtonEnable(i),this},toggleLeftButtonEnable(r){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(r),this},toggleRightButtonEnable(r){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(r),this},toggleTopButtonEnable(r){return this.childrenMap.topButtonsSizer.toggleButtonEnable(r),this},toggleBottomButtonEnable(r){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(r),this},getButtonEnable(r,i){return this.getButtonsSizer(r).getButtonEnable(i)},getLeftButtonEnable(r){return this.childrenMap.leftButtonsSizer.getButtonEnable(r)},getRightButtonEnable(r){return this.childrenMap.rightButtonsSizer.getButtonEnable(r)},getTopButtonEnable(r){return this.childrenMap.topButtonsSizer.getButtonEnable(r)},getBottomButtonEnable(r){return this.childrenMap.bottomButtonsSizer.getButtonEnable(r)},emitButtonClick(r,i){var e=this.getButtonsSizer(r);return e?(e.emitButtonClick(i),this):this},emitLeftButtonClick(r){return this.childrenMap.leftButtonsSizer.emitButtonClick(r),this},emitRightButtonClick(r){return this.childrenMap.rightButtonsSizer.emitButtonClick(r),this},emitTopButtonClick(r){return this.childrenMap.topButtonsSizer.emitButtonClick(r),this},emitBottomButtonClick(r){return this.childrenMap.bottomButtonsSizer.emitButtonClick(r),this},getLeftButton(r){return this.childrenMap.leftButtonsSizer.getButton(r)},getRightButton(r){return this.childrenMap.rightButtonsSizer.getButton(r)},getTopButton(r){return this.childrenMap.topButtonsSizer.getButton(r)},getBottomButton(r){return this.childrenMap.bottomButtonsSizer.getButton(r)},showButton(r,i){return bn(this.getButton(r,i)),this},showLeftButton(r){return bn(this.getLeftButton(r)),this},showRightButton(r){return bn(this.getRightButton(r)),this},showTopButton(r){return bn(this.getTopButton(r)),this},showBottomButton(r){return bn(this.getBottomButton(r)),this},hideButton(r,i){return zn(this.getButton(r,i)),this},hideLeftButton(r){return zn(this.getLeftButton(r)),this},hideRightButton(r){return zn(this.getRightButton(r)),this},hideTopButton(r){return zn(this.getTopButton(r)),this},hideBottomButton(r){return zn(this.getBottomButton(r)),this},addButton(r,i){return this.getButtonsSizer(r).addButton(i),this},addLeftButton(r){return this.addButton("left",r),this},addRightButton(r){return this.addButton("right",r),this},addTopButton(r){return this.addButton("top",r),this},removeButton(r,i,e){return this.getButtonsSizer(r).removeButton(i,e),this},removeLeftButton(r,i){return this.removeButton("left",r,i),this},removeRightButton(r,i){return this.removeButton("right",r,i),this},removeTopButton(r,i){return this.removeButton("top",r,i),this},removeBottomButton(r,i){return this.removeButton("bottom",r,i),this},clearButtons(r,i){return this.getButtonsSizer(r).clearButtons(i),this},clearLeftButtons(r){return this.clearButtons("left",r),this},clearRightButtons(r){return this.clearButtons("right",r),this},clearTopButtons(r){return this.clearButtons("top",r),this},clearBottomButtonss(r){return this.clearButtons("bottom",r),this},forEachButton(r,i,e){return this.getButtonsSizer(r).forEachButtton(i,e),this},forEachLeftButton(r,i){return this.childrenMap.leftButtonsSizer.forEachButtton(r,i),this},forEachRightButton(r,i){return this.childrenMap.rightButtonsSizer.forEachButtton(r,i),this},forEachTopButton(r,i){return this.childrenMap.topButtonsSizer.forEachButtton(r,i),this},forEachBottomButton(r,i){return this.childrenMap.bottomButtonsSizer.forEachButtton(r,i),this}},le=Phaser.Utils.Objects.GetValue,ao=class extends tn{constructor(i,e){e===void 0&&(e={}),e.column=3,e.row=3,super(i,e),this.type="rexTabs",this.eventEmitter=le(e,"eventEmitter",this);var d=le(e,"background",void 0),t=le(e,"panel",void 0),n=le(e,"leftButtons",void 0),u=le(e,"leftButtonsBackground",void 0),s,o=le(e,"rightButtons",void 0),h=le(e,"rightButtonsBackground",void 0),a,l=le(e,"topButtons",void 0),c=le(e,"topButtonsBackground",void 0),f,v=le(e,"bottomButtons",void 0),p=le(e,"bottomButtonsBackground",void 0),g,m=le(e,"click",void 0);if(d&&this.addBackground(d),t&&this.add(t,1,1,"center",0,!0),n){var x=le(e,"space.leftButtonsOffset",0),y=le(e,"space.leftButton",0);s=new ye(i,{groupName:"left",background:u,buttons:n,orientation:1,space:{item:y},align:le(e,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(s,0,1,"top",T,!1)}if(o){var C=le(e,"space.rightButtonsOffset",0),S=le(e,"space.rightButton",0);a=new ye(i,{groupName:"right",background:h,buttons:o,orientation:1,space:{item:S},align:le(e,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:C};this.add(a,2,1,"top",T,!1)}if(l){var E=le(e,"space.topButtonsOffset",0),M=le(e,"space.topButton",0);f=new ye(i,{groupName:"top",background:c,buttons:l,orientation:0,space:{item:M},align:le(e,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(f,1,0,"left",T,!1)}if(v){var R=le(e,"space.bottomButtonsOffset",0),L=le(e,"space.bottomButton",0);g=new ye(i,{groupName:"bottom",background:p,buttons:v,orientation:0,space:{item:L},align:le(e,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:R};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",d),this.addChildrenMap("panel",t),this.addChildrenMap("leftButtons",n),this.addChildrenMap("rightButtons",o),this.addChildrenMap("topButtons",l),this.addChildrenMap("bottomButtons",v),this.addChildrenMap("leftButtonsSizer",s),this.addChildrenMap("rightButtonsSizer",a),this.addChildrenMap("topButtonsSizer",f),this.addChildrenMap("bottomButtonsSizer",g)}};Object.assign(ao.prototype,zz);var fT=Phaser.Math.Percent,dT=function(r,i,e){var d,t,n;return r.y===i.y?(d=Math.min(r.x,i.x),t=Math.max(r.x,i.x),n=fT(e.x,d,t)):r.x===i.x&&(d=Math.min(r.y,i.y),t=Math.max(r.y,i.y),n=fT(e.y,d,t)),n},Yz=function(r,i,e){!this.enable||(lv.x=i,lv.y=e,this.value=dT(this.getStartPoint(),this.getEndPoint(),lv))},lv={},vT=function(r,i,e){if(!!this.enable&&!!r.isDown){uv.x=r.worldX,uv.y=r.worldY;var d=dT(this.getStartPoint(),this.getEndPoint(),uv);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-d)<.1?this.value=d:this.easeValueTo(d)}},uv={},cT=function(r,i){i===void 0&&(i=Uz);var e=this.childrenMap.thumb,d=e.x,t=e.y;return al(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,r),i.x=e.x,i.y=e.y,e.x=d,e.y=t,i},Uz={},Vz=Phaser.Display.Align.LEFT_CENTER,Wz=Phaser.Display.Align.TOP_CENTER,Hz=function(r){if(r===void 0&&(r=Xz),this.childrenMap.thumb){var i=this.orientation===0?Vz:Wz;cT.call(this,i,r)}else this.orientation===0?(r.x=this.innerLeft+1,r.y=this.centerY):(r.x=this.centerX,r.y=this.innerTop+1);return r},Xz={},$z=Phaser.Display.Align.RIGHT_CENTER,Kz=Phaser.Display.Align.BOTTOM_CENTER,Jz=function(r){if(r===void 0&&(r=Zz),this.childrenMap.thumb){var i=this.orientation===0?$z:Kz;cT.call(this,i,r)}else this.orientation===0?(r.x=this.innerRight-1,r.y=this.centerY):(r.x=this.centerX,r.y=this.innerBottom-1);return r},Zz={},pT=Phaser.Math.Linear,kz=function(r,i,e,d){return d===void 0&&(d=Qz),d.x=pT(i.x,e.x,r),d.y=pT(i.y,e.y,r),d},Qz={},jz=function(r){var i=this.childrenMap.thumb;return i===void 0?this:(r===void 0&&(r=this.value),kz(r,this.getStartPoint(),this.getEndPoint(),i),this.resetChildPositionState(i),this)},qz=Phaser.Display.Align.LEFT_CENTER,_z=Phaser.Display.Align.TOP_CENTER,tY=function(r){var i=this.childrenMap.indicator;if(i===void 0)return this;r===void 0&&(r=this.value);var e,d,t=this.childrenMap.thumb;if(t)if(this.orientation===0){var n=_t(t),u=t.x-n*t.originX+n;e=u-this.left}else{var s=Jt(t),o=t.y-s*t.originY+s;d=o-this.top}else this.orientation===0?e=this.width*r:d=this.height*r;rs(i,e,d);var h=this.orientation===0?qz:_z;Hx(i,this,h),this.resetChildPositionState(i)},Ze=Phaser.Utils.Objects.GetValue,eY=Phaser.Math.Clamp,iY=Phaser.Math.Linear,gT=Phaser.Math.Percent,nY=Phaser.Math.Snap.To,fs=class extends ne{constructor(i,e){super(i,e);this.type="rexSlider",this.eventEmitter=Ze(e,"eventEmitter",this);var d=Ze(e,"background",void 0),t=Ze(e,"track",void 0),n=Ze(e,"indicator",void 0),u=Ze(e,"thumb",void 0);d&&this.addBackground(d),t&&this.add(t,{proportion:1,expand:!0,minWidth:0,minHeight:0}),n&&this.pin(n),u&&this.pin(u);var s=Ze(e,"input",0);switch(typeof s=="string"&&(s=sY[s]),s){case 0:u&&(u.setInteractive(),this.scene.input.setDraggable(u),u.on("drag",Yz,this).on("dragstart",function(a){this.eventEmitter.emit("inputstart",a)},this).on("dragend",function(a){this.eventEmitter.emit("inputend",a)},this));break;case 1:this.setInteractive().on("pointerdown",vT,this).on("pointermove",vT,this).on("pointerdown",function(a){this.eventEmitter.emit("inputstart",a)},this).on("pointerup",function(a){this.eventEmitter.emit("inputend",a)},this).on("pointerover",function(a){a.isDown&&this.eventEmitter.emit("inputstart",a)},this).on("pointerout",function(a){a.isDown&&this.eventEmitter.emit("inputend",a)},this);break}this.addChildrenMap("background",d),this.addChildrenMap("track",t),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",u);var o=Ze(e,"valuechangeCallback",null);if(o!==null){var h=Ze(e,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,h)}this.setEnable(Ze(e,"enable",void 0)),this.setGap(Ze(e,"gap",void 0)),this.setValue(Ze(e,"value",0),Ze(e,"min",void 0),Ze(e,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ze(e,"easeValue.duration",0)).setEaseValueFunction(Ze(e,"easeValue.ease","Linear"))}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setGap(i){return this.gap=i,this}get value(){return this._value}set value(i){this.gap!==void 0&&(i=nY(i,this.gap));var e=this._value;this._value=eY(i,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}setValue(i,e,d){return i==null?this:(e!==void 0&&(i=gT(i,e,d)),this.value=i,this)}addValue(i,e,d){return e!==void 0&&(i=gT(i,e,d)),this.value+=i,this}getValue(i,e){var d=this.value;return i!==void 0&&(d=iY(i,e,d)),d}runLayout(i,e,d){return this.ignoreLayout?this:(super.runLayout(i,e,d),this.updateThumb(),this.updateIndicator(),this)}},sY={pan:0,drag:0,click:1,none:-1},rY={getStartPoint:Hz,getEndPoint:Jz,updateThumb:jz,updateIndicator:tY};Object.assign(fs.prototype,rY,Ma);var mT={v:0,vertical:0,h:1,horizontal:1},aY=Phaser.Utils.Objects.GetValue,Gl=function(r,i){var e=aY(r,"scrollMode",0);return typeof e=="string"&&(e=mT[e]),e},ri=Phaser.Utils.Objects.GetValue,oo=class extends ne{constructor(i,e){super(i,e);this.type="rexScrollBar";var d=ri(e,"background",void 0),t=ri(e,"buttons",void 0),n=ri(t,"top",ri(t,"left",void 0)),u=ri(t,"bottom",ri(t,"right",void 0)),s,o=ri(e,"slider",void 0);if(d&&this.addBackground(d),n){this.add(n);var h=new gl(n);h.on("intouch",function(){!this.enable||(this.value-=this.scrollStep)},this)}if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null;var a;if(this.orientation===0){var l=ri(o,"width",void 0);a=l===void 0?1:0}else{var c=ri(o,"height",void 0);a=c===void 0?1:0}s=new fs(i,o),i.add.existing(s),this.add(s,{proportion:a})}if(u){this.add(u);var h=new gl(u);h.on("intouch",function(){!this.enable||(this.value+=this.scrollStep)},this)}var f=[n,u];this.addChildrenMap("background",d),this.addChildrenMap("slider",s),this.addChildrenMap("buttons",f);var v=ri(e,"valuechangeCallback",null);if(v!==null){var p=ri(e,"valuechangeCallbackScope",void 0);this.on("valuechange",v,p)}this.setEnable(ri(e,"enable",void 0)),this.setValue(ri(e,"value",0)),this.setScrollStep(ri(t,"step",.01))}setScrollStep(i){return this.scrollStep=i,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,e,d),this}addValue(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,e,d),this}getValue(i,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,e):0}easeValueTo(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,e,d),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}},xT=class extends oo{constructor(i,e){e===void 0&&(e={});var d=hr(e);e={slider:d},e.orientation=d.orientation,delete d.orientation,e.background=d.background,delete d.background,e.buttons=d.buttons,delete d.buttons,super(i,e);var t=this.childrenMap.slider;this.addChildrenMap("track",t.childrenMap.track),this.addChildrenMap("indicator",t.childrenMap.indicator),this.addChildrenMap("thumb",t.childrenMap.thumb)}},yT=class extends ji{constructor(i,e){super(e);this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){var i,e=this.parent,d=e.dragState;return d.isDown&&(i=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),i}update_IDLE(i,e){this.next()}next_DRAGBEGIN(){var i,e=this.parent,d=e.dragState;return d.isDown?i=d.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":i="IDLE",i}update_DRAGBEGIN(i,e){this.next()}next_DRAG(){var i,e=this.parent,d=e.dragState;return d.isUp&&(e.outOfBounds?i="BACK":e.slidingEnable?i="SLIDE":i="IDLE"),i}update_DRAG(i,e){var d=this.parent,t=d.dragState;t.justMoved&&d.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var i,e=this.parent,d=e.dragState;return d.isDown?i="DRAG":e.isSliding||(i="IDLE"),i}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(i,e){this.parent.sliding(i,e),this.next()}next_BACK(){var i,e=this.parent,d=e.dragState;return d.isDown?i="DRAG":e.isPullBack||(i="IDLE"),i}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(i,e){this.parent.pullBack(i,e),this.next()}},Nl=Phaser.Utils.Objects.GetValue,oY=Phaser.Math.Distance.Between,TT=class extends Me{constructor(i,e){super(i,e);this._enable=void 0,i.setInteractive(Nl(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Nl(i,"enable",!0)),this.holdThreshold=Nl(i,"holdThreshold",50),this.pointerOutReleaseEnable=Nl(i,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){this._enable!==i&&(i||(this.isInTouched=!1,this.pointer=void 0),this._enable=i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(i){return i===void 0&&(i=!0),this.pointerOutReleaseEnable=i,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var i=this.scene.sys.game,e=i.loop.delta;return e}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var i=oY(this.preX,this.preY,this.x,this.y),e=i/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(i,e,d){!this.enable||!i.isDown||this.pointer!==void 0||(this.pointer=i,this.localX=e,this.localY=d)}onPointOut(i){!this.enable||this.pointer!==i||(this.pointer=void 0)}onPointerMove(i,e,d){!this.enable||!i.isDown||this.pointer!==i||(this.localX=e,this.localY=d)}preupdate(i,e){if(!!this.enable){var d=this.pointer;this.justMoved=!1,d&&!this.isInTouched?(this.x=d.worldX,this.y=d.worldY,this.preX=d.worldX,this.preY=d.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",d,this.localX,this.localY)):d&&this.isInTouched?this.x===d.x&&this.y===d.y?this.holdStartTime===void 0?this.holdStartTime=i:i-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=d.worldX,this.y=d.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",d,this.localX,this.localY)):!d&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",d))}}},fv=Phaser.Utils.Objects.GetValue,CT=class{constructor(i){this.resetFromJSON(i)}resetFromJSON(i){return this.setValue(fv(i,"value",0)),this.setSpeed(fv(i,"speed",0)),this.setAcceleration(fv(i,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(i){return this.value=i,this}setSpeed(i){return this.speed=i,this}setAcceleration(i){return this.acceleration=i,this}updateSpeed(i){return this.acceleration!==0&&(this.speed+=this.acceleration*i,this.speed<0&&(this.speed=0)),this}getDeltaValue(i){return this.updateSpeed(i),this.speed<=0?0:this.speed*i}update(i){return this.updateSpeed(i),this.speed>0&&(this.value+=this.getDeltaValue(i)),this}get isMoving(){return this.speed>0}},ST=class{constructor(){this.value,this.dir,this.movement=new CT}init(i,e,d,t,n){return this.value=i,this.end=n,n!==void 0?this.dir=i<n:this.dir=e,this.movement.setSpeed(d).setAcceleration(-t),this}stop(){this.movement.reset()}update(i){var e=this.movement.getDeltaValue(i);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}},Re=Phaser.Utils.Objects.GetValue,hY=Phaser.Math.Clamp,ET=class extends Me{constructor(i,e){super(i,e);var d=Re(e,"enable",!0);this._state=new yT(this,{enable:d,eventEmitter:!1});var t={inputConfig:Re(e,"inputConfig",void 0),enable:d,pointerOutRelease:Re(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new TT(i,t),this._enable=void 0,this._value=void 0,this._slowDown=new ST;var n=Re(e,"valuechangeCallback",null);if(n!==null){var u=Re(e,"valuechangeCallbackScope",void 0);this.on("valuechange",n,u)}if(n=Re(e,"overmaxCallback",null),n!==null){var u=Re(e,"overmaxCallbackScope",void 0);this.on("overmax",n,u)}if(n=Re(e,"overminCallback",null),n!==null){var u=Re(e,"overminCallbackScope",void 0);this.on("overmin",n,u)}this.resetFromJSON(e),this.boot()}resetFromJSON(i){this.setOrientationMode(Re(i,"orientation",0)),this.setDragThreshold(Re(i,"threshold",10)),this.setSlidingDeceleration(Re(i,"slidingDeceleration",5e3)),this.setBackDeceleration(Re(i,"backDeceleration",2e3));var e=Re(i,"bounds",void 0);return e?this.setBounds(e):this.setBounds(Re(i,"max",0),Re(i,"min",0)),this.setValue(Re(i,"value",this.maxValue||0)),this.setEnable(Re(i,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(i){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(i),this.dragState.destroy(i),this._state=void 0,this.dragState=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return this._enable=i,this._state.setEnable(i),this.dragState.setEnable(i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(i){return typeof i=="string"&&(i=lY[i]),this.orientationMode=i,this}setDragThreshold(i){return this.dragThreshold=i,this}setSlidingDeceleration(i){return this.slidingDeceleration=i,this}setBackDeceleration(i){return this.backDeceleration=i,this}setBounds(i,e){if(Array.isArray(i)){var d=i;i=d[0],e=d[1]}return i<e?(this.minValue=i,this.maxValue=e):(this.minValue=e,this.maxValue=i),this}get value(){return this._value}set value(i){if(i!==this._value){var e=this._value,d=this.overMax(i),t=this.overMin(i);d&&this.emit("overmax",i,e),t&&this.emit("overmin",i,e),this.backEnable||(d&&(i=this.maxValue),t&&(i=this.minValue)),this._value=i,this.emit("valuechange",i,e)}}setValue(i,e){return e===void 0&&(e=!1),e&&(i=hY(i,this.minValue,this.maxValue)),this.value=i,this}addValue(i,e){return this.setValue(this.value+i,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(i){return this.maxValue!=null&&i>this.maxValue}overMin(i){return this.minValue!=null&&i<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var i=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var d=this.slidingDeceleration;this._slowDown.init(i,e>0,Math.abs(e),d)}sliding(i,e){e*=.001;var d=this._slowDown.update(e).value;this.overMax(d)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(d)?(this.value=this.minValue,this._slowDown.stop()):this.value=d}onPullBack(){var i=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,d=Math.abs(e-i),t=this.backDeceleration,n=Math.sqrt(2*t*d);this._slowDown.init(i,void 0,n,t,e)}pullBack(i,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}},lY={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},bl=Phaser.Utils.Objects.GetValue,PT=class extends Me{constructor(i,e){super(i,e);if(this.parent!==this.scene?this.focusMode=bl(e,"focus",!1):this.focusMode=!1,this.setSpeed(bl(e,"speed",.1)),this.setEnable(bl(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var i=this.parent;i.setInteractive(bl(e,"inputConfig",void 0)).on("wheel",function(t,n,u,s,o){!this.enable||this.scroll(u)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(i,e,d,t,n,u){!this.enable||this.scroll(t)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}setSpeed(i){return this.speed=i,this}scroll(i){i*=this.speed,this.emit("scroll",i,this.parent,this)}},Oe=Phaser.Utils.Objects.GetValue,fY=function(r,i){var e=r.scene,d=Gl(i),t=new ne(e,{orientation:d}),n=Oe(i,"child.gameObject",void 0),u=Oe(i,"slider",void 0),s,o=Oe(u,"position",0);typeof o=="string"&&(o=uY[o]);var h=o===0,a=Oe(i,"scroller",!0),l,c=Oe(i,"mouseWheelScroller",!1),f;if(n){var v=Oe(i,"space.child",0),p={};if(r.childMargin={},typeof v!="number"){var g=v;d===0?(p.left=Oe(g,"left",0),p.right=Oe(g,"right",0),r.childMargin.top=Oe(g,"top",0),r.childMargin.bottom=Oe(g,"bottom",0)):(p.top=Oe(g,"top",0),p.bottom=Oe(g,"bottom",0),r.childMargin.top=Oe(g,"left",0),r.childMargin.bottom=Oe(g,"right",0))}else u&&(d===0?p=h?{right:v}:{left:v}:p=h?{bottom:v}:{top:v}),r.childMargin.top=0,r.childMargin.bottom=0;u?(u===!0&&(u={}),u.orientation=t.orientation===0?1:0,s=new xT(e,u),r.adaptThumbSizeMode=Oe(u,"adaptThumbSize",!1),r.minThumbSize=Oe(u,"minThumbSize",void 0)):(r.adaptThumbSizeMode=!1,r.minThumbSize=void 0),a&&(a===!0&&(a={}),a.orientation=d,l=new ET(n,a)),c&&(f=new PT(n,c)),s&&!h&&t.add(s,{proportion:0,align:"center",expand:!0});var m=Oe(i,"child.proportion",1),x=Oe(i,"child.expand",!0);t.add(n,{proportion:m,align:"center",padding:p,expand:x}),s&&h&&t.add(s,{proportion:0,align:"center",expand:!0})}return s&&s.on("valuechange",function(y){r.t=y,r.emit("scroll",r)}),l&&l.on("valuechange",function(y){r.childOY=y,r.emit("scroll",r)}),f&&f.on("scroll",function(y){r.addChildOY(-y,!0)}),r.addChildrenMap("child",n),r.addChildrenMap("slider",s),r.addChildrenMap("scroller",l),r.addChildrenMap("mouseWheelScroller",f),t},uY={right:0,left:1,bottom:0,top:1},vY=function(){var r=this.topChildOY,i=this.bottomChildOY,e=this.childrenMap.scroller,d=this.childrenMap.slider;return e&&e.setBounds(i,r),d&&d.setEnable(i!==r),this.updateController(),this.adaptThumbSizeMode&&dY.call(this),this},dY=function(){var r=Math.min(this.childVisibleHeight/this.childHeight,1),i=this.childrenMap.slider,e=i.childrenMap.track,d=i.childrenMap.thumb,t=this.minThumbSize;if(this.scrollMode===0){var n=e.displayHeight*r;t!==void 0&&n<t&&(n=t),rs(d,void 0,n)}else{var u=e.displayWidth*r;t!==void 0&&u<t&&(u=t),rs(d,u,void 0)}cY.call(this)},cY=function(){var r=this.childrenMap.slider,i=r.minWidth,e=r.minHeight;r.minWidth=r.width,r.minHeight=r.height,r.layout(),r.minWidth=i,r.minHeight=e},pY=function(){var r=this.childrenMap.scroller,i=this.childrenMap.slider;r&&r.setValue(this.childOY),i&&i.setValue(this.t)},Tn=Phaser.Utils.Objects.GetValue,MT=Phaser.Math.Clamp,ho=class extends ne{constructor(i,e){e===void 0&&(e={});var d=Gl(e);e.orientation=d===0?1:0,super(i,e),this.type=Tn(e,"type","rexScrollable");var t=Tn(e,"background",void 0),n=fY(this,e),u=Tn(e,"header",void 0),s=Tn(e,"footer",void 0);if(t&&this.addBackground(t),u){var o=Tn(e,"align.header","center"),h=Tn(e,"space.header",0),a;d===0?a={bottom:h}:a={right:h};var l=Tn(e,"expand.header",!0);this.add(u,{proportion:0,align:o,padding:a,expand:l})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),s){var o=Tn(e,"align.footer","center"),c=Tn(e,"space.footer",0),a;d===0?a={top:c}:a={left:c};var l=Tn(e,"expand.footer",!0);this.add(s,{proportion:0,align:o,padding:a,expand:l})}this.addChildrenMap("background",t),this.addChildrenMap("header",u),this.addChildrenMap("footer",s),this.runLayoutFlag=!1}runLayout(i,e,d){return this.ignoreLayout?this:(super.runLayout(i,e,d),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(i){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var d=this.childrenMap.child,t=d.topChildOY-d.bottomChildOY,n=t+e.top+e.bottom,u=n*i-e.top;i=u/t}this.childrenMap.child.t=i,this.updateController()}get t(){var i=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var d=this.childrenMap.child,t=d.topChildOY-d.bottomChildOY,n=t+e.top+e.bottom,u=t*i+e.top;i=u/n}return i}set childOY(i){this.childrenMap.child.childOY=i,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var i=this.childrenMap.child;return i.topChildOY!==i.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(i,e){return e===void 0&&(e=!1),e&&(i=MT(i,this.bottomChildOY,this.topChildOY)),this.childOY=i,this}addChildOY(i,e){return this.setChildOY(this.childOY+i,e),this}setT(i,e){return e===void 0&&(e=!1),e&&(i=MT(i,0,1)),this.t=i,this}addT(i,e){return this.setT(this.t+i,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var i=this.childrenMap.slider;return i?i.enable:!1}set sliderEnable(i){var e=this.childrenMap.slider;!e||e.setEnable(i)}setSliderEnable(i){return i===void 0&&(i=!0),this.sliderEnable=i,this}get scrollerEnable(){var i=this.childrenMap.scroller;return i?i.enable:!1}set scrollerEnable(i){var e=this.childrenMap.scroller;!e||e.setEnable(i)}setScrollerEnable(i){return i===void 0&&(i=!0),this.scrollerEnable=i,this}get mouseWheelScrollerEnable(){var i=this.childrenMap.mouseWheelScroller;return i?i.enable:!1}set mouseWheelScrollerEnable(i){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(i)}setMouseWheelScrollerEnable(i){return i===void 0&&(i=!0),this.mouseWheelScrollerEnable=i,this}setDropZoneEnable(i){i===void 0&&(i=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=i,this}},gY={resizeController:vY,updateController:pY};Object.assign(ho.prototype,gY);var dv=class{constructor(i,e){this.container=null,this._deltaHeight=0,this.setParent(i)}setParent(i){this.parent=i,this.parentContainer=i.getParentContainer()}destroy(i){i===void 0&&(i=!1),i||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(i){return i?(this.container&&this.container.destroy(),this.container=i,this.parentContainer.add(i),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var i=this.container;return this.container=null,this.parentContainer.remove(i),i}else return null}setXY(i,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,i,e),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(i){i==null&&(i=0);var e=this.parent;this._deltaHeight===0&&i!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&i===0&&e.nonZeroDeltaHeightCount--;var d=this._deltaHeight!==i;if(this._deltaHeight=i,d){e.resetTotalRowsHeight();var t=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(t,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(i){this.deltaHeight=i}setDeltaHeight(i){return this.deltaHeight=i,this}setDeltaWidth(i){return this.deltaHeight=i,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(i){this.scrollMode!==1&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setHeight(i){return this.height=i,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(i){this.scrollMode!==0&&this.setDeltaHeight(i-this.parent.defaultCellHeight)}setWidth(i){return this.width=i,this}get scene(){return this.parentContainer.scene}};Object.assign(dv.prototype,Ch);var zl=Phaser.Utils.Objects.GetValue,mY=Phaser.Utils.Array.SpliceOne,AT=class{constructor(i,e){this.parent=i,this.cells=[],this.cellPool=new ln,this.resetFromJSON(e)}resetFromJSON(i){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(zl(i,"cellHeight",30)),this.setDefaultCellWidth(zl(i,"cellWidth",30)),this.initCells(zl(i,"cellsCount",0)),this.setColumnCount(zl(i,"columns",1)),this}destroy(i){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(i){return this.defaultCellHeight=i,this}setDefaultCellWidth(i){return this.defaultCellWidth=i,this}initCells(i){var e=this.cells;e.length=i;for(var d=0;d<i;d++)e[d]=null;return this}insertNewCells(i,e){var d=this.cells;if(i===d.length){var t=i+e;d.legth=t;for(var n=i;n<t;n++)d[n]=null}else{var u=[];u.length=e;for(var n=0;n<e;n++)u[n]=null;this.cells.splice(i,0,...u)}return this.resetTotalRowsHeight(),this}removeCells(i,e){for(var d=i+e,t=i;t<d;t++)this.freeCell(t);return d===this.cells.length?this.cells.length=i:(e===1?mY(this.cells,i):this.cells.splice(i,e),this.buildCellIndex(i)),this.resetTotalRowsHeight(),this}setColumnCount(i){return this.colCount=i,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(i){return i>=0&&i<this.cells.length}heightToRowIndex(i,e){if(this.defaultCellHeightMode){var s=i/this.defaultCellHeight;return e?s=Math.ceil(s):s=Math.floor(s),s}for(var d=this.rowCount,t=i,n,u,s=0;;)if(u=this.getRowHeight(s),t-=u,n=s>=0&&s<d,t>0&&n)s+=1;else{if(t===0)return s;if(e){var o=s;s+=1,n=s>=0&&s<d,n||(s=o)}return s}}widthToColIndex(i,e){var d=i/this.defaultCellWidth;return e?d=Math.ceil(d):d=Math.floor(d),d}colRowToCellIndex(i,e){return i>=this.colCount?null:e*this.colCount+i}rowIndexToHeight(i,e){if(this.defaultCellHeightMode)return(e-i+1)*this.defaultCellHeight;for(var d,t=0,n=i;n<=e;n++)d=this.getRowHeight(n),t+=d;return t}colIndexToWidth(i,e){return(e-i+1)*this.defaultCellWidth}getRowHeight(i){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,i));for(var d=0,t,n=0;n<e;n++)t=this.getCellHeight(this.colRowToCellIndex(n,i)),d<t&&(d=t);return d}getColWidth(i){return this.defaultCellWidth}getCellHeight(i){if(!this.isValidCellIdx(i))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var d=this.getCell(i,!1),t=d?d.deltaHeight:0;e=this.defaultCellHeight+t}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(i){return i%this.colCount}cellIndxeToRowIndex(i){return Math.floor(i/this.colCount)}getCell(i,e){if(!this.isValidCellIdx(i))return null;if(e===void 0&&(e=!0),this.cells[i]===null&&e){var d=this.newCell(i);this.cells[i]=d}return this.cells[i]}newCell(i){var e=this.cellPool.pop();return e===null?e=new dv(this):e.setParent(this),e.index=i,e}buildCellIndex(i){i===void 0&&(i=0);for(var e=this.cells,d,t=i,n=e.length;t<n;t++)d=e[t],d&&(d.index=t);return this}getParentContainer(){return this.parent}freeCell(i){return typeof i=="number"&&(i=this.cells[i]),i?(i.destroy(),this.cellPool.push(i),this):this}},xY=function(r){var i=this.table,e=this.topTableOY,d=this.bottomTableOY,t=r>this.topTableOY,n=r<this.bottomTableOY;if(this.clampTableOXY){var u=i.rowCount,s=i.heightToRowIndex(this.instHeight,!0);u<s?r=0:t?r=e:n&&(r=d)}return this._tableOY!==r&&(this._tableOY=r),t&&(this.execeedTopState||this.emit("execeedtop",this,r,e)),this.execeedTopState=t,n&&(this.execeedBottomState||this.emit("execeedbottom",this,r,d)),this.execeedBottomState=n,this},yY=function(r){var i=this.table,e=this.leftTableOX,d=this.rightTableOX,t=r>this.leftTableOX,n=r<this.rightTableOX;if(this.clampTableOXY){var u=i.colCount,s=i.widthToColIndex(this.instWidth,!0);u<s?r=0:t?r=e:n&&(r=d)}return this._tableOX!==r&&(this._tableOX=r),t&&(this.execeedLeftState||this.emit("execeedleft",this,r,e)),this.execeedLeftState=t,n&&(this.execeedRightState||this.emit("execeedright",this,r,d)),this.execeedRightState=n,this},RT=function(r){return r.hasOwnProperty("geometryMask")?r.geometryMask:r.bitmapMask},TY=Phaser.Geom.Intersects.RectangleToRectangle,CY=Phaser.Geom.Rectangle.Overlaps,AY=function(r,i,e){if(!!i){e===void 0&&(e=r.getAllChildren());for(var d=r.getBounds(),t=RT(i),n,u,s,o=0,h=e.length;o<h;o++)if(n=e[o],!n.hasOwnProperty("isRexContainerLite")&&n!==t&&!!SY(n))if(n.getBounds)switch(u=n.getBounds(u),s=EY(d,u),s){case 4:PY(r,n);break;case 0:TY(d,u)||CY(d,u)?vv(r,n,i):MY(r,n);break;default:vv(r,n,i);break}else vv(r,n,i)}},SY=function(r){for(;;){var i=r.rexContainer;if(i)if(i.visible){var e=i.parent;if(e){r=e;continue}else return!0}else return!1;else return r.visible}},EY=function(r,i){var e=0,d=i.top,t=i.bottom,n=i.left,u=i.right;return e+=r.contains(n,d)?1:0,e+=r.contains(n,t)?1:0,e+=r.contains(u,d)?1:0,e+=r.contains(u,t)?1:0,e},PY=function(r,i,e){r.setChildMaskVisible(i,!0),i.clearMask&&i.clearMask()},vv=function(r,i,e){r.setChildMaskVisible(i,!0),i.setMask&&i.setMask(e)},MY=function(r,i,e){r.setChildMaskVisible(i,!1),i.clearMask&&i.clearMask()},cv=Phaser.Utils.Objects.GetValue,RY={update:0,everyTick:1},OT={setupChildrenMask(r){return r===!1?this:(this.setMaskUpdateMode(cv(r,"updateMode",0)),this.enableChildrenMask(cv(r,"padding",0)),this.setMaskLayer(cv(r,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(r){return typeof r=="string"&&(r=RY[r]),this.maskUpdateMode=r,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(r){var i=io.call(this,null,this,0,r);return this.childrenMask=i.createGeometryMask(),this},setMaskChildrenFlag(r){return r===void 0&&(r=!0),this.maskChildrenFlag=r,this},setMaskLayer(r){return this.maskLayer=r,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):AY(this,this.childrenMask,this.getAllChildren(),this.maskLayer),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var r=RT(this.childrenMask);return r.setPosition().resize(),this.resetChildPositionState(r),this}},LT=function(r){if(this.emit("cellinvisible",r),this.cellContainersPool){var i=r.popContainer();i&&this.cellContainersPool.killAndHide(i)}r.destroyContainer()},FT=function(){var r=this.preVisibleCells,i=this.visibleCells;r.iterate(function(e){i.contains(e)||LT.call(this,e)},this)},IT=function(r){var i=null,e=r.getContainer();if(e?(i=e,r.popContainer()):this.cellContainersPool&&(i=this.cellContainersPool.getFirstDead(),i!==null&&i.setActive(!0).setVisible(!0)),this.emit("cellvisible",r,i,this),this.cellContainersPool){var e=r.getContainer();e?i===null?this.cellContainersPool.add(e):i!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(i)):i!==null&&this.cellContainersPool.killAndHide(i)}},FY=function(){if(this.cellsCount!==0){var r=this.table,i=r.heightToRowIndex(-this.tableOY);i<=0&&(i=0);var e=i,d=r.widthToColIndex(-this.tableOX);d<=0&&(d=0);for(var t=d,n=r.colRowToCellIndex(t,e),u=this.bottomBound,s=this.rightBound,o=r.cellsCount-1,h=r.colCount-1,a=OY.call(this,t),l=a,c=LY.call(this,e);c<u&&n<=o;){if(this.table.isValidCellIdx(n)){var f=r.getCell(n,!0);this.visibleCells.set(f),this.preVisibleCells.contains(f)||IT.call(this,f),this.scrollMode===0?f.setXY(l,c):f.setXY(c,l)}l<s&&t<h?(l+=r.getColWidth(t),t+=1):(l=a,c+=r.getRowHeight(e),t=d,e+=1),n=r.colRowToCellIndex(t,e)}}},OY=function(r){var i=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,r-1)+i;return e},LY=function(r){var i=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,r-1)+i;return e},IY=function(r){return r===void 0&&(r=!1),r&&(wT.call(this),FT.call(this)),wT.call(this),FY.call(this),FT.call(this),this.setMaskChildrenFlag(),this},wT=function(){var r=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=r,this.visibleCells.clear()},wY=function(r){var i=this.table.getCell(r,!1);return i&&this.visibleCells.contains(i)},DT=function(r,i){i-=this.y+this.topLeftY,r-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?i:r),d=this.tableOX-(this.scrollMode===0?r:i),t=this.table,n=t.heightToRowIndex(-e),u=t.widthToColIndex(-d),s=t.colRowToCellIndex(u,n);return s===null||!this.isCellVisible(s)?null:s},DY=function(r,i){var e=DT.call(this,r,i);if(e!==null)return this.getCellContainer(e)},BY=function(r,i){return this.visibleCells.each(r,i),this},GY=function(r,i){return this.visibleCells.iterate(r,i),this},NY=function(r,i){return this.table.cells.slice().forEach(r,i),this},bY=function(r,i){return this.table.cells.forEach(r,i),this},zY=function(r){var i=this.cellsCount;return i===r?this:(i>r?this.removeCells(r,i-r):this.insertNewCells(i,r-i),this)},YY=Phaser.Math.Clamp,UY=function(r,i){return typeof r=="object"&&(r=r.index),i===void 0&&(i=1),i<=0?this:(r=YY(r,0,this.cellsCount),this.table.insertNewCells(r,i),this)},VY=function(r,i){if(typeof r=="object"&&(r=r.index),i===void 0&&(i=1),r<0&&(i+=r,r=0),i<=0)return this;if(r>this.cellsCount)return this;for(var e,d=r,t=r+i;d<t;d++)e=this.getCell(d,!1),e&&(this.visibleCells.contains(e)&&(LT.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(r,i),this},WY=function(r){return this.table.colCount===r?this:(this.table.setColumnCount(r),this)},XY=function(r,i){return this.setCellsCount(r*i),this.table.setColumnCount(r),this},HY=function(r){var i=this.table.getCell(r,!1);return!i||!i.container?this:(IT.call(this,i),this)},BT={setTableOY:xY,setTableOX:yY,updateTable:IY,isCellVisible:wY,pointToCellIndex:DT,pointToCellContainer:DY,eachVisibleCell:BY,iterateVisibleCell:GY,eachCell:NY,iterateCell:bY,setCellsCount:zY,insertNewCells:UY,removeCells:VY,setColumnCount:WY,setGridSize:XY,updateVisibleCell:HY};Object.assign(BT,OT);var $Y=Phaser.GameObjects.Group,GT=Phaser.Structs.Set,zi=Phaser.Utils.Objects.GetValue,pv=class extends ii{constructor(i,e,d,t,n,u){u===void 0&&(u={}),super(i,e,d,t,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new GT,this.preVisibleCells=new GT,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var s=zi(u,"reuseCellContainer",!1);s&&(this.cellContainersPool=new $Y(i));var o=zi(u,"cellVisibleCallback",null);if(o!==null){var h=zi(u,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,h)}if(o=zi(u,"cellInvisibleCallback",null),o!==null){var h=zi(u,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",o,h)}if(this.setupChildrenMask(zi(u,"mask",void 0)),this.setScrollMode(zi(u,"scrollMode",0)),this.setClampMode(zi(u,"clamplTableOXY",!0)),this.scrollMode===0){var a=zi(u,"cellWidth",void 0);if(this.expandCellSize=a===void 0,a===void 0){var l=zi(u,"columns",1);u.cellWidth=this.width/l}}else{var a=zi(u,"cellHeight",void 0),c=zi(u,"cellWidth",void 0);this.expandCellSize=a===void 0,u.cellWidth=a,u.cellHeight=c}this.table=new AT(this,u),this.updateTable()}destroy(i){!this.scene||(this.destroyChildrenMask(),this.table.destroy(i),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=KY[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampTableOXY=i,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(i){this.setTableOY(i).updateTable()}set tableOX(i){this.setTableOX(i).updateTable()}setTableOXY(i,e){return this.setTableOY(e).setTableOX(i),this}addTableOY(i){return this.setTableOY(this.tableOY+i),this}addTableOX(i){return this.setTableOX(this.tableOX+i),this}addTableOXY(i,e){return this.addTableOY(e).addTableOX(i),this}setTableOYByPercentage(i){return this.setTableOY(-this.tableVisibleHeight*i),this}getTableOYPercentage(){var i=this.tableVisibleHeight;return i===0?0:this.tableOY/-i}set t(i){this.setTableOYByPercentage(i).updateTable()}get t(){return this.getTableOYPercentage()}getCell(i){return this.table.getCell(i,!0)}getCellContainer(i){var e=this.table.getCell(i,!1),d;return e&&(d=e.getContainer()),d}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(i,e){var d;return typeof i=="number"?d=this.table.getCell(i,!0):d=i,d.height=e,this}setCellWidth(i,e){var d;return typeof i=="number"?d=this.table.getCell(i,!0):d=i,d.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var i=this.tableHeight-this.instHeight;return i<0&&(i=0),i}get tableVisibleWidth(){var i,e=this.tableWidth,d=this.instWidth;return e>d?i=e-d:i=0,i}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(i,e){return this.width===i&&this.height===e?this:(super.resize(i,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(pv.prototype,BT);var KY={v:0,vertical:0,h:1,horizontal:1},ZY=function(r){Object.defineProperty(r,"childOY",{configurable:!0,get:function(){return r.tableOY},set:function(i){r.tableOY=i}}),Object.defineProperty(r,"topChildOY",{get:function(){return r.topTableOY}}),Object.defineProperty(r,"bottomChildOY",{get:function(){return r.bottomTableOY}}),Object.defineProperty(r,"childVisibleHeight",{get:function(){return r.instHeight}}),Object.defineProperty(r,"childHeight",{get:function(){return r.tableHeight}})},JY=function(r){r.on("cellvisible",function(i,e,d){var t=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;i.item=this.items[i.index];var e;n?e=t.call(n,i,e,d):e=t(i,e,d),e&&(e.setOrigin&&e.setOrigin(0),e.isRexSizer&&e.layout()),i.item=void 0,i.setContainer(e)},this)},Cn=function(r,i,e,d,t,n,u){var s;if(t===void 0?s=d:s=e.pointToCellIndex(d,t),s!=null){var o=e.getCellContainer(s);o&&r.emit(i,o,s,n,u)}},QY=function(r,i){r.on("pointerdown",function(e,d,t,n){Cn(this.eventEmitter,"cell.down",r,e.x,e.y,e,n)},this).on("pointerup",function(e,d,t,n){Cn(this.eventEmitter,"cell.up",r,e.x,e.y,e,n)},this)},jY=function(r,i){r.on("pointermove",NT,this).on("pointerover",NT,this).on("pointerout",kY,this)},NT=function(r,i,e,d){var t=this.childrenMap.child,n=t.pointToCellIndex(r.x,r.y);if(n!==t.input.lastOverCellIndex){var u=t.input.lastOverCellIndex;t.input.lastOverCellIndex=n,Cn(this.eventEmitter,"cell.out",t,u,void 0,r,d),Cn(this.eventEmitter,"cell.over",t,n,void 0,r,d)}},kY=function(r,i){var e=this.childrenMap.child,d=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,Cn(this.eventEmitter,"cell.out",e,d,void 0,r,i)},qY=Phaser.Utils.Objects.GetValue,_Y=function(r,i){var e=qY(i,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,r._click=new as(r,e),r._click.on("click",function(d,t,n,u){Cn(this.eventEmitter,"cell.click",t,n.x,n.y,n,u)},this))},tU=Phaser.Utils.Objects.GetValue,eU=function(r,i){var e=tU(i,"tap",void 0);e!==!1&&(r._tap=new Pr(r,e),r._tap.on("tap",function(d,t,n){var u=`cell.${d.tapsCount}tap`;Cn(this.eventEmitter,u,d.gameObject,d.x,d.y,n)},this))},iU=Phaser.Utils.Objects.GetValue,nU=function(r,i){var e=iU(i,"press",void 0);e!==!1&&(r._press=new Rr(r,e),r._press.on("pressstart",function(d,t,n){Cn(this.eventEmitter,"cell.pressstart",r,d.x,d.y,n)},this).on("pressend",function(d,t,n){Cn(this.eventEmitter,"cell.pressend",r,d.x,d.y,n)},this))},sU=Phaser.Utils.Objects.GetValue,rU=function(r,i){var e=sU(i,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",r._swipe=new Ys(r,e),r._swipe.on("swipe",function(d,t,n){var u=d.left?"left":d.right?"right":d.up?"up":"down";Cn(this.eventEmitter,`cell.swipe${u}`,r,d.x,d.y,n)},this))},aU=function(r,i){r.setInteractive(),QY.call(this,r,i),jY.call(this,r,i),_Y.call(this,r,i),eU.call(this,r,i),nU.call(this,r,i),rU.call(this,r,i)},oU=function(r){r===void 0?this.items.length=0:this.items=r;var i=this.childrenMap.child;return i.setCellsCount(this.items.length),i.updateTable(!0),this.resizeController(),this},Sn=Phaser.Utils.Objects.GetValue,lo=class extends ho{constructor(i,e){e===void 0&&(e={});var d=Gl(e),t=Sn(e,"table",void 0);t===void 0&&(t={}),t.scrollMode=d,t.clamplTableOXY=Sn(e,"clamplChildOY",!1);var n=Sn(t,"width",void 0),u=Sn(t,"height",void 0),s=new pv(i,0,0,n,u,t);i.add.existing(s);var o,h;d===0?(o=n===void 0?1:0,h=u===void 0):(o=u===void 0?1:0,h=n===void 0),ZY(s),s.minWidth=n===void 0?0:void 0,s.minHeight=u===void 0?0:void 0,e.type="rexGridTable",e.child={gameObject:s,proportion:o,expand:h};var a=Sn(e,"space",void 0);a&&(a.child=a.table),super(i,e),this.addChildrenMap("table",s),this.addChildrenMap("tableLayer",s.maskLayer),this.eventEmitter=Sn(e,"eventEmitter",this);var l=Sn(e,"createCellContainerCallback",_e),c=Sn(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(l,c),JY.call(this,s),this.resizeControllerFlag=!1;var f=d===0?"cellheightchange":"cellwidthchange";s.on(f,function(){this.resizeControllerFlag=!0},this),Sn(t,"interactive",!0)&&aU.call(this,s,t),this.setItems(Sn(e,"items",[])),i.game.events.on("poststep",this.onPostStep,this)}destroy(i){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(i))}setCreateCellContainerCallback(i,e){return this.createCellContainerCallback=i,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(i){var e=this.childrenMap.child;return e.getCell(i)}getCellContainer(i){var e=this.childrenMap.child;return e.getCellContainer(i)}updateVisibleCell(i){var e=this.childrenMap.child;return e.updateVisibleCell(i)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}},hU={setItems:oU};Object.assign(lo.prototype,hU);var lU=function(r,i){this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var d=new this.constructor(this.scene,{items:i,orientation:e,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:r});return this.pin(d),this.childrenMap.subMenu=d,this.root.emit("expand",d,r,this),this},gv=function(r,i){return r.sameOrientation?r.orientation=i.orientation:r.orientation=i.orientation===0?1:0,r},uU=function(){return this.root.emit("collapse",this,this.parentButton,this.root),this.scaleDownDestroy(gv(this.root.easeOut,this)),this.collapseSubMenu(),this},fU=function(){if(this.childrenMap.subMenu===void 0)return this;var r=this.childrenMap.subMenu;return this.childrenMap.subMenu=void 0,this.remove(r),r.collapse(),this},dU={expandSubMenu:lU,collapse:uU,collapseSubMenu:fU},vU=function(r,i,e,d){var t;return e&&(i.scene=r,d?t=e.call(d,i):t=e(i),i.scene=void 0),t},cU=function(r,i,e,d){var t,n=[],u;if(i&&e)for(var s=0,o=i.length;s<o;s++)t=i[s],t.scene=r,d?u=e.call(d,t,s,i):u=e(t,s,i),t.scene=void 0,n.push(u);return n},pU=function(r){r.on(r.root.expandEventName,function(i,e){if(!this._isPassedEvent){var d=this.items[e].children;d&&this.expandSubMenu(i,d)}},r).on("button.click",function(i,e,d,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",i,e,d,t),this.root._isPassedEvent=!1)},r).on("button.over",function(i,e,d,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",i,e,d,t),this.root._isPassedEvent=!1)},r).on("button.out",function(i,e,d,t){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",i,e,d,t),this.root._isPassedEvent=!1)},r)},En=Phaser.Utils.Objects.GetValue,uo=class extends ye{constructor(i,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var d=e._rootMenu,t=e._parentMenu,n=e._parentButton,u=En(e,"items",void 0),s=En(e,"createBackgroundCallback",void 0),o=En(e,"createBackgroundCallbackScope",void 0);e.background=vU(i,u,s,o);var h=En(e,"createButtonCallback",void 0),a=En(e,"createButtonCallbackScope",void 0);e.buttons=cU(i,u,h,a),super(i,e),this.type="rexMenu",this.items=u,this.root=d===void 0?this:d,this.parentMenu=t,this.parentButton=n;var l=this.root===this;if(l){var c=e.bounds;c===void 0&&(c=Tr(i)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?xv:Ul,this.x<c.centerX?mv:Yl];var f=En(e,"subMenuSide",void 0);f!==void 0&&(typeof f=="string"&&(f=gU[f]),this.subMenuSide[this.orientation]=f),this.toggleOrientation=En(e,"toggleOrientation",!1),this.expandEventName=En(e,"expandEvent","button.click"),this.easeIn=bT(this,En(e,"easeIn",0)),this.easeOut=bT(this,En(e,"easeOut",0)),this.createBackgroundCallback=s,this.createBackgroundCallbackScope=o,this.createButtonCallback=h,this.createButtonCallbackScope=a,this._isPassedEvent=!1}var v=0,p=0;if(!this.root.easeIn.sameOrientation){var g=gv(this.root.easeIn,this).orientation,m=t?t.orientation:this.orientation,f=this.root.subMenuSide[m];g===0&&f===Yl&&(v=1),g===1&&f===Ul&&(p=1)}if(this.setOrigin(v,p).layout(),!l){this.setScale(this.root.scaleX,this.root.scaleY);var f=this.root.subMenuSide[t.orientation];switch(f){case Yl:this.alignTop(n.top).alignRight(n.left);break;case mv:this.alignTop(n.top).alignLeft(n.right);break;case Ul:this.alignLeft(n.left).alignBottom(n.top);break;case xv:this.alignLeft(n.left).alignTop(n.bottom);break}}this.pushIntoBounds(this.root.bounds),pU(this),this.popUp(gv(this.root.easeIn,this)),this.once("popup.complete",function(){this!==this.root&&this.root.emit("popup.complete",this)},this)}isInTouching(i){return super.isInTouching(i)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(i):!1}},bT=function(r,i){return typeof i=="number"&&(i={duration:i}),i.hasOwnProperty("orientation")&&i.orientation!==void 0?i.sameOrientation=_d(i.orientation)===r.orientation:i.sameOrientation=!0,i},Yl=2,mv=0,Ul=3,xv=1,gU={up:Ul,down:xv,left:Yl,right:mv};Object.assign(uo.prototype,dU);var mU={setWrapEnable(r){return r===void 0&&(r=!0),this.listWrapEnable=r,this},setCreateButtonCallback(r){return this.listCreateButtonCallback=r,this},setCreateBackgroundCallback(r){return this.listCreateBackgroundCallback=r,this},setButtonClickCallback(r){return this.listOnButtonClick=r,this},setButtonOverCallback(r){return this.listOnButtonOver=r,this},setButtonOutCallback(r){return this.listOnButtonOut=r,this},setListEaseOutDuration(r){return r===void 0&&(r=0),this.listEaseOutDuration=r,this},setListBounds(r){return this.listBounds=r,this},setListWidth(r){return this.listWidth=r,this},setListHeight(r){return this.listHeight=r,this},setListSize(r,i){return this.setListWidth(r).setListHeight(i),this},setListAlignmentMode(r){return this.listAlignMode=r,this},setListEaseInDuration(r){return r===void 0&&(r=0),this.listEaseInDuration=r,this},setListSpace(r){return r===void 0&&(r={}),this.listSpace=r,this},setListDraggable(r){return r===void 0&&(r=!0),this.listDraggable=r,this}},xU=function(r){var i,e=this.listCreateBackgroundCallback;e&&(i=e.call(this,r),r.add.existing(i));var d=[],t=this.listCreateButtonCallback;if(t)for(var n=this.options,u=0,s=n.length;u<s;u++){var o=t.call(this,r,n[u],u,n);r.add.existing(o),d.push(o)}var h=this.listWidth;h===void 0&&(this.listAlignMode==="text"?h=this.getElement("text").width:h=this.width);var a=this.listHeight,l;return this.listWrapEnable?l=new yn(r,{width:h,height:a,background:i,buttons:d,space:this.listSpace,draggable:this.listDraggable}):l=new ye(r,{width:h,height:a,orientation:"y",background:i,buttons:d,space:this.listSpace,draggable:this.listDraggable}),r.add.existing(l),l},yU=function(){if(this.listPanel)return this;var r=this.scene,i=xU.call(this,r).setOrigin(0,0).layout(),e=this.getElement(this.listAlignMode).getTopLeft().x;i.setPosition(e,this.bottom);var d=this.listBounds;d||(d=Tr(r)),i.bottom>d.bottom&&i.changeOrigin(0,1).setPosition(e,this.top);var t=this.listOnButtonOver;t&&i.on("button.over",t,this);var n=this.listOnButtonOut;return n&&i.on("button.out",n,this),i.popUp(this.listEaseInDuration,"y","Cubic").once("popup.complete",function(u){var s=this.listOnButtonClick;s&&u.on("button.click",function(o,h,a,l){s.call(this,o,h,a,l),this.emit("list.click",this,u,o,h,a,l)},this),r.input.once("pointerup",this.closeListPanel,this),this.emit("list.open",this,u)},this),this.pin(i),this.listPanel=i,this},TU=function(){if(!this.listPanel)return this;var r=this.listPanel;return this.listPanel=void 0,r.scaleDownDestroy(this.listEaseOutDuration,"y","Linear").once("scaledown.complete",function(){this.emit("list.close",this,r)},this),this},CU=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},zT={openListPanel:yU,closeListPanel:TU,toggleListPanel:CU};Object.assign(zT,mU);var Te=Phaser.Utils.Objects.GetValue,fo=class extends nn{constructor(i,e){super(i,e);this.type="rexDropDownList",this.setOptions(Te(e,"options"));var d=Te(e,"list");this.setWrapEnable(Te(d,"wrap",!1)),this.setCreateButtonCallback(Te(d,"createButtonCallback")),this.setCreateBackgroundCallback(Te(d,"createBackgroundCallback")),this.setButtonClickCallback(Te(d,"onButtonClick")),this.setButtonOverCallback(Te(d,"onButtonOver")),this.setButtonOutCallback(Te(d,"onButtonOut")),this.setListEaseInDuration(Te(d,"easeIn",500)),this.setListEaseOutDuration(Te(d,"easeOut",100)),this.setListSize(Te(d,"width"),Te(d,"height")),this.setListAlignmentMode(Te(d,"alignParent","text")),this.setListBounds(Te(d,"bounds")),this.setListSpace(Te(d,"space")),this.setListDraggable(Te(d,"draggable",!1)),this.setValueChangeCallback(Te(e,"setValueCallback"),Te(e,"setValueCallbackScope")),this.setValue(Te(e,"value")),this.onClick(this.toggleListPanel,this)}destroy(i){!this.scene||(this.listPanel&&(this.listPanel.destroy(i),this.listPanel=void 0),super.destroy(i))}setOptions(i){return i===void 0&&(i=[]),this.options=i,this}setValueChangeCallback(i,e){return this.valueChangeCallback=i,this.valueChangeCallbackScope=e,this}setValue(i){return this.value=i,this}get value(){return this._value}set value(i){if(this._value!==i){var e=this._value;this._value=i;var d=this.valueChangeCallback,t=this.valueChangeCallbackScope;d&&(t?d.call(t,this,i,e):d(this,i,e))}}};Object.assign(fo.prototype,zT);var SU=Phaser.GameObjects.Text,Vl=function(r){return r instanceof SU},EU=Phaser.GameObjects.BitmapText,yv=function(r){return r instanceof EU},Si=0,Yi=1,Ui=2,vo=function(r){var i;return yv(r)?i=Ui:Vl(r)?i=Si:i=Yi,i},Tv=function(r,i,e){var d=vo(r);switch(d){case Si:e=r.getWrappedText(i);break;case Yi:e=r.getPenManager(i,e);break;case Ui:r.maxWidth>0?e=r.setText(i).getTextBounds().wrappedText.split(`
`):e=i.split(`
`);break}return e},PU=function(r,i){r===void 0&&(r=this.startLineIndex),i===void 0&&(i=r+this.pageLinesCount);var e;switch(this.textObjectType){case Si:case Ui:e=this.lines.slice(r,i).join(`
`);break;case Yi:var d=this.lines.getLineStartIndex(r),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(d,t,!0);break}return e},Cv=function(r){return Array.isArray(r)?r=r.join(`
`):typeof r=="number"&&(r=r.toString()),r},MU={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(r){var i=this.totalLinesCount;this.sections.push(Cv(r));var r=this.sections.join(`
`);this.lines=Tv(this.parent,r,this.lines);for(var e=this.totalLinesCount-i,d=Math.ceil(e/this.pageLinesCount),t=0;t<d;t++)this.pageStartIndexes.push(i+t*this.pageLinesCount);return this},setText(r,i){i===void 0&&(i=!0),i&&this.resetPageIdx(),this.clearText();for(var e=Cv(r).split(this.pageBreak),d=0,t=e.length;d<t;d++)this.appendPage(e[d]);return this},appendText(r){var i=this.content+Cv(r);return this.setText(i,!1),this}},AU=Phaser.Math.Clamp,RU={getPage(r){return r===void 0&&(r=this.pageIndex),this.setPageIndex(r).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(r){return r=AU(r,0,this.pageCount-1),this.pageIndex=r,this.startLineIndex=this.pageStartIndexes[r],this.endLineIndex=this.pageStartIndexes[r+1],this}},Sv=function(r,i){var e=vo(r);switch(e){case Si:var d=r.style,t=d.wordWrapWidth,n=d.wordWrapCallback;d.wordWrapWidth=0,d.wordWrapCallback=void 0,r.setText(i),d.wordWrapWidth=t,d.wordWrapCallback=n;break;case Yi:var d=r.style,u=d.wrapMode;d.wrapMode=0,r.setText(i),d.wrapMode=u;break;case Ui:var s=r._maxWidth;r._maxWidth=0,r.setText(i),r._maxWidth=s;break}},OU={showPage(r){return this.displayText(this.getPage(r)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(r){Sv(this.parent,r)}},YT={getLines:PU};Object.assign(YT,MU,RU,OU);var co=Phaser.Utils.Objects.GetValue,LU=Phaser.Math.Clamp,Ev=class extends Me{constructor(i,e){super(i,{eventEmitter:!1});this.textObjectType=vo(this.parent),this.pageStartIndexes=[],this.lines=Tv(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(i){return this.setMaxLines(co(i,"maxLines",void 0)),this.setPageBreak(co(i,"pageBreak",`\f
`)),this.setText(co(i,"text","")),this.setStartLineIndex(co(i,"start",0)),this.setPageIndex(co(i,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(i){if(!this.isShutdown){switch(this.textObjectType){case Si:this.lines.length=0;break;case Yi:this.lines.destroy();break;case Ui:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(i)}}setMaxLines(i){return this.maxLines=i,this}setPageBreak(i){return this.pageBreak=i,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(i){i=LU(i,0,this.totalLinesCount-1),this._startLineIndex=i}setStartLineIndex(i){return this.startLineIndex=i,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var i;switch(this.textObjectType){case Si:case Yi:var e=this.parent.style.maxLines;e>0?i=e:i=this.totalLinesCount;break;case Ui:i=this.totalLinesCount;break}return i}get content(){return this.sections.join(this.pageBreak)}};Object.assign(Ev.prototype,YT);var FU=function(r,i){var e=vo(r);switch(e){case Si:r.style.syncFont(r.canvas,r.context),i=r.runWordWrap(i);break;case Yi:i=r.getText(i,void 0,void 0,!0);break;case Ui:i=r.setText(i).getTextBounds().wrappedText;break}return i},Gr=Phaser.Utils.Objects.GetFastValue,Pv=Phaser.Utils.Objects.GetValue,UT=class extends Me{constructor(i,e){super(i,e);this.timer=null,this.resetFromJSON(e)}resetFromJSON(i){this.setTextWrapEnable(Pv(i,"wrap",!1)),this.setTypeMode(Pv(i,"typeMode",0)),this.setTypeSpeed(Pv(i,"speed",333)),this.setTextCallback=Gr(i,"setTextCallback",null),this.setTextCallbackScope=Gr(i,"setTextCallbackScope",null),this.setTypingContent(Gr(i,"text","")),this.typingIdx=Gr(i,"typingIdx",0),this.insertIdx=Gr(i,"insertIdx",null);var e=Gr(i,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(i){this.isShutdown||(this.freeTimer(),super.shutdown(i))}setTypeMode(i){return typeof i=="string"&&(i=IU[i]),this.typeMode=i,this}setTypeSpeed(i){return this.speed=i,this}setTextWrapEnable(i){return i===void 0&&(i=!0),this.textWrapEnable=i,this}set text(i){var e=VT(i);this.textWrapEnable&&(e=FU(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(i,e,d,t){return i!==void 0&&this.setTypingContent(i),e!==void 0&&(this.speed=e),d===void 0&&(d=0),this.typingIdx=d+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(t)),this}appendText(i){var e=this.text.concat(VT(i));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(i){var e=this.getTimer();return e&&this.freeTimer(),i&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var i=this.getTimer();return i&&(i.paused=!0),this}resume(){var i=this.getTimer();return i&&(i.paused=!1),this}setTypingContent(i){return this.text=i,this.textLen=this.getTextLength(this.text),this}onTyping(){var i=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(i),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(i,e,d,t){var n;if(t===0){var u=0,s=e;this.insertIdx=s,n=this.getSubString(i,u,s)}else if(t===1){var s=d,u=s-e;this.insertIdx=0,n=this.getSubString(i,u,s)}else if(t===2){var o=d/2,u=Math.floor(o-e/2),s=u+e;this.insertIdx=e%2?e:0,n=this.getSubString(i,u,s)}else if(t===3){var h=Math.floor(e/2),a;if(h>0){var s=d,u=s-h;a=this.getSubString(i,u,s)}else a="";var l=e-h,c;if(l>0){var u=0,s=u+l;this.insertIdx=s,c=this.getSubString(i,u,s)}else c="",this.insertIdx=0;n=c+a}return n}startTimer(i){this.timer&&this.freeTimer();var e;return i===void 0?e=0:(this.speed,e=i),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(i){this.setTextCallback&&(this.setTextCallbackScope?i=this.setTextCallback.call(this.setTextCallbackScope,i,this.isLastChar,this.insertIdx):i=this.setTextCallback(i,this.isLastChar,this.insertIdx)),this.textWrapEnable?Sv(this.parent,i):this.parent.setText(i)}getTextLength(i){var e=this.parent,d;return e.getPlainText?d=e.getPlainText(i).length:d=i.length,d}getSubString(i,e,d){var t=this.parent,n;return t.getSubString?n=t.getSubString(i,e,d):n=i.slice(e,d),n}},VT=function(r){return Array.isArray(r)?r=r.join(`
`):typeof r=="number"&&(r=r.toString()),r},IU={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},WT=Phaser.Utils.Objects.GetValue,po=class extends nn{constructor(i,e){e===void 0&&(e={text:wU(i)}),super(i,e),this.type="rexTextBox";var d=this.childrenMap.text;this.page=new Ev(d,WT(e,"page",void 0)),this.typing=new UT(d,WT(e,"typing",e.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=d.width,this.textHeight=d.height}start(i,e){return this.page.setText(i),e!==void 0&&this.setTypeSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var i=this.page.getNextPage();this.typing.start(i)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(i){return this.typing.stop(i),this}setTypeSpeed(i){return this.typing.setTypeSpeed(i),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var i=this.childrenMap.text;(this.textWidth!==i.width||this.textHeight!==i.height)&&(this.textWidth=i.width,this.textHeight=i.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}},wU=function(r){return r.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})},Ei=Phaser.Utils.Objects.GetValue,go=class extends ne{constructor(i,e){super(i,e);this.type="rexNumberBar";var d=Ei(e,"background",void 0),t=Ei(e,"icon",void 0),n=Ei(e,"iconMask",void 0),u=Ei(e,"slider",void 0),s=Ei(e,"text",void 0),o=Ei(e,"space.icon",0),h=Ei(e,"space.slider",0);if(d&&this.addBackground(d),t){var a;this.orientation===0?(u||s)&&(a={right:o}):(u||s)&&(a={bottom:o}),this.add(t,{proportion:0,align:"center",padding:a}),n&&(n=io.call(this,t,t,1))}var l;if(u){u.orientation=this.orientation,u.eventEmitter=this,u.value=null,u.hasOwnProperty("input")||(u.input=-1),l=new fs(i,u),i.add.existing(l);var a;this.orientation===0?s&&(a={right:h}):s&&(a={bottom:h});var c;if(this.orientation===0){var f=Ei(u,"width",void 0);c=f===void 0?1:0}else{var v=Ei(u,"height",void 0);c=v===void 0?1:0}this.add(l,{proportion:c,align:"center",padding:a})}s&&this.add(s),this.addChildrenMap("background",d),this.addChildrenMap("icon",t),this.addChildrenMap("iconMask",n),this.addChildrenMap("slider",l),this.addChildrenMap("text",s);var p=Ei(e,"valuechangeCallback",null);if(p!==null){var g=Ei(e,"valuechangeCallbackScope",void 0);this.on("valuechange",p,g)}this.setEnable(Ei(e,"enable",void 0)),this.setValue(Ei(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(i){this.childrenMap.slider&&this.childrenMap.slider.setEnable(i)}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(i){!this.childrenMap.slider||(this.childrenMap.slider.value=i)}setValue(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.setValue(i,e,d),this}addValue(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.addValue(i,e,d),this}getValue(i,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(i,e):0}easeValueTo(i,e,d){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(i,e,d),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(i),this}setEaseValueFunction(i){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(i),this}get text(){var i=this.childrenMap.text;if(i===void 0)return"";var e;return i.text?e=i.text:e=i.getData("text"),e}set text(i){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(i):e.setData("text",i))}setText(i){return this.text=i,this}},Mv=Phaser.Utils.Objects.GetValue,XT={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"},mo=class extends qi{constructor(i,e){super(i,e);this.type="rexBadge";var d=Mv(e,"background",void 0);d&&this.addBackground(d),this.addChildrenMap("background",d);var t=Mv(e,"main",void 0);t&&this.add(t,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",t);for(var n in XT){var u=Mv(e,n,void 0);u&&(this.add(u,{key:n,align:XT[n],expand:!1}),this.addChildrenMap(n,u))}}},DU=qi.prototype.add,HT=function(r,i,e,d,t,n,u,s,o){return r.setVisible(!1),DU.call(this,r,i,e,d,t,n,u,s,o),this},BU={add:HT,addPage:HT},GU=function(r){return r===void 0?null:this.sizerChildren.hasOwnProperty(r)?this.sizerChildren[r]:null},$T=ii.prototype.setChildVisible,NU=function(r){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?($T.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),r&&!this.sizerChildren.hasOwnProperty(r)&&this.emit("createpage",r,this),this._currentKey=r;var e=this.currentPage;return e&&($T.call(this,e,!0),this.emit("pagevisible",e,this._currentKey,this),this.fadeInDuration>0&&e.setAlpha(0).fadeIn(this.fadeInDuration,1)),this},bU=function(r){return this.sizerChildren.hasOwnProperty(r)},KT={getPage:GU,swapPage:NU,hasPage:bU};Object.assign(KT,BU);var ZT=Phaser.Utils.Objects.GetValue,Ws=class extends qi{constructor(i,e){super(i,e);this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(ZT(e,"swapMode",0)),this.setFadeInDuration(ZT(e,"fadeIn",0))}setSwapMode(i){return typeof i=="string"&&(i=zU[i]),this.swapMode=i,this}setFadeInDuration(i){return this.fadeInDuration=i,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(i){this.swapPage(i)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}};Object.assign(Ws.prototype,KT);var zU={invisible:0,destroy:1},YU=function(r){var i=this.getElement("tabs.buttons");if(!(r>=i.length))return i[r].name},UU=function(r){for(var i=this.getElement("tabs.buttons"),e=0,d=i.length;e<d;e++)if(i[e].name===r)return e},VU=Phaser.Utils.Objects.IsPlainObject,Av=Phaser.Utils.Objects.GetValue,WU=Phaser.Utils.String.UUID,XU=function(r,i,e){if(VU(r)){var d=r;r=Av(d,"key"),i=Av(d,"tab"),e=Av(d,"page")}return r||(r=WU()),i.name=r,this.childrenMap.tabs.addButton(i),this.childrenMap.pages.addPage(e,{key:r}),this},HU=function(r){var i;return typeof r=="number"?i=r:i=this.getPageIndex(r),i!=null&&this.childrenMap.tabs.emitButtonClick(i),this},$U=function(){return this.swapPage(0),this},KU=function(){return this.swapPage(this.getElement("tabs.buttons").length-1),this},ZU={swapPage:HU,swapFirstPage:$U,swapLastPage:KU},JU=function(r,i){typeof r=="number"&&(r=this.getPageKey(r));var e=this.childrenMap.tabs,d=e.getByName(r),t=this.childrenMap.pages,n=t.getElement(r);return!d||!n?this:(t.removeChildrenMap(r),e.removeButton(d,i),t.remove(n,i),this)},QU={removePage:JU},kU=function(r){return typeof r=="number"&&(r=this.getPageKey(r)),this.childrenMap.pages.getPage(r)},jU=function(r){var i;return typeof r=="number"?i=r:i=this.getPageIndex(r),this.getElement("tabs.buttons")[i]},JT={getPageKey:YU,getPageIndex:UU,addPage:XU,getPage:kU,getTab:jU};Object.assign(JT,ZU,QU);var Xs=Phaser.Utils.Objects.GetValue,Wl=ne.prototype.add,xo=class extends ne{constructor(i,e){e===void 0&&(e={});var d=Xs(e,"tabPosition","top"),t=d==="left"||d==="right"?"x":"y";e.orientation=t,super(i,e),this.type="rexTabPages";var n=Xs(e,"background",void 0);n&&this.addBackground(n);var u=Xs(e,"pages"),s=new Ws(i,u);i.add.existing(s);var o=t==="y",h=o?Xs(e,"wrapTabs",!1):!1,a=Xs(e,"tabs",void 0);a===void 0&&(a={});var l=h?yn:ye;a.orientation=o?"x":"y",a.buttonsType="radio";var c=new l(i,a);i.add.existing(c);var f=h?!0:Xs(e,"expand.tabs",!1),v=Xs(e,"align.tabs","left");switch(d){case"top":case"left":Wl.call(this,c,{proportion:0,expand:f,align:v}),Wl.call(this,s,{proportion:1,expand:!0});break;case"bottom":case"right":Wl.call(this,s,{proportion:1,expand:!0}),Wl.call(this,c,{proportion:0,expand:f,align:v});break}this.addChildrenMap("background",n),this.addChildrenMap("tabs",c),this.addChildrenMap("pages",s),c.on("button.click",function(p){var g=p.name;s.hasPage(g)&&s.swapPage(g)}),c.on("button.statechange",function(p,g,m,x){var y=m?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),s.on("pagevisible",function(p,g,m){this.emit("page.focus",p,g)}),s.on("pageinvisible",function(p,g,m){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(i){this.showPage(i)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(xo.prototype,JT);var qU=function(r){return r!==void 0&&(this.text=r),this.lines=Tv(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},QT=function(r){return(r-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},kT=function(r){return r*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},_U=function(r){var i=r+this.visibleLinesCount+1,e;switch(this.textObjectType){case Si:e=this.lines.slice(r,i).join(`
`);break;case Yi:var d=this.lines.getLineStartIndex(r),t=this.lines.getLineEndIndex(i-1);e=this.lines.getSliceTagText(d,t,!0);break;case Ui:e=this.lines.slice(r,i).join(`
`);break}return e},jT=function(){var r=this.textObject.rexSizer;this.textObject.y+=r.offsetY-r.preOffsetY,r.preOffsetY=r.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&tV.call(this)},tV=function(){if(!!this.textObject.setCrop){var r=this.textObject.rexSizer.offsetY,i,e;r<=0?(i=-r,e=this.height):(i=0,e=this.height-r),this.textObject.setCrop(0,i,this.width,e)}},eV=function(){var r=Math.max(Math.floor(QT.call(this,-this.textOY)),0),i=kT.call(this,r)+this.textOY,e=_U.call(this,r);return Sv(this.textObject,e),this.textObject.rexSizer.offsetY=i,jT.call(this),this},iV=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,wa.call(this),this},nV=function(r,i,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===i&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=i,this._textObjectRealHeight=e,this.textObjectType){case Si:case Yi:r.setFixedSize(i,e);var d=r.style,t=Math.max(i,0);this.textObjectType===Si?d.wordWrapWidth=t:(d.wrapMode===0&&(d.wrapMode=1),d.wrapWidth=t);break;case Ui:r.setMaxWidth(i);break}this.setText()}},sV=function(){var r,i,e,d=this.left,t=this.top,n,u,s,o;r=this.textObject,r.rexSizer.hidden||(i=r.rexSizer,e=i.padding,n=d+e.left,u=t+e.top,s=this.width-e.left-e.right,o=this.height-e.top-e.bottom,nV.call(this,r,s,o),al(r,n,u,s,o,i.align),i.preOffsetY=0,jT.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},rV={setText:qU,updateTextObject:eV,preLayout:iV,layoutChildren:sV},qT=Phaser.Utils.Objects.IsPlainObject,Pi=Phaser.Utils.Objects.GetValue,aV=Phaser.Display.Align.TOP_LEFT,Rv=class extends hs{constructor(i,e,d,t,n,u){qT(e)?(u=e,e=Pi(u,"x",0),d=Pi(u,"y",0),t=Pi(u,"width",void 0),n=Pi(u,"height",void 0)):qT(t)&&(u=t,t=Pi(u,"width",void 0),n=Pi(u,"height",void 0)),super(i,e,d,t,n,u),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Pi(u,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Pi(u,"clamplTextOY",!0)),this.alwaysScrollable=Pi(u,"alwaysScrollable",!1);var s=Pi(u,"background",void 0),o=Pi(u,"text",void 0);o===void 0&&(o=oV(i)),this.textCropEnable=Pi(u,"textCrop",!!o.setCrop);var h=Pi(u,"textMask",!this.textCropEnable);s&&this.addBackground(s),this.add(o),this.sizerChildren=[o];var a=this.getSizerConfig(o);a.align=aV,a.padding=Cr(0),a.expand=!0,this.textObject=o,this.textObjectType=vo(o),a.preOffsetY=0,a.offsetY=0,h&&(this.textMask=io.call(this,this.textObject,this)),this.addChildrenMap("background",s),this.addChildrenMap("text",o)}destroy(i){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Si:this.lines.length=0;break;case Yi:this.lines.destroy();break;case Ui:this.lines.length=0;break}this.lines=void 0}super.destroy(i)}}setClampMode(i){return i===void 0&&(i=!0),this.clampTextOY=i,this}get textLineHeight(){if(this._textLineHeight===void 0){var i;switch(this.textObjectType){case Si:case Yi:var e=this.textObject.style;i=e.metrics.fontSize+e.strokeThickness;break;case Ui:var d=this.textObject.fontSize/this.textObject.fontData.size;i=this.textObject.fontData.lineHeight*d;break}this._textLineHeight=i}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var i;switch(this.textObjectType){case Si:case Yi:i=this.textObject.lineSpacing;break;case Ui:i=0;break}this._textLineSpacing=i}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(QT.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=kT.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var i=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&i<0&&(i=0),this._textVisibleHeight=i}return this._textVisibleHeight}textOYExceedTop(i){return i===void 0&&(i=this.textOY),i>this.topTextOY}textOYExeceedBottom(i){return i===void 0&&(i=this.textOY),i<this.bottomTextOY}get textOY(){return this._textOY}set textOY(i){var e=this.topTextOY,d=this.bottomTextOY,t=this.textOYExceedTop(i),n=this.textOYExeceedBottom(i);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?i=0:t?i=e:n&&(i=d)),this._textOY!==i&&(this._textOY=i,this.updateTextObject()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,n&&(this.execeedBottomState||this.emit("execeedbottom",this,i,d)),this.execeedBottomState=n}setTextOY(i){return this.textOY=i,this}set t(i){this.textOY=-this.textVisibleHeight*i}get t(){var i=this.textVisibleHeight;return i===0?0:this.textOY/-i}setTextOYByPercentage(i){return this.t=i,this}},oV=function(r){return r.add.text(0,0,"")};Object.assign(Rv.prototype,rV);var hV=function(r){Object.defineProperty(r,"childOY",{configurable:!0,get:function(){return r.textOY},set:function(i){r.textOY=i}}),Object.defineProperty(r,"topChildOY",{get:function(){return r.topTextOY}}),Object.defineProperty(r,"bottomChildOY",{get:function(){return r.bottomTextOY}}),Object.defineProperty(r,"childVisibleHeight",{get:function(){return r.textObjectHeight}}),Object.defineProperty(r,"childHeight",{get:function(){return r.textHeight}})},lV=function(r){var i=this.childrenMap.child;return i.setText(r),this.resizeController(),this},uV=function(r){return this.setText(this.text+r),this},Yn=Phaser.Utils.Objects.GetValue,Nr=class extends ho{constructor(i,e){e===void 0&&(e={});var d=Yn(e,"text",void 0),t=Yn(e,"textWidth",void 0),n=Yn(e,"textHeight",void 0),u=Yn(e,"textCrop",!!d.setCrop),s=Yn(e,"textMask",!u),o=Yn(e,"content",""),h=new Rv(i,{width:t,height:n,text:d,textMask:s,textCrop:u&&!s,content:o,clamplTextOY:Yn(e,"clamplChildOY",!1),alwaysScrollable:Yn(e,"alwaysScrollable",!1)});i.add.existing(h);var a=t===void 0?1:0,l=n===void 0;hV(h),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:h,proportion:a,expand:l};var c=Yn(e,"space",void 0);c&&(c.child=c.text),super(i,e),this.addChildrenMap("text",d)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}},fV={setText:lV,appendText:uV};Object.assign(Nr.prototype,fV);var dV=function(){if(this.rexSizer.hidden)return 0;var r,i=this.child,e=i.rexSizer;return e.hidden?r=0:this.scrollMode===0?r=this.getChildWidth(i):r=0,r},vV=function(){if(this.rexSizer.hidden)return 0;var r,i=this.child,e=i.rexSizer;return e.hidden||this.scrollMode===0?r=0:r=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:Jt(i),r},cV=function(r){return r===void 0&&(r=[]),this.child&&this.child.isRexSizer&&r.push(this.child),r},pV=function(){var r=this.left,i=this.top;this.scrollMode===0?i+=this.childOY:r+=this.childOY,this.child.setPosition(r,i),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},gV=function(){var r=this.child,i,e;r.rexSizer.hidden||(this.scrollMode===0?i=this.width:e=this.height,r.isRexSizer?r.runLayout(this,i,e):rs(r,i,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},_T={getChildrenWidth:dV,getChildrenHeight:vV,getChildrenSizers:cV,resetChildPosition:pV,layoutChildren:gV};Object.assign(_T,OT);var t1=Phaser.Utils.Objects.IsPlainObject,sn=Phaser.Utils.Objects.GetValue,mV=Phaser.Display.Align.TOP_LEFT,Ov=class extends hs{constructor(i,e,d,t,n,u){t1(e)?(u=e,e=sn(u,"x",0),d=sn(u,"y",0),t=sn(u,"width",void 0),n=sn(u,"height",void 0)):t1(t)&&(u=t,t=sn(u,"width",void 0),n=sn(u,"height",void 0)),super(i,e,d,t,n,u),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(sn(u,"scrollMode",!0)),this.setClampMode(sn(u,"clamplChildOY",!0));var s=sn(u,"child",void 0),o=sn(u,"expand",!0);s.setOrigin&&s.setOrigin(0),this.add(s),this.sizerChildren=[s];var h=this.getSizerConfig(s);h.align=mV,h.expand=o,this.child=s,this.setupChildrenMask(sn(u,"mask",void 0))}destroy(i){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(i))}setScrollMode(i){return typeof i=="string"&&(i=mT[i.toLowerCase()]),this.scrollMode=i,this}setClampMode(i){return i===void 0&&(i=!0),this.clampChildOY=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?Jt(this.child):_t(this.child)}get childWidth(){return this.scrollMode===0?_t(this.child):Jt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var i=this.childHeight-this.childVisibleHeight;return i<0&&(i=0),i}childOYExceedTop(i){return i===void 0&&(i=this.childOY),i>this.topChildOY}childOYExeceedBottom(i){return i===void 0&&(i=this.childOY),i<this.bottomChildOY}get childOY(){return this._childOY}set childOY(i){var e=this.topChildOY,d=this.bottomChildOY,t=this.childOYExceedTop(i),n=this.childOYExeceedBottom(i);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?i=0:t?i=e:n&&(i=d)),this._childOY!==i&&(this._childOY=i,this.resetChildPosition()),t&&(this.execeedTopState||this.emit("execeedtop",this,i,e)),this.execeedTopState=t,n&&(this.execeedBottomState||this.emit("execeedbottom",this,i,d)),this.execeedBottomState=n}setChildOY(i){return this.childOY=i,this}set t(i){this.childOY=-this.visibleHeight*i}get t(){var i=this.visibleHeight;return i===0?0:this.childOY/-i}setChildOYByPercentage(i){return this.t=i,this}};Object.assign(Ov.prototype,_T);var yo=Phaser.Utils.Objects.GetValue,Hs=class extends ho{constructor(i,e){e===void 0&&(e={});var d=Gl(e),t=yo(e,"panel",void 0);t===void 0&&(t={}),t.scrollMode=d,t.clamplChildOY=yo(e,"clamplChildOY",!1);var n=new Ov(i,t);i.add.existing(n);var u=yo(t,"width",void 0),s=yo(t,"height",void 0),o,h;d===0?(o=u===void 0?1:0,h=s===void 0):(o=s===void 0?1:0,h=u===void 0),e.type="rexScrollablePanel",e.child={gameObject:n,proportion:o,expand:h};var a=yo(e,"space",void 0);a&&(a.child=a.panel),super(i,e),this.addChildrenMap("panel",n.child),this.addChildrenMap("panelLayer",n.maskLayer)}setChildrenInteractive(i){return i===void 0&&(i={}),i.hasOwnProperty("eventEmitter")||(i.eventEmitter=this),i.hasOwnProperty("targets")||(i.targets=[this.childrenMap.panel]),Ml(this.childrenMap.child,i),this}},Xl={popUp:function(r,i){r.popUp(i)},scaleDown:function(r,i){r.scaleDown(i)},fadeIn:function(r,i){r.fadeIn(i)},fadeOut:function(r,i){r.fadeOut(i)}},e1=function(r,i,e,d){e===void 0&&(e=0),d===void 0&&(d=i.length),r.length=d-e;for(var t=0,n=r.length;t<n;t++)r[t]=i[t+e];return r},Hl=Phaser.Utils.Objects.GetValue,Lv=function(r,i,e){var d=Hl(e,"reverse",!1),t;if(ki(r[0]))if(d)for(var u=r.length,n=u-1;n>=0;n--)t=Lv(r[n],i,e);else for(var n=0,u=r.length;n<u;n++)t=Lv(r[n],i,e);else t=xV(r,i,e);return t},xV=function(r,i,e){var d=Hl(e,"argsConvert",void 0),t=Hl(e,"argsConvertScope",void 0),n=r[0];if(ds=e1(ds,r,1),d){d===!0&&(d=Km,t=void 0);for(var u=0,s=ds.length;u<s;u++)t?ds[u]=d.call(t,ds[u],r):ds[u]=d(ds[u],r)}var o;typeof n=="string"?(o=i[n],o==null&&(o=Hl(i,n,null))):o=n;var h=o.apply(i,ds);return h},ds=[],rn=Phaser.Utils.Objects.GetValue,i1=class extends Me{constructor(i,e){super(i,e);var d=rn(e,"clock",void 0);d||(d=new od(i)),this.clock=d,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(i){return this.clock.resetFromJSON(rn(i,"clock",void 0)),this.state=rn(i,"state",0),this.commands=rn(i,"commands",[]),this.scope=rn(i,"scope",void 0),this.setTimeUnit(rn(i,"timeUnit",0)),this.setDtMode(rn(i,"dtMode",0)),this.index=rn(i,"index",0),this.nextTime=rn(i,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(i){this.isShutdown||(this.clock.shutdown(i),this.commands=void 0,super.shutdown(i))}load(i,e,d){this.stop();var t=rn(d,"timeUnit",void 0);t!==void 0&&this.setTimeUnit(t);var n=rn(d,"dtMode",void 0);return n!==void 0&&this.setDtMode(n),i=i.filter(function(u){var s=u[0];return!isNaN(s)}).map(function(u){var s=u[0];return typeof s=="string"&&(u[0]=parseFloat(u[0])),u}),this.dtMode===0&&i.sort(function(u,s){var o=u[0],h=s[0];return o>h?1:o<h?-1:0}),this.commands=i,this.scope=e,this}start(i){return i===void 0&&(i=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(i),this.update(i),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(i){return this.clock.seek(i),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(i){this.clock.timeScale=i}setTimeScale(i){return this.timeScale=i,this}get now(){return this.clock.now}update(i){if(this.nextTime>i)return this;for(var e=this.commands.length-1;;){var d=this.commands[this.index],t=d[1];if(ki(t)||(t=e1(yV,d,1)),Lv(t,this.scope),this.emit("runcommand",t,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>i)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(i){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=i),e}setDtMode(i){return typeof i=="string"&&(i=CV[i]),this.dtMode=i,this}setTimeUnit(i){return typeof i=="string"&&(i=TV[i]),this.timeUnit=i,this}},yV=[],TV={ms:0,s:1,sec:1},CV={abs:0,absolute:0,inc:1,increment:1},To=Phaser.Utils.Objects.GetValue,Co=class extends nn{constructor(i,e){e===void 0&&(e={text:createDefaultTextObject(i)}),super(i,e),this.type="rexToast",this.setTransitInTime(To(e,"duration.in",200)),this.setDisplayTime(To(e,"duration.hold",1200)),this.setTransitOutTime(To(e,"duration.out",200)),this.setTransitInCallback(To(e,"transitIn",vs.popUp)),this.setTransitOutCallback(To(e,"transitOut",vs.scaleDown)),this.player=new i1(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(i){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(i))}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInTime(i){return this.transitInTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=vs[i]),i){case vs.popUp:i=Xl.popUp;break;case vs.fadeIn:i=Xl.fadeIn;break}return i||(i=_e),this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=vs[i]),i){case vs.scaleDown:i=Xl.scaleDown;break;case vs.fadeOut:i=Xl.fadeOut;break}return i||(i=_e),this.transitOutCallback=i,this}setScale(i,e){return e===void 0&&(e=i),this.scaleX0=i,this.scaleY0=e,super.setScale(i,e),this}showMessage(i){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),i===void 0){if(this.messages.length===0)return this;i=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(i),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof i=="string"?this.setText(i):i(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[_e]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[_e]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}},vs={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},SV=function(){return function(r,i,e,d){i!=="panel"&&e.setChildVisible(r,!0)}},EV=function(){return function(r,i,e,d){i!=="panel"&&e.setChildVisible(r,!1)}},PV={show:SV,hide:EV},MV=function(r,i){return i===void 0&&(i=1),function(e,d,t,n){d!=="panel"&&t.fadeChild(e,n?0:r,i)}},AV=function(r,i){return i===void 0&&(i=0),function(e,d,t,n){d!=="panel"&&t.fadeChild(e,n?0:r,i)}},RV={show:MV,hide:AV},n1=function(r,i){return function(e,d,t,n){d!=="panel"&&t.moveChild(e,n?0:r,i)}},OV={show:n1,hide:n1},s1=function(r,i){return function(e,d,t,n){d==="panel"&&t.moveChild(e,n?0:r,i)}},LV={show:s1,hide:s1},Fv={visible:PV,fade:RV,move:OV,"move-panel":LV},FV=function(r){var i,e;[i,...e]=typeof r=="string"?[r]:r;var d,t;return Fv.hasOwnProperty(i)?(d=Fv[i].show.apply(null,e),t=Fv[i].hide.apply(null,e)):(d=_e,t=_e),{show:d,hide:t}},IV={showChild(r,i){var e=this.sizerChildren[r];return e&&(this.emit("showchild",e,r,this,i),this.resetChildState(e)),this},hideChild(r,i){var e=this.sizerChildren[r];return e&&(this.emit("hidechild",e,r,this,i),this.resetChildState(e)),this},swapChild(r,i){return this.currentChildKey===r||(this.currentChildKey==="panel"||r==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=r,this.hideChild(this.previousChildKey,i),this.showChild(this.currentChildKey,i)):(this.swapChild("panel",i),this.swapChild(r,i))),this},showPanel(r){return this.swapChild("panel",r),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var r=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(r),this},toggleRightSide(){var r=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(r),this},toggleTopSide(){var r=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(r),this},toggleBottomSide(){var r=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(r),this}},wV=ii.prototype.setChildVisible,DV={setChildVisible(r,i){var e;if(typeof r=="string"){var e=r;r=this.sizerChildren[e]}else e=Ol(this.sizerChildren,r);return i===void 0&&(i=this.currentChildKey===e),wV.call(this,r,i),this}},BV={fadeChild(r,i,e){var d;return typeof r=="string"?(d=r,r=this.sizerChildren[d]):d=Ol(this.sizerChildren,r),i===void 0&&(i=500),e===void 0&&(e=this.currentChildKey===d?1:0),r.fadeIn(i,{start:r.alpha,end:e}),this},fadeChildPromise(r,i,e){return typeof r=="string"&&(r=this.sizerChildren[key]),this.fadeChild(r,i,e),r._fade?De(r._fade):Promise.resolve()}},GV={moveChild(r,i,e,d){var t;typeof r=="string"?(t=r,r=this.sizerChildren[t]):t=Ol(this.sizerChildren,r),i===void 0&&(i=500);var n=this.currentChildKey===t;if(d===void 0)switch(t){case"leftSide":case"rightSide":d=_t(r);break;case"topSide":case"bottomSide":d=Jt(r);break;default:if(n)switch(this.previousChildKey){case"leftSide":case"rightSide":d=_t(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":d=Jt(this.sizerChildren[this.previousChildKey]);break;default:d=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":d=_t(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":d=Jt(this.sizerChildren[this.currentChildKey]);break;default:d=0;break}break}var u,s,o,h;if(n)switch(t){case"panel":switch(this.previousChildKey){case"leftSide":u=!0;break;case"rightSide":s=!0;break;case"topSide":o=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":s=!0;break;case"rightSide":u=!0;break;case"topSide":h=!0;break;case"bottomSide":o=!0;break}else switch(t){case"panel":switch(this.currentChildKey){case"leftSide":s=!0;break;case"rightSide":u=!0;break;case"topSide":h=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":u=!0;break;case"rightSide":s=!0;break;case"topSide":o=!0;break;case"bottomSide":h=!0;break}return u?r.moveTo(i,`-=${d}`,void 0,e):s?r.moveTo(i,`+=${d}`,void 0,e):o?r.moveTo(i,void 0,`-=${d}`,e):h?r.moveTo(i,void 0,`+=${d}`,e):r.moveTo(0),this},moveChildPromise(r,i,e,d){return typeof r=="string"&&(r=this.sizerChildren[key]),this.moveChild(r,i,e,d),r._easeMove?De(r._easeMove):Promise.resolve()}},r1={};Object.assign(r1,DV,BV,GV);var ai=Phaser.Utils.Objects.GetValue,So=class extends qi{constructor(i,e){super(i,e);this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var d=ai(e,"showChildCallback",void 0);if(d)if(cl(d)){var t=ai(e,"showChildCallbackScope",void 0);this.on("showchild",d,t);var n=ai(e,"hideChildCallback",void 0),u=ai(e,"hideChildCallbackScope",void 0);this.on("hidechild",n,u)}else{var s=FV(d);this.on("showchild",s.show),this.on("hidechild",s.hide)}var o=ai(e,"background",void 0),h=ai(e,"panel",void 0),a=ai(e,"leftSide",void 0),l=ai(e,"rightSide",void 0),c=ai(e,"topSide",void 0),f=ai(e,"bottomSide",void 0);if(o&&this.addBackground(o),h&&this.add(h,"panel","center",0,!0),a){var v=ai(e,"expand.left",!0);this.add(a,"leftSide","left-top",0,{height:v})}if(l){var v=ai(e,"expand.right",!0);this.add(l,"rightSide","right-top",0,{height:v})}if(c){var v=ai(e,"expand.top",!0);this.add(c,"topSide","left-top",0,{width:v})}if(f){var v=ai(e,"expand.bottom",!0);this.add(f,"bottomSide","left-bottom",0,{width:v})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}};Object.assign(So.prototype,IV,r1);var Iv=function(r){for(var i=r.scene.input,e=i.manager,d=e.pointersTotal,t=e.pointers,n,u=0;u<d;u++)if(n=t[u],!(!n.primaryDown||i.getDragState(n)!==0||!kf(r,n)))return i.setDragState(n,1),i._drag[n.id]=[r],i.dragDistanceThreshold===0||i.dragTimeThreshold===0?(i.setDragState(n,3),i.processDragStartList(n)):i.setDragState(n,2),!0;return!1},$l=Phaser.Utils.Objects.GetValue,a1=Phaser.Math.Distance.Between,o1=Phaser.Math.RotateAroundDistance,Kl=class extends Me{constructor(i,e){super(i,{eventEmitter:!1});this._enable=void 0,i.setInteractive($l(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(i){return this.pointer=void 0,this.setEnable($l(i,"enable",!0)),this.setAxisMode($l(i,"axis",0)),this.setAxisRotation($l(i,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var i=this.parent;i.on("dragstart",this.onDragStart,this),i.on("drag",this.onDrag,this),i.on("dragend",this.onDragEnd,this)}shutdown(i){this.isShutdown||(this.pointer=void 0,super.shutdown(i))}get enable(){return this._enable}set enable(i){if(this._enable!==i)return i||this.dragend(),this._enable=i,this.scene.input.setDraggable(this.parent,i),this}setEnable(i){return i===void 0&&(i=!0),this.enable=i,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(i){return typeof i=="string"&&(i=NV[i]),this.axisMode=i,this}setAxisRotation(i){return this.axisRotation=i,this}drag(){return Iv(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(i,e,d){this.isDragging||(this.pointer=i)}onDrag(i,e,d){if(this.pointer===i){var t=this.parent;if(this.axisMode===0)t.x=e,t.y=d;else if(this.axisRotation===0)this.axisMode===1?t.x=e:this.axisMode===2&&(t.y=d);else{var n,u={x:e,y:d};n=a1(u.x,u.y,t.x,t.y),u=o1(u,t.x,t.y,-this.axisRotation,n),this.axisMode===1?u.y=t.y:this.axisMode===2&&(u.x=t.x),n=a1(u.x,u.y,t.x,t.y),u=o1(u,t.x,t.y,this.axisRotation,n),t.x=u.x,t.y=u.y}}}onDragEnd(i,e,d,t){this.pointer===i&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}},NV={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},bV=Phaser.Utils.Objects.IsPlainObject,h1=Phaser.Utils.Objects.GetValue,l1=function(r,i,e){var d;if(r===void 0)r=e.texture.key,i=e.frame.name;else if(bV(r)){var t=r;r=h1(t,"key",e.texture.key),i=h1(t,"frame",e.frame.name)}else typeof r=="string"||(d=r);return d===void 0&&(d=function(n){n.setTexture(r,i)}),d},Eo=Phaser.Utils.Objects.GetValue,zV=Phaser.Utils.Objects.GetAdvancedValue,YV=Phaser.Math.Linear,Zl=class extends Gs{constructor(i,e){super(i,e);this.resetFromJSON(e),this.boot()}resetFromJSON(i){return super.resetFromJSON(i),this.setDuration(zV(i,"duration",500)),this.setEase(Eo(i,"ease","Sine")),this.setOrientation(Eo(i,"orientation",0)),this.setFrontFace(Eo(i,"front",void 0)),this.setBackFace(Eo(i,"back",void 0)),this.setFace(Eo(i,"face",0)),this}setOrientation(i){return typeof i=="string"&&(i=UV[i]),this.orientation=i,this}get face(){return this._face}set face(i){typeof i=="string"&&(i=VV[i]),this._face=i,i===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):i===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(i){return this.face=i,this}toggleFace(){var i=this.face===0?1:0;return this.setFace(i),this}setFrontFace(i,e){return this.frontFaceCallback=l1(i,e,this.parent),this}setBackFace(i,e){return this.backFaceCallback=l1(i,e,this.parent),this}start(){return this.timer.isRunning?this:(this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this)}flip(i){return this.isRunning?this:(i!==void 0&&this.setDuration(i),this.start(),this)}updateGameObject(i,e){e.justRestart&&this.toggleFace();var d=e.t;e.isOddIteration&&(d=1-d),d=this.easeFn(d);var t=YV(1,0,d);this.orientation===0?i.scaleX=t:i.scaleY=t}},UV={x:0,horizontal:0,y:1,vertical:1},VV={front:0,back:1},u1=Phaser.Math.Vector3,WV=Phaser.Math.Matrix4,f1=new u1,d1=new u1,v1=new WV,XV=function(r,i,e,d,t,n,u){i===void 0&&(i=0),e===void 0&&(e=0),d===void 0&&(d=0),t===void 0&&(t=0),n===void 0&&(n=0),u===void 0&&(u=0),f1.set(i,e,d),d1.set(t,n,u),v1.fromRotationXYTranslation(d1,f1,!0);for(var s=0,o=r.vertices.length;s<o;s++)r.vertices[s].transformMat4(v1)},HV=Phaser.GameObjects.Mesh,$V=Phaser.Utils.Objects.IsPlainObject,$s=Phaser.Utils.Objects.GetValue,KV=Phaser.Geom.Mesh.GenerateGridVerts,wv=Phaser.Math.RadToDeg,Jl=Phaser.Math.DegToRad,c1=45,ZV=1+1/Math.sin(Jl(c1)),p1=class extends HV{constructor(i,e,d,t,n,u){$V(e)&&(u=e,e=$s(u,"x",0),d=$s(u,"y",0),t=$s(u,"key",null),n=$s(u,"frame",null)),super(i,e,d,t,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(ZV),this.hideCCW=$s(u,"hideCCW",!0);var s=$s(u,"gridWidth",32),o=$s(u,"gridHeight",s);this.resetVerts(s,o)}resetPerspective(){return this.setPerspective(this.width,this.height,c1),this}resetVerts(i,e){if(i!==void 0&&(this.gridWidth=i),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var d=this.frame.cutWidth,t=this.frame.cutHeight;return KV({mesh:this,texture:this.texture.key,frame:this.frame.name,width:d/this.height,height:t/this.height,widthSegments:Math.ceil(d/this.gridWidth),heightSegments:Math.ceil(t/this.gridHeight),flipY:this.frame.source.isRenderTexture}),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(i){this.modelRotation.x=i}get angleX(){return wv(this.rotationX)}set angleX(i){this.rotationX=Jl(i)}get rotationY(){return this.modelRotation.y}set rotationY(i){this.modelRotation.y=i}get angleY(){return wv(this.rotationY)}set angleY(i){this.rotationY=Jl(i)}get rotationZ(){return this.modelRotation.z}set rotationZ(i){this.modelRotation.z=i}get angleZ(){return wv(this.rotationZ)}set angleZ(i){this.rotationZ=Jl(i)}transformVerts(i,e,d,t,n,u){return XV(this,i,e,d,t,n,u),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(i){for(var e=this.vertices,d=0,t=e.length;d<t;d++)e[d].color=i}setTint(i){return this.tint=i,this}},JV=Phaser.GameObjects.RenderTexture,QV=Phaser.Utils.Objects.IsPlainObject,Ql=Phaser.Utils.Objects.GetValue,g1=class extends p1{constructor(i,e,d,t,n,u){QV(e)&&(u=e,e=Ql(u,"x",0),d=Ql(u,"y",0),t=Ql(u,"width",32),n=Ql(u,"height",32));var s=new JV(i,e,d,t,n).setOrigin(.5);super(i,e,d,s.texture.key,null,u);this.type="rexPerspectiveRenderTexture",this.rt=s}destroy(i){super.destroy(i),this.rt.destroy(),this.rt=null}},SH=Phaser.Animations.AnimationState,EH=Phaser.Utils.Objects.IsPlainObject,PH=Phaser.Utils.Objects.GetValue,MH=Phaser.Math.RadToDeg,AH=Phaser.Math.DegToRad,RH=Phaser.Utils.Objects.IsPlainObject,kV=Phaser.Math.DegToRad,OH=kV(180),LH=Phaser.Utils.Objects.GetValue,FH=Phaser.Math.Linear,IH=Phaser.Utils.Objects.IsPlainObject,wH=Phaser.Utils.Objects.GetValue,DH=Phaser.Utils.Objects.GetValue,BH=Phaser.Math.RadToDeg,GH=Phaser.Math.DegToRad,NH=Phaser.Math.Angle.WrapDegrees,bH=Phaser.Math.Angle.ShortestBetween,zH=Phaser.Math.Wrap,YH=Phaser.Math.Linear,UH=Phaser.Utils.Objects.IsPlainObject,VH=Phaser.Utils.Objects.GetValue,WH=Phaser.Math.DegToRad,XH=Phaser.Math.RadToDeg,HH=Phaser.Math.Angle.WrapDegrees,$H=Phaser.Math.Linear,KH=Phaser.Math.Wrap,ZH=Phaser.Utils.Objects.IsPlainObject,JH=Phaser.Utils.Objects.GetValue,QH=Phaser.Math.Wrap,m1=Phaser.Geom.Rectangle,jV=Phaser.Geom.Rectangle.Union,qV=function(r,i){i===void 0?i=new m1:i===!0&&(Dv===void 0&&(Dv=new m1),i=Dv);for(var e,d=!0,t=0,n=r.length;t<n;t++)if(e=r[t],!!e.getBounds){var u=Id(e,!0);d?(i.setTo(u.x,u.y,u.width,u.height),d=!1):jV(u,i,i)}return i},Dv,br=Phaser.Utils.Objects.GetValue,_V=function(r){var i=r.gameObjects,e=r.renderTexture;if(i.length===0)return e&&e.setSize(1,1).clear(),e;var d=br(r,"x",void 0),t=br(r,"y",void 0),n=br(r,"width",void 0),u=br(r,"height",void 0),s=br(r,"originX",0),o=br(r,"originY",0),h,a;if(n===void 0||u===void 0||d===void 0||t===void 0){var l=qV(i,!0),c=d!==void 0&&t!==void 0;c?(n=Math.max(d-l.left,l.right-d)*2,u=Math.max(t-l.top,l.bottom-t)*2,s=.5,o=.5):(d=l.x,t=l.y,n=l.width,u=l.height,s=0,o=0),h=l.x,a=l.y}else h=d+(0-s)*n,a=t+(0-o)*u;if(e)e.setPosition(d,t),(e.width!==n||e.height!==u)&&e.setSize(n,u);else{var f=i[0].scene;e=f.add.renderTexture(d,t,n,u)}return e.setOrigin(s,o),e.camera.setScroll(h,a),i=Uh(hr(i)),e.draw(i),e},t4=ii.prototype.add,e4=Phaser.Utils.Objects.GetValue,kl=class extends g1{constructor(i,e){var d=i.scene;super(d,i.x,i.y,1,1,e);d.add.existing(this),this.setVisible(!1),t4.call(i,this),this.visibleSibling=[],this.perspectiveState=!1,this.useParentBounds=e4(e,"useParentBounds",!1),this.boot()}boot(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}destroy(i){!this.scene||(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),super.destroy(i))}onParentDestroy(i,e){this.destroy(e)}enter(){this.exit();var i=this.rexContainer.parent;return _V({gameObjects:i.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?i.displayWidth:void 0,height:this.useParentBounds?i.displayHeighth:void 0,originX:this.useParentBounds?i.originX:void 0,originY:this.useParentBounds?i.originY:void 0}),this.syncSize(),i.setChildVisible(this,!0),i.children.forEach(function(e){e!==this&&(i.setChildVisible(e,!1),this.visibleSibling.push(e))},this),this.perspectiveState=!0,this}exit(){var i=this.rexContainer.parent;return this.visibleSibling.forEach(function(e){i.setChildVisible(e,!0)},this),this.visibleSibling.length=0,i.setChildVisible(this,!1),this.perspectiveState=!1,this}},i4=function(r,i){var e=r.scene,d=new _a(e,i);return e.add.existing(d),r.isRexContainerLite?r.moveDepthBelow(d):e.children.moveBelow(d,r),d},jl={popUp:function(r,i){_x(r,i)},scaleDown:function(r,i){ty(r,i,void 0,void 0,!1)},fadeIn:function(r,i){Ba(r,i)},fadeOut:function(r,i){Ga(r,i,!1)}},x1=class extends ji{constructor(i,e){super(e);this.parent=i,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var i=this.parent;i.transitionIn(),i.delayCall(i.transitInTime,this.next,this)}exit_TRANS_OPNE(){var i=this.parent;i.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var i=this.parent,e=i.displayTime;e>=0&&i.delayCall(e,i.requestClose,i),i.onOpen()}exit_OPEN(){var i=this.parent;i.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var i=this.parent;i.transitionOut(),i.delayCall(i.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var i=this.parent;i.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var i=this.parent;i.onClose()}exit_CLOSE(){}},Un=Phaser.Utils.Objects.GetValue,n4=Phaser.Time.TimerEvent,Bv=class extends Me{constructor(i,e){super(i,e);var d=Un(e,"cover");this.cover=d!==!1?i4(i,d):void 0;var t=Un(e,"manualClose",!0);if(t)this.setDisplayTime(-1);else{this.setDisplayTime(Un(e,"duration.hold",2e3));var n=Un(e,"anyTouchClose",!0);n&&this.anyTouchClose()}this.setTransitInTime(Un(e,"duration.in",200)),this.setTransitOutTime(Un(e,"duration.out",200)),this.setTransitInCallback(Un(e,"transitIn",cs.popUp)),this.setTransitOutCallback(Un(e,"transitOut",cs.scaleDown)),this.destroyParent=Un(e,"destroy",!0),this.timer=new n4,this._state=new x1(this,{eventEmitter:!1}),this.closeEventData=void 0,this._state.next()}get state(){return this._state.state}shutdown(i){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!i&&(this.cover.destroy(),this.cover=void 0),this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(i))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){var i=this.transitInTime;this.transitInCallback(this.parent,i);var e=this.cover;return e&&Ba(e,i,e.alpha),this}transitionOut(){var i=this.transitOutTime;this.transitOutCallback(this.parent,i);var e=this.cover;return e&&Ga(e,i,!1),this}onOpen(){this.emit("open",this.parent,this)}onClose(){this.emit("close",this.closeEventData),this.destroyParent?this.parent.destroy():this.destroy()}delayCall(i,e,d){var t=this.scene.sys.events;return this.timer=this.scene.time.delayedCall(i,t.once,["postupdate",e,d],t),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(i){return this.transitInTime=i,this}setDisplayTime(i){return this.displayTime=i,this}setTransitOutTime(i){return this.transitOutTime=i,this}setTransitInCallback(i){switch(typeof i=="string"&&(i=cs[i]),i){case cs.popUp:i=jl.popUp;break;case cs.fadeIn:i=jl.fadeIn;break}return i||(i=_e),this.transitInCallback=i,this}setTransitOutCallback(i){switch(typeof i=="string"&&(i=cs[i]),i){case cs.scaleDown:i=jl.scaleDown;break;case cs.fadeOut:i=jl.fadeOut;break}return i==null&&(i=_e),this.transitOutCallback=i,this}requestClose(i){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?i:this.parent,this._state.next()),this}},cs={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};function y1(r){return typeof r=="undefined"||r===null}function s4(r){return typeof r=="object"&&r!==null}function r4(r){return Array.isArray(r)?r:y1(r)?[]:[r]}function a4(r,i){var e,d,t,n;if(i)for(n=Object.keys(i),e=0,d=n.length;e<d;e+=1)t=n[e],r[t]=i[t];return r}function o4(r,i){var e="",d;for(d=0;d<i;d+=1)e+=r;return e}function h4(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}var l4=y1,u4=s4,f4=r4,d4=o4,v4=h4,c4=a4,Ce={isNothing:l4,isObject:u4,toArray:f4,repeat:d4,isNegativeZero:v4,extend:c4};function T1(r,i){var e="",d=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(e+='in "'+r.mark.name+'" '),e+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!i&&r.mark.snippet&&(e+=`

`+r.mark.snippet),d+" "+e):d}function Po(r,i){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=i,this.message=T1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Po.prototype=Object.create(Error.prototype);Po.prototype.constructor=Po;Po.prototype.toString=function(i){return this.name+": "+T1(this,i)};var Je=Po;function Gv(r,i,e,d,t){var n="",u="",s=Math.floor(t/2)-1;return d-i>s&&(n=" ... ",i=d-s+n.length),e-d>s&&(u=" ...",e=d+s-u.length),{str:n+r.slice(i,e).replace(/\t/g,"→")+u,pos:d-i+n.length}}function Nv(r,i){return Ce.repeat(" ",i-r.length)+r}function p4(r,i){if(i=Object.create(i||null),!r.buffer)return null;i.maxLength||(i.maxLength=79),typeof i.indent!="number"&&(i.indent=1),typeof i.linesBefore!="number"&&(i.linesBefore=3),typeof i.linesAfter!="number"&&(i.linesAfter=2);for(var e=/\r?\n|\r|\0/g,d=[0],t=[],n,u=-1;n=e.exec(r.buffer);)t.push(n.index),d.push(n.index+n[0].length),r.position<=n.index&&u<0&&(u=d.length-2);u<0&&(u=d.length-1);var s="",o,h,a=Math.min(r.line+i.linesAfter,t.length).toString().length,l=i.maxLength-(i.indent+a+3);for(o=1;o<=i.linesBefore&&!(u-o<0);o++)h=Gv(r.buffer,d[u-o],t[u-o],r.position-(d[u]-d[u-o]),l),s=Ce.repeat(" ",i.indent)+Nv((r.line-o+1).toString(),a)+" | "+h.str+`
`+s;for(h=Gv(r.buffer,d[u],t[u],r.position,l),s+=Ce.repeat(" ",i.indent)+Nv((r.line+1).toString(),a)+" | "+h.str+`
`,s+=Ce.repeat("-",i.indent+a+3+h.pos)+`^
`,o=1;o<=i.linesAfter&&!(u+o>=t.length);o++)h=Gv(r.buffer,d[u+o],t[u+o],r.position-(d[u]-d[u+o]),l),s+=Ce.repeat(" ",i.indent)+Nv((r.line+o+1).toString(),a)+" | "+h.str+`
`;return s.replace(/\n$/,"")}var g4=p4,m4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],x4=["scalar","sequence","mapping"];function y4(r){var i={};return r!==null&&Object.keys(r).forEach(function(e){r[e].forEach(function(d){i[String(d)]=e})}),i}function T4(r,i){if(i=i||{},Object.keys(i).forEach(function(e){if(m4.indexOf(e)===-1)throw new Je('Unknown option "'+e+'" is met in definition of "'+r+'" YAML type.')}),this.options=i,this.tag=r,this.kind=i.kind||null,this.resolve=i.resolve||function(){return!0},this.construct=i.construct||function(e){return e},this.instanceOf=i.instanceOf||null,this.predicate=i.predicate||null,this.represent=i.represent||null,this.representName=i.representName||null,this.defaultStyle=i.defaultStyle||null,this.multi=i.multi||!1,this.styleAliases=y4(i.styleAliases||null),x4.indexOf(this.kind)===-1)throw new Je('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}var Be=T4;function C1(r,i){var e=[];return r[i].forEach(function(d){var t=e.length;e.forEach(function(n,u){n.tag===d.tag&&n.kind===d.kind&&n.multi===d.multi&&(t=u)}),e[t]=d}),e}function C4(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},i,e;function d(t){t.multi?(r.multi[t.kind].push(t),r.multi.fallback.push(t)):r[t.kind][t.tag]=r.fallback[t.tag]=t}for(i=0,e=arguments.length;i<e;i+=1)arguments[i].forEach(d);return r}function bv(r){return this.extend(r)}bv.prototype.extend=function(i){var e=[],d=[];if(i instanceof Be)d.push(i);else if(Array.isArray(i))d=d.concat(i);else if(i&&(Array.isArray(i.implicit)||Array.isArray(i.explicit)))i.implicit&&(e=e.concat(i.implicit)),i.explicit&&(d=d.concat(i.explicit));else throw new Je("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(n){if(!(n instanceof Be))throw new Je("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Je("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Je("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),d.forEach(function(n){if(!(n instanceof Be))throw new Je("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var t=Object.create(bv.prototype);return t.implicit=(this.implicit||[]).concat(e),t.explicit=(this.explicit||[]).concat(d),t.compiledImplicit=C1(t,"implicit"),t.compiledExplicit=C1(t,"explicit"),t.compiledTypeMap=C4(t.compiledImplicit,t.compiledExplicit),t};var S1=bv,E1=new Be("tag:yaml.org,2002:str",{kind:"scalar",construct:function(r){return r!==null?r:""}}),P1=new Be("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(r){return r!==null?r:[]}}),M1=new Be("tag:yaml.org,2002:map",{kind:"mapping",construct:function(r){return r!==null?r:{}}}),A1=new S1({explicit:[E1,P1,M1]});function S4(r){if(r===null)return!0;var i=r.length;return i===1&&r==="~"||i===4&&(r==="null"||r==="Null"||r==="NULL")}function E4(){return null}function P4(r){return r===null}var R1=new Be("tag:yaml.org,2002:null",{kind:"scalar",resolve:S4,construct:E4,predicate:P4,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function M4(r){if(r===null)return!1;var i=r.length;return i===4&&(r==="true"||r==="True"||r==="TRUE")||i===5&&(r==="false"||r==="False"||r==="FALSE")}function A4(r){return r==="true"||r==="True"||r==="TRUE"}function R4(r){return Object.prototype.toString.call(r)==="[object Boolean]"}var O1=new Be("tag:yaml.org,2002:bool",{kind:"scalar",resolve:M4,construct:A4,predicate:R4,represent:{lowercase:function(r){return r?"true":"false"},uppercase:function(r){return r?"TRUE":"FALSE"},camelcase:function(r){return r?"True":"False"}},defaultStyle:"lowercase"});function O4(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function L4(r){return 48<=r&&r<=55}function F4(r){return 48<=r&&r<=57}function I4(r){if(r===null)return!1;var i=r.length,e=0,d=!1,t;if(!i)return!1;if(t=r[e],(t==="-"||t==="+")&&(t=r[++e]),t==="0"){if(e+1===i)return!0;if(t=r[++e],t==="b"){for(e++;e<i;e++)if(t=r[e],t!=="_"){if(t!=="0"&&t!=="1")return!1;d=!0}return d&&t!=="_"}if(t==="x"){for(e++;e<i;e++)if(t=r[e],t!=="_"){if(!O4(r.charCodeAt(e)))return!1;d=!0}return d&&t!=="_"}if(t==="o"){for(e++;e<i;e++)if(t=r[e],t!=="_"){if(!L4(r.charCodeAt(e)))return!1;d=!0}return d&&t!=="_"}}if(t==="_")return!1;for(;e<i;e++)if(t=r[e],t!=="_"){if(!F4(r.charCodeAt(e)))return!1;d=!0}return!(!d||t==="_")}function w4(r){var i=r,e=1,d;if(i.indexOf("_")!==-1&&(i=i.replace(/_/g,"")),d=i[0],(d==="-"||d==="+")&&(d==="-"&&(e=-1),i=i.slice(1),d=i[0]),i==="0")return 0;if(d==="0"){if(i[1]==="b")return e*parseInt(i.slice(2),2);if(i[1]==="x")return e*parseInt(i.slice(2),16);if(i[1]==="o")return e*parseInt(i.slice(2),8)}return e*parseInt(i,10)}function D4(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1==0&&!Ce.isNegativeZero(r)}var L1=new Be("tag:yaml.org,2002:int",{kind:"scalar",resolve:I4,construct:w4,predicate:D4,represent:{binary:function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},octal:function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},decimal:function(r){return r.toString(10)},hexadecimal:function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),B4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function G4(r){return!(r===null||!B4.test(r)||r[r.length-1]==="_")}function N4(r){var i,e;return i=r.replace(/_/g,"").toLowerCase(),e=i[0]==="-"?-1:1,"+-".indexOf(i[0])>=0&&(i=i.slice(1)),i===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:i===".nan"?NaN:e*parseFloat(i,10)}var b4=/^[-+]?[0-9]+e/;function z4(r,i){var e;if(isNaN(r))switch(i){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(i){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(i){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ce.isNegativeZero(r))return"-0.0";return e=r.toString(10),b4.test(e)?e.replace("e",".e"):e}function Y4(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!=0||Ce.isNegativeZero(r))}var F1=new Be("tag:yaml.org,2002:float",{kind:"scalar",resolve:G4,construct:N4,predicate:Y4,represent:z4,defaultStyle:"lowercase"}),I1=A1.extend({implicit:[R1,O1,L1,F1]}),w1=I1,D1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),B1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function U4(r){return r===null?!1:D1.exec(r)!==null||B1.exec(r)!==null}function V4(r){var i,e,d,t,n,u,s,o=0,h=null,a,l,c;if(i=D1.exec(r),i===null&&(i=B1.exec(r)),i===null)throw new Error("Date resolve error");if(e=+i[1],d=+i[2]-1,t=+i[3],!i[4])return new Date(Date.UTC(e,d,t));if(n=+i[4],u=+i[5],s=+i[6],i[7]){for(o=i[7].slice(0,3);o.length<3;)o+="0";o=+o}return i[9]&&(a=+i[10],l=+(i[11]||0),h=(a*60+l)*6e4,i[9]==="-"&&(h=-h)),c=new Date(Date.UTC(e,d,t,n,u,s,o)),h&&c.setTime(c.getTime()-h),c}function W4(r){return r.toISOString()}var G1=new Be("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:U4,construct:V4,instanceOf:Date,represent:W4});function X4(r){return r==="<<"||r===null}var N1=new Be("tag:yaml.org,2002:merge",{kind:"scalar",resolve:X4}),zv=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function H4(r){if(r===null)return!1;var i,e,d=0,t=r.length,n=zv;for(e=0;e<t;e++)if(i=n.indexOf(r.charAt(e)),!(i>64)){if(i<0)return!1;d+=6}return d%8==0}function $4(r){var i,e,d=r.replace(/[\r\n=]/g,""),t=d.length,n=zv,u=0,s=[];for(i=0;i<t;i++)i%4==0&&i&&(s.push(u>>16&255),s.push(u>>8&255),s.push(u&255)),u=u<<6|n.indexOf(d.charAt(i));return e=t%4*6,e===0?(s.push(u>>16&255),s.push(u>>8&255),s.push(u&255)):e===18?(s.push(u>>10&255),s.push(u>>2&255)):e===12&&s.push(u>>4&255),new Uint8Array(s)}function K4(r){var i="",e=0,d,t,n=r.length,u=zv;for(d=0;d<n;d++)d%3==0&&d&&(i+=u[e>>18&63],i+=u[e>>12&63],i+=u[e>>6&63],i+=u[e&63]),e=(e<<8)+r[d];return t=n%3,t===0?(i+=u[e>>18&63],i+=u[e>>12&63],i+=u[e>>6&63],i+=u[e&63]):t===2?(i+=u[e>>10&63],i+=u[e>>4&63],i+=u[e<<2&63],i+=u[64]):t===1&&(i+=u[e>>2&63],i+=u[e<<4&63],i+=u[64],i+=u[64]),i}function Z4(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}var b1=new Be("tag:yaml.org,2002:binary",{kind:"scalar",resolve:H4,construct:$4,predicate:Z4,represent:K4}),J4=Object.prototype.hasOwnProperty,Q4=Object.prototype.toString;function k4(r){if(r===null)return!0;var i=[],e,d,t,n,u,s=r;for(e=0,d=s.length;e<d;e+=1){if(t=s[e],u=!1,Q4.call(t)!=="[object Object]")return!1;for(n in t)if(J4.call(t,n))if(!u)u=!0;else return!1;if(!u)return!1;if(i.indexOf(n)===-1)i.push(n);else return!1}return!0}function j4(r){return r!==null?r:[]}var z1=new Be("tag:yaml.org,2002:omap",{kind:"sequence",resolve:k4,construct:j4}),q4=Object.prototype.toString;function _4(r){if(r===null)return!0;var i,e,d,t,n,u=r;for(n=new Array(u.length),i=0,e=u.length;i<e;i+=1){if(d=u[i],q4.call(d)!=="[object Object]"||(t=Object.keys(d),t.length!==1))return!1;n[i]=[t[0],d[t[0]]]}return!0}function tW(r){if(r===null)return[];var i,e,d,t,n,u=r;for(n=new Array(u.length),i=0,e=u.length;i<e;i+=1)d=u[i],t=Object.keys(d),n[i]=[t[0],d[t[0]]];return n}var Y1=new Be("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:_4,construct:tW}),eW=Object.prototype.hasOwnProperty;function iW(r){if(r===null)return!0;var i,e=r;for(i in e)if(eW.call(e,i)&&e[i]!==null)return!1;return!0}function nW(r){return r!==null?r:{}}var U1=new Be("tag:yaml.org,2002:set",{kind:"mapping",resolve:iW,construct:nW}),Yv=w1.extend({implicit:[G1,N1],explicit:[b1,z1,Y1,U1]}),ps=Object.prototype.hasOwnProperty,ql=1,V1=2,W1=3,_l=4,Uv=1,sW=2,X1=3,rW=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,aW=/[\x85\u2028\u2029]/,oW=/[,\[\]\{\}]/,H1=/^(?:!|!!|![a-z\-]+!)$/i,$1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function K1(r){return Object.prototype.toString.call(r)}function Pn(r){return r===10||r===13}function Ks(r){return r===9||r===32}function oi(r){return r===9||r===32||r===10||r===13}function zr(r){return r===44||r===91||r===93||r===123||r===125}function hW(r){var i;return 48<=r&&r<=57?r-48:(i=r|32,97<=i&&i<=102?i-97+10:-1)}function lW(r){return r===120?2:r===117?4:r===85?8:0}function uW(r){return 48<=r&&r<=57?r-48:-1}function Z1(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"":r===95?" ":r===76?"\u2028":r===80?"\u2029":""}function fW(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}var J1=new Array(256),Q1=new Array(256);for(var Yr=0;Yr<256;Yr++)J1[Yr]=Z1(Yr)?1:0,Q1[Yr]=Z1(Yr);function dW(r,i){this.input=r,this.filename=i.filename||null,this.schema=i.schema||Yv,this.onWarning=i.onWarning||null,this.legacy=i.legacy||!1,this.json=i.json||!1,this.listener=i.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function k1(r,i){var e={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return e.snippet=g4(e),new Je(i,e)}function Mt(r,i){throw k1(r,i)}function tu(r,i){r.onWarning&&r.onWarning.call(null,k1(r,i))}var j1={YAML:function(i,e,d){var t,n,u;i.version!==null&&Mt(i,"duplication of %YAML directive"),d.length!==1&&Mt(i,"YAML directive accepts exactly one argument"),t=/^([0-9]+)\.([0-9]+)$/.exec(d[0]),t===null&&Mt(i,"ill-formed argument of the YAML directive"),n=parseInt(t[1],10),u=parseInt(t[2],10),n!==1&&Mt(i,"unacceptable YAML version of the document"),i.version=d[0],i.checkLineBreaks=u<2,u!==1&&u!==2&&tu(i,"unsupported YAML version of the document")},TAG:function(i,e,d){var t,n;d.length!==2&&Mt(i,"TAG directive accepts exactly two arguments"),t=d[0],n=d[1],H1.test(t)||Mt(i,"ill-formed tag handle (first argument) of the TAG directive"),ps.call(i.tagMap,t)&&Mt(i,'there is a previously declared suffix for "'+t+'" tag handle'),$1.test(n)||Mt(i,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(u){Mt(i,"tag prefix is malformed: "+n)}i.tagMap[t]=n}};function gs(r,i,e,d){var t,n,u,s;if(i<e){if(s=r.input.slice(i,e),d)for(t=0,n=s.length;t<n;t+=1)u=s.charCodeAt(t),u===9||32<=u&&u<=1114111||Mt(r,"expected valid JSON character");else rW.test(s)&&Mt(r,"the stream contains non-printable characters");r.result+=s}}function q1(r,i,e,d){var t,n,u,s;for(Ce.isObject(e)||Mt(r,"cannot merge mappings; the provided source object is unacceptable"),t=Object.keys(e),u=0,s=t.length;u<s;u+=1)n=t[u],ps.call(i,n)||(i[n]=e[n],d[n]=!0)}function Ur(r,i,e,d,t,n,u,s,o){var h,a;if(Array.isArray(t))for(t=Array.prototype.slice.call(t),h=0,a=t.length;h<a;h+=1)Array.isArray(t[h])&&Mt(r,"nested arrays are not supported inside keys"),typeof t=="object"&&K1(t[h])==="[object Object]"&&(t[h]="[object Object]");if(typeof t=="object"&&K1(t)==="[object Object]"&&(t="[object Object]"),t=String(t),i===null&&(i={}),d==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(h=0,a=n.length;h<a;h+=1)q1(r,i,n[h],e);else q1(r,i,n,e);else!r.json&&!ps.call(e,t)&&ps.call(i,t)&&(r.line=u||r.line,r.lineStart=s||r.lineStart,r.position=o||r.position,Mt(r,"duplicated mapping key")),t==="__proto__"?Object.defineProperty(i,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):i[t]=n,delete e[t];return i}function Vv(r){var i;i=r.input.charCodeAt(r.position),i===10?r.position++:i===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):Mt(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}function pe(r,i,e){for(var d=0,t=r.input.charCodeAt(r.position);t!==0;){for(;Ks(t);)t===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),t=r.input.charCodeAt(++r.position);if(i&&t===35)do t=r.input.charCodeAt(++r.position);while(t!==10&&t!==13&&t!==0);if(Pn(t))for(Vv(r),t=r.input.charCodeAt(r.position),d++,r.lineIndent=0;t===32;)r.lineIndent++,t=r.input.charCodeAt(++r.position);else break}return e!==-1&&d!==0&&r.lineIndent<e&&tu(r,"deficient indentation"),d}function eu(r){var i=r.position,e;return e=r.input.charCodeAt(i),!!((e===45||e===46)&&e===r.input.charCodeAt(i+1)&&e===r.input.charCodeAt(i+2)&&(i+=3,e=r.input.charCodeAt(i),e===0||oi(e)))}function Wv(r,i){i===1?r.result+=" ":i>1&&(r.result+=Ce.repeat(`
`,i-1))}function vW(r,i,e){var d,t,n,u,s,o,h,a,l=r.kind,c=r.result,f;if(f=r.input.charCodeAt(r.position),oi(f)||zr(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(t=r.input.charCodeAt(r.position+1),oi(t)||e&&zr(t)))return!1;for(r.kind="scalar",r.result="",n=u=r.position,s=!1;f!==0;){if(f===58){if(t=r.input.charCodeAt(r.position+1),oi(t)||e&&zr(t))break}else if(f===35){if(d=r.input.charCodeAt(r.position-1),oi(d))break}else{if(r.position===r.lineStart&&eu(r)||e&&zr(f))break;if(Pn(f))if(o=r.line,h=r.lineStart,a=r.lineIndent,pe(r,!1,-1),r.lineIndent>=i){s=!0,f=r.input.charCodeAt(r.position);continue}else{r.position=u,r.line=o,r.lineStart=h,r.lineIndent=a;break}}s&&(gs(r,n,u,!1),Wv(r,r.line-o),n=u=r.position,s=!1),Ks(f)||(u=r.position+1),f=r.input.charCodeAt(++r.position)}return gs(r,n,u,!1),r.result?!0:(r.kind=l,r.result=c,!1)}function cW(r,i){var e,d,t;if(e=r.input.charCodeAt(r.position),e!==39)return!1;for(r.kind="scalar",r.result="",r.position++,d=t=r.position;(e=r.input.charCodeAt(r.position))!==0;)if(e===39)if(gs(r,d,r.position,!0),e=r.input.charCodeAt(++r.position),e===39)d=r.position,r.position++,t=r.position;else return!0;else Pn(e)?(gs(r,d,t,!0),Wv(r,pe(r,!1,i)),d=t=r.position):r.position===r.lineStart&&eu(r)?Mt(r,"unexpected end of the document within a single quoted scalar"):(r.position++,t=r.position);Mt(r,"unexpected end of the stream within a single quoted scalar")}function pW(r,i){var e,d,t,n,u,s;if(s=r.input.charCodeAt(r.position),s!==34)return!1;for(r.kind="scalar",r.result="",r.position++,e=d=r.position;(s=r.input.charCodeAt(r.position))!==0;){if(s===34)return gs(r,e,r.position,!0),r.position++,!0;if(s===92){if(gs(r,e,r.position,!0),s=r.input.charCodeAt(++r.position),Pn(s))pe(r,!1,i);else if(s<256&&J1[s])r.result+=Q1[s],r.position++;else if((u=lW(s))>0){for(t=u,n=0;t>0;t--)s=r.input.charCodeAt(++r.position),(u=hW(s))>=0?n=(n<<4)+u:Mt(r,"expected hexadecimal character");r.result+=fW(n),r.position++}else Mt(r,"unknown escape sequence");e=d=r.position}else Pn(s)?(gs(r,e,d,!0),Wv(r,pe(r,!1,i)),e=d=r.position):r.position===r.lineStart&&eu(r)?Mt(r,"unexpected end of the document within a double quoted scalar"):(r.position++,d=r.position)}Mt(r,"unexpected end of the stream within a double quoted scalar")}function gW(r,i){var e=!0,d,t,n,u=r.tag,s,o=r.anchor,h,a,l,c,f,v=Object.create(null),p,g,m,x;if(x=r.input.charCodeAt(r.position),x===91)a=93,f=!1,s=[];else if(x===123)a=125,f=!0,s={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=s),x=r.input.charCodeAt(++r.position);x!==0;){if(pe(r,!0,i),x=r.input.charCodeAt(r.position),x===a)return r.position++,r.tag=u,r.anchor=o,r.kind=f?"mapping":"sequence",r.result=s,!0;e?x===44&&Mt(r,"expected the node content, but found ','"):Mt(r,"missed comma between flow collection entries"),g=p=m=null,l=c=!1,x===63&&(h=r.input.charCodeAt(r.position+1),oi(h)&&(l=c=!0,r.position++,pe(r,!0,i))),d=r.line,t=r.lineStart,n=r.position,Vr(r,i,ql,!1,!0),g=r.tag,p=r.result,pe(r,!0,i),x=r.input.charCodeAt(r.position),(c||r.line===d)&&x===58&&(l=!0,x=r.input.charCodeAt(++r.position),pe(r,!0,i),Vr(r,i,ql,!1,!0),m=r.result),f?Ur(r,s,v,g,p,m,d,t,n):l?s.push(Ur(r,null,v,g,p,m,d,t,n)):s.push(p),pe(r,!0,i),x=r.input.charCodeAt(r.position),x===44?(e=!0,x=r.input.charCodeAt(++r.position)):e=!1}Mt(r,"unexpected end of the stream within a flow collection")}function mW(r,i){var e,d,t=Uv,n=!1,u=!1,s=i,o=0,h=!1,a,l;if(l=r.input.charCodeAt(r.position),l===124)d=!1;else if(l===62)d=!0;else return!1;for(r.kind="scalar",r.result="";l!==0;)if(l=r.input.charCodeAt(++r.position),l===43||l===45)Uv===t?t=l===43?X1:sW:Mt(r,"repeat of a chomping mode identifier");else if((a=uW(l))>=0)a===0?Mt(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?Mt(r,"repeat of an indentation width identifier"):(s=i+a-1,u=!0);else break;if(Ks(l)){do l=r.input.charCodeAt(++r.position);while(Ks(l));if(l===35)do l=r.input.charCodeAt(++r.position);while(!Pn(l)&&l!==0)}for(;l!==0;){for(Vv(r),r.lineIndent=0,l=r.input.charCodeAt(r.position);(!u||r.lineIndent<s)&&l===32;)r.lineIndent++,l=r.input.charCodeAt(++r.position);if(!u&&r.lineIndent>s&&(s=r.lineIndent),Pn(l)){o++;continue}if(r.lineIndent<s){t===X1?r.result+=Ce.repeat(`
`,n?1+o:o):t===Uv&&n&&(r.result+=`
`);break}for(d?Ks(l)?(h=!0,r.result+=Ce.repeat(`
`,n?1+o:o)):h?(h=!1,r.result+=Ce.repeat(`
`,o+1)):o===0?n&&(r.result+=" "):r.result+=Ce.repeat(`
`,o):r.result+=Ce.repeat(`
`,n?1+o:o),n=!0,u=!0,o=0,e=r.position;!Pn(l)&&l!==0;)l=r.input.charCodeAt(++r.position);gs(r,e,r.position,!1)}return!0}function _1(r,i){var e,d=r.tag,t=r.anchor,n=[],u,s=!1,o;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=n),o=r.input.charCodeAt(r.position);o!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,Mt(r,"tab characters must not be used in indentation")),!(o!==45||(u=r.input.charCodeAt(r.position+1),!oi(u))));){if(s=!0,r.position++,pe(r,!0,-1)&&r.lineIndent<=i){n.push(null),o=r.input.charCodeAt(r.position);continue}if(e=r.line,Vr(r,i,W1,!1,!0),n.push(r.result),pe(r,!0,-1),o=r.input.charCodeAt(r.position),(r.line===e||r.lineIndent>i)&&o!==0)Mt(r,"bad indentation of a sequence entry");else if(r.lineIndent<i)break}return s?(r.tag=d,r.anchor=t,r.kind="sequence",r.result=n,!0):!1}function xW(r,i,e){var d,t,n,u,s,o,h=r.tag,a=r.anchor,l={},c=Object.create(null),f=null,v=null,p=null,g=!1,m=!1,x;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=l),x=r.input.charCodeAt(r.position);x!==0;){if(!g&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,Mt(r,"tab characters must not be used in indentation")),d=r.input.charCodeAt(r.position+1),n=r.line,(x===63||x===58)&&oi(d))x===63?(g&&(Ur(r,l,c,f,v,null,u,s,o),f=v=p=null),m=!0,g=!0,t=!0):g?(g=!1,t=!0):Mt(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,x=d;else{if(u=r.line,s=r.lineStart,o=r.position,!Vr(r,e,V1,!1,!0))break;if(r.line===n){for(x=r.input.charCodeAt(r.position);Ks(x);)x=r.input.charCodeAt(++r.position);if(x===58)x=r.input.charCodeAt(++r.position),oi(x)||Mt(r,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Ur(r,l,c,f,v,null,u,s,o),f=v=p=null),m=!0,g=!1,t=!1,f=r.tag,v=r.result;else if(m)Mt(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=h,r.anchor=a,!0}else if(m)Mt(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=h,r.anchor=a,!0}if((r.line===n||r.lineIndent>i)&&(g&&(u=r.line,s=r.lineStart,o=r.position),Vr(r,i,_l,!0,t)&&(g?v=r.result:p=r.result),g||(Ur(r,l,c,f,v,p,u,s,o),f=v=p=null),pe(r,!0,-1),x=r.input.charCodeAt(r.position)),(r.line===n||r.lineIndent>i)&&x!==0)Mt(r,"bad indentation of a mapping entry");else if(r.lineIndent<i)break}return g&&Ur(r,l,c,f,v,null,u,s,o),m&&(r.tag=h,r.anchor=a,r.kind="mapping",r.result=l),m}function yW(r){var i,e=!1,d=!1,t,n,u;if(u=r.input.charCodeAt(r.position),u!==33)return!1;if(r.tag!==null&&Mt(r,"duplication of a tag property"),u=r.input.charCodeAt(++r.position),u===60?(e=!0,u=r.input.charCodeAt(++r.position)):u===33?(d=!0,t="!!",u=r.input.charCodeAt(++r.position)):t="!",i=r.position,e){do u=r.input.charCodeAt(++r.position);while(u!==0&&u!==62);r.position<r.length?(n=r.input.slice(i,r.position),u=r.input.charCodeAt(++r.position)):Mt(r,"unexpected end of the stream within a verbatim tag")}else{for(;u!==0&&!oi(u);)u===33&&(d?Mt(r,"tag suffix cannot contain exclamation marks"):(t=r.input.slice(i-1,r.position+1),H1.test(t)||Mt(r,"named tag handle cannot contain such characters"),d=!0,i=r.position+1)),u=r.input.charCodeAt(++r.position);n=r.input.slice(i,r.position),oW.test(n)&&Mt(r,"tag suffix cannot contain flow indicator characters")}n&&!$1.test(n)&&Mt(r,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch(s){Mt(r,"tag name is malformed: "+n)}return e?r.tag=n:ps.call(r.tagMap,t)?r.tag=r.tagMap[t]+n:t==="!"?r.tag="!"+n:t==="!!"?r.tag="tag:yaml.org,2002:"+n:Mt(r,'undeclared tag handle "'+t+'"'),!0}function TW(r){var i,e;if(e=r.input.charCodeAt(r.position),e!==38)return!1;for(r.anchor!==null&&Mt(r,"duplication of an anchor property"),e=r.input.charCodeAt(++r.position),i=r.position;e!==0&&!oi(e)&&!zr(e);)e=r.input.charCodeAt(++r.position);return r.position===i&&Mt(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(i,r.position),!0}function CW(r){var i,e,d;if(d=r.input.charCodeAt(r.position),d!==42)return!1;for(d=r.input.charCodeAt(++r.position),i=r.position;d!==0&&!oi(d)&&!zr(d);)d=r.input.charCodeAt(++r.position);return r.position===i&&Mt(r,"name of an alias node must contain at least one character"),e=r.input.slice(i,r.position),ps.call(r.anchorMap,e)||Mt(r,'unidentified alias "'+e+'"'),r.result=r.anchorMap[e],pe(r,!0,-1),!0}function Vr(r,i,e,d,t){var n,u,s,o=1,h=!1,a=!1,l,c,f,v,p,g;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,n=u=s=_l===e||W1===e,d&&pe(r,!0,-1)&&(h=!0,r.lineIndent>i?o=1:r.lineIndent===i?o=0:r.lineIndent<i&&(o=-1)),o===1)for(;yW(r)||TW(r);)pe(r,!0,-1)?(h=!0,s=n,r.lineIndent>i?o=1:r.lineIndent===i?o=0:r.lineIndent<i&&(o=-1)):s=!1;if(s&&(s=h||t),(o===1||_l===e)&&(ql===e||V1===e?p=i:p=i+1,g=r.position-r.lineStart,o===1?s&&(_1(r,g)||xW(r,g,p))||gW(r,p)?a=!0:(u&&mW(r,p)||cW(r,p)||pW(r,p)?a=!0:CW(r)?(a=!0,(r.tag!==null||r.anchor!==null)&&Mt(r,"alias node should not have any properties")):vW(r,p,ql===e)&&(a=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):o===0&&(a=s&&_1(r,g))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&Mt(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),l=0,c=r.implicitTypes.length;l<c;l+=1)if(v=r.implicitTypes[l],v.resolve(r.result)){r.result=v.construct(r.result),r.tag=v.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(ps.call(r.typeMap[r.kind||"fallback"],r.tag))v=r.typeMap[r.kind||"fallback"][r.tag];else for(v=null,f=r.typeMap.multi[r.kind||"fallback"],l=0,c=f.length;l<c;l+=1)if(r.tag.slice(0,f[l].tag.length)===f[l].tag){v=f[l];break}v||Mt(r,"unknown tag !<"+r.tag+">"),r.result!==null&&v.kind!==r.kind&&Mt(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+v.kind+'", not "'+r.kind+'"'),v.resolve(r.result,r.tag)?(r.result=v.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):Mt(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||a}function SW(r){var i=r.position,e,d,t,n=!1,u;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(u=r.input.charCodeAt(r.position))!==0&&(pe(r,!0,-1),u=r.input.charCodeAt(r.position),!(r.lineIndent>0||u!==37));){for(n=!0,u=r.input.charCodeAt(++r.position),e=r.position;u!==0&&!oi(u);)u=r.input.charCodeAt(++r.position);for(d=r.input.slice(e,r.position),t=[],d.length<1&&Mt(r,"directive name must not be less than one character in length");u!==0;){for(;Ks(u);)u=r.input.charCodeAt(++r.position);if(u===35){do u=r.input.charCodeAt(++r.position);while(u!==0&&!Pn(u));break}if(Pn(u))break;for(e=r.position;u!==0&&!oi(u);)u=r.input.charCodeAt(++r.position);t.push(r.input.slice(e,r.position))}u!==0&&Vv(r),ps.call(j1,d)?j1[d](r,d,t):tu(r,'unknown document directive "'+d+'"')}if(pe(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,pe(r,!0,-1)):n&&Mt(r,"directives end mark is expected"),Vr(r,r.lineIndent-1,_l,!1,!0),pe(r,!0,-1),r.checkLineBreaks&&aW.test(r.input.slice(i,r.position))&&tu(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&eu(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,pe(r,!0,-1));return}if(r.position<r.length-1)Mt(r,"end of the stream or a document separator is expected");else return}function tC(r,i){r=String(r),i=i||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var e=new dW(r,i),d=r.indexOf("\0");for(d!==-1&&(e.position=d,Mt(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)SW(e);return e.documents}function EW(r,i,e){i!==null&&typeof i=="object"&&typeof e=="undefined"&&(e=i,i=null);var d=tC(r,e);if(typeof i!="function")return d;for(var t=0,n=d.length;t<n;t+=1)i(d[t])}function PW(r,i){var e=tC(r,i);if(e.length!==0){if(e.length===1)return e[0];throw new Je("expected a single document in the stream, but found more")}}var MW=EW,AW=PW,eC={loadAll:MW,load:AW},iC=Object.prototype.toString,nC=Object.prototype.hasOwnProperty,Xv=65279,RW=9,Mo=10,OW=13,LW=32,FW=33,IW=34,Hv=35,wW=37,DW=38,BW=39,GW=42,sC=44,NW=45,iu=58,bW=61,zW=62,YW=63,UW=64,rC=91,aC=93,VW=96,oC=123,WW=124,hC=125,Ve={};Ve[0]="\\0";Ve[7]="\\a";Ve[8]="\\b";Ve[9]="\\t";Ve[10]="\\n";Ve[11]="\\v";Ve[12]="\\f";Ve[13]="\\r";Ve[27]="\\e";Ve[34]='\\"';Ve[92]="\\\\";Ve[133]="\\N";Ve[160]="\\_";Ve[8232]="\\L";Ve[8233]="\\P";var XW=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],HW=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function $W(r,i){var e,d,t,n,u,s,o;if(i===null)return{};for(e={},d=Object.keys(i),t=0,n=d.length;t<n;t+=1)u=d[t],s=String(i[u]),u.slice(0,2)==="!!"&&(u="tag:yaml.org,2002:"+u.slice(2)),o=r.compiledTypeMap.fallback[u],o&&nC.call(o.styleAliases,s)&&(s=o.styleAliases[s]),e[u]=s;return e}function KW(r){var i,e,d;if(i=r.toString(16).toUpperCase(),r<=255)e="x",d=2;else if(r<=65535)e="u",d=4;else if(r<=4294967295)e="U",d=8;else throw new Je("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+Ce.repeat("0",d-i.length)+i}var ZW=1,Ao=2;function JW(r){this.schema=r.schema||Yv,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=Ce.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=$W(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?Ao:ZW,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function lC(r,i){for(var e=Ce.repeat(" ",i),d=0,t=-1,n="",u,s=r.length;d<s;)t=r.indexOf(`
`,d),t===-1?(u=r.slice(d),d=s):(u=r.slice(d,t+1),d=t+1),u.length&&u!==`
`&&(n+=e),n+=u;return n}function $v(r,i){return`
`+Ce.repeat(" ",r.indent*i)}function QW(r,i){var e,d,t;for(e=0,d=r.implicitTypes.length;e<d;e+=1)if(t=r.implicitTypes[e],t.resolve(i))return!0;return!1}function nu(r){return r===LW||r===RW}function Ro(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==Xv||65536<=r&&r<=1114111}function uC(r){return Ro(r)&&r!==Xv&&r!==OW&&r!==Mo}function fC(r,i,e){var d=uC(r),t=d&&!nu(r);return(e?d:d&&r!==sC&&r!==rC&&r!==aC&&r!==oC&&r!==hC)&&r!==Hv&&!(i===iu&&!t)||uC(i)&&!nu(i)&&r===Hv||i===iu&&t}function kW(r){return Ro(r)&&r!==Xv&&!nu(r)&&r!==NW&&r!==YW&&r!==iu&&r!==sC&&r!==rC&&r!==aC&&r!==oC&&r!==hC&&r!==Hv&&r!==DW&&r!==GW&&r!==FW&&r!==WW&&r!==bW&&r!==zW&&r!==BW&&r!==IW&&r!==wW&&r!==UW&&r!==VW}function jW(r){return!nu(r)&&r!==iu}function Oo(r,i){var e=r.charCodeAt(i),d;return e>=55296&&e<=56319&&i+1<r.length&&(d=r.charCodeAt(i+1),d>=56320&&d<=57343)?(e-55296)*1024+d-56320+65536:e}function dC(r){var i=/^\n* /;return i.test(r)}var vC=1,Kv=2,cC=3,pC=4,Wr=5;function qW(r,i,e,d,t,n,u,s){var o,h=0,a=null,l=!1,c=!1,f=d!==-1,v=-1,p=kW(Oo(r,0))&&jW(Oo(r,r.length-1));if(i||u)for(o=0;o<r.length;h>=65536?o+=2:o++){if(h=Oo(r,o),!Ro(h))return Wr;p=p&&fC(h,a,s),a=h}else{for(o=0;o<r.length;h>=65536?o+=2:o++){if(h=Oo(r,o),h===Mo)l=!0,f&&(c=c||o-v-1>d&&r[v+1]!==" ",v=o);else if(!Ro(h))return Wr;p=p&&fC(h,a,s),a=h}c=c||f&&o-v-1>d&&r[v+1]!==" "}return!l&&!c?p&&!u&&!t(r)?vC:n===Ao?Wr:Kv:e>9&&dC(r)?Wr:u?n===Ao?Wr:Kv:c?pC:cC}function eX(r,i,e,d,t){r.dump=function(){if(i.length===0)return r.quotingType===Ao?'""':"''";if(!r.noCompatMode&&(XW.indexOf(i)!==-1||HW.test(i)))return r.quotingType===Ao?'"'+i+'"':"'"+i+"'";var n=r.indent*Math.max(1,e),u=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-n),s=d||r.flowLevel>-1&&e>=r.flowLevel;function o(h){return QW(r,h)}switch(qW(i,s,r.indent,u,o,r.quotingType,r.forceQuotes&&!d,t)){case vC:return i;case Kv:return"'"+i.replace(/'/g,"''")+"'";case cC:return"|"+gC(i,r.indent)+mC(lC(i,n));case pC:return">"+gC(i,r.indent)+mC(lC(_W(i,u),n));case Wr:return'"'+tX(i)+'"';default:throw new Je("impossible error: invalid scalar style")}}()}function gC(r,i){var e=dC(r)?String(i):"",d=r[r.length-1]===`
`,t=d&&(r[r.length-2]===`
`||r===`
`),n=t?"+":d?"":"-";return e+n+`
`}function mC(r){return r[r.length-1]===`
`?r.slice(0,-1):r}function _W(r,i){for(var e=/(\n+)([^\n]*)/g,d=function(){var h=r.indexOf(`
`);return h=h!==-1?h:r.length,e.lastIndex=h,xC(r.slice(0,h),i)}(),t=r[0]===`
`||r[0]===" ",n,u;u=e.exec(r);){var s=u[1],o=u[2];n=o[0]===" ",d+=s+(!t&&!n&&o!==""?`
`:"")+xC(o,i),t=n}return d}function xC(r,i){if(r===""||r[0]===" ")return r;for(var e=/ [^ ]/g,d,t=0,n,u=0,s=0,o="";d=e.exec(r);)s=d.index,s-t>i&&(n=u>t?u:s,o+=`
`+r.slice(t,n),t=n+1),u=s;return o+=`
`,r.length-t>i&&u>t?o+=r.slice(t,u)+`
`+r.slice(u+1):o+=r.slice(t),o.slice(1)}function tX(r){for(var i="",e=0,d,t=0;t<r.length;e>=65536?t+=2:t++)e=Oo(r,t),d=Ve[e],!d&&Ro(e)?(i+=r[t],e>=65536&&(i+=r[t+1])):i+=d||KW(e);return i}function iX(r,i,e){var d="",t=r.tag,n,u,s;for(n=0,u=e.length;n<u;n+=1)s=e[n],r.replacer&&(s=r.replacer.call(e,String(n),s)),(Vn(r,i,s,!1,!1)||typeof s=="undefined"&&Vn(r,i,null,!1,!1))&&(d!==""&&(d+=","+(r.condenseFlow?"":" ")),d+=r.dump);r.tag=t,r.dump="["+d+"]"}function yC(r,i,e,d){var t="",n=r.tag,u,s,o;for(u=0,s=e.length;u<s;u+=1)o=e[u],r.replacer&&(o=r.replacer.call(e,String(u),o)),(Vn(r,i+1,o,!0,!0,!1,!0)||typeof o=="undefined"&&Vn(r,i+1,null,!0,!0,!1,!0))&&((!d||t!=="")&&(t+=$v(r,i)),r.dump&&Mo===r.dump.charCodeAt(0)?t+="-":t+="- ",t+=r.dump);r.tag=n,r.dump=t||"[]"}function nX(r,i,e){var d="",t=r.tag,n=Object.keys(e),u,s,o,h,a;for(u=0,s=n.length;u<s;u+=1)a="",d!==""&&(a+=", "),r.condenseFlow&&(a+='"'),o=n[u],h=e[o],r.replacer&&(h=r.replacer.call(e,o,h)),!!Vn(r,i,o,!1,!1)&&(r.dump.length>1024&&(a+="? "),a+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),!!Vn(r,i,h,!1,!1)&&(a+=r.dump,d+=a));r.tag=t,r.dump="{"+d+"}"}function sX(r,i,e,d){var t="",n=r.tag,u=Object.keys(e),s,o,h,a,l,c;if(r.sortKeys===!0)u.sort();else if(typeof r.sortKeys=="function")u.sort(r.sortKeys);else if(r.sortKeys)throw new Je("sortKeys must be a boolean or a function");for(s=0,o=u.length;s<o;s+=1)c="",(!d||t!=="")&&(c+=$v(r,i)),h=u[s],a=e[h],r.replacer&&(a=r.replacer.call(e,h,a)),!!Vn(r,i+1,h,!0,!0,!0)&&(l=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024,l&&(r.dump&&Mo===r.dump.charCodeAt(0)?c+="?":c+="? "),c+=r.dump,l&&(c+=$v(r,i)),!!Vn(r,i+1,a,!0,l)&&(r.dump&&Mo===r.dump.charCodeAt(0)?c+=":":c+=": ",c+=r.dump,t+=c));r.tag=n,r.dump=t||"{}"}function TC(r,i,e){var d,t,n,u,s,o;for(t=e?r.explicitTypes:r.implicitTypes,n=0,u=t.length;n<u;n+=1)if(s=t[n],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof i=="object"&&i instanceof s.instanceOf)&&(!s.predicate||s.predicate(i))){if(e?s.multi&&s.representName?r.tag=s.representName(i):r.tag=s.tag:r.tag="?",s.represent){if(o=r.styleMap[s.tag]||s.defaultStyle,iC.call(s.represent)==="[object Function]")d=s.represent(i,o);else if(nC.call(s.represent,o))d=s.represent[o](i,o);else throw new Je("!<"+s.tag+'> tag resolver accepts not "'+o+'" style');r.dump=d}return!0}return!1}function Vn(r,i,e,d,t,n,u){r.tag=null,r.dump=e,TC(r,e,!1)||TC(r,e,!0);var s=iC.call(r.dump),o=d,h;d&&(d=r.flowLevel<0||r.flowLevel>i);var a=s==="[object Object]"||s==="[object Array]",l,c;if(a&&(l=r.duplicates.indexOf(e),c=l!==-1),(r.tag!==null&&r.tag!=="?"||c||r.indent!==2&&i>0)&&(t=!1),c&&r.usedDuplicates[l])r.dump="*ref_"+l;else{if(a&&c&&!r.usedDuplicates[l]&&(r.usedDuplicates[l]=!0),s==="[object Object]")d&&Object.keys(r.dump).length!==0?(sX(r,i,r.dump,t),c&&(r.dump="&ref_"+l+r.dump)):(nX(r,i,r.dump),c&&(r.dump="&ref_"+l+" "+r.dump));else if(s==="[object Array]")d&&r.dump.length!==0?(r.noArrayIndent&&!u&&i>0?yC(r,i-1,r.dump,t):yC(r,i,r.dump,t),c&&(r.dump="&ref_"+l+r.dump)):(iX(r,i,r.dump),c&&(r.dump="&ref_"+l+" "+r.dump));else if(s==="[object String]")r.tag!=="?"&&eX(r,r.dump,i,n,o);else{if(s==="[object Undefined]")return!1;if(r.skipInvalid)return!1;throw new Je("unacceptable kind of an object to dump "+s)}r.tag!==null&&r.tag!=="?"&&(h=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),r.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",r.dump=h+" "+r.dump)}return!0}function rX(r,i){var e=[],d=[],t,n;for(Zv(r,e,d),t=0,n=d.length;t<n;t+=1)i.duplicates.push(e[d[t]]);i.usedDuplicates=new Array(n)}function Zv(r,i,e){var d,t,n;if(r!==null&&typeof r=="object")if(t=i.indexOf(r),t!==-1)e.indexOf(t)===-1&&e.push(t);else if(i.push(r),Array.isArray(r))for(t=0,n=r.length;t<n;t+=1)Zv(r[t],i,e);else for(d=Object.keys(r),t=0,n=d.length;t<n;t+=1)Zv(r[d[t]],i,e)}function aX(r,i){i=i||{};var e=new JW(i);e.noRefs||rX(r,e);var d=r;return e.replacer&&(d=e.replacer.call({"":d},"",d)),Vn(e,0,d,!0,!0)?e.dump+`
`:""}var oX=aX,hX={dump:oX};function Jv(r,i){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+i+" instead, which is now safe by default.")}}var lX=Be,uX=S1,fX=A1,dX=I1,vX=w1,cX=Yv,pX=eC.load,gX=eC.loadAll,mX=hX.dump,xX=Je,yX={binary:b1,float:F1,map:M1,null:R1,pairs:Y1,set:U1,timestamp:G1,bool:O1,int:L1,merge:N1,omap:z1,seq:P1,str:E1},TX=Jv("safeLoad","load"),CX=Jv("safeLoadAll","loadAll"),SX=Jv("safeDump","dump"),Qv={Type:lX,Schema:uX,FAILSAFE_SCHEMA:fX,JSON_SCHEMA:dX,CORE_SCHEMA:vX,DEFAULT_SCHEMA:cX,load:pX,loadAll:gX,dump:mX,YAMLException:xX,types:yX,safeLoad:TX,safeLoadAll:CX,safeDump:SX},Se=function(r,i){if(i===void 0)return r;if(r.hasOwnProperty("name")&&su(r,i[`#${r.name}`]),r.hasOwnProperty("$class"))for(var e=r.$class.split(" "),d=0,t=e.length;d<t;d++)su(r,i[`.${e[d]}`]);return r.hasOwnProperty("$type")&&su(r,i[r.$type]),r},su=function(r,i){if(i===void 0)return r;for(var e in i)if(!r.hasOwnProperty(e))r[e]=Th(i[e]);else{var d=r[e];d&&typeof d=="object"&&su(d,i[e])}return r},CC=["tint","alpha","visible","flipX","flipY"],Xr=function(r,i){for(var e=0,d=CC.length;e<d;e++){var t=CC[e],n=i[t];n!==void 0&&(r[t]=n)}return i.cropResize&&!r.resize&&(r.resize=function(u,s){return r.setCrop(0,0,u,s),r}),r},EX=Phaser.GameObjects.Image,SC=function(r,i,e,d){i=Se(i,e);var t=new EX(r,0,0,i.key,i.frame);return i.width!==void 0&&t.setDisplayWidth(i.width),i.height!==void 0&&t.setDisplayHeight(i.height),Xr(t,i),r.add.existing(t),t},PX=Phaser.GameObjects.Text,EC=function(r,i,e,d){i=Se(i,e);var t=new PX(r,0,0,i.text,i);return Xr(t,i),r.add.existing(t),t},Wn=Phaser.Utils.Objects.GetValue,AX=function(r,i){i===void 0&&(i={});var e=r.scene,d=r.style,t=Wn(i,"backgroundColor",d.backgroundColor);t===null&&(t="transparent"),i.text=Wn(i,"text",r.text),i.fontFamily=Wn(i,"fontFamily",d.fontFamily),i.fontSize=Wn(i,"fontSize",d.fontSize),i.color=Wn(i,"color",d.color),i.backgroundColor=t,i.direction=Wn(i,"rtl",d.rtl)?"rtl":"ltr",i.align=Wn(i,"align",MX(d)),i.direction==="rtl"&&Vl(r)&&(i.align="right");var n=new bh(e,r.x,r.y,Wn(i,"width",r.width),Wn(i,"height",r.height),i);return n.setOrigin(r.originX,r.originY),e.add.existing(n),n},MX=function(r){return r.hasOwnProperty("align")?r.align:r.hasOwnProperty("halign")?r.halign:"left"},ru=Phaser.Utils.Objects.GetValue,Hr=void 0,kv=class extends Me{constructor(i){super(i,{eventEmitter:!1});this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(i){this.isShutdown||(this.close(),Hr===this&&(Hr=void 0),super.shutdown(i))}open(i,e){Hr!==void 0&&Hr.close(),Hr=this,cl(i)&&(e=i,i=void 0),e===void 0&&(e=ru(i,"onClose",void 0));var d=ru(i,"onOpen",void 0),t=ru(i,"onTextChanged",void 0);return this.inputText=AX(this.parent,i).on("textchange",function(n){var u=n.text;t?t(this.parent,u):this.parent.text=u},this).setFocus(),this.parent.setVisible(!1),this.onClose=e,ru(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),d&&d(this.parent)},[],this),this}close(){return Hr=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}};var au=class extends ca{constructor(i,e,d,t,n){var u=new Gh(n);super(i,e,d,t,n,"rexBBCodeText",u)}},PC=function(r,i){var e=new Bv(r,i);return e.on("open",function(){r.emit("modal.open",e)}),e.on("close",function(d){r.emit("modal.close",d,e)}),r.on("modal.requestClose",e.requestClose,e),e.on("close",function(){r.off("modal.requestClose",e.requestClose,e)}),e},RX=function(r,i){var e=PC(r,i);return new Promise(function(d,t){e.once("close",function(n){d(n)})})},OX=function(r,i){r.emit("modal.requestClose",i)},ou=function(r){if(typeof r=="string")try{return Qv.load(r)}catch(i){console.log(i);return}return r},LX=function(r,i){if(r.hasOwnProperty("$type"))return r.$type;if(r.hasOwnProperty("name")){var e=i[`#${r.name}`];if(e&&e.hasOwnProperty("$type"))return e.$type}if(r.hasOwnProperty("$class"))for(var d=r.$class.split(" "),t=0,n=d.length;t<n;t++){var e=i[`.${d[t]}`];if(e&&e.hasOwnProperty("$type"))return e.$type}},FX=function(r,i,e,d){i=Se(i,e);var t=new au(r,0,0,i.text,i);return Xr(t,i),r.add.existing(t),t},IX=function(r,i,e,d){i=Se(i,e);var t=i.width===void 0?1:i.width,n=i.height===void 0?1:i.height,u=new Zi(r,0,0,t,n,i.radius);if(i.color!==void 0&&u.setFillStyle(i.color),i.strokeColor!==void 0){var s=i.strokeWidth;s===void 0&&(s=2),u.setStrokeStyle(s,i.strokeColor)}return r.add.existing(u),u},wX=function(r,i,e,d){i=Se(i,e);var t=new or(r,i);return Xr(t,i),r.add.existing(t),t},DX=function(r,i,e,d){i=Se(i,e);var t=new ur(r,i);return r.add.existing(t),t},BX=function(r,i,e,d){i=Se(i,e);var t=i.width||1,n=i.height||1,u=new Ji(r,0,0,t,n);return i.fill!==void 0&&u.fill(i.fill),Xr(u,i),r.add.existing(u),u},At=function(r,i,e,d,t){var n=i[e];if(!!n){var u;return u=hu(r,n,d,t),i[e]=u,u}},MC=function(r,i,e,d){if(i){Array.isArray(i)||(i=[i]);for(var t=0,n=i.length;t<n;t++){var u=i[t];u.$child||(u={$child:u},i[t]=u),At(r,u,"$child",e,d)}}return i},Lo=function(r,i,e,d,t){i=Se(i,e);var n=MC(r,i.background,e,d),u=MC(r,i.children,e,d),s=new t(r,i);if(r.add.existing(s),n)for(var o=0,h=n.length;o<h;o++){var a=n[o];s.addBackground(a.$child,a.padding)}if(u)for(var o=0,h=u.length;o<h;o++){var a=u[o];s.add(a.$child,a)}return s},GX=function(r,i,e,d){return Lo(r,i,e,d,ne)},NX=function(r,i,e,d){return Lo(r,i,e,d,mn)},bX=function(r,i,e,d){var t=i.createCellContainerCallback;if(t){var n=t.$child;delete t.$child,i.createCellContainerCallback=function(u,s,o,h){var a=hu(u,n,e,d);for(var l in t)h[l]=t[l];return a}}return Lo(r,i,e,d,tn)},zX=function(r,i,e,d){return Lo(r,i,e,d,qi)},ms=function(r,i,e,d,t){var n=i[e];if(!!n){if(Array.isArray(n))for(var u=0,s=n.length;u<s;u++)Array.isArray(n[u])?ms(r,n,u,d,t):At(r,n,u,d,t);else for(var o in n)At(r,n,o,d,t);return n}},YX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),ms(r,i,"buttons",e,d);var t=new ye(r,i);return r.add.existing(t),t},UX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),ms(r,i,"buttons",e,d);var t=new yn(r,i);return r.add.existing(t),t},VX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d);var t=i.buttons;if(t)for(var n=0,u=t.length;n<u;n++)ms(r,t,n,e,d);var s=i.createCellContainerCallback;if(s){var o=s.$child;delete s.$child,i.createCellContainerCallback=function(a,l,c,f){var v=hu(a,o,e,d);for(var p in s)f[p]=s[p];return v}}var h=new Vs(r,i);return r.add.existing(h),h},jv=function(r,i,e,d,t){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"icon",e,d),At(r,i,"text",e,d),At(r,i,"action",e,d);var n=new t(r,i);return r.add.existing(n),n},WX=function(r,i,e,d){return jv(r,i,e,d,nn)},XX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"main",e,d),At(r,i,"leftTop",e,d),At(r,i,"centerTop",e,d),At(r,i,"rightTop",e,d),At(r,i,"leftCenter",e,d),At(r,i,"center",e,d),At(r,i,"rightCenter",e,d),At(r,i,"leftBottom",e,d),At(r,i,"centerBottom",e,d),At(r,i,"rightBottom",e,d);var t=new mo(r,i);return r.add.existing(t),t},HX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"toolbarBackground",e,d),At(r,i,"leftToolbarBackground",e,d),At(r,i,"choicesBackground",e,d),At(r,i,"actionsBackground",e,d),At(r,i,"title",e,d),ms(r,i,"toolbar",e,d),ms(r,i,"leftToolbar",e,d),At(r,i,"content",e,d),At(r,i,"description",e,d),ms(r,i,"choices",e,d),ms(r,i,"actions",e,d);var t=new Br(r,i);return r.add.existing(t),t},$X=function(r,i,e,d){return jv(r,i,e,d,po)},KX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"track",e,d),At(r,i,"indicator",e,d),At(r,i,"thumb",e,d);var t=new fs(r,i);return r.add.existing(t),t},AC=function(r,i,e,d){if(i){At(r,i,"background",e,d),At(r,i,"track",e,d),At(r,i,"indicator",e,d),At(r,i,"thumb",e,d);var t=i.buttons;t&&(At(r,t,"top",e,d),At(r,t,"bottom",e,d),At(r,t,"left",e,d),At(r,t,"right",e,d))}return i},ZX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"icon",e,d),AC(r,i.slider,e,d),At(r,i,"text",e,d);var t=new go(r,i);return r.add.existing(t),t},JX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"text",e,d),AC(r,i.slider,e,d),At(r,i,"header",e,d),At(r,i,"footer",e,d);var t=new Nr(r,i);return r.add.existing(t),t},QX=function(r,i,e,d){return Lo(r,i,e,d,Ws)},kX=function(r,i,e,d){return jv(r,i,e,d,Co)},jX=function(r,i,e,d){i=Se(i,e),At(r,i,"background",e,d),At(r,i,"content",e,d),At(r,i,"leftSide",e,d),At(r,i,"rightSide",e,d),At(r,i,"header",e,d),At(r,i,"footer",e,d);var t=new ro(r,i);return r.add.existing(t),t},qX={Image:SC,Text:EC,BBCodeText:FX,RoundRectangle:IX,Ninepatch:wX,Ninepatch2:DX,Canvas:BX,Sizer:GX,FixWidthSizer:NX,GridSizer:bX,OverlapSizer:zX,Buttons:YX,FixWidthButtons:UX,GridButtons:VX,Label:WX,BadgeLabel:XX,Dialog:HX,TextBox:$X,Slider:KX,NumberBar:ZX,TextArea:JX,Pages:QX,Toast:kX,HolyGrail:jX},hu=function(r,i,e,d){var t=LX(i,e);if(!t){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(i)}`);return}var n;if(d&&(n=d[t]),n||(n=qX[t]),!n){console.warn(`rexUI.Make: Can't create ${t} game object.`);return}var u=n(r,i,e,d);return i.name&&u.setName(i.name),u},RC=function(r,i,e,d){if(i=ou(i),Array.isArray(i))i=i[i.length-1];else if(i.$root){var t=i;if(i=i.$root,delete t.$root,e===void 0)e=t;else for(var n in t)e[n]||(e[n]=t[n])}e=ou(e);var u=hu(r,i,e,d);return u},lu=class{constructor(i,e,d){this.setScene(i),this.setStyles(e),this.setCustomBuilders(d)}setScene(i){return this.scene=i,this}setStyles(i){return this.styles=ou(i),this}addStyle(i,e){return this.styles===void 0&&(this.styles={}),this.styles[i]=ou(e),this}clearStyles(){return this.setStyles(),this}setCustomBuilders(i){return this.customBuilders=i,this}addCustomBuilder(i,e){return this.customBuilders===void 0&&(this.customBuilders={}),this.customBuilders[i]=e,this}clearCustomBuilder(){return this.setCustomBuilders(),this}make(i){return RC(this.scene,i,this.styles,this.customBuilders)}},_X=function(r,i,e){return r._edit||(r._edit=new kv(r)),r._edit.open(i,e),r._edit},tH=function(r){var i=function(e){var d=r.padding,t=e-d.left-d.right,n=r.style;return Vl(r)?(n.wordWrapWidth=t,n.maxLines=0):(n.wrapMode===0&&(n.wrapMode=1),n.wrapWidth=t,n.maxLines=0),r.setFixedSize(e,0),r};return i},eH=function(r){var i=function(e){return r.setFixedSize(e,0).runWordWrap(),r};return i},iH=function(r){var i=function(e){return r.setMaxWidth(e),r};return i},nH=function(r){return r instanceof Bs},sH=function(r,i){return i===void 0&&(i=0),r._minWidth=i,r.runWidthWrap=nH(r)?eH(r):yv(r)?iH(r):tH(r),r},rH=function(r,i){return r===void 0&&(r=0),new Promise(function(e,d){setTimeout(function(){e(i)},r)})},xt=class{constructor(i){this.scene=i,this.displayList=i.sys.displayList,this.updateList=i.sys.updateList,i.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(i,e){xt.prototype[i]=e}},OC=function(r){return r==null||r===""||r.length===0},aH=function(r,i,e){var d=r;if(!OC(i)){typeof i=="string"&&(i=i.split("."));for(var t,n=0,u=i.length;n<u;n++){if(t=i[n],d[t]==null||typeof d[t]!="object"){var s;n===u-1?e===void 0?s={}:s=e:s={},d[t]=s}d=d[t]}}return d},Ct=function(r,i,e,d){if(d===void 0&&(d="."),typeof r=="object"){if(OC(i)){if(e==null)return;typeof e=="object"&&(r=e)}else{typeof i=="string"&&(i=i.split(d));var t=i.pop(),n=aH(r,i);n[t]=e}return r}};xt.register("ninePatch",function(r,i,e,d,t,n,u,s){var o=new or(this.scene,r,i,e,d,t,n,u,s);return this.scene.add.existing(o),o});Ct(window,"RexPlugins.UI.NinePatch",or);xt.register("ninePatch2",function(r,i,e,d,t,n,u,s){var o=new ur(this.scene,r,i,e,d,t,n,u,s);return this.scene.add.existing(o),o});Ct(window,"RexPlugins.UI.NinePatch2",ur);xt.register("roundRectangle",function(r,i,e,d,t,n,u){var s=new Zi(this.scene,r,i,e,d,t,n,u);return this.scene.add.existing(s),s});Ct(window,"RexPlugins.UI.RoundRectangle",Zi);xt.register("roundRectangleCanvas",function(r,i,e,d,t,n,u,s,o,h){var a=new Oh(this.scene,r,i,e,d,t,n,u,s,o,h);return this.scene.add.existing(a),a});Ct(window,"RexPlugins.UI.RoundRectangleCanvas",Oh);xt.register("BBCodeText",function(r,i,e,d){var t=new au(this.scene,r,i,e,d);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.BBCodeText",au);xt.register("tagText",function(r,i,e,d){var t=new Nh(this.scene,r,i,e,d);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.TagText",Nh);xt.register("hiddenEdit",function(r,i){var e=new zh(r,i);return e});Ct(window,"RexPlugins.UI.HiddenEdit",zh);xt.register("container",function(r,i,e,d,t){var n=new ii(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.Container",ii);xt.register("canvas",function(r,i,e,d){var t=new Ji(this.scene,r,i,e,d);return this.scene.add.existing(t),t});Ct(window,"RexPlugins.UI.Canvas",Ji);xt.register("circleMaskImage",function(r,i,e,d,t){var n=new Wh(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CircleMaskImage",Wh);xt.register("dynamicText",function(r,i,e,d,t){var n=new Bs(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.DynamicText",Bs);xt.register("textPlayer",function(r,i,e,d,t){var n=new Ea(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.TextPlayer",Ea);xt.register("circularProgressCanvas",function(r,i,e,d,t,n){var u=new Aa(this.scene,r,i,e,d,t,n);return this.scene.add.existing(u),u});Ct(window,"RexPlugins.UI.CircularProgressCanvas",Aa);xt.register("circularProgress",function(r,i,e,d,t,n){var u=new yr(this.scene,r,i,e,d,t,n);return this.scene.add.existing(u),u});Ct(window,"RexPlugins.UI.CircularProgress",yr);xt.register("knob",function(r){var i=new Za(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Knob",Za);xt.register("customShapes",function(r,i,e,d,t){var n=new Lr(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CustomShapes",Lr);xt.register("customProgress",function(r,i,e,d,t){var n=new Qa(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.CustomProgress",Qa);xt.register("transitionImage",function(r,i,e,d,t){var n=new ka(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.TransitionImage",ka);xt.register("fullWindowRectangle",function(r,i){var e=new ja(this.scene,r,i);return this.scene.add.existing(e),e});Ct(window,"RexPlugins.UI.FullWindowRectangle",ja);xt.register("cover",function(r){var i=new _a(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Cover",_a);xt.register("chart",function(r,i,e,d,t){var n=new to(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.Chart",to);xt.register("sizer",function(r,i,e,d,t,n){var u=new ne(this.scene,r,i,e,d,t,n);return this.scene.add.existing(u),u});Ct(window,"RexPlugins.UI.Sizer",ne);xt.register("gridSizer",function(r,i,e,d,t,n,u,s,o){var h=new tn(this.scene,r,i,e,d,t,n,u,s,o);return this.scene.add.existing(h),h});Ct(window,"RexPlugins.UI.GridSizer",tn);xt.register("fixWidthSizer",function(r,i,e,d,t){var n=new mn(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.FixWidthSizer",mn);xt.register("overlapSizer",function(r,i,e,d,t){var n=new qi(this.scene,r,i,e,d,t);return this.scene.add.existing(n),n});Ct(window,"RexPlugins.UI.OverlapSizer",qi);xt.register("space",function(){var r=new eo(this.scene);return r});Ct(window,"RexPlugins.UI.Space",eo);xt.register("label",function(r){var i=new nn(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Label",nn);xt.register("buttons",function(r){var i=new ye(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Buttons",ye);xt.register("gridButtons",function(r){var i=new Vs(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.GridButtons",Vs);xt.register("fixWidthButtons",function(r){var i=new yn(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.FixWidthButtons",yn);xt.register("dialog",function(r){var i=new Br(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Dialog",Br);xt.register("holyGrail",function(r){var i=new ro(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.HolyGrail",ro);xt.register("tabs",function(r){var i=new ao(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Tabs",ao);xt.register("slider",function(r){var i=new fs(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Slider",fs);xt.register("gridTable",function(r){var i=new lo(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.GridTable",lo);xt.register("menu",function(r){var i=new uo(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Menu",uo);xt.register("dropDownList",function(r){var i=new fo(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.DropDownList",fo);xt.register("textBox",function(r){var i=new po(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.TextBox",po);xt.register("numberBar",function(r){var i=new go(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.NumberBar",go);xt.register("scrollBar",function(r){var i=new oo(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.ScrollBar",oo);xt.register("badgeLabel",function(r){var i=new mo(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.BadgeLabel",mo);xt.register("pages",function(r){var i=new Ws(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Pages",Ws);xt.register("tabPages",function(r){var i=new xo(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.TabPages",xo);xt.register("textArea",function(r){var i=new Nr(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.TextArea",Nr);xt.register("scrollablePanel",function(r){var i=new Hs(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.ScrollablePanel",Hs);xt.register("toast",function(r){var i=new Co(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Toast",Co);xt.register("sides",function(r){var i=new So(this.scene,r);return this.scene.add.existing(i),i});Ct(window,"RexPlugins.UI.Sides",So);xt.register("click",function(r,i){return new as(r,i)});Ct(window,"RexPlugins.UI.Click",as);xt.register("clickOutside",function(r,i){return new Va(r,i)});Ct(window,"RexPlugins.UI.ClickOutside",Va);var oH=Phaser.GameObjects.GameObject,uu=function(r){return r instanceof oH};xt.register("tap",function(r,i){return uu(r)||(i=r,r=this.scene),new Pr(r,i)});Ct(window,"RexPlugins.UI.Tap",Pr);xt.register("press",function(r,i){return uu(r)||(i=r,r=this.scene),new Rr(r,i)});Ct(window,"RexPlugins.UI.Press",Rr);xt.register("swipe",function(r,i){return uu(r)||(i=r,r=this.scene),new Ys(r,i)});Ct(window,"RexPlugins.UI.Swipe",Ys);xt.register("pan",function(r,i){return uu(r)||(i=r,r=this.scene),new xl(r,i)});Ct(window,"RexPlugins.UI.Pan",xl);xt.register("drag",function(r,i){return new Kl(r,i)});Ct(window,"RexPlugins.UI.Drag",Kl);xt.register("pinch",function(r){return new Sl(this.scene,r)});Ct(window,"RexPlugins.UI.Pinch",Sl);xt.register("rotate",function(r){return new $a(this.scene,r)});Ct(window,"RexPlugins.UI.Rotate",$a);xt.register("flip",function(r,i){return new Zl(r,i)});Ct(window,"RexPlugins.UI.Flip",Zl);xt.register("shake",function(r,i){return new ba(r,i)});Ct(window,"RexPlugins.UI.Shake",ba);xt.register("touchEventStop",function(r,i){return new qa(r,i)});Ct(window,"RexPlugins.UI.TouchEventStop",qa);xt.register("perspective",function(r,i){return new kl(r,i)});Ct(window,"RexPlugins.UI.Perspective",kl);xt.register("anchor",function(r,i){return new Da(r,i)});Ct(window,"RexPlugins.UI.Anchor",Da);xt.register("maker",function(r,i){return new lu(this.scene,r,i)});Ct(window,"RexPlugins.UI.Maker",lu);var qv=class extends Phaser.Plugins.ScenePlugin{constructor(i,e){super(i,e);this.add=new xt(i)}start(){var i=this.scene.events;i.on("destroy",this.destroy,this)}isInTouching(i,e,d,t){return i.visible?vl(i,e,d,t):!1}get viewport(){return Tr(this.scene,!0)}make(i,e,d,t){return RC(this.scene,i,e,d)}get maker(){return this._maker||(this._maker=new lu(this.scene)),this._maker}},hH={getParentSizer:fn,getTopmostSizer:jf,hide:zn,show:bn,isShown:dl,edit:_X,wrapExpandText:sH,waitEvent:jh,waitComplete:De,delayPromise:rH,setChildrenInteractive:Ml,fadeIn:Ba,fadeOutDestroy:Ga,easeMoveTo:Bd,easeMoveFrom:Gd,modal:PC,modalPromise:RX,modalClose:OX,requestDrag:Iv,yaml:Qv};Object.assign(qv.prototype,hH);var LC=qv;var _v=class extends Phaser.Scene{constructor(){super("preloader")}preload(){this.load.image("acho","assets/acho.png"),this.load.bitmapFont("gothic","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.png","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.xml")}create(){let i=this.add.graphics();i.fillStyle(16777215,1),i.fillRoundedRect(10,10,180,180,32),i.generateTexture("tile",200,200),this.scene.start("splash")}},FC=_v;var $r={BoardDone:"boardDone",GameStart:"gameStart"},lH=new Os.Events.EventEmitter,Kr=lH;function fu(r){let i=0;for(let e=3;e<=r.length;e++)switch(e){case 3:i+=100;break;case 4:i+=300;break;case 6:i+=600;break;default:i+=400}return i}function IC(r,i,e){return i<0||e<0||i>r.width||e>r.height}var du="http://leet.dabe.tech:3000";async function wC(r){return await fetch(`${du}/who/board/${r}`,{method:"GET",mode:"cors"})}async function tc(r){return await fetch(`${du}/who/session/${r}`,{method:"GET",mode:"cors"})}async function DC(r,i,e){try{return await fetch(`${du}/result/${r}/${i}`,{method:"POST",mode:"cors",body:JSON.stringify(e)})}catch(d){Mn&&(console.error(`sessionId: ${r}`),console.error(`userId: ${i}`),console.error("data:"),console.error(e),console.error(d))}}var ic=class extends Phaser.Scene{constructor(){super({key:"board",visible:!1});this.tileGrid=[],this.currentChain=[],this.foundWords=new Set,this.isDragging=!1,this.boardWords=new Set,this.curScore=0,this.GRID_SIZE=4,this.GAME_TIME_SECS=80,this.DRAG_COLOR=16106392,this.REPEAT_COLOR=15589182,this.IDLE_COLOR=11358464;for(let i=0;i<this.GRID_SIZE;i++)this.tileGrid.push([])}async create(){Kr.on($r.GameStart,this.handleGameStart,this),Mn&&this.input.keyboard.addKey("E").on("down",this.handleGameEnd,this);let i=this.game.config.width;this.LETTER_SPRITE_SIZE=typeof i=="string"?parseInt(i)/(this.GRID_SIZE+1):i/(this.GRID_SIZE+1),this.imageGroup=this.add.group(),this.tileContainerGroup=this.add.group(),this.input.addListener("pointerup",()=>{this.endChain()}),console.log(xs);let d=await(await wC(xs??"")).json();Mn&&(console.log("Board data:"),console.log(d)),this.boardWords=new Set(d.words),this.drawBoard(d.board),console.log(this.tileGrid[0][0].container?.getBounds().y),this.gameTimeText=this.add.text(this.cameras.main.centerX,(this.tileGrid[0][0].container?.getBounds().y??80)/2,"Time remaining:",{color:"black",fontSize:`${Math.floor((this.tileGrid[0][0].container?.getBounds().y??80)/2)}px`}).setOrigin(.5).setVisible(!1),this.imageGroup.setTint(this.IDLE_COLOR),Kr.emit($r.BoardDone)}update(){this.gameTimer&&this.gameTimeText.visible&&this.gameTimeText.setText(`Time remaining: ${Math.ceil(this.gameTimer.getRemainingSeconds())} seconds`)}updateChainColors(i){this.currentChain.forEach(e=>(e.container?.getByName("image")).setTint(i))}handleGameStart(){this.gameTimeText.setVisible(!0),this.gameTimer=this.time.delayedCall(this.GAME_TIME_SECS*1e3,this.handleGameEnd,[],this)}handleGameEnd(){Mn&&console.log("Game over!"),DC(xs??"",ec??"",{score:this.curScore,words:Array.from(this.foundWords)}),this.scene.switch("result")}drawBoard(i){for(let d=0;d<this.GRID_SIZE;d++)for(let t=0;t<this.GRID_SIZE;t++){let n=this.add.image(0,0,"tile").setDisplaySize(this.LETTER_SPRITE_SIZE,this.LETTER_SPRITE_SIZE).setName("image"),u=this.add.container(this.cameras.main.width/2+(t-this.GRID_SIZE/2)*this.LETTER_SPRITE_SIZE+this.LETTER_SPRITE_SIZE/2,this.cameras.main.height/2+(d-this.GRID_SIZE/2)*this.LETTER_SPRITE_SIZE+this.LETTER_SPRITE_SIZE/2,n).setVisible(!1),s={letter:i[d*this.GRID_SIZE+t],container:u,row:d,col:t};u.add(this.add.text(0,0,s.letter.toUpperCase(),{color:"black",fontSize:`${this.LETTER_SPRITE_SIZE/2}px`}).setOrigin(.5)),this.tileGrid[d][t]=s,this.imageGroup.add(n),this.tileContainerGroup.add(u),u.setInteractive(new Phaser.Geom.Circle(0,0,n.displayHeight/2),Phaser.Geom.Circle.Contains).on("pointerover",()=>{this.handleAddToChain(s)}).on("pointerdown",()=>{this.startChain(s)}),Mn&&this.input.enableDebug(u,255),u.setVisible(!0)}let e=this.tileGrid[0][0].container;if(e){let d=this.add.rectangle(e.getBounds().x,e.getBounds().y,this.LETTER_SPRITE_SIZE*this.GRID_SIZE,this.LETTER_SPRITE_SIZE*this.GRID_SIZE).setOrigin(0,0).setInteractive(new Phaser.Geom.Rectangle(e.getBounds().x,e.getBounds().y,this.LETTER_SPRITE_SIZE*this.GRID_SIZE,this.LETTER_SPRITE_SIZE*this.GRID_SIZE),IC).on("pointerover",()=>this.endChain()).setDepth(-1);Mn&&d.setStrokeStyle(2,65280)}else console.error("There was a timing issue..."),console.error("Bounding box tried to draw before top left container was defined"),this.game.destroy(!0,!0);this.scene.setVisible(!0)}startChain(i){this.isDragging=!0,this.handleAddToChain(i)}handleAddToChain(i){if(this.isDragging)if(this.currentChain.includes(i))this.currentChain.length>1&&this.endChain();else{let e=this.currentChain.length>0?this.currentChain[this.currentChain.length-1]:void 0;if(e&&Phaser.Math.Distance.Between(e.row,e.col,i.row,i.col)>Math.sqrt(2))if(e.container&&i.container){let d=new Phaser.Geom.Line(e.container.x,e.container.y,i.container.x,i.container.y);for(let t of this.tileGrid.flat()){let n=t.container;Phaser.Geom.Intersects.LineToCircle(d,new Phaser.Geom.Circle(n.x,n.y,n.input.hitArea.radius))&&this.addToChain(t)}}else console.error("Containers not initialized"),this.game.destroy(!0,!0);this.addToChain(i)}}addToChain(i){if(!this.currentChain.includes(i)){this.currentChain.push(i);let e=this.currentChain.map(d=>d.letter).join("");this.foundWords.has(e)?this.updateChainColors(this.REPEAT_COLOR):this.boardWords.has(e)?this.updateChainColors(Fo):this.updateChainColors(this.DRAG_COLOR)}}endChain(){if(this.isDragging){this.imageGroup.setTint(this.IDLE_COLOR);let i=this.currentChain.map(e=>e.letter).join("");if(!this.foundWords.has(i)&&this.boardWords.has(i)){let e=fu(i);Mn&&console.log(`Found word "${i}" of score: ${e}`),this.curScore+=e,this.foundWords.add(i)}this.currentChain=[]}this.isDragging=!1,console.log(`cur score: ${this.curScore}`)}},BC=ic;var rc=class extends Phaser.Scene{constructor(){super({key:"splash"});this.boardDone=!1}create(){Kr.on($r.BoardDone,this.boardDoneHandler,this),this.add.bitmapText(this.cameras.main.centerX,300,"gothic","Connect letters together to make as many words as you can.").setOrigin(.5).setDepth(3).setTintFill(0).setMaxWidth(600).setCenterAlign().setFontSize(30),this.add.rectangle(this.cameras.main.centerX,this.cameras.main.centerY,this.cameras.main.width,this.cameras.main.height,16777215).setDepth(2).setInteractive(),this.startButton=this.add.rectangle(0,0,this.cameras.main.width*.3,this.cameras.main.height*.1,nc).setName("button").on("pointerdown",this.startButtonHandler,this),this.startButtonText=this.add.bitmapText(0,0,"gothic","Start!").setOrigin(.5),this.startButtonContainer=this.add.container(this.cameras.main.centerX,Math.floor(this.cameras.main.height*.75)).add(this.startButton).add(this.startButtonText).setDepth(3),sc?this.scene.switch("result"):this.scene.launch("board")}startButtonHandler(){Kr.emit($r.GameStart),this.scene.stop()}boardDoneHandler(){this.startButtonContainer.getByName("button").setInteractive(),this.startButtonContainer&&(this.startButton.fillColor=Fo),this.boardDone=!0}},GC=rc;var uH=yh(function(r,i){(function(){var e,d="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",h=500,a="__lodash_placeholder__",l=1,c=2,f=4,v=1,p=2,g=1,m=2,x=4,y=8,T=16,C=32,S=64,E=128,M=256,R=512,L=30,O="...",F=800,D=16,B=1,b=2,V=3,X=1/0,K=9007199254740991,J=17976931348623157e292,G=0/0,w=4294967295,N=w-1,z=w>>>1,U=[["ary",E],["bind",g],["bindKey",m],["curry",y],["curryRight",T],["flip",R],["partial",C],["partialRight",S],["rearg",M]],W="[object Arguments]",H="[object Array]",Z="[object AsyncFunction]",q="[object Boolean]",_="[object Date]",nt="[object DOMException]",rt="[object Error]",at="[object Function]",vt="[object GeneratorFunction]",ut="[object Map]",ct="[object Number]",Ft="[object Null]",yt="[object Object]",Tt="[object Promise]",dt="[object Proxy]",It="[object RegExp]",gt="[object Set]",Pt="[object String]",ge="[object Symbol]",Ge="[object Undefined]",Ht="[object WeakMap]",Vt="[object WeakSet]",te="[object ArrayBuffer]",qt="[object DataView]",ee="[object Float32Array]",Ee="[object Float64Array]",hi="[object Int8Array]",li="[object Int16Array]",ui="[object Int32Array]",fi="[object Uint8Array]",di="[object Uint8ClampedArray]",vi="[object Uint16Array]",Zr="[object Uint32Array]",zC=/\b__p \+= '';/g,YC=/\b(__p \+=) '' \+/g,UC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hc=/&(?:amp|lt|gt|quot|#39);/g,lc=/[&<>"']/g,VC=RegExp(hc.source),WC=RegExp(lc.source),XC=/<%-([\s\S]+?)%>/g,HC=/<%([\s\S]+?)%>/g,uc=/<%=([\s\S]+?)%>/g,$C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,KC=/^\w*$/,ZC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vu=/[\\^$.*+?()[\]{}|]/g,JC=RegExp(vu.source),cu=/^\s+/,QC=/\s/,kC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jC=/\{\n\/\* \[wrapped with (.+)\] \*/,qC=/,? & /,_C=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tS=/[()=,{}\[\]\/\s]/,eS=/\\(\\)?/g,iS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fc=/\w*$/,nS=/^[-+]0x[0-9a-f]+$/i,sS=/^0b[01]+$/i,rS=/^\[object .+?Constructor\]$/,aS=/^0o[0-7]+$/i,oS=/^(?:0|[1-9]\d*)$/,hS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Io=/($^)/,lS=/['\n\r\u2028\u2029\\]/g,wo="\\ud800-\\udfff",uS="\\u0300-\\u036f",fS="\\ufe20-\\ufe2f",dS="\\u20d0-\\u20ff",dc=uS+fS+dS,vc="\\u2700-\\u27bf",cc="a-z\\xdf-\\xf6\\xf8-\\xff",vS="\\xac\\xb1\\xd7\\xf7",cS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pS="\\u2000-\\u206f",gS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pc="A-Z\\xc0-\\xd6\\xd8-\\xde",gc="\\ufe0e\\ufe0f",mc=vS+cS+pS+gS,pu="['’]",mS="["+wo+"]",xc="["+mc+"]",Do="["+dc+"]",yc="\\d+",xS="["+vc+"]",Tc="["+cc+"]",Cc="[^"+wo+mc+yc+vc+cc+pc+"]",gu="\\ud83c[\\udffb-\\udfff]",yS="(?:"+Do+"|"+gu+")",Sc="[^"+wo+"]",mu="(?:\\ud83c[\\udde6-\\uddff]){2}",xu="[\\ud800-\\udbff][\\udc00-\\udfff]",Zs="["+pc+"]",Ec="\\u200d",Pc="(?:"+Tc+"|"+Cc+")",TS="(?:"+Zs+"|"+Cc+")",Mc="(?:"+pu+"(?:d|ll|m|re|s|t|ve))?",Ac="(?:"+pu+"(?:D|LL|M|RE|S|T|VE))?",Rc=yS+"?",Oc="["+gc+"]?",CS="(?:"+Ec+"(?:"+[Sc,mu,xu].join("|")+")"+Oc+Rc+")*",SS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ES="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lc=Oc+Rc+CS,PS="(?:"+[xS,mu,xu].join("|")+")"+Lc,MS="(?:"+[Sc+Do+"?",Do,mu,xu,mS].join("|")+")",AS=RegExp(pu,"g"),RS=RegExp(Do,"g"),yu=RegExp(gu+"(?="+gu+")|"+MS+Lc,"g"),OS=RegExp([Zs+"?"+Tc+"+"+Mc+"(?="+[xc,Zs,"$"].join("|")+")",TS+"+"+Ac+"(?="+[xc,Zs+Pc,"$"].join("|")+")",Zs+"?"+Pc+"+"+Mc,Zs+"+"+Ac,ES,SS,yc,PS].join("|"),"g"),LS=RegExp("["+Ec+wo+dc+gc+"]"),FS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,IS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wS=-1,re={};re[ee]=re[Ee]=re[hi]=re[li]=re[ui]=re[fi]=re[di]=re[vi]=re[Zr]=!0,re[W]=re[H]=re[te]=re[q]=re[qt]=re[_]=re[rt]=re[at]=re[ut]=re[ct]=re[yt]=re[It]=re[gt]=re[Pt]=re[Ht]=!1;var ie={};ie[W]=ie[H]=ie[te]=ie[qt]=ie[q]=ie[_]=ie[ee]=ie[Ee]=ie[hi]=ie[li]=ie[ui]=ie[ut]=ie[ct]=ie[yt]=ie[It]=ie[gt]=ie[Pt]=ie[ge]=ie[fi]=ie[di]=ie[vi]=ie[Zr]=!0,ie[rt]=ie[at]=ie[Ht]=!1;var DS={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},BS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},GS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},NS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bS=parseFloat,zS=parseInt,Fc=typeof qn=="object"&&qn&&qn.Object===Object&&qn,YS=typeof self=="object"&&self&&self.Object===Object&&self,Le=Fc||YS||Function("return this")(),Tu=i&&!i.nodeType&&i,ys=Tu&&!0&&r&&!r.nodeType&&r,Ic=ys&&ys.exports===Tu,Cu=Ic&&Fc.process,Mi=function(){try{var et=ys&&ys.require&&ys.require("util").types;return et||Cu&&Cu.binding&&Cu.binding("util")}catch(ot){}}(),wc=Mi&&Mi.isArrayBuffer,Dc=Mi&&Mi.isDate,Bc=Mi&&Mi.isMap,Gc=Mi&&Mi.isRegExp,Nc=Mi&&Mi.isSet,bc=Mi&&Mi.isTypedArray;function ci(et,ot,st){switch(st.length){case 0:return et.call(ot);case 1:return et.call(ot,st[0]);case 2:return et.call(ot,st[0],st[1]);case 3:return et.call(ot,st[0],st[1],st[2])}return et.apply(ot,st)}function US(et,ot,st,mt){for(var wt=-1,$t=et==null?0:et.length;++wt<$t;){var oe=et[wt];ot(mt,oe,st(oe),et)}return mt}function Ai(et,ot){for(var st=-1,mt=et==null?0:et.length;++st<mt&&ot(et[st],st,et)!==!1;);return et}function VS(et,ot){for(var st=et==null?0:et.length;st--&&ot(et[st],st,et)!==!1;);return et}function zc(et,ot){for(var st=-1,mt=et==null?0:et.length;++st<mt;)if(!ot(et[st],st,et))return!1;return!0}function Xn(et,ot){for(var st=-1,mt=et==null?0:et.length,wt=0,$t=[];++st<mt;){var oe=et[st];ot(oe,st,et)&&($t[wt++]=oe)}return $t}function Bo(et,ot){var st=et==null?0:et.length;return!!st&&Js(et,ot,0)>-1}function Su(et,ot,st){for(var mt=-1,wt=et==null?0:et.length;++mt<wt;)if(st(ot,et[mt]))return!0;return!1}function ae(et,ot){for(var st=-1,mt=et==null?0:et.length,wt=Array(mt);++st<mt;)wt[st]=ot(et[st],st,et);return wt}function Hn(et,ot){for(var st=-1,mt=ot.length,wt=et.length;++st<mt;)et[wt+st]=ot[st];return et}function Eu(et,ot,st,mt){var wt=-1,$t=et==null?0:et.length;for(mt&&$t&&(st=et[++wt]);++wt<$t;)st=ot(st,et[wt],wt,et);return st}function WS(et,ot,st,mt){var wt=et==null?0:et.length;for(mt&&wt&&(st=et[--wt]);wt--;)st=ot(st,et[wt],wt,et);return st}function Pu(et,ot){for(var st=-1,mt=et==null?0:et.length;++st<mt;)if(ot(et[st],st,et))return!0;return!1}var XS=Mu("length");function HS(et){return et.split("")}function $S(et){return et.match(_C)||[]}function Yc(et,ot,st){var mt;return st(et,function(wt,$t,oe){if(ot(wt,$t,oe))return mt=$t,!1}),mt}function Go(et,ot,st,mt){for(var wt=et.length,$t=st+(mt?1:-1);mt?$t--:++$t<wt;)if(ot(et[$t],$t,et))return $t;return-1}function Js(et,ot,st){return ot===ot?nE(et,ot,st):Go(et,Uc,st)}function KS(et,ot,st,mt){for(var wt=st-1,$t=et.length;++wt<$t;)if(mt(et[wt],ot))return wt;return-1}function Uc(et){return et!==et}function Vc(et,ot){var st=et==null?0:et.length;return st?Ru(et,ot)/st:G}function Mu(et){return function(ot){return ot==null?e:ot[et]}}function Au(et){return function(ot){return et==null?e:et[ot]}}function Wc(et,ot,st,mt,wt){return wt(et,function($t,oe,Kt){st=mt?(mt=!1,$t):ot(st,$t,oe,Kt)}),st}function ZS(et,ot){var st=et.length;for(et.sort(ot);st--;)et[st]=et[st].value;return et}function Ru(et,ot){for(var st,mt=-1,wt=et.length;++mt<wt;){var $t=ot(et[mt]);$t!==e&&(st=st===e?$t:st+$t)}return st}function Ou(et,ot){for(var st=-1,mt=Array(et);++st<et;)mt[st]=ot(st);return mt}function JS(et,ot){return ae(ot,function(st){return[st,et[st]]})}function Xc(et){return et&&et.slice(0,Zc(et)+1).replace(cu,"")}function pi(et){return function(ot){return et(ot)}}function Lu(et,ot){return ae(ot,function(st){return et[st]})}function Jr(et,ot){return et.has(ot)}function Hc(et,ot){for(var st=-1,mt=et.length;++st<mt&&Js(ot,et[st],0)>-1;);return st}function $c(et,ot){for(var st=et.length;st--&&Js(ot,et[st],0)>-1;);return st}function QS(et,ot){for(var st=et.length,mt=0;st--;)et[st]===ot&&++mt;return mt}var kS=Au(DS),jS=Au(BS);function qS(et){return"\\"+NS[et]}function _S(et,ot){return et==null?e:et[ot]}function Qs(et){return LS.test(et)}function tE(et){return FS.test(et)}function eE(et){for(var ot,st=[];!(ot=et.next()).done;)st.push(ot.value);return st}function Fu(et){var ot=-1,st=Array(et.size);return et.forEach(function(mt,wt){st[++ot]=[wt,mt]}),st}function Kc(et,ot){return function(st){return et(ot(st))}}function $n(et,ot){for(var st=-1,mt=et.length,wt=0,$t=[];++st<mt;){var oe=et[st];(oe===ot||oe===a)&&(et[st]=a,$t[wt++]=st)}return $t}function No(et){var ot=-1,st=Array(et.size);return et.forEach(function(mt){st[++ot]=mt}),st}function iE(et){var ot=-1,st=Array(et.size);return et.forEach(function(mt){st[++ot]=[mt,mt]}),st}function nE(et,ot,st){for(var mt=st-1,wt=et.length;++mt<wt;)if(et[mt]===ot)return mt;return-1}function sE(et,ot,st){for(var mt=st+1;mt--;)if(et[mt]===ot)return mt;return mt}function ks(et){return Qs(et)?aE(et):XS(et)}function Vi(et){return Qs(et)?oE(et):HS(et)}function Zc(et){for(var ot=et.length;ot--&&QC.test(et.charAt(ot)););return ot}var rE=Au(GS);function aE(et){for(var ot=yu.lastIndex=0;yu.test(et);)++ot;return ot}function oE(et){return et.match(yu)||[]}function hE(et){return et.match(OS)||[]}var lE=function et(ot){ot=ot==null?Le:js.defaults(Le.Object(),ot,js.pick(Le,IS));var st=ot.Array,mt=ot.Date,wt=ot.Error,$t=ot.Function,oe=ot.Math,Kt=ot.Object,Iu=ot.RegExp,uE=ot.String,Ri=ot.TypeError,bo=st.prototype,fE=$t.prototype,qs=Kt.prototype,zo=ot["__core-js_shared__"],Yo=fE.toString,jt=qs.hasOwnProperty,dE=0,Jc=function(){var P=/[^.]+$/.exec(zo&&zo.keys&&zo.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),Uo=qs.toString,vE=Yo.call(Kt),cE=Le._,pE=Iu("^"+Yo.call(jt).replace(vu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vo=Ic?ot.Buffer:e,Kn=ot.Symbol,Wo=ot.Uint8Array,Qc=Vo?Vo.allocUnsafe:e,Xo=Kc(Kt.getPrototypeOf,Kt),kc=Kt.create,jc=qs.propertyIsEnumerable,Ho=bo.splice,qc=Kn?Kn.isConcatSpreadable:e,Qr=Kn?Kn.iterator:e,Ts=Kn?Kn.toStringTag:e,$o=function(){try{var P=Ms(Kt,"defineProperty");return P({},"",{}),P}catch(A){}}(),gE=ot.clearTimeout!==Le.clearTimeout&&ot.clearTimeout,mE=mt&&mt.now!==Le.Date.now&&mt.now,xE=ot.setTimeout!==Le.setTimeout&&ot.setTimeout,Ko=oe.ceil,Zo=oe.floor,wu=Kt.getOwnPropertySymbols,yE=Vo?Vo.isBuffer:e,_c=ot.isFinite,TE=bo.join,CE=Kc(Kt.keys,Kt),me=oe.max,Ne=oe.min,SE=mt.now,EE=ot.parseInt,tp=oe.random,PE=bo.reverse,Du=Ms(ot,"DataView"),kr=Ms(ot,"Map"),Bu=Ms(ot,"Promise"),_s=Ms(ot,"Set"),jr=Ms(ot,"WeakMap"),qr=Ms(Kt,"create"),Jo=jr&&new jr,tr={},ME=As(Du),AE=As(kr),RE=As(Bu),OE=As(_s),LE=As(jr),Qo=Kn?Kn.prototype:e,_r=Qo?Qo.valueOf:e,ep=Qo?Qo.toString:e;function Q(P){if(fe(P)&&!Dt(P)&&!(P instanceof zt)){if(P instanceof Oi)return P;if(jt.call(P,"__wrapped__"))return ig(P)}return new Oi(P)}var er=function(){function P(){}return function(A){if(!ue(A))return{};if(kc)return kc(A);P.prototype=A;var I=new P;return P.prototype=e,I}}();function ko(){}function Oi(P,A){this.__wrapped__=P,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=e}Q.templateSettings={escape:XC,evaluate:HC,interpolate:uc,variable:"",imports:{_:Q}},Q.prototype=ko.prototype,Q.prototype.constructor=Q,Oi.prototype=er(ko.prototype),Oi.prototype.constructor=Oi;function zt(P){this.__wrapped__=P,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=w,this.__views__=[]}function FE(){var P=new zt(this.__wrapped__);return P.__actions__=Qe(this.__actions__),P.__dir__=this.__dir__,P.__filtered__=this.__filtered__,P.__iteratees__=Qe(this.__iteratees__),P.__takeCount__=this.__takeCount__,P.__views__=Qe(this.__views__),P}function IE(){if(this.__filtered__){var P=new zt(this);P.__dir__=-1,P.__filtered__=!0}else P=this.clone(),P.__dir__*=-1;return P}function wE(){var P=this.__wrapped__.value(),A=this.__dir__,I=Dt(P),Y=A<0,$=I?P.length:0,k=HP(0,$,this.__views__),j=k.start,tt=k.end,it=tt-j,ht=Y?tt:j-1,lt=this.__iteratees__,ft=lt.length,pt=0,Et=Ne(it,this.__takeCount__);if(!I||!Y&&$==it&&Et==it)return Mp(P,this.__actions__);var Ot=[];t:for(;it--&&pt<Et;){ht+=A;for(var Gt=-1,Lt=P[ht];++Gt<ft;){var bt=lt[Gt],Wt=bt.iteratee,xi=bt.type,He=Wt(Lt);if(xi==b)Lt=He;else if(!He){if(xi==B)continue t;break t}}Ot[pt++]=Lt}return Ot}zt.prototype=er(ko.prototype),zt.prototype.constructor=zt;function Cs(P){var A=-1,I=P==null?0:P.length;for(this.clear();++A<I;){var Y=P[A];this.set(Y[0],Y[1])}}function DE(){this.__data__=qr?qr(null):{},this.size=0}function BE(P){var A=this.has(P)&&delete this.__data__[P];return this.size-=A?1:0,A}function GE(P){var A=this.__data__;if(qr){var I=A[P];return I===o?e:I}return jt.call(A,P)?A[P]:e}function NE(P){var A=this.__data__;return qr?A[P]!==e:jt.call(A,P)}function bE(P,A){var I=this.__data__;return this.size+=this.has(P)?0:1,I[P]=qr&&A===e?o:A,this}Cs.prototype.clear=DE,Cs.prototype.delete=BE,Cs.prototype.get=GE,Cs.prototype.has=NE,Cs.prototype.set=bE;function An(P){var A=-1,I=P==null?0:P.length;for(this.clear();++A<I;){var Y=P[A];this.set(Y[0],Y[1])}}function zE(){this.__data__=[],this.size=0}function YE(P){var A=this.__data__,I=jo(A,P);if(I<0)return!1;var Y=A.length-1;return I==Y?A.pop():Ho.call(A,I,1),--this.size,!0}function UE(P){var A=this.__data__,I=jo(A,P);return I<0?e:A[I][1]}function VE(P){return jo(this.__data__,P)>-1}function WE(P,A){var I=this.__data__,Y=jo(I,P);return Y<0?(++this.size,I.push([P,A])):I[Y][1]=A,this}An.prototype.clear=zE,An.prototype.delete=YE,An.prototype.get=UE,An.prototype.has=VE,An.prototype.set=WE;function Rn(P){var A=-1,I=P==null?0:P.length;for(this.clear();++A<I;){var Y=P[A];this.set(Y[0],Y[1])}}function XE(){this.size=0,this.__data__={hash:new Cs,map:new(kr||An),string:new Cs}}function HE(P){var A=lh(this,P).delete(P);return this.size-=A?1:0,A}function $E(P){return lh(this,P).get(P)}function KE(P){return lh(this,P).has(P)}function ZE(P,A){var I=lh(this,P),Y=I.size;return I.set(P,A),this.size+=I.size==Y?0:1,this}Rn.prototype.clear=XE,Rn.prototype.delete=HE,Rn.prototype.get=$E,Rn.prototype.has=KE,Rn.prototype.set=ZE;function Ss(P){var A=-1,I=P==null?0:P.length;for(this.__data__=new Rn;++A<I;)this.add(P[A])}function JE(P){return this.__data__.set(P,o),this}function QE(P){return this.__data__.has(P)}Ss.prototype.add=Ss.prototype.push=JE,Ss.prototype.has=QE;function Wi(P){var A=this.__data__=new An(P);this.size=A.size}function kE(){this.__data__=new An,this.size=0}function jE(P){var A=this.__data__,I=A.delete(P);return this.size=A.size,I}function qE(P){return this.__data__.get(P)}function _E(P){return this.__data__.has(P)}function tP(P,A){var I=this.__data__;if(I instanceof An){var Y=I.__data__;if(!kr||Y.length<t-1)return Y.push([P,A]),this.size=++I.size,this;I=this.__data__=new Rn(Y)}return I.set(P,A),this.size=I.size,this}Wi.prototype.clear=kE,Wi.prototype.delete=jE,Wi.prototype.get=qE,Wi.prototype.has=_E,Wi.prototype.set=tP;function ip(P,A){var I=Dt(P),Y=!I&&Rs(P),$=!I&&!Y&&jn(P),k=!I&&!Y&&!$&&rr(P),j=I||Y||$||k,tt=j?Ou(P.length,uE):[],it=tt.length;for(var ht in P)(A||jt.call(P,ht))&&!(j&&(ht=="length"||$&&(ht=="offset"||ht=="parent")||k&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||In(ht,it)))&&tt.push(ht);return tt}function np(P){var A=P.length;return A?P[$u(0,A-1)]:e}function eP(P,A){return uh(Qe(P),Es(A,0,P.length))}function iP(P){return uh(Qe(P))}function Gu(P,A,I){(I!==e&&!Xi(P[A],I)||I===e&&!(A in P))&&On(P,A,I)}function ta(P,A,I){var Y=P[A];(!(jt.call(P,A)&&Xi(Y,I))||I===e&&!(A in P))&&On(P,A,I)}function jo(P,A){for(var I=P.length;I--;)if(Xi(P[I][0],A))return I;return-1}function nP(P,A,I,Y){return Zn(P,function($,k,j){A(Y,$,I($),j)}),Y}function sp(P,A){return P&&on(A,Pe(A),P)}function sP(P,A){return P&&on(A,je(A),P)}function On(P,A,I){A=="__proto__"&&$o?$o(P,A,{configurable:!0,enumerable:!0,value:I,writable:!0}):P[A]=I}function Nu(P,A){for(var I=-1,Y=A.length,$=st(Y),k=P==null;++I<Y;)$[I]=k?e:mf(P,A[I]);return $}function Es(P,A,I){return P===P&&(I!==e&&(P=P<=I?P:I),A!==e&&(P=P>=A?P:A)),P}function Li(P,A,I,Y,$,k){var j,tt=A&l,it=A&c,ht=A&f;if(I&&(j=$?I(P,Y,$,k):I(P)),j!==e)return j;if(!ue(P))return P;var lt=Dt(P);if(lt){if(j=KP(P),!tt)return Qe(P,j)}else{var ft=be(P),pt=ft==at||ft==vt;if(jn(P))return Op(P,tt);if(ft==yt||ft==W||pt&&!$){if(j=it||pt?{}:Zp(P),!tt)return it?GP(P,sP(j,P)):BP(P,sp(j,P))}else{if(!ie[ft])return $?P:{};j=ZP(P,ft,tt)}}k||(k=new Wi);var Et=k.get(P);if(Et)return Et;k.set(P,j),Sg(P)?P.forEach(function(Lt){j.add(Li(Lt,A,I,Lt,P,k))}):Tg(P)&&P.forEach(function(Lt,bt){j.set(bt,Li(Lt,A,I,bt,P,k))});var Ot=ht?it?nf:ef:it?je:Pe,Gt=lt?e:Ot(P);return Ai(Gt||P,function(Lt,bt){Gt&&(bt=Lt,Lt=P[bt]),ta(j,bt,Li(Lt,A,I,bt,P,k))}),j}function rP(P){var A=Pe(P);return function(I){return rp(I,P,A)}}function rp(P,A,I){var Y=I.length;if(P==null)return!Y;for(P=Kt(P);Y--;){var $=I[Y],k=A[$],j=P[$];if(j===e&&!($ in P)||!k(j))return!1}return!0}function ap(P,A,I){if(typeof P!="function")throw new Ri(u);return oa(function(){P.apply(e,I)},A)}function ea(P,A,I,Y){var $=-1,k=Bo,j=!0,tt=P.length,it=[],ht=A.length;if(!tt)return it;I&&(A=ae(A,pi(I))),Y?(k=Su,j=!1):A.length>=t&&(k=Jr,j=!1,A=new Ss(A));t:for(;++$<tt;){var lt=P[$],ft=I==null?lt:I(lt);if(lt=Y||lt!==0?lt:0,j&&ft===ft){for(var pt=ht;pt--;)if(A[pt]===ft)continue t;it.push(lt)}else k(A,ft,Y)||it.push(lt)}return it}var Zn=Dp(an),op=Dp(zu,!0);function aP(P,A){var I=!0;return Zn(P,function(Y,$,k){return I=!!A(Y,$,k),I}),I}function qo(P,A,I){for(var Y=-1,$=P.length;++Y<$;){var k=P[Y],j=A(k);if(j!=null&&(tt===e?j===j&&!mi(j):I(j,tt)))var tt=j,it=k}return it}function oP(P,A,I,Y){var $=P.length;for(I=Bt(I),I<0&&(I=-I>$?0:$+I),Y=Y===e||Y>$?$:Bt(Y),Y<0&&(Y+=$),Y=I>Y?0:Pg(Y);I<Y;)P[I++]=A;return P}function hp(P,A){var I=[];return Zn(P,function(Y,$,k){A(Y,$,k)&&I.push(Y)}),I}function Fe(P,A,I,Y,$){var k=-1,j=P.length;for(I||(I=QP),$||($=[]);++k<j;){var tt=P[k];A>0&&I(tt)?A>1?Fe(tt,A-1,I,Y,$):Hn($,tt):Y||($[$.length]=tt)}return $}var bu=Bp(),lp=Bp(!0);function an(P,A){return P&&bu(P,A,Pe)}function zu(P,A){return P&&lp(P,A,Pe)}function _o(P,A){return Xn(A,function(I){return wn(P[I])})}function Ps(P,A){A=Qn(A,P);for(var I=0,Y=A.length;P!=null&&I<Y;)P=P[hn(A[I++])];return I&&I==Y?P:e}function up(P,A,I){var Y=A(P);return Dt(P)?Y:Hn(Y,I(P))}function We(P){return P==null?P===e?Ge:Ft:Ts&&Ts in Kt(P)?XP(P):iM(P)}function Yu(P,A){return P>A}function hP(P,A){return P!=null&&jt.call(P,A)}function lP(P,A){return P!=null&&A in Kt(P)}function uP(P,A,I){return P>=Ne(A,I)&&P<me(A,I)}function Uu(P,A,I){for(var Y=I?Su:Bo,$=P[0].length,k=P.length,j=k,tt=st(k),it=Infinity,ht=[];j--;){var lt=P[j];j&&A&&(lt=ae(lt,pi(A))),it=Ne(lt.length,it),tt[j]=!I&&(A||$>=120&&lt.length>=120)?new Ss(j&&lt):e}lt=P[0];var ft=-1,pt=tt[0];t:for(;++ft<$&&ht.length<it;){var Et=lt[ft],Ot=A?A(Et):Et;if(Et=I||Et!==0?Et:0,!(pt?Jr(pt,Ot):Y(ht,Ot,I))){for(j=k;--j;){var Gt=tt[j];if(!(Gt?Jr(Gt,Ot):Y(P[j],Ot,I)))continue t}pt&&pt.push(Ot),ht.push(Et)}}return ht}function fP(P,A,I,Y){return an(P,function($,k,j){A(Y,I($),k,j)}),Y}function ia(P,A,I){A=Qn(A,P),P=jp(P,A);var Y=P==null?P:P[hn(Ii(A))];return Y==null?e:ci(Y,P,I)}function fp(P){return fe(P)&&We(P)==W}function dP(P){return fe(P)&&We(P)==te}function vP(P){return fe(P)&&We(P)==_}function na(P,A,I,Y,$){return P===A?!0:P==null||A==null||!fe(P)&&!fe(A)?P!==P&&A!==A:cP(P,A,I,Y,na,$)}function cP(P,A,I,Y,$,k){var j=Dt(P),tt=Dt(A),it=j?H:be(P),ht=tt?H:be(A);it=it==W?yt:it,ht=ht==W?yt:ht;var lt=it==yt,ft=ht==yt,pt=it==ht;if(pt&&jn(P)){if(!jn(A))return!1;j=!0,lt=!1}if(pt&&!lt)return k||(k=new Wi),j||rr(P)?Hp(P,A,I,Y,$,k):VP(P,A,it,I,Y,$,k);if(!(I&v)){var Et=lt&&jt.call(P,"__wrapped__"),Ot=ft&&jt.call(A,"__wrapped__");if(Et||Ot){var Gt=Et?P.value():P,Lt=Ot?A.value():A;return k||(k=new Wi),$(Gt,Lt,I,Y,k)}}return pt?(k||(k=new Wi),WP(P,A,I,Y,$,k)):!1}function pP(P){return fe(P)&&be(P)==ut}function Vu(P,A,I,Y){var $=I.length,k=$,j=!Y;if(P==null)return!k;for(P=Kt(P);$--;){var tt=I[$];if(j&&tt[2]?tt[1]!==P[tt[0]]:!(tt[0]in P))return!1}for(;++$<k;){tt=I[$];var it=tt[0],ht=P[it],lt=tt[1];if(j&&tt[2]){if(ht===e&&!(it in P))return!1}else{var ft=new Wi;if(Y)var pt=Y(ht,lt,it,P,A,ft);if(!(pt===e?na(lt,ht,v|p,Y,ft):pt))return!1}}return!0}function dp(P){if(!ue(P)||jP(P))return!1;var A=wn(P)?pE:rS;return A.test(As(P))}function gP(P){return fe(P)&&We(P)==It}function mP(P){return fe(P)&&be(P)==gt}function xP(P){return fe(P)&&gh(P.length)&&!!re[We(P)]}function vp(P){return typeof P=="function"?P:P==null?qe:typeof P=="object"?Dt(P)?gp(P[0],P[1]):pp(P):Gg(P)}function Wu(P){if(!aa(P))return CE(P);var A=[];for(var I in Kt(P))jt.call(P,I)&&I!="constructor"&&A.push(I);return A}function yP(P){if(!ue(P))return eM(P);var A=aa(P),I=[];for(var Y in P)Y=="constructor"&&(A||!jt.call(P,Y))||I.push(Y);return I}function Xu(P,A){return P<A}function cp(P,A){var I=-1,Y=ke(P)?st(P.length):[];return Zn(P,function($,k,j){Y[++I]=A($,k,j)}),Y}function pp(P){var A=rf(P);return A.length==1&&A[0][2]?Qp(A[0][0],A[0][1]):function(I){return I===P||Vu(I,P,A)}}function gp(P,A){return of(P)&&Jp(A)?Qp(hn(P),A):function(I){var Y=mf(I,P);return Y===e&&Y===A?xf(I,P):na(A,Y,v|p)}}function th(P,A,I,Y,$){P!==A&&bu(A,function(k,j){if($||($=new Wi),ue(k))TP(P,A,j,I,th,Y,$);else{var tt=Y?Y(lf(P,j),k,j+"",P,A,$):e;tt===e&&(tt=k),Gu(P,j,tt)}},je)}function TP(P,A,I,Y,$,k,j){var tt=lf(P,I),it=lf(A,I),ht=j.get(it);if(ht){Gu(P,I,ht);return}var lt=k?k(tt,it,I+"",P,A,j):e,ft=lt===e;if(ft){var pt=Dt(it),Et=!pt&&jn(it),Ot=!pt&&!Et&&rr(it);lt=it,pt||Et||Ot?Dt(tt)?lt=tt:ve(tt)?lt=Qe(tt):Et?(ft=!1,lt=Op(it,!0)):Ot?(ft=!1,lt=Lp(it,!0)):lt=[]:ha(it)||Rs(it)?(lt=tt,Rs(tt)?lt=Mg(tt):(!ue(tt)||wn(tt))&&(lt=Zp(it))):ft=!1}ft&&(j.set(it,lt),$(lt,it,Y,k,j),j.delete(it)),Gu(P,I,lt)}function mp(P,A){var I=P.length;if(!!I)return A+=A<0?I:0,In(A,I)?P[A]:e}function xp(P,A,I){A.length?A=ae(A,function(k){return Dt(k)?function(j){return Ps(j,k.length===1?k[0]:k)}:k}):A=[qe];var Y=-1;A=ae(A,pi(Rt()));var $=cp(P,function(k,j,tt){var it=ae(A,function(ht){return ht(k)});return{criteria:it,index:++Y,value:k}});return ZS($,function(k,j){return DP(k,j,I)})}function CP(P,A){return yp(P,A,function(I,Y){return xf(P,Y)})}function yp(P,A,I){for(var Y=-1,$=A.length,k={};++Y<$;){var j=A[Y],tt=Ps(P,j);I(tt,j)&&sa(k,Qn(j,P),tt)}return k}function SP(P){return function(A){return Ps(A,P)}}function Hu(P,A,I,Y){var $=Y?KS:Js,k=-1,j=A.length,tt=P;for(P===A&&(A=Qe(A)),I&&(tt=ae(P,pi(I)));++k<j;)for(var it=0,ht=A[k],lt=I?I(ht):ht;(it=$(tt,lt,it,Y))>-1;)tt!==P&&Ho.call(tt,it,1),Ho.call(P,it,1);return P}function Tp(P,A){for(var I=P?A.length:0,Y=I-1;I--;){var $=A[I];if(I==Y||$!==k){var k=$;In($)?Ho.call(P,$,1):Ju(P,$)}}return P}function $u(P,A){return P+Zo(tp()*(A-P+1))}function EP(P,A,I,Y){for(var $=-1,k=me(Ko((A-P)/(I||1)),0),j=st(k);k--;)j[Y?k:++$]=P,P+=I;return j}function Ku(P,A){var I="";if(!P||A<1||A>K)return I;do A%2&&(I+=P),A=Zo(A/2),A&&(P+=P);while(A);return I}function Nt(P,A){return uf(kp(P,A,qe),P+"")}function PP(P){return np(ar(P))}function MP(P,A){var I=ar(P);return uh(I,Es(A,0,I.length))}function sa(P,A,I,Y){if(!ue(P))return P;A=Qn(A,P);for(var $=-1,k=A.length,j=k-1,tt=P;tt!=null&&++$<k;){var it=hn(A[$]),ht=I;if(it==="__proto__"||it==="constructor"||it==="prototype")return P;if($!=j){var lt=tt[it];ht=Y?Y(lt,it,tt):e,ht===e&&(ht=ue(lt)?lt:In(A[$+1])?[]:{})}ta(tt,it,ht),tt=tt[it]}return P}var Cp=Jo?function(P,A){return Jo.set(P,A),P}:qe,AP=$o?function(P,A){return $o(P,"toString",{configurable:!0,enumerable:!1,value:Tf(A),writable:!0})}:qe;function RP(P){return uh(ar(P))}function Fi(P,A,I){var Y=-1,$=P.length;A<0&&(A=-A>$?0:$+A),I=I>$?$:I,I<0&&(I+=$),$=A>I?0:I-A>>>0,A>>>=0;for(var k=st($);++Y<$;)k[Y]=P[Y+A];return k}function OP(P,A){var I;return Zn(P,function(Y,$,k){return I=A(Y,$,k),!I}),!!I}function eh(P,A,I){var Y=0,$=P==null?Y:P.length;if(typeof A=="number"&&A===A&&$<=z){for(;Y<$;){var k=Y+$>>>1,j=P[k];j!==null&&!mi(j)&&(I?j<=A:j<A)?Y=k+1:$=k}return $}return Zu(P,A,qe,I)}function Zu(P,A,I,Y){var $=0,k=P==null?0:P.length;if(k===0)return 0;A=I(A);for(var j=A!==A,tt=A===null,it=mi(A),ht=A===e;$<k;){var lt=Zo(($+k)/2),ft=I(P[lt]),pt=ft!==e,Et=ft===null,Ot=ft===ft,Gt=mi(ft);if(j)var Lt=Y||Ot;else ht?Lt=Ot&&(Y||pt):tt?Lt=Ot&&pt&&(Y||!Et):it?Lt=Ot&&pt&&!Et&&(Y||!Gt):Et||Gt?Lt=!1:Lt=Y?ft<=A:ft<A;Lt?$=lt+1:k=lt}return Ne(k,N)}function Sp(P,A){for(var I=-1,Y=P.length,$=0,k=[];++I<Y;){var j=P[I],tt=A?A(j):j;if(!I||!Xi(tt,it)){var it=tt;k[$++]=j===0?0:j}}return k}function Ep(P){return typeof P=="number"?P:mi(P)?G:+P}function gi(P){if(typeof P=="string")return P;if(Dt(P))return ae(P,gi)+"";if(mi(P))return ep?ep.call(P):"";var A=P+"";return A=="0"&&1/P==-X?"-0":A}function Jn(P,A,I){var Y=-1,$=Bo,k=P.length,j=!0,tt=[],it=tt;if(I)j=!1,$=Su;else if(k>=t){var ht=A?null:YP(P);if(ht)return No(ht);j=!1,$=Jr,it=new Ss}else it=A?[]:tt;t:for(;++Y<k;){var lt=P[Y],ft=A?A(lt):lt;if(lt=I||lt!==0?lt:0,j&&ft===ft){for(var pt=it.length;pt--;)if(it[pt]===ft)continue t;A&&it.push(ft),tt.push(lt)}else $(it,ft,I)||(it!==tt&&it.push(ft),tt.push(lt))}return tt}function Ju(P,A){return A=Qn(A,P),P=jp(P,A),P==null||delete P[hn(Ii(A))]}function Pp(P,A,I,Y){return sa(P,A,I(Ps(P,A)),Y)}function ih(P,A,I,Y){for(var $=P.length,k=Y?$:-1;(Y?k--:++k<$)&&A(P[k],k,P););return I?Fi(P,Y?0:k,Y?k+1:$):Fi(P,Y?k+1:0,Y?$:k)}function Mp(P,A){var I=P;return I instanceof zt&&(I=I.value()),Eu(A,function(Y,$){return $.func.apply($.thisArg,Hn([Y],$.args))},I)}function Qu(P,A,I){var Y=P.length;if(Y<2)return Y?Jn(P[0]):[];for(var $=-1,k=st(Y);++$<Y;)for(var j=P[$],tt=-1;++tt<Y;)tt!=$&&(k[$]=ea(k[$]||j,P[tt],A,I));return Jn(Fe(k,1),A,I)}function Ap(P,A,I){for(var Y=-1,$=P.length,k=A.length,j={};++Y<$;){var tt=Y<k?A[Y]:e;I(j,P[Y],tt)}return j}function ku(P){return ve(P)?P:[]}function ju(P){return typeof P=="function"?P:qe}function Qn(P,A){return Dt(P)?P:of(P,A)?[P]:eg(Qt(P))}var LP=Nt;function kn(P,A,I){var Y=P.length;return I=I===e?Y:I,!A&&I>=Y?P:Fi(P,A,I)}var Rp=gE||function(P){return Le.clearTimeout(P)};function Op(P,A){if(A)return P.slice();var I=P.length,Y=Qc?Qc(I):new P.constructor(I);return P.copy(Y),Y}function qu(P){var A=new P.constructor(P.byteLength);return new Wo(A).set(new Wo(P)),A}function FP(P,A){var I=A?qu(P.buffer):P.buffer;return new P.constructor(I,P.byteOffset,P.byteLength)}function IP(P){var A=new P.constructor(P.source,fc.exec(P));return A.lastIndex=P.lastIndex,A}function wP(P){return _r?Kt(_r.call(P)):{}}function Lp(P,A){var I=A?qu(P.buffer):P.buffer;return new P.constructor(I,P.byteOffset,P.length)}function Fp(P,A){if(P!==A){var I=P!==e,Y=P===null,$=P===P,k=mi(P),j=A!==e,tt=A===null,it=A===A,ht=mi(A);if(!tt&&!ht&&!k&&P>A||k&&j&&it&&!tt&&!ht||Y&&j&&it||!I&&it||!$)return 1;if(!Y&&!k&&!ht&&P<A||ht&&I&&$&&!Y&&!k||tt&&I&&$||!j&&$||!it)return-1}return 0}function DP(P,A,I){for(var Y=-1,$=P.criteria,k=A.criteria,j=$.length,tt=I.length;++Y<j;){var it=Fp($[Y],k[Y]);if(it){if(Y>=tt)return it;var ht=I[Y];return it*(ht=="desc"?-1:1)}}return P.index-A.index}function Ip(P,A,I,Y){for(var $=-1,k=P.length,j=I.length,tt=-1,it=A.length,ht=me(k-j,0),lt=st(it+ht),ft=!Y;++tt<it;)lt[tt]=A[tt];for(;++$<j;)(ft||$<k)&&(lt[I[$]]=P[$]);for(;ht--;)lt[tt++]=P[$++];return lt}function wp(P,A,I,Y){for(var $=-1,k=P.length,j=-1,tt=I.length,it=-1,ht=A.length,lt=me(k-tt,0),ft=st(lt+ht),pt=!Y;++$<lt;)ft[$]=P[$];for(var Et=$;++it<ht;)ft[Et+it]=A[it];for(;++j<tt;)(pt||$<k)&&(ft[Et+I[j]]=P[$++]);return ft}function Qe(P,A){var I=-1,Y=P.length;for(A||(A=st(Y));++I<Y;)A[I]=P[I];return A}function on(P,A,I,Y){var $=!I;I||(I={});for(var k=-1,j=A.length;++k<j;){var tt=A[k],it=Y?Y(I[tt],P[tt],tt,I,P):e;it===e&&(it=P[tt]),$?On(I,tt,it):ta(I,tt,it)}return I}function BP(P,A){return on(P,af(P),A)}function GP(P,A){return on(P,$p(P),A)}function nh(P,A){return function(I,Y){var $=Dt(I)?US:nP,k=A?A():{};return $(I,P,Rt(Y,2),k)}}function ir(P){return Nt(function(A,I){var Y=-1,$=I.length,k=$>1?I[$-1]:e,j=$>2?I[2]:e;for(k=P.length>3&&typeof k=="function"?($--,k):e,j&&Xe(I[0],I[1],j)&&(k=$<3?e:k,$=1),A=Kt(A);++Y<$;){var tt=I[Y];tt&&P(A,tt,Y,k)}return A})}function Dp(P,A){return function(I,Y){if(I==null)return I;if(!ke(I))return P(I,Y);for(var $=I.length,k=A?$:-1,j=Kt(I);(A?k--:++k<$)&&Y(j[k],k,j)!==!1;);return I}}function Bp(P){return function(A,I,Y){for(var $=-1,k=Kt(A),j=Y(A),tt=j.length;tt--;){var it=j[P?tt:++$];if(I(k[it],it,k)===!1)break}return A}}function NP(P,A,I){var Y=A&g,$=ra(P);function k(){var j=this&&this!==Le&&this instanceof k?$:P;return j.apply(Y?I:this,arguments)}return k}function Gp(P){return function(A){A=Qt(A);var I=Qs(A)?Vi(A):e,Y=I?I[0]:A.charAt(0),$=I?kn(I,1).join(""):A.slice(1);return Y[P]()+$}}function nr(P){return function(A){return Eu(Dg(wg(A).replace(AS,"")),P,"")}}function ra(P){return function(){var A=arguments;switch(A.length){case 0:return new P;case 1:return new P(A[0]);case 2:return new P(A[0],A[1]);case 3:return new P(A[0],A[1],A[2]);case 4:return new P(A[0],A[1],A[2],A[3]);case 5:return new P(A[0],A[1],A[2],A[3],A[4]);case 6:return new P(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new P(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var I=er(P.prototype),Y=P.apply(I,A);return ue(Y)?Y:I}}function bP(P,A,I){var Y=ra(P);function $(){for(var k=arguments.length,j=st(k),tt=k,it=sr($);tt--;)j[tt]=arguments[tt];var ht=k<3&&j[0]!==it&&j[k-1]!==it?[]:$n(j,it);if(k-=ht.length,k<I)return Up(P,A,sh,$.placeholder,e,j,ht,e,e,I-k);var lt=this&&this!==Le&&this instanceof $?Y:P;return ci(lt,this,j)}return $}function Np(P){return function(A,I,Y){var $=Kt(A);if(!ke(A)){var k=Rt(I,3);A=Pe(A),I=function(tt){return k($[tt],tt,$)}}var j=P(A,I,Y);return j>-1?$[k?A[j]:j]:e}}function bp(P){return Fn(function(A){var I=A.length,Y=I,$=Oi.prototype.thru;for(P&&A.reverse();Y--;){var k=A[Y];if(typeof k!="function")throw new Ri(u);if($&&!j&&hh(k)=="wrapper")var j=new Oi([],!0)}for(Y=j?Y:I;++Y<I;){k=A[Y];var tt=hh(k),it=tt=="wrapper"?sf(k):e;it&&hf(it[0])&&it[1]==(E|y|C|M)&&!it[4].length&&it[9]==1?j=j[hh(it[0])].apply(j,it[3]):j=k.length==1&&hf(k)?j[tt]():j.thru(k)}return function(){var ht=arguments,lt=ht[0];if(j&&ht.length==1&&Dt(lt))return j.plant(lt).value();for(var ft=0,pt=I?A[ft].apply(this,ht):lt;++ft<I;)pt=A[ft].call(this,pt);return pt}})}function sh(P,A,I,Y,$,k,j,tt,it,ht){var lt=A&E,ft=A&g,pt=A&m,Et=A&(y|T),Ot=A&R,Gt=pt?e:ra(P);function Lt(){for(var bt=arguments.length,Wt=st(bt),xi=bt;xi--;)Wt[xi]=arguments[xi];if(Et)var He=sr(Lt),yi=QS(Wt,He);if(Y&&(Wt=Ip(Wt,Y,$,Et)),k&&(Wt=wp(Wt,k,j,Et)),bt-=yi,Et&&bt<ht){var ce=$n(Wt,He);return Up(P,A,sh,Lt.placeholder,I,Wt,ce,tt,it,ht-bt)}var Hi=ft?I:this,Bn=pt?Hi[P]:P;return bt=Wt.length,tt?Wt=nM(Wt,tt):Ot&&bt>1&&Wt.reverse(),lt&&it<bt&&(Wt.length=it),this&&this!==Le&&this instanceof Lt&&(Bn=Gt||ra(Bn)),Bn.apply(Hi,Wt)}return Lt}function zp(P,A){return function(I,Y){return fP(I,P,A(Y),{})}}function rh(P,A){return function(I,Y){var $;if(I===e&&Y===e)return A;if(I!==e&&($=I),Y!==e){if($===e)return Y;typeof I=="string"||typeof Y=="string"?(I=gi(I),Y=gi(Y)):(I=Ep(I),Y=Ep(Y)),$=P(I,Y)}return $}}function _u(P){return Fn(function(A){return A=ae(A,pi(Rt())),Nt(function(I){var Y=this;return P(A,function($){return ci($,Y,I)})})})}function ah(P,A){A=A===e?" ":gi(A);var I=A.length;if(I<2)return I?Ku(A,P):A;var Y=Ku(A,Ko(P/ks(A)));return Qs(A)?kn(Vi(Y),0,P).join(""):Y.slice(0,P)}function zP(P,A,I,Y){var $=A&g,k=ra(P);function j(){for(var tt=-1,it=arguments.length,ht=-1,lt=Y.length,ft=st(lt+it),pt=this&&this!==Le&&this instanceof j?k:P;++ht<lt;)ft[ht]=Y[ht];for(;it--;)ft[ht++]=arguments[++tt];return ci(pt,$?I:this,ft)}return j}function Yp(P){return function(A,I,Y){return Y&&typeof Y!="number"&&Xe(A,I,Y)&&(I=Y=e),A=Dn(A),I===e?(I=A,A=0):I=Dn(I),Y=Y===e?A<I?1:-1:Dn(Y),EP(A,I,Y,P)}}function oh(P){return function(A,I){return typeof A=="string"&&typeof I=="string"||(A=wi(A),I=wi(I)),P(A,I)}}function Up(P,A,I,Y,$,k,j,tt,it,ht){var lt=A&y,ft=lt?j:e,pt=lt?e:j,Et=lt?k:e,Ot=lt?e:k;A|=lt?C:S,A&=~(lt?S:C),A&x||(A&=~(g|m));var Gt=[P,A,$,Et,ft,Ot,pt,tt,it,ht],Lt=I.apply(e,Gt);return hf(P)&&qp(Lt,Gt),Lt.placeholder=Y,_p(Lt,P,A)}function tf(P){var A=oe[P];return function(I,Y){if(I=wi(I),Y=Y==null?0:Ne(Bt(Y),292),Y&&_c(I)){var $=(Qt(I)+"e").split("e"),k=A($[0]+"e"+(+$[1]+Y));return $=(Qt(k)+"e").split("e"),+($[0]+"e"+(+$[1]-Y))}return A(I)}}var YP=_s&&1/No(new _s([,-0]))[1]==X?function(P){return new _s(P)}:Ef;function Vp(P){return function(A){var I=be(A);return I==ut?Fu(A):I==gt?iE(A):JS(A,P(A))}}function Ln(P,A,I,Y,$,k,j,tt){var it=A&m;if(!it&&typeof P!="function")throw new Ri(u);var ht=Y?Y.length:0;if(ht||(A&=~(C|S),Y=$=e),j=j===e?j:me(Bt(j),0),tt=tt===e?tt:Bt(tt),ht-=$?$.length:0,A&S){var lt=Y,ft=$;Y=$=e}var pt=it?e:sf(P),Et=[P,A,I,Y,$,lt,ft,k,j,tt];if(pt&&tM(Et,pt),P=Et[0],A=Et[1],I=Et[2],Y=Et[3],$=Et[4],tt=Et[9]=Et[9]===e?it?0:P.length:me(Et[9]-ht,0),!tt&&A&(y|T)&&(A&=~(y|T)),!A||A==g)var Ot=NP(P,A,I);else A==y||A==T?Ot=bP(P,A,tt):(A==C||A==(g|C))&&!$.length?Ot=zP(P,A,I,Y):Ot=sh.apply(e,Et);var Gt=pt?Cp:qp;return _p(Gt(Ot,Et),P,A)}function Wp(P,A,I,Y){return P===e||Xi(P,qs[I])&&!jt.call(Y,I)?A:P}function Xp(P,A,I,Y,$,k){return ue(P)&&ue(A)&&(k.set(A,P),th(P,A,e,Xp,k),k.delete(A)),P}function UP(P){return ha(P)?e:P}function Hp(P,A,I,Y,$,k){var j=I&v,tt=P.length,it=A.length;if(tt!=it&&!(j&&it>tt))return!1;var ht=k.get(P),lt=k.get(A);if(ht&&lt)return ht==A&&lt==P;var ft=-1,pt=!0,Et=I&p?new Ss:e;for(k.set(P,A),k.set(A,P);++ft<tt;){var Ot=P[ft],Gt=A[ft];if(Y)var Lt=j?Y(Gt,Ot,ft,A,P,k):Y(Ot,Gt,ft,P,A,k);if(Lt!==e){if(Lt)continue;pt=!1;break}if(Et){if(!Pu(A,function(bt,Wt){if(!Jr(Et,Wt)&&(Ot===bt||$(Ot,bt,I,Y,k)))return Et.push(Wt)})){pt=!1;break}}else if(!(Ot===Gt||$(Ot,Gt,I,Y,k))){pt=!1;break}}return k.delete(P),k.delete(A),pt}function VP(P,A,I,Y,$,k,j){switch(I){case qt:if(P.byteLength!=A.byteLength||P.byteOffset!=A.byteOffset)return!1;P=P.buffer,A=A.buffer;case te:return!(P.byteLength!=A.byteLength||!k(new Wo(P),new Wo(A)));case q:case _:case ct:return Xi(+P,+A);case rt:return P.name==A.name&&P.message==A.message;case It:case Pt:return P==A+"";case ut:var tt=Fu;case gt:var it=Y&v;if(tt||(tt=No),P.size!=A.size&&!it)return!1;var ht=j.get(P);if(ht)return ht==A;Y|=p,j.set(P,A);var lt=Hp(tt(P),tt(A),Y,$,k,j);return j.delete(P),lt;case ge:if(_r)return _r.call(P)==_r.call(A)}return!1}function WP(P,A,I,Y,$,k){var j=I&v,tt=ef(P),it=tt.length,ht=ef(A),lt=ht.length;if(it!=lt&&!j)return!1;for(var ft=it;ft--;){var pt=tt[ft];if(!(j?pt in A:jt.call(A,pt)))return!1}var Et=k.get(P),Ot=k.get(A);if(Et&&Ot)return Et==A&&Ot==P;var Gt=!0;k.set(P,A),k.set(A,P);for(var Lt=j;++ft<it;){pt=tt[ft];var bt=P[pt],Wt=A[pt];if(Y)var xi=j?Y(Wt,bt,pt,A,P,k):Y(bt,Wt,pt,P,A,k);if(!(xi===e?bt===Wt||$(bt,Wt,I,Y,k):xi)){Gt=!1;break}Lt||(Lt=pt=="constructor")}if(Gt&&!Lt){var He=P.constructor,yi=A.constructor;He!=yi&&"constructor"in P&&"constructor"in A&&!(typeof He=="function"&&He instanceof He&&typeof yi=="function"&&yi instanceof yi)&&(Gt=!1)}return k.delete(P),k.delete(A),Gt}function Fn(P){return uf(kp(P,e,rg),P+"")}function ef(P){return up(P,Pe,af)}function nf(P){return up(P,je,$p)}var sf=Jo?function(P){return Jo.get(P)}:Ef;function hh(P){for(var A=P.name+"",I=tr[A],Y=jt.call(tr,A)?I.length:0;Y--;){var $=I[Y],k=$.func;if(k==null||k==P)return $.name}return A}function sr(P){var A=jt.call(Q,"placeholder")?Q:P;return A.placeholder}function Rt(){var P=Q.iteratee||Cf;return P=P===Cf?vp:P,arguments.length?P(arguments[0],arguments[1]):P}function lh(P,A){var I=P.__data__;return kP(A)?I[typeof A=="string"?"string":"hash"]:I.map}function rf(P){for(var A=Pe(P),I=A.length;I--;){var Y=A[I],$=P[Y];A[I]=[Y,$,Jp($)]}return A}function Ms(P,A){var I=_S(P,A);return dp(I)?I:e}function XP(P){var A=jt.call(P,Ts),I=P[Ts];try{P[Ts]=e;var Y=!0}catch(k){}var $=Uo.call(P);return Y&&(A?P[Ts]=I:delete P[Ts]),$}var af=wu?function(P){return P==null?[]:(P=Kt(P),Xn(wu(P),function(A){return jc.call(P,A)}))}:Pf,$p=wu?function(P){for(var A=[];P;)Hn(A,af(P)),P=Xo(P);return A}:Pf,be=We;(Du&&be(new Du(new ArrayBuffer(1)))!=qt||kr&&be(new kr)!=ut||Bu&&be(Bu.resolve())!=Tt||_s&&be(new _s)!=gt||jr&&be(new jr)!=Ht)&&(be=function(P){var A=We(P),I=A==yt?P.constructor:e,Y=I?As(I):"";if(Y)switch(Y){case ME:return qt;case AE:return ut;case RE:return Tt;case OE:return gt;case LE:return Ht}return A});function HP(P,A,I){for(var Y=-1,$=I.length;++Y<$;){var k=I[Y],j=k.size;switch(k.type){case"drop":P+=j;break;case"dropRight":A-=j;break;case"take":A=Ne(A,P+j);break;case"takeRight":P=me(P,A-j);break}}return{start:P,end:A}}function $P(P){var A=P.match(jC);return A?A[1].split(qC):[]}function Kp(P,A,I){A=Qn(A,P);for(var Y=-1,$=A.length,k=!1;++Y<$;){var j=hn(A[Y]);if(!(k=P!=null&&I(P,j)))break;P=P[j]}return k||++Y!=$?k:($=P==null?0:P.length,!!$&&gh($)&&In(j,$)&&(Dt(P)||Rs(P)))}function KP(P){var A=P.length,I=new P.constructor(A);return A&&typeof P[0]=="string"&&jt.call(P,"index")&&(I.index=P.index,I.input=P.input),I}function Zp(P){return typeof P.constructor=="function"&&!aa(P)?er(Xo(P)):{}}function ZP(P,A,I){var Y=P.constructor;switch(A){case te:return qu(P);case q:case _:return new Y(+P);case qt:return FP(P,I);case ee:case Ee:case hi:case li:case ui:case fi:case di:case vi:case Zr:return Lp(P,I);case ut:return new Y;case ct:case Pt:return new Y(P);case It:return IP(P);case gt:return new Y;case ge:return wP(P)}}function JP(P,A){var I=A.length;if(!I)return P;var Y=I-1;return A[Y]=(I>1?"& ":"")+A[Y],A=A.join(I>2?", ":" "),P.replace(kC,`{
/* [wrapped with `+A+`] */
`)}function QP(P){return Dt(P)||Rs(P)||!!(qc&&P&&P[qc])}function In(P,A){var I=typeof P;return A=A??K,!!A&&(I=="number"||I!="symbol"&&oS.test(P))&&P>-1&&P%1==0&&P<A}function Xe(P,A,I){if(!ue(I))return!1;var Y=typeof A;return(Y=="number"?ke(I)&&In(A,I.length):Y=="string"&&A in I)?Xi(I[A],P):!1}function of(P,A){if(Dt(P))return!1;var I=typeof P;return I=="number"||I=="symbol"||I=="boolean"||P==null||mi(P)?!0:KC.test(P)||!$C.test(P)||A!=null&&P in Kt(A)}function kP(P){var A=typeof P;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?P!=="__proto__":P===null}function hf(P){var A=hh(P),I=Q[A];if(typeof I!="function"||!(A in zt.prototype))return!1;if(P===I)return!0;var Y=sf(I);return!!Y&&P===Y[0]}function jP(P){return!!Jc&&Jc in P}var qP=zo?wn:Mf;function aa(P){var A=P&&P.constructor,I=typeof A=="function"&&A.prototype||qs;return P===I}function Jp(P){return P===P&&!ue(P)}function Qp(P,A){return function(I){return I==null?!1:I[P]===A&&(A!==e||P in Kt(I))}}function _P(P){var A=ch(P,function(Y){return I.size===h&&I.clear(),Y}),I=A.cache;return A}function tM(P,A){var I=P[1],Y=A[1],$=I|Y,k=$<(g|m|E),j=Y==E&&I==y||Y==E&&I==M&&P[7].length<=A[8]||Y==(E|M)&&A[7].length<=A[8]&&I==y;if(!(k||j))return P;Y&g&&(P[2]=A[2],$|=I&g?0:x);var tt=A[3];if(tt){var it=P[3];P[3]=it?Ip(it,tt,A[4]):tt,P[4]=it?$n(P[3],a):A[4]}return tt=A[5],tt&&(it=P[5],P[5]=it?wp(it,tt,A[6]):tt,P[6]=it?$n(P[5],a):A[6]),tt=A[7],tt&&(P[7]=tt),Y&E&&(P[8]=P[8]==null?A[8]:Ne(P[8],A[8])),P[9]==null&&(P[9]=A[9]),P[0]=A[0],P[1]=$,P}function eM(P){var A=[];if(P!=null)for(var I in Kt(P))A.push(I);return A}function iM(P){return Uo.call(P)}function kp(P,A,I){return A=me(A===e?P.length-1:A,0),function(){for(var Y=arguments,$=-1,k=me(Y.length-A,0),j=st(k);++$<k;)j[$]=Y[A+$];$=-1;for(var tt=st(A+1);++$<A;)tt[$]=Y[$];return tt[A]=I(j),ci(P,this,tt)}}function jp(P,A){return A.length<2?P:Ps(P,Fi(A,0,-1))}function nM(P,A){for(var I=P.length,Y=Ne(A.length,I),$=Qe(P);Y--;){var k=A[Y];P[Y]=In(k,I)?$[k]:e}return P}function lf(P,A){if(!(A==="constructor"&&typeof P[A]=="function")&&A!="__proto__")return P[A]}var qp=tg(Cp),oa=xE||function(P,A){return Le.setTimeout(P,A)},uf=tg(AP);function _p(P,A,I){var Y=A+"";return uf(P,JP(Y,sM($P(Y),I)))}function tg(P){var A=0,I=0;return function(){var Y=SE(),$=D-(Y-I);if(I=Y,$>0){if(++A>=F)return arguments[0]}else A=0;return P.apply(e,arguments)}}function uh(P,A){var I=-1,Y=P.length,$=Y-1;for(A=A===e?Y:A;++I<A;){var k=$u(I,$),j=P[k];P[k]=P[I],P[I]=j}return P.length=A,P}var eg=_P(function(P){var A=[];return P.charCodeAt(0)===46&&A.push(""),P.replace(ZC,function(I,Y,$,k){A.push($?k.replace(eS,"$1"):Y||I)}),A});function hn(P){if(typeof P=="string"||mi(P))return P;var A=P+"";return A=="0"&&1/P==-X?"-0":A}function As(P){if(P!=null){try{return Yo.call(P)}catch(A){}try{return P+""}catch(A){}}return""}function sM(P,A){return Ai(U,function(I){var Y="_."+I[0];A&I[1]&&!Bo(P,Y)&&P.push(Y)}),P.sort()}function ig(P){if(P instanceof zt)return P.clone();var A=new Oi(P.__wrapped__,P.__chain__);return A.__actions__=Qe(P.__actions__),A.__index__=P.__index__,A.__values__=P.__values__,A}function rM(P,A,I){(I?Xe(P,A,I):A===e)?A=1:A=me(Bt(A),0);var Y=P==null?0:P.length;if(!Y||A<1)return[];for(var $=0,k=0,j=st(Ko(Y/A));$<Y;)j[k++]=Fi(P,$,$+=A);return j}function aM(P){for(var A=-1,I=P==null?0:P.length,Y=0,$=[];++A<I;){var k=P[A];k&&($[Y++]=k)}return $}function oM(){var P=arguments.length;if(!P)return[];for(var A=st(P-1),I=arguments[0],Y=P;Y--;)A[Y-1]=arguments[Y];return Hn(Dt(I)?Qe(I):[I],Fe(A,1))}var hM=Nt(function(P,A){return ve(P)?ea(P,Fe(A,1,ve,!0)):[]}),lM=Nt(function(P,A){var I=Ii(A);return ve(I)&&(I=e),ve(P)?ea(P,Fe(A,1,ve,!0),Rt(I,2)):[]}),uM=Nt(function(P,A){var I=Ii(A);return ve(I)&&(I=e),ve(P)?ea(P,Fe(A,1,ve,!0),e,I):[]});function fM(P,A,I){var Y=P==null?0:P.length;return Y?(A=I||A===e?1:Bt(A),Fi(P,A<0?0:A,Y)):[]}function dM(P,A,I){var Y=P==null?0:P.length;return Y?(A=I||A===e?1:Bt(A),A=Y-A,Fi(P,0,A<0?0:A)):[]}function vM(P,A){return P&&P.length?ih(P,Rt(A,3),!0,!0):[]}function cM(P,A){return P&&P.length?ih(P,Rt(A,3),!0):[]}function pM(P,A,I,Y){var $=P==null?0:P.length;return $?(I&&typeof I!="number"&&Xe(P,A,I)&&(I=0,Y=$),oP(P,A,I,Y)):[]}function ng(P,A,I){var Y=P==null?0:P.length;if(!Y)return-1;var $=I==null?0:Bt(I);return $<0&&($=me(Y+$,0)),Go(P,Rt(A,3),$)}function sg(P,A,I){var Y=P==null?0:P.length;if(!Y)return-1;var $=Y-1;return I!==e&&($=Bt(I),$=I<0?me(Y+$,0):Ne($,Y-1)),Go(P,Rt(A,3),$,!0)}function rg(P){var A=P==null?0:P.length;return A?Fe(P,1):[]}function gM(P){var A=P==null?0:P.length;return A?Fe(P,X):[]}function mM(P,A){var I=P==null?0:P.length;return I?(A=A===e?1:Bt(A),Fe(P,A)):[]}function xM(P){for(var A=-1,I=P==null?0:P.length,Y={};++A<I;){var $=P[A];Y[$[0]]=$[1]}return Y}function ag(P){return P&&P.length?P[0]:e}function yM(P,A,I){var Y=P==null?0:P.length;if(!Y)return-1;var $=I==null?0:Bt(I);return $<0&&($=me(Y+$,0)),Js(P,A,$)}function TM(P){var A=P==null?0:P.length;return A?Fi(P,0,-1):[]}var CM=Nt(function(P){var A=ae(P,ku);return A.length&&A[0]===P[0]?Uu(A):[]}),SM=Nt(function(P){var A=Ii(P),I=ae(P,ku);return A===Ii(I)?A=e:I.pop(),I.length&&I[0]===P[0]?Uu(I,Rt(A,2)):[]}),EM=Nt(function(P){var A=Ii(P),I=ae(P,ku);return A=typeof A=="function"?A:e,A&&I.pop(),I.length&&I[0]===P[0]?Uu(I,e,A):[]});function PM(P,A){return P==null?"":TE.call(P,A)}function Ii(P){var A=P==null?0:P.length;return A?P[A-1]:e}function MM(P,A,I){var Y=P==null?0:P.length;if(!Y)return-1;var $=Y;return I!==e&&($=Bt(I),$=$<0?me(Y+$,0):Ne($,Y-1)),A===A?sE(P,A,$):Go(P,Uc,$,!0)}function AM(P,A){return P&&P.length?mp(P,Bt(A)):e}var RM=Nt(og);function og(P,A){return P&&P.length&&A&&A.length?Hu(P,A):P}function OM(P,A,I){return P&&P.length&&A&&A.length?Hu(P,A,Rt(I,2)):P}function LM(P,A,I){return P&&P.length&&A&&A.length?Hu(P,A,e,I):P}var FM=Fn(function(P,A){var I=P==null?0:P.length,Y=Nu(P,A);return Tp(P,ae(A,function($){return In($,I)?+$:$}).sort(Fp)),Y});function IM(P,A){var I=[];if(!(P&&P.length))return I;var Y=-1,$=[],k=P.length;for(A=Rt(A,3);++Y<k;){var j=P[Y];A(j,Y,P)&&(I.push(j),$.push(Y))}return Tp(P,$),I}function ff(P){return P==null?P:PE.call(P)}function wM(P,A,I){var Y=P==null?0:P.length;return Y?(I&&typeof I!="number"&&Xe(P,A,I)?(A=0,I=Y):(A=A==null?0:Bt(A),I=I===e?Y:Bt(I)),Fi(P,A,I)):[]}function DM(P,A){return eh(P,A)}function BM(P,A,I){return Zu(P,A,Rt(I,2))}function GM(P,A){var I=P==null?0:P.length;if(I){var Y=eh(P,A);if(Y<I&&Xi(P[Y],A))return Y}return-1}function NM(P,A){return eh(P,A,!0)}function bM(P,A,I){return Zu(P,A,Rt(I,2),!0)}function zM(P,A){var I=P==null?0:P.length;if(I){var Y=eh(P,A,!0)-1;if(Xi(P[Y],A))return Y}return-1}function YM(P){return P&&P.length?Sp(P):[]}function UM(P,A){return P&&P.length?Sp(P,Rt(A,2)):[]}function VM(P){var A=P==null?0:P.length;return A?Fi(P,1,A):[]}function WM(P,A,I){return P&&P.length?(A=I||A===e?1:Bt(A),Fi(P,0,A<0?0:A)):[]}function XM(P,A,I){var Y=P==null?0:P.length;return Y?(A=I||A===e?1:Bt(A),A=Y-A,Fi(P,A<0?0:A,Y)):[]}function HM(P,A){return P&&P.length?ih(P,Rt(A,3),!1,!0):[]}function $M(P,A){return P&&P.length?ih(P,Rt(A,3)):[]}var KM=Nt(function(P){return Jn(Fe(P,1,ve,!0))}),ZM=Nt(function(P){var A=Ii(P);return ve(A)&&(A=e),Jn(Fe(P,1,ve,!0),Rt(A,2))}),JM=Nt(function(P){var A=Ii(P);return A=typeof A=="function"?A:e,Jn(Fe(P,1,ve,!0),e,A)});function QM(P){return P&&P.length?Jn(P):[]}function kM(P,A){return P&&P.length?Jn(P,Rt(A,2)):[]}function jM(P,A){return A=typeof A=="function"?A:e,P&&P.length?Jn(P,e,A):[]}function df(P){if(!(P&&P.length))return[];var A=0;return P=Xn(P,function(I){if(ve(I))return A=me(I.length,A),!0}),Ou(A,function(I){return ae(P,Mu(I))})}function hg(P,A){if(!(P&&P.length))return[];var I=df(P);return A==null?I:ae(I,function(Y){return ci(A,e,Y)})}var qM=Nt(function(P,A){return ve(P)?ea(P,A):[]}),_M=Nt(function(P){return Qu(Xn(P,ve))}),tA=Nt(function(P){var A=Ii(P);return ve(A)&&(A=e),Qu(Xn(P,ve),Rt(A,2))}),eA=Nt(function(P){var A=Ii(P);return A=typeof A=="function"?A:e,Qu(Xn(P,ve),e,A)}),iA=Nt(df);function nA(P,A){return Ap(P||[],A||[],ta)}function sA(P,A){return Ap(P||[],A||[],sa)}var rA=Nt(function(P){var A=P.length,I=A>1?P[A-1]:e;return I=typeof I=="function"?(P.pop(),I):e,hg(P,I)});function lg(P){var A=Q(P);return A.__chain__=!0,A}function aA(P,A){return A(P),P}function fh(P,A){return A(P)}var oA=Fn(function(P){var A=P.length,I=A?P[0]:0,Y=this.__wrapped__,$=function(k){return Nu(k,P)};return A>1||this.__actions__.length||!(Y instanceof zt)||!In(I)?this.thru($):(Y=Y.slice(I,+I+(A?1:0)),Y.__actions__.push({func:fh,args:[$],thisArg:e}),new Oi(Y,this.__chain__).thru(function(k){return A&&!k.length&&k.push(e),k}))});function hA(){return lg(this)}function lA(){return new Oi(this.value(),this.__chain__)}function uA(){this.__values__===e&&(this.__values__=Eg(this.value()));var P=this.__index__>=this.__values__.length,A=P?e:this.__values__[this.__index__++];return{done:P,value:A}}function fA(){return this}function dA(P){for(var A,I=this;I instanceof ko;){var Y=ig(I);Y.__index__=0,Y.__values__=e,A?$.__wrapped__=Y:A=Y;var $=Y;I=I.__wrapped__}return $.__wrapped__=P,A}function vA(){var P=this.__wrapped__;if(P instanceof zt){var A=P;return this.__actions__.length&&(A=new zt(this)),A=A.reverse(),A.__actions__.push({func:fh,args:[ff],thisArg:e}),new Oi(A,this.__chain__)}return this.thru(ff)}function cA(){return Mp(this.__wrapped__,this.__actions__)}var pA=nh(function(P,A,I){jt.call(P,I)?++P[I]:On(P,I,1)});function gA(P,A,I){var Y=Dt(P)?zc:aP;return I&&Xe(P,A,I)&&(A=e),Y(P,Rt(A,3))}function mA(P,A){var I=Dt(P)?Xn:hp;return I(P,Rt(A,3))}var xA=Np(ng),yA=Np(sg);function TA(P,A){return Fe(dh(P,A),1)}function CA(P,A){return Fe(dh(P,A),X)}function SA(P,A,I){return I=I===e?1:Bt(I),Fe(dh(P,A),I)}function ug(P,A){var I=Dt(P)?Ai:Zn;return I(P,Rt(A,3))}function fg(P,A){var I=Dt(P)?VS:op;return I(P,Rt(A,3))}var EA=nh(function(P,A,I){jt.call(P,I)?P[I].push(A):On(P,I,[A])});function PA(P,A,I,Y){P=ke(P)?P:ar(P),I=I&&!Y?Bt(I):0;var $=P.length;return I<0&&(I=me($+I,0)),mh(P)?I<=$&&P.indexOf(A,I)>-1:!!$&&Js(P,A,I)>-1}var MA=Nt(function(P,A,I){var Y=-1,$=typeof A=="function",k=ke(P)?st(P.length):[];return Zn(P,function(j){k[++Y]=$?ci(A,j,I):ia(j,A,I)}),k}),AA=nh(function(P,A,I){On(P,I,A)});function dh(P,A){var I=Dt(P)?ae:cp;return I(P,Rt(A,3))}function RA(P,A,I,Y){return P==null?[]:(Dt(A)||(A=A==null?[]:[A]),I=Y?e:I,Dt(I)||(I=I==null?[]:[I]),xp(P,A,I))}var OA=nh(function(P,A,I){P[I?0:1].push(A)},function(){return[[],[]]});function LA(P,A,I){var Y=Dt(P)?Eu:Wc,$=arguments.length<3;return Y(P,Rt(A,4),I,$,Zn)}function FA(P,A,I){var Y=Dt(P)?WS:Wc,$=arguments.length<3;return Y(P,Rt(A,4),I,$,op)}function IA(P,A){var I=Dt(P)?Xn:hp;return I(P,ph(Rt(A,3)))}function wA(P){var A=Dt(P)?np:PP;return A(P)}function DA(P,A,I){(I?Xe(P,A,I):A===e)?A=1:A=Bt(A);var Y=Dt(P)?eP:MP;return Y(P,A)}function BA(P){var A=Dt(P)?iP:RP;return A(P)}function GA(P){if(P==null)return 0;if(ke(P))return mh(P)?ks(P):P.length;var A=be(P);return A==ut||A==gt?P.size:Wu(P).length}function NA(P,A,I){var Y=Dt(P)?Pu:OP;return I&&Xe(P,A,I)&&(A=e),Y(P,Rt(A,3))}var bA=Nt(function(P,A){if(P==null)return[];var I=A.length;return I>1&&Xe(P,A[0],A[1])?A=[]:I>2&&Xe(A[0],A[1],A[2])&&(A=[A[0]]),xp(P,Fe(A,1),[])}),vh=mE||function(){return Le.Date.now()};function zA(P,A){if(typeof A!="function")throw new Ri(u);return P=Bt(P),function(){if(--P<1)return A.apply(this,arguments)}}function dg(P,A,I){return A=I?e:A,A=P&&A==null?P.length:A,Ln(P,E,e,e,e,e,A)}function vg(P,A){var I;if(typeof A!="function")throw new Ri(u);return P=Bt(P),function(){return--P>0&&(I=A.apply(this,arguments)),P<=1&&(A=e),I}}var vf=Nt(function(P,A,I){var Y=g;if(I.length){var $=$n(I,sr(vf));Y|=C}return Ln(P,Y,A,I,$)}),cg=Nt(function(P,A,I){var Y=g|m;if(I.length){var $=$n(I,sr(cg));Y|=C}return Ln(A,Y,P,I,$)});function pg(P,A,I){A=I?e:A;var Y=Ln(P,y,e,e,e,e,e,A);return Y.placeholder=pg.placeholder,Y}function gg(P,A,I){A=I?e:A;var Y=Ln(P,T,e,e,e,e,e,A);return Y.placeholder=gg.placeholder,Y}function mg(P,A,I){var Y,$,k,j,tt,it,ht=0,lt=!1,ft=!1,pt=!0;if(typeof P!="function")throw new Ri(u);A=wi(A)||0,ue(I)&&(lt=!!I.leading,ft="maxWait"in I,k=ft?me(wi(I.maxWait)||0,A):k,pt="trailing"in I?!!I.trailing:pt);function Et(ce){var Hi=Y,Bn=$;return Y=$=e,ht=ce,j=P.apply(Bn,Hi),j}function Ot(ce){return ht=ce,tt=oa(bt,A),lt?Et(ce):j}function Gt(ce){var Hi=ce-it,Bn=ce-ht,Ng=A-Hi;return ft?Ne(Ng,k-Bn):Ng}function Lt(ce){var Hi=ce-it,Bn=ce-ht;return it===e||Hi>=A||Hi<0||ft&&Bn>=k}function bt(){var ce=vh();if(Lt(ce))return Wt(ce);tt=oa(bt,Gt(ce))}function Wt(ce){return tt=e,pt&&Y?Et(ce):(Y=$=e,j)}function xi(){tt!==e&&Rp(tt),ht=0,Y=it=$=tt=e}function He(){return tt===e?j:Wt(vh())}function yi(){var ce=vh(),Hi=Lt(ce);if(Y=arguments,$=this,it=ce,Hi){if(tt===e)return Ot(it);if(ft)return Rp(tt),tt=oa(bt,A),Et(it)}return tt===e&&(tt=oa(bt,A)),j}return yi.cancel=xi,yi.flush=He,yi}var YA=Nt(function(P,A){return ap(P,1,A)}),UA=Nt(function(P,A,I){return ap(P,wi(A)||0,I)});function VA(P){return Ln(P,R)}function ch(P,A){if(typeof P!="function"||A!=null&&typeof A!="function")throw new Ri(u);var I=function(){var Y=arguments,$=A?A.apply(this,Y):Y[0],k=I.cache;if(k.has($))return k.get($);var j=P.apply(this,Y);return I.cache=k.set($,j)||k,j};return I.cache=new(ch.Cache||Rn),I}ch.Cache=Rn;function ph(P){if(typeof P!="function")throw new Ri(u);return function(){var A=arguments;switch(A.length){case 0:return!P.call(this);case 1:return!P.call(this,A[0]);case 2:return!P.call(this,A[0],A[1]);case 3:return!P.call(this,A[0],A[1],A[2])}return!P.apply(this,A)}}function WA(P){return vg(2,P)}var XA=LP(function(P,A){A=A.length==1&&Dt(A[0])?ae(A[0],pi(Rt())):ae(Fe(A,1),pi(Rt()));var I=A.length;return Nt(function(Y){for(var $=-1,k=Ne(Y.length,I);++$<k;)Y[$]=A[$].call(this,Y[$]);return ci(P,this,Y)})}),cf=Nt(function(P,A){var I=$n(A,sr(cf));return Ln(P,C,e,A,I)}),xg=Nt(function(P,A){var I=$n(A,sr(xg));return Ln(P,S,e,A,I)}),HA=Fn(function(P,A){return Ln(P,M,e,e,e,A)});function $A(P,A){if(typeof P!="function")throw new Ri(u);return A=A===e?A:Bt(A),Nt(P,A)}function KA(P,A){if(typeof P!="function")throw new Ri(u);return A=A==null?0:me(Bt(A),0),Nt(function(I){var Y=I[A],$=kn(I,0,A);return Y&&Hn($,Y),ci(P,this,$)})}function ZA(P,A,I){var Y=!0,$=!0;if(typeof P!="function")throw new Ri(u);return ue(I)&&(Y="leading"in I?!!I.leading:Y,$="trailing"in I?!!I.trailing:$),mg(P,A,{leading:Y,maxWait:A,trailing:$})}function JA(P){return dg(P,1)}function QA(P,A){return cf(ju(A),P)}function kA(){if(!arguments.length)return[];var P=arguments[0];return Dt(P)?P:[P]}function jA(P){return Li(P,f)}function qA(P,A){return A=typeof A=="function"?A:e,Li(P,f,A)}function _A(P){return Li(P,l|f)}function tR(P,A){return A=typeof A=="function"?A:e,Li(P,l|f,A)}function eR(P,A){return A==null||rp(P,A,Pe(A))}function Xi(P,A){return P===A||P!==P&&A!==A}var iR=oh(Yu),nR=oh(function(P,A){return P>=A}),Rs=fp(function(){return arguments}())?fp:function(P){return fe(P)&&jt.call(P,"callee")&&!jc.call(P,"callee")},Dt=st.isArray,sR=wc?pi(wc):dP;function ke(P){return P!=null&&gh(P.length)&&!wn(P)}function ve(P){return fe(P)&&ke(P)}function rR(P){return P===!0||P===!1||fe(P)&&We(P)==q}var jn=yE||Mf,aR=Dc?pi(Dc):vP;function oR(P){return fe(P)&&P.nodeType===1&&!ha(P)}function hR(P){if(P==null)return!0;if(ke(P)&&(Dt(P)||typeof P=="string"||typeof P.splice=="function"||jn(P)||rr(P)||Rs(P)))return!P.length;var A=be(P);if(A==ut||A==gt)return!P.size;if(aa(P))return!Wu(P).length;for(var I in P)if(jt.call(P,I))return!1;return!0}function lR(P,A){return na(P,A)}function uR(P,A,I){I=typeof I=="function"?I:e;var Y=I?I(P,A):e;return Y===e?na(P,A,e,I):!!Y}function pf(P){if(!fe(P))return!1;var A=We(P);return A==rt||A==nt||typeof P.message=="string"&&typeof P.name=="string"&&!ha(P)}function fR(P){return typeof P=="number"&&_c(P)}function wn(P){if(!ue(P))return!1;var A=We(P);return A==at||A==vt||A==Z||A==dt}function yg(P){return typeof P=="number"&&P==Bt(P)}function gh(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=K}function ue(P){var A=typeof P;return P!=null&&(A=="object"||A=="function")}function fe(P){return P!=null&&typeof P=="object"}var Tg=Bc?pi(Bc):pP;function dR(P,A){return P===A||Vu(P,A,rf(A))}function vR(P,A,I){return I=typeof I=="function"?I:e,Vu(P,A,rf(A),I)}function cR(P){return Cg(P)&&P!=+P}function pR(P){if(qP(P))throw new wt(n);return dp(P)}function gR(P){return P===null}function mR(P){return P==null}function Cg(P){return typeof P=="number"||fe(P)&&We(P)==ct}function ha(P){if(!fe(P)||We(P)!=yt)return!1;var A=Xo(P);if(A===null)return!0;var I=jt.call(A,"constructor")&&A.constructor;return typeof I=="function"&&I instanceof I&&Yo.call(I)==vE}var gf=Gc?pi(Gc):gP;function xR(P){return yg(P)&&P>=-K&&P<=K}var Sg=Nc?pi(Nc):mP;function mh(P){return typeof P=="string"||!Dt(P)&&fe(P)&&We(P)==Pt}function mi(P){return typeof P=="symbol"||fe(P)&&We(P)==ge}var rr=bc?pi(bc):xP;function yR(P){return P===e}function TR(P){return fe(P)&&be(P)==Ht}function CR(P){return fe(P)&&We(P)==Vt}var SR=oh(Xu),ER=oh(function(P,A){return P<=A});function Eg(P){if(!P)return[];if(ke(P))return mh(P)?Vi(P):Qe(P);if(Qr&&P[Qr])return eE(P[Qr]());var A=be(P),I=A==ut?Fu:A==gt?No:ar;return I(P)}function Dn(P){if(!P)return P===0?P:0;if(P=wi(P),P===X||P===-X){var A=P<0?-1:1;return A*J}return P===P?P:0}function Bt(P){var A=Dn(P),I=A%1;return A===A?I?A-I:A:0}function Pg(P){return P?Es(Bt(P),0,w):0}function wi(P){if(typeof P=="number")return P;if(mi(P))return G;if(ue(P)){var A=typeof P.valueOf=="function"?P.valueOf():P;P=ue(A)?A+"":A}if(typeof P!="string")return P===0?P:+P;P=Xc(P);var I=sS.test(P);return I||aS.test(P)?zS(P.slice(2),I?2:8):nS.test(P)?G:+P}function Mg(P){return on(P,je(P))}function PR(P){return P?Es(Bt(P),-K,K):P===0?P:0}function Qt(P){return P==null?"":gi(P)}var MR=ir(function(P,A){if(aa(A)||ke(A)){on(A,Pe(A),P);return}for(var I in A)jt.call(A,I)&&ta(P,I,A[I])}),Ag=ir(function(P,A){on(A,je(A),P)}),xh=ir(function(P,A,I,Y){on(A,je(A),P,Y)}),AR=ir(function(P,A,I,Y){on(A,Pe(A),P,Y)}),RR=Fn(Nu);function OR(P,A){var I=er(P);return A==null?I:sp(I,A)}var LR=Nt(function(P,A){P=Kt(P);var I=-1,Y=A.length,$=Y>2?A[2]:e;for($&&Xe(A[0],A[1],$)&&(Y=1);++I<Y;)for(var k=A[I],j=je(k),tt=-1,it=j.length;++tt<it;){var ht=j[tt],lt=P[ht];(lt===e||Xi(lt,qs[ht])&&!jt.call(P,ht))&&(P[ht]=k[ht])}return P}),FR=Nt(function(P){return P.push(e,Xp),ci(Rg,e,P)});function IR(P,A){return Yc(P,Rt(A,3),an)}function wR(P,A){return Yc(P,Rt(A,3),zu)}function DR(P,A){return P==null?P:bu(P,Rt(A,3),je)}function BR(P,A){return P==null?P:lp(P,Rt(A,3),je)}function GR(P,A){return P&&an(P,Rt(A,3))}function NR(P,A){return P&&zu(P,Rt(A,3))}function bR(P){return P==null?[]:_o(P,Pe(P))}function zR(P){return P==null?[]:_o(P,je(P))}function mf(P,A,I){var Y=P==null?e:Ps(P,A);return Y===e?I:Y}function YR(P,A){return P!=null&&Kp(P,A,hP)}function xf(P,A){return P!=null&&Kp(P,A,lP)}var UR=zp(function(P,A,I){A!=null&&typeof A.toString!="function"&&(A=Uo.call(A)),P[A]=I},Tf(qe)),VR=zp(function(P,A,I){A!=null&&typeof A.toString!="function"&&(A=Uo.call(A)),jt.call(P,A)?P[A].push(I):P[A]=[I]},Rt),WR=Nt(ia);function Pe(P){return ke(P)?ip(P):Wu(P)}function je(P){return ke(P)?ip(P,!0):yP(P)}function XR(P,A){var I={};return A=Rt(A,3),an(P,function(Y,$,k){On(I,A(Y,$,k),Y)}),I}function HR(P,A){var I={};return A=Rt(A,3),an(P,function(Y,$,k){On(I,$,A(Y,$,k))}),I}var $R=ir(function(P,A,I){th(P,A,I)}),Rg=ir(function(P,A,I,Y){th(P,A,I,Y)}),KR=Fn(function(P,A){var I={};if(P==null)return I;var Y=!1;A=ae(A,function(k){return k=Qn(k,P),Y||(Y=k.length>1),k}),on(P,nf(P),I),Y&&(I=Li(I,l|c|f,UP));for(var $=A.length;$--;)Ju(I,A[$]);return I});function ZR(P,A){return Og(P,ph(Rt(A)))}var JR=Fn(function(P,A){return P==null?{}:CP(P,A)});function Og(P,A){if(P==null)return{};var I=ae(nf(P),function(Y){return[Y]});return A=Rt(A),yp(P,I,function(Y,$){return A(Y,$[0])})}function QR(P,A,I){A=Qn(A,P);var Y=-1,$=A.length;for($||($=1,P=e);++Y<$;){var k=P==null?e:P[hn(A[Y])];k===e&&(Y=$,k=I),P=wn(k)?k.call(P):k}return P}function kR(P,A,I){return P==null?P:sa(P,A,I)}function jR(P,A,I,Y){return Y=typeof Y=="function"?Y:e,P==null?P:sa(P,A,I,Y)}var Lg=Vp(Pe),Fg=Vp(je);function qR(P,A,I){var Y=Dt(P),$=Y||jn(P)||rr(P);if(A=Rt(A,4),I==null){var k=P&&P.constructor;$?I=Y?new k:[]:ue(P)?I=wn(k)?er(Xo(P)):{}:I={}}return($?Ai:an)(P,function(j,tt,it){return A(I,j,tt,it)}),I}function _R(P,A){return P==null?!0:Ju(P,A)}function tO(P,A,I){return P==null?P:Pp(P,A,ju(I))}function eO(P,A,I,Y){return Y=typeof Y=="function"?Y:e,P==null?P:Pp(P,A,ju(I),Y)}function ar(P){return P==null?[]:Lu(P,Pe(P))}function iO(P){return P==null?[]:Lu(P,je(P))}function nO(P,A,I){return I===e&&(I=A,A=e),I!==e&&(I=wi(I),I=I===I?I:0),A!==e&&(A=wi(A),A=A===A?A:0),Es(wi(P),A,I)}function sO(P,A,I){return A=Dn(A),I===e?(I=A,A=0):I=Dn(I),P=wi(P),uP(P,A,I)}function rO(P,A,I){if(I&&typeof I!="boolean"&&Xe(P,A,I)&&(A=I=e),I===e&&(typeof A=="boolean"?(I=A,A=e):typeof P=="boolean"&&(I=P,P=e)),P===e&&A===e?(P=0,A=1):(P=Dn(P),A===e?(A=P,P=0):A=Dn(A)),P>A){var Y=P;P=A,A=Y}if(I||P%1||A%1){var $=tp();return Ne(P+$*(A-P+bS("1e-"+(($+"").length-1))),A)}return $u(P,A)}var aO=nr(function(P,A,I){return A=A.toLowerCase(),P+(I?Ig(A):A)});function Ig(P){return yf(Qt(P).toLowerCase())}function wg(P){return P=Qt(P),P&&P.replace(hS,kS).replace(RS,"")}function oO(P,A,I){P=Qt(P),A=gi(A);var Y=P.length;I=I===e?Y:Es(Bt(I),0,Y);var $=I;return I-=A.length,I>=0&&P.slice(I,$)==A}function hO(P){return P=Qt(P),P&&WC.test(P)?P.replace(lc,jS):P}function lO(P){return P=Qt(P),P&&JC.test(P)?P.replace(vu,"\\$&"):P}var uO=nr(function(P,A,I){return P+(I?"-":"")+A.toLowerCase()}),fO=nr(function(P,A,I){return P+(I?" ":"")+A.toLowerCase()}),dO=Gp("toLowerCase");function vO(P,A,I){P=Qt(P),A=Bt(A);var Y=A?ks(P):0;if(!A||Y>=A)return P;var $=(A-Y)/2;return ah(Zo($),I)+P+ah(Ko($),I)}function cO(P,A,I){P=Qt(P),A=Bt(A);var Y=A?ks(P):0;return A&&Y<A?P+ah(A-Y,I):P}function pO(P,A,I){P=Qt(P),A=Bt(A);var Y=A?ks(P):0;return A&&Y<A?ah(A-Y,I)+P:P}function gO(P,A,I){return I||A==null?A=0:A&&(A=+A),EE(Qt(P).replace(cu,""),A||0)}function mO(P,A,I){return(I?Xe(P,A,I):A===e)?A=1:A=Bt(A),Ku(Qt(P),A)}function xO(){var P=arguments,A=Qt(P[0]);return P.length<3?A:A.replace(P[1],P[2])}var yO=nr(function(P,A,I){return P+(I?"_":"")+A.toLowerCase()});function TO(P,A,I){return I&&typeof I!="number"&&Xe(P,A,I)&&(A=I=e),I=I===e?w:I>>>0,I?(P=Qt(P),P&&(typeof A=="string"||A!=null&&!gf(A))&&(A=gi(A),!A&&Qs(P))?kn(Vi(P),0,I):P.split(A,I)):[]}var CO=nr(function(P,A,I){return P+(I?" ":"")+yf(A)});function SO(P,A,I){return P=Qt(P),I=I==null?0:Es(Bt(I),0,P.length),A=gi(A),P.slice(I,I+A.length)==A}function EO(P,A,I){var Y=Q.templateSettings;I&&Xe(P,A,I)&&(A=e),P=Qt(P),A=xh({},A,Y,Wp);var $=xh({},A.imports,Y.imports,Wp),k=Pe($),j=Lu($,k),tt,it,ht=0,lt=A.interpolate||Io,ft="__p += '",pt=Iu((A.escape||Io).source+"|"+lt.source+"|"+(lt===uc?iS:Io).source+"|"+(A.evaluate||Io).source+"|$","g"),Et="//# sourceURL="+(jt.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wS+"]")+`
`;P.replace(pt,function(Lt,bt,Wt,xi,He,yi){return Wt||(Wt=xi),ft+=P.slice(ht,yi).replace(lS,qS),bt&&(tt=!0,ft+=`' +
__e(`+bt+`) +
'`),He&&(it=!0,ft+=`';
`+He+`;
__p += '`),Wt&&(ft+=`' +
((__t = (`+Wt+`)) == null ? '' : __t) +
'`),ht=yi+Lt.length,Lt}),ft+=`';
`;var Ot=jt.call(A,"variable")&&A.variable;if(!Ot)ft=`with (obj) {
`+ft+`
}
`;else if(tS.test(Ot))throw new wt(s);ft=(it?ft.replace(zC,""):ft).replace(YC,"$1").replace(UC,"$1;"),ft="function("+(Ot||"obj")+`) {
`+(Ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(tt?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var Gt=Bg(function(){return $t(k,Et+"return "+ft).apply(e,j)});if(Gt.source=ft,pf(Gt))throw Gt;return Gt}function PO(P){return Qt(P).toLowerCase()}function MO(P){return Qt(P).toUpperCase()}function AO(P,A,I){if(P=Qt(P),P&&(I||A===e))return Xc(P);if(!P||!(A=gi(A)))return P;var Y=Vi(P),$=Vi(A),k=Hc(Y,$),j=$c(Y,$)+1;return kn(Y,k,j).join("")}function RO(P,A,I){if(P=Qt(P),P&&(I||A===e))return P.slice(0,Zc(P)+1);if(!P||!(A=gi(A)))return P;var Y=Vi(P),$=$c(Y,Vi(A))+1;return kn(Y,0,$).join("")}function OO(P,A,I){if(P=Qt(P),P&&(I||A===e))return P.replace(cu,"");if(!P||!(A=gi(A)))return P;var Y=Vi(P),$=Hc(Y,Vi(A));return kn(Y,$).join("")}function LO(P,A){var I=L,Y=O;if(ue(A)){var $="separator"in A?A.separator:$;I="length"in A?Bt(A.length):I,Y="omission"in A?gi(A.omission):Y}P=Qt(P);var k=P.length;if(Qs(P)){var j=Vi(P);k=j.length}if(I>=k)return P;var tt=I-ks(Y);if(tt<1)return Y;var it=j?kn(j,0,tt).join(""):P.slice(0,tt);if($===e)return it+Y;if(j&&(tt+=it.length-tt),gf($)){if(P.slice(tt).search($)){var ht,lt=it;for($.global||($=Iu($.source,Qt(fc.exec($))+"g")),$.lastIndex=0;ht=$.exec(lt);)var ft=ht.index;it=it.slice(0,ft===e?tt:ft)}}else if(P.indexOf(gi($),tt)!=tt){var pt=it.lastIndexOf($);pt>-1&&(it=it.slice(0,pt))}return it+Y}function FO(P){return P=Qt(P),P&&VC.test(P)?P.replace(hc,rE):P}var IO=nr(function(P,A,I){return P+(I?" ":"")+A.toUpperCase()}),yf=Gp("toUpperCase");function Dg(P,A,I){return P=Qt(P),A=I?e:A,A===e?tE(P)?hE(P):$S(P):P.match(A)||[]}var Bg=Nt(function(P,A){try{return ci(P,e,A)}catch(I){return pf(I)?I:new wt(I)}}),wO=Fn(function(P,A){return Ai(A,function(I){I=hn(I),On(P,I,vf(P[I],P))}),P});function DO(P){var A=P==null?0:P.length,I=Rt();return P=A?ae(P,function(Y){if(typeof Y[1]!="function")throw new Ri(u);return[I(Y[0]),Y[1]]}):[],Nt(function(Y){for(var $=-1;++$<A;){var k=P[$];if(ci(k[0],this,Y))return ci(k[1],this,Y)}})}function BO(P){return rP(Li(P,l))}function Tf(P){return function(){return P}}function GO(P,A){return P==null||P!==P?A:P}var NO=bp(),bO=bp(!0);function qe(P){return P}function Cf(P){return vp(typeof P=="function"?P:Li(P,l))}function zO(P){return pp(Li(P,l))}function YO(P,A){return gp(P,Li(A,l))}var UO=Nt(function(P,A){return function(I){return ia(I,P,A)}}),VO=Nt(function(P,A){return function(I){return ia(P,I,A)}});function Sf(P,A,I){var Y=Pe(A),$=_o(A,Y);I==null&&!(ue(A)&&($.length||!Y.length))&&(I=A,A=P,P=this,$=_o(A,Pe(A)));var k=!(ue(I)&&"chain"in I)||!!I.chain,j=wn(P);return Ai($,function(tt){var it=A[tt];P[tt]=it,j&&(P.prototype[tt]=function(){var ht=this.__chain__;if(k||ht){var lt=P(this.__wrapped__),ft=lt.__actions__=Qe(this.__actions__);return ft.push({func:it,args:arguments,thisArg:P}),lt.__chain__=ht,lt}return it.apply(P,Hn([this.value()],arguments))})}),P}function WO(){return Le._===this&&(Le._=cE),this}function Ef(){}function XO(P){return P=Bt(P),Nt(function(A){return mp(A,P)})}var HO=_u(ae),$O=_u(zc),KO=_u(Pu);function Gg(P){return of(P)?Mu(hn(P)):SP(P)}function ZO(P){return function(A){return P==null?e:Ps(P,A)}}var JO=Yp(),QO=Yp(!0);function Pf(){return[]}function Mf(){return!1}function kO(){return{}}function jO(){return""}function qO(){return!0}function _O(P,A){if(P=Bt(P),P<1||P>K)return[];var I=w,Y=Ne(P,w);A=Rt(A),P-=w;for(var $=Ou(Y,A);++I<P;)A(I);return $}function t2(P){return Dt(P)?ae(P,hn):mi(P)?[P]:Qe(eg(Qt(P)))}function e2(P){var A=++dE;return Qt(P)+A}var i2=rh(function(P,A){return P+A},0),n2=tf("ceil"),s2=rh(function(P,A){return P/A},1),r2=tf("floor");function a2(P){return P&&P.length?qo(P,qe,Yu):e}function o2(P,A){return P&&P.length?qo(P,Rt(A,2),Yu):e}function h2(P){return Vc(P,qe)}function l2(P,A){return Vc(P,Rt(A,2))}function u2(P){return P&&P.length?qo(P,qe,Xu):e}function f2(P,A){return P&&P.length?qo(P,Rt(A,2),Xu):e}var d2=rh(function(P,A){return P*A},1),v2=tf("round"),c2=rh(function(P,A){return P-A},0);function p2(P){return P&&P.length?Ru(P,qe):0}function g2(P,A){return P&&P.length?Ru(P,Rt(A,2)):0}return Q.after=zA,Q.ary=dg,Q.assign=MR,Q.assignIn=Ag,Q.assignInWith=xh,Q.assignWith=AR,Q.at=RR,Q.before=vg,Q.bind=vf,Q.bindAll=wO,Q.bindKey=cg,Q.castArray=kA,Q.chain=lg,Q.chunk=rM,Q.compact=aM,Q.concat=oM,Q.cond=DO,Q.conforms=BO,Q.constant=Tf,Q.countBy=pA,Q.create=OR,Q.curry=pg,Q.curryRight=gg,Q.debounce=mg,Q.defaults=LR,Q.defaultsDeep=FR,Q.defer=YA,Q.delay=UA,Q.difference=hM,Q.differenceBy=lM,Q.differenceWith=uM,Q.drop=fM,Q.dropRight=dM,Q.dropRightWhile=vM,Q.dropWhile=cM,Q.fill=pM,Q.filter=mA,Q.flatMap=TA,Q.flatMapDeep=CA,Q.flatMapDepth=SA,Q.flatten=rg,Q.flattenDeep=gM,Q.flattenDepth=mM,Q.flip=VA,Q.flow=NO,Q.flowRight=bO,Q.fromPairs=xM,Q.functions=bR,Q.functionsIn=zR,Q.groupBy=EA,Q.initial=TM,Q.intersection=CM,Q.intersectionBy=SM,Q.intersectionWith=EM,Q.invert=UR,Q.invertBy=VR,Q.invokeMap=MA,Q.iteratee=Cf,Q.keyBy=AA,Q.keys=Pe,Q.keysIn=je,Q.map=dh,Q.mapKeys=XR,Q.mapValues=HR,Q.matches=zO,Q.matchesProperty=YO,Q.memoize=ch,Q.merge=$R,Q.mergeWith=Rg,Q.method=UO,Q.methodOf=VO,Q.mixin=Sf,Q.negate=ph,Q.nthArg=XO,Q.omit=KR,Q.omitBy=ZR,Q.once=WA,Q.orderBy=RA,Q.over=HO,Q.overArgs=XA,Q.overEvery=$O,Q.overSome=KO,Q.partial=cf,Q.partialRight=xg,Q.partition=OA,Q.pick=JR,Q.pickBy=Og,Q.property=Gg,Q.propertyOf=ZO,Q.pull=RM,Q.pullAll=og,Q.pullAllBy=OM,Q.pullAllWith=LM,Q.pullAt=FM,Q.range=JO,Q.rangeRight=QO,Q.rearg=HA,Q.reject=IA,Q.remove=IM,Q.rest=$A,Q.reverse=ff,Q.sampleSize=DA,Q.set=kR,Q.setWith=jR,Q.shuffle=BA,Q.slice=wM,Q.sortBy=bA,Q.sortedUniq=YM,Q.sortedUniqBy=UM,Q.split=TO,Q.spread=KA,Q.tail=VM,Q.take=WM,Q.takeRight=XM,Q.takeRightWhile=HM,Q.takeWhile=$M,Q.tap=aA,Q.throttle=ZA,Q.thru=fh,Q.toArray=Eg,Q.toPairs=Lg,Q.toPairsIn=Fg,Q.toPath=t2,Q.toPlainObject=Mg,Q.transform=qR,Q.unary=JA,Q.union=KM,Q.unionBy=ZM,Q.unionWith=JM,Q.uniq=QM,Q.uniqBy=kM,Q.uniqWith=jM,Q.unset=_R,Q.unzip=df,Q.unzipWith=hg,Q.update=tO,Q.updateWith=eO,Q.values=ar,Q.valuesIn=iO,Q.without=qM,Q.words=Dg,Q.wrap=QA,Q.xor=_M,Q.xorBy=tA,Q.xorWith=eA,Q.zip=iA,Q.zipObject=nA,Q.zipObjectDeep=sA,Q.zipWith=rA,Q.entries=Lg,Q.entriesIn=Fg,Q.extend=Ag,Q.extendWith=xh,Sf(Q,Q),Q.add=i2,Q.attempt=Bg,Q.camelCase=aO,Q.capitalize=Ig,Q.ceil=n2,Q.clamp=nO,Q.clone=jA,Q.cloneDeep=_A,Q.cloneDeepWith=tR,Q.cloneWith=qA,Q.conformsTo=eR,Q.deburr=wg,Q.defaultTo=GO,Q.divide=s2,Q.endsWith=oO,Q.eq=Xi,Q.escape=hO,Q.escapeRegExp=lO,Q.every=gA,Q.find=xA,Q.findIndex=ng,Q.findKey=IR,Q.findLast=yA,Q.findLastIndex=sg,Q.findLastKey=wR,Q.floor=r2,Q.forEach=ug,Q.forEachRight=fg,Q.forIn=DR,Q.forInRight=BR,Q.forOwn=GR,Q.forOwnRight=NR,Q.get=mf,Q.gt=iR,Q.gte=nR,Q.has=YR,Q.hasIn=xf,Q.head=ag,Q.identity=qe,Q.includes=PA,Q.indexOf=yM,Q.inRange=sO,Q.invoke=WR,Q.isArguments=Rs,Q.isArray=Dt,Q.isArrayBuffer=sR,Q.isArrayLike=ke,Q.isArrayLikeObject=ve,Q.isBoolean=rR,Q.isBuffer=jn,Q.isDate=aR,Q.isElement=oR,Q.isEmpty=hR,Q.isEqual=lR,Q.isEqualWith=uR,Q.isError=pf,Q.isFinite=fR,Q.isFunction=wn,Q.isInteger=yg,Q.isLength=gh,Q.isMap=Tg,Q.isMatch=dR,Q.isMatchWith=vR,Q.isNaN=cR,Q.isNative=pR,Q.isNil=mR,Q.isNull=gR,Q.isNumber=Cg,Q.isObject=ue,Q.isObjectLike=fe,Q.isPlainObject=ha,Q.isRegExp=gf,Q.isSafeInteger=xR,Q.isSet=Sg,Q.isString=mh,Q.isSymbol=mi,Q.isTypedArray=rr,Q.isUndefined=yR,Q.isWeakMap=TR,Q.isWeakSet=CR,Q.join=PM,Q.kebabCase=uO,Q.last=Ii,Q.lastIndexOf=MM,Q.lowerCase=fO,Q.lowerFirst=dO,Q.lt=SR,Q.lte=ER,Q.max=a2,Q.maxBy=o2,Q.mean=h2,Q.meanBy=l2,Q.min=u2,Q.minBy=f2,Q.stubArray=Pf,Q.stubFalse=Mf,Q.stubObject=kO,Q.stubString=jO,Q.stubTrue=qO,Q.multiply=d2,Q.nth=AM,Q.noConflict=WO,Q.noop=Ef,Q.now=vh,Q.pad=vO,Q.padEnd=cO,Q.padStart=pO,Q.parseInt=gO,Q.random=rO,Q.reduce=LA,Q.reduceRight=FA,Q.repeat=mO,Q.replace=xO,Q.result=QR,Q.round=v2,Q.runInContext=et,Q.sample=wA,Q.size=GA,Q.snakeCase=yO,Q.some=NA,Q.sortedIndex=DM,Q.sortedIndexBy=BM,Q.sortedIndexOf=GM,Q.sortedLastIndex=NM,Q.sortedLastIndexBy=bM,Q.sortedLastIndexOf=zM,Q.startCase=CO,Q.startsWith=SO,Q.subtract=c2,Q.sum=p2,Q.sumBy=g2,Q.template=EO,Q.times=_O,Q.toFinite=Dn,Q.toInteger=Bt,Q.toLength=Pg,Q.toLower=PO,Q.toNumber=wi,Q.toSafeInteger=PR,Q.toString=Qt,Q.toUpper=MO,Q.trim=AO,Q.trimEnd=RO,Q.trimStart=OO,Q.truncate=LO,Q.unescape=FO,Q.uniqueId=e2,Q.upperCase=IO,Q.upperFirst=yf,Q.each=ug,Q.eachRight=fg,Q.first=ag,Sf(Q,function(){var P={};return an(Q,function(A,I){jt.call(Q.prototype,I)||(P[I]=A)}),P}(),{chain:!1}),Q.VERSION=d,Ai(["bind","bindKey","curry","curryRight","partial","partialRight"],function(P){Q[P].placeholder=Q}),Ai(["drop","take"],function(P,A){zt.prototype[P]=function(I){I=I===e?1:me(Bt(I),0);var Y=this.__filtered__&&!A?new zt(this):this.clone();return Y.__filtered__?Y.__takeCount__=Ne(I,Y.__takeCount__):Y.__views__.push({size:Ne(I,w),type:P+(Y.__dir__<0?"Right":"")}),Y},zt.prototype[P+"Right"]=function(I){return this.reverse()[P](I).reverse()}}),Ai(["filter","map","takeWhile"],function(P,A){var I=A+1,Y=I==B||I==V;zt.prototype[P]=function($){var k=this.clone();return k.__iteratees__.push({iteratee:Rt($,3),type:I}),k.__filtered__=k.__filtered__||Y,k}}),Ai(["head","last"],function(P,A){var I="take"+(A?"Right":"");zt.prototype[P]=function(){return this[I](1).value()[0]}}),Ai(["initial","tail"],function(P,A){var I="drop"+(A?"":"Right");zt.prototype[P]=function(){return this.__filtered__?new zt(this):this[I](1)}}),zt.prototype.compact=function(){return this.filter(qe)},zt.prototype.find=function(P){return this.filter(P).head()},zt.prototype.findLast=function(P){return this.reverse().find(P)},zt.prototype.invokeMap=Nt(function(P,A){return typeof P=="function"?new zt(this):this.map(function(I){return ia(I,P,A)})}),zt.prototype.reject=function(P){return this.filter(ph(Rt(P)))},zt.prototype.slice=function(P,A){P=Bt(P);var I=this;return I.__filtered__&&(P>0||A<0)?new zt(I):(P<0?I=I.takeRight(-P):P&&(I=I.drop(P)),A!==e&&(A=Bt(A),I=A<0?I.dropRight(-A):I.take(A-P)),I)},zt.prototype.takeRightWhile=function(P){return this.reverse().takeWhile(P).reverse()},zt.prototype.toArray=function(){return this.take(w)},an(zt.prototype,function(P,A){var I=/^(?:filter|find|map|reject)|While$/.test(A),Y=/^(?:head|last)$/.test(A),$=Q[Y?"take"+(A=="last"?"Right":""):A],k=Y||/^find/.test(A);!$||(Q.prototype[A]=function(){var j=this.__wrapped__,tt=Y?[1]:arguments,it=j instanceof zt,ht=tt[0],lt=it||Dt(j),ft=function(bt){var Wt=$.apply(Q,Hn([bt],tt));return Y&&pt?Wt[0]:Wt};lt&&I&&typeof ht=="function"&&ht.length!=1&&(it=lt=!1);var pt=this.__chain__,Et=!!this.__actions__.length,Ot=k&&!pt,Gt=it&&!Et;if(!k&&lt){j=Gt?j:new zt(this);var Lt=P.apply(j,tt);return Lt.__actions__.push({func:fh,args:[ft],thisArg:e}),new Oi(Lt,pt)}return Ot&&Gt?P.apply(this,tt):(Lt=this.thru(ft),Ot?Y?Lt.value()[0]:Lt.value():Lt)})}),Ai(["pop","push","shift","sort","splice","unshift"],function(P){var A=bo[P],I=/^(?:push|sort|unshift)$/.test(P)?"tap":"thru",Y=/^(?:pop|shift)$/.test(P);Q.prototype[P]=function(){var $=arguments;if(Y&&!this.__chain__){var k=this.value();return A.apply(Dt(k)?k:[],$)}return this[I](function(j){return A.apply(Dt(j)?j:[],$)})}}),an(zt.prototype,function(P,A){var I=Q[A];if(I){var Y=I.name+"";jt.call(tr,Y)||(tr[Y]=[]),tr[Y].push({name:A,func:I})}}),tr[sh(e,m).name]=[{name:"wrapper",func:e}],zt.prototype.clone=FE,zt.prototype.reverse=IE,zt.prototype.value=wE,Q.prototype.at=oA,Q.prototype.chain=hA,Q.prototype.commit=lA,Q.prototype.next=uA,Q.prototype.plant=dA,Q.prototype.reverse=vA,Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=cA,Q.prototype.first=Q.prototype.head,Qr&&(Q.prototype[Qr]=fA),Q},js=lE();ys?((ys.exports=js)._=js,Tu._=js):Le._=js}).call(qn)}),NC=uH.isEqual;var fH=5125166,dH=8085079,vH=2493956,ac=class extends Phaser.Scene{constructor(){super({key:"result",active:!1})}async create(){let i=new Zi(this,0,0,20,10,10,vH);this.add.existing(i);let e=new Zi(this,0,0,0,0,13,dH);this.add.existing(e),this.panel=new Hs(this,{x:400,y:780,width:780,scrollMode:1,panel:{child:this.createScrollPanel()},slider:{track:i,thumb:e}}).setOrigin(.5,1).layout(),this.add.existing(this.panel),this.waitingText=this.add.bitmapText(this.cameras.main.centerX,40,"gothic","Waiting for results",30).setTintFill(0).setOrigin(.5).setDepth(2);let d=0,t=await tc(xs??"");this.session=await t.json(),this.session?.done?this.waitingText.setText("Results!"):(this.resultRefreshTimer=this.time.addEvent({delay:3*1e3,callback:this.checkForUpdatedSession,callbackScope:this,loop:!0,startAt:2.5*1e3}),this.waitTextTimer=this.time.addEvent({delay:1*1e3,callback:()=>{d=(d+1)%4,this.waitingText.setText(`Waiting for results${".".repeat(d)}`)},loop:!0,callbackScope:this})),this.displayScores()}createScoreCard(i){let e=new Zi(this,0,0,300,600,15,fH);return this.add.existing(e),new nn(this,{orientation:"y",width:e.displayWidth,height:e.displayHeight,space:{top:10,bottom:10,left:10,right:10},background:e,text:this.add.bitmapText(0,0,"gothic",i).setFontSize(21),align:"top"})}createScrollPanel(){let i=new ne(this,{orientation:"x",space:{item:50,top:20,bottom:20}});return this.add.existing(i),i}async checkForUpdatedSession(){let e=await(await tc(xs??"")).json();if(!this.session){console.error("Session not initialized yet!");return}NC(e.scoredUsers,this.session.scoredUsers)||this.scene.restart()}displayScores(){if(!this.session){console.error("Session not initialized yet!");return}for(let i of Object.values(this.session.scoredUsers)){let e=[],d=i.score?i.score.toString():"waiting...";e.push(i.name+" - "+d,"--------"),e=e.concat(i.words.map(t=>t+" - "+fu(t))),this.panel.getElement("panel").add(this.createScoreCard(e)),this.panel.layout()}}},bC=ac;var Mn=!0,nc=16711680,Fo=65280,oc=new URLSearchParams(window.location.search),xs=oc.get("session"),ec=oc.get("user"),cH=oc.get("spectate"),sc=JSON.parse(cH),pH={type:Os.AUTO,scale:{mode:Os.Scale.FIT,autoCenter:Os.Scale.CENTER_BOTH,autoRound:!0,width:800,height:800},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:[FC,BC,GC,bC],backgroundColor:"0xffffff",plugins:{scene:[{key:"rexUI",plugin:LC,mapping:"rexUI"}]}},gH=new Os.Game(pH);export{nc as BAD_COLOR,Mn as DEBUG,Fo as GOOD_COLOR,sc as IS_SPECTATE,xs as SESSION_ID,ec as USER_ID,gH as default};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/
