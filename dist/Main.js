var ns=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function m0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Xh(s,t,i){return i={path:t,exports:{},require:function(d,e){return xL(d,e==null?i.path:e)}},s(i,i.exports),i.exports}function xL(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var yL=Xh(function(s,t){(function(d,e){s.exports=e()})(ns,function(){return function(i){var d={};function e(n){if(d[n])return d[n].exports;var h=d[n]={i:n,l:!1,exports:{}};return i[n].call(h.exports,h,h.exports,e),h.l=!0,h.exports}return e.m=i,e.c=d,e.d=function(n,h,r){e.o(n,h)||Object.defineProperty(n,h,{enumerable:!0,get:r})},e.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,h){if(h&1&&(n=e(n)),h&8||h&4&&typeof n=="object"&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),h&2&&typeof n!="string")for(var o in n)e.d(r,o,function(l){return n[l]}.bind(null,o));return r},e.n=function(n){var h=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(h,"a",h),h},e.o=function(n,h){return Object.prototype.hasOwnProperty.call(n,h)},e.p="",e(e.s=1528)}([function(i,d){function e(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}function n(a,u,c){var f=c?a[u]:Object.getOwnPropertyDescriptor(a,u);return!c&&f.value&&typeof f.value=="object"&&(f=f.value),f&&e(f)?(typeof f.enumerable=="undefined"&&(f.enumerable=!0),typeof f.configurable=="undefined"&&(f.configurable=!0),f):!1}function h(a,u){var c=Object.getOwnPropertyDescriptor(a,u);return c?(c.value&&typeof c.value=="object"&&(c=c.value),c.configurable===!1):!1}function r(a,u,c,f){for(var v in u)if(!!u.hasOwnProperty(v)){var p=n(u,v,c);if(p!==!1){var g=f||a;if(h(g.prototype,v)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+v+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(a.prototype,v,p)}else a.prototype[v]=u[v]}}function o(a,u){if(!!u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++)r(a,u[c].prototype||u[c])}}function l(a){a||(a={});var u,c;if(a.initialize){if(typeof a.initialize!="function")throw new Error("initialize must be a function");u=a.initialize,delete a.initialize}else if(a.Extends){var f=a.Extends;u=function(){f.apply(this,arguments)}}else u=function(){};a.Extends?(u.prototype=Object.create(a.Extends.prototype),u.prototype.constructor=u,c=a.Extends,delete a.Extends):u.prototype.constructor=u;var v=null;return a.Mixins&&(v=a.Mixins,delete a.Mixins),o(u,v),r(u,a,!0,c),u}l.extend=r,l.mixin=o,l.ignoreFinals=!1,i.exports=l},function(i,d){var e=function(){};i.exports=e},function(i,d){var e=function(n,h,r){var o=typeof n;return!n||o==="number"||o==="string"?r:n.hasOwnProperty(h)&&n[h]!==void 0?n[h]:r};i.exports=e},function(i,d,e){var n=e(0),h=e(124),r=new n({initialize:function(l,a){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(a===void 0&&(a=l),this.x=l||0,this.y=a||0)},clone:function(){return new r(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,l){return l===void 0&&(l=o),this.x=o,this.y=l,this},setTo:function(o,l){return this.set(o,l)},setToPolar:function(o,l){return l==null&&(l=1),this.x=Math.cos(o)*l,this.y=Math.sin(o)*l,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,l){return h(this.x,o.x,l)&&h(this.y,o.y,l)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var l=o.x-this.x,a=o.y-this.y;return Math.sqrt(l*l+a*a)},distanceSq:function(o){var l=o.x-this.x,a=o.y-this.y;return l*l+a*a},length:function(){var o=this.x,l=this.y;return Math.sqrt(o*o+l*l)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,l=this.y;return o*o+l*l},normalize:function(){var o=this.x,l=this.y,a=o*o+l*l;return a>0&&(a=1/Math.sqrt(a),this.x=o*a,this.y=l*a),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,l){l===void 0&&(l=0);var a=this.x,u=this.y;return this.x=a+l*(o.x-a),this.y=u+l*(o.y-u),this},transformMat3:function(o){var l=this.x,a=this.y,u=o.val;return this.x=u[0]*l+u[3]*a+u[6],this.y=u[1]*l+u[4]*a+u[7],this},transformMat4:function(o){var l=this.x,a=this.y,u=o.val;return this.x=u[0]*l+u[4]*a+u[12],this.y=u[1]*l+u[5]*a+u[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var l=this.length();return l&&l>o&&this.scale(o/l),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var l=Math.cos(o),a=Math.sin(o);return this.set(l*this.x-a*this.y,a*this.x+l*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),i.exports=r},function(i,d,e){var n=e(0),h=e(56),r=new n({initialize:function(l,a){l===void 0&&(l=0),a===void 0&&(a=l),this.type=h.POINT,this.x=l,this.y=a},setTo:function(o,l){return o===void 0&&(o=0),l===void 0&&(l=o),this.x=o,this.y=l,this}});i.exports=r},function(i,d,e){var n=e(0),h=e(24),r=e(20),o=new n({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(l,a){o.prototype.hasOwnProperty(l)||(o.prototype[l]=a)},o.remove=function(l){o.prototype.hasOwnProperty(l)&&delete o.prototype[l]},h.register("GameObjectFactory",o,"add"),i.exports=o},function(i,d){var e=function(n,h,r){if(!n||typeof n=="number")return r;if(n.hasOwnProperty(h))return n[h];if(h.indexOf(".")!==-1){for(var o=h.split("."),l=n,a=r,u=0;u<o.length;u++)if(l.hasOwnProperty(o[u]))a=l[o[u]],l=l[o[u]];else{a=r;break}return a}else return r};i.exports=e},function(i,d){var e=function(n){if(typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(h){return!1}return!0};i.exports=e},function(i,d){var e={},n={install:function(h){for(var r in e)h[r]=e[r]},register:function(h,r){e[h]=r},destroy:function(){e={}}};i.exports=n},function(i,d,e){var n=Object.prototype.hasOwnProperty,h="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(h=!1));function o(c,f,v){this.fn=c,this.context=f,this.once=v||!1}function l(c,f,v,p,g){if(typeof v!="function")throw new TypeError("The listener must be a function");var m=new o(v,p||c,g),x=h?h+f:f;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function a(c,f){--c._eventsCount==0?c._events=new r:delete c._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],v,p;if(this._eventsCount===0)return f;for(p in v=this._events)n.call(v,p)&&f.push(h?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(v)):f},u.prototype.listeners=function(f){var v=h?h+f:f,p=this._events[v];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},u.prototype.listenerCount=function(f){var v=h?h+f:f,p=this._events[v];return p?p.fn?1:p.length:0},u.prototype.emit=function(f,v,p,g,m,x){var y=h?h+f:f;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(f,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,v),!0;case 3:return T.fn.call(T.context,v,p),!0;case 4:return T.fn.call(T.context,v,p,g),!0;case 5:return T.fn.call(T.context,v,p,g,m),!0;case 6:return T.fn.call(T.context,v,p,g,m,x),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var M=T.length,R;for(E=0;E<M;E++)switch(T[E].once&&this.removeListener(f,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,v);break;case 3:T[E].fn.call(T[E].context,v,p);break;case 4:T[E].fn.call(T[E].context,v,p,g);break;default:if(!S)for(R=1,S=new Array(C-1);R<C;R++)S[R-1]=arguments[R];T[E].fn.apply(T[E].context,S)}}return!0},u.prototype.on=function(f,v,p){return l(this,f,v,p,!1)},u.prototype.once=function(f,v,p){return l(this,f,v,p,!0)},u.prototype.removeListener=function(f,v,p,g){var m=h?h+f:f;if(!this._events[m])return this;if(!v)return a(this,m),this;var x=this._events[m];if(x.fn)x.fn===v&&(!g||x.once)&&(!p||x.context===p)&&a(this,m);else{for(var y=0,T=[],C=x.length;y<C;y++)(x[y].fn!==v||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:a(this,m)}return this},u.prototype.removeAllListeners=function(f){var v;return f?(v=h?h+f:f,this._events[v]&&a(this,v)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=h,u.EventEmitter=u,i.exports=u},function(i,d,e){var n=e(0),h=e(57),r=e(171),o=e(306),l=e(56),a=e(47),u=e(174),c=new n({initialize:function(v,p,g,m){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=l.RECTANGLE,this.x=v,this.y=p,this.width=g,this.height=m},contains:function(f,v){return h(this,f,v)},getPoint:function(f,v){return r(this,f,v)},getPoints:function(f,v,p){return o(this,f,v,p)},getRandomPoint:function(f){return u(this,f)},setTo:function(f,v,p,g){return this.x=f,this.y=v,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(f,v){return v===void 0&&(v=f),this.x=f,this.y=v,this},setSize:function(f,v){return v===void 0&&(v=f),this.width=f,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(f){return f===void 0&&(f=new a),f.setTo(this.x,this.y,this.right,this.y),f},getLineB:function(f){return f===void 0&&(f=new a),f.setTo(this.right,this.y,this.right,this.bottom),f},getLineC:function(f){return f===void 0&&(f=new a),f.setTo(this.right,this.bottom,this.x,this.bottom),f},getLineD:function(f){return f===void 0&&(f=new a),f.setTo(this.x,this.bottom,this.x,this.y),f},left:{get:function(){return this.x},set:function(f){f>=this.right?this.width=0:this.width=this.right-f,this.x=f}},right:{get:function(){return this.x+this.width},set:function(f){f<=this.x?this.width=0:this.width=f-this.x}},top:{get:function(){return this.y},set:function(f){f>=this.bottom?this.height=0:this.height=this.bottom-f,this.y=f}},bottom:{get:function(){return this.y+this.height},set:function(f){f<=this.y?this.height=0:this.height=f-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});i.exports=c},function(i,d,e){i.exports={Alpha:e(607),AlphaSingle:e(303),BlendMode:e(304),ComputedSize:e(608),Crop:e(609),Depth:e(305),Flip:e(610),GetBounds:e(611),Mask:e(309),Origin:e(632),PathFollower:e(633),Pipeline:e(167),ScrollFactor:e(312),Size:e(634),Texture:e(635),TextureCrop:e(636),Tint:e(637),ToJSON:e(176),Transform:e(313),TransformMatrix:e(25),Visible:e(314)}},function(i,d){function e(n){for(var h="",r=0;r<n;++r)r>0&&(h+=`
else `),r<n-1&&(h+="if(test == "+r+".0){}");return h}i.exports={getTintFromFloats:function(n,h,r,o){var l=(n*255|0)&255,a=(h*255|0)&255,u=(r*255|0)&255,c=(o*255|0)&255;return(c<<24|l<<16|a<<8|u)>>>0},getTintAppendFloatAlpha:function(n,h){var r=(h*255|0)&255;return(r<<24|n)>>>0},getTintAppendFloatAlphaAndSwap:function(n,h){var r=(n>>16|0)&255,o=(n>>8|0)&255,l=(n|0)&255,a=(h*255|0)&255;return(a<<24|l<<16|o<<8|r)>>>0},getFloatsFromUintRGB:function(n){var h=(n>>16|0)&255,r=(n>>8|0)&255,o=(n|0)&255;return[h/255,r/255,o/255]},checkShaderMax:function(n,h){(!h||h===-1)&&(h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));for(var r=n.createShader(n.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var l=o.replace(/%forloop%/gi,e(h));if(n.shaderSource(r,l),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))h=h/2|0;else break}return h},parseFragmentShaderMaxTextures:function(n,h){if(!n)return"";for(var r="",o=0;o<h;o++)o>0&&(r+=`
	else `),o<h-1&&(r+="if (outTexId < "+o+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",r+=`
	}`;return n=n.replace(/%count%/gi,h.toString()),n.replace(/%forloop%/gi,r)}}},function(i,d,e){var n=e(193),h=e(6),r=function(o,l,a){var u=h(o,l,null);if(u===null)return a;if(Array.isArray(u))return n.RND.pick(u);if(typeof u=="object"){if(u.hasOwnProperty("randInt"))return n.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return n.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if(typeof u=="function")return u(l);return u};i.exports=r},function(i,d){var e={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};i.exports=e},function(i,d,e){var n=e(0),h=e(176),r=e(101),o=e(9),l=e(75),a=e(20),u=new n({Extends:o,initialize:function(f,v){o.call(this),this.scene=f,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),f.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(c,f){return this.data||(this.data=new r(this)),this.data.set(c,f),this},incData:function(c,f){return this.data||(this.data=new r(this)),this.data.inc(c,f),this},toggleData:function(c){return this.data||(this.data=new r(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new r(this)),this.data.get(c)},setInteractive:function(c,f,v){return this.scene.sys.input.enable(this,c,f,v),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(c){return!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,f=this.parentContainer,v=[];f&&(v.unshift(f.getIndex(c)),c=f,f.parentContainer);)f=f.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(c)):v.unshift(this.scene.sys.displayList.getIndex(c)),v},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),c.events.emit(a.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(a.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});u.RENDER_MASK=15,i.exports=u},function(i,d,e){var n=e(0),h=e(24),r=e(20),o=new n({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(l,a){o.prototype.hasOwnProperty(l)||(o.prototype[l]=a)},o.remove=function(l){o.prototype.hasOwnProperty(l)&&delete o.prototype[l]},h.register("GameObjectCreator",o,"make"),i.exports=o},function(i,d,e){var n=e(7),h=function(){var r,o,l,a,u,c,f=arguments[0]||{},v=1,p=arguments.length,g=!1;for(typeof f=="boolean"&&(g=f,f=arguments[1]||{},v=2),p===v&&(f=this,--v);v<p;v++)if((r=arguments[v])!=null)for(o in r)l=f[o],a=r[o],f!==a&&(g&&a&&(n(a)||(u=Array.isArray(a)))?(u?(u=!1,c=l&&Array.isArray(l)?l:[]):c=l&&n(l)?l:{},f[o]=h(g,c,a)):a!==void 0&&(f[o]=a));return f};i.exports=h},function(i,d){var e=function(n,h,r){return Math.max(h,Math.min(r,n))};i.exports=e},function(i,d,e){var n=e(25),h=new n,r=new n,o=new n,l={camera:h,sprite:r,calc:o},a=function(u,c,f){var v=h,p=r,g=o;return p.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),v.copyFrom(c.matrix),f?(v.multiplyWithOffset(f,-c.scrollX*u.scrollFactorX,-c.scrollY*u.scrollFactorY),p.e=u.x,p.f=u.y):(p.e-=c.scrollX*u.scrollFactorX,p.f-=c.scrollY*u.scrollFactorY),v.multiply(p,g),l};i.exports=a},function(i,d,e){i.exports={ADDED_TO_SCENE:e(656),BOOT:e(657),CREATE:e(658),DESTROY:e(659),PAUSE:e(660),POST_UPDATE:e(661),PRE_RENDER:e(662),PRE_UPDATE:e(663),READY:e(664),REMOVED_FROM_SCENE:e(665),RENDER:e(666),RESUME:e(667),SHUTDOWN:e(668),SLEEP:e(669),START:e(670),TRANSITION_COMPLETE:e(671),TRANSITION_INIT:e(672),TRANSITION_OUT:e(673),TRANSITION_START:e(674),TRANSITION_WAKE:e(675),UPDATE:e(676),WAKE:e(677)}},function(i,d){var e={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};i.exports=e},function(i,d,e){i.exports={BLUR:e(612),BOOT:e(613),CONTEXT_LOST:e(614),CONTEXT_RESTORED:e(615),DESTROY:e(616),FOCUS:e(617),HIDDEN:e(618),PAUSE:e(619),POST_RENDER:e(620),POST_STEP:e(621),PRE_RENDER:e(622),PRE_STEP:e(623),READY:e(624),RESUME:e(625),STEP:e(626),VISIBLE:e(627)}},function(i,d,e){var n=e(0),h=e(21),r=e(95),o=e(2),l=e(155),a=e(240),u=e(517),c=e(156),f=new n({initialize:function(p,g){this.loader=p,this.cache=o(g,"cache",!1),this.type=o(g,"type",!1),this.key=o(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=o(g,"url");x===void 0?x=p.path+m+"."+o(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=c(o(g,"responseType",void 0)),o(g,"xhrSettings",!1)&&(this.xhrSettings=a(this.xhrSettings,o(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?h.FILE_POPULATED:h.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(g,"config",{}),this.multiFile,this.linkFile},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===h.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=u(this,this.loader.xhr))},onLoad:function(v,p){var g=v.responseURL&&(v.responseURL.indexOf("file://")===0||v.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;v.readyState===4&&v.status>=400&&v.status<=599&&(x=!1),this.state=h.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=h.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=h.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=h.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(v){v===void 0&&(v=this.data);var p=this.key,g=this.type;this.loader.emit(r.FILE_COMPLETE,p,g,v),this.loader.emit(r.FILE_KEY_COMPLETE+g+"-"+p,p,g,v),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});f.createObjectURL=function(v,p,g){if(typeof URL=="function")v.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=v.onerror,m.readAsDataURL(p)}},f.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},i.exports=f},function(i,d){var e={},n={},h={};h.register=function(r,o,l,a){a===void 0&&(a=!1),e[r]={plugin:o,mapping:l,custom:a}},h.registerCustom=function(r,o,l,a){n[r]={plugin:o,mapping:l,data:a}},h.hasCore=function(r){return e.hasOwnProperty(r)},h.hasCustom=function(r){return n.hasOwnProperty(r)},h.getCore=function(r){return e[r]},h.getCustom=function(r){return n[r]},h.getCustomClass=function(r){return n.hasOwnProperty(r)?n[r].plugin:null},h.remove=function(r){e.hasOwnProperty(r)&&delete e[r]},h.removeCustom=function(r){n.hasOwnProperty(r)&&delete n[r]},h.destroyCorePlugins=function(){for(var r in e)e.hasOwnProperty(r)&&delete e[r]},h.destroyCustomPlugins=function(){for(var r in n)n.hasOwnProperty(r)&&delete n[r]},i.exports=h},function(i,d,e){var n=e(0),h=e(14),r=e(3),o=new n({initialize:function(a,u,c,f,v,p){a===void 0&&(a=1),u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f=1),v===void 0&&(v=0),p===void 0&&(p=0),this.matrix=new Float32Array([a,u,c,f,v,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,a=l[0],u=l[1],c=l[2],f=l[3];return a||u?u>0?Math.acos(a/this.scaleX):-Math.acos(a/this.scaleX):c||f?h.TAU-(f>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,a){var u=this.matrix;return u[4]=u[0]*l+u[2]*a+u[4],u[5]=u[1]*l+u[3]*a+u[5],this},scale:function(l,a){var u=this.matrix;return u[0]*=l,u[1]*=l,u[2]*=a,u[3]*=a,this},rotate:function(l){var a=Math.sin(l),u=Math.cos(l),c=this.matrix,f=c[0],v=c[1],p=c[2],g=c[3];return c[0]=f*u+p*a,c[1]=v*u+g*a,c[2]=f*-a+p*u,c[3]=v*-a+g*u,this},multiply:function(l,a){var u=this.matrix,c=l.matrix,f=u[0],v=u[1],p=u[2],g=u[3],m=u[4],x=u[5],y=c[0],T=c[1],C=c[2],S=c[3],E=c[4],M=c[5],R=a===void 0?this:a;return R.a=y*f+T*p,R.b=y*v+T*g,R.c=C*f+S*p,R.d=C*v+S*g,R.e=E*f+M*p+m,R.f=E*v+M*g+x,R},multiplyWithOffset:function(l,a,u){var c=this.matrix,f=l.matrix,v=c[0],p=c[1],g=c[2],m=c[3],x=c[4],y=c[5],T=a*v+u*g+x,C=a*p+u*m+y,S=f[0],E=f[1],M=f[2],R=f[3],L=f[4],O=f[5];return c[0]=S*v+E*g,c[1]=S*p+E*m,c[2]=M*v+R*g,c[3]=M*p+R*m,c[4]=L*v+O*g+T,c[5]=L*p+O*m+C,this},transform:function(l,a,u,c,f,v){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5];return p[0]=l*g+a*x,p[1]=l*m+a*y,p[2]=u*g+c*x,p[3]=u*m+c*y,p[4]=f*g+v*x+T,p[5]=f*m+v*y+C,this},transformPoint:function(l,a,u){u===void 0&&(u={x:0,y:0});var c=this.matrix,f=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5];return u.x=l*f+a*p+m,u.y=l*v+a*g+x,u},invert:function(){var l=this.matrix,a=l[0],u=l[1],c=l[2],f=l[3],v=l[4],p=l[5],g=a*f-u*c;return l[0]=f/g,l[1]=-u/g,l[2]=-c/g,l[3]=a/g,l[4]=(c*p-f*v)/g,l[5]=-(a*p-u*v)/g,this},copyFrom:function(l){var a=this.matrix;return a[0]=l.a,a[1]=l.b,a[2]=l.c,a[3]=l.d,a[4]=l.e,a[5]=l.f,this},copyFromArray:function(l){var a=this.matrix;return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],this},copyToContext:function(l){var a=this.matrix;return l.transform(a[0],a[1],a[2],a[3],a[4],a[5]),l},setToContext:function(l){var a=this.matrix;return l.setTransform(a[0],a[1],a[2],a[3],a[4],a[5]),l},copyToArray:function(l){var a=this.matrix;return l===void 0?l=[a[0],a[1],a[2],a[3],a[4],a[5]]:(l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5]),l},setTransform:function(l,a,u,c,f,v){var p=this.matrix;return p[0]=l,p[1]=a,p[2]=u,p[3]=c,p[4]=f,p[5]=v,this},decomposeMatrix:function(){var l=this.decomposedMatrix,a=this.matrix,u=a[0],c=a[1],f=a[2],v=a[3],p=u*v-c*f;if(l.translateX=a[4],l.translateY=a[5],u||c){var g=Math.sqrt(u*u+c*c);l.rotation=c>0?Math.acos(u/g):-Math.acos(u/g),l.scaleX=g,l.scaleY=p/g}else if(f||v){var m=Math.sqrt(f*f+v*v);l.rotation=Math.PI*.5-(v>0?Math.acos(-f/m):-Math.acos(f/m)),l.scaleX=p/m,l.scaleY=m}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,a,u,c,f){var v=this.matrix,p=Math.sin(u),g=Math.cos(u);return v[4]=l,v[5]=a,v[0]=g*c,v[1]=p*c,v[2]=-p*f,v[3]=g*f,this},applyInverse:function(l,a,u){u===void 0&&(u=new r);var c=this.matrix,f=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5],y=1/(f*g+p*-v);return u.x=g*y*l+-p*y*a+(x*p-m*g)*y,u.y=f*y*a+-v*y*l+(-x*f+m*v)*y,u},getX:function(l,a){return l*this.a+a*this.c+this.e},getY:function(l,a){return l*this.b+a*this.d+this.f},getXRound:function(l,a,u){var c=this.getX(l,a);return u&&(c=Math.round(c)),c},getYRound:function(l,a,u){var c=this.getY(l,a);return u&&(c=Math.round(c)),c},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});i.exports=o},function(i,d,e){var n=e(2),h=function(r,o,l,a,u,c){r===void 0&&(r=0),o===void 0&&(o=0),l===void 0&&(l=c.width),a===void 0&&(a=c.height),u||(u={});var f=n(u,"isNotEmpty",!1),v=n(u,"isColliding",!1),p=n(u,"hasInterestingFace",!1);r<0&&(l+=r,r=0),o<0&&(a+=o,o=0),r+l>c.width&&(l=Math.max(c.width-r,0)),o+a>c.height&&(a=Math.max(c.height-o,0));for(var g=[],m=o;m<o+a;m++)for(var x=r;x<r+l;x++){var y=c.data[m][x];if(y!==null){if(f&&y.index===-1||v&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};i.exports=h},function(i,d){var e=function(n,h,r,o,l,a){o===void 0&&(o=0),l===void 0&&(l=0),a===void 0&&(a=1);var u,c=0,f=n.length;if(a===1)for(u=l;u<f;u++)n[u][h]=r+c*o,c++;else for(u=l;u>=0;u--)n[u][h]=r+c*o,c++;return n};i.exports=e},function(i,d,e){var n=e(35),h=e(13),r=function(o,l,a){l.x=h(a,"x",0),l.y=h(a,"y",0),l.depth=h(a,"depth",0),l.flipX=h(a,"flipX",!1),l.flipY=h(a,"flipY",!1);var u=h(a,"scale",null);typeof u=="number"?l.setScale(u):u!==null&&(l.scaleX=h(u,"x",1),l.scaleY=h(u,"y",1));var c=h(a,"scrollFactor",null);typeof c=="number"?l.setScrollFactor(c):c!==null&&(l.scrollFactorX=h(c,"x",1),l.scrollFactorY=h(c,"y",1)),l.rotation=h(a,"rotation",0);var f=h(a,"angle",null);f!==null&&(l.angle=f),l.alpha=h(a,"alpha",1);var v=h(a,"origin",null);if(typeof v=="number")l.setOrigin(v);else if(v!==null){var p=h(v,"x",.5),g=h(v,"y",.5);l.setOrigin(p,g)}l.blendMode=h(a,"blendMode",n.NORMAL),l.visible=h(a,"visible",!0);var m=h(a,"add",!0);return m&&o.sys.displayList.add(l),l.preUpdate&&o.sys.updateList.add(l),l};i.exports=r},function(i,d){i.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(i,d,e){var n=e(19),h=function(r,o,l,a,u){var c=a.alpha*l.alpha;if(c<=0)return!1;var f=n(l,a,u).calc;return o.globalCompositeOperation=r.blendModes[l.blendMode],o.globalAlpha=c,o.save(),f.setToContext(o),o.imageSmoothingEnabled=!(!r.antialias||l.frame&&l.frame.source.scaleMode),!0};i.exports=h},function(i,d,e){var n=e(33),h=e(192),r=[],o=!1,l=function(){var a=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=n.CANVAS),E===void 0&&(E=!1);var M,R=f(S);return R===null?(R={parent:y,canvas:document.createElement("canvas"),type:S},S===n.CANVAS&&r.push(R),M=R.canvas):(R.parent=y,M=R.canvas),E&&(R.parent=M),M.width=T,M.height=C,o&&S===n.CANVAS&&h.disable(M.getContext("2d")),M},u=function(y,T,C){return a(y,T,C,n.CANVAS)},c=function(y,T,C){return a(y,T,C,n.WEBGL)},f=function(y){if(y===void 0&&(y=n.CANVAS),y===n.WEBGL)return null;for(var T=0;T<r.length;T++){var C=r[T];if(!C.parent&&C.type===y)return C}return null},v=function(y){var T=y instanceof HTMLCanvasElement;r.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},p=function(){var y=0;return r.forEach(function(T){T.parent&&y++}),y},g=function(){return r.length-p()},m=function(){o=!0},x=function(){o=!1};return{create2D:u,create:a,createWebGL:c,disableSmoothing:m,enableSmoothing:x,first:f,free:g,pool:r,remove:v,total:p}};i.exports=l()},function(i,d){var e={};i.exports=e,function(){e._nextId=0,e._seed=0,e._nowStartTime=+new Date,e.extend=function(h,r){var o,l;typeof r=="boolean"?(o=2,l=r):(o=1,l=!0);for(var a=o;a<arguments.length;a++){var u=arguments[a];if(u)for(var c in u)l&&u[c]&&u[c].constructor===Object&&(!h[c]||h[c].constructor===Object)?(h[c]=h[c]||{},e.extend(h[c],l,u[c])):h[c]=u[c]}return h},e.clone=function(h,r){return e.extend({},r,h)},e.keys=function(h){if(Object.keys)return Object.keys(h);var r=[];for(var o in h)r.push(o);return r},e.values=function(h){var r=[];if(Object.keys){for(var o=Object.keys(h),l=0;l<o.length;l++)r.push(h[o[l]]);return r}for(var a in h)r.push(h[a]);return r},e.get=function(h,r,o,l){r=r.split(".").slice(o,l);for(var a=0;a<r.length;a+=1)h=h[r[a]];return h},e.set=function(h,r,o,l,a){var u=r.split(".").slice(l,a);return e.get(h,r,0,-1)[u[u.length-1]]=o,o},e.shuffle=function(h){for(var r=h.length-1;r>0;r--){var o=Math.floor(e.random()*(r+1)),l=h[r];h[r]=h[o],h[o]=l}return h},e.choose=function(h){return h[Math.floor(e.random()*h.length)]},e.isElement=function(h){return typeof HTMLElement!="undefined"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},e.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},e.isFunction=function(h){return typeof h=="function"},e.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},e.isString=function(h){return Object.prototype.toString.call(h)==="[object String]"},e.clamp=function(h,r,o){return h<r?r:h>o?o:h},e.sign=function(h){return h<0?-1:1},e.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-e._nowStartTime},e.random=function(h,r){return h=typeof h!="undefined"?h:0,r=typeof r!="undefined"?r:1,h+n()*(r-h)};var n=function(){return e._seed=(e._seed*9301+49297)%233280,e._seed/233280};e.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},e.logLevel=1,e.log=function(){console&&e.logLevel>0&&e.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.info=function(){console&&e.logLevel>0&&e.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.warn=function(){console&&e.logLevel>0&&e.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e.nextId=function(){return e._nextId++},e.indexOf=function(h,r){if(h.indexOf)return h.indexOf(r);for(var o=0;o<h.length;o++)if(h[o]===r)return o;return-1},e.map=function(h,r){if(h.map)return h.map(r);for(var o=[],l=0;l<h.length;l+=1)o.push(r(h[l]));return o},e.topologicalSort=function(h){var r=[],o=[],l=[];for(var a in h)!o[a]&&!l[a]&&e._topologicalSort(a,o,l,h,r);return r},e._topologicalSort=function(h,r,o,l,a){var u=l[h]||[];o[h]=!0;for(var c=0;c<u.length;c+=1){var f=u[c];o[f]||r[f]||e._topologicalSort(f,r,o,l,a)}o[h]=!1,r[h]=!0,a.push(h)},e.chain=function(){for(var h=[],r=0;r<arguments.length;r+=1){var o=arguments[r];o._chained?h.push.apply(h,o._chained):h.push(o)}var l=function(){for(var a,u=new Array(arguments.length),c=0,f=arguments.length;c<f;c++)u[c]=arguments[c];for(c=0;c<h.length;c+=1){var v=h[c].apply(a,u);typeof v!="undefined"&&(a=v)}return a};return l._chained=h,l},e.chainPathBefore=function(h,r,o){return e.set(h,r,e.chain(o,e.get(h,r)))},e.chainPathAfter=function(h,r,o){return e.set(h,r,e.chain(e.get(h,r),o))}}()},function(i,d,e){var n={VERSION:"3.55.2",BlendModes:e(35),ScaleModes:e(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};i.exports=n},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(47),l=new n({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible],initialize:function(u,c,f){c===void 0&&(c="Shape"),r.call(this,u,c),this.geom=f,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(a,u){return u===void 0&&(u=1),a===void 0?this.isFilled=!1:(this.fillColor=a,this.fillAlpha=u,this.isFilled=!0),this},setStrokeStyle:function(a,u,c){return c===void 0&&(c=1),a===void 0?this.isStroked=!1:(this.lineWidth=a,this.strokeColor=u,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(a){return this.closePath=a,this},setSize:function(a,u){return this.width=a,this.height=u,this},setDisplaySize:function(a,u){return this.displayWidth=a,this.displayHeight=u,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}}});i.exports=l},function(i,d){i.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(i,d,e){var n=e(14),h=function(r){return r*n.DEG_TO_RAD};i.exports=h},function(i,d,e){i.exports={DESTROY:e(743),FADE_IN_COMPLETE:e(744),FADE_IN_START:e(745),FADE_OUT_COMPLETE:e(746),FADE_OUT_START:e(747),FLASH_COMPLETE:e(748),FLASH_START:e(749),FOLLOW_UPDATE:e(750),PAN_COMPLETE:e(751),PAN_START:e(752),POST_RENDER:e(753),PRE_RENDER:e(754),ROTATE_COMPLETE:e(755),ROTATE_START:e(756),SHAKE_COMPLETE:e(757),SHAKE_START:e(758),ZOOM_COMPLETE:e(759),ZOOM_START:e(760)}},function(i,d,e){var n=e(0),h=e(103),r=e(328),o=e(188),l=e(329),a=new n({initialize:function(c,f,v,p){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,f,v,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(u,c,f,v,p){return v===void 0&&(v=255),p===void 0&&(p=!0),this._locked=!0,this.red=u,this.green=c,this.blue=f,this.alpha=v,this._locked=!1,this.update(p)},setGLTo:function(u,c,f,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=u,this.greenGL=c,this.blueGL=f,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(u){return this._locked=!0,this.red=u.r,this.green=u.g,this.blue=u.b,u.hasOwnProperty("a")&&(this.alpha=u.a),this._locked=!1,this.update(!0)},setFromHSV:function(u,c,f){return o(u,c,f,this)},update:function(u){if(u===void 0&&(u=!1),this._locked)return this;var c=this.r,f=this.g,v=this.b,p=this.a;return this._color=h(c,f,v),this._color32=r(c,f,v,p),this._rgba="rgba("+c+","+f+","+v+","+p/255+")",u&&l(c,f,v,this),this},updateHSV:function(){var u=this.r,c=this.g,f=this.b;return l(u,c,f,this),this},clone:function(){return new a(this.r,this.g,this.b,this.a)},gray:function(u){return this.setTo(u,u,u)},random:function(u,c){u===void 0&&(u=0),c===void 0&&(c=255);var f=Math.floor(u+Math.random()*(c-u)),v=Math.floor(u+Math.random()*(c-u)),p=Math.floor(u+Math.random()*(c-u));return this.setTo(f,v,p)},randomGray:function(u,c){u===void 0&&(u=0),c===void 0&&(c=255);var f=Math.floor(u+Math.random()*(c-u));return this.setTo(f,f,f)},saturate:function(u){return this.s+=u/100,this},desaturate:function(u){return this.s-=u/100,this},lighten:function(u){return this.v+=u/100,this},darken:function(u){return this.v-=u/100,this},brighten:function(u){var c=this.r,f=this.g,v=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(u/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(u/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(u/100)))),this.setTo(c,f,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(u){this.gl[0]=Math.min(Math.abs(u),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(u){this.gl[1]=Math.min(Math.abs(u),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(u){this.gl[2]=Math.min(Math.abs(u),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(u){this.gl[3]=Math.min(Math.abs(u),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(u){u=Math.floor(Math.abs(u)),this.r=Math.min(u,255),this.gl[0]=u/255,this.update(!0)}},green:{get:function(){return this.g},set:function(u){u=Math.floor(Math.abs(u)),this.g=Math.min(u,255),this.gl[1]=u/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(u){u=Math.floor(Math.abs(u)),this.b=Math.min(u,255),this.gl[2]=u/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(u){u=Math.floor(Math.abs(u)),this.a=Math.min(u,255),this.gl[3]=u/255,this.update()}},h:{get:function(){return this._h},set:function(u){this._h=u,o(u,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(u){this._s=u,o(this._h,u,this._v,this)}},v:{get:function(){return this._v},set:function(u){this._v=u,o(this._h,this._s,u,this)}}});i.exports=a},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=l||0,this.z=a||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clone:function(){return new h(this.x,this.y,this.z)},addVectors:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this},crossVectors:function(r,o){var l=r.x,a=r.y,u=r.z,c=o.x,f=o.y,v=o.z;return this.x=a*v-u*f,this.y=u*c-l*v,this.z=l*f-a*c,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this},set:function(r,o,l){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=o||0,this.z=l||0),this},setFromMatrixPosition:function(r){return this.fromArray(r.val,12)},setFromMatrixColumn:function(r,o){return this.fromArray(r.val,o*4)},fromArray:function(r,o){return o===void 0&&(o=0),this.x=r[o],this.y=r[o+1],this.z=r[o+2],this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addScale:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(r){var o=r.x-this.x,l=r.y-this.y,a=r.z-this.z||0;return Math.sqrt(o*o+l*l+a*a)},distanceSq:function(r){var o=r.x-this.x,l=r.y-this.y,a=r.z-this.z||0;return o*o+l*l+a*a},length:function(){var r=this.x,o=this.y,l=this.z;return Math.sqrt(r*r+o*o+l*l)},lengthSq:function(){var r=this.x,o=this.y,l=this.z;return r*r+o*o+l*l},normalize:function(){var r=this.x,o=this.y,l=this.z,a=r*r+o*o+l*l;return a>0&&(a=1/Math.sqrt(a),this.x=r*a,this.y=o*a,this.z=l*a),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},cross:function(r){var o=this.x,l=this.y,a=this.z,u=r.x,c=r.y,f=r.z;return this.x=l*f-a*c,this.y=a*u-o*f,this.z=o*c-l*u,this},lerp:function(r,o){o===void 0&&(o=0);var l=this.x,a=this.y,u=this.z;return this.x=l+o*(r.x-l),this.y=a+o*(r.y-a),this.z=u+o*(r.z-u),this},applyMatrix3:function(r){var o=this.x,l=this.y,a=this.z,u=r.val;return this.x=u[0]*o+u[3]*l+u[6]*a,this.y=u[1]*o+u[4]*l+u[7]*a,this.z=u[2]*o+u[5]*l+u[8]*a,this},applyMatrix4:function(r){var o=this.x,l=this.y,a=this.z,u=r.val,c=1/(u[3]*o+u[7]*l+u[11]*a+u[15]);return this.x=(u[0]*o+u[4]*l+u[8]*a+u[12])*c,this.y=(u[1]*o+u[5]*l+u[9]*a+u[13])*c,this.z=(u[2]*o+u[6]*l+u[10]*a+u[14])*c,this},transformMat3:function(r){var o=this.x,l=this.y,a=this.z,u=r.val;return this.x=o*u[0]+l*u[3]+a*u[6],this.y=o*u[1]+l*u[4]+a*u[7],this.z=o*u[2]+l*u[5]+a*u[8],this},transformMat4:function(r){var o=this.x,l=this.y,a=this.z,u=r.val;return this.x=u[0]*o+u[4]*l+u[8]*a+u[12],this.y=u[1]*o+u[5]*l+u[9]*a+u[13],this.z=u[2]*o+u[6]*l+u[10]*a+u[14],this},transformCoordinates:function(r){var o=this.x,l=this.y,a=this.z,u=r.val,c=o*u[0]+l*u[4]+a*u[8]+u[12],f=o*u[1]+l*u[5]+a*u[9]+u[13],v=o*u[2]+l*u[6]+a*u[10]+u[14],p=o*u[3]+l*u[7]+a*u[11]+u[15];return this.x=c/p,this.y=f/p,this.z=v/p,this},transformQuat:function(r){var o=this.x,l=this.y,a=this.z,u=r.x,c=r.y,f=r.z,v=r.w,p=v*o+c*a-f*l,g=v*l+f*o-u*a,m=v*a+u*l-c*o,x=-u*o-c*l-f*a;return this.x=p*v+x*-u+g*-f-m*-c,this.y=g*v+x*-c+m*-u-p*-f,this.z=m*v+x*-f+p*-c-g*-u,this},project:function(r){var o=this.x,l=this.y,a=this.z,u=r.val,c=u[0],f=u[1],v=u[2],p=u[3],g=u[4],m=u[5],x=u[6],y=u[7],T=u[8],C=u[9],S=u[10],E=u[11],M=u[12],R=u[13],L=u[14],O=u[15],F=1/(o*p+l*y+a*E+O);return this.x=(o*c+l*g+a*T+M)*F,this.y=(o*f+l*m+a*C+R)*F,this.z=(o*v+l*x+a*S+L)*F,this},projectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unprojectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unproject:function(r,o){var l=r.x,a=r.y,u=r.z,c=r.w,f=this.x-l,v=c-this.y-1-a,p=this.z;return this.x=2*f/u-1,this.y=2*v/c-1,this.z=2*p-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});h.ZERO=new h,h.RIGHT=new h(1,0,0),h.LEFT=new h(-1,0,0),h.UP=new h(0,-1,0),h.DOWN=new h(0,1,0),h.FORWARD=new h(0,0,1),h.BACK=new h(0,0,-1),h.ONE=new h(1,1,1),i.exports=h},function(i,d){i.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(i,d,e){var n={};i.exports=n;var h=e(64),r=e(83),o=e(165),l=e(32),a=e(84),u=e(271);(function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(f){var v={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!f.hasOwnProperty("position")&&f.hasOwnProperty("vertices")?f.position=h.centre(f.vertices):f.hasOwnProperty("vertices")||(v.vertices=h.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=l.extend(v,f);return c(p,f),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},n.nextGroup=function(f){return f?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var c=function(f,v){v=v||{},n.set(f,{bounds:f.bounds||a.create(f.vertices),positionPrev:f.positionPrev||r.clone(f.position),anglePrev:f.anglePrev||f.angle,vertices:f.vertices,parts:f.parts||[f],isStatic:f.isStatic,isSleeping:f.isSleeping,parent:f.parent||f});var p=f.bounds;if(h.rotate(f.vertices,f.angle,f.position),u.rotate(f.axes,f.angle),a.update(p,f.vertices,f.velocity),n.set(f,{axes:v.axes||f.axes,area:v.area||f.area,mass:v.mass||f.mass,inertia:v.inertia||f.inertia}),f.parts.length===1){var g=f.centerOfMass,m=f.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-f.position.x)/x,g.y=-(p.min.y-f.position.y)/y,m.x=x*g.x,m.y=y*g.y}};n.set=function(f,v,p){var g;typeof v=="string"&&(g=v,v={},v[g]=p);for(g in v)if(!!Object.prototype.hasOwnProperty.call(v,g))switch(p=v[g],g){case"isStatic":n.setStatic(f,p);break;case"isSleeping":o.set(f,p);break;case"mass":n.setMass(f,p);break;case"density":n.setDensity(f,p);break;case"inertia":n.setInertia(f,p);break;case"vertices":n.setVertices(f,p);break;case"position":n.setPosition(f,p);break;case"angle":n.setAngle(f,p);break;case"velocity":n.setVelocity(f,p);break;case"angularVelocity":n.setAngularVelocity(f,p);break;case"parts":n.setParts(f,p);break;case"centre":n.setCentre(f,p);break;default:f[g]=p}},n.setStatic=function(f,v){for(var p=0;p<f.parts.length;p++){var g=f.parts[p];g.isStatic=v,v?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=Infinity,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},n.setMass=function(f,v){var p=f.inertia/(f.mass/6);f.inertia=p*(v/6),f.inverseInertia=1/f.inertia,f.mass=v,f.inverseMass=1/f.mass,f.density=f.mass/f.area},n.setDensity=function(f,v){n.setMass(f,v*f.area),f.density=v},n.setInertia=function(f,v){f.inertia=v,f.inverseInertia=1/f.inertia},n.setVertices=function(f,v){v[0].body===f?f.vertices=v:f.vertices=h.create(v,f),f.axes=u.fromVertices(f.vertices),f.area=h.area(f.vertices),n.setMass(f,f.density*f.area);var p=h.centre(f.vertices);h.translate(f.vertices,p,-1),n.setInertia(f,n._inertiaScale*h.inertia(f.vertices,f.mass)),h.translate(f.vertices,f.position),a.update(f.bounds,f.vertices,f.velocity)},n.setParts=function(f,v,p){var g;for(v=v.slice(0),f.parts.length=0,f.parts.push(f),f.parent=f,g=0;g<v.length;g++){var m=v[g];m!==f&&(m.parent=f,f.parts.push(m))}if(f.parts.length!==1){if(p=typeof p!="undefined"?p:!0,p){var x=[];for(g=0;g<v.length;g++)x=x.concat(v[g].vertices);h.clockwiseSort(x);var y=h.hull(x),T=h.centre(y);n.setVertices(f,y),h.translate(f.vertices,T)}var C=n._totalProperties(f),S=C.centre.x,E=C.centre.y,M=f.bounds,R=f.centerOfMass,L=f.centerOffset;a.update(M,f.vertices,f.velocity),R.x=-(M.min.x-S)/(M.max.x-M.min.x),R.y=-(M.min.y-E)/(M.max.y-M.min.y),L.x=S,L.y=E,f.area=C.area,f.parent=f,f.position.x=S,f.position.y=E,f.positionPrev.x=S,f.positionPrev.y=E,n.setMass(f,C.mass),n.setInertia(f,C.inertia),n.setPosition(f,C.centre)}},n.setCentre=function(f,v,p){p?(f.positionPrev.x+=v.x,f.positionPrev.y+=v.y,f.position.x+=v.x,f.position.y+=v.y):(f.positionPrev.x=v.x-(f.position.x-f.positionPrev.x),f.positionPrev.y=v.y-(f.position.y-f.positionPrev.y),f.position.x=v.x,f.position.y=v.y)},n.setPosition=function(f,v){var p=r.sub(v,f.position);f.positionPrev.x+=p.x,f.positionPrev.y+=p.y;for(var g=0;g<f.parts.length;g++){var m=f.parts[g];m.position.x+=p.x,m.position.y+=p.y,h.translate(m.vertices,p),a.update(m.bounds,m.vertices,f.velocity)}},n.setAngle=function(f,v){var p=v-f.angle;f.anglePrev+=p;for(var g=0;g<f.parts.length;g++){var m=f.parts[g];m.angle+=p,h.rotate(m.vertices,p,f.position),u.rotate(m.axes,p),a.update(m.bounds,m.vertices,f.velocity),g>0&&r.rotateAbout(m.position,p,f.position,m.position)}},n.setVelocity=function(f,v){f.positionPrev.x=f.position.x-v.x,f.positionPrev.y=f.position.y-v.y,f.velocity.x=v.x,f.velocity.y=v.y,f.speed=r.magnitude(f.velocity)},n.setAngularVelocity=function(f,v){f.anglePrev=f.angle-v,f.angularVelocity=v,f.angularSpeed=Math.abs(f.angularVelocity)},n.translate=function(f,v){n.setPosition(f,r.add(f.position,v))},n.rotate=function(f,v,p){if(!p)n.setAngle(f,f.angle+v);else{var g=Math.cos(v),m=Math.sin(v),x=f.position.x-p.x,y=f.position.y-p.y;n.setPosition(f,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),n.setAngle(f,f.angle+v)}},n.scale=function(f,v,p,g){var m=0,x=0;g=g||f.position;for(var y=0;y<f.parts.length;y++){var T=f.parts[y];T.scale.x=v,T.scale.y=p,h.scale(T.vertices,v,p,g),T.axes=u.fromVertices(T.vertices),T.area=h.area(T.vertices),n.setMass(T,f.density*T.area),h.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),n.setInertia(T,n._inertiaScale*h.inertia(T.vertices,T.mass)),h.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*v,T.position.y=g.y+(T.position.y-g.y)*p,a.update(T.bounds,T.vertices,f.velocity)}f.parts.length>1&&(f.area=m,f.isStatic||(n.setMass(f,f.density*m),n.setInertia(f,x))),f.circleRadius&&(v===p?f.circleRadius*=v:f.circleRadius=null)},n.update=function(f,v,p,g){var m=Math.pow(v*p*f.timeScale,2),x=1-f.frictionAir*p*f.timeScale,y=f.position.x-f.positionPrev.x,T=f.position.y-f.positionPrev.y;f.velocity.x=y*x*g+f.force.x/f.mass*m,f.velocity.y=T*x*g+f.force.y/f.mass*m,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.position.x+=f.velocity.x,f.position.y+=f.velocity.y,f.angularVelocity=(f.angle-f.anglePrev)*x*g+f.torque/f.inertia*m,f.anglePrev=f.angle,f.angle+=f.angularVelocity,f.speed=r.magnitude(f.velocity),f.angularSpeed=Math.abs(f.angularVelocity);for(var C=0;C<f.parts.length;C++){var S=f.parts[C];h.translate(S.vertices,f.velocity),C>0&&(S.position.x+=f.velocity.x,S.position.y+=f.velocity.y),f.angularVelocity!==0&&(h.rotate(S.vertices,f.angularVelocity,f.position),u.rotate(S.axes,f.angularVelocity),C>0&&r.rotateAbout(S.position,f.angularVelocity,f.position,S.position)),a.update(S.bounds,S.vertices,f.velocity)}},n.applyForce=function(f,v,p){f.force.x+=p.x,f.force.y+=p.y;var g={x:v.x-f.position.x,y:v.y-f.position.y};f.torque+=g.x*p.y-g.y*p.x},n._totalProperties=function(f){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=f.parts.length===1?0:1;p<f.parts.length;p++){var g=f.parts[p],m=g.mass!==Infinity?g.mass:1;v.mass+=m,v.area+=g.area,v.inertia+=g.inertia,v.centre=r.add(v.centre,r.mult(g.position,m))}return v.centre=r.div(v.centre,v.mass),v}})()},function(i,d){var e=function(n){return n.y+n.height-n.height*n.originY};i.exports=e},function(i,d){var e=function(n){return n.x-n.width*n.originX};i.exports=e},function(i,d){var e=function(n){return n.x+n.width-n.width*n.originX};i.exports=e},function(i,d){var e=function(n){return n.y-n.height*n.originY};i.exports=e},function(i,d){var e=function(n,h,r,o,l,a){o===void 0&&(o=0),l===void 0&&(l=0),a===void 0&&(a=1);var u,c=0,f=n.length;if(a===1)for(u=l;u<f;u++)n[u][h]+=r+c*o,c++;else for(u=l;u>=0;u--)n[u][h]+=r+c*o,c++;return n};i.exports=e},function(i,d,e){var n=e(0),h=e(307),r=e(172),o=e(56),l=e(173),a=e(3),u=new n({initialize:function(f,v,p,g){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=o.LINE,this.x1=f,this.y1=v,this.x2=p,this.y2=g},getPoint:function(c,f){return h(this,c,f)},getPoints:function(c,f,v){return r(this,c,f,v)},getRandomPoint:function(c){return l(this,c)},setTo:function(c,f,v,p){return c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),this.x1=c,this.y1=f,this.x2=v,this.y2=p,this},getPointA:function(c){return c===void 0&&(c=new a),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new a),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});i.exports=u},function(i,d){var e=function(n,h,r,o){var l=r||h.fillColor,a=o||h.fillAlpha,u=(l&16711680)>>>16,c=(l&65280)>>>8,f=l&255;n.fillStyle="rgba("+u+","+c+","+f+","+a+")"};i.exports=e},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u){var c=[];u.forEach(function(v){v&&c.push(v)}),this.loader=o,this.type=l,this.key=a,this.multiKeyIndex=o.multiKeyIndex++,this.files=c,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var f=0;f<c.length;f++)c[f].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var o=this.files.indexOf(r);o!==-1&&this.pending--},onFileFailed:function(r){var o=this.files.indexOf(r);o!==-1&&this.failed++}});i.exports=h},function(i,d){var e=function(n,h,r,o){var l=n-r,a=h-o;return Math.sqrt(l*l+a*a)};i.exports=e},function(i,d,e){i.exports={BOOT:e(922),DESTROY:e(923),DRAG_END:e(924),DRAG_ENTER:e(925),DRAG:e(926),DRAG_LEAVE:e(927),DRAG_OVER:e(928),DRAG_START:e(929),DROP:e(930),GAME_OUT:e(931),GAME_OVER:e(932),GAMEOBJECT_DOWN:e(933),GAMEOBJECT_DRAG_END:e(934),GAMEOBJECT_DRAG_ENTER:e(935),GAMEOBJECT_DRAG:e(936),GAMEOBJECT_DRAG_LEAVE:e(937),GAMEOBJECT_DRAG_OVER:e(938),GAMEOBJECT_DRAG_START:e(939),GAMEOBJECT_DROP:e(940),GAMEOBJECT_MOVE:e(941),GAMEOBJECT_OUT:e(942),GAMEOBJECT_OVER:e(943),GAMEOBJECT_POINTER_DOWN:e(944),GAMEOBJECT_POINTER_MOVE:e(945),GAMEOBJECT_POINTER_OUT:e(946),GAMEOBJECT_POINTER_OVER:e(947),GAMEOBJECT_POINTER_UP:e(948),GAMEOBJECT_POINTER_WHEEL:e(949),GAMEOBJECT_UP:e(950),GAMEOBJECT_WHEEL:e(951),MANAGER_BOOT:e(952),MANAGER_PROCESS:e(953),MANAGER_UPDATE:e(954),POINTER_DOWN:e(955),POINTER_DOWN_OUTSIDE:e(956),POINTER_MOVE:e(957),POINTER_OUT:e(958),POINTER_OVER:e(959),POINTER_UP:e(960),POINTER_UP_OUTSIDE:e(961),POINTER_WHEEL:e(962),POINTERLOCK_CHANGE:e(963),PRE_UPDATE:e(964),SHUTDOWN:e(965),START:e(966),UPDATE:e(967)}},function(i,d){var e=function(n,h){return n.y=h+n.height*n.originY,n};i.exports=e},function(i,d){var e=function(n,h){return n.x=h+n.width*n.originX,n};i.exports=e},function(i,d){var e=function(n,h){return n.x=h-n.width+n.width*n.originX,n};i.exports=e},function(i,d){var e=function(n,h){return n.y=h-n.height+n.height*n.originY,n};i.exports=e},function(i,d){var e={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};i.exports=e},function(i,d){var e=function(n,h,r){return n.width<=0||n.height<=0?!1:n.x<=h&&n.x+n.width>=h&&n.y<=r&&n.y+n.height>=r};i.exports=e},function(i,d,e){var n=e(0),h=e(175),r=e(9),o=e(374),l=e(2),a=e(69),u=e(91),c=e(141),f=e(12),v=e(375),p=new n({Extends:r,initialize:function(m){r.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=l(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=l(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=l(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new a().identity());var T=this.renderTargets,C=l(x,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new c(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var M=l(C[g],"scale",1),R=l(C[g],"minFilter",0),L=l(C[g],"autoClear",1);T.push(new c(y,S,E,M,R,L))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var O=this.shaders,F=0;for(g=0;g<O.length;g++)O[g].vertexSize>F&&(F=O[g].vertexSize);var D=l(x,"batchSize",y.config.batchSize);this.vertexCapacity=D*6;var B=new ArrayBuffer(this.vertexCapacity*F);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var N=l(x,"vertices",null);for(N?(this.vertexViewF32.set(N),this.vertexBuffer=y.createVertexBuffer(B,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(B.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=O.length-1;g>=0;g--)O[g].rebind();this.hasBooted=!0,y.on(u.RESIZE,this.resize,this),y.on(u.PRE_RENDER,this.onPreRender,this),y.on(u.RENDER,this.onRender,this),y.on(u.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",C="fragShader",S="attributes",E=l(g,T,null),M=f.parseFragmentShaderMaxTextures(l(g,C,null),y.maxTextures),R=l(g,S,null),L=l(g,"shaders",[]),O=L.length;if(O===0)E&&M&&(this.shaders=[new v(this,"default",E,M,h(R))]);else{var F=[];for(m=0;m<O;m++){var D=L[m],B=l(D,"name","default"),N=l(D,T,E),V=f.parseFragmentShaderMaxTextures(l(D,C,M),y.maxTextures),X=l(D,S,R);N&&V&&F.push(new v(this,B,N,V,h(X)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(o.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,x.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(o.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,C,S){var E=this.vertexViewF32,M=this.vertexViewU32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++R]=g,E[++R]=m,E[++R]=x,E[++R]=y,E[++R]=T,E[++R]=C,M[++R]=S,this.vertexCount++},batchQuad:function(g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,N,V,X,K,Z){Z===void 0&&(Z=this.currentUnit);var G=!1;return this.shouldFlush(6)&&(this.flush(),G=!0,Z=this.setTexture2D(K)),this.batchVert(m,x,R,L,Z,X,D),this.batchVert(y,T,R,F,Z,X,N),this.batchVert(C,S,O,F,Z,X,V),this.batchVert(m,x,R,L,Z,X,D),this.batchVert(C,S,O,F,Z,X,V),this.batchVert(E,M,O,L,Z,X,B),this.onBatch(g),G},batchTri:function(g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,N,V){V===void 0&&(V=this.currentUnit);var X=!1;return this.shouldFlush(3)&&(this.flush(),X=!0,V=this.setTexture2D(N)),this.batchVert(m,x,E,M,V,B,O),this.batchVert(y,T,E,L,V,B,F),this.batchVert(C,S,R,L,V,B,D),this.onBatch(g),X},drawFillRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var M=Math.floor(g+x),R=Math.floor(m+y),L=this.setTexture2D(S),O=f.getTintAppendFloatAlphaAndSwap(T,C),F=0,D=0,B=1,N=1;E&&(D=1,N=0),this.batchQuad(null,g,m,g,R,M,R,M,m,F,D,B,N,O,O,O,O,0,S,L)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(o.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(u.RESIZE,this.resize,this),y.off(u.PRE_RENDER,this.onPreRender,this),y.off(u.RENDER,this.onRender,this),y.off(u.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});i.exports=p},function(i,d,e){function n(w,b,Y){Y=Y||2;var U=b&&b.length,W=U?b[0]*Y:w.length,H=h(w,0,W,Y,!0),J=[];if(!H||H.next===H.prev)return J;var q,_,nt,rt,at,vt,ut;if(U&&(H=f(w,b,H,Y)),w.length>80*Y){q=nt=w[0],_=rt=w[1];for(var ct=Y;ct<W;ct+=Y)at=w[ct],vt=w[ct+1],at<q&&(q=at),vt<_&&(_=vt),at>nt&&(nt=at),vt>rt&&(rt=vt);ut=Math.max(nt-q,rt-_),ut=ut!==0?1/ut:0}return o(H,J,Y,q,_,ut),J}function h(w,b,Y,U,W){var H,J;if(W===G(w,b,Y,U)>0)for(H=b;H<Y;H+=U)J=X(H,w[H],w[H+1],J);else for(H=Y-U;H>=b;H-=U)J=X(H,w[H],w[H+1],J);return J&&R(J,J.next)&&(K(J),J=J.next),J}function r(w,b){if(!w)return w;b||(b=w);var Y=w,U;do if(U=!1,!Y.steiner&&(R(Y,Y.next)||M(Y.prev,Y,Y.next)===0)){if(K(Y),Y=b=Y.prev,Y===Y.next)break;U=!0}else Y=Y.next;while(U||Y!==b);return b}function o(w,b,Y,U,W,H,J){if(!!w){!J&&H&&x(w,U,W,H);for(var q=w,_,nt;w.prev!==w.next;){if(_=w.prev,nt=w.next,H?a(w,U,W,H):l(w)){b.push(_.i/Y),b.push(w.i/Y),b.push(nt.i/Y),K(w),w=nt.next,q=nt.next;continue}if(w=nt,w===q){J?J===1?(w=u(r(w),b,Y),o(w,b,Y,U,W,H,2)):J===2&&c(w,b,Y,U,W,H):o(r(w),b,Y,U,W,H,1);break}}}}function l(w){var b=w.prev,Y=w,U=w.next;if(M(b,Y,U)>=0)return!1;for(var W=w.next.next;W!==w.prev;){if(S(b.x,b.y,Y.x,Y.y,U.x,U.y,W.x,W.y)&&M(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function a(w,b,Y,U){var W=w.prev,H=w,J=w.next;if(M(W,H,J)>=0)return!1;for(var q=W.x<H.x?W.x<J.x?W.x:J.x:H.x<J.x?H.x:J.x,_=W.y<H.y?W.y<J.y?W.y:J.y:H.y<J.y?H.y:J.y,nt=W.x>H.x?W.x>J.x?W.x:J.x:H.x>J.x?H.x:J.x,rt=W.y>H.y?W.y>J.y?W.y:J.y:H.y>J.y?H.y:J.y,at=T(q,_,b,Y,U),vt=T(nt,rt,b,Y,U),ut=w.prevZ,ct=w.nextZ;ut&&ut.z>=at&&ct&&ct.z<=vt;){if(ut!==w.prev&&ut!==w.next&&S(W.x,W.y,H.x,H.y,J.x,J.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,ct!==w.prev&&ct!==w.next&&S(W.x,W.y,H.x,H.y,J.x,J.y,ct.x,ct.y)&&M(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;ut&&ut.z>=at;){if(ut!==w.prev&&ut!==w.next&&S(W.x,W.y,H.x,H.y,J.x,J.y,ut.x,ut.y)&&M(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;ct&&ct.z<=vt;){if(ct!==w.prev&&ct!==w.next&&S(W.x,W.y,H.x,H.y,J.x,J.y,ct.x,ct.y)&&M(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function u(w,b,Y){var U=w;do{var W=U.prev,H=U.next.next;!R(W,H)&&L(W,U,U.next,H)&&B(W,H)&&B(H,W)&&(b.push(W.i/Y),b.push(U.i/Y),b.push(H.i/Y),K(U),K(U.next),U=w=H),U=U.next}while(U!==w);return r(U)}function c(w,b,Y,U,W,H){var J=w;do{for(var q=J.next.next;q!==J.prev;){if(J.i!==q.i&&E(J,q)){var _=V(J,q);J=r(J,J.next),_=r(_,_.next),o(J,b,Y,U,W,H),o(_,b,Y,U,W,H);return}q=q.next}J=J.next}while(J!==w)}function f(w,b,Y,U){var W=[],H,J,q,_,nt;for(H=0,J=b.length;H<J;H++)q=b[H]*U,_=H<J-1?b[H+1]*U:w.length,nt=h(w,q,_,U,!1),nt===nt.next&&(nt.steiner=!0),W.push(C(nt));for(W.sort(v),H=0;H<W.length;H++)p(W[H],Y),Y=r(Y,Y.next);return Y}function v(w,b){return w.x-b.x}function p(w,b){if(b=g(w,b),b){var Y=V(b,w);r(b,b.next),r(Y,Y.next)}}function g(w,b){var Y=b,U=w.x,W=w.y,H=-Infinity,J;do{if(W<=Y.y&&W>=Y.next.y&&Y.next.y!==Y.y){var q=Y.x+(W-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(q<=U&&q>H){if(H=q,q===U){if(W===Y.y)return Y;if(W===Y.next.y)return Y.next}J=Y.x<Y.next.x?Y:Y.next}}Y=Y.next}while(Y!==b);if(!J)return null;if(U===H)return J;var _=J,nt=J.x,rt=J.y,at=Infinity,vt;Y=J;do U>=Y.x&&Y.x>=nt&&U!==Y.x&&S(W<rt?U:H,W,nt,rt,W<rt?H:U,W,Y.x,Y.y)&&(vt=Math.abs(W-Y.y)/(U-Y.x),B(Y,w)&&(vt<at||vt===at&&(Y.x>J.x||Y.x===J.x&&m(J,Y)))&&(J=Y,at=vt)),Y=Y.next;while(Y!==_);return J}function m(w,b){return M(w.prev,w,b.prev)<0&&M(b.next,w,w.next)<0}function x(w,b,Y,U){var W=w;do W.z===null&&(W.z=T(W.x,W.y,b,Y,U)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==w);W.prevZ.nextZ=null,W.prevZ=null,y(W)}function y(w){var b,Y,U,W,H,J,q,_,nt=1;do{for(Y=w,w=null,H=null,J=0;Y;){for(J++,U=Y,q=0,b=0;b<nt&&(q++,U=U.nextZ,!!U);b++);for(_=nt;q>0||_>0&&U;)q!==0&&(_===0||!U||Y.z<=U.z)?(W=Y,Y=Y.nextZ,q--):(W=U,U=U.nextZ,_--),H?H.nextZ=W:w=W,W.prevZ=H,H=W;Y=U}H.nextZ=null,nt*=2}while(J>1);return w}function T(w,b,Y,U,W){return w=32767*(w-Y)*W,b=32767*(b-U)*W,w=(w|w<<8)&16711935,w=(w|w<<4)&252645135,w=(w|w<<2)&858993459,w=(w|w<<1)&1431655765,b=(b|b<<8)&16711935,b=(b|b<<4)&252645135,b=(b|b<<2)&858993459,b=(b|b<<1)&1431655765,w|b<<1}function C(w){var b=w,Y=w;do(b.x<Y.x||b.x===Y.x&&b.y<Y.y)&&(Y=b),b=b.next;while(b!==w);return Y}function S(w,b,Y,U,W,H,J,q){return(W-J)*(b-q)-(w-J)*(H-q)>=0&&(w-J)*(U-q)-(Y-J)*(b-q)>=0&&(Y-J)*(H-q)-(W-J)*(U-q)>=0}function E(w,b){return w.next.i!==b.i&&w.prev.i!==b.i&&!D(w,b)&&(B(w,b)&&B(b,w)&&N(w,b)&&(M(w.prev,w,b.prev)||M(w,b.prev,b))||R(w,b)&&M(w.prev,w,w.next)>0&&M(b.prev,b,b.next)>0)}function M(w,b,Y){return(b.y-w.y)*(Y.x-b.x)-(b.x-w.x)*(Y.y-b.y)}function R(w,b){return w.x===b.x&&w.y===b.y}function L(w,b,Y,U){var W=F(M(w,b,Y)),H=F(M(w,b,U)),J=F(M(Y,U,w)),q=F(M(Y,U,b));return!!(W!==H&&J!==q||W===0&&O(w,Y,b)||H===0&&O(w,U,b)||J===0&&O(Y,w,U)||q===0&&O(Y,b,U))}function O(w,b,Y){return b.x<=Math.max(w.x,Y.x)&&b.x>=Math.min(w.x,Y.x)&&b.y<=Math.max(w.y,Y.y)&&b.y>=Math.min(w.y,Y.y)}function F(w){return w>0?1:w<0?-1:0}function D(w,b){var Y=w;do{if(Y.i!==w.i&&Y.next.i!==w.i&&Y.i!==b.i&&Y.next.i!==b.i&&L(Y,Y.next,w,b))return!0;Y=Y.next}while(Y!==w);return!1}function B(w,b){return M(w.prev,w,w.next)<0?M(w,b,w.next)>=0&&M(w,w.prev,b)>=0:M(w,b,w.prev)<0||M(w,w.next,b)<0}function N(w,b){var Y=w,U=!1,W=(w.x+b.x)/2,H=(w.y+b.y)/2;do Y.y>H!=Y.next.y>H&&Y.next.y!==Y.y&&W<(Y.next.x-Y.x)*(H-Y.y)/(Y.next.y-Y.y)+Y.x&&(U=!U),Y=Y.next;while(Y!==w);return U}function V(w,b){var Y=new Z(w.i,w.x,w.y),U=new Z(b.i,b.x,b.y),W=w.next,H=b.prev;return w.next=b,b.prev=w,Y.next=W,W.prev=Y,U.next=Y,Y.prev=U,H.next=U,U.prev=H,U}function X(w,b,Y,U){var W=new Z(w,b,Y);return U?(W.next=U.next,W.prev=U,U.next.prev=W,U.next=W):(W.prev=W,W.next=W),W}function K(w){w.next.prev=w.prev,w.prev.next=w.next,w.prevZ&&(w.prevZ.nextZ=w.nextZ),w.nextZ&&(w.nextZ.prevZ=w.prevZ)}function Z(w,b,Y){this.i=w,this.x=b,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(w,b,Y,U){var W=b&&b.length,H=W?b[0]*Y:w.length,J=Math.abs(G(w,0,H,Y));if(W)for(var q=0,_=b.length;q<_;q++){var nt=b[q]*Y,rt=q<_-1?b[q+1]*Y:w.length;J-=Math.abs(G(w,nt,rt,Y))}var at=0;for(q=0;q<U.length;q+=3){var vt=U[q]*Y,ut=U[q+1]*Y,ct=U[q+2]*Y;at+=Math.abs((w[vt]-w[ct])*(w[ut+1]-w[vt+1])-(w[vt]-w[ut])*(w[ct+1]-w[vt+1]))}return J===0&&at===0?0:Math.abs((at-J)/J)};function G(w,b,Y,U){for(var W=0,H=b,J=Y-U;H<Y;H+=U)W+=(w[J]-w[H])*(w[H+1]+w[J+1]),J=H;return W}n.flatten=function(w){for(var b=w[0][0].length,Y={vertices:[],holes:[],dimensions:b},U=0,W=0;W<w.length;W++){for(var H=0;H<w[W].length;H++)for(var J=0;J<b;J++)Y.vertices.push(w[W][H][J]);W>0&&(U+=w[W-1].length,Y.holes.push(U))}return Y},i.exports=n},function(i,d){var e=function(n,h,r,o){var l=r||h.strokeColor,a=o||h.strokeAlpha,u=(l&16711680)>>>16,c=(l&65280)>>>8,f=l&255;n.strokeStyle="rgba("+u+","+c+","+f+","+a+")",n.lineWidth=h.lineWidth};i.exports=e},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(6),u=e(7),c=new n({Extends:r,initialize:function(v,p,g,m,x){var y="json";if(u(p)){var T=p;p=l(T,"key"),g=l(T,"url"),m=l(T,"xhrSettings"),y=l(T,"extension",y),x=l(T,"dataKey",x)}var C={type:"json",cache:v.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};r.call(this,v,C),u(g)&&(x?this.data=a(g,x):this.data=g,this.state=h.FILE_POPULATED)},onProcess:function(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var f=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var v=this.config;typeof v=="string"?this.data=a(f,v,f):this.data=f}this.onProcessComplete()}});o.register("json",function(f,v,p,g){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new c(this,f[m]));else this.addFile(new c(this,f,v,g,p));return this}),i.exports=c},function(i,d){var e={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};i.exports=e},function(i,d,e){var n=e(158),h=e(26),r=function(o,l,a,u,c){for(var f=null,v=null,p=null,g=null,m=h(o,l,a,u,null,c),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(f=n(y.x,y.y-1,!0,c),v=n(y.x,y.y+1,!0,c),p=n(y.x-1,y.y,!0,c),g=n(y.x+1,y.y,!0,c),y.faceTop=!(f&&f.collides),y.faceBottom=!(v&&v.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};i.exports=r},function(i,d,e){var n={};i.exports=n;var h=e(83),r=e(32);(function(){n.create=function(o,l){for(var a=[],u=0;u<o.length;u++){var c=o[u],f={x:c.x,y:c.y,index:u,body:l,isInternal:!1,contact:null,offset:null};f.contact={vertex:f,normalImpulse:0,tangentImpulse:0},a.push(f)}return a},n.fromPath=function(o,l){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return o.replace(a,function(c,f,v){u.push({x:parseFloat(f),y:parseFloat(v)})}),n.create(u,l)},n.centre=function(o){for(var l=n.area(o,!0),a={x:0,y:0},u,c,f,v=0;v<o.length;v++)f=(v+1)%o.length,u=h.cross(o[v],o[f]),c=h.mult(h.add(o[v],o[f]),u),a=h.add(a,c);return h.div(a,6*l)},n.mean=function(o){for(var l={x:0,y:0},a=0;a<o.length;a++)l.x+=o[a].x,l.y+=o[a].y;return h.div(l,o.length)},n.area=function(o,l){for(var a=0,u=o.length-1,c=0;c<o.length;c++)a+=(o[u].x-o[c].x)*(o[u].y+o[c].y),u=c;return l?a/2:Math.abs(a)/2},n.inertia=function(o,l){for(var a=0,u=0,c=o,f,v,p=0;p<c.length;p++)v=(p+1)%c.length,f=Math.abs(h.cross(c[v],c[p])),a+=f*(h.dot(c[v],c[v])+h.dot(c[v],c[p])+h.dot(c[p],c[p])),u+=f;return l/6*(a/u)},n.translate=function(o,l,a){var u;if(a)for(u=0;u<o.length;u++)o[u].x+=l.x*a,o[u].y+=l.y*a;else for(u=0;u<o.length;u++)o[u].x+=l.x,o[u].y+=l.y;return o},n.rotate=function(o,l,a){if(l!==0){for(var u=Math.cos(l),c=Math.sin(l),f=0;f<o.length;f++){var v=o[f],p=v.x-a.x,g=v.y-a.y;v.x=a.x+(p*u-g*c),v.y=a.y+(p*c+g*u)}return o}},n.contains=function(o,l){for(var a=0;a<o.length;a++){var u=o[a],c=o[(a+1)%o.length];if((l.x-u.x)*(c.y-u.y)+(l.y-u.y)*(u.x-c.x)>0)return!1}return!0},n.scale=function(o,l,a,u){if(l===1&&a===1)return o;u=u||n.centre(o);for(var c,f,v=0;v<o.length;v++)c=o[v],f=h.sub(c,u),o[v].x=u.x+f.x*l,o[v].y=u.y+f.y*a;return o},n.chamfer=function(o,l,a,u,c){typeof l=="number"?l=[l]:l=l||[8],a=typeof a!="undefined"?a:-1,u=u||2,c=c||14;for(var f=[],v=0;v<o.length;v++){var p=o[v-1>=0?v-1:o.length-1],g=o[v],m=o[(v+1)%o.length],x=l[v<l.length?v:l.length-1];if(x===0){f.push(g);continue}var y=h.normalise({x:g.y-p.y,y:p.x-g.x}),T=h.normalise({x:m.y-g.y,y:g.x-m.x}),C=Math.sqrt(2*Math.pow(x,2)),S=h.mult(r.clone(y),x),E=h.normalise(h.mult(h.add(y,T),.5)),M=h.sub(g,h.mult(E,C)),R=a;a===-1&&(R=Math.pow(x,.32)*1.75),R=r.clamp(R,u,c),R%2==1&&(R+=1);for(var L=Math.acos(h.dot(y,T)),O=L/R,F=0;F<R;F++)f.push(h.add(h.rotate(S,O*F),M))}return f},n.clockwiseSort=function(o){var l=n.mean(o);return o.sort(function(a,u){return h.angle(l,a)-h.angle(l,u)}),o},n.isConvex=function(o){var l=0,a=o.length,u,c,f,v;if(a<3)return null;for(u=0;u<a;u++)if(c=(u+1)%a,f=(u+2)%a,v=(o[c].x-o[u].x)*(o[f].y-o[c].y),v-=(o[c].y-o[u].y)*(o[f].x-o[c].x),v<0?l|=1:v>0&&(l|=2),l===3)return!1;return l!==0?!0:null},n.hull=function(o){var l=[],a=[],u,c;for(o=o.slice(0),o.sort(function(f,v){var p=f.x-v.x;return p!==0?p:f.y-v.y}),c=0;c<o.length;c+=1){for(u=o[c];a.length>=2&&h.cross3(a[a.length-2],a[a.length-1],u)<=0;)a.pop();a.push(u)}for(c=o.length-1;c>=0;c-=1){for(u=o[c];l.length>=2&&h.cross3(l[l.length-2],l[l.length-1],u)<=0;)l.pop();l.push(u)}return l.pop(),a.pop(),l.concat(a)}})()},function(i,d,e){var n=e(0),h=e(66),r=e(300),o=e(301),l=e(56),a=e(170),u=new n({initialize:function(f,v,p){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),this.type=l.CIRCLE,this.x=f,this.y=v,this._radius=p,this._diameter=p*2},contains:function(c,f){return h(this,c,f)},getPoint:function(c,f){return r(this,c,f)},getPoints:function(c,f,v){return o(this,c,f,v)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,f,v){return this.x=c,this.y=f,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,f){return f===void 0&&(f=c),this.x=c,this.y=f,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});i.exports=u},function(i,d){var e=function(n,h,r){if(n.radius>0&&h>=n.left&&h<=n.right&&r>=n.top&&r<=n.bottom){var o=(n.x-h)*(n.x-h),l=(n.y-r)*(n.y-r);return o+l<=n.radius*n.radius}else return!1};i.exports=e},function(i,d){var e=function(n){return Math.sqrt((n.x2-n.x1)*(n.x2-n.x1)+(n.y2-n.y1)*(n.y2-n.y1))};i.exports=e},function(i,d){var e=function(n,h,r){var o=r-h;return h+((n-h)%o+o)%o};i.exports=e},function(i,d,e){var n=e(0),h=e(39),r=1e-6,o=new n({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new o(this)},set:function(v){return this.copy(v)},setValues:function(v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D){var B=this.val;return B[0]=v,B[1]=p,B[2]=g,B[3]=m,B[4]=x,B[5]=y,B[6]=T,B[7]=C,B[8]=S,B[9]=E,B[10]=M,B[11]=R,B[12]=L,B[13]=O,B[14]=F,B[15]=D,this},copy:function(v){var p=v.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,p,g){var m=l.fromQuat(g),x=m.val,y=p.x,T=p.y,C=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*C,x[9]*C,x[10]*C,0,v.x,v.y,v.z,1)},xyz:function(v,p,g){this.identity();var m=this.val;return m[12]=v,m[13]=p,m[14]=g,this},scaling:function(v,p,g){this.zero();var m=this.val;return m[0]=v,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,p=v[1],g=v[2],m=v[3],x=v[6],y=v[7],T=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=p,v[6]=v[9],v[7]=v[13],v[8]=g,v[9]=x,v[11]=v[14],v[12]=m,v[13]=y,v[14]=T,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],M=v[9],R=v[10],L=v[11],O=v[12],F=v[13],D=v[14],B=v[15],N=p*T-g*y,V=p*C-m*y,X=p*S-x*y,K=g*C-m*T,Z=g*S-x*T,G=m*S-x*C,w=E*F-M*O,b=E*D-R*O,Y=E*B-L*O,U=M*D-R*F,W=M*B-L*F,H=R*B-L*D,J=N*H-V*W+X*U+K*Y-Z*b+G*w;return J?(J=1/J,this.setValues((T*H-C*W+S*U)*J,(m*W-g*H-x*U)*J,(F*G-D*Z+B*K)*J,(R*Z-M*G-L*K)*J,(C*Y-y*H-S*b)*J,(p*H-m*Y+x*b)*J,(D*X-O*G-B*V)*J,(E*G-R*X+L*V)*J,(y*W-T*Y+S*w)*J,(g*Y-p*W-x*w)*J,(O*Z-F*X+B*N)*J,(M*X-E*Z-L*N)*J,(T*b-y*U-C*w)*J,(p*U-g*b+m*w)*J,(F*V-O*K-D*N)*J,(E*K-M*V+R*N)*J)):this},adjoint:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],M=v[9],R=v[10],L=v[11],O=v[12],F=v[13],D=v[14],B=v[15];return this.setValues(T*(R*B-L*D)-M*(C*B-S*D)+F*(C*L-S*R),-(g*(R*B-L*D)-M*(m*B-x*D)+F*(m*L-x*R)),g*(C*B-S*D)-T*(m*B-x*D)+F*(m*S-x*C),-(g*(C*L-S*R)-T*(m*L-x*R)+M*(m*S-x*C)),-(y*(R*B-L*D)-E*(C*B-S*D)+O*(C*L-S*R)),p*(R*B-L*D)-E*(m*B-x*D)+O*(m*L-x*R),-(p*(C*B-S*D)-y*(m*B-x*D)+O*(m*S-x*C)),p*(C*L-S*R)-y*(m*L-x*R)+E*(m*S-x*C),y*(M*B-L*F)-E*(T*B-S*F)+O*(T*L-S*M),-(p*(M*B-L*F)-E*(g*B-x*F)+O*(g*L-x*M)),p*(T*B-S*F)-y*(g*B-x*F)+O*(g*S-x*T),-(p*(T*L-S*M)-y*(g*L-x*M)+E*(g*S-x*T)),-(y*(M*D-R*F)-E*(T*D-C*F)+O*(T*R-C*M)),p*(M*D-R*F)-E*(g*D-m*F)+O*(g*R-m*M),-(p*(T*D-C*F)-y*(g*D-m*F)+O*(g*C-m*T)),p*(T*R-C*M)-y*(g*R-m*M)+E*(g*C-m*T))},determinant:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],M=v[9],R=v[10],L=v[11],O=v[12],F=v[13],D=v[14],B=v[15],N=p*T-g*y,V=p*C-m*y,X=p*S-x*y,K=g*C-m*T,Z=g*S-x*T,G=m*S-x*C,w=E*F-M*O,b=E*D-R*O,Y=E*B-L*O,U=M*D-R*F,W=M*B-L*F,H=R*B-L*D;return N*H-V*W+X*U+K*Y-Z*b+G*w},multiply:function(v){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5],S=p[6],E=p[7],M=p[8],R=p[9],L=p[10],O=p[11],F=p[12],D=p[13],B=p[14],N=p[15],V=v.val,X=V[0],K=V[1],Z=V[2],G=V[3];return p[0]=X*g+K*T+Z*M+G*F,p[1]=X*m+K*C+Z*R+G*D,p[2]=X*x+K*S+Z*L+G*B,p[3]=X*y+K*E+Z*O+G*N,X=V[4],K=V[5],Z=V[6],G=V[7],p[4]=X*g+K*T+Z*M+G*F,p[5]=X*m+K*C+Z*R+G*D,p[6]=X*x+K*S+Z*L+G*B,p[7]=X*y+K*E+Z*O+G*N,X=V[8],K=V[9],Z=V[10],G=V[11],p[8]=X*g+K*T+Z*M+G*F,p[9]=X*m+K*C+Z*R+G*D,p[10]=X*x+K*S+Z*L+G*B,p[11]=X*y+K*E+Z*O+G*N,X=V[12],K=V[13],Z=V[14],G=V[15],p[12]=X*g+K*T+Z*M+G*F,p[13]=X*m+K*C+Z*R+G*D,p[14]=X*x+K*S+Z*L+G*B,p[15]=X*y+K*E+Z*O+G*N,this},multiplyLocal:function(v){var p=this.val,g=v.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,p){var g=v.val,m=p.val,x=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],M=g[9],R=g[13],L=g[2],O=g[6],F=g[10],D=g[14],B=g[3],N=g[7],V=g[11],X=g[15],K=m[0],Z=m[4],G=m[8],w=m[12],b=m[1],Y=m[5],U=m[9],W=m[13],H=m[2],J=m[6],q=m[10],_=m[14],nt=m[3],rt=m[7],at=m[11],vt=m[15];return this.setValues(x*K+y*b+T*H+C*nt,S*K+E*b+M*H+R*nt,L*K+O*b+F*H+D*nt,B*K+N*b+V*H+X*nt,x*Z+y*Y+T*J+C*rt,S*Z+E*Y+M*J+R*rt,L*Z+O*Y+F*J+D*rt,B*Z+N*Y+V*J+X*rt,x*G+y*U+T*q+C*at,S*G+E*U+M*q+R*at,L*G+O*U+F*q+D*at,B*G+N*U+V*q+X*at,x*w+y*W+T*_+C*vt,S*w+E*W+M*_+R*vt,L*w+O*W+F*_+D*vt,B*w+N*W+V*_+X*vt)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,p,g){var m=this.val;return m[12]=m[0]*v+m[4]*p+m[8]*g+m[12],m[13]=m[1]*v+m[5]*p+m[9]*g+m[13],m[14]=m[2]*v+m[6]*p+m[10]*g+m[14],m[15]=m[3]*v+m[7]*p+m[11]*g+m[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,p,g){var m=this.val;return m[0]=m[0]*v,m[1]=m[1]*v,m[2]=m[2]*v,m[3]=m[3]*v,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(v,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=v.x,T=v.y,C=v.z,S=x*y,E=x*T;return this.setValues(S*y+g,S*T-m*C,S*C+m*T,0,S*T+m*C,E*T+g,E*C-m*y,0,S*C-m*T,E*C+m*y,x*C*C+g,0,0,0,0,1)},rotate:function(v,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<r)return this;T=1/T,m*=T,x*=T,y*=T;var C=Math.sin(v),S=Math.cos(v),E=1-S,M=g[0],R=g[1],L=g[2],O=g[3],F=g[4],D=g[5],B=g[6],N=g[7],V=g[8],X=g[9],K=g[10],Z=g[11],G=g[12],w=g[13],b=g[14],Y=g[15],U=m*m*E+S,W=x*m*E+y*C,H=y*m*E-x*C,J=m*x*E-y*C,q=x*x*E+S,_=y*x*E+m*C,nt=m*y*E+x*C,rt=x*y*E-m*C,at=y*y*E+S;return this.setValues(M*U+F*W+V*H,R*U+D*W+X*H,L*U+B*W+K*H,O*U+N*W+Z*H,M*J+F*q+V*_,R*J+D*q+X*_,L*J+B*q+K*_,O*J+N*q+Z*_,M*nt+F*rt+V*at,R*nt+D*rt+X*at,L*nt+B*rt+K*at,O*nt+N*rt+Z*at,G,w,b,Y)},rotateX:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[4],y=p[5],T=p[6],C=p[7],S=p[8],E=p[9],M=p[10],R=p[11];return p[4]=x*m+S*g,p[5]=y*m+E*g,p[6]=T*m+M*g,p[7]=C*m+R*g,p[8]=S*m-x*g,p[9]=E*m-y*g,p[10]=M*m-T*g,p[11]=R*m-C*g,this},rotateY:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],C=p[3],S=p[8],E=p[9],M=p[10],R=p[11];return p[0]=x*m-S*g,p[1]=y*m-E*g,p[2]=T*m-M*g,p[3]=C*m-R*g,p[8]=x*g+S*m,p[9]=y*g+E*m,p[10]=T*g+M*m,p[11]=C*g+R*m,this},rotateZ:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],C=p[3],S=p[4],E=p[5],M=p[6],R=p[7];return p[0]=x*m+S*g,p[1]=y*m+E*g,p[2]=T*m+M*g,p[3]=C*m+R*g,p[4]=S*m-x*g,p[5]=E*m-y*g,p[6]=M*m-T*g,p[7]=R*m-C*g,this},fromRotationTranslation:function(v,p){var g=v.x,m=v.y,x=v.z,y=v.w,T=g+g,C=m+m,S=x+x,E=g*T,M=g*C,R=g*S,L=m*C,O=m*S,F=x*S,D=y*T,B=y*C,N=y*S;return this.setValues(1-(L+F),M+N,R-B,0,M-N,1-(E+F),O+D,0,R+B,O-D,1-(E+L),0,p.x,p.y,p.z,1)},fromQuat:function(v){var p=v.x,g=v.y,m=v.z,x=v.w,y=p+p,T=g+g,C=m+m,S=p*y,E=p*T,M=p*C,R=g*T,L=g*C,O=m*C,F=x*y,D=x*T,B=x*C;return this.setValues(1-(R+O),E+B,M-D,0,E-B,1-(S+O),L+F,0,M+D,L-F,1-(S+R),0,0,0,0,1)},frustum:function(v,p,g,m,x,y){var T=1/(p-v),C=1/(m-g),S=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*C,0,0,(p+v)*T,(m+g)*C,(y+x)*S,-1,0,0,y*x*2*S,0)},perspective:function(v,p,g,m){var x=1/Math.tan(v/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(v,p,g,m){return this.setValues(2*g/v,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(v,p,g,m,x,y){var T=v-p,C=g-m,S=x-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(v+p)*T,(m+g)*C,(y+x)*S,1)},lookAtRH:function(v,p,g){var m=this.val;return f.subVectors(v,p),f.getLengthSquared()===0&&(f.z=1),f.normalize(),u.crossVectors(g,f),u.getLengthSquared()===0&&(Math.abs(g.z)===1?f.x+=1e-4:f.z+=1e-4,f.normalize(),u.crossVectors(g,f)),u.normalize(),c.crossVectors(f,u),m[0]=u.x,m[1]=u.y,m[2]=u.z,m[4]=c.x,m[5]=c.y,m[6]=c.z,m[8]=f.x,m[9]=f.y,m[10]=f.z,this},lookAt:function(v,p,g){var m=v.x,x=v.y,y=v.z,T=g.x,C=g.y,S=g.z,E=p.x,M=p.y,R=p.z;if(Math.abs(m-E)<r&&Math.abs(x-M)<r&&Math.abs(y-R)<r)return this.identity();var L=m-E,O=x-M,F=y-R,D=1/Math.sqrt(L*L+O*O+F*F);L*=D,O*=D,F*=D;var B=C*F-S*O,N=S*L-T*F,V=T*O-C*L;D=Math.sqrt(B*B+N*N+V*V),D?(D=1/D,B*=D,N*=D,V*=D):(B=0,N=0,V=0);var X=O*V-F*N,K=F*B-L*V,Z=L*N-O*B;return D=Math.sqrt(X*X+K*K+Z*Z),D?(D=1/D,X*=D,K*=D,Z*=D):(X=0,K=0,Z=0),this.setValues(B,X,L,0,N,K,O,0,V,Z,F,0,-(B*m+N*x+V*y),-(X*m+K*x+Z*y),-(L*m+O*x+F*y),1)},yawPitchRoll:function(v,p,g){this.zero(),l.zero(),a.zero();var m=this.val,x=l.val,y=a.val,T=Math.sin(g),C=Math.cos(g);return m[10]=1,m[15]=1,m[0]=C,m[1]=T,m[4]=-T,m[5]=C,T=Math.sin(p),C=Math.cos(p),x[0]=1,x[15]=1,x[5]=C,x[10]=C,x[9]=-T,x[6]=T,T=Math.sin(v),C=Math.cos(v),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(l),this.multiplyLocal(a),this},setWorldMatrix:function(v,p,g,m,x){return this.yawPitchRoll(v.y,v.x,v.z),l.scaling(g.x,g.y,g.z),a.xyz(p.x,p.y,p.z),this.multiplyLocal(l),this.multiplyLocal(a),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(v,p){var g=this.val,m=v.val,x=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],M=g[6],R=g[7],L=g[8],O=g[9],F=g[10],D=g[11],B=g[12],N=g[13],V=g[14],X=g[15],K=m[0],Z=m[1],G=m[2],w=m[3],b=m[4],Y=m[5],U=m[6],W=m[7],H=m[8],J=m[9],q=m[10],_=m[11],nt=m[12],rt=m[13],at=m[14],vt=m[15];return p.setValues(K*x+Z*S+G*L+w*B,Z*y+Z*E+G*O+w*N,G*T+Z*M+G*F+w*V,w*C+Z*R+G*D+w*X,b*x+Y*S+U*L+W*B,b*y+Y*E+U*O+W*N,b*T+Y*M+U*F+W*V,b*C+Y*R+U*D+W*X,H*x+J*S+q*L+_*B,H*y+J*E+q*O+_*N,H*T+J*M+q*F+_*V,H*C+J*R+q*D+_*X,nt*x+rt*S+at*L+vt*B,nt*y+rt*E+at*O+vt*N,nt*T+rt*M+at*F+vt*V,nt*C+rt*R+at*D+vt*X)},fromRotationXYTranslation:function(v,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(v.x),C=Math.cos(v.x),S=Math.sin(v.y),E=Math.cos(v.y),M=m,R=x,L=y,O=-T,F=0-O*S,D=0-C*S,B=O*E,N=C*E;return g||(M=E*m+S*y,R=F*m+C*x+B*y,L=D*m+T*x+N*y),this.setValues(E,F,D,0,0,C,T,0,S,B,N,0,M,R,L,1)},getMaxScaleOnAxis:function(){var v=this.val,p=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],g=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],m=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(p,g,m))}}),l=new o,a=new o,u=new h,c=new h,f=new h;i.exports=o},function(i,d,e){i.exports={COMPLETE:e(987),DECODED:e(988),DECODED_ALL:e(989),DESTROY:e(990),DETUNE:e(991),GLOBAL_DETUNE:e(992),GLOBAL_MUTE:e(993),GLOBAL_RATE:e(994),GLOBAL_VOLUME:e(995),LOOP:e(996),LOOPED:e(997),MUTE:e(998),PAN:e(999),PAUSE_ALL:e(1e3),PAUSE:e(1001),PLAY:e(1002),RATE:e(1003),RESUME_ALL:e(1004),RESUME:e(1005),SEEK:e(1006),STOP_ALL:e(1007),STOP:e(1008),UNLOCKED:e(1009),VOLUME:e(1010)}},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function c(f,v,p,g,m){var x="png",y;if(a(v)){var T=v;v=l(T,"key"),p=l(T,"url"),y=l(T,"normalMap"),g=l(T,"xhrSettings"),x=l(T,"extension",x),m=l(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var C={type:"image",cache:f.textureManager,extension:x,responseType:"blob",key:v,url:p,xhrSettings:g,config:m};if(r.call(this,f,C),y){var S=new c(f,this.key,y,g,m);S.type="normalMap",this.setLink(S),f.addFile(S)}},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){r.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(c.data),c.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var c,f=this.linkFile;f&&f.state===h.FILE_COMPLETE?(this.type==="image"?c=this.cache.addImage(this.key,this.data,f.data):c=this.cache.addImage(f.key,f.data,this.data),this.pendingDestroy(c),f.pendingDestroy(c)):f||(c=this.cache.addImage(this.key,this.data),this.pendingDestroy(c))}});o.register("image",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,f,v));return this}),i.exports=u},function(i,d){var e=function(n,h){h?n.setCollision(!0,!0,!0,!0,!1):n.resetCollision(!1)};i.exports=e},function(i,d,e){var n=e(164),h=e(0),r=e(11),o=e(15),l=e(1065),a=new h({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,l],initialize:function(c,f,v,p,g){o.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(p,g),this.setPosition(f,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(u,c){this.anims.update(u,c)},play:function(u,c){return this.anims.play(u,c)},playReverse:function(u,c){return this.anims.playReverse(u,c)},playAfterDelay:function(u,c){return this.anims.playAfterDelay(u,c)},playAfterRepeat:function(u,c){return this.anims.playAfterRepeat(u,c)},chain:function(u){return this.anims.chain(u)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});i.exports=a},function(i,d){var e=function(n,h){if(!(h>=n.length)){for(var r=n.length-1,o=n[h],l=h;l<r;l++)n[l]=n[l+1];return n.length=r,o}};i.exports=e},function(i,d,e){i.exports={ADDED_TO_SCENE:e(643),DESTROY:e(644),REMOVED_FROM_SCENE:e(645),VIDEO_COMPLETE:e(646),VIDEO_CREATED:e(647),VIDEO_ERROR:e(648),VIDEO_LOOP:e(649),VIDEO_PLAY:e(650),VIDEO_SEEKED:e(651),VIDEO_SEEKING:e(652),VIDEO_STOP:e(653),VIDEO_TIMEOUT:e(654),VIDEO_UNLOCKED:e(655)}},function(i,d){var e=function(n,h,r,o){return r===void 0&&(r=0),h===0?n:(n-=r,n=h*Math.floor(n/h),o?(r+n)/h:r+n)};i.exports=e},function(i,d){var e=function(n){var h={};for(var r in n)Array.isArray(n[r])?h[r]=n[r].slice(0):h[r]=n[r];return h};i.exports=e},function(i,d){var e=function(n,h,r,o){var l=n.length;if(h<0||h>l||h>=r||r>l||h+r>l){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};i.exports=e},function(i,d){function e(o,l){return String(o).localeCompare(l)}function n(o,l){var a=o.length;if(a<=1)return o;for(var u=new Array(a),c=1;c<a;c*=2){h(o,l,c,u);var f=o;o=u,u=f}return o}function h(o,l,a,u){var c=o.length,f=0,v=a*2,p,g,m,x,y;for(p=0;p<c;p+=v)for(g=p+a,m=g+a,g>c&&(g=c),m>c&&(m=c),x=p,y=g;;)if(x<g&&y<m)l(o[x],o[y])<=0?u[f++]=o[x++]:u[f++]=o[y++];else if(x<g)u[f++]=o[x++];else if(y<m)u[f++]=o[y++];else break}var r=function(o,l){l===void 0&&(l=e);var a=n(o,l);return a!==o&&h(a,null,o.length,o),o};i.exports=r},function(i,d,e){var n=e(134),h=e(205),r=function(o,l){var a=n.Power0;if(typeof o=="string")if(n.hasOwnProperty(o))a=n[o];else{var u="";o.indexOf(".")&&(u=o.substr(o.indexOf(".")+1),u.toLowerCase()==="in"?u="easeIn":u.toLowerCase()==="out"?u="easeOut":u.toLowerCase()==="inout"&&(u="easeInOut")),o=h(o.substr(0,o.indexOf(".")+1)+u),n.hasOwnProperty(o)&&(a=n[o])}else typeof o=="function"?a=o:Array.isArray(o)&&o.length===4;if(!l)return a;var c=l.slice(0);return c.unshift(0),function(f){return c[0]=f,a.apply(this,c)}};i.exports=r},function(i,d,e){var n=e(12),h=function(r,o,l,a,u){var c=r.strokeTint,f=n.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*l);c.TL=f,c.TR=f,c.BL=f,c.BR=f;var v=o.pathData,p=v.length-1,g=o.lineWidth,m=g/2,x=v[0]-a,y=v[1]-u;o.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=v[T]-a,S=v[T+1]-u;r.batchLine(x,y,C,S,m,m,g,T-2,o.closePath?T===p-1:!1),x=C,y=S}};i.exports=h},function(i,d,e){var n=e(0),h=e(115),r=e(476),o=e(477),l=e(56),a=e(47),u=e(181),c=new n({initialize:function(v,p,g,m,x,y){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=l.TRIANGLE,this.x1=v,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(f,v){return h(this,f,v)},getPoint:function(f,v){return r(this,f,v)},getPoints:function(f,v,p){return o(this,f,v,p)},getRandomPoint:function(f){return u(this,f)},setTo:function(f,v,p,g,m,x){return f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=f,this.y1=v,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(f){return f===void 0&&(f=new a),f.setTo(this.x1,this.y1,this.x2,this.y2),f},getLineB:function(f){return f===void 0&&(f=new a),f.setTo(this.x2,this.y2,this.x3,this.y3),f},getLineC:function(f){return f===void 0&&(f=new a),f.setTo(this.x3,this.y3,this.x1,this.y1),f},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(f){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-f:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-f:v=this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(f){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-f:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-f:v=this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(f){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-f:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-f:v=this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(f){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-f:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-f:v=this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}}});i.exports=c},function(i,d){var e={};i.exports=e,function(){e.create=function(n,h){return{x:n||0,y:h||0}},e.clone=function(n){return{x:n.x,y:n.y}},e.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},e.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},e.rotate=function(n,h,r){var o=Math.cos(h),l=Math.sin(h);r||(r={});var a=n.x*o-n.y*l;return r.y=n.x*l+n.y*o,r.x=a,r},e.rotateAbout=function(n,h,r,o){var l=Math.cos(h),a=Math.sin(h);o||(o={});var u=r.x+((n.x-r.x)*l-(n.y-r.y)*a);return o.y=r.y+((n.x-r.x)*a+(n.y-r.y)*l),o.x=u,o},e.normalise=function(n){var h=e.magnitude(n);return h===0?{x:0,y:0}:{x:n.x/h,y:n.y/h}},e.dot=function(n,h){return n.x*h.x+n.y*h.y},e.cross=function(n,h){return n.x*h.y-n.y*h.x},e.cross3=function(n,h,r){return(h.x-n.x)*(r.y-n.y)-(h.y-n.y)*(r.x-n.x)},e.add=function(n,h,r){return r||(r={}),r.x=n.x+h.x,r.y=n.y+h.y,r},e.sub=function(n,h,r){return r||(r={}),r.x=n.x-h.x,r.y=n.y-h.y,r},e.mult=function(n,h){return{x:n.x*h,y:n.y*h}},e.div=function(n,h){return{x:n.x/h,y:n.y/h}},e.perp=function(n,h){return h=h===!0?-1:1,{x:h*-n.y,y:h*n.x}},e.neg=function(n){return{x:-n.x,y:-n.y}},e.angle=function(n,h){return Math.atan2(h.y-n.y,h.x-n.x)},e._temp=[e.create(),e.create(),e.create(),e.create(),e.create(),e.create()]}()},function(i,d){var e={};i.exports=e,function(){e.create=function(n){var h={min:{x:0,y:0},max:{x:0,y:0}};return n&&e.update(h,n),h},e.update=function(n,h,r){n.min.x=Infinity,n.max.x=-Infinity,n.min.y=Infinity,n.max.y=-Infinity;for(var o=0;o<h.length;o++){var l=h[o];l.x>n.max.x&&(n.max.x=l.x),l.x<n.min.x&&(n.min.x=l.x),l.y>n.max.y&&(n.max.y=l.y),l.y<n.min.y&&(n.min.y=l.y)}r&&(r.x>0?n.max.x+=r.x:n.min.x+=r.x,r.y>0?n.max.y+=r.y:n.min.y+=r.y)},e.contains=function(n,h){return h.x>=n.min.x&&h.x<=n.max.x&&h.y>=n.min.y&&h.y<=n.max.y},e.overlaps=function(n,h){return n.min.x<=h.max.x&&n.max.x>=h.min.x&&n.max.y>=h.min.y&&n.min.y<=h.max.y},e.translate=function(n,h){n.min.x+=h.x,n.max.x+=h.x,n.min.y+=h.y,n.max.y+=h.y},e.shift=function(n,h){var r=n.max.x-n.min.x,o=n.max.y-n.min.y;n.min.x=h.x,n.max.x=h.x+r,n.min.y=h.y,n.max.y=h.y+o}}()},function(i,d,e){var n=e(29),h=e(0),r=e(11),o=e(502),l=new h({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(u,c,f,v,p,g,m,x){this.layer=u,this.index=c,this.x=f,this.y=v,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(a,u){return!(a<this.pixelX||u<this.pixelY||a>this.right||u>this.bottom)},copy:function(a){return this.index=a.index,this.alpha=a.alpha,this.properties=a.properties,this.visible=a.visible,this.setFlip(a.flipX,a.flipY),this.tint=a.tint,this.rotation=a.rotation,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(a){var u=this.tilemapLayer;return u?u.tileToWorldX(this.x,a):this.x*this.baseWidth},getRight:function(a){var u=this.tilemapLayer;return u?this.getLeft(a)+this.width*u.scaleX:this.getLeft(a)+this.width},getTop:function(a){var u=this.tilemapLayer;return u?u.tileToWorldY(this.y,a)-(this.height-this.baseHeight)*u.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(a){var u=this.tilemapLayer;return u?this.getTop(a)+this.height*u.scaleY:this.getTop(a)+this.height},getBounds:function(a,u){return u===void 0&&(u=new o),u.x=this.getLeft(),u.y=this.getTop(),u.width=this.getRight()-u.x,u.height=this.getBottom()-u.y,u},getCenterX:function(a){return(this.getLeft(a)+this.getRight(a))/2},getCenterY:function(a){return(this.getTop(a)+this.getBottom(a))/2},intersects:function(a,u,c,f){return!(c<=this.pixelX||f<=this.pixelY||a>=this.right||u>=this.bottom)},isInteresting:function(a,u){return a&&u?this.canCollide||this.hasInterestingFace:a?this.collides:u?this.hasInterestingFace:!1},resetCollision:function(a){if(a===void 0&&(a=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,a){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(a,u,c,f,v){if(u===void 0&&(u=a),c===void 0&&(c=a),f===void 0&&(f=a),v===void 0&&(v=!0),this.collideLeft=a,this.collideRight=u,this.collideUp=c,this.collideDown=f,this.faceLeft=a,this.faceRight=u,this.faceTop=c,this.faceBottom=f,v){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(a,u){return a===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=a,this.collisionCallbackContext=u),this},setSize:function(a,u,c,f){return a!==void 0&&(this.width=a),u!==void 0&&(this.height=u),c!==void 0&&(this.baseWidth=c),f!==void 0&&(this.baseHeight=f),this.updatePixelXY(),this},updatePixelXY:function(){var a=this.layer.orientation;if(a===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(a===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(a===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(a===n.HEXAGONAL){var u=this.layer.hexSideLength,c=(this.baseHeight-u)/2+u;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*c}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var a=this.layer.tilemapLayer;if(a){var u=a.gidMap[this.index];if(u)return u}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var a=this.tilemapLayer;return a?a.tilemap:null}}});i.exports=l},function(i,d,e){var n={};i.exports=n;var h=e(64),r=e(32),o=e(41),l=e(84),a=e(83),u=e(1393);(function(){n.rectangle=function(c,f,v,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:c,y:f},vertices:h.fromPath("L 0 0 L "+v+" 0 L "+v+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=h.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return o.create(r.extend({},m,g))},n.trapezoid=function(c,f,v,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*v,y=v*g,T=y+x,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+C+" 0":S="L 0 0 L "+T+" "+-p+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:c,y:f},vertices:h.fromPath(S)};if(m.chamfer){var M=m.chamfer;E.vertices=h.chamfer(E.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete m.chamfer}return o.create(r.extend({},E,m))},n.circle=function(c,f,v,p,g){p=p||{};var m={label:"Circle Body",circleRadius:v};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,v)));return x%2==1&&(x+=1),n.polygon(c,f,x,v,r.extend({},m,p))},n.polygon=function(c,f,v,p,g){if(g=g||{},v<3)return n.circle(c,f,p,g);for(var m=2*Math.PI/v,x="",y=m*.5,T=0;T<v;T+=1){var C=y+T*m,S=Math.cos(C)*p,E=Math.sin(C)*p;x+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:c,y:f},vertices:h.fromPath(x)};if(g.chamfer){var R=g.chamfer;M.vertices=h.chamfer(M.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete g.chamfer}return o.create(r.extend({},M,g))},n.fromVertices=function(c,f,v,p,g,m,x){var y,T,C,S,E,M;for(p=p||{},T=[],g=typeof g!="undefined"?g:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,u||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(v[0])||(v=[v]),M=0;M<v.length;M+=1)if(S=v[M],C=h.isConvex(S),C||!u)C?S=h.clockwiseSort(S):S=h.hull(S),T.push({position:{x:c,y:f},vertices:S});else{var R=S.map(function(D){return[D.x,D.y]});u.makeCCW(R),m!==!1&&u.removeCollinearPoints(R,m);var L=u.quickDecomp(R);for(E=0;E<L.length;E++){var O=L[E],F=O.map(function(D){return{x:D[0],y:D[1]}});x>0&&h.area(F)<x||T.push({position:h.centre(F),vertices:F})}}for(E=0;E<T.length;E++)T[E]=o.create(r.extend(T[E],p));return g&&n.flagCoincidentParts(T,5),T.length>1?(y=o.create(r.extend({parts:T.slice(0)},p)),o.setPosition(y,{x:c,y:f}),y):T[0]},n.flagCoincidentParts=function(c,f){f===void 0&&(f=5);for(var v=0;v<c.length;v++)for(var p=c[v],g=v+1;g<c.length;g++){var m=c[g];if(l.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var C=0;C<m.vertices.length;C++){var S=a.magnitudeSquared(a.sub(x[(T+1)%x.length],y[C])),E=a.magnitudeSquared(a.sub(x[T],y[(C+1)%y.length]));S<f&&E<f&&(x[T].isInternal=!0,y[C].isInternal=!0)}}return c}})()},function(i,d){var e=function(n){return n.x-n.width*n.originX+n.width*.5};i.exports=e},function(i,d){var e=function(n,h){var r=n.width*n.originX;return n.x=h+r-n.width*.5,n};i.exports=e},function(i,d){var e=function(n){return n.y-n.height*n.originY+n.height*.5};i.exports=e},function(i,d){var e=function(n,h){var r=n.height*n.originY;return n.y=h+r-n.height*.5,n};i.exports=e},function(i,d,e){i.exports={POST_RENDER:e(628),PRE_RENDER:e(629),RENDER:e(630),RESIZE:e(631)}},function(i,d){var e={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};i.exports=e},function(i,d,e){var n=e(74),h=function(r,o,l,a){a===void 0&&(a=r);var u;if(!Array.isArray(o))return u=r.indexOf(o),u!==-1?(n(r,u),l&&l.call(a,o),o):null;for(var c=o.length-1,f=[];c>=0;){var v=o[c];u=r.indexOf(v),u!==-1&&(n(r,u),f.push(v),l&&l.call(a,v)),c--}return f};i.exports=h},function(i,d,e){var n=e(0),h=e(199),r=e(10),o=e(3),l=new n({initialize:function(u){this.type=u,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(a,u){return u===void 0&&(u=32),a.strokePoints(this.getPoints(u))},getBounds:function(a,u){a||(a=new r),u===void 0&&(u=16);var c=this.getLength();u>c&&(u=c/2);var f=Math.max(1,Math.round(c/u));return h(this.getSpacedPoints(f),a)},getDistancePoints:function(a){var u=this.getLength(),c=Math.max(1,u/a);return this.getSpacedPoints(c)},getEndPoint:function(a){return a===void 0&&(a=new o),this.getPointAt(1,a)},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a===void 0&&(a=this.arcLengthDivisions),this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var u=[],c,f=this.getPoint(0,this._tmpVec2A),v=0;u.push(0);for(var p=1;p<=a;p++)c=this.getPoint(p/a,this._tmpVec2B),v+=c.distance(f),u.push(v),f.copy(c);return this.cacheArcLengths=u,u},getPointAt:function(a,u){var c=this.getUtoTmapping(a);return this.getPoint(c,u)},getPoints:function(a,u,c){c===void 0&&(c=[]),a||(u?a=this.getLength()/u:a=this.defaultDivisions);for(var f=0;f<=a;f++)c.push(this.getPoint(f/a));return c},getRandomPoint:function(a){return a===void 0&&(a=new o),this.getPoint(Math.random(),a)},getSpacedPoints:function(a,u,c){c===void 0&&(c=[]),a||(u?a=this.getLength()/u:a=this.defaultDivisions);for(var f=0;f<=a;f++){var v=this.getUtoTmapping(f/a,null,a);c.push(this.getPoint(v))}return c},getStartPoint:function(a){return a===void 0&&(a=new o),this.getPointAt(0,a)},getTangent:function(a,u){u===void 0&&(u=new o);var c=1e-4,f=a-c,v=a+c;return f<0&&(f=0),v>1&&(v=1),this.getPoint(f,this._tmpVec2A),this.getPoint(v,u),u.subtract(this._tmpVec2A).normalize()},getTangentAt:function(a,u){var c=this.getUtoTmapping(a);return this.getTangent(c,u)},getTFromDistance:function(a,u){return a<=0?0:this.getUtoTmapping(0,a,u)},getUtoTmapping:function(a,u,c){var f=this.getLengths(c),v=0,p=f.length,g;u?g=Math.min(u,f[p-1]):g=a*f[p-1];for(var m=0,x=p-1,y;m<=x;)if(v=Math.floor(m+(x-m)/2),y=f[v]-g,y<0)m=v+1;else if(y>0)x=v-1;else{x=v;break}if(v=x,f[v]===g)return v/(p-1);var T=f[v],C=f[v+1],S=C-T,E=(g-T)/S;return(v+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});i.exports=l},function(i,d,e){i.exports={ADD:e(968),COMPLETE:e(969),FILE_COMPLETE:e(970),FILE_KEY_COMPLETE:e(971),FILE_LOAD_ERROR:e(972),FILE_LOAD:e(973),FILE_PROGRESS:e(974),POST_PROCESS:e(975),PROGRESS:e(976),START:e(977)}},function(i,d,e){var n=e(4),h=function(r,o,l){l===void 0&&(l=new n);var a=r.x1,u=r.y1,c=r.x2,f=r.y2,v=o.x1,p=o.y1,g=o.x2,m=o.y2,x=(g-v)*(u-p)-(m-p)*(a-v),y=(c-a)*(u-p)-(f-u)*(a-v),T=(m-p)*(c-a)-(g-v)*(f-u);if(T===0)return!1;var C=x/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(l.x=a+C*(c-a),l.y=u+C*(f-u),!0):!1};i.exports=h},function(i,d){var e=function(n){return Math.atan2(n.y2-n.y1,n.x2-n.x1)};i.exports=e},function(i,d,e){var n=e(18),h=function(r,o,l){return r=n(r,0,1),(l-o)*r+o};i.exports=h},function(i,d){var e=function(n,h,r){return n&&n.hasOwnProperty(h)?n[h]:r};i.exports=e},function(i,d){var e={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};i.exports=e},function(i,d,e){var n=e(0),h=e(315),r=new n({initialize:function(l,a){this.parent=l,this.events=a,a||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(h.DESTROY,this.destroy,this)},get:function(o){var l=this.list;if(Array.isArray(o)){for(var a=[],u=0;u<o.length;u++)a.push(l[o[u]]);return a}else return l[o]},getAll:function(){var o={};for(var l in this.list)this.list.hasOwnProperty(l)&&(o[l]=this.list[l]);return o},query:function(o){var l={};for(var a in this.list)this.list.hasOwnProperty(a)&&a.match(o)&&(l[a]=this.list[a]);return l},set:function(o,l){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,l);for(var a in o)this.setValue(a,o[a]);return this},inc:function(o,l){if(this._frozen)return this;l===void 0&&(l=1);var a=this.get(o);return a===void 0&&(a=0),this.set(o,a+l),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,l){if(this._frozen)return this;if(this.has(o))this.values[o]=l;else{var a=this,u=this.list,c=this.events,f=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return u[o]},set:function(v){if(!a._frozen){var p=u[o];u[o]=v,c.emit(h.CHANGE_DATA,f,o,v,p),c.emit(h.CHANGE_DATA_KEY+o,f,v,p)}}}),u[o]=l,c.emit(h.SET_DATA,f,o,l)}return this},each:function(o,l){for(var a=[this.parent,null,void 0],u=1;u<arguments.length;u++)a.push(arguments[u]);for(var c in this.list)a[1]=c,a[2]=this.list[c],o.apply(l,a);return this},merge:function(o,l){l===void 0&&(l=!0);for(var a in o)o.hasOwnProperty(a)&&(l||!l&&!this.has(a))&&this.setValue(a,o[a]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var l=0;l<o.length;l++)this.removeValue(o[l]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var l=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(h.REMOVE_DATA,this.parent,o,l)}return this},pop:function(o){var l=void 0;return!this._frozen&&this.has(o)&&(l=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(h.REMOVE_DATA,this.parent,o,l)),l},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(h.CHANGE_DATA),this.events.off(h.SET_DATA),this.events.off(h.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var l in this.list)this.list[l]!==void 0&&o++;return o}}});i.exports=r},function(i,d,e){var n=e(0),h=new n({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var l=0;l<o.length;l++)this.set(o[l][0],o[l][1])},set:function(r,o){return this.has(r)||this.size++,this.entries[r]=o,this},get:function(r){if(this.has(r))return this.entries[r]},getArray:function(){var r=[],o=this.entries;for(var l in o)r.push(o[l]);return r},has:function(r){return this.entries.hasOwnProperty(r)},delete:function(r){return this.has(r)&&(delete this.entries[r],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(r){delete this.entries[r]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var r=[],o=this.entries;for(var l in o)r.push(o[l]);return r},dump:function(){var r=this.entries;console.group("Map");for(var o in r)console.log(o,r[o]);console.groupEnd()},each:function(r){var o=this.entries;for(var l in o)if(r(l,o[l])===!1)break;return this},contains:function(r){var o=this.entries;for(var l in o)if(o[l]===r)return!0;return!1},merge:function(r,o){o===void 0&&(o=!1);var l=this.entries,a=r.entries;for(var u in a)l.hasOwnProperty(u)&&o?l[u]=a[u]:this.set(u,a[u]);return this}});i.exports=h},function(i,d){var e=function(n,h,r){return n<<16|h<<8|r};i.exports=e},function(i,d,e){i.exports={ENTER_FULLSCREEN:e(800),FULLSCREEN_FAILED:e(801),FULLSCREEN_UNSUPPORTED:e(802),LEAVE_FULLSCREEN:e(803),ORIENTATION_CHANGE:e(804),RESIZE:e(805)}},function(i,d,e){(function(n){var h={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return h;var o=navigator.userAgent;/Windows/.test(o)?h.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(h.iOS=!0,h.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),h.iOSVersion=parseInt(RegExp.$1,10)):h.macOS=!0:/Android/.test(o)?h.android=!0:/Linux/.test(o)?h.linux=!0:/iP[ao]d|iPhone/i.test(o)?(h.iOS=!0,navigator.appVersion.match(/OS (\d+)/),h.iOSVersion=parseInt(RegExp.$1,10),h.iPhone=o.toLowerCase().indexOf("iphone")!==-1,h.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?h.kindle=!0:/CrOS/.test(o)&&(h.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(h.android=!1,h.iOS=!1,h.macOS=!1,h.windows=!0,h.windowsPhone=!0);var l=/Silk/.test(o);return(h.windows||h.macOS||h.linux&&!l||h.chromeOS)&&(h.desktop=!0),(h.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(h.desktop=!1),navigator.standalone&&(h.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(h.cordova=!0),window.ejecta!==void 0&&(h.ejecta=!0)),typeof n!="undefined"&&n.versions&&n.versions.node&&(h.node=!0),h.node&&typeof n.versions=="object"&&(h.nodeWebkit=!!n.versions["node-webkit"],h.electron=!!n.versions.electron),/Crosswalk/.test(o)&&(h.crosswalk=!0),h.pixelRatio=window.devicePixelRatio||1,h}i.exports=r()}).call(this,e(807))},function(i,d,e){i.exports={ADD:e(861),ERROR:e(862),LOAD:e(863),READY:e(864),REMOVE:e(865)}},function(i,d){var e={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};i.exports=e},function(i,d,e){var n=e(0),h=e(59),r=e(2),o=e(878),l=e(879),a=e(25),u=e(12),c=e(107),f=e(58),v=new n({Extends:f,initialize:function(g){var m=g.game.renderer,x=r(g,"fragShader",o);g.fragShader=u.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=r(g,"vertShader",l),g.attributes=r(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),f.call(this,g),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){f.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=p.frame,S=C.glTexture,E=C.u0,M=C.v0,R=C.u1,L=C.v1,O=C.x,F=C.y,D=C.cutWidth,B=C.cutHeight,N=C.customPivot,V=p.displayOriginX,X=p.displayOriginY,K=-V+O,Z=-X+F;if(p.isCropped){var G=p._crop;(G.flipX!==p.flipX||G.flipY!==p.flipY)&&C.updateCropUVs(G,p.flipX,p.flipY),E=G.u0,M=G.v0,R=G.u1,L=G.v1,D=G.width,B=G.height,O=G.x,F=G.y,K=-V+O,Z=-X+F}var w=1,b=1;p.flipX&&(N||(K+=-C.realWidth+V*2),w=-1),(p.flipY||C.source.isGLTexture&&!S.flipY)&&(N||(Z+=-C.realHeight+X*2),b=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*w,p.scaleY*b),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var Y=K+D,U=Z+B,W=g.roundPixels,H=T.getXRound(K,Z,W),J=T.getYRound(K,Z,W),q=T.getXRound(K,U,W),_=T.getYRound(K,U,W),nt=T.getXRound(Y,U,W),rt=T.getYRound(Y,U,W),at=T.getXRound(Y,Z,W),vt=T.getYRound(Y,Z,W),ut=u.getTintAppendFloatAlpha,ct=g.alpha,Ft=ut(p.tintTopLeft,ct*p._alphaTL),Tt=ut(p.tintTopRight,ct*p._alphaTR),Ct=ut(p.tintBottomLeft,ct*p._alphaBL),dt=ut(p.tintBottomRight,ct*p._alphaBR);this.shouldFlush(6)&&this.flush();var It=this.setGameObject(p,C);this.manager.preBatch(p),this.batchQuad(p,H,J,q,_,nt,rt,at,vt,E,M,R,L,Ft,Tt,Ct,dt,p.tintFill,S,It),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,N,V,X,K,Z,G,w,b,Y,U,W,H,J,q,_,nt){this.manager.set(this,p);var rt=this._tempMatrix1,at=this._tempMatrix2,vt=this._tempMatrix3,ut=V/m+W,ct=X/x+H,Ft=(V+K)/m+W,Tt=(X+Z)/x+H,Ct=C,dt=S,It=-B,gt=-N;if(p.isCropped){var Pt=p._crop,xe=Pt.width,Ge=Pt.height;Ct=xe,dt=Ge,C=xe,S=Ge,V=Pt.x,X=Pt.y;var $t=V,Ut=X;L&&($t=K-Pt.x-xe),O&&(Ut=Z-Pt.y-Ge),ut=$t/m+W,ct=Ut/x+H,Ft=($t+xe)/m+W,Tt=(Ut+Ge)/x+H,It=-B+V,gt=-N+X}O=O^(!_&&g.isRenderTexture?1:0),L&&(Ct*=-1,It+=C),O&&(dt*=-1,gt+=S);var ee=It+Ct,qt=gt+dt;at.applyITRS(y,T,R,E,M),rt.copyFrom(J.matrix),q?(rt.multiplyWithOffset(q,-J.scrollX*F,-J.scrollY*D),at.e=y,at.f=T):(at.e-=J.scrollX*F,at.f-=J.scrollY*D),rt.multiply(at,vt);var ie=J.roundPixels,Pe=vt.getXRound(It,gt,ie),ui=vt.getYRound(It,gt,ie),fi=vt.getXRound(It,qt,ie),di=vt.getYRound(It,qt,ie),vi=vt.getXRound(ee,qt,ie),ci=vt.getYRound(ee,qt,ie),pi=vt.getXRound(ee,gt,ie),fa=vt.getYRound(ee,gt,ie);nt===void 0&&(nt=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,Pe,ui,fi,di,vi,ci,pi,fa,ut,ct,Ft,Tt,G,w,b,Y,U,g,nt),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,M=g+p.width,R=m+p.height;C?S.multiply(C,E):E=S;var L=E.getX(g,m),O=E.getY(g,m),F=E.getX(g,R),D=E.getY(g,R),B=E.getX(M,R),N=E.getY(M,R),V=E.getX(M,m),X=E.getY(M,m),K=this.renderer.setTextureSource(p.source);x=u.getTintAppendFloatAlpha(x,y),this.batchQuad(null,L,O,F,D,B,N,V,X,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,K)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=p+m,E=g+x,M=C.getX(p,g),R=C.getY(p,g),L=C.getX(p,E),O=C.getY(p,E),F=C.getX(S,E),D=C.getY(S,E),B=C.getX(S,g),N=C.getY(S,g),V=this.fillTint;this.batchQuad(null,M,R,L,O,F,D,B,N,0,0,1,1,V.TL,V.TR,V.BL,V.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var M=E.getX(p,g),R=E.getY(p,g),L=E.getX(m,x),O=E.getY(m,x),F=E.getX(y,T),D=E.getY(y,T),B=this.fillTint;this.batchTri(null,M,R,L,O,F,D,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,C,S,E){var M=this.tempTriangle;M[0].x=p,M[0].y=g,M[0].width=C,M[1].x=m,M[1].y=x,M[1].width=C,M[2].x=y,M[2].y=T,M[2].width=C,M[3].x=p,M[3].y=g,M[3].width=C,this.batchStrokePath(M,C,!1,S,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,C,S,E=this.fillTint.TL,M=this.fillTint.TR,R=this.fillTint.BL,L=0;L<y;++L)S=p[L],T.push(S.x,S.y);C=h(T),y=C.length;for(var O=0;O<y;O+=3){var F=C[O+0]*2,D=C[O+1]*2,B=C[O+2]*2,N=T[F+0],V=T[F+1],X=T[D+0],K=T[D+1],Z=T[B+0],G=T[B+1],w=x.getX(N,V),b=x.getY(N,V),Y=x.getX(X,K),U=x.getY(X,K),W=x.getX(Z,G),H=x.getY(Z,G);this.batchTri(null,w,b,Y,U,W,H,0,0,1,1,E,M,R,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,C=0;C<T;C++){var S=p[C],E=p[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!m&&C===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,C,S,E,M,R){this.renderer.pipelines.set(this);var L=this.calcMatrix;R&&R.multiply(M,L);var O=m-p,F=x-g,D=Math.sqrt(O*O+F*F),B=y*(x-g)/D,N=y*(p-m)/D,V=T*(x-g)/D,X=T*(p-m)/D,K=m-V,Z=x-X,G=p-B,w=g-N,b=m+V,Y=x+X,U=p+B,W=g+N,H=L.getX(K,Z),J=L.getY(K,Z),q=L.getX(G,w),_=L.getY(G,w),nt=L.getX(b,Y),rt=L.getY(b,Y),at=L.getX(U,W),vt=L.getY(U,W),ut=this.strokeTint,ct=ut.TL,Ft=ut.TR,Tt=ut.BL,Ct=ut.BR;if(this.batchQuad(null,at,vt,q,_,H,J,nt,rt,0,0,1,1,ct,Ft,Tt,Ct,2),!(C<=2)){var dt=this.prevQuad,It=this.firstQuad;S>0&&dt[4]?this.batchQuad(null,at,vt,q,_,dt[0],dt[1],dt[2],dt[3],0,0,1,1,ct,Ft,Tt,Ct,2):(It[0]=at,It[1]=vt,It[2]=q,It[3]=_,It[4]=1),E&&It[4]?this.batchQuad(null,H,J,nt,rt,It[0],It[1],It[2],It[3],0,0,1,1,ct,Ft,Tt,Ct,2):(dt[0]=H,dt[1]=J,dt[2]=nt,dt[3]=rt,dt[4]=1)}}});i.exports=v},function(i,d,e){var n=e(0),h=e(18),r=e(17),o=new n({initialize:function(a,u,c,f,v,p,g){this.texture=a,this.name=u,this.source=a.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,f,v)},setSize:function(l,a,u,c){u===void 0&&(u=0),c===void 0&&(c=0),this.cutX=u,this.cutY=c,this.cutWidth=l,this.cutHeight=a,this.width=l,this.height=a,this.halfWidth=Math.floor(l*.5),this.halfHeight=Math.floor(a*.5),this.centerX=Math.floor(l/2),this.centerY=Math.floor(a/2);var f=this.data,v=f.cut;v.x=u,v.y=c,v.w=l,v.h=a,v.r=u+l,v.b=c+a,f.sourceSize.w=l,f.sourceSize.h=a,f.spriteSourceSize.w=l,f.spriteSourceSize.h=a,f.radius=.5*Math.sqrt(l*l+a*a);var p=f.drawImage;return p.x=u,p.y=c,p.width=l,p.height=a,this.updateUVs()},setTrim:function(l,a,u,c,f,v){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=l,p.sourceSize.h=a,g.x=u,g.y=c,g.w=f,g.h=v,g.r=u+f,g.b=c+v,this.x=u,this.y=c,this.width=f,this.height=v,this.halfWidth=f*.5,this.halfHeight=v*.5,this.centerX=Math.floor(f/2),this.centerY=Math.floor(v/2),this.updateUVs()},setCropUVs:function(l,a,u,c,f,v,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;a=h(a,0,T),u=h(u,0,C),c=h(c,0,T-a),f=h(f,0,C-u);var S=g+a,E=m+u,M=c,R=f,L=this.data;if(L.trim){var O=L.spriteSourceSize;c=h(c,0,x-a),f=h(f,0,y-u);var F=a+c,D=u+f,B=!(O.r<a||O.b<u||O.x>F||O.y>D);if(B){var N=Math.max(O.x,a),V=Math.max(O.y,u),X=Math.min(O.r,F)-N,K=Math.min(O.b,D)-V;M=X,R=K,v?S=g+(x-(N-O.x)-X):S=g+(N-O.x),p?E=m+(y-(V-O.y)-K):E=m+(V-O.y),a=N,u=V,c=X,f=K}else S=0,E=0,M=0,R=0}else v&&(S=g+(x-a-c)),p&&(E=m+(y-u-f));var Z=this.source.width,G=this.source.height;return l.u0=Math.max(0,S/Z),l.v0=Math.max(0,E/G),l.u1=Math.min(1,(S+M)/Z),l.v1=Math.min(1,(E+R)/G),l.x=a,l.y=u,l.cx=S,l.cy=E,l.cw=M,l.ch=R,l.width=c,l.height=f,l.flipX=v,l.flipY=p,l},updateCropUVs:function(l,a,u){return this.setCropUVs(l,l.x,l.y,l.width,l.height,a,u)},setUVs:function(l,a,u,c,f,v){var p=this.data.drawImage;return p.width=l,p.height=a,this.u0=u,this.v0=c,this.u1=f,this.v1=v,this},updateUVs:function(){var l=this.cutX,a=this.cutY,u=this.cutWidth,c=this.cutHeight,f=this.data.drawImage;f.width=u,f.height=c;var v=this.source.width,p=this.source.height;return this.u0=l/v,this.v0=a/p,this.u1=(l+u)/v,this.v1=(a+c)/p,this},updateUVsInverted:function(){var l=this.source.width,a=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/a,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/a,this},clone:function(){var l=new o(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=r(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});i.exports=o},function(i,d,e){var n=e(208),h=e(0),r=e(1),o=e(79),l=new h({initialize:function(u){this.parent=u,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(a,u){return u?n.Add(this.list,a):n.Add(this.list,a,0,this.addCallback,this)},addAt:function(a,u,c){return c?n.AddAt(this.list,a,u):n.AddAt(this.list,a,u,0,this.addCallback,this)},getAt:function(a){return this.list[a]},getIndex:function(a){return this.list.indexOf(a)},sort:function(a,u){return a?(u===void 0&&(u=function(c,f){return c[a]-f[a]}),o(this.list,u),this):this},getByName:function(a){return n.GetFirst(this.list,"name",a)},getRandom:function(a,u){return n.GetRandom(this.list,a,u)},getFirst:function(a,u,c,f){return n.GetFirst(this.list,a,u,c,f)},getAll:function(a,u,c,f){return n.GetAll(this.list,a,u,c,f)},count:function(a,u){return n.CountAllMatching(this.list,a,u)},swap:function(a,u){n.Swap(this.list,a,u)},moveTo:function(a,u){return n.MoveTo(this.list,a,u)},moveAbove:function(a,u){return n.MoveAbove(this.list,a,u)},moveBelow:function(a,u){return n.MoveBelow(this.list,a,u)},remove:function(a,u){return u?n.Remove(this.list,a):n.Remove(this.list,a,this.removeCallback,this)},removeAt:function(a,u){return u?n.RemoveAt(this.list,a):n.RemoveAt(this.list,a,this.removeCallback,this)},removeBetween:function(a,u,c){return c?n.RemoveBetween(this.list,a,u):n.RemoveBetween(this.list,a,u,this.removeCallback,this)},removeAll:function(a){for(var u=this.list.length;u--;)this.remove(this.list[u],a);return this},bringToTop:function(a){return n.BringToTop(this.list,a)},sendToBack:function(a){return n.SendToBack(this.list,a)},moveUp:function(a){return n.MoveUp(this.list,a),a},moveDown:function(a){return n.MoveDown(this.list,a),a},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(a,u){return n.Replace(this.list,a,u)},exists:function(a){return this.list.indexOf(a)>-1},setAll:function(a,u,c,f){return n.SetAll(this.list,a,u,c,f),this},each:function(a,u){for(var c=[null],f=2;f<arguments.length;f++)c.push(arguments[f]);for(f=0;f<this.list.length;f++)c[0]=this.list[f],a.apply(u,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});i.exports=l},function(i,d,e){var n=e(0),h=e(112),r=e(445),o=e(446),l=e(56),a=e(180),u=new n({initialize:function(f,v,p,g){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=l.ELLIPSE,this.x=f,this.y=v,this.width=p,this.height=g},contains:function(c,f){return h(this,c,f)},getPoint:function(c,f){return r(this,c,f)},getPoints:function(c,f,v){return o(this,c,f,v)},getRandomPoint:function(c){return a(this,c)},setTo:function(c,f,v,p){return this.x=c,this.y=f,this.width=v,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,f){return f===void 0&&(f=c),this.x=c,this.y=f,this},setSize:function(c,f){return f===void 0&&(f=c),this.width=c,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});i.exports=u},function(i,d){var e=function(n,h,r){if(n.width<=0||n.height<=0)return!1;var o=(h-n.x)/n.width,l=(r-n.y)/n.height;return o*=o,l*=l,o+l<.25};i.exports=e},function(i,d,e){var n=e(275),h=e(0),r=e(75),o=e(9),l=e(207),a=e(2),u=e(6),c=e(7),f=e(437),v=e(149),p=e(73),g=new h({Extends:o,initialize:function(x,y,T){o.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?c(y[0])&&(T=y,y=null):c(y)&&(T=y,y=null),this.scene=x,this.children=new v,this.isParent=!0,this.type="Group",this.classType=a(T,"classType",p),this.name=a(T,"name",""),this.active=a(T,"active",!0),this.maxSize=a(T,"maxSize",-1),this.defaultKey=a(T,"defaultKey",null),this.defaultFrame=a(T,"defaultFrame",null),this.runChildUpdate=a(T,"runChildUpdate",!1),this.createCallback=a(T,"createCallback",null),this.removeCallback=a(T,"removeCallback",null),this.createMultipleCallback=a(T,"createMultipleCallback",null),this.internalCreateCallback=a(T,"internalCreateCallback",null),this.internalRemoveCallback=a(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,C,S){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=a(m,"classType",this.classType);var x=a(m,"key",void 0),y=a(m,"frame",null),T=a(m,"visible",!0),C=a(m,"active",!0),S=[];if(x===void 0)return S;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=a(m,"repeat",0),M=a(m,"randomKey",!1),R=a(m,"randomFrame",!1),L=a(m,"yoyo",!1),O=a(m,"quantity",!1),F=a(m,"frameQuantity",1),D=a(m,"max",0),B=f(x,y,{max:D,qty:O||F,random:M,randomB:R,repeat:E,yoyo:L});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var N=0;N<B.length;N++){var V=this.create(0,0,B[N].a,B[N].b,T,C);if(!V)break;S.push(V)}var X=u(m,"setXY.x",0),K=u(m,"setXY.y",0),Z=u(m,"setXY.stepX",0),G=u(m,"setXY.stepY",0);n.SetXY(S,X,K,Z,G);var w=u(m,"setRotation.value",0),b=u(m,"setRotation.step",0);n.SetRotation(S,w,b);var Y=u(m,"setScale.x",1),U=u(m,"setScale.y",Y),W=u(m,"setScale.stepX",0),H=u(m,"setScale.stepY",0);n.SetScale(S,Y,U,W,H);var J=u(m,"setOrigin.x",.5),q=u(m,"setOrigin.y",J),_=u(m,"setOrigin.stepX",0),nt=u(m,"setOrigin.stepY",0);n.SetOrigin(S,J,q,_,nt);var rt=u(m,"setAlpha.value",1),at=u(m,"setAlpha.step",0);n.SetAlpha(S,rt,at);var vt=u(m,"setDepth.value",0),ut=u(m,"setDepth.step",0);n.SetDepth(S,vt,ut);var ct=u(m,"setScrollFactor.x",1),Ft=u(m,"setScrollFactor.y",ct),Tt=u(m,"setScrollFactor.stepX",0),Ct=u(m,"setScrollFactor.stepY",0);n.SetScrollFactor(S,ct,Ft,Tt,Ct);var dt=a(m,"hitArea",null),It=a(m,"hitAreaCallback",null);dt&&n.SetHitArea(S,dt,It);var gt=a(m,"gridAlign",!1);return gt&&n.GridAlign(S,gt),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(r.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(r.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(r.DESTROY,this.remove,this),x?C.destroy():m&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return l(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,C,S,E){return this.getHandler(!0,1,m,x,y,T,C,S,E)},getFirstNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!0,m,x,y,T,C,S,E,M)},getLast:function(m,x,y,T,C,S,E){return this.getHandler(!1,1,m,x,y,T,C,S,E)},getLastNth:function(m,x,y,T,C,S,E,M){return this.getHandler(!1,m,x,y,T,C,S,E,M)},getHandler:function(m,x,y,T,C,S,E,M,R){y===void 0&&(y=!1),T===void 0&&(T=!1);var L,O,F=0,D=this.children.entries;if(m)for(O=0;O<D.length;O++)if(L=D[O],L.active===y){if(F++,F===x)break}else L=null;else for(O=D.length-1;O>=0;O--)if(L=D[O],L.active===y){if(F++,F===x)break}else L=null;return L?(typeof C=="number"&&(L.x=C),typeof S=="number"&&(L.y=S),L):T?this.create(C,S,E,M,R):null},get:function(m,x,y,T,C){return this.getFirst(!1,!0,m,x,y,T,C)},getFirstAlive:function(m,x,y,T,C,S){return this.getFirst(!0,m,x,y,T,C,S)},getFirstDead:function(m,x,y,T,C,S){return this.getFirst(!1,m,x,y,T,C,S)},playAnimation:function(m,x){return n.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,C){return n.PropertyValueSet(this.children.entries,m,x,y,T,C),this},propertyValueInc:function(m,x,y,T,C){return n.PropertyValueInc(this.children.entries,m,x,y,T,C),this},setX:function(m,x){return n.SetX(this.children.entries,m,x),this},setY:function(m,x){return n.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return n.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return n.IncX(this.children.entries,m,x),this},incY:function(m,x){return n.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return n.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return n.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return n.Angle(this.children.entries,m,x),this},rotate:function(m,x){return n.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return n.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return n.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return n.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return n.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return n.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return n.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return n.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return n.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return n.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return n.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return n.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return n.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});i.exports=g},function(i,d,e){var n=e(12),h=function(r,o,l,a,u,c){for(var f=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*a),v=l.pathData,p=l.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=v[m+0]-u,C=v[m+1]-c,S=v[x+0]-u,E=v[x+1]-c,M=v[y+0]-u,R=v[y+1]-c,L=o.getX(T,C),O=o.getY(T,C),F=o.getX(S,E),D=o.getY(S,E),B=o.getX(M,R),N=o.getY(M,R);r.batchTri(l,L,O,F,D,B,N,0,0,1,1,f,f,f,2)}};i.exports=h},function(i,d){var e=function(n,h,r){var o=n.x3-n.x1,l=n.y3-n.y1,a=n.x2-n.x1,u=n.y2-n.y1,c=h-n.x1,f=r-n.y1,v=o*o+l*l,p=o*a+l*u,g=o*c+l*f,m=a*a+u*u,x=a*c+u*f,y=v*m-p*p,T=y===0?0:1/y,C=(m*g-p*x)*T,S=(v*x-p*g)*T;return C>=0&&S>=0&&C+S<1};i.exports=e},function(i,d,e){var n=e(0),h=e(10),r=e(3);function o(a,u,c,f){var v=a-c,p=u-f,g=v*v+p*p;return Math.sqrt(g)}var l=new n({initialize:function(u,c,f){this.vertex1=u,this.vertex2=c,this.vertex3=f,this.bounds=new h,this._inCenter=new r},getInCenter:function(a){a===void 0&&(a=!0);var u=this.vertex1,c=this.vertex2,f=this.vertex3,v,p,g,m,x,y;a?(v=u.x,p=u.y,g=c.x,m=c.y,x=f.x,y=f.y):(v=u.vx,p=u.vy,g=c.vx,m=c.vy,x=f.vx,y=f.vy);var T=o(x,y,g,m),C=o(v,p,x,y),S=o(g,m,v,p),E=T+C+S;return this._inCenter.set((v*T+g*C+x*S)/E,(p*T+m*C+y*S)/E)},contains:function(a,u,c){var f=this.vertex1,v=this.vertex2,p=this.vertex3,g=f.vx,m=f.vy,x=v.vx,y=v.vy,T=p.vx,C=p.vy;if(c){var S=c.a,E=c.b,M=c.c,R=c.d,L=c.e,O=c.f;g=f.vx*S+f.vy*M+L,m=f.vx*E+f.vy*R+O,x=v.vx*S+v.vy*M+L,y=v.vx*E+v.vy*R+O,T=p.vx*S+p.vy*M+L,C=p.vx*E+p.vy*R+O}var F=T-g,D=C-m,B=x-g,N=y-m,V=a-g,X=u-m,K=F*F+D*D,Z=F*B+D*N,G=F*V+D*X,w=B*B+N*N,b=B*V+N*X,Y=K*w-Z*Z,U=Y===0?0:1/Y,W=(w*G-Z*b)*U,H=(K*b-Z*G)*U;return W>=0&&H>=0&&W+H<1},isCounterClockwise:function(a){var u=this.vertex1,c=this.vertex2,f=this.vertex3,v=(c.vx-u.vx)*(f.vy-u.vy)-(c.vy-u.vy)*(f.vx-u.vx);return a<=0?v>=0:v<0},load:function(a,u,c,f,v){return c=this.vertex1.load(a,u,c,f,v),c=this.vertex2.load(a,u,c,f,v),c=this.vertex3.load(a,u,c,f,v),c},transformCoordinatesLocal:function(a,u,c,f){return this.vertex1.transformCoordinatesLocal(a,u,c,f),this.vertex2.transformCoordinatesLocal(a,u,c,f),this.vertex3.transformCoordinatesLocal(a,u,c,f),this},updateBounds:function(){var a=this.vertex1,u=this.vertex2,c=this.vertex3,f=this.bounds;return f.x=Math.min(a.vx,u.vx,c.vx),f.y=Math.min(a.vy,u.vy,c.vy),f.width=Math.max(a.vx,u.vx,c.vx)-f.x,f.height=Math.max(a.vy,u.vy,c.vy)-f.y,this},isInView:function(a,u,c,f,v,p,g,m,x,y,T){var C=this.vertex1.update(v,p,g,m,x,y,T,f),S=this.vertex2.update(v,p,g,m,x,y,T,f),E=this.vertex3.update(v,p,g,m,x,y,T,f);if(C.ta<=0&&S.ta<=0&&E.ta<=0||u&&!this.isCounterClockwise(c))return!1;var M=this.bounds;M.x=Math.min(C.tx,S.tx,E.tx),M.y=Math.min(C.ty,S.ty,E.ty),M.width=Math.max(C.tx,S.tx,E.tx)-M.x,M.height=Math.max(C.ty,S.ty,E.ty)-M.y;var R=a.x+a.width,L=a.y+a.height;return M.width<=0||M.height<=0||a.width<=0||a.height<=0?!1:!(M.right<a.x||M.bottom<a.y||M.x>R||M.y>L)},translate:function(a,u){u===void 0&&(u=0);var c=this.vertex1,f=this.vertex2,v=this.vertex3;return c.x+=a,c.y+=u,f.x+=a,f.y+=u,v.x+=a,v.y+=u,this},x:{get:function(){return this.getInCenter().x},set:function(a){var u=this.getInCenter();this.translate(a-u.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(a){var u=this.getInCenter();this.translate(0,a-u.y)}},alpha:{get:function(){var a=this.vertex1,u=this.vertex2,c=this.vertex3;return(a.alpha+u.alpha+c.alpha)/3},set:function(a){this.vertex1.alpha=a,this.vertex2.alpha=a,this.vertex3.alpha=a}},depth:{get:function(){var a=this.vertex1,u=this.vertex2,c=this.vertex3;return(a.vz+u.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});i.exports=l},function(i,d,e){var n=e(0),h=e(12),r=e(39),o=new n({Extends:r,initialize:function(a,u,c,f,v,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),r.call(this,a,u,c),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=f,this.v=v,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(l,a){return this.u=l,this.v=a,this},transformCoordinatesLocal:function(l,a,u,c){var f=this.x,v=this.y,p=this.z,g=l.val,m=f*g[0]+v*g[4]+p*g[8]+g[12],x=f*g[1]+v*g[5]+p*g[9]+g[13],y=f*g[2]+v*g[6]+p*g[10]+g[14],T=f*g[3]+v*g[7]+p*g[11]+g[15];this.vx=m/T*a,this.vy=-(x/T)*u,c<=0?this.vz=y/T:this.vz=-(y/T)},update:function(l,a,u,c,f,v,p,g){var m=this.vx*l+this.vy*u+f,x=this.vx*a+this.vy*c+v;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(l,a,u,c,f){return l[++u]=this.tx,l[++u]=this.ty,l[++u]=this.u,l[++u]=this.v,l[++u]=c,l[++u]=f,a[++u]=h.getTintAppendFloatAlpha(this.color,this.ta),u}});i.exports=o},function(i,d,e){var n={};i.exports=n;var h=e(166),r=e(32),o=e(84),l=e(41);(function(){n.create=function(a){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},a)},n.setModified=function(a,u,c,f){if(h.trigger(a,"compositeModified",a),a.isModified=u,c&&a.parent&&n.setModified(a.parent,u,c,f),f)for(var v=0;v<a.composites.length;v++){var p=a.composites[v];n.setModified(p,u,c,f)}},n.add=function(a,u){var c=[].concat(u);h.trigger(a,"beforeAdd",{object:u});for(var f=0;f<c.length;f++){var v=c[f];switch(v.type){case"body":if(v.parent!==v){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(a,v);break;case"constraint":n.addConstraint(a,v);break;case"composite":n.addComposite(a,v);break;case"mouseConstraint":n.addConstraint(a,v.constraint);break}}return h.trigger(a,"afterAdd",{object:u}),a},n.remove=function(a,u,c){var f=[].concat(u);h.trigger(a,"beforeRemove",{object:u});for(var v=0;v<f.length;v++){var p=f[v];switch(p.type){case"body":n.removeBody(a,p,c);break;case"constraint":n.removeConstraint(a,p,c);break;case"composite":n.removeComposite(a,p,c);break;case"mouseConstraint":n.removeConstraint(a,p.constraint);break}}return h.trigger(a,"afterRemove",{object:u}),a},n.addComposite=function(a,u){return a.composites.push(u),u.parent=a,n.setModified(a,!0,!0,!1),a},n.removeComposite=function(a,u,c){var f=a.composites.indexOf(u);if(f!==-1&&(n.removeCompositeAt(a,f),n.setModified(a,!0,!0,!1)),c)for(var v=0;v<a.composites.length;v++)n.removeComposite(a.composites[v],u,!0);return a},n.removeCompositeAt=function(a,u){return a.composites.splice(u,1),n.setModified(a,!0,!0,!1),a},n.addBody=function(a,u){return a.bodies.push(u),n.setModified(a,!0,!0,!1),a},n.removeBody=function(a,u,c){var f=a.bodies.indexOf(u);if(f!==-1&&(n.removeBodyAt(a,f),n.setModified(a,!0,!0,!1)),c)for(var v=0;v<a.composites.length;v++)n.removeBody(a.composites[v],u,!0);return a},n.removeBodyAt=function(a,u){return a.bodies.splice(u,1),n.setModified(a,!0,!0,!1),a},n.addConstraint=function(a,u){return a.constraints.push(u),n.setModified(a,!0,!0,!1),a},n.removeConstraint=function(a,u,c){var f=a.constraints.indexOf(u);if(f!==-1&&n.removeConstraintAt(a,f),c)for(var v=0;v<a.composites.length;v++)n.removeConstraint(a.composites[v],u,!0);return a},n.removeConstraintAt=function(a,u){return a.constraints.splice(u,1),n.setModified(a,!0,!0,!1),a},n.clear=function(a,u,c){if(c)for(var f=0;f<a.composites.length;f++)n.clear(a.composites[f],u,!0);return u?a.bodies=a.bodies.filter(function(v){return v.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,n.setModified(a,!0,!0,!1),a},n.allBodies=function(a){for(var u=[].concat(a.bodies),c=0;c<a.composites.length;c++)u=u.concat(n.allBodies(a.composites[c]));return u},n.allConstraints=function(a){for(var u=[].concat(a.constraints),c=0;c<a.composites.length;c++)u=u.concat(n.allConstraints(a.composites[c]));return u},n.allComposites=function(a){for(var u=[].concat(a.composites),c=0;c<a.composites.length;c++)u=u.concat(n.allComposites(a.composites[c]));return u},n.get=function(a,u,c){var f,v;switch(c){case"body":f=n.allBodies(a);break;case"constraint":f=n.allConstraints(a);break;case"composite":f=n.allComposites(a).concat(a);break}return f?(v=f.filter(function(p){return p.id.toString()===u.toString()}),v.length===0?null:v[0]):null},n.move=function(a,u,c){return n.remove(a,u),n.add(c,u),a},n.rebase=function(a){for(var u=n.allBodies(a).concat(n.allConstraints(a)).concat(n.allComposites(a)),c=0;c<u.length;c++)u[c].id=r.nextId();return n.setModified(a,!0,!0,!1),a},n.translate=function(a,u,c){for(var f=c?n.allBodies(a):a.bodies,v=0;v<f.length;v++)l.translate(f[v],u);return n.setModified(a,!0,!0,!1),a},n.rotate=function(a,u,c,f){for(var v=Math.cos(u),p=Math.sin(u),g=f?n.allBodies(a):a.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-c.x,T=x.position.y-c.y;l.setPosition(x,{x:c.x+(y*v-T*p),y:c.y+(y*p+T*v)}),l.rotate(x,u)}return n.setModified(a,!0,!0,!1),a},n.scale=function(a,u,c,f,v){for(var p=v?n.allBodies(a):a.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-f.x,y=m.position.y-f.y;l.setPosition(m,{x:f.x+x*u,y:f.y+y*c}),l.scale(m,u,c)}return n.setModified(a,!0,!0,!1),a},n.bounds=function(a){for(var u=n.allBodies(a),c=[],f=0;f<u.length;f+=1){var v=u[f];c.push(v.bounds.min,v.bounds.max)}return o.create(c)}})()},function(i,d){var e=function(n,h,r){return n>=0&&n<r.width&&h>=0&&h<r.height};i.exports=e},function(i,d,e){var n=e(0),h=e(29),r=e(2),o=new n({initialize:function(a){a===void 0&&(a={}),this.name=r(a,"name","layer"),this.x=r(a,"x",0),this.y=r(a,"y",0),this.width=r(a,"width",0),this.height=r(a,"height",0),this.tileWidth=r(a,"tileWidth",0),this.tileHeight=r(a,"tileHeight",0),this.baseTileWidth=r(a,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(a,"baseTileHeight",this.tileHeight),this.orientation=r(a,"orientation",h.ORTHOGONAL),this.widthInPixels=r(a,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(a,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(a,"alpha",1),this.visible=r(a,"visible",!0),this.properties=r(a,"properties",[]),this.indexes=r(a,"indexes",[]),this.collideIndexes=r(a,"collideIndexes",[]),this.callbacks=r(a,"callbacks",[]),this.bodies=r(a,"bodies",[]),this.data=r(a,"data",[]),this.tilemapLayer=r(a,"tilemapLayer",null),this.hexSideLength=r(a,"hexSideLength",0)}});i.exports=o},function(i,d,e){var n=e(0),h=e(29),r=e(2),o=new n({initialize:function(a){a===void 0&&(a={}),this.name=r(a,"name","map"),this.width=r(a,"width",0),this.height=r(a,"height",0),this.infinite=r(a,"infinite",!1),this.tileWidth=r(a,"tileWidth",0),this.tileHeight=r(a,"tileHeight",0),this.widthInPixels=r(a,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(a,"heightInPixels",this.height*this.tileHeight),this.format=r(a,"format",null),this.orientation=r(a,"orientation",h.ORTHOGONAL),this.renderOrder=r(a,"renderOrder","right-down"),this.version=r(a,"version","1"),this.properties=r(a,"properties",{}),this.layers=r(a,"layers",[]),this.images=r(a,"images",[]),this.objects=r(a,"objects",{}),this.collision=r(a,"collision",{}),this.tilesets=r(a,"tilesets",[]),this.imageCollections=r(a,"imageCollections",[]),this.tiles=r(a,"tiles",[]),this.hexSideLength=r(a,"hexSideLength",0)}});i.exports=o},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u,c,f,v,p){(a===void 0||a<=0)&&(a=32),(u===void 0||u<=0)&&(u=32),c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v={}),p===void 0&&(p={}),this.name=o,this.firstgid=l,this.tileWidth=a,this.tileHeight=u,this.tileMargin=c,this.tileSpacing=f,this.tileProperties=v,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var o=this.getTileData(r);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,o){return r!==void 0&&(this.tileWidth=r),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,o){return r!==void 0&&(this.tileMargin=r),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,o){var l=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(l%1!=0||a%1!=0)&&console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),a=Math.floor(a),this.rows=l,this.columns=a,this.total=l*a,this.texCoordinates.length=0;for(var u=this.tileMargin,c=this.tileMargin,f=0;f<this.rows;f++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:u,y:c}),u+=this.tileWidth+this.tileSpacing;u=this.tileMargin,c+=this.tileHeight+this.tileSpacing}return this}});i.exports=h},function(i,d){var e={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};i.exports=e},function(i,d){var e=function(n,h,r){return r===void 0&&(r=1e-4),Math.abs(n-h)<r};i.exports=e},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(1068),l=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,o],initialize:function(u,c,f,v,p){r.call(this,u,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,p),this.setPosition(c,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});i.exports=l},function(i,d){var e=function(n,h){return n.hasOwnProperty(h)};i.exports=e},function(i,d,e){var n=e(77),h=function(r,o){var l=n(r);for(var a in o)l.hasOwnProperty(a)||(l[a]=o[a]);return l};i.exports=h},function(i,d,e){var n={};i.exports=n;var h=e(64),r=e(83),o=e(165),l=e(84),a=e(271),u=e(32);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(c){var f=c;f.bodyA&&!f.pointA&&(f.pointA={x:0,y:0}),f.bodyB&&!f.pointB&&(f.pointB={x:0,y:0});var v=f.bodyA?r.add(f.bodyA.position,f.pointA):f.pointA,p=f.bodyB?r.add(f.bodyB.position,f.pointB):f.pointB,g=r.magnitude(r.sub(v,p));f.length=typeof f.length!="undefined"?f.length:g,f.id=f.id||u.nextId(),f.label=f.label||"Constraint",f.type="constraint",f.stiffness=f.stiffness||(f.length>0?1:.7),f.damping=f.damping||0,f.angularStiffness=f.angularStiffness||0,f.angleA=f.bodyA?f.bodyA.angle:f.angleA,f.angleB=f.bodyB?f.bodyB.angle:f.angleB,f.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return f.length===0&&f.stiffness>.1?(m.type="pin",m.anchors=!1):f.stiffness<.9&&(m.type="spring"),f.render=u.extend(m,f.render),f},n.preSolveAll=function(c){for(var f=0;f<c.length;f+=1){var v=c[f],p=v.constraintImpulse;v.isStatic||p.x===0&&p.y===0&&p.angle===0||(v.position.x+=p.x,v.position.y+=p.y,v.angle+=p.angle)}},n.solveAll=function(c,f){for(var v=0;v<c.length;v+=1){var p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&n.solve(c[v],f)}for(v=0;v<c.length;v+=1)p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&n.solve(c[v],f)},n.solve=function(c,f){var v=c.bodyA,p=c.bodyB,g=c.pointA,m=c.pointB;if(!(!v&&!p)){v&&!v.isStatic&&(r.rotate(g,v.angle-c.angleA,g),c.angleA=v.angle),p&&!p.isStatic&&(r.rotate(m,p.angle-c.angleB,m),c.angleB=p.angle);var x=g,y=m;if(v&&(x=r.add(v.position,g)),p&&(y=r.add(p.position,m)),!(!x||!y)){var T=r.sub(x,y),C=r.magnitude(T);C<n._minLength&&(C=n._minLength);var S=(C-c.length)/C,E=c.stiffness<1?c.stiffness*f:c.stiffness,M=r.mult(T,S*E),R=(v?v.inverseMass:0)+(p?p.inverseMass:0),L=(v?v.inverseInertia:0)+(p?p.inverseInertia:0),O=R+L,F,D,B,N,V;if(c.damping){var X=r.create();B=r.div(T,C),V=r.sub(p&&r.sub(p.position,p.positionPrev)||X,v&&r.sub(v.position,v.positionPrev)||X),N=r.dot(B,V)}v&&!v.isStatic&&(D=v.inverseMass/R,v.constraintImpulse.x-=M.x*D,v.constraintImpulse.y-=M.y*D,v.position.x-=M.x*D,v.position.y-=M.y*D,c.damping&&(v.positionPrev.x-=c.damping*B.x*N*D,v.positionPrev.y-=c.damping*B.y*N*D),F=r.cross(g,M)/O*n._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=F,v.angle-=F),p&&!p.isStatic&&(D=p.inverseMass/R,p.constraintImpulse.x+=M.x*D,p.constraintImpulse.y+=M.y*D,p.position.x+=M.x*D,p.position.y+=M.y*D,c.damping&&(p.positionPrev.x+=c.damping*B.x*N*D,p.positionPrev.y+=c.damping*B.y*N*D),F=r.cross(m,M)/O*n._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle+=F,p.angle+=F)}}},n.postSolveAll=function(c){for(var f=0;f<c.length;f++){var v=c[f],p=v.constraintImpulse;if(!(v.isStatic||p.x===0&&p.y===0&&p.angle===0)){o.set(v,!1);for(var g=0;g<v.parts.length;g++){var m=v.parts[g];h.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(h.rotate(m.vertices,p.angle,v.position),a.rotate(m.axes,p.angle),g>0&&r.rotateAbout(m.position,p.angle,v.position,m.position)),l.update(m.bounds,m.vertices,v.velocity)}p.angle*=n._warming,p.x*=n._warming,p.y*=n._warming}}},n.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+c.pointA.x,y:(c.bodyA?c.bodyA.position.y:0)+c.pointA.y}},n.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+c.pointB.x,y:(c.bodyB?c.bodyB.position.y:0)+c.pointB.y}}})()},function(i,d,e){var n=e(35),h=e(65),r=e(66),o=e(0),l=e(11),a=e(15),u=e(10),c=e(57),f=new o({Extends:a,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),a.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,p,g){g===void 0&&(g=!0),this.width=v,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=v,m.hitArea.height=p),this},setDisplaySize:function(v,p){return this.displayWidth=v,this.displayHeight=p,this},setCircleDropZone:function(v){return this.setDropZone(new h(0,0,v),r)},setRectangleDropZone:function(v,p){return this.setDropZone(new u(0,0,v,p),c)},setDropZone:function(v,p){return v===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(v,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,p,g){g.addToRenderList(p)},renderWebGL:function(v,p,g){g.addToRenderList(p)}});i.exports=f},function(i,d){var e=function(n){return 2*(n.width+n.height)};i.exports=e},function(i,d){var e=function(n){for(var h=n.length-1;h>0;h--){var r=Math.floor(Math.random()*(h+1)),o=n[h];n[h]=n[r],n[r]=o}return n};i.exports=e},function(i,d,e){i.exports={ADD_ANIMATION:e(724),ANIMATION_COMPLETE:e(725),ANIMATION_COMPLETE_KEY:e(726),ANIMATION_REPEAT:e(727),ANIMATION_RESTART:e(728),ANIMATION_START:e(729),ANIMATION_STOP:e(730),ANIMATION_UPDATE:e(731),PAUSE_ALL:e(732),REMOVE_ANIMATION:e(733),RESUME_ALL:e(734)}},function(i,d,e){var n=e(0),h=e(11),r=e(36),o=e(9),l=e(37),a=e(10),u=e(25),c=e(187),f=e(3),v=new n({Extends:o,Mixins:[h.Alpha,h.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new a,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new a,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new u,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new f(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new f);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],C=m*T-x*y;if(!C)return p;var S=g[4],E=g[5],M=this.scrollX,R=this.scrollY,L=this.width,O=this.height,F=this.y,D=F+O,B=this.x,N=B+L,V=this.culledObjects,X=p.length;C=1/C,V.length=0;for(var K=0;K<X;++K){var Z=p[K];if(!Z.hasOwnProperty("width")||Z.parentContainer){V.push(Z);continue}var G=Z.width,w=Z.height,b=Z.x-M*Z.scrollFactorX-G*Z.originX,Y=Z.y-R*Z.scrollFactorY-w*Z.originY,U=b*m+Y*y+S,W=b*x+Y*T+E,H=(b+G)*m+(Y+w)*y+S,J=(b+G)*x+(Y+w)*T+E;H>B&&U<N&&J>F&&W<D&&V.push(Z)}return V},getWorldPoint:function(p,g,m){m===void 0&&(m=new f);var x=this.matrix.matrix,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],R=y*S-T*C;if(!R)return m.x=p,m.y=g,m;R=1/R;var L=S*R,O=-T*R,F=-C*R,D=y*R,B=(C*M-S*E)*R,N=(T*E-y*M)*R,V=Math.cos(this.rotation),X=Math.sin(this.rotation),K=this.zoomX,Z=this.zoomY,G=this.scrollX,w=this.scrollY,b=p+(G*V-w*X)*K,Y=g+(G*X+w*V)*Z;return m.x=b*L+Y*F+B,m.y=b*O+Y*D+N,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=p*this.originX,E=g*this.originY,M=this.scrollX,R=this.scrollY;this.useBounds&&(M=this.clampX(M),R=this.clampY(R)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=M,this.scrollY=R;var L=M+m,O=R+x;this.midPoint.set(L,O);var F=p/y,D=g/T;this.worldView.setTo(L-F/2,O-D/2,F,D),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=r(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=c(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new a);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});i.exports=v},function(i,d,e){var n=e(334),h=e(335),r=e(336),o=e(337),l=e(338),a=e(339),u=e(340),c=e(341),f=e(342),v=e(343),p=e(344),g=e(345);i.exports={Power0:u,Power1:c.Out,Power2:o.Out,Power3:f.Out,Power4:v.Out,Linear:u,Quad:c.Out,Cubic:o.Out,Quart:f.Out,Quint:v.Out,Sine:p.Out,Expo:a.Out,Circ:r.Out,Elastic:l.Out,Back:n.Out,Bounce:h.Out,Stepped:g,"Quad.easeIn":c.In,"Cubic.easeIn":o.In,"Quart.easeIn":f.In,"Quint.easeIn":v.In,"Sine.easeIn":p.In,"Expo.easeIn":a.In,"Circ.easeIn":r.In,"Elastic.easeIn":l.In,"Back.easeIn":n.In,"Bounce.easeIn":h.In,"Quad.easeOut":c.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":f.Out,"Quint.easeOut":v.Out,"Sine.easeOut":p.Out,"Expo.easeOut":a.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":l.Out,"Back.easeOut":n.Out,"Bounce.easeOut":h.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":f.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":a.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":h.InOut}},function(i,d){var e=function(n,h,r){return(h-n)*r+n};i.exports=e},function(i,d,e){var n=e(105),h={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function r(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?h.edge=!0:/Chrome\/(\d+)/.test(o)&&!n.windowsPhone?(h.chrome=!0,h.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(h.firefox=!0,h.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&n.iOS?h.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(h.ie=!0,h.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?h.opera=!0:/Safari/.test(o)&&!n.windowsPhone?h.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(h.ie=!0,h.trident=!0,h.tridentVersion=parseInt(RegExp.$1,10),h.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(h.silk=!0),h}i.exports=r()},function(i,d){var e=function(n,h){return Math.random()*(h-n)+n};i.exports=e},function(i,d){var e=function(n,h){return n>0&&(n&n-1)==0&&h>0&&(h&h-1)==0};i.exports=e},function(i,d){var e=function(n,h,r,o){return r===void 0&&(r=0),h===0?n:(n-=r,n=h*Math.ceil(n/h),o?(r+n)/h:r+n)};i.exports=e},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=l||0,this.z=a||0,this.w=u||0)},clone:function(){return new h(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this.w=r.w||0,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z&&this.w===r.w},set:function(r,o,l,a){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=o||0,this.z=l||0,this.w=a||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this.w+=r.w||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this.w-=r.w||0,this},scale:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},length:function(){var r=this.x,o=this.y,l=this.z,a=this.w;return Math.sqrt(r*r+o*o+l*l+a*a)},lengthSq:function(){var r=this.x,o=this.y,l=this.z,a=this.w;return r*r+o*o+l*l+a*a},normalize:function(){var r=this.x,o=this.y,l=this.z,a=this.w,u=r*r+o*o+l*l+a*a;return u>0&&(u=1/Math.sqrt(u),this.x=r*u,this.y=o*u,this.z=l*u,this.w=a*u),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lerp:function(r,o){o===void 0&&(o=0);var l=this.x,a=this.y,u=this.z,c=this.w;return this.x=l+o*(r.x-l),this.y=a+o*(r.y-a),this.z=u+o*(r.z-u),this.w=c+o*(r.w-c),this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this.w*=r.w||1,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this.w/=r.w||1,this},distance:function(r){var o=r.x-this.x,l=r.y-this.y,a=r.z-this.z||0,u=r.w-this.w||0;return Math.sqrt(o*o+l*l+a*a+u*u)},distanceSq:function(r){var o=r.x-this.x,l=r.y-this.y,a=r.z-this.z||0,u=r.w-this.w||0;return o*o+l*l+a*a+u*u},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(r){var o=this.x,l=this.y,a=this.z,u=this.w,c=r.val;return this.x=c[0]*o+c[4]*l+c[8]*a+c[12]*u,this.y=c[1]*o+c[5]*l+c[9]*a+c[13]*u,this.z=c[2]*o+c[6]*l+c[10]*a+c[14]*u,this.w=c[3]*o+c[7]*l+c[11]*a+c[15]*u,this},transformQuat:function(r){var o=this.x,l=this.y,a=this.z,u=r.x,c=r.y,f=r.z,v=r.w,p=v*o+c*a-f*l,g=v*l+f*o-u*a,m=v*a+u*l-c*o,x=-u*o-c*l-f*a;return this.x=p*v+x*-u+g*-f-m*-c,this.y=g*v+x*-c+m*-u-p*-f,this.z=m*v+x*-f+p*-c-g*-u,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});h.prototype.sub=h.prototype.subtract,h.prototype.mul=h.prototype.multiply,h.prototype.div=h.prototype.divide,h.prototype.dist=h.prototype.distance,h.prototype.distSq=h.prototype.distanceSq,h.prototype.len=h.prototype.length,h.prototype.lenSq=h.prototype.lengthSq,i.exports=h},function(i,d,e){var n=e(0),h=e(91),r=new n({initialize:function(l,a,u,c,f,v,p){c===void 0&&(c=1),f===void 0&&(f=0),v===void 0&&(v=!0),p===void 0&&(p=!1),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=f,this.autoClear=v,this.autoResize=!1,this.resize(a,u),p&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(h.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(h.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,l){var a=o*this.scale,u=l*this.scale;if(a!==this.width||u!==this.height){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),o*=this.scale,l*=this.scale,o=Math.round(o),l=Math.round(l),o<=0&&(o=1),l<=0&&(l=1),this.texture=c.createTextureFromSource(null,o,l,this.minFilter),this.framebuffer=c.createFramebuffer(o,l,this.texture,!1),this.width=o,this.height=l}return this},bind:function(o,l,a){if(o===void 0&&(o=!1),o&&this.renderer.flush(),l&&a&&this.resize(l,a),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var u=this.renderer.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,l=o.gl;o.pushFramebuffer(this.framebuffer),l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var l=this.renderer;return o&&l.flush(),l.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(h.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});i.exports=r},function(i,d){var e=function(n,h){var r;if(h)typeof h=="string"?r=document.getElementById(h):typeof h=="object"&&h.nodeType===1&&(r=h);else if(n.parentElement||h===null)return n;return r||(r=document.body),r.appendChild(n),n};i.exports=e},function(i,d){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};i.exports=e},function(i,d){var e={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};i.exports=e},function(i,d,e){var n=e(0),h=e(77),r=e(9),o=e(70),l=e(22),a=e(1),u=e(207),c=e(428),f=new n({Extends:r,initialize:function(p){r.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(l.BLUR,this.onGameBlur,this),p.events.on(l.FOCUS,this.onGameFocus,this),p.events.on(l.PRE_STEP,this.update,this),p.events.once(l.DESTROY,this.destroy,this)},add:a,addAudioSprite:function(v,p){p===void 0&&(p={});var g=this.add(v,p);g.spritemap=this.jsonCache.get(v).spritemap;for(var m in g.spritemap)if(!!g.spritemap.hasOwnProperty(m)){var x=h(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(v){return c(this.sounds,"key",v)},getAll:function(v){return u(this.sounds,"key",v)},play:function(v,p){var g=this.add(v);return g.once(o.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(v,p,g){var m=this.addAudioSprite(v);return m.once(o.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(v){var p=this.sounds.indexOf(v);return p!==-1?(v.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===v&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(v){var p=0;return this.getAll(v).forEach(function(g){g.stop()&&p++}),p},unlock:a,onBlur:a,onFocus:a,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(v,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(v,p)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(v,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&v.call(p||g,m,x,g.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(o.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,v)}}});i.exports=f},function(i,d,e){var n=e(0),h=e(9),r=e(70),o=e(17),l=e(1),a=new n({Extends:h,initialize:function(c,f,v){h.call(this),this.manager=c,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(console.error("addMarker "+u.name+" already exists in Sound"),!1):(u=o(!0,{name:"",start:0,duration:this.totalDuration-(u.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},u),this.markers[u.name]=u,!0)},updateMarker:function(u){return!u||!u.name||typeof u.name!="string"?!1:this.markers[u.name]?(this.markers[u.name]=o(!0,this.markers[u.name],u),!0):(console.warn("Audio Marker: "+u.name+" missing in Sound: "+this.key),!1)},removeMarker:function(u){var c=this.markers[u];return c?(this.markers[u]=null,c):null},play:function(u,c){if(u===void 0&&(u=""),typeof u=="object"&&(c=u,u=""),typeof u!="string")return!1;if(!u)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[u])return console.warn("Marker: "+u+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[u],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var u=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,f=Math.pow(u,c);this.totalRate=this.currentConfig.rate*this.manager.rate*f},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});i.exports=a},function(i,d,e){var n=e(209),h=e(435),r=function(o,l){if(l===void 0&&(l=90),!n(o))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")o=h(o),o.reverse();else if(l===-90||l===270||l==="rotateRight")o.reverse(),o=h(o);else if(Math.abs(l)===180||l==="rotate180"){for(var a=0;a<o.length;a++)o[a].reverse();o.reverse()}return o};i.exports=r},function(i,d,e){var n=e(0),h=e(18),r=e(11),o=e(15),l=e(1043),a=e(1044),u=e(212),c=e(10),f=e(1045),v=new n({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,f],initialize:function(g,m,x,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),o.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,C){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,C=x);var S=this.text.length;g===-1&&(g=S),p<0&&(p=S+p),p=h(p,0,S-1);for(var E=h(p+g,p,S),M=this.charColors,R=p;R<E;R++){var L=M[R];if(x===-1)M[R]=null;else{var O=m?1:0;L?(L.tintEffect=O,L.tintTL=x,L.tintTR=y,L.tintBL=T,L.tintBR=C):M[R]={tintEffect:O,tintTL:x,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(p,g,m,x,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,M=typeof p=="number",R=0,L=0;L<E.length;L++){var O=E[L];if((M&&L===p||!M&&O.word===p)&&(this.setCharacterTint(O.i,O.word.length,m,x,y,T,C),R++,R===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(l(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,C=new c,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),l(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=r.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=a,v.ParseXMLBitmapFont=u,i.exports=v},function(i,d,e){var n=e(0),h=new n({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var l=0;l<o.length;l++)this.set(o[l])},set:function(r){return this.entries.indexOf(r)===-1&&this.entries.push(r),this},get:function(r,o){for(var l=0;l<this.entries.length;l++){var a=this.entries[l];if(a[r]===o)return a}},getArray:function(){return this.entries.slice(0)},delete:function(r){var o=this.entries.indexOf(r);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var r=0;r<this.entries.length;r++){var o=this.entries[r];console.log(o)}console.groupEnd()},each:function(r,o){var l,a=this.entries.slice(),u=a.length;if(o)for(l=0;l<u&&r.call(o,a[l],l)!==!1;l++);else for(l=0;l<u&&r(a[l],l)!==!1;l++);return this},iterate:function(r,o){var l,a=this.entries.length;if(o)for(l=0;l<a&&r.call(o,this.entries[l],l)!==!1;l++);else for(l=0;l<a&&r(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(r){var o,l=[];for(o=1;o<arguments.length;o++)l.push(arguments[o]);var a=this.entries.length;for(o=0;o<a;o++){var u=this.entries[o];u[r].apply(u,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(r){return this.entries.indexOf(r)>-1},union:function(r){var o=new h;return r.entries.forEach(function(l){o.set(l)}),this.entries.forEach(function(l){o.set(l)}),o},intersect:function(r){var o=new h;return this.entries.forEach(function(l){r.contains(l)&&o.set(l)}),o},difference:function(r){var o=new h;return this.entries.forEach(function(l){r.contains(l)||o.set(l)}),o},size:{get:function(){return this.entries.length},set:function(r){return r<this.entries.length?this.entries.length=r:this.entries.length}}});i.exports=h},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(189),l=e(92),a=e(1182),u=new n({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible,a],initialize:function(f,v,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),r.call(this,f,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.setPosition(v,p),this.color=o(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});i.exports=u},function(i,d){var e=function(n,h){var r=h.width/2,o=h.height/2,l=Math.abs(n.x-h.x-r),a=Math.abs(n.y-h.y-o),u=r+n.radius,c=o+n.radius;if(l>u||a>c)return!1;if(l<=r||a<=o)return!0;var f=l-r,v=a-o,p=f*f,g=v*v,m=n.radius*n.radius;return p+g<=m};i.exports=e},function(i,d){var e=function(n,h){return n.width<=0||n.height<=0||h.width<=0||h.height<=0?!1:!(n.right<h.x||n.bottom<h.y||n.x>h.right||n.y>h.bottom)};i.exports=e},function(i,d,e){var n=e(6),h={},r={};r.register=function(o,l,a,u,c){h[o]={plugin:l,mapping:a,settingsKey:u,configKey:c}},r.getPlugin=function(o){return h[o]},r.install=function(o){var l=o.scene.sys,a=l.settings.input,u=l.game.config;for(var c in h){var f=h[c].plugin,v=h[c].mapping,p=h[c].settingsKey,g=h[c].configKey;n(a,p,u[g])&&(o[v]=new f(o))}},r.remove=function(o){h.hasOwnProperty(o)&&delete h[o]},i.exports=r},function(i,d,e){i.exports={ANY_KEY_DOWN:e(1323),ANY_KEY_UP:e(1324),COMBO_MATCH:e(1325),DOWN:e(1326),KEY_DOWN:e(1327),KEY_UP:e(1328),UP:e(1329)}},function(i,d){var e=function(n,h){return n.url?n.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?n.url:h+n.url:!1};i.exports=e},function(i,d){var e=function(n,h,r,o,l,a){return n===void 0&&(n=""),h===void 0&&(h=!0),r===void 0&&(r=""),o===void 0&&(o=""),l===void 0&&(l=0),a===void 0&&(a=!1),{responseType:n,async:h,user:r,password:o,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}};i.exports=e},function(i,d,e){var n=e(0),h=e(243),r=e(73),o=new n({Extends:r,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(a,u,c,f,v){r.call(this,a,u,c,f,v),this.body=null}});i.exports=o},function(i,d,e){var n=e(119),h=function(r,o,l,a){if(l===void 0&&(l=!1),n(r,o,a)){var u=a.data[o][r]||null;return u?u.index===-1?l?u:null:u:null}else return null};i.exports=h},function(i,d){var e=function(n,h,r,o){var l=n.data,a=n.width,u=n.height,c=n.tilemapLayer,f=Math.max(0,h.left),v=Math.min(a,h.right),p=Math.max(0,h.top),g=Math.min(u,h.bottom),m,x,y;if(r===0)for(x=p;x<g;x++)for(m=f;l[x]&&m<v;m++)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(r===1)for(x=p;x<g;x++)for(m=v;l[x]&&m>=f;m--)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(r===2)for(x=g;x>=p;x--)for(m=f;l[x]&&m<v;m++)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(r===3)for(x=g;x>=p;x--)for(m=v;l[x]&&m>=f;m--)y=l[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);return c.tilesDrawn=o.length,c.tilesTotal=a*u,o};i.exports=e},function(i,d){var e=function(n,h,r){var o=r.collideIndexes.indexOf(n);h&&o===-1?r.collideIndexes.push(n):!h&&o!==-1&&r.collideIndexes.splice(o,1)};i.exports=e},function(i,d,e){var n=e(2),h=function(r,o,l){if(!o)return{i:0,layers:r.layers,name:"",opacity:1,visible:!0,x:0,y:0};var a=o.x+n(o,"startx",0)*r.tilewidth+n(o,"offsetx",0),u=o.y+n(o,"starty",0)*r.tileheight+n(o,"offsety",0);return{i:0,layers:o.layers,name:l.name+o.name+"/",opacity:l.opacity*o.opacity,visible:l.visible&&o.visible,x:l.x+a,y:l.y+u}};i.exports=h},function(i,d){var e=function(n,h,r){var o;if(n.hasOwnProperty(h)){var l=typeof n[h];l==="function"?o=function(a,u,c,f,v,p){return n[h](a,u,c,f,v,p)}:o=function(){return n[h]}}else typeof r=="function"?o=r:o=function(){return r};return o};i.exports=e},function(i,d,e){var n=e(265),h=e(13),r=e(99),o=e(80),l=e(162),a=e(583),u=e(263),c=e(6),f=e(264),v=e(266),p=e(268),g=function(m,x,y){y===void 0&&(y=n);for(var T=y.targets?y.targets:u(x),C=a(x),S=l(x,"delay",y.delay),E=l(x,"duration",y.duration),M=c(x,"easeParams",y.easeParams),R=o(c(x,"ease",y.ease),M),L=l(x,"hold",y.hold),O=l(x,"repeat",y.repeat),F=l(x,"repeatDelay",y.repeatDelay),D=r(x,"yoyo",y.yoyo),B=r(x,"flipX",y.flipX),N=r(x,"flipY",y.flipY),V=[],X=0;X<C.length;X++)for(var K=C[X].key,Z=C[X].value,G=0;G<T.length;G++){var w=f(K,Z),b=p(T[G],G,K,w.getEnd,w.getStart,w.getActive,o(c(Z,"ease",R),c(Z,"easeParams",M)),l(Z,"delay",S),l(Z,"duration",E),r(Z,"yoyo",D),l(Z,"hold",L),l(Z,"repeat",O),l(Z,"repeatDelay",F),r(Z,"flipX",B),r(Z,"flipY",N));V.push(b)}var Y=new v(m,V,T);Y.offset=h(x,"offset",null),Y.completeDelay=h(x,"completeDelay",0),Y.loop=Math.round(h(x,"loop",0)),Y.loopDelay=Math.round(h(x,"loopDelay",0)),Y.paused=r(x,"paused",!1),Y.useFrames=r(x,"useFrames",!1);for(var U=c(x,"callbackScope",Y),W=[Y,null],H=v.TYPES,J=0;J<H.length;J++){var q=H[J],_=c(x,q,!1);if(_){var nt=c(x,q+"Scope",U),rt=c(x,q+"Params",[]);Y.setCallback(q,_,W.concat(rt),nt)}}return Y};i.exports=g},function(i,d,e){var n=e(0),h=e(102),r=e(2),o=e(132),l=e(185),a=new n({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(u){var c=this.parent;if(u===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(u)||(u=[u]);for(var f=0;f<u.length;f++){var v=u[f];this.nextAnim===null?this.nextAnim=v:this.nextAnimsQueue.push(v)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(u){this.isPlaying&&this.stop();var c=this.animationManager,f=typeof u=="string"?u:r(u,"key",null),v=this.exists(f)?this.get(f):c.get(f);if(!v)console.warn("Missing animation: "+f);else{this.currentAnim=v;var p=v.getTotalFrames(),g=r(u,"frameRate",v.frameRate),m=r(u,"duration",v.duration);v.calculateDuration(this,p,m,g),this.delay=r(u,"delay",v.delay),this.repeat=r(u,"repeat",v.repeat),this.repeatDelay=r(u,"repeatDelay",v.repeatDelay),this.yoyo=r(u,"yoyo",v.yoyo),this.showOnStart=r(u,"showOnStart",v.showOnStart),this.hideOnComplete=r(u,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=r(u,"skipMissedFrames",v.skipMissedFrames),this.timeScale=r(u,"timeScale",this.timeScale);var x=r(u,"startFrame",0);x>v.getTotalFrames()&&(x=0);var y=v.frames[x];x===0&&!this.forward&&(y=v.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(u){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),u!==void 0&&this.setCurrentFrame(u),this.parent},resume:function(u){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),u!==void 0&&this.setCurrentFrame(u),this.parent},playAfterDelay:function(u,c){if(!this.isPlaying)this.delayCounter=c,this.play(u,!0);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.nextAnim=u,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(u,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(u);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=u,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(u,c){c===void 0&&(c=!1);var f=this.currentAnim,v=this.parent,p=typeof u=="string"?u:u.key;if(c&&this.isPlaying&&f.key===p)return v;if(f&&this.isPlaying){var g=this.animationManager.getMix(f.key,u);if(g>0)return this.playAfterDelay(u,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u)},playReverse:function(u,c){c===void 0&&(c=!1);var f=typeof u=="string"?u:u.key;return c&&this.isPlaying&&this.currentAnim.key===f?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u))},startAnimation:function(u){this.load(u);var c=this.currentAnim,f=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),f},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(u,c){var f=this.currentAnim,v=this.currentFrame,p=this.parent,g=v.textureFrame;p.emit(u,f,v,p,g),c&&p.emit(c+f.key,f,v,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var u=this.currentFrame;if(!u)return 0;var c=u.progress;return this.inReverse&&(c*=-1),c},setProgress:function(u){return this.forward||(u=1-u),this.setCurrentFrame(this.currentAnim.getFrameByProgress(u)),this.parent},setRepeat:function(u){return this.repeatCounter=u===-1?Number.MAX_VALUE:u,this.parent},globalRemove:function(u,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(u,c){u===void 0&&(u=!1),c===void 0&&(c=!1);var f=this.currentAnim,v=this.parent;return f?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),f.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!u,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(f.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(u)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(u)}return this.parent},stopAfterDelay:function(u){return this._pendingStop=1,this._pendingStopValue=u,this.parent},stopAfterRepeat:function(u){return u===void 0&&(u=1),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=u,this.parent},stopOnFrame:function(u){return this._pendingStop=3,this._pendingStopValue=u,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(u,c){var f=this.currentAnim;if(!(!this.isPlaying||!f||f.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?f.nextFrame(this):f.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?f.nextFrame(this):f.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(u){var c=this.parent;return this.currentFrame=u,c.texture=u.frame.texture,c.frame=u.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),u.setAlpha&&(c.alpha=u.alpha),c.setSizeToFrame(),c._originComponent&&(u.frame.customPivot?c.setOrigin(u.frame.pivotX,u.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===u&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(u){return this.anims?this.anims.get(u):null},exists:function(u){return this.anims?this.anims.has(u):!1},create:function(u){var c=u.key,f=!1;return c&&(f=this.get(c),f||(f=new l(this,c,u),this.anims||(this.anims=new h),this.anims.set(c,f))),f},generateFrameNames:function(u,c){return this.animationManager.generateFrameNames(u,c)},generateFrameNumbers:function(u,c){return this.animationManager.generateFrameNumbers(u,c)},remove:function(u){var c=this.get(u);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(u)),c},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});i.exports=a},function(i,d,e){var n={};i.exports=n;var h=e(166);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(r,o){for(var l=o*o*o,a=0;a<r.length;a++){var u=r[a],c=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){n.set(u,!1);continue}var f=Math.min(u.motion,c),v=Math.max(u.motion,c);u.motion=n._minBias*f+(1-n._minBias)*v,u.sleepThreshold>0&&u.motion<n._motionSleepThreshold*l?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&n.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},n.afterCollisions=function(r,o){for(var l=o*o*o,a=0;a<r.length;a++){var u=r[a];if(!!u.isActive){var c=u.collision,f=c.bodyA.parent,v=c.bodyB.parent;if(!(f.isSleeping&&v.isSleeping||f.isStatic||v.isStatic)&&(f.isSleeping||v.isSleeping)){var p=f.isSleeping&&!f.isStatic?f:v,g=p===f?v:f;!p.isStatic&&g.motion>n._motionWakeThreshold*l&&n.set(p,!1)}}}},n.set=function(r,o){var l=r.isSleeping;o?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,l||h.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,l&&h.trigger(r,"sleepEnd"))}})()},function(i,d,e){var n={};i.exports=n;var h=e(32);(function(){n.on=function(r,o,l){for(var a=o.split(" "),u,c=0;c<a.length;c++)u=a[c],r.events=r.events||{},r.events[u]=r.events[u]||[],r.events[u].push(l);return l},n.off=function(r,o,l){if(!o){r.events={};return}typeof o=="function"&&(l=o,o=h.keys(r.events).join(" "));for(var a=o.split(" "),u=0;u<a.length;u++){var c=r.events[a[u]],f=[];if(l&&c)for(var v=0;v<c.length;v++)c[v]!==l&&f.push(c[v]);r.events[a[u]]=f}},n.trigger=function(r,o,l){var a,u,c,f,v=r.events;if(v&&h.keys(v).length>0){l||(l={}),a=o.split(" ");for(var p=0;p<a.length;p++)if(u=a[p],c=v[u],c){f=h.clone(l,!1),f.name=u,f.source=r;for(var g=0;g<c.length;g++)c[g].apply(r,[f])}}}})()},function(i,d,e){var n=e(175),h=e(92),r=e(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(l){l===void 0&&(l=h.MULTI_PIPELINE);var a=this.scene.sys.renderer;if(!a)return!1;var u=a.pipelines;if(this.postPipelines=[],this.pipelineData={},u){var c=u.get(l);if(c)return this.defaultPipeline=c,this.pipeline=c,!0}return!1},setPipeline:function(l,a,u){var c=this.scene.sys.renderer;if(!c)return this;var f=c.pipelines;if(f){var v=f.get(l);v&&(this.pipeline=v),a&&(this.pipelineData=u?n(a):a)}return this},setPostPipeline:function(l,a,u){var c=this.scene.sys.renderer;if(!c)return this;var f=c.pipelines;if(f){Array.isArray(l)||(l=[l]);for(var v=0;v<l.length;v++){var p=f.getPostPipeline(l[v],this);p&&this.postPipelines.push(p)}a&&(this.pipelineData=u?n(a):a)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(l,a){var u=this.pipelineData;return a===void 0?delete u[l]:u[l]=a,this},getPostPipeline:function(l){for(var a=this.postPipelines,u=[],c=0;c<a.length;c++){var f=a[c];(typeof l=="string"&&f.name===l||f instanceof l)&&u.push(f)}return u.length===1?u[0]:u},resetPipeline:function(l,a){return l===void 0&&(l=!1),a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,l&&(this.postPipelines=[],this.hasPostPipeline=!1),a&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var a=this.postPipelines,u=0;u<a.length;u++)a[u].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.pipelineData={})},removePostPipeline:function(l){for(var a=this.postPipelines,u=a.length-1;u>=0;u--){var c=a[u];(typeof l=="string"&&c.name===l||typeof l!="string"&&c instanceof l)&&(c.destroy(),r(a,u))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};i.exports=o},function(i,d){var e={DEFAULT:0,LINEAR:0,NEAREST:1};i.exports=e},function(i,d,e){var n=e(4),h=function(r,o,l){return l===void 0&&(l=new n),l.x=r.x+r.radius*Math.cos(o),l.y=r.y+r.radius*Math.sin(o),l};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o){o===void 0&&(o=new n);var l=2*Math.PI*Math.random(),a=Math.random()+Math.random(),u=a>1?2-a:a,c=u*Math.cos(l),f=u*Math.sin(l);return o.x=r.x+c*r.radius,o.y=r.y+f*r.radius,o};i.exports=h},function(i,d,e){var n=e(130),h=e(4),r=function(o,l,a){if(a===void 0&&(a=new h),l<=0||l>=1)return a.x=o.x,a.y=o.y,a;var u=n(o)*l;return l>.5?(u-=o.width+o.height,u<=o.width?(a.x=o.right-u,a.y=o.bottom):(a.x=o.x,a.y=o.bottom-(u-o.width))):u<=o.width?(a.x=o.x+u,a.y=o.y):(a.x=o.right,a.y=o.y+(u-o.width)),a};i.exports=r},function(i,d,e){var n=e(67),h=e(4),r=function(o,l,a,u){u===void 0&&(u=[]),!l&&a>0&&(l=n(o)/a);for(var c=o.x1,f=o.y1,v=o.x2,p=o.y2,g=0;g<l;g++){var m=g/l,x=c+(v-c)*m,y=f+(p-f)*m;u.push(new h(x,y))}return u};i.exports=r},function(i,d,e){var n=e(4),h=function(r,o){o===void 0&&(o=new n);var l=Math.random();return o.x=r.x1+l*(r.x2-r.x1),o.y=r.y1+l*(r.y2-r.y1),o};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o){return o===void 0&&(o=new n),o.x=r.x+Math.random()*r.width,o.y=r.y+Math.random()*r.height,o};i.exports=h},function(i,d){var e=function(n){var h,r,o;if(typeof n!="object"||n===null)return n;h=Array.isArray(n)?[]:{};for(o in n)r=n[o],h[o]=e(r);return h};i.exports=e},function(i,d){var e=function(n){var h={name:n.name,type:n.type,x:n.x,y:n.y,depth:n.depth,scale:{x:n.scaleX,y:n.scaleY},origin:{x:n.originX,y:n.originY},flipX:n.flipX,flipY:n.flipY,rotation:n.rotation,alpha:n.alpha,visible:n.visible,blendMode:n.blendMode,textureKey:"",frameKey:"",data:{}};return n.texture&&(h.textureKey=n.texture.key,h.frameKey=n.frame.name),h};i.exports=e},function(i,d,e){var n=e(3),h=function(r,o,l,a,u,c,f,v){v===void 0&&(v=new n);var p=Math.sin(u),g=Math.cos(u),m=g*c,x=p*c,y=-p*f,T=g*f,C=1/(m*T+y*-x);return v.x=T*C*r+-y*C*o+(a*y-l*T)*C,v.y=m*C*o+-x*C*r+(-a*m+l*x)*C,v};i.exports=h},function(i,d){var e=function(n,h){h===void 0&&(h=1);for(var r=null,o=0;o<h;o++)r=n.shift(),n.push(r);return r};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h=1);for(var r=null,o=0;o<h;o++)r=n.pop(),n.unshift(r);return r};i.exports=e},function(i,d,e){var n=e(4),h=function(r,o){o===void 0&&(o=new n);var l=Math.random()*Math.PI*2,a=Math.sqrt(Math.random());return o.x=r.x+a*Math.cos(l)*r.width/2,o.y=r.y+a*Math.sin(l)*r.height/2,o};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o){o===void 0&&(o=new n);var l=r.x2-r.x1,a=r.y2-r.y1,u=r.x3-r.x1,c=r.y3-r.y1,f=Math.random(),v=Math.random();return f+v>=1&&(f=1-f,v=1-v),o.x=r.x1+(l*f+u*v),o.y=r.y1+(a*f+c*v),o};i.exports=h},function(i,d){var e=function(n,h,r,o,l){var a=o+Math.atan2(n.y-r,n.x-h);return n.x=h+l*Math.cos(a),n.y=r+l*Math.sin(a),n};i.exports=e},function(i,d){var e=function(n,h,r){return n=Math.max(0,Math.min(1,(n-h)/(r-h))),n*n*n*(n*(n*6-15)+10)};i.exports=e},function(i,d){var e=function(n,h,r){return n<=h?0:n>=r?1:(n=(n-h)/(r-h),n*n*(3-2*n))};i.exports=e},function(i,d,e){var n=e(18),h=e(0),r=e(132),o=e(318),l=e(319),a=e(6),u=e(320),c=new h({initialize:function(v,p,g){this.manager=v,this.key=p,this.type="frame",this.frames=this.getFrames(v.textureManager,a(g,"frames",[]),a(g,"defaultTextureKey",null),a(g,"sortFrames",!0)),this.frameRate=a(g,"frameRate",null),this.duration=a(g,"duration",null),this.msPerFrame,this.skipMissedFrames=a(g,"skipMissedFrames",!0),this.delay=a(g,"delay",0),this.repeat=a(g,"repeat",0),this.repeatDelay=a(g,"repeatDelay",0),this.yoyo=a(g,"yoyo",!1),this.showOnStart=a(g,"showOnStart",!1),this.hideOnComplete=a(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(f,v,p,g){p===null&&g===null?(f.frameRate=24,f.duration=24/v*1e3):p&&g===null?(f.duration=p,f.frameRate=v/(p/1e3)):(f.frameRate=g,f.duration=v/g*1e3),f.msPerFrame=1e3/f.frameRate},addFrame:function(f){return this.addFrameAt(this.frames.length,f)},addFrameAt:function(f,v){var p=this.getFrames(this.manager.textureManager,v);if(p.length>0){if(f===0)this.frames=p.concat(this.frames);else if(f===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,f),m=this.frames.slice(f);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(f){return f>=0&&f<this.frames.length},getFirstTick:function(f){f.accumulator=0,f.nextTick=f.msPerFrame+f.currentFrame.duration},getFrameAt:function(f){return this.frames[f]},getFrames:function(f,v,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,C,S;if(typeof v=="string"){S=v;var E=f.get(S),M=E.getFrameNames();g&&u(M),v=[],M.forEach(function(B){v.push({key:S,frame:B})})}if(!Array.isArray(v)||v.length===0)return m;for(C=0;C<v.length;C++){var R=v[C],L=a(R,"key",p);if(!!L){var O=a(R,"frame",0),F=f.getFrame(L,O);y=new l(L,O,T,F),y.duration=a(R,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var D=1/(m.length-1);for(C=0;C<m.length;C++)m[C].progress=C*D}return m},getNextTick:function(f){f.accumulator-=f.nextTick,f.nextTick=f.msPerFrame+f.currentFrame.duration},getFrameByProgress:function(f){return f=n(f,0,1),o(f,this.frames,"progress")},nextFrame:function(f){var v=f.currentFrame;v.isLast?f.yoyo?this.handleYoyoFrame(f,!1):f.repeatCounter>0?f.inReverse&&f.forward?f.forward=!1:this.repeatAnimation(f):f.complete():this.updateAndGetNextTick(f,v.nextFrame)},handleYoyoFrame:function(f,v){if(v||(v=!1),f.inReverse===!v&&f.repeatCounter>0){(f.repeatDelay===0||f.pendingRepeat)&&(f.forward=v),this.repeatAnimation(f);return}if(f.inReverse!==v&&f.repeatCounter===0){f.complete();return}f.forward=v;var p=v?f.currentFrame.nextFrame:f.currentFrame.prevFrame;this.updateAndGetNextTick(f,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(f){var v=f.currentFrame;v.isFirst?f.yoyo?this.handleYoyoFrame(f,!0):f.repeatCounter>0?f.inReverse&&!f.forward?this.repeatAnimation(f):(f.forward=!0,this.repeatAnimation(f)):f.complete():this.updateAndGetNextTick(f,v.prevFrame)},updateAndGetNextTick:function(f,v){f.setCurrentFrame(v),this.getNextTick(f)},removeFrame:function(f){var v=this.frames.indexOf(f);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(f){return this.frames.splice(f,1),this.updateFrameSequence(),this},repeatAnimation:function(f){if(f._pendingStop===2){if(f._pendingStopValue===0)return f.stop();f._pendingStopValue--}f.repeatDelay>0&&!f.pendingRepeat?(f.pendingRepeat=!0,f.accumulator-=f.nextTick,f.nextTick+=f.repeatDelay):(f.repeatCounter--,f.forward?f.setCurrentFrame(f.currentFrame.nextFrame):f.setCurrentFrame(f.currentFrame.prevFrame),f.isPlaying&&(this.getNextTick(f),f.handleRepeat()))},toJSON:function(){var f={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){f.frames.push(v.toJSON())}),f},updateFrameSequence:function(){for(var f=this.frames.length,v=1/(f-1),p,g=0;g<f;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*v,g===0?(p.isFirst=!0,f===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[f-1],p.nextFrame=this.frames[g+1])):g===f-1&&f>1?(p.isLast=!0,p.prevFrame=this.frames[f-2],p.nextFrame=this.frames[0]):f>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var f=0;f<this.frames.length;f++)this.frames[f].destroy();this.frames=[],this.manager=null}});i.exports=c},function(i,d){var e=function(n,h,r,o){h===void 0&&(h=0),r===void 0&&(r=" "),o===void 0&&(o=3),n=n.toString();var l=0;if(h+1>=n.length)switch(o){case 1:n=new Array(h+1-n.length).join(r)+n;break;case 3:var a=Math.ceil((l=h-n.length)/2),u=l-a;n=new Array(u+1).join(r)+n+new Array(a+1).join(r);break;default:n=n+new Array(h+1-n.length).join(r);break}return n};i.exports=e},function(i,d,e){var n=e(327),h=e(189),r=e(331),o=e(332),l=function(a){var u=typeof a;switch(u){case"string":return a.substr(0,3).toLowerCase()==="rgb"?o(a):n(a);case"number":return h(a);case"object":return r(a)}};i.exports=l},function(i,d,e){var n=e(103);function h(o,l,a,u){var c=(o+l*6)%6,f=Math.min(c,4-c,1);return Math.round(255*(u-u*a*Math.max(0,f)))}var r=function(o,l,a,u){l===void 0&&(l=1),a===void 0&&(a=1);var c=h(5,o,l,a),f=h(3,o,l,a),v=h(1,o,l,a);return u?u.setTo?u.setTo(c,f,v,u.alpha,!1):(u.r=c,u.g=f,u.b=v,u.color=n(c,f,v),u):{r:c,g:f,b:v,color:n(c,f,v)}};i.exports=r},function(i,d,e){var n=e(38),h=e(330),r=function(o){var l=h(o);return new n(l.r,l.g,l.b,l.a)};i.exports=r},function(i,d){var e=function(n,h,r){return n.x=h-n.width/2,n.y=r-n.height/2,n};i.exports=e},function(i,d,e){var n=e(105),h=e(136),r=e(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function l(){var u=new ArrayBuffer(4),c=new Uint8Array(u),f=new Uint32Array(u);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,f[0]===3569595041?!0:f[0]===2712847316?!1:null}function a(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(f){o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var u=!1,c=function(){if(window.WebGLRenderingContext)try{var f=r.createWebGL(this),v=f.getContext("webgl")||f.getContext("experimental-webgl"),p=r.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return u=m.data instanceof Uint8ClampedArray,r.remove(f),r.remove(p),!!v}catch(x){return!1}return!1};return o.webGL=c(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,h.firefox&&h.firefoxVersion<21&&(o.getUserMedia=!1),!n.iOS&&(h.ie||h.firefox||h.chrome)&&(o.canvasBitBltShift=!0),(h.safari||h.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(o.littleEndian=l()),o.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&o.littleEndian!==null&&u,o}i.exports=a()},function(i,d){var e="",n=function(){var h=function(a){for(var u=["i","webkitI","msI","mozI","oI"],c=0;c<u.length;c++){var f=u[c]+"mageSmoothingEnabled";if(f in a)return f}return null},r=function(a){return e===""&&(e=h(a)),e&&(a[e]=!0),a},o=function(a){return e===""&&(e=h(a)),e&&(a[e]=!1),a},l=function(a){return e!==null?a[e]:null};return{disable:o,enable:r,getPrefix:h,isEnabled:l}};i.exports=n()},function(i,d,e){var n=e(14),h=e(17),r={Angle:e(812),Distance:e(821),Easing:e(826),Fuzzy:e(827),Interpolation:e(830),Pow2:e(835),Snap:e(837),RandomDataGenerator:e(839),Average:e(840),Bernstein:e(356),Between:e(195),CatmullRom:e(194),CeilTo:e(841),Clamp:e(18),DegToRad:e(36),Difference:e(842),Euler:e(843),Factorial:e(357),FloatBetween:e(137),FloorTo:e(844),FromPercent:e(98),GetSpeed:e(845),IsEven:e(846),IsEvenStrict:e(847),Linear:e(135),MaxAdd:e(848),Median:e(849),MinSub:e(850),Percent:e(851),RadToDeg:e(196),RandomXY:e(852),RandomXYZ:e(853),RandomXYZW:e(854),Rotate:e(362),RotateAround:e(308),RotateAroundDistance:e(182),RotateTo:e(855),RoundAwayFromZero:e(363),RoundTo:e(856),SinCosTableGenerator:e(857),SmootherStep:e(183),SmoothStep:e(184),ToXY:e(858),TransformXY:e(177),Within:e(859),Wrap:e(68),Vector2:e(3),Vector3:e(39),Vector4:e(140),Matrix3:e(364),Matrix4:e(69),Quaternion:e(365),RotateVec3:e(860)};r=h(!1,r,n),i.exports=r},function(i,d){var e=function(n,h,r,o,l){var a=(o-h)*.5,u=(l-r)*.5,c=n*n,f=n*c;return(2*r-2*o+a+u)*f+(-3*r+3*o-2*a-u)*c+a*n+r};i.exports=e},function(i,d){var e=function(n,h){return Math.floor(Math.random()*(h-n+1)+n)};i.exports=e},function(i,d,e){var n=e(14),h=function(r){return r*n.RAD_TO_DEG};i.exports=h},function(i,d,e){var n={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};i.exports=n},function(i,d,e){var n=e(0),h=new n({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(r){return this._matrix=r,this._dirty=!0,this},reset:function(){var r=this._matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=1,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=1,r[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var r=new Float32Array(this._matrix);r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._data=r,this._dirty=!1}return this._data},brightness:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var l=r;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],o)},saturate:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var l=r*2/3+1,a=(l-1)*-.5;return this.multiply([l,a,a,0,0,a,l,a,0,0,a,a,l,0,0,0,0,0,1,0],o)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1),r=r/180*Math.PI;var l=Math.cos(r),a=Math.sin(r),u=.213,c=.715,f=.072;return this.multiply([u+l*(1-u)+a*-u,c+l*-c+a*-c,f+l*-f+a*(1-f),0,0,u+l*-u+a*.143,c+l*(1-c)+a*.14,f+l*-f+a*-.283,0,0,u+l*-u+a*-(1-u),c+l*-c+a*c,f+l*(1-f)+a*f,0,0,0,0,0,1,0],o)},grayscale:function(r,o){return r===void 0&&(r=1),o===void 0&&(o=!1),this.saturate(-r,o)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},contrast:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var l=r+1,a=-.5*(l-1);return this.multiply([l,0,0,0,a,0,l,0,0,a,0,0,l,0,a,0,0,0,1,0],o)},negative:function(r){return r===void 0&&(r=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},night:function(r,o){return r===void 0&&(r=.1),o===void 0&&(o=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],o)},lsd:function(r){return r===void 0&&(r=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},brown:function(r){return r===void 0&&(r=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},multiply:function(r,o){o||this.reset();for(var l=this._matrix,a=[],u=0;u<20;u++)a[u]=l[u];return l[0]=a[0]*r[0]+a[1]*r[5]+a[2]*r[10]+a[3]*r[15],l[1]=a[0]*r[1]+a[1]*r[6]+a[2]*r[11]+a[3]*r[16],l[2]=a[0]*r[2]+a[1]*r[7]+a[2]*r[12]+a[3]*r[17],l[3]=a[0]*r[3]+a[1]*r[8]+a[2]*r[13]+a[3]*r[18],l[4]=a[0]*r[4]+a[1]*r[9]+a[2]*r[14]+a[3]*r[19]+a[4],l[5]=a[5]*r[0]+a[6]*r[5]+a[7]*r[10]+a[8]*r[15],l[6]=a[5]*r[1]+a[6]*r[6]+a[7]*r[11]+a[8]*r[16],l[7]=a[5]*r[2]+a[6]*r[7]+a[7]*r[12]+a[8]*r[17],l[8]=a[5]*r[3]+a[6]*r[8]+a[7]*r[13]+a[8]*r[18],l[9]=a[5]*r[4]+a[6]*r[9]+a[7]*r[14]+a[8]*r[19]+a[9],l[10]=a[10]*r[0]+a[11]*r[5]+a[12]*r[10]+a[13]*r[15],l[11]=a[10]*r[1]+a[11]*r[6]+a[12]*r[11]+a[13]*r[16],l[12]=a[10]*r[2]+a[11]*r[7]+a[12]*r[12]+a[13]*r[17],l[13]=a[10]*r[3]+a[11]*r[8]+a[12]*r[13]+a[13]*r[18],l[14]=a[10]*r[4]+a[11]*r[9]+a[12]*r[14]+a[13]*r[19]+a[14],l[15]=a[15]*r[0]+a[16]*r[5]+a[17]*r[10]+a[18]*r[15],l[16]=a[15]*r[1]+a[16]*r[6]+a[17]*r[11]+a[18]*r[16],l[17]=a[15]*r[2]+a[16]*r[7]+a[17]*r[12]+a[18]*r[17],l[18]=a[15]*r[3]+a[16]*r[8]+a[17]*r[13]+a[18]*r[18],l[19]=a[15]*r[4]+a[16]*r[9]+a[17]*r[14]+a[18]*r[19]+a[19],this._dirty=!0,this}});i.exports=h},function(i,d,e){var n=e(10),h=e(14),r=function(o,l){if(l===void 0&&(l=new n),o.length===0)return l;for(var a=Number.MAX_VALUE,u=Number.MAX_VALUE,c=h.MIN_SAFE_INTEGER,f=h.MIN_SAFE_INTEGER,v,p,g,m=0;m<o.length;m++)v=o[m],Array.isArray(v)?(p=v[0],g=v[1]):(p=v.x,g=v.y),a=Math.min(a,p),u=Math.min(u,g),c=Math.max(c,p),f=Math.max(f,g);return l.x=a,l.y=u,l.width=c-a,l.height=f-u,l};i.exports=r},function(i,d,e){var n=e(0),h=e(1),r=new n({initialize:function(l,a,u){this._rgb=[0,0,0],this.onChangeCallback=h,this.dirty=!1,this.set(l,a,u)},set:function(o,l,a){return o===void 0&&(o=0),l===void 0&&(l=0),a===void 0&&(a=0),this._rgb=[o,l,a],this.onChange(),this},equals:function(o,l,a){var u=this._rgb;return u.r===o&&u.g===l&&u.b===a},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});i.exports=r},function(i,d,e){var n={CENTER:e(403),ORIENTATION:e(404),SCALE_MODE:e(405),ZOOM:e(406)};i.exports=n},function(i,d){var e=function(n){n.parentNode&&n.parentNode.removeChild(n)};i.exports=e},function(i,d){var e={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};i.exports=e},function(i,d,e){var n=e(0),h=e(144),r=e(197),o=e(20),l=e(419),a=e(420),u=e(33),c=e(1),f=e(421),v=new n({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=f.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(p){this.settings.status=h.INIT,this.sceneUpdate=c,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,r.Global,[r.CoreScene,a(this),l(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(o.PRE_UPDATE,p,g),m.emit(o.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(o.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(o.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(o.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=h.PAUSED,m.active=!1,g.emit(o.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=h.RUNNING,m.active=!0,g.emit(o.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=h.SLEEPING,m.active=!1,m.visible=!1,g.emit(o.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=h.RUNNING,m.active=!0,m.visible=!0,g.emit(o.WAKE,this,p),m.isTransition&&g.emit(o.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===h.SLEEPING},isActive:function(){return this.settings.status===h.RUNNING},isPaused:function(){return this.settings.status===h.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=h.START,m.active=!0,m.visible=!0,g.emit(o.START,this),g.emit(o.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(o.TRANSITION_INIT),g.off(o.TRANSITION_START),g.off(o.TRANSITION_COMPLETE),g.off(o.TRANSITION_OUT),m.status=h.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===u.WEBGL&&this.renderer.resetTextures(!0),g.emit(o.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=h.DESTROYED,g.active=!1,g.visible=!1,p.emit(o.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});i.exports=v},function(i,d){var e=function(n){return n&&n[0].toUpperCase()+n.slice(1)};i.exports=e},function(i,d,e){var n=e(33),h=e(0),r=e(109),o=e(424),l="Texture.frame missing: ",a=new h({initialize:function(c,f,v,p,g){Array.isArray(v)||(v=[v]),this.manager=c,this.key=f,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<v.length;m++)this.source.push(new o(this,v[m],p,g))},add:function(u,c,f,v,p,g){if(this.has(u))return null;var m=new r(this,u,c,f,v,p,g);return this.frames[u]=m,this.firstFrame==="__BASE"&&(this.firstFrame=u),this.frameTotal++,m},remove:function(u){if(this.has(u)){var c=this.get(u);return c.destroy(),delete this.frames[u],!0}return!1},has:function(u){return this.frames[u]},get:function(u){u||(u=this.firstFrame);var c=this.frames[u];return c||(console.warn(l+u),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(u){for(var c=0;c<this.source.length;c++)if(this.source[c]===u)return c;return-1},getFramesFromTextureSource:function(u,c){c===void 0&&(c=!1);var f=[];for(var v in this.frames)if(!(v==="__BASE"&&!c)){var p=this.frames[v];p.sourceIndex===u&&f.push(p)}return f},getFrameNames:function(u){u===void 0&&(u=!1);var c=Object.keys(this.frames);if(!u){var f=c.indexOf("__BASE");f!==-1&&c.splice(f,1)}return c},getSourceImage:function(u){(u==null||this.frameTotal===1)&&(u="__BASE");var c=this.frames[u];return c?c.source.image:(console.warn(l+u),this.frames.__BASE.source.image)},getDataSourceImage:function(u){(u==null||this.frameTotal===1)&&(u="__BASE");var c=this.frames[u],f;return c?f=c.sourceIndex:(console.warn(l+u),f=this.frames.__BASE.sourceIndex),this.dataSource[f].image},setDataSource:function(u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var f=this.source[c];this.dataSource.push(new o(this,u[c],f.width,f.height))}},setFilter:function(u){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(u);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(u)},destroy:function(){var u;for(u=0;u<this.source.length;u++)this.source[u].destroy();for(u=0;u<this.dataSource.length;u++)this.dataSource[u].destroy();for(var c in this.frames){var f=this.frames[c];f.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var v=this.manager.game.renderer;v&&v.type===n.WEBGL&&v.resetTextures(!0),this.manager=null}});i.exports=a},function(i,d,e){var n=e(78),h=function(r,o,l,a,u){a===void 0&&(a=0),u===void 0&&(u=r.length);var c=[];if(n(r,a,u))for(var f=a;f<u;f++){var v=r[f];(!o||o&&l===void 0&&v.hasOwnProperty(o)||o&&l!==void 0&&v[o]===l)&&c.push(v)}return c};i.exports=h},function(i,d,e){i.exports={Matrix:e(1013),Add:e(1021),AddAt:e(1022),BringToTop:e(1023),CountAllMatching:e(1024),Each:e(1025),EachInRange:e(1026),FindClosestInSorted:e(318),GetAll:e(207),GetFirst:e(428),GetRandom:e(210),MoveDown:e(1027),MoveTo:e(1028),MoveUp:e(1029),MoveAbove:e(1030),MoveBelow:e(1031),NumberArray:e(322),NumberArrayStep:e(1032),QuickSelect:e(436),Range:e(437),Remove:e(93),RemoveAt:e(1033),RemoveBetween:e(1034),RemoveRandomElement:e(1035),Replace:e(1036),RotateLeft:e(178),RotateRight:e(179),SafeRange:e(78),SendToBack:e(1037),SetAll:e(1038),Shuffle:e(131),SortByDigits:e(320),SpliceOne:e(74),StableSort:e(79),Swap:e(1039)}},function(i,d){var e=function(n){if(!Array.isArray(n)||n.length<2||!Array.isArray(n[0]))return!1;for(var h=n[0].length,r=1;r<n.length;r++)if(n[r].length!==h)return!1;return!0};i.exports=e},function(i,d){var e=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=n.length);var o=h+Math.floor(Math.random()*r);return n[o]===void 0?null:n[o]};i.exports=e},function(i,d,e){var n=e(0),h=e(9),r=e(438),o=new n({Extends:h,initialize:function(){h.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(l){return this._pending.push(l),this._toProcess++,l},remove:function(l){return this._destroy.push(l),this._toProcess++,l},removeAll:function(){for(var l=this._active,a=this._destroy,u=l.length;u--;)a.push(l[u]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l=this._destroy,a=this._active,u,c;for(u=0;u<l.length;u++){c=l[u];var f=a.indexOf(c);f!==-1&&(a.splice(f,1),this.emit(r.PROCESS_QUEUE_REMOVE,c))}for(l.length=0,l=this._pending,u=0;u<l.length;u++)c=l[u],(!this.checkQueue||this.checkQueue&&a.indexOf(c)===-1)&&(a.push(c),this.emit(r.PROCESS_QUEUE_ADD,c));return l.length=0,this._toProcess=0,a},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});i.exports=o},function(i,d){function e(h,r){return parseInt(h.getAttribute(r),10)}var n=function(h,r,o,l,a){o===void 0&&(o=0),l===void 0&&(l=0);var u=r.cutX,c=r.cutY,f=r.source.width,v=r.source.height,p=r.sourceIndex,g={},m=h.getElementsByTagName("info")[0],x=h.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=e(m,"size"),g.lineHeight=e(x,"lineHeight")+l,g.chars={};var y=h.getElementsByTagName("char"),T=r!==void 0&&r.trimmed;if(T)var C=r.height,S=r.width;for(var E=0;E<y.length;E++){var M=y[E],R=e(M,"id"),L=String.fromCharCode(R),O=e(M,"x"),F=e(M,"y"),D=e(M,"width"),B=e(M,"height");T&&(O<S&&(S=O),F<C&&(C=F)),T&&C!==0&&S!==0&&(O-=r.x,F-=r.y);var N=(u+O)/f,V=(c+F)/v,X=(u+O+D)/f,K=(c+F+B)/v;if(g.chars[R]={x:O,y:F,width:D,height:B,centerX:Math.floor(D/2),centerY:Math.floor(B/2),xOffset:e(M,"xoffset"),yOffset:e(M,"yoffset"),xAdvance:e(M,"xadvance")+o,data:{},kerning:{},u0:N,v0:V,u1:X,v1:K},a&&D!==0&&B!==0){var Z=a.add(L,p,O,F,D,B);Z&&Z.setUVs(D,B,N,V,X,K)}}var G=h.getElementsByTagName("kerning");for(E=0;E<G.length;E++){var w=G[E],b=e(w,"first"),Y=e(w,"second"),U=e(w,"amount");g.chars[Y].kerning[b]=U}return g};i.exports=n},function(i,d,e){var n=e(1049),h=e(440),r=e(0),o=e(11),l=e(109),a=e(15),u=e(110),c=new r({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,n],initialize:function(v,p,g,m,x){a.call(this,v,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new u,this.renderList=[],this.dirty=!1},create:function(f,v,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof l||(p=this.texture.get(p));var x=new h(this,f,v,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(f,v,p,g){for(var m=this.createMultiple(v,p,g),x=0;x<m.length;x++){var y=m[x];f.call(this,y,x)}return m},createMultiple:function(f,v,p){v===void 0&&(v=this.frame.name),p===void 0&&(p=!0),Array.isArray(v)||(v=[v]);var g=[],m=this;return v.forEach(function(x){for(var y=0;y<f;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(f){return f.visible&&f.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});i.exports=c},function(i,d,e){var n=e(208),h=e(35),r=e(0),o=e(11),l=e(75),a=e(15),u=e(10),c=e(1052),f=e(441),v=e(3),p=new r({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,c],initialize:function(m,x,y,T){a.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new u),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new u,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?f(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(l.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(l.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new v),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new v(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return n.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return n.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),n.StableSort(this.list,m),this):this},getByName:function(g){return n.GetFirst(this.list,"name",g)},getRandom:function(g,m){return n.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return n.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return n.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return n.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return n.Swap(this.list,g,m),this},moveTo:function(g,m){return n.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return n.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return n.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=n.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=n.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=n.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return n.BringToTop(this.list,g),this},sendToBack:function(g){return n.SendToBack(this.list,g),this},moveUp:function(g){return n.MoveUp(this.list,g),this},moveDown:function(g){return n.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(g,m,x){var y=n.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return n.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<C;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(n.SetAll(this.list,"scrollFactorX",g),n.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});i.exports=p},function(i,d,e){var n=e(148),h=e(0),r=e(1057),o=new h({Extends:n,Mixins:[r],initialize:function(a,u,c,f,v,p,g){n.call(this,a,u,c,f,v,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,a){return this.cropWidth=l,this.cropHeight=a,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});i.exports=o},function(i,d,e){var n=e(133),h=e(0),r=e(217),o=e(303),l=e(304),a=e(305),u=e(309),c=e(167),f=e(312),v=e(313),p=e(314),g=e(111),m=e(15),x=e(2),y=e(6),T=e(14),C=e(1063),S=new h({Extends:m,Mixins:[o,l,a,u,c,v,p,f,C],initialize:function(M,R){var L=y(R,"x",0),O=y(R,"y",0);m.call(this,M,"Graphics"),this.setPosition(L,O),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(R)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,M,R){return R===void 0&&(R=1),this.commandBuffer.push(r.LINE_STYLE,E,M,R),this._lineWidth=E,this},fillStyle:function(E,M){return M===void 0&&(M=1),this.commandBuffer.push(r.FILL_STYLE,E,M),this},fillGradientStyle:function(E,M,R,L,O,F,D,B){return O===void 0&&(O=1),F===void 0&&(F=O),D===void 0&&(D=O),B===void 0&&(B=O),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,O,F,D,B,E,M,R,L),this},lineGradientStyle:function(E,M,R,L,O,F){return F===void 0&&(F=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,E,F,M,R,L,O),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,M,R){return this.beginPath(),this.arc(E,M,R,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,M,R){return this.beginPath(),this.arc(E,M,R,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,M,R,L){return this.commandBuffer.push(r.FILL_RECT,E,M,R,L),this},strokeRect:function(E,M,R,L){var O=this._lineWidth/2,F=E-O,D=E+O;return this.beginPath(),this.moveTo(E,M),this.lineTo(E,M+L),this.strokePath(),this.beginPath(),this.moveTo(E+R,M),this.lineTo(E+R,M+L),this.strokePath(),this.beginPath(),this.moveTo(F,M),this.lineTo(D+R,M),this.strokePath(),this.beginPath(),this.moveTo(F,M+L),this.lineTo(D+R,M+L),this.strokePath(),this},fillRoundedRect:function(E,M,R,L,O){O===void 0&&(O=20);var F=O,D=O,B=O,N=O;return typeof O!="number"&&(F=x(O,"tl",20),D=x(O,"tr",20),B=x(O,"bl",20),N=x(O,"br",20)),this.beginPath(),this.moveTo(E+F,M),this.lineTo(E+R-D,M),this.arc(E+R-D,M+D,D,-T.TAU,0),this.lineTo(E+R,M+L-N),this.arc(E+R-N,M+L-N,N,0,T.TAU),this.lineTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+F),this.arc(E+F,M+F,F,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,M,R,L,O){O===void 0&&(O=20);var F=O,D=O,B=O,N=O;return typeof O!="number"&&(F=x(O,"tl",20),D=x(O,"tr",20),B=x(O,"bl",20),N=x(O,"br",20)),this.beginPath(),this.moveTo(E+F,M),this.lineTo(E+R-D,M),this.moveTo(E+R-D,M),this.arc(E+R-D,M+D,D,-T.TAU,0),this.lineTo(E+R,M+L-N),this.moveTo(E+R,M+L-N),this.arc(E+R-N,M+L-N,N,0,T.TAU),this.lineTo(E+B,M+L),this.moveTo(E+B,M+L),this.arc(E+B,M+L-B,B,T.TAU,Math.PI),this.lineTo(E,M+F),this.moveTo(E,M+F),this.arc(E+F,M+F,F,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,M){return this.fillPoint(E.x,E.y,M)},fillPoint:function(E,M,R){return!R||R<1?R=1:(E-=R/2,M-=R/2),this.commandBuffer.push(r.FILL_RECT,E,M,R,R),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,M,R,L,O,F){return this.commandBuffer.push(r.FILL_TRIANGLE,E,M,R,L,O,F),this},strokeTriangle:function(E,M,R,L,O,F){return this.commandBuffer.push(r.STROKE_TRIANGLE,E,M,R,L,O,F),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,M,R,L){return this.beginPath(),this.moveTo(E,M),this.lineTo(R,L),this.strokePath(),this},lineTo:function(E,M){return this.commandBuffer.push(r.LINE_TO,E,M),this},moveTo:function(E,M){return this.commandBuffer.push(r.MOVE_TO,E,M),this},strokePoints:function(E,M,R,L){M===void 0&&(M=!1),R===void 0&&(R=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var O=1;O<L;O++)this.lineTo(E[O].x,E[O].y);return M&&this.lineTo(E[0].x,E[0].y),R&&this.closePath(),this.strokePath(),this},fillPoints:function(E,M,R,L){M===void 0&&(M=!1),R===void 0&&(R=!1),L===void 0&&(L=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var O=1;O<L;O++)this.lineTo(E[O].x,E[O].y);return M&&this.lineTo(E[0].x,E[0].y),R&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,M){M===void 0&&(M=32);var R=E.getPoints(M);return this.strokePoints(R,!0)},strokeEllipse:function(E,M,R,L,O){O===void 0&&(O=32);var F=new g(E,M,R,L),D=F.getPoints(O);return this.strokePoints(D,!0)},fillEllipseShape:function(E,M){M===void 0&&(M=32);var R=E.getPoints(M);return this.fillPoints(R,!0)},fillEllipse:function(E,M,R,L,O){O===void 0&&(O=32);var F=new g(E,M,R,L),D=F.getPoints(O);return this.fillPoints(D,!0)},arc:function(E,M,R,L,O,F,D){return F===void 0&&(F=!1),D===void 0&&(D=0),this.commandBuffer.push(r.ARC,E,M,R,L,O,F,D),this},slice:function(E,M,R,L,O,F,D){return F===void 0&&(F=!1),D===void 0&&(D=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,E,M),this.commandBuffer.push(r.ARC,E,M,R,L,O,F,D),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(E,M){return this.commandBuffer.push(r.TRANSLATE,E,M),this},scaleCanvas:function(E,M){return this.commandBuffer.push(r.SCALE,E,M),this},rotateCanvas:function(E){return this.commandBuffer.push(r.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,M,R){var L=this.scene.sys,O=L.game.renderer;M===void 0&&(M=L.scale.width),R===void 0&&(R=L.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,M,R),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var F,D;if(typeof E=="string")if(L.textures.exists(E)){F=L.textures.get(E);var B=F.getSourceImage();B instanceof HTMLCanvasElement&&(D=B.getContext("2d"))}else F=L.textures.createCanvas(E,M,R),D=F.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(D=E.getContext("2d"));return D&&(this.renderCanvas(O,this,S.TargetCamera,null,D,!1),F&&F.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new n,i.exports=S},function(i,d){i.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(i,d,e){var n=e(4),h=function(r,o,l){l===void 0&&(l=new n);var a=r.width/2,u=r.height/2;return l.x=r.x+a*Math.cos(o),l.y=r.y+u*Math.sin(o),l};i.exports=h},function(i,d,e){var n=e(35),h=e(0),r=e(11),o=e(176),l=e(101),a=e(9),u=e(75),c=e(110),f=e(1071),v=e(20),p=e(79),g=new h({Extends:c,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,a,f],initialize:function(x,y){c.call(this,x),a.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(m,x){return this.data||(this.data=new l(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new l(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new l(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new l(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(u.ADDED_TO_SCENE,m,this.scene),this.events.emit(v.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(u.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(u.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});i.exports=g},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(450),l=e(110),a=e(452),u=e(1075),c=new n({Extends:r,Mixins:[h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,u],initialize:function(v,p,g,m){if(r.call(this,v,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new l(this),this.wells=new l(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(f,v){return this.texture=this.scene.sys.textures.get(f),this.setFrame(v)},setFrame:function(f){this.frame=this.texture.get(f);var v=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return v.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(f,v){Array.isArray(f)||(f=[f]);var p=v.frames;p.length=0;for(var g=0;g<f.length;g++){var m=f[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?v.defaultFrame=p[0]:v.defaultFrame=this.defaultFrame,this},addEmitter:function(f){return this.emitters.add(f)},createEmitter:function(f){return this.addEmitter(new a(this,f))},removeEmitter:function(f){return this.emitters.remove(f,!0)},addGravityWell:function(f){return this.wells.add(f)},createGravityWell:function(f){return this.addGravityWell(new o(f))},emitParticle:function(f,v,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(f,v,p)}return this},emitParticleAt:function(f,v,p){return this.emitParticle(p,f,v)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(f,v){v*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(f,v)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});i.exports=c},function(i,d,e){var n=e(35),h=e(133),r=e(31),o=e(0),l=e(11),a=e(33),u=e(109),c=e(15),f=e(1),v=e(92),p=e(1079),g=e(141),m=e(12),x=e(222),y=new o({Extends:c,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,p],initialize:function(C,S,E,M,R,L,O){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=32),R===void 0&&(R=32),c.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,L===void 0?(this.canvas=r.create2D(this,M,R),this.texture=C.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(L),this.frame=this.texture.get(O),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new h(0,0,M,R),this.renderTarget=null;var F=this.renderer;F?F.type===a.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(F,M,R,1,0,!1)):F.type===a.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=f,this.camera.setScene(C),this.setPosition(S,E),L===void 0&&this.setSize(M,R),this.setOrigin(0,0),this.initPipeline(v.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var M=this.texture.getSourceImage();S.cutX+T>M.width&&(T=M.width-S.cutX),S.cutY+C>M.height&&(C=M.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var R=this.input;return R&&!R.customHitArea&&(R.hitArea.width=T,R.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,M,R){var L=this.frame,O=this.camera,F=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=L.cutWidth),R===void 0&&(R=L.cutHeight);var D=(T>>16&255)/255,B=(T>>8&255)/255,N=(T&255)/255,V=this.renderTarget;if(O.preRender(),V){V.bind(!0);var X=this.pipeline;X.manager.set(X);var K=V.width,Z=V.height,G=F.width,w=F.height,b=G/K,Y=w/Z;X.drawFillRect(S*b,E*Y,M*b,R*Y,m.getTintFromFloats(N,B,D,1),C),V.unbind(!0)}else{var U=this.context;F.setContext(U),U.fillStyle="rgba("+D+","+B+","+N+","+C+")",U.fillRect(S+L.cutX,E+L.cutY,M,R),F.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,M){return this.beginDraw(),this.batchDraw(T,C,S,E,M),this.endDraw(),this},drawFrame:function(T,C,S,E,M,R){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,M,R),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,M){return E===void 0&&(E=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,M),this},batchDrawFrame:function(T,C,S,E,M,R){S===void 0&&(S=0),E===void 0&&(E=0),M===void 0&&(M=this.globalAlpha),R===void 0?R=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):R=(R>>16)+(R&65280)+((R&255)<<16);var L=this.textureManager.getFrame(T,C);return L&&(this.renderTarget?this.pipeline.batchTextureFrame(L,S,E,R,M,this.camera.matrix,null):this.batchTextureFrame(L,S+this.frame.cutX,E+this.frame.cutY,M,R)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),M=C.pipelines.setUtility();M.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,M){for(var R=0;R<T.length;R++){var L=T[R];!L||L===this||(L.renderWebGL||L.renderCanvas?this.drawGameObject(L,C,S):L.isParent||L.list?this.batchGroup(L.getChildren(),C,S):typeof L=="string"?this.batchTextureFrameKey(L,null,C,S,E,M):L instanceof u?this.batchTextureFrame(L,C,S,E,M):Array.isArray(L)&&this.batchList(L,C,S,E,M))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var M=T[E];if(M.willRender(this.camera)){var R=M.x+C,L=M.y+S;this.drawGameObject(M,R,L)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,M)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,M=T.y;if(this._eraseMode){var R=T.blendMode;T.blendMode=n.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,M),this._eraseMode&&(T.blendMode=R)},batchTextureFrameKey:function(T,C,S,E,M,R){var L=this.textureManager.getFrame(T,C);L&&this.batchTextureFrame(L,S,E,M,R)},batchTextureFrame:function(T,C,S,E,M){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(T,C,S,M,E,this.camera.matrix,null);else{var L=this.context,O=T.canvasData,F=T.source.image,D=this.camera.matrix;L.save(),L.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",L.globalAlpha=E,D.setToContext(L),L.drawImage(F,O.x,O.y,O.width,O.height,C,S,O.width,O.height),L.restore()}},snapshotArea:function(T,C,S,E,M,R,L){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,M,!1,T,C,S,E,R,L):this.renderer.snapshotCanvas(this.canvas,M,!1,T,C,S,E,R,L),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});i.exports=y},function(i,d){var e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var h=Math.random()*16|0,r=n==="x"?h:h&3|8;return r.toString(16)})};i.exports=e},function(i,d,e){var n=e(164),h=e(0),r=e(11),o=e(15),l=e(92),a=e(1085),u=e(3),c=new h({Extends:o,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,a],initialize:function(v,p,g,m,x,y,T,C,S){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),o.call(this,v,"Rope"),this.anims=new n(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new u,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,v){var p=this.anims.currentFrame;this.anims.update(f,v),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(f,v,p){return this.anims.play(f,v,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(f,v,p){return f===void 0&&(f=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(f,v,p))},setVertical:function(f,v,p){return f===void 0&&(f=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(f,v,p)):this},setTintFill:function(f){return f===void 0&&(f=!1),this.tintFill=f,this},setAlphas:function(f,v){var p=this.points.length;if(p<1)return this;var g=this.alphas;f===void 0?f=[1]:!Array.isArray(f)&&v===void 0&&(f=[f]);var m,x=0;if(v!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=f,g[x+1]=v;else if(f.length===p)for(m=0;m<p;m++)x=m*2,g[x]=f[m],g[x+1]=f[m];else{var y=f[0];for(m=0;m<p;m++)x=m*2,f.length>x&&(y=f[x]),g[x]=y,f.length>x+1&&(y=f[x+1]),g[x+1]=y}return this},setColors:function(f){var v=this.points.length;if(v<1)return this;var p=this.colors;f===void 0?f=[16777215]:Array.isArray(f)||(f=[f]);var g,m=0;if(f.length===v)for(g=0;g<v;g++)m=g*2,p[m]=f[g],p[m+1]=f[g];else{var x=f[0];for(g=0;g<v;g++)m=g*2,f.length>m&&(x=f[m]),p[m]=x,f.length>m+1&&(x=f[m+1]),p[m+1]=x}return this},setPoints:function(f,v,p){if(f===void 0&&(f=2),typeof f=="number"){var g=f;g<2&&(g=2),f=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)f.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)f.push({x:0,y:y+m*x})}var T=f.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(f.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=f,this.updateUVs(),v!=null&&this.setColors(v),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var f=this.uv,v=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(v-1),T=(x-g)/(v-1),C=0;C<v;C++){var S=C*4,E,M,R,L;this.horizontal?(this._flipX?(E=m-C*y,R=m-C*y):(E=p+C*y,R=p+C*y),this._flipY?(M=x,L=g):(M=g,L=x)):(this._flipX?(E=p,R=m):(E=m,R=p),this._flipY?(M=x-C*T,L=x-C*T):(M=g+C*T,L=g+C*T)),f[S+0]=E,f[S+1]=M,f[S+2]=R,f[S+3]=L}return this},resizeArrays:function(f){var v=this.colors,p=this.alphas;this.vertices=new Float32Array(f*4),this.uv=new Float32Array(f*4),v=new Uint32Array(f*2),p=new Float32Array(f*2);for(var g=0;g<f*2;g++)v[g]=16777215,p[g]=1;return this.colors=v,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var f=this._perp,v=this.points,p=this.vertices,g=v.length;if(this.dirty=!1,!(g<1)){for(var m,x=v[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=v[T],S=T*4;T<g-1?m=v[T+1]:m=C,f.x=m.y-x.y,f.y=-(m.x-x.x);var E=f.length();f.x/=E,f.y/=E,f.x*=y,f.y*=y,p[S]=C.x+f.x,p[S+1]=C.y+f.y,p[S+2]=C.x-f.x,p[S+3]=C.y-f.y,x=C}return this}},setDebug:function(f,v){return this.debugGraphic=f,!f&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(f,v,p){var g=f.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var C=4;C<v;C+=4){var S=p[C+0],E=p[C+1],M=p[C+2],R=p[C+3];g.lineBetween(m,x,S,E),g.lineBetween(y,T,M,R),g.lineBetween(y,T,S,E),g.lineBetween(S,E,M,R),m=S,x=E,y=M,T=R}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(f){return this._flipX=f,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(f){return this._flipY=f,this.updateUVs()}}});i.exports=c},function(i,d,e){var n=e(142),h=e(31),r=e(0),o=e(11),l=e(22),a=e(15),u=e(458),c=e(6),f=e(202),v=e(1088),p=e(459),g=new r({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,v],initialize:function(x,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),a.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=h.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),x.sys.game.events.on(l.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",C=m.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var M=C[E],R="";M=M.replace(/^ *|\s*$/gi,"");var L=x.measureText(M).width;if(L<y){T+=M+`
`;continue}for(var O=y,F=M.split(" "),D=0;D<F.length;D++){var B=F[D],N=B+" ",V=x.measureText(N).width;if(V>O){if(D===0){for(var X=N;X.length&&(X=X.slice(0,-1),V=x.measureText(X).width,!(V<=O)););if(!X.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var K=B.substr(X.length);F[D]=K,R+=X}var Z=F[D].length?D:D+1,G=F.slice(Z).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=G+" "+(C[E+1]||""),S=C.length;break}else R+=N,O-=V}T+=R.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",C=m.split(this.splitRegExp),S=C.length-1,E=x.measureText(" ").width,M=0;M<=S;M++){for(var R=y,L=C[M].split(" "),O=L.length-1,F=0;F<=O;F++){var D=L[F],B=x.measureText(D).width,N=B;F<O&&(N+=E),N>R&&F>0&&(T+=`
`,R=y),T+=D,F<O?(T+=" ",R-=N):R-=B}M<S&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,C,S){return this.style.setShadow(m,x,y,T,C,S)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var C=m,S=c(C,"x",null);S!==null?(m=S,y=S):(m=c(C,"left",0),y=c(C,"right",m));var E=c(C,"y",null);E!==null?(x=E,T=E):(x=c(C,"top",0),T=c(C,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(m,x);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),M=u(this,C,E),R=this.padding,L;y.fixedWidth===0?(this.width=M.width+R.left+R.right,L=M.width):(this.width=y.fixedWidth,L=this.width-R.left-R.right,L<M.width&&(L=M.width)),y.fixedHeight===0?this.height=M.height+R.top+R.bottom:this.height=y.fixedHeight;var O=this.width,F=this.height;this.updateDisplayOrigin(),O*=T,F*=T,O=Math.max(O,1),F=Math.max(F,1),m.width!==O||m.height!==F?(m.width=O,m.height=F,this.frame.setSize(O,F),y.syncFont(m,x)):x.clearRect(0,0,O,F),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,O,F)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(R.left,R.top);for(var D,B,N=0;N<M.lines;N++){if(D=y.strokeThickness/2,B=y.strokeThickness/2+N*M.lineHeight+C.ascent,N>0&&(B+=M.lineSpacing*N),y.rtl)D=O-D;else if(y.align==="right")D+=L-M.lineWidths[N];else if(y.align==="center")D+=(L-M.lineWidths[N])/2;else if(y.align==="justify"){var V=.85;if(M.lineWidths[N]/M.width>=V){var X=M.width-M.lineWidths[N],K=x.measureText(" ").width,Z=E[N].trim(),G=Z.split(" ");X+=(E[N].length-Z.length)*K;for(var w=Math.floor(X/K),b=0;w>0;)G[b]+=" ",b=(b+1)%(G.length-1||1),--w;E[N]=G.join(" ")}}this.autoRound&&(D=Math.round(D),B=Math.round(B)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[N],D,B)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[N],D,B))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var Y=this.input;return Y&&!Y.customHitArea&&(Y.hitArea.width=this.width,Y.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=o.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&f(this.canvas),h.remove(this.canvas),this.texture.destroy()}});i.exports=g},function(i,d,e){var n=e(31),h=e(0),r=e(11),o=e(22),l=e(15),a=e(361),u=e(192),c=e(1091),f=e(3),v=8,p=new h({Extends:l,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,c],initialize:function(m,x,y,T,C,S,E){var M=m.sys.renderer;l.call(this,m,"TileSprite");var R=m.sys.textures.get(S),L=R.get(E);!T||!C?(T=L.width,C=L.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new f,this._tileScale=new f(1,1),this.dirty=!1,this.renderer=M,this.canvas=n.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=R,this.displayFrame=L,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=a(L.width),this.potHeight=a(L.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(o.CONTEXT_RESTORED,function(O){if(!!O){var F=O.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=O.createTexture2D(0,F.LINEAR,F.LINEAR,F.REPEAT,F.REPEAT,F.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=a(m.width),this.potHeight=a(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||u.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-C),m.fillStyle=this.fillPattern,m.fillRect(T,C,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});i.exports=p},function(i,d,e){var n=e(0),h=e(18),r=e(11),o=e(75),l=e(22),a=e(51),u=e(15),c=e(70),f=e(222),v=e(1094),p=e(14),g=new n({Extends:u,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,v],initialize:function(x,y,T,C){u.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=f(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=x.sys.game.events;S.on(l.PAUSE,this.globalPause,this),S.on(l.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(c.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(m,x,y,T,C){x===void 0&&(x=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,C)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,M=this.snapshotTexture;return M?(M.setSize(C,S),E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)):(M=this.scene.sys.textures.createCanvas(f(),C,S),this.snapshotTexture=M,E&&M.context.drawImage(E,m,x,y,T,0,0,C,S)),M.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch(C){T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(a.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(o.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==Infinity&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==Infinity&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=h(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(!!m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(l.PAUSE,this.globalPause,this),m.off(l.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(c.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});i.exports=g},function(i,d,e){var n=e(0),h=e(228),r=e(470),o=e(56),l=new n({initialize:function(u){this.type=o.POLYGON,this.area=0,this.points=[],u&&this.setTo(u)},contains:function(a,u){return h(this,a,u)},setTo:function(a){if(this.area=0,this.points=[],typeof a=="string"&&(a=a.split(" ")),!Array.isArray(a))return this;for(var u,c=Number.MAX_VALUE,f=0;f<a.length;f++)u={x:0,y:0},typeof a[f]=="number"||typeof a[f]=="string"?(u.x=parseFloat(a[f]),u.y=parseFloat(a[f+1]),f++):Array.isArray(a[f])?(u.x=a[f][0],u.y=a[f][1]):(u.x=a[f].x,u.y=a[f].y),this.points.push(u),u.y<c&&(c=u.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var a=0,u,c,f=0;f<this.points.length-1;f++)u=this.points[f],c=this.points[f+1],a+=(c.x-u.x)*(u.y+c.y);return u=this.points[0],c=this.points[this.points.length-1],a+=(u.x-c.x)*(c.y+u.y),this.area=-a*.5,this.area},getPoints:function(a,u,c){return r(this,a,u,c)}});i.exports=l},function(i,d){var e=function(n,h,r){for(var o=!1,l=-1,a=n.points.length-1;++l<n.points.length;a=l){var u=n.points[l].x,c=n.points[l].y,f=n.points[a].x,v=n.points[a].y;(c<=r&&r<v||v<=r&&r<c)&&h<(f-u)*(r-c)/(v-c)+u&&(o=!o)}return o};i.exports=e},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(2),l=e(17),a=e(478),u=e(1176),c=e(25),f=new n({Extends:r,Mixins:[h.ComputedSize,h.Depth,h.GetBounds,h.Mask,h.Origin,h.ScrollFactor,h.Transform,h.Visible,u],initialize:function(p,g,m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),r.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(v){return this.renderToTexture?!0:!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(v,p,g){if(p===void 0&&(p=[]),typeof v=="string"){var m=this.scene.sys.cache.shader;if(!m.has(v))return console.warn("Shader missing: "+v),this;this.shader=m.get(v)}else this.shader=v;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,p,g,m){var x=-1e3,y=1e3,T=1/(v-p),C=1/(g-m),S=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(v+p)*T,E[13]=(m+g)*C,E[14]=(y+x)*S;var M=this.program,R=this.gl,L=this.renderer;L.setProgram(M),R.uniformMatrix4fv(R.getUniformLocation(M,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var v=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=v.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(v,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[v];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(v,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[v],C=y.source;T.textureKey=p,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(m||(m={}),m.width=C.width,m.height=C.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(v,p){return a(this.uniforms,v,p),this},getUniform:function(v){return o(this.uniforms,v,null)},setChannel0:function(v,p){return this.setSampler2D("iChannel0",v,0,p)},setChannel1:function(v,p){return this.setSampler2D("iChannel1",v,1,p)},setChannel2:function(v,p){return this.setSampler2D("iChannel2",v,2,p)},setChannel3:function(v,p){return this.setSampler2D("iChannel3",v,3,p)},initSampler2D:function(v){if(!!v.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,v.value);var g=v.textureData;if(g&&!v.value.isRenderTexture){var m=p[o(g,"magFilter","linear").toUpperCase()],x=p[o(g,"minFilter","linear").toUpperCase()],y=p[o(g,"wrapS","repeat").toUpperCase()],T=p[o(g,"wrapT","repeat").toUpperCase()],C=p[o(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=o(g,"width",512),E=o(g,"height",2),M=o(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,C,S,E,M,C,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,C,p.RGBA,p.UNSIGNED_BYTE,v.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(v.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var v=this.gl,p=this.uniforms,g,m,x,y,T,C=0;for(var S in p)g=p[S],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(v,y,g.transpose,T):x.call(v,y,T):m===2?x.call(v,y,T.x,T.y):m===3?x.call(v,y,T.x,T.y,T.z):m===4?x.call(v,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+C),v.bindTexture(v.TEXTURE_2D,T),v.uniform1i(y,C),C++))},load:function(v){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=v[0],T[1]=v[1],T[4]=v[2],T[5]=v[3],T[8]=v[4],T[9]=v[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,M=E.resolution;M.value.x=g,M.value.y=m,E.time.value=x.game.loop.getDuration();var R=this.pointer;if(R){var L=E.mouse,O=R.x/g,F=1-R.y/m;L.value.x=O.toFixed(2),L.value.y=F.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var C=m.getAttribLocation(g,"inPosition");C!==-1&&(m.enableVertexAttribArray(C),m.vertexAttribPointer(C,2,m.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=p,S[4]=v,S[5]=p,S[8]=v,S[9]=p,S[10]=v;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var v=this.gl;v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});i.exports=f},function(i,d,e){var n=e(0),h=e(11),r=e(36),o=e(116),l=e(15),a=e(479),u=e(480),c=e(19),f=e(69),v=e(1179),p=e(79),g=e(39),m=e(117),x=new n({Extends:l,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,v],initialize:function(T,C,S,E,M,R,L,O,F,D,B,N){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),l.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new f,this.viewPosition=new g,this.viewMatrix=new f,this.projectionMatrix=new f,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var V=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,M),this.setSize(V.width,V.height),this.initPipeline(),this.setPerspective(V.width,V.height),R&&this.addVertices(R,L,O,F,D,B,N)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(r(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,M,R,L,O){var F=this.scene.sys.cache.obj.get(y);return F&&u(F,this,T,C,S,E,M,R,L,O),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,M,R){var L=new m(y,T,C,S,E,M,R);return this.vertices.push(L),L},addFace:function(y,T,C){var S=new o(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,M,R){var L=a(y,T,C,S,E,M,R);return L&&(this.faces=this.faces.concat(L.faces),this.vertices=this.vertices.concat(L.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=c(this,C).calc,E=this.faces,M=[],R=0;R<E.length;R++){var L=E[R];L.contains(y,T,S)&&M.push(L)}return p(M,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,M=y.y,R=y.z,L=T.x,O=T.y,F=T.z,D=C.x,B=C.y,N=C.z,V=this.getFaceCount(),X=S[0],K=S[1],Z=S[2],G=S[3],w=S[4],b=S[5],Y=S[6],U=S[7],W=S[8],H=S[9];return S[0]=E,S[1]=M,S[2]=R,S[3]=L,S[4]=O,S[5]=F,S[6]=D,S[7]=B,S[8]=N,S[9]=V,X!==E||K!==M||Z!==R||G!==L||w!==O||b!==F||Y!==D||U!==B||W!==N||H!==V},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var M=this.transformMatrix;M.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var R=E.z,L=this.faces,O=0;O<L.length;O++)L[O].transformCoordinatesLocal(M,T,C,R);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],M=E.vertex1.tx,R=E.vertex1.ty,L=E.vertex2.tx,O=E.vertex2.ty,F=E.vertex3.tx,D=E.vertex3.ty;C.strokeTriangle(M,R,L,O,F,D)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});i.exports=x},function(i,d,e){var n=e(50),h=function(r,o){return n(r.x,r.y,o.x,o.y)<=r.radius+o.radius};i.exports=h},function(i,d,e){var n=e(4),h=e(233),r=function(o,l,a){if(a===void 0&&(a=[]),h(o,l)){var u=o.x1,c=o.y1,f=o.x2,v=o.y2,p=l.x,g=l.y,m=l.radius,x=f-u,y=v-c,T=u-p,C=c-g,S=x*x+y*y,E=2*(x*T+y*C),M=T*T+C*C-m*m,R=E*E-4*S*M,L,O;if(R===0){var F=-E/(2*S);L=u+F*x,O=c+F*y,F>=0&&F<=1&&a.push(new n(L,O))}else if(R>0){var D=(-E-Math.sqrt(R))/(2*S);L=u+D*x,O=c+D*y,D>=0&&D<=1&&a.push(new n(L,O));var B=(-E+Math.sqrt(R))/(2*S);L=u+B*x,O=c+B*y,B>=0&&B<=1&&a.push(new n(L,O))}}return a};i.exports=r},function(i,d,e){var n=e(66),h=e(4),r=new h,o=function(l,a,u){if(u===void 0&&(u=r),n(a,l.x1,l.y1))return u.x=l.x1,u.y=l.y1,!0;if(n(a,l.x2,l.y2))return u.x=l.x2,u.y=l.y2,!0;var c=l.x2-l.x1,f=l.y2-l.y1,v=a.x-l.x1,p=a.y-l.y1,g=c*c+f*f,m=c,x=f;if(g>0){var y=(v*c+p*f)/g;m*=y,x*=y}u.x=l.x1+m,u.y=l.y1+x;var T=m*m+x*x;return T<=g&&m*c+x*f>=0&&n(a,u.x,u.y)};i.exports=o},function(i,d,e){var n=e(4),h=e(96),r=e(488),o=function(l,a,u){if(u===void 0&&(u=[]),r(l,a))for(var c=a.getLineA(),f=a.getLineB(),v=a.getLineC(),p=a.getLineD(),g=[new n,new n,new n,new n],m=[h(c,l,g[0]),h(f,l,g[1]),h(v,l,g[2]),h(p,l,g[3])],x=0;x<4;x++)m[x]&&u.push(g[x]);return u};i.exports=o},function(i,d){var e=function(n,h,r,o){r===void 0&&(r=!1),o===void 0&&(o=[]);for(var l=n.x3-n.x1,a=n.y3-n.y1,u=n.x2-n.x1,c=n.y2-n.y1,f=l*l+a*a,v=l*u+a*c,p=u*u+c*c,g=f*p-v*v,m=g===0?0:1/g,x,y,T,C,S,E,M=n.x1,R=n.y1,L=0;L<h.length&&(T=h[L].x-M,C=h[L].y-R,S=l*T+a*C,E=u*T+c*C,x=(p*S-v*E)*m,y=(f*E-v*S)*m,!(x>=0&&y>=0&&x+y<1&&(o.push({x:h[L].x,y:h[L].y}),r)));L++);return o};i.exports=e},function(i,d){var e=function(n,h,r,o){var l=Math.cos(o),a=Math.sin(o),u=n.x1-h,c=n.y1-r;return n.x1=u*l-c*a+h,n.y1=u*a+c*l+r,u=n.x2-h,c=n.y2-r,n.x2=u*l-c*a+h,n.y2=u*a+c*l+r,n};i.exports=e},function(i,d){var e=function(n){return n.height===0?NaN:n.width/n.height};i.exports=e},function(i,d){var e=function(n,h,r,o){var l=Math.cos(o),a=Math.sin(o),u=n.x1-h,c=n.y1-r;return n.x1=u*l-c*a+h,n.y1=u*a+c*l+r,u=n.x2-h,c=n.y2-r,n.x2=u*l-c*a+h,n.y2=u*a+c*l+r,u=n.x3-h,c=n.y3-r,n.x3=u*l-c*a+h,n.y3=u*a+c*l+r,n};i.exports=e},function(i,d,e){i.exports={BUTTON_DOWN:e(1310),BUTTON_UP:e(1311),CONNECTED:e(1312),DISCONNECTED:e(1313),GAMEPAD_BUTTON_DOWN:e(1314),GAMEPAD_BUTTON_UP:e(1315)}},function(i,d,e){var n=e(17),h=e(156),r=function(o,l){var a=o===void 0?h():n({},o);if(l)for(var u in l)l[u]!==void 0&&(a[u]=l[u]);return a};i.exports=r},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=e(408),c=new n({Extends:r,initialize:function(v,p,g,m){var x="xml";if(a(p)){var y=p;p=l(y,"key"),g=l(y,"url"),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"xml",cache:v.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};r.call(this,v,T)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=u(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(f,v,p){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new c(this,f[g]));else this.addFile(new c(this,f,v,p));return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g){var m="text",x="txt",y=f.cacheManager.text;if(a(v)){var T=v;v=l(T,"key"),p=l(T,"url"),g=l(T,"xhrSettings"),x=l(T,"extension",x),m=l(T,"type",m),y=l(T,"cache",y)}var C={type:m,cache:y,extension:x,responseType:"text",key:v,url:p,xhrSettings:g};r.call(this,f,C)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,f,v));return this}),i.exports=u},function(i,d,e){i.exports={Acceleration:e(1368),Angular:e(1369),Bounce:e(1370),Debug:e(1371),Drag:e(1372),Enable:e(1373),Friction:e(1374),Gravity:e(1375),Immovable:e(1376),Mass:e(1377),OverlapCirc:e(523),OverlapRect:e(244),Pushable:e(1378),Size:e(1379),Velocity:e(1380)}},function(i,d){var e=function(n,h,r,o,l,a,u){a===void 0&&(a=!0),u===void 0&&(u=!1);var c=[],f=[],v=n.treeMinMax;if(v.minX=h,v.minY=r,v.maxX=h+o,v.maxY=r+l,u&&(f=n.staticTree.search(v)),a&&n.useTree)c=n.tree.search(v);else if(a){var p=n.bodies,g={position:{x:h,y:r},left:h,top:r,right:h+o,bottom:r+l,isCircle:!1},m=n.intersects;p.iterate(function(x){m(x,g)&&c.push(x)})}return f.concat(c)};i.exports=e},function(i,d,e){i.exports={COLLIDE:e(1381),OVERLAP:e(1382),PAUSE:e(1383),RESUME:e(1384),TILE_COLLIDE:e(1385),TILE_OVERLAP:e(1386),WORLD_BOUNDS:e(1387),WORLD_STEP:e(1388)}},function(i,d,e){var n=e(62),h=function(r,o,l,a){var u=0,c=r.deltaAbsX()+o.deltaAbsX()+a;return r._dx===0&&o._dx===0?(r.embedded=!0,o.embedded=!0):r._dx>o._dx?(u=r.right-o.x,u>c&&!l||r.checkCollision.right===!1||o.checkCollision.left===!1?u=0:(r.touching.none=!1,r.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.right=!0),r.physicsType===n.STATIC_BODY&&!l&&(o.blocked.none=!1,o.blocked.left=!0))):r._dx<o._dx&&(u=r.x-o.width-o.x,-u>c&&!l||r.checkCollision.left===!1||o.checkCollision.right===!1?u=0:(r.touching.none=!1,r.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.left=!0),r.physicsType===n.STATIC_BODY&&!l&&(o.blocked.none=!1,o.blocked.right=!0))),r.overlapX=u,o.overlapX=u,u};i.exports=h},function(i,d,e){var n=e(62),h=function(r,o,l,a){var u=0,c=r.deltaAbsY()+o.deltaAbsY()+a;return r._dy===0&&o._dy===0?(r.embedded=!0,o.embedded=!0):r._dy>o._dy?(u=r.bottom-o.y,u>c&&!l||r.checkCollision.down===!1||o.checkCollision.up===!1?u=0:(r.touching.none=!1,r.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.down=!0),r.physicsType===n.STATIC_BODY&&!l&&(o.blocked.none=!1,o.blocked.up=!0))):r._dy<o._dy&&(u=r.y-o.bottom,-u>c&&!l||r.checkCollision.up===!1||o.checkCollision.down===!1?u=0:(r.touching.none=!1,r.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===n.STATIC_BODY&&!l&&(r.blocked.none=!1,r.blocked.up=!0),r.physicsType===n.STATIC_BODY&&!l&&(o.blocked.none=!1,o.blocked.down=!0))),r.overlapY=u,o.overlapY=u,u};i.exports=h},function(i,d){var e=function(n,h){return!(h.right<=n.left||h.bottom<=n.top||h.position.x>=n.right||h.position.y>=n.bottom)};i.exports=e},function(i,d,e){i.exports={Bounce:e(1495),Collision:e(1496),Force:e(1497),Friction:e(1498),Gravity:e(1499),Mass:e(1500),Sensor:e(1501),SetBody:e(1502),Sleep:e(1503),Static:e(1520),Transform:e(1521),Velocity:e(1522)}},function(i,d){var e={};i.exports=e,function(){e.create=function(n,h){var r=n.bodyA,o=n.bodyB,l={id:e.id(r,o),bodyA:r,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||o.isSensor,timeCreated:h,timeUpdated:h,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(l,n,h),l},e.update=function(n,h,r){if(n.collision=h,h.collided){var o=h.supports,l=n.activeContacts,a=h.parentA,u=h.parentB;n.inverseMass=a.inverseMass+u.inverseMass,n.friction=Math.min(a.friction,u.friction),n.frictionStatic=Math.max(a.frictionStatic,u.frictionStatic),n.restitution=Math.max(a.restitution,u.restitution),n.slop=Math.max(a.slop,u.slop);for(var c=0;c<o.length;c++)l[c]=o[c].contact;var f=o.length;f<l.length&&(l.length=f),n.separation=h.depth,e.setActive(n,!0,r)}else n.isActive===!0&&e.setActive(n,!1,r)},e.setActive=function(n,h,r){h?(n.isActive=!0,n.timeUpdated=r):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,h){return n.id<h.id?"A"+n.id+"B"+h.id:"A"+h.id+"B"+n.id}}()},function(i,d,e){i.exports={CalculateFacesAt:e(252),CalculateFacesWithin:e(63),CheckIsoBounds:e(541),Copy:e(1420),CreateFromTiles:e(1421),CullBounds:e(543),CullTiles:e(544),Fill:e(1422),FilterTiles:e(1423),FindByIndex:e(1424),FindTile:e(1425),ForEachTile:e(1426),GetCullTilesFunction:e(1427),GetTileAt:e(158),GetTileAtWorldXY:e(1428),GetTilesWithin:e(26),GetTilesWithinShape:e(1429),GetTilesWithinWorldXY:e(529),GetTileToWorldXFunction:e(1430),GetTileToWorldXYFunction:e(1431),GetTileToWorldYFunction:e(1432),GetWorldToTileXFunction:e(1433),GetWorldToTileXYFunction:e(1434),GetWorldToTileYFunction:e(1435),HasTileAt:e(562),HasTileAtWorldXY:e(1436),HexagonalCullBounds:e(546),HexagonalCullTiles:e(545),HexagonalTileToWorldXY:e(550),HexagonalTileToWorldY:e(554),HexagonalWorldToTileXY:e(556),HexagonalWorldToTileY:e(560),IsInLayerBounds:e(119),IsometricCullTiles:e(547),IsometricTileToWorldXY:e(551),IsometricWorldToTileXY:e(557),PutTileAt:e(257),PutTileAtWorldXY:e(1437),PutTilesAt:e(1438),Randomize:e(1439),RemoveTileAt:e(563),RemoveTileAtWorldXY:e(1440),RenderDebug:e(1441),ReplaceByIndex:e(542),RunCull:e(159),SetCollision:e(1442),SetCollisionBetween:e(1443),SetCollisionByExclusion:e(1444),SetCollisionByProperty:e(1445),SetCollisionFromCollisionGroup:e(1446),SetLayerCollisionIndex:e(160),SetTileCollision:e(72),SetTileIndexCallback:e(1447),SetTileLocationCallback:e(1448),Shuffle:e(1449),StaggeredCullBounds:e(549),StaggeredCullTiles:e(548),StaggeredTileToWorldXY:e(552),StaggeredTileToWorldY:e(555),StaggeredWorldToTileXY:e(558),StaggeredWorldToTileY:e(561),SwapByIndex:e(1450),TileToWorldX:e(253),TileToWorldXY:e(553),TileToWorldY:e(254),WeightedRandomize:e(1451),WorldToTileX:e(255),WorldToTileXY:e(559),WorldToTileY:e(256)}},function(i,d,e){var n=e(158),h=function(r,o,l){var a=n(r,o,!0,l),u=n(r,o-1,!0,l),c=n(r,o+1,!0,l),f=n(r-1,o,!0,l),v=n(r+1,o,!0,l),p=a&&a.collides;return p&&(a.faceTop=!0,a.faceBottom=!0,a.faceLeft=!0,a.faceRight=!0),u&&u.collides&&(p&&(a.faceTop=!1),u.faceBottom=!p),c&&c.collides&&(p&&(a.faceBottom=!1),c.faceTop=!p),f&&f.collides&&(p&&(a.faceLeft=!1),f.faceRight=!p),v&&v.collides&&(p&&(a.faceRight=!1),v.faceLeft=!p),a&&!a.collides&&a.resetFaces(),a};i.exports=h},function(i,d){var e=function(n,h,r){var o=r.baseTileWidth,l=r.tilemapLayer,a=0;return l&&(h||(h=l.scene.cameras.main),a=l.x+h.scrollX*(1-l.scrollFactorX),o*=l.scaleX),a+n*o};i.exports=e},function(i,d){var e=function(n,h,r){var o=r.baseTileHeight,l=r.tilemapLayer,a=0;return l&&(h||(h=l.scene.cameras.main),a=l.y+h.scrollY*(1-l.scrollFactorY),o*=l.scaleY),a+n*o};i.exports=e},function(i,d){var e=function(n,h,r,o){h===void 0&&(h=!0);var l=o.baseTileWidth,a=o.tilemapLayer;return a&&(r||(r=a.scene.cameras.main),n=n-(a.x+r.scrollX*(1-a.scrollFactorX)),l*=a.scaleX),h?Math.floor(n/l):n/l};i.exports=e},function(i,d){var e=function(n,h,r,o){h===void 0&&(h=!0);var l=o.baseTileHeight,a=o.tilemapLayer;return a&&(r||(r=a.scene.cameras.main),n=n-(a.y+r.scrollY*(1-a.scrollFactorY)),l*=a.scaleY),h?Math.floor(n/l):n/l};i.exports=e},function(i,d,e){var n=e(85),h=e(119),r=e(252),o=e(72),l=function(a,u,c,f,v){if(f===void 0&&(f=!0),!h(u,c,v))return null;var p=v.data[c][u],g=p&&p.collides;if(a instanceof n)v.data[c][u]===null&&(v.data[c][u]=new n(v,a.index,u,c,v.tileWidth,v.tileHeight)),v.data[c][u].copy(a);else{var m=a;v.data[c][u]===null?v.data[c][u]=new n(v,m,u,c,v.tileWidth,v.tileHeight):v.data[c][u].index=m}var x=v.data[c][u],y=v.collideIndexes.indexOf(x.index)!==-1;return o(x,y),f&&g!==x.collides&&r(u,c,v),x};i.exports=l},function(i,d,e){var n=e(29),h=function(r){return r=r.toLowerCase(),r==="isometric"?n.ISOMETRIC:r==="staggered"?n.STAGGERED:r==="hexagonal"?n.HEXAGONAL:n.ORTHOGONAL};i.exports=h},function(i,d,e){var n=e(40),h=e(120),r=e(121),o=e(85),l=function(a,u,c,f,v){for(var p=new h({tileWidth:c,tileHeight:f}),g=new r({name:a,tileWidth:c,tileHeight:f,format:n.ARRAY_2D,layers:[p]}),m=[],x=u.length,y=0,T=0;T<u.length;T++){m[T]=[];for(var C=u[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?m[T][S]=v?null:new o(p,-1,S,T,c,f):m[T][S]=new o(p,E,S,T,c,f)}y===0&&(y=C.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*c,g.heightInPixels=p.heightInPixels=x*f,p.data=m,g};i.exports=l},function(i,d,e){var n=e(571),h=e(261),r=function(a){return{x:a.x,y:a.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],l=function(a,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=n(a,o);if(f.x+=u,f.y+=c,a.gid){var v=h(a.gid);f.gid=v.gid,f.flippedHorizontal=v.flippedHorizontal,f.flippedVertical=v.flippedVertical,f.flippedAntiDiagonal=v.flippedAntiDiagonal}else a.polyline?f.polyline=a.polyline.map(r):a.polygon?f.polygon=a.polygon.map(r):a.ellipse?f.ellipse=a.ellipse:a.text?f.text=a.text:a.point?f.point=!0:f.rectangle=!0;return f};i.exports=l},function(i,d){var e=2147483648,n=1073741824,h=536870912,r=function(o){var l=Boolean(o&e),a=Boolean(o&n),u=Boolean(o&h);o=o&~(e|n|h);var c=0,f=!1;return l&&a&&u?(c=Math.PI/2,f=!0):l&&a&&!u?(c=Math.PI,f=!1):l&&!a&&u?(c=Math.PI/2,f=!1):l&&!a&&!u?(c=0,f=!0):!l&&a&&u?(c=3*Math.PI/2,f=!1):!l&&a&&!u?(c=Math.PI,f=!0):!l&&!a&&u?(c=3*Math.PI/2,f=!0):!l&&!a&&!u&&(c=0,f=!1),{gid:o,flippedHorizontal:l,flippedVertical:a,flippedAntiDiagonal:u,rotation:c,flipped:f}};i.exports=r},function(i,d,e){var n=e(40),h=e(121),r=e(564),o=e(580),l=function(a,u,c,f,v,p,g,m){c===void 0&&(c=32),f===void 0&&(f=32),v===void 0&&(v=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=u!==void 0?u:"map";x=r(y,n.ARRAY_2D,g,c,f,m)}else if(u!==void 0){var T=a.cache.tilemap.get(u);T?x=r(u,T.format,T.data,c,f,m):console.warn("No map data found for key "+u)}return x===null&&(x=new h({tileWidth:c,tileHeight:f,width:v,height:p})),new o(a,x)};i.exports=l},function(i,d,e){var n=e(6),h=function(r){var o=n(r,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};i.exports=h},function(i,d){function e(l){return!!l.getActive&&typeof l.getActive=="function"}function n(l){return!!l.getStart&&typeof l.getStart=="function"}function h(l){return!!l.getEnd&&typeof l.getEnd=="function"}function r(l){return n(l)||h(l)||e(l)}var o=function(l,a){var u,c=function(E,M,R){return R},f=function(E,M,R){return R},v=null,p=typeof a;if(p==="number")c=function(){return a};else if(p==="string"){var g=a[0],m=parseFloat(a.substr(2));switch(g){case"+":c=function(E,M,R){return R+m};break;case"-":c=function(E,M,R){return R-m};break;case"*":c=function(E,M,R){return R*m};break;case"/":c=function(E,M,R){return R/m};break;default:c=function(){return parseFloat(a)}}}else if(p==="function")c=a;else if(p==="object")if(r(a))e(a)&&(v=a.getActive),h(a)&&(c=a.getEnd),n(a)&&(f=a.getStart);else if(a.hasOwnProperty("value"))u=o(l,a.value);else{var x=a.hasOwnProperty("to"),y=a.hasOwnProperty("from"),T=a.hasOwnProperty("start");if(x&&(y||T)){if(u=o(l,a.to),T){var C=o(l,a.start);u.getActive=C.getEnd}if(y){var S=o(l,a.from);u.getStart=S.getEnd}}}return u||(u={getActive:v,getEnd:c,getStart:f}),u};i.exports=o},function(i,d){var e={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};i.exports=e},function(i,d,e){var n=e(0),h=e(9),r=e(267),o=e(16),l=e(5),a=e(100),u=e(14),c=new n({Extends:h,initialize:function(v,p,g){h.call(this),this.parent=v,this.parentIsTimeline=v.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=a.PENDING_ADD,this._pausedState=a.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(f){return f===void 0&&(f=0),this.data[f].current},setTimeScale:function(f){return this.timeScale=f,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},isPaused:function(){return this.state===a.PAUSED},hasTarget:function(f){return this.targets.indexOf(f)!==-1},updateTo:function(f,v,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===f&&(m.end=v,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===a.ACTIVE?this.seek(0):this.state===a.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===a.PENDING_ADD?this:this.play()},calcDuration:function(){for(var f=0,v=u.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>f&&(f=m.totalDuration),m.delay<v&&(v=m.delay)}this.duration=Math.max(f,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=v},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=a.PENDING_ADD,this._pausedState=a.INIT,!1;for(var f=this.data,v=this.totalTargets,p=0;p<this.totalData;p++){var g=f[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,v,this),g.duration=Math.max(x.duration(m,y,0,T,v,this),.001),g.hold=x.hold(m,y,0,T,v,this),g.repeat=x.repeat(m,y,0,T,v,this),g.repeatDelay=x.repeatDelay(m,y,0,T,v,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=a.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===a.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this)},play:function(f){f===void 0&&(f=!1);var v=this.state;return v===a.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=a.ACTIVE,this):v===a.ACTIVE||v===a.PENDING_ADD&&this._pausedState===a.PENDING_ADD?this:!this.parentIsTimeline&&(v===a.PENDING_REMOVE||v===a.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(f),this.calculatedOffset===0?this.state=a.ACTIVE:(this.countdown=this.calculatedOffset,this.state=a.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(f),this.state=a.ACTIVE,this.makeActive()),this)},resetTweenData:function(f){for(var v=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=v[m],y=x.target,T=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,f?(x.start=x.getStartValue(y,T,x.start,C,g,this),x.end=x.getEndValue(y,T,x.end,C,g,this),x.current=x.start,x.state=a.PLAYING_FORWARD):x.state=a.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=a.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===a.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(f,v){v===void 0&&(v=16.6),this.state===a.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,C=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,C,0,S,g,this),x.duration=Math.max(T.duration(y,C,0,S,g,this),.001),x.hold=T.hold(y,C,0,S,g,this),x.repeat=T.repeat(y,C,0,S,g,this),x.repeatDelay=T.repeatDelay(y,C,0,S,g,this),x.current=x.start,x.state=a.PLAYING_FORWARD,this.updateTweenData(this,x,0,S,g),x.delay>0&&(x.elapsed=x.delay,x.state=a.DELAY)}this.calcDuration();var E=!1;this.state===a.PAUSED&&(E=!0,this.state=a.ACTIVE),this.isSeeking=!0;do this.update(0,v);while(this.totalProgress<f);return this.isSeeking=!1,E&&(this.state=a.PAUSED),this},setCallback:function(f,v,p,g){return this.callbacks[f]={func:v,scope:g,params:p},this},complete:function(f){return f===void 0&&(f=0),f?(this.state=a.COMPLETE_DELAY,this.countdown=f):(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(f){return this.state===a.ACTIVE&&f!==void 0&&this.seek(f),this.state!==a.REMOVED&&((this.state===a.PAUSED||this.state===a.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=a.PENDING_REMOVE),this},update:function(f,v){if(this.state===a.PAUSED)return!1;switch(this.useFrames&&(v=1*this.parent.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,v)&&(p=!0)}p||this.nextState();break;case a.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case a.OFFSET_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=a.ACTIVE);break;case a.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===a.PENDING_REMOVE},dispatchTweenDataEvent:function(f,v,p){this.isSeeking||(this.emit(f,this,p.key,p.target,p.current,p.previous),v&&(v.params[1]=p.target,v.func.apply(v.scope,v.params)))},dispatchTweenEvent:function(f,v){this.isSeeking||(this.emit(f,this,this.targets),v&&(v.params[1]=this.targets,v.func.apply(v.scope,v.params)))},setStateFromEnd:function(f,v,p){return v.yoyo?(v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,f.callbacks.onYoyo,v),v.start=v.getStartValue(v.target,v.key,v.start,v.index,f.totalTargets,f),a.PLAYING_BACKWARD):v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.start=v.getStartValue(v.target,v.key,v.start,v.index,f.totalTargets,f),v.end=v.getEndValue(v.target,v.key,v.start,v.index,f.totalTargets,f),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,a.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,f.callbacks.onRepeat,v),a.PLAYING_FORWARD)):a.COMPLETE},setStateFromStart:function(f,v,p){return v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.end=v.getEndValue(v.target,v.key,v.start,v.index,f.totalTargets,f),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,a.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,f.callbacks.onRepeat,v),a.PLAYING_FORWARD)):a.COMPLETE},updateTweenData:function(f,v,p){var g=v.target;switch(v.state){case a.PLAYING_FORWARD:case a.PLAYING_BACKWARD:if(!g){v.state=a.COMPLETE;break}var m=v.elapsed,x=v.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=v.state===a.PLAYING_FORWARD,C=m/x;if(v.elapsed=m,v.progress=C,v.previous=v.current,C===1)T?(v.current=v.end,g[v.key]=v.end,v.hold>0?(v.elapsed=v.hold-y,v.state=a.HOLD_DELAY):v.state=this.setStateFromEnd(f,v,y)):(v.current=v.start,g[v.key]=v.start,v.state=this.setStateFromStart(f,v,y));else{var S=T?v.ease(C):v.ease(1-C);v.current=v.start+(v.end-v.start)*S,g[v.key]=v.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,f.callbacks.onUpdate,v);break;case a.DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=a.PENDING_RENDER);break;case a.REPEAT_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=a.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,f.callbacks.onRepeat,v));break;case a.HOLD_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.state=this.setStateFromEnd(f,v,Math.abs(v.elapsed)));break;case a.PENDING_RENDER:g?(v.start=v.getStartValue(g,v.key,g[v.key],v.index,f.totalTargets,f),v.end=v.getEndValue(g,v.key,v.start,v.index,f.totalTargets,f),v.current=v.start,g[v.key]=v.start,v.state=a.PLAYING_FORWARD):v.state=a.COMPLETE;break}return v.state!==a.COMPLETE}});c.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],l.register("tween",function(f){return this.scene.sys.tweens.add(f)}),o.register("tween",function(f){return this.scene.sys.tweens.create(f)}),i.exports=c},function(i,d,e){i.exports={TIMELINE_COMPLETE:e(1466),TIMELINE_LOOP:e(1467),TIMELINE_PAUSE:e(1468),TIMELINE_RESUME:e(1469),TIMELINE_START:e(1470),TIMELINE_UPDATE:e(1471),TWEEN_ACTIVE:e(1472),TWEEN_COMPLETE:e(1473),TWEEN_LOOP:e(1474),TWEEN_REPEAT:e(1475),TWEEN_START:e(1476),TWEEN_STOP:e(1477),TWEEN_UPDATE:e(1478),TWEEN_YOYO:e(1479)}},function(i,d){var e=function(n,h,r,o,l,a,u,c,f,v,p,g,m,x,y){return{target:n,index:h,key:r,getActiveValue:a,getEndValue:o,getStartValue:l,ease:u,duration:0,totalDuration:0,delay:0,yoyo:v,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:c,duration:f,hold:p,repeat:g,repeatDelay:m},state:0}};i.exports=e},function(i,d,e){var n=e(68),h=function(r){return n(r,-Math.PI,Math.PI)};i.exports=h},function(i,d,e){var n=e(68),h=function(r){return n(r,-180,180)};i.exports=h},function(i,d,e){var n={};i.exports=n;var h=e(83),r=e(32);(function(){n.fromVertices=function(o){for(var l={},a=0;a<o.length;a++){var u=(a+1)%o.length,c=h.normalise({x:o[u].y-o[a].y,y:o[a].x-o[u].x}),f=c.y===0?Infinity:c.x/c.y;f=f.toFixed(3).toString(),l[f]=c}return r.values(l)},n.rotate=function(o,l){if(l!==0)for(var a=Math.cos(l),u=Math.sin(l),c=0;c<o.length;c++){var f=o[c],v;v=f.x*a-f.y*u,f.y=f.x*u+f.y*a,f.x=v}}})()},function(i,d,e){i.exports={AFTER_ADD:e(1504),AFTER_REMOVE:e(1505),AFTER_UPDATE:e(1506),BEFORE_ADD:e(1507),BEFORE_REMOVE:e(1508),BEFORE_UPDATE:e(1509),COLLISION_ACTIVE:e(1510),COLLISION_END:e(1511),COLLISION_START:e(1512),DRAG_END:e(1513),DRAG:e(1514),DRAG_START:e(1515),PAUSE:e(1516),RESUME:e(1517),SLEEP_END:e(1518),SLEEP_START:e(1519)}},function(i,d,e){var n={};i.exports=n;var h=e(274),r=e(250),o=e(84);(function(){n.collisions=function(l,a){for(var u=[],c=a.pairs.table,f=a.metrics,v=0;v<l.length;v++){var p=l[v][0],g=l[v][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!n.canCollide(p.collisionFilter,g.collisionFilter)&&(f.midphaseTests+=1,o.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||o.overlaps(x.bounds,T.bounds)){var C=r.id(x,T),S=c[C],E;S&&S.isActive?E=S.collision:E=null;var M=h.collides(x,T,E);f.narrowphaseTests+=1,M.reused&&(f.narrowReuseCount+=1),M.collided&&(u.push(M),f.narrowDetections+=1)}}}return u},n.canCollide=function(l,a){return l.group===a.group&&l.group!==0?l.group>0:(l.mask&a.category)!=0&&(a.mask&l.category)!=0}})()},function(i,d,e){var n={};i.exports=n;var h=e(64),r=e(83);(function(){n.collides=function(o,l,a){var u,c,f,v,p=!1;if(a){var g=o.parent,m=l.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=a&&a.collided&&x<.2,v=a}else v={collided:!1,bodyA:o,bodyB:l};if(a&&p){var y=v.axisBody,T=y===o?l:o,C=[y.axes[a.axisNumber]];if(f=n._overlapAxes(y.vertices,T.vertices,C),v.reused=!0,f.overlap<=0)return v.collided=!1,v}else{if(u=n._overlapAxes(o.vertices,l.vertices,o.axes),u.overlap<=0||(c=n._overlapAxes(l.vertices,o.vertices,l.axes),c.overlap<=0))return v.collided=!1,v;u.overlap<c.overlap?(f=u,v.axisBody=o):(f=c,v.axisBody=l),v.axisNumber=f.axisNumber}v.bodyA=o.id<l.id?o:l,v.bodyB=o.id<l.id?l:o,v.collided=!0,v.depth=f.overlap,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent,o=v.bodyA,l=v.bodyB,r.dot(f.axis,r.sub(l.position,o.position))<0?v.normal={x:f.axis.x,y:f.axis.y}:v.normal={x:-f.axis.x,y:-f.axis.y},v.tangent=r.perp(v.normal),v.penetration=v.penetration||{},v.penetration.x=v.normal.x*v.depth,v.penetration.y=v.normal.y*v.depth;var S=n._findSupports(o,l,v.normal),E=[];if(h.contains(o.vertices,S[0])&&E.push(S[0]),h.contains(o.vertices,S[1])&&E.push(S[1]),E.length<2){var M=n._findSupports(l,o,r.neg(v.normal));h.contains(l.vertices,M[0])&&E.push(M[0]),E.length<2&&h.contains(l.vertices,M[1])&&E.push(M[1])}return E.length<1&&(E=[S[0]]),v.supports=E,v},n._overlapAxes=function(o,l,a){for(var u=r._temp[0],c=r._temp[1],f={overlap:Number.MAX_VALUE},v,p,g=0;g<a.length;g++){if(p=a[g],n._projectToAxis(u,o,p),n._projectToAxis(c,l,p),v=Math.min(u.max-c.min,c.max-u.min),v<=0)return f.overlap=v,f;v<f.overlap&&(f.overlap=v,f.axis=p,f.axisNumber=g)}return f},n._projectToAxis=function(o,l,a){for(var u=r.dot(l[0],a),c=u,f=1;f<l.length;f+=1){var v=r.dot(l[f],a);v>c?c=v:v<u&&(u=v)}o.min=u,o.max=c},n._findSupports=function(o,l,a){for(var u=Number.MAX_VALUE,c=r._temp[0],f=l.vertices,v=o.position,p,g,m,x,y=0;y<f.length;y++)g=f[y],c.x=g.x-v.x,c.y=g.y-v.y,p=-r.dot(a,c),p<u&&(u=p,m=g);var T=m.index-1>=0?m.index-1:f.length-1;g=f[T],c.x=g.x-v.x,c.y=g.y-v.y,u=-r.dot(a,c),x=g;var C=(m.index+1)%f.length;return g=f[C],c.x=g.x-v.x,c.y=g.y-v.y,p=-r.dot(a,c),p<u&&(x=g),[m,x]}})()},function(i,d,e){i.exports={AlignTo:e(601),Angle:e(602),Call:e(603),GetFirst:e(604),GetLast:e(605),GridAlign:e(606),IncAlpha:e(678),IncX:e(679),IncXY:e(680),IncY:e(681),PlaceOnCircle:e(682),PlaceOnEllipse:e(683),PlaceOnLine:e(684),PlaceOnRectangle:e(685),PlaceOnTriangle:e(686),PlayAnimation:e(687),PropertyValueInc:e(46),PropertyValueSet:e(27),RandomCircle:e(688),RandomEllipse:e(689),RandomLine:e(690),RandomRectangle:e(691),RandomTriangle:e(692),Rotate:e(693),RotateAround:e(694),RotateAroundDistance:e(695),ScaleX:e(696),ScaleXY:e(697),ScaleY:e(698),SetAlpha:e(699),SetBlendMode:e(700),SetDepth:e(701),SetHitArea:e(702),SetOrigin:e(703),SetRotation:e(704),SetScale:e(705),SetScaleX:e(706),SetScaleY:e(707),SetScrollFactor:e(708),SetScrollFactorX:e(709),SetScrollFactorY:e(710),SetTint:e(711),SetVisible:e(712),SetX:e(713),SetXY:e(714),SetY:e(715),ShiftPosition:e(716),Shuffle:e(717),SmootherStep:e(718),SmoothStep:e(719),Spread:e(720),ToggleVisible:e(721),WrapInRectangle:e(722)}},function(i,d,e){var n=e(123),h=[];h[n.BOTTOM_CENTER]=e(277),h[n.BOTTOM_LEFT]=e(278),h[n.BOTTOM_RIGHT]=e(279),h[n.LEFT_BOTTOM]=e(280),h[n.LEFT_CENTER]=e(281),h[n.LEFT_TOP]=e(282),h[n.RIGHT_BOTTOM]=e(283),h[n.RIGHT_CENTER]=e(284),h[n.RIGHT_TOP]=e(285),h[n.TOP_CENTER]=e(286),h[n.TOP_LEFT]=e(287),h[n.TOP_RIGHT]=e(288);var r=function(o,l,a,u,c){return h[a](o,l,u,c)};i.exports=r},function(i,d,e){var n=e(42),h=e(87),r=e(88),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,h(u)+c),o(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(42),h=e(43),r=e(53),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,h(u)-c),o(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(42),h=e(44),r=e(54),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,h(u)+c),o(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(42),h=e(43),r=e(55),o=e(54),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)-c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(89),h=e(43),r=e(90),o=e(54),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)-c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(43),h=e(45),r=e(54),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,n(u)-c),o(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(42),h=e(44),r=e(55),o=e(53),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)+c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(89),h=e(44),r=e(90),o=e(53),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)+c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(44),h=e(45),r=e(53),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,n(u)+c),o(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(87),h=e(45),r=e(55),o=e(88),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,n(u)+c),r(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(43),h=e(45),r=e(55),o=e(53),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,n(u)-c),r(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(44),h=e(45),r=e(55),o=e(54),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,n(u)+c),r(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(123),h=[];h[n.BOTTOM_CENTER]=e(290),h[n.BOTTOM_LEFT]=e(291),h[n.BOTTOM_RIGHT]=e(292),h[n.CENTER]=e(293),h[n.LEFT_CENTER]=e(295),h[n.RIGHT_CENTER]=e(296),h[n.TOP_CENTER]=e(297),h[n.TOP_LEFT]=e(298),h[n.TOP_RIGHT]=e(299),h[n.LEFT_BOTTOM]=h[n.BOTTOM_LEFT],h[n.LEFT_TOP]=h[n.TOP_LEFT],h[n.RIGHT_BOTTOM]=h[n.BOTTOM_RIGHT],h[n.RIGHT_TOP]=h[n.TOP_RIGHT];var r=function(o,l,a,u,c){return h[a](o,l,u,c)};i.exports=r},function(i,d,e){var n=e(42),h=e(87),r=e(55),o=e(88),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)+c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(42),h=e(43),r=e(55),o=e(53),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)-c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(42),h=e(44),r=e(55),o=e(54),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)+c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(294),h=e(87),r=e(89),o=function(l,a,u,c){return u===void 0&&(u=0),c===void 0&&(c=0),n(l,h(a)+u,r(a)+c),l};i.exports=o},function(i,d,e){var n=e(88),h=e(90),r=function(o,l,a){return n(o,l),h(o,a)};i.exports=r},function(i,d,e){var n=e(89),h=e(43),r=e(90),o=e(53),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)-c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(89),h=e(44),r=e(90),o=e(54),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),o(a,h(u)+c),r(a,n(u)+f),a};i.exports=l},function(i,d,e){var n=e(87),h=e(45),r=e(88),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,n(u)+c),o(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(43),h=e(45),r=e(53),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,n(u)-c),o(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(44),h=e(45),r=e(54),o=e(52),l=function(a,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=0),r(a,n(u)+c),o(a,h(u)-f),a};i.exports=l},function(i,d,e){var n=e(169),h=e(98),r=e(14),o=e(4),l=function(a,u,c){c===void 0&&(c=new o);var f=h(u,0,r.PI2);return n(a,f,c)};i.exports=l},function(i,d,e){var n=e(302),h=e(169),r=e(98),o=e(14),l=function(a,u,c,f){f===void 0&&(f=[]),!u&&c>0&&(u=n(a)/c);for(var v=0;v<u;v++){var p=r(v/u,0,o.PI2);f.push(h(a,p))}return f};i.exports=l},function(i,d){var e=function(n){return 2*(Math.PI*n.radius)};i.exports=e},function(i,d,e){var n=e(18),h=2,r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var l=n(o,0,1);this._alpha=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}}};i.exports=r},function(i,d,e){var n=e(35),h={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=n[r]),r|=0,r>=-1&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};i.exports=h},function(i,d){var e={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};i.exports=e},function(i,d,e){var n=e(171),h=e(130),r=function(o,l,a,u){u===void 0&&(u=[]),!l&&a>0&&(l=h(o)/a);for(var c=0;c<l;c++){var f=c/l;u.push(n(o,f))}return u};i.exports=r},function(i,d,e){var n=e(4),h=function(r,o,l){return l===void 0&&(l=new n),l.x=r.x1+(r.x2-r.x1)*o,l.y=r.y1+(r.y2-r.y1)*o,l};i.exports=h},function(i,d){var e=function(n,h,r,o){var l=Math.cos(o),a=Math.sin(o),u=n.x-h,c=n.y-r;return n.x=u*l-c*a+h,n.y=u*a+c*l+r,n};i.exports=e},function(i,d,e){var n=e(310),h=e(311),r={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new n(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new h(this.scene,o)}};i.exports=r},function(i,d,e){var n=e(0),h=e(22),r=e(91),o=new n({initialize:function(a,u){var c=a.sys.renderer;this.renderer=c,this.bitmapMask=u,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),a.sys.game.events.on(h.CONTEXT_RESTORED,this.createMask,this),c&&c.on(r.RESIZE,this.createMask,this)},createMask:function(){var l=this.renderer;if(!(!l||!l.gl)){this.mainTexture&&this.clearMask();var a=l.width,u=l.height,c=(a&a-1)==0&&(u&u-1)==0,f=l.gl,v=c?f.REPEAT:f.CLAMP_TO_EDGE,p=f.LINEAR;this.mainTexture=l.createTexture2D(0,p,p,v,v,f.RGBA,null,a,u),this.maskTexture=l.createTexture2D(0,p,p,v,v,f.RGBA,null,a,u),this.mainFramebuffer=l.createFramebuffer(a,u,this.mainTexture,!0),this.maskFramebuffer=l.createFramebuffer(a,u,this.maskTexture,!0)}},clearMask:function(){var l=this.renderer;!l||!l.gl||!this.mainTexture||(l.deleteTexture(this.mainTexture),l.deleteTexture(this.maskTexture),l.deleteFramebuffer(this.mainFramebuffer),l.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,a,u){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,a,u)},postRenderWebGL:function(l,a){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,a)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});i.exports=o},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(r){return this.geometryMask=r,this},setInvertAlpha:function(r){return r===void 0&&(r=!0),this.invertAlpha=r,this},preRenderWebGL:function(r,o,l){var a=r.gl;r.flush(),r.maskStack.length===0&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),r.maskCount=0),r.currentCameraMask.mask!==this&&(r.currentMask.mask=this),r.maskStack.push({mask:this,camera:l}),this.applyStencil(r,l,!0),r.maskCount++},applyStencil:function(r,o,l){var a=r.gl,u=this.geometryMask,c=r.maskCount;a.colorMask(!1,!1,!1,!1),l?(a.stencilFunc(a.EQUAL,c,255),a.stencilOp(a.KEEP,a.KEEP,a.INCR)):(a.stencilFunc(a.EQUAL,c+1,255),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),u.renderWebGL(r,u,o),r.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),l?this.invertAlpha?a.stencilFunc(a.NOTEQUAL,c+1,255):a.stencilFunc(a.EQUAL,c+1,255):this.invertAlpha?a.stencilFunc(a.NOTEQUAL,c,255):a.stencilFunc(a.EQUAL,c,255)},postRenderWebGL:function(r){var o=r.gl;r.maskStack.pop(),r.maskCount--,r.flush();var l=r.currentMask;if(r.maskStack.length===0)l.mask=null,o.disable(o.STENCIL_TEST);else{var a=r.maskStack[r.maskStack.length-1];a.mask.applyStencil(r,a.camera,!1),r.currentCameraMask.mask!==a.mask?(l.mask=a.mask,l.camera=a.camera):l.mask=null}},preRenderCanvas:function(r,o,l){var a=this.geometryMask;r.currentContext.save(),a.renderCanvas(r,a,l,null,null,!0),r.currentContext.clip()},postRenderCanvas:function(r){r.currentContext.restore()},destroy:function(){this.geometryMask=null}});i.exports=h},function(i,d){var e={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,h){return h===void 0&&(h=n),this.scrollFactorX=n,this.scrollFactorY=h,this}};i.exports=e},function(i,d,e){var n=e(14),h=e(25),r=e(177),o=e(269),l=e(270),a=e(3),u=4,c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(f){this._scaleX=f,this._scaleY=f,f===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleX:{get:function(){return this._scaleX},set:function(f){this._scaleX=f,f===0?this.renderFlags&=~u:this.renderFlags|=u}},scaleY:{get:function(){return this._scaleY},set:function(f){this._scaleY=f,f===0?this.renderFlags&=~u:this.renderFlags|=u}},angle:{get:function(){return l(this._rotation*n.RAD_TO_DEG)},set:function(f){this.rotation=l(f)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=o(f)}},setPosition:function(f,v,p,g){return f===void 0&&(f=0),v===void 0&&(v=f),p===void 0&&(p=0),g===void 0&&(g=0),this.x=f,this.y=v,this.z=p,this.w=g,this},copyPosition:function(f){return f.x!==void 0&&(this.x=f.x),f.y!==void 0&&(this.y=f.y),f.z!==void 0&&(this.z=f.z),f.w!==void 0&&(this.w=f.w),this},setRandomPosition:function(f,v,p,g){return f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=f+Math.random()*p,this.y=v+Math.random()*g,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,this},setScale:function(f,v){return f===void 0&&(f=1),v===void 0&&(v=f),this.scaleX=f,this.scaleY=v,this},setX:function(f){return f===void 0&&(f=0),this.x=f,this},setY:function(f){return f===void 0&&(f=0),this.y=f,this},setZ:function(f){return f===void 0&&(f=0),this.z=f,this},setW:function(f){return f===void 0&&(f=0),this.w=f,this},getLocalTransformMatrix:function(f){return f===void 0&&(f=new h),f.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(f,v){f===void 0&&(f=new h),v===void 0&&(v=new h);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(f);for(f.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)v.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),v.multiply(f,f),p=p.parentContainer;return f},getLocalPoint:function(f,v,p,g){p||(p=new a),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=f+m*this.scrollFactorX-m,T=v+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):r(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var f=0,v=this.parentContainer;v;)f+=v.rotation,v=v.parentContainer;return f}};i.exports=c},function(i,d){var e=1,n={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=e):(this._visible=!1,this.renderFlags&=~e)}},setVisible:function(h){return this.visible=h,this}};i.exports=n},function(i,d,e){i.exports={CHANGE_DATA:e(638),CHANGE_DATA_KEY:e(639),DESTROY:e(640),REMOVE_DATA:e(641),SET_DATA:e(642)}},function(i,d,e){var n=e(130),h=e(4),r=function(o,l,a,u){if(u===void 0&&(u=[]),!l&&!a)return u;l?a=Math.round(n(o)/l):l=n(o)/a;for(var c=o.x,f=o.y,v=0,p=0;p<a;p++)switch(u.push(new h(c,f)),v){case 0:c+=l,c>=o.right&&(v=1,f+=c-o.right,c=o.right);break;case 1:f+=l,f>=o.bottom&&(v=2,c-=f-o.bottom,f=o.bottom);break;case 2:c-=l,c<=o.left&&(v=3,f-=o.left-c,c=o.left);break;case 3:f-=l,f<=o.top&&(v=0,f=o.top);break}return u};i.exports=r},function(i,d){var e=function(n,h,r){h===void 0&&(h=1),r===void 0&&(r=[]);var o=Math.round(n.x1),l=Math.round(n.y1),a=Math.round(n.x2),u=Math.round(n.y2),c=Math.abs(a-o),f=Math.abs(u-l),v=o<a?1:-1,p=l<u?1:-1,g=c-f;r.push({x:o,y:l});for(var m=1;!(o===a&&l===u);){var x=g<<1;x>-f&&(g-=f,o+=v),x<c&&(g+=c,l+=p),m%h==0&&r.push({x:o,y:l}),m++}return r};i.exports=e},function(i,d){var e=function(n,h,r){if(h.length){if(h.length===1)return h[0]}else return NaN;var o=1,l,a;if(r){if(n<h[0][r])return h[0];for(;h[o][r]<n;)o++}else for(;h[o]<n;)o++;return o>h.length&&(o=h.length),r?(l=h[o-1][r],a=h[o][r],a-n<=n-l?h[o]:h[o-1]):(l=h[o-1],a=h[o],a-n<=n-l?a:l)};i.exports=e},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u,c){c===void 0&&(c=!1),this.textureKey=o,this.textureFrame=l,this.index=a,this.frame=u,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});i.exports=h},function(i,d){var e=function(n){var h=/\D/g;return n.sort(function(r,o){return parseInt(r.replace(h,""),10)-parseInt(o.replace(h,""),10)}),n};i.exports=e},function(i,d,e){var n=e(185),h=e(0),r=e(102),o=e(9),l=e(132),a=e(22),u=e(2),c=e(6),f=e(186),v=e(322),p=new h({Extends:o,initialize:function(m){o.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",m.events.once(a.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(a.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof m=="string"?m:m.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=x,T.set(C,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var C=typeof m=="string"?m:m.key;T.hasOwnProperty(C)&&delete T[C]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,C=x.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(l.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,C=c(y,"meta",null),S=c(y,"frames",null);if(C&&S){var E=c(C,"frameTags",[]);E.forEach(function(M){var R=[],L=u(M,"name",null),O=u(M,"from",0),F=u(M,"to",0),D=u(M,"direction","forward");if(!!L&&(!m||m&&m.indexOf(L)>-1)){for(var B=[],N=Number.MAX_SAFE_INTEGER,V=O;V<=F;V++){var X=V.toString(),K=S[X];if(K){var Z=u(K,"duration",Number.MAX_SAFE_INTEGER);Z<N&&(N=Z),B.push({frame:X,duration:Z})}}B.forEach(function(Y){R.push({key:g,frame:Y.frame,duration:N-Y.duration})});var G=N*R.length;D==="reverse"&&(R=R.reverse());var w={key:L,frames:R,duration:G,yoyo:D==="pingpong"},b=T.create(w);b&&x.push(b)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new n(this,m,g),this.anims.set(m,x),this.emit(l.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=c(m,"prefix",""),y=c(m,"start",0),T=c(m,"end",0),C=c(m,"suffix",""),S=c(m,"zeroPad",0),E=c(m,"outputArray",[]),M=c(m,"frames",!1),R=this.textureManager.get(g);if(!R)return E;var L;if(m)for(M||(M=v(y,T)),L=0;L<M.length;L++){var O=x+f(M[L],S,"0",1)+C;R.has(O)?E.push({key:g,frame:O}):console.warn("generateFrameNames: Frame missing: "+O+" from texture: "+g)}else for(M=R.getFrameNames(),L=0;L<M.length;L++)E.push({key:g,frame:M[L]});return E},generateFrameNumbers:function(g,m){var x=c(m,"start",0),y=c(m,"end",-1),T=c(m,"first",!1),C=c(m,"outputArray",[]),S=c(m,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=v(x,y));for(var M=0;M<S.length;M++)E.has(S[M])?C.push({key:g,frame:S[M]}):console.warn("generateFrameNumbers: Frame "+M+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var C=0;C<m.length;C++){var S=x<0?Math.abs(x)*(T-C):x*C;m[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(l.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});i.exports=p},function(i,d){var e=function(n,h,r,o){var l=[],a,u=!1;if((r||o)&&(u=!0,r||(r=""),o||(o="")),h<n)for(a=n;a>=h;a--)u?l.push(r+a.toString()+o):l.push(a);else for(a=n;a<=h;a++)u?l.push(r+a.toString()+o):l.push(a);return l};i.exports=e},function(i,d,e){var n=e(0),h=e(102),r=e(9),o=e(324),l=new n({initialize:function(){this.entries=new h,this.events=new r},add:function(a,u){return this.entries.set(a,u),this.events.emit(o.ADD,this,a,u),this},has:function(a){return this.entries.has(a)},exists:function(a){return this.entries.has(a)},get:function(a){return this.entries.get(a)},remove:function(a){var u=this.get(a);return u&&(this.entries.delete(a),this.events.emit(o.REMOVE,this,a,u.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});i.exports=l},function(i,d,e){i.exports={ADD:e(736),REMOVE:e(737)}},function(i,d,e){var n=e(323),h=e(0),r=e(22),o=new h({initialize:function(a){this.game=a,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new n),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],a=0;a<l.length;a++)this[l[a]].destroy(),this[l[a]]=null;for(var u in this.custom)this.custom[u].destroy();this.custom=null,this.game=null}});i.exports=o},function(i,d,e){var n=e(133),h=e(190),r=e(18),o=e(0),l=e(11),a=e(333),u=e(37),c=e(135),f=e(10),v=e(3),p=new o({Extends:n,Mixins:[l.Flip,l.Tint,l.Pipeline],initialize:function(m,x,y,T){n.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new f(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-x,this.scrollY=C-y}h(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,C){return this.fadeEffect.start(!1,g,m,x,y,!0,T,C)},fadeOut:function(g,m,x,y,T,C){return this.fadeEffect.start(!0,g,m,x,y,!0,T,C)},fadeFrom:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!1,g,m,x,y,T,C,S)},fade:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!0,g,m,x,y,T,C,S)},flash:function(g,m,x,y,T,C,S){return this.flashEffect.start(g,m,x,y,T,C,S)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,C,S){return this.panEffect.start(g,m,x,y,T,C,S)},rotateTo:function(g,m,x,y,T,C,S){return this.rotateToEffect.start(g,m,x,y,T,C,S)},zoomTo:function(g,m,x,y,T,C){return this.zoomEffect.start(g,m,x,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=m*this.originY,M=this._follow,R=this.deadzone,L=this.scrollX,O=this.scrollY;R&&h(R,this.midPoint.x,this.midPoint.y);var F=!1;if(M&&!this.panEffect.isRunning){var D=M.x-this.followOffset.x,B=M.y-this.followOffset.y;R?(D<R.x?L=c(L,L-(R.x-D),this.lerp.x):D>R.right&&(L=c(L,L+(D-R.right),this.lerp.x)),B<R.y?O=c(O,O-(R.y-B),this.lerp.y):B>R.bottom&&(O=c(O,O+(B-R.bottom),this.lerp.y))):(L=c(L,D-S,this.lerp.x),O=c(O,B-E,this.lerp.y)),F=!0}this.useBounds&&(L=this.clampX(L),O=this.clampY(O)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),L=Math.round(L),O=Math.round(O)),this.scrollX=L,this.scrollY=O;var N=L+x,V=O+y;this.midPoint.set(N,V);var X=g/T,K=m/T,Z=N-X/2,G=V-K/2;this.roundPixels&&(Z=Math.round(Z),G=Math.round(G)),this.worldView.setTo(Z,G,X,K),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),F&&this.emit(u.FOLLOW_UPDATE,this,M)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,C){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=m,x=r(x,0,1),y=r(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,M=g.x-T,R=g.y-C;return this.midPoint.set(M,R),this.scrollX=M-S,this.scrollY=R-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});i.exports=p},function(i,d,e){var n=e(38),h=function(r){var o=new n;r=r.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(f,v,p,g){return v+v+p+p+g+g});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(l){var a=parseInt(l[1],16),u=parseInt(l[2],16),c=parseInt(l[3],16);o.setTo(a,u,c)}return o};i.exports=h},function(i,d){var e=function(n,h,r,o){return o<<24|n<<16|h<<8|r};i.exports=e},function(i,d){var e=function(n,h,r,o){o===void 0&&(o={h:0,s:0,v:0}),n/=255,h/=255,r/=255;var l=Math.min(n,h,r),a=Math.max(n,h,r),u=a-l,c=0,f=a===0?0:u/a,v=a;return a!==l&&(a===n?c=(h-r)/u+(h<r?6:0):a===h?c=(r-n)/u+2:a===r&&(c=(n-h)/u+4),c/=6),o.hasOwnProperty("_h")?(o._h=c,o._s=f,o._v=v):(o.h=c,o.s=f,o.v=v),o};i.exports=e},function(i,d){var e=function(n){return n>16777215?{a:n>>>24,r:n>>16&255,g:n>>8&255,b:n&255}:{a:255,r:n>>16&255,g:n>>8&255,b:n&255}};i.exports=e},function(i,d,e){var n=e(38),h=function(r){return new n(r.r,r.g,r.b,r.a)};i.exports=h},function(i,d,e){var n=e(38),h=function(r){var o=new n,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(l){var a=parseInt(l[1],10),u=parseInt(l[2],10),c=parseInt(l[3],10),f=l[4]!==void 0?parseFloat(l[4]):1;o.setTo(a,u,c,f*255)}return o};i.exports=h},function(i,d,e){i.exports={Fade:e(761),Flash:e(762),Pan:e(763),Shake:e(796),RotateTo:e(797),Zoom:e(798)}},function(i,d,e){i.exports={In:e(764),Out:e(765),InOut:e(766)}},function(i,d,e){i.exports={In:e(767),Out:e(768),InOut:e(769)}},function(i,d,e){i.exports={In:e(770),Out:e(771),InOut:e(772)}},function(i,d,e){i.exports={In:e(773),Out:e(774),InOut:e(775)}},function(i,d,e){i.exports={In:e(776),Out:e(777),InOut:e(778)}},function(i,d,e){i.exports={In:e(779),Out:e(780),InOut:e(781)}},function(i,d,e){i.exports=e(782)},function(i,d,e){i.exports={In:e(783),Out:e(784),InOut:e(785)}},function(i,d,e){i.exports={In:e(786),Out:e(787),InOut:e(788)}},function(i,d,e){i.exports={In:e(789),Out:e(790),InOut:e(791)}},function(i,d,e){i.exports={In:e(792),Out:e(793),InOut:e(794)}},function(i,d,e){i.exports=e(795)},function(i,d,e){var n=e(0),h=e(33),r=e(347),o=e(2),l=e(6),a=e(7),u=e(193),c=e(1),f=e(197),v=e(187),p=new n({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=l(m,"width",1024),this.height=l(m,"height",768),this.zoom=l(m,"zoom",1),this.parent=l(m,"parent",void 0),this.scaleMode=l(m,"scaleMode",0),this.expandParent=l(m,"expandParent",!0),this.autoRound=l(m,"autoRound",!1),this.autoCenter=l(m,"autoCenter",0),this.resizeInterval=l(m,"resizeInterval",500),this.fullscreenTarget=l(m,"fullscreenTarget",null),this.minWidth=l(m,"minWidth",0),this.maxWidth=l(m,"maxWidth",0),this.minHeight=l(m,"minHeight",0),this.maxHeight=l(m,"maxHeight",0);var T=l(m,"scale",null);T&&(this.width=l(T,"width",this.width),this.height=l(T,"height",this.height),this.zoom=l(T,"zoom",this.zoom),this.parent=l(T,"parent",this.parent),this.scaleMode=l(T,"mode",this.scaleMode),this.expandParent=l(T,"expandParent",this.expandParent),this.autoRound=l(T,"autoRound",this.autoRound),this.autoCenter=l(T,"autoCenter",this.autoCenter),this.resizeInterval=l(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=l(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=l(T,"min.width",this.minWidth),this.maxWidth=l(T,"max.width",this.maxWidth),this.minHeight=l(T,"min.height",this.minHeight),this.maxHeight=l(T,"max.height",this.maxHeight)),this.renderType=l(m,"type",h.AUTO),this.canvas=l(m,"canvas",null),this.context=l(m,"context",null),this.canvasStyle=l(m,"canvasStyle",null),this.customEnvironment=l(m,"customEnvironment",!1),this.sceneConfig=l(m,"scene",null),this.seed=l(m,"seed",[(Date.now()*Math.random()).toString()]),u.RND=new u.RandomDataGenerator(this.seed),this.gameTitle=l(m,"title",""),this.gameURL=l(m,"url","https://phaser.io"),this.gameVersion=l(m,"version",""),this.autoFocus=l(m,"autoFocus",!0),this.domCreateContainer=l(m,"dom.createContainer",!1),this.domBehindCanvas=l(m,"dom.behindCanvas",!1),this.domPointerEvents=l(m,"dom.pointerEvents","none"),this.inputKeyboard=l(m,"input.keyboard",!0),this.inputKeyboardEventTarget=l(m,"input.keyboard.target",window),this.inputKeyboardCapture=l(m,"input.keyboard.capture",[]),this.inputMouse=l(m,"input.mouse",!0),this.inputMouseEventTarget=l(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=l(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=l(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=l(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=l(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=l(m,"input.touch",r.input.touch),this.inputTouchEventTarget=l(m,"input.touch.target",null),this.inputTouchCapture=l(m,"input.touch.capture",!0),this.inputActivePointers=l(m,"input.activePointers",1),this.inputSmoothFactor=l(m,"input.smoothFactor",0),this.inputWindowEvents=l(m,"input.windowEvents",!0),this.inputGamepad=l(m,"input.gamepad",!1),this.inputGamepadEventTarget=l(m,"input.gamepad.target",window),this.disableContextMenu=l(m,"disableContextMenu",!1),this.audio=l(m,"audio",{}),this.hideBanner=l(m,"banner",null)===!1,this.hidePhaser=l(m,"banner.hidePhaser",!1),this.bannerTextColor=l(m,"banner.text",y),this.bannerBackgroundColor=l(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=l(m,"fps",null);var C=l(m,"render",m);this.pipeline=l(C,"pipeline",null),this.antialias=l(C,"antialias",!0),this.antialiasGL=l(C,"antialiasGL",!0),this.mipmapFilter=l(C,"mipmapFilter","LINEAR"),this.desynchronized=l(C,"desynchronized",!1),this.roundPixels=l(C,"roundPixels",!1),this.pixelArt=l(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=l(C,"transparent",!1),this.clearBeforeRender=l(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=l(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=l(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=l(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=l(C,"powerPreference","default"),this.batchSize=l(C,"batchSize",4096),this.maxTextures=l(C,"maxTextures",-1),this.maxLights=l(C,"maxLights",10);var S=l(m,"backgroundColor",0);this.backgroundColor=v(S),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=l(m,"callbacks.preBoot",c),this.postBoot=l(m,"callbacks.postBoot",c),this.physics=l(m,"physics",{}),this.defaultPhysicsSystem=l(this.physics,"default",!1),this.loaderBaseURL=l(m,"loader.baseURL",""),this.loaderPath=l(m,"loader.path","");var E=r.os.android?6:32;this.loaderMaxParallelDownloads=l(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=l(m,"loader.crossOrigin",void 0),this.loaderResponseType=l(m,"loader.responseType",""),this.loaderAsync=l(m,"loader.async",!0),this.loaderUser=l(m,"loader.user",""),this.loaderPassword=l(m,"loader.password",""),this.loaderTimeout=l(m,"loader.timeout",0),this.loaderWithCredentials=l(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var M=l(m,"plugins",null),R=f.DefaultScene;M&&(Array.isArray(M)?this.defaultPlugins=M:a(M)&&(this.installGlobalPlugins=o(M,"global",[]),this.installScenePlugins=o(M,"scene",[]),Array.isArray(M.default)?R=M.default:Array.isArray(M.defaultMerge)&&(R=R.concat(M.defaultMerge)))),this.defaultPlugins=R;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=l(m,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=l(m,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=l(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=h.WEBGL:window.FORCE_CANVAS&&(this.renderType=h.CANVAS))}});i.exports=p},function(i,d,e){i.exports={os:e(105),browser:e(136),features:e(191),input:e(808),audio:e(809),video:e(810),fullscreen:e(811),canvasFeatures:e(348)}},function(i,d,e){var n=e(31),h={supportInverseAlpha:!1,supportNewBlendModes:!1};function r(){var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",u="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var f=new Image;f.onload=function(){var v=n.create(f,6,1),p=v.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(c,0,0),p.drawImage(f,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;n.remove(f),h.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},f.src=a+"/wCKxvRF"+u},c.src=a+"AP804Oa6"+u,!1}function o(){var a=n.create(this,2,1),u=a.getContext("2d");u.fillStyle="rgba(10, 20, 30, 0.5)",u.fillRect(0,0,1,1);var c=u.getImageData(0,0,1,1);if(c===null)return!1;u.putImageData(c,1,0);var f=u.getImageData(1,0,1,1);return f.data[0]===c.data[0]&&f.data[1]===c.data[1]&&f.data[2]===c.data[2]&&f.data[3]===c.data[3]}function l(){return typeof importScripts!="function"&&document!==void 0&&(h.supportNewBlendModes=r(),h.supportInverseAlpha=o()),h}i.exports=l()},function(i,d){var e=function(n,h,r,o){return Math.atan2(o-h,r-n)};i.exports=e},function(i,d){var e=function(n,h){return Math.atan2(h.y-n.y,h.x-n.x)};i.exports=e},function(i,d){var e=function(n){return n=n%(2*Math.PI),n>=0?n:n+2*Math.PI};i.exports=e},function(i,d){var e=function(n,h){var r=n.x-h.x,o=n.y-h.y;return Math.sqrt(r*r+o*o)};i.exports=e},function(i,d){var e=function(n,h,r,o){var l=n-r,a=h-o;return l*l+a*a};i.exports=e},function(i,d){var e=function(n,h,r){return r===void 0&&(r=1e-4),n>h-r};i.exports=e},function(i,d){var e=function(n,h,r){return r===void 0&&(r=1e-4),n<h+r};i.exports=e},function(i,d,e){var n=e(357),h=function(r,o){return n(r)/n(o)/n(r-o)};i.exports=h},function(i,d){var e=function(n){if(n===0)return 1;for(var h=n;--n;)h*=n;return h};i.exports=e},function(i,d){function e(l,a){var u=1-l;return u*u*u*a}function n(l,a){var u=1-l;return 3*u*u*l*a}function h(l,a){return 3*(1-l)*l*l*a}function r(l,a){return l*l*l*a}var o=function(l,a,u,c,f){return e(l,a)+n(l,u)+h(l,c)+r(l,f)};i.exports=o},function(i,d){function e(o,l){var a=1-o;return a*a*l}function n(o,l){return 2*(1-o)*o*l}function h(o,l){return o*o*l}var r=function(o,l,a,u){return e(o,l)+n(o,a)+h(o,u)};i.exports=r},function(i,d,e){var n=e(184),h=function(r,o,l){return o+(l-o)*n(r,0,1)};i.exports=h},function(i,d){var e=function(n){var h=Math.log(n)/.6931471805599453;return 1<<Math.ceil(h)};i.exports=e},function(i,d){var e=function(n,h){var r=n.x,o=n.y;return n.x=r*Math.cos(h)-o*Math.sin(h),n.y=r*Math.sin(h)+o*Math.cos(h),n};i.exports=e},function(i,d){var e=function(n){return n>0?Math.ceil(n):Math.floor(n)};i.exports=e},function(i,d,e){var n=e(0),h=new n({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new h(this)},set:function(r){return this.copy(r)},copy:function(r){var o=this.val,l=r.val;return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],this},fromMat4:function(r){var o=r.val,l=this.val;return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[4],l[4]=o[5],l[5]=o[6],l[6]=o[8],l[7]=o[9],l[8]=o[10],this},fromArray:function(r){var o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],this},identity:function(){var r=this.val;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,this},transpose:function(){var r=this.val,o=r[1],l=r[2],a=r[5];return r[1]=r[3],r[2]=r[6],r[3]=o,r[5]=r[7],r[6]=l,r[7]=a,this},invert:function(){var r=this.val,o=r[0],l=r[1],a=r[2],u=r[3],c=r[4],f=r[5],v=r[6],p=r[7],g=r[8],m=g*c-f*p,x=-g*u+f*v,y=p*u-c*v,T=o*m+l*x+a*y;return T?(T=1/T,r[0]=m*T,r[1]=(-g*l+a*p)*T,r[2]=(f*l-a*c)*T,r[3]=x*T,r[4]=(g*o-a*v)*T,r[5]=(-f*o+a*u)*T,r[6]=y*T,r[7]=(-p*o+l*v)*T,r[8]=(c*o-l*u)*T,this):null},adjoint:function(){var r=this.val,o=r[0],l=r[1],a=r[2],u=r[3],c=r[4],f=r[5],v=r[6],p=r[7],g=r[8];return r[0]=c*g-f*p,r[1]=a*p-l*g,r[2]=l*f-a*c,r[3]=f*v-u*g,r[4]=o*g-a*v,r[5]=a*u-o*f,r[6]=u*p-c*v,r[7]=l*v-o*p,r[8]=o*c-l*u,this},determinant:function(){var r=this.val,o=r[0],l=r[1],a=r[2],u=r[3],c=r[4],f=r[5],v=r[6],p=r[7],g=r[8];return o*(g*c-f*p)+l*(-g*u+f*v)+a*(p*u-c*v)},multiply:function(r){var o=this.val,l=o[0],a=o[1],u=o[2],c=o[3],f=o[4],v=o[5],p=o[6],g=o[7],m=o[8],x=r.val,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],M=x[5],R=x[6],L=x[7],O=x[8];return o[0]=y*l+T*c+C*p,o[1]=y*a+T*f+C*g,o[2]=y*u+T*v+C*m,o[3]=S*l+E*c+M*p,o[4]=S*a+E*f+M*g,o[5]=S*u+E*v+M*m,o[6]=R*l+L*c+O*p,o[7]=R*a+L*f+O*g,o[8]=R*u+L*v+O*m,this},translate:function(r){var o=this.val,l=r.x,a=r.y;return o[6]=l*o[0]+a*o[3]+o[6],o[7]=l*o[1]+a*o[4]+o[7],o[8]=l*o[2]+a*o[5]+o[8],this},rotate:function(r){var o=this.val,l=o[0],a=o[1],u=o[2],c=o[3],f=o[4],v=o[5],p=Math.sin(r),g=Math.cos(r);return o[0]=g*l+p*c,o[1]=g*a+p*f,o[2]=g*u+p*v,o[3]=g*c-p*l,o[4]=g*f-p*a,o[5]=g*v-p*u,this},scale:function(r){var o=this.val,l=r.x,a=r.y;return o[0]=l*o[0],o[1]=l*o[1],o[2]=l*o[2],o[3]=a*o[3],o[4]=a*o[4],o[5]=a*o[5],this},fromQuat:function(r){var o=r.x,l=r.y,a=r.z,u=r.w,c=o+o,f=l+l,v=a+a,p=o*c,g=o*f,m=o*v,x=l*f,y=l*v,T=a*v,C=u*c,S=u*f,E=u*v,M=this.val;return M[0]=1-(x+T),M[3]=g+E,M[6]=m-S,M[1]=g-E,M[4]=1-(p+T),M[7]=y+C,M[2]=m+S,M[5]=y-C,M[8]=1-(p+x),this},normalFromMat4:function(r){var o=r.val,l=this.val,a=o[0],u=o[1],c=o[2],f=o[3],v=o[4],p=o[5],g=o[6],m=o[7],x=o[8],y=o[9],T=o[10],C=o[11],S=o[12],E=o[13],M=o[14],R=o[15],L=a*p-u*v,O=a*g-c*v,F=a*m-f*v,D=u*g-c*p,B=u*m-f*p,N=c*m-f*g,V=x*E-y*S,X=x*M-T*S,K=x*R-C*S,Z=y*M-T*E,G=y*R-C*E,w=T*R-C*M,b=L*w-O*G+F*Z+D*K-B*X+N*V;return b?(b=1/b,l[0]=(p*w-g*G+m*Z)*b,l[1]=(g*K-v*w-m*X)*b,l[2]=(v*G-p*K+m*V)*b,l[3]=(c*G-u*w-f*Z)*b,l[4]=(a*w-c*K+f*X)*b,l[5]=(u*K-a*G-f*V)*b,l[6]=(E*N-M*B+R*D)*b,l[7]=(M*F-S*N-R*O)*b,l[8]=(S*B-E*F+R*L)*b,this):null}});i.exports=h},function(i,d,e){var n=e(0),h=e(364),r=e(1),o=e(39),l=1e-6,a=new Int8Array([1,2,0]),u=new Float32Array([0,0,0]),c=new o(1,0,0),f=new o(0,1,0),v=new o,p=new h,g=new n({initialize:function(x,y,T,C){this.onChangeCallback=r,this.set(x,y,T,C)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,C){return C===void 0&&(C=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=m*C,this._y=x*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),C+x*(m.z-C),S+x*(m.w-S))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(v.copy(c).cross(m).length()<l&&v.copy(f).cross(m),v.normalize(),this.setAxisAngle(v,Math.PI)):y>.999999?this.set(0,0,0,1):(v.copy(m).cross(x),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,C=this.w,S=m.x,E=m.y,M=m.z,R=m.w;return this.set(x*R+C*S+y*M-T*E,y*R+C*E+T*S-x*M,T*R+C*M+x*E-y*S,C*R-x*S-y*E-T*M)},slerp:function(m,x){var y=this.x,T=this.y,C=this.z,S=this.w,E=m.x,M=m.y,R=m.z,L=m.w,O=y*E+T*M+C*R+S*L;O<0&&(O=-O,E=-E,M=-M,R=-R,L=-L);var F=1-x,D=x;if(1-O>l){var B=Math.acos(O),N=Math.sin(B);F=Math.sin((1-x)*B)/N,D=Math.sin(x*B)/N}return this.set(F*y+D*E,F*T+D*M,F*C+D*R,F*S+D*L)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T,S=C?1/C:0;return this.set(-m*S,-x*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+C*S,y*E+T*S,T*E-y*S,C*E-x*S)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*S,y*E+C*S,T*E+x*S,C*E-y*S)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*S,y*E-x*S,T*E+C*S,C*E-T*S)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,C=m.z/2,S=Math.cos(y),E=Math.cos(T),M=Math.cos(C),R=Math.sin(y),L=Math.sin(T),O=Math.sin(C);switch(m.order){case"XYZ":{this.set(R*E*M+S*L*O,S*L*M-R*E*O,S*E*O+R*L*M,S*E*M-R*L*O,x);break}case"YXZ":{this.set(R*E*M+S*L*O,S*L*M-R*E*O,S*E*O-R*L*M,S*E*M+R*L*O,x);break}case"ZXY":{this.set(R*E*M-S*L*O,S*L*M+R*E*O,S*E*O+R*L*M,S*E*M-R*L*O,x);break}case"ZYX":{this.set(R*E*M-S*L*O,S*L*M+R*E*O,S*E*O-R*L*M,S*E*M+R*L*O,x);break}case"YZX":{this.set(R*E*M+S*L*O,S*L*M+R*E*O,S*E*O-R*L*M,S*E*M-R*L*O,x);break}case"XZY":{this.set(R*E*M-S*L*O,S*L*M-R*E*O,S*E*O+R*L*M,S*E*M+R*L*O,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],C=x[8],S=x[1],E=x[5],M=x[9],R=x[2],L=x[6],O=x[10],F=y+E+O,D;return F>0?(D=.5/Math.sqrt(F+1),this.set((L-M)*D,(C-R)*D,(S-T)*D,.25/D)):y>E&&y>O?(D=2*Math.sqrt(1+y-E-O),this.set(.25*D,(T+S)/D,(C+R)/D,(L-M)/D)):E>O?(D=2*Math.sqrt(1+E-y-O),this.set((T+S)/D,.25*D,(M+L)/D,(C-R)/D)):(D=2*Math.sqrt(1+O-y-E),this.set((C+R)/D,(M+L)/D,.25*D,(S-T)/D)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var C=0;x[4]>x[0]&&(C=1),x[8]>x[C*3+C]&&(C=2);var S=a[C],E=a[S];T=Math.sqrt(x[C*3+C]-x[S*3+S]-x[E*3+E]+1),u[C]=.5*T,T=.5/T,u[S]=(x[S*3+C]+x[C*3+S])*T,u[E]=(x[E*3+C]+x[C*3+E])*T,this._x=u[0],this._y=u[1],this._z=u[2],this._w=(x[E*3+S]-x[S*3+E])*T}return this.onChangeCallback(this),this}});i.exports=g},function(i,d,e){var n=e(367),h=e(31),r=e(33),o=e(191),l=function(a){var u=a.config;if((u.customEnvironment||u.canvas)&&u.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!u.customEnvironment&&!u.canvas&&u.renderType!==r.HEADLESS)if(u.renderType===r.CANVAS||u.renderType!==r.CANVAS&&!o.webGL)if(o.canvas)u.renderType=r.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else u.renderType=r.WEBGL;u.antialias||h.disableSmoothing();var c=a.scale.baseSize,f=c.width,v=c.height;if(u.canvas?(a.canvas=u.canvas,a.canvas.width=f,a.canvas.height=v):a.canvas=h.create(a,f,v,u.renderType),u.canvasStyle&&(a.canvas.style=u.canvasStyle),u.antialias||n.setCrisp(a.canvas),u.renderType!==r.HEADLESS){var p,g;p=e(368),g=e(371),u.renderType===r.WEBGL?a.renderer=new g(a):(a.renderer=new p(a),a.context=a.renderer.gameContext)}};i.exports=l},function(i,d){var e={setCrisp:function(n){var h=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return h.forEach(function(r){n.style["image-rendering"]=r}),n.style.msInterpolationMode="nearest-neighbor",n},setBicubic:function(n){return n.style["image-rendering"]="auto",n.style.msInterpolationMode="bicubic",n}};i.exports=e},function(i,d,e){var n=e(37),h=e(369),r=e(0),o=e(33),l=e(9),a=e(91),u=e(370),c=e(104),f=e(106),v=e(25),p=new r({Extends:l,initialize:function(m){l.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=u(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(f.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(a.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(a.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(a.RENDER,g,x);var T=x.x,C=x.y,S=x.width,E=x.height,M=x.renderToTexture?x.context:g.sys.context;M.save(),this.game.scene.customViewports&&(M.beginPath(),M.rect(T,C,S,E),M.clip()),this.currentContext=M;var R=x.mask;R&&R.preRenderCanvas(this,null,x._maskCamera),x.transparent||(M.fillStyle=x.backgroundColor.rgba,M.fillRect(T,C,S,E)),M.globalAlpha=x.alpha,M.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(n.PRE_RENDER,x),x.matrix.copyToContext(M);for(var L=0;L<y;L++){var O=m[L];O.mask&&O.mask.preRenderCanvas(this,O,x),O.renderCanvas(this,O,x),O.mask&&O.mask.postRenderCanvas(this,O,x)}M.setTransform(1,0,0,1,0,0),M.globalCompositeOperation="source-over",M.globalAlpha=1,x.flashEffect.postRenderCanvas(M),x.fadeEffect.postRenderCanvas(M),x.dirty=!1,R&&R.postRenderCanvas(this),M.restore(),x.renderToTexture&&(x.emit(n.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(a.POST_RENDER);var m=this.snapshotState;m.callback&&(h(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,C,S,E,M){x===void 0&&(x=!1),this.snapshotArea(y,T,C,S,m,E,M);var R=this.snapshotState;return R.getPixel=x,h(this.canvas,R),R.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,M=m.canvasData,R=M.x,L=M.y,O=m.cutWidth,F=m.cutHeight,D=m.customPivot,B=m.source.resolution,N=g.displayOriginX,V=g.displayOriginY,X=-N+m.x,K=-V+m.y;if(g.isCropped){var Z=g._crop;(Z.flipX!==g.flipX||Z.flipY!==g.flipY)&&m.updateCropUVs(Z,g.flipX,g.flipY),O=Z.cw,F=Z.ch,R=Z.cx,L=Z.cy,X=-N+Z.x,K=-V+Z.y,g.flipX&&(X>=0?X=-(X+O):X<0&&(X=Math.abs(X)-O)),g.flipY&&(K>=0?K=-(K+F):K<0&&(K=Math.abs(K)-F))}var G=1,w=1;g.flipX&&(D||(X+=-m.realWidth+N*2),G=-1),g.flipY&&(D||(K+=-m.realHeight+V*2),w=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*G,g.scaleY*w),S.copyFrom(x.matrix),y?(S.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),C.drawImage(m.source.image,R,L,O,F,X,K,O/B,F/B),g.mask&&g.mask.postRenderCanvas(this,g,x),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});i.exports=p},function(i,d,e){var n=e(31),h=e(38),r=e(2),o=function(l,a){var u=r(a,"callback"),c=r(a,"type","image/png"),f=r(a,"encoder",.92),v=Math.abs(Math.round(r(a,"x",0))),p=Math.abs(Math.round(r(a,"y",0))),g=r(a,"width",l.width),m=r(a,"height",l.height),x=r(a,"getPixel",!1);if(x){var y=l.getContext("2d"),T=y.getImageData(v,p,1,1),C=T.data;u.call(null,new h(C[0],C[1],C[2],C[3]/255))}else if(v!==0||p!==0||g!==l.width||m!==l.height){var S=n.createWebGL(this,g,m),E=S.getContext("2d");E.drawImage(l,v,p,g,m,0,0,g,m);var M=new Image;M.onerror=function(){u.call(null),n.remove(S)},M.onload=function(){u.call(null,M),n.remove(S)},M.src=S.toDataURL(c,f)}else{var R=new Image;R.onerror=function(){u.call(null)},R.onload=function(){u.call(null,R)},R.src=l.toDataURL(c,f)}};i.exports=o},function(i,d,e){var n=e(35),h=e(348),r=function(){var o=[],l=h.supportNewBlendModes,a="source-over";return o[n.NORMAL]=a,o[n.ADD]="lighter",o[n.MULTIPLY]=l?"multiply":a,o[n.SCREEN]=l?"screen":a,o[n.OVERLAY]=l?"overlay":a,o[n.DARKEN]=l?"darken":a,o[n.LIGHTEN]=l?"lighten":a,o[n.COLOR_DODGE]=l?"color-dodge":a,o[n.COLOR_BURN]=l?"color-burn":a,o[n.HARD_LIGHT]=l?"hard-light":a,o[n.SOFT_LIGHT]=l?"soft-light":a,o[n.DIFFERENCE]=l?"difference":a,o[n.EXCLUSION]=l?"exclusion":a,o[n.HUE]=l?"hue":a,o[n.SATURATION]=l?"saturation":a,o[n.COLOR]=l?"color":a,o[n.LUMINOSITY]=l?"luminosity":a,o[n.ERASE]="destination-out",o[n.SOURCE_IN]="source-in",o[n.SOURCE_OUT]="source-out",o[n.SOURCE_ATOP]="source-atop",o[n.DESTINATION_OVER]="destination-over",o[n.DESTINATION_IN]="destination-in",o[n.DESTINATION_OUT]="destination-out",o[n.DESTINATION_ATOP]="destination-atop",o[n.LIGHTER]="lighter",o[n.COPY]="copy",o[n.XOR]="xor",o};i.exports=r},function(i,d,e){var n=e(93),h=e(37),r=e(0),o=e(33),l=e(9),a=e(91),u=e(22),c=e(138),f=e(69),v=e(1),p=e(372),g=e(141),m=e(104),x=e(106),y=e(12),T=e(383),C=new r({Extends:l,initialize:function(E){l.call(this);var M=E.config,R={alpha:M.transparent,desynchronized:M.desynchronized,depth:!1,antialias:M.antialiasGL,premultipliedAlpha:M.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:M.failIfMajorPerformanceCaveat,powerPreference:M.powerPreference,preserveDrawingBuffer:M.preserveDrawingBuffer};this.config={clearBeforeRender:M.clearBeforeRender,antialias:M.antialias,backgroundColor:M.backgroundColor,contextCreation:R,roundPixels:M.roundPixels,maxTextures:M.maxTextures,maxTextureSize:M.maxTextureSize,batchSize:M.batchSize,maxLights:M.maxLights,mipmapFilter:M.mipmapFilter},this.game=E,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=Infinity,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,M=this.game,R=this.canvas,L=S.backgroundColor;if(M.config.context?E=M.config.context:E=R.getContext("webgl",S.contextCreation)||R.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var O=this;this.contextLostHandler=function(b){O.contextLost=!0,O.game.events.emit(u.CONTEXT_LOST,O),b.preventDefault()},this.contextRestoredHandler=function(){O.contextLost=!1,O.init(O.config),O.game.events.emit(u.CONTEXT_RESTORED,O)},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),M.context=E;for(var F=0;F<=27;F++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var D=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var B="WEBGL_compressed_texture_",N="WEBKIT_"+B;this.compression.ETC1=E.getExtension(B+"etc1")||E.getExtension(N+"etc1"),this.compression.PVRTC=E.getExtension(B+"pvrtc")||E.getExtension(N+"pvrtc"),this.compression.S3TC=E.getExtension(B+"s3tc")||E.getExtension(N+"s3tc"),this.supportedExtensions=D;var V="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(V)>-1?E.getExtension(V):null;var X="OES_vertex_array_object";this.vaoExtension=D.indexOf(X)>-1?E.getExtension(X):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(L.redGL,L.greenGL,L.blueGL,L.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var K=this.tempTextures;if(Array.isArray(K))for(var Z=0;F<this.maxTextures;Z++)E.deleteTexture(K[Z]);else K=new Array(this.maxTextures);for(var G=0;G<this.maxTextures;G++){var w=E.createTexture();E.activeTexture(E.TEXTURE0+G),E.bindTexture(E.TEXTURE_2D,w),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),K[G]=w,this.textureIndexes.push(G)}return this.tempTextures=K,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new f().identity(),M.textures.once(x.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,M=S.scale.baseSize;this.width=M.width,this.height=M.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,null),R.enable(R.SCISSOR_TEST),S.scale.on(m.RESIZE,this.onResize,this),this.resize(M.width,M.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var M=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),M.viewport(0,0,S,E),this.drawingBufferHeight=M.drawingBufferHeight,M.scissor(0,M.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(a.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,M,R,L){L===void 0&&(L=this.drawingBufferHeight);var O=this.scissorStack,F=[S,E,M,R];return O.push(F),this.setScissor(S,E,M,R,L),this.currentScissor=F,F},setScissor:function(S,E,M,R,L){L===void 0&&(L=this.drawingBufferHeight);var O=this.gl,F=this.currentScissor,D=M>0&&R>0;if(F&&D){var B=F[0],N=F[1],V=F[2],X=F[3];D=B!==S||N!==E||V!==M||X!==R}D&&(this.flush(),O.scissor(S,L-E-R,M,R))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var M=E[0],R=E[1],L=E[2],O=E[3];L>0&&O>0&&S.scissor(M,this.drawingBufferHeight-R-O,L,O)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var M=this.gl,R=this.blendModes[S];return E||S!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),M.enable(M.BLEND),M.blendEquation(R.equation),R.func.length>2?M.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):M.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var M=this.blendModes.push({func:S,equation:E});return M-1},updateBlendMode:function(S,E,M){return this.blendModes[S]&&(this.blendModes[S].func=E,M&&(this.blendModes[S].equation=M)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var M=this.gl;M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.activeTexture(S.TEXTURE0+M),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,M=this.tempTextures;if(S){for(var R=0;R<M.length;R++)E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,M[R]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,M[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,M[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,M=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,M<this.maxTextures?(S.glIndex=M,E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,M,R){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,M,R))},setFramebuffer:function(S,E,M,R){if(E===void 0&&(E=!1),M===void 0&&(M=!1),R===void 0&&(R=!0),S===this.currentFramebuffer)return this;var L=this.gl,O=this.width,F=this.height;return S&&S.renderTexture&&R?(O=S.renderTexture.width,F=S.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,S),R&&L.viewport(0,0,O,F),E&&(S?(this.drawingBufferHeight=F,this.pushScissor(0,0,O,F)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,M&&this.resetTextures(),this},popFramebuffer:function(S,E,M){S===void 0&&(S=!1),E===void 0&&(E=!1),M===void 0&&(M=!0);var R=this.fboStack;R.pop();var L=R[R.length-1];return L||(L=null),this.setFramebuffer(L,S,E,M),L},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,M,R){var L=this.gl,O=L.NEAREST,F=L.NEAREST,D=L.CLAMP_TO_EDGE,B=null;E=S?S.width:E,M=S?S.height:M;var N=c(E,M);return N&&(D=L.REPEAT),R===o.ScaleModes.LINEAR&&this.config.antialias&&(O=N?this.mipmapFilter:L.LINEAR,F=L.LINEAR),!S&&typeof E=="number"&&typeof M=="number"?B=this.createTexture2D(0,O,F,D,D,L.RGBA,null,E,M):B=this.createTexture2D(0,O,F,D,D,L.RGBA,S),B},createTexture2D:function(S,E,M,R,L,O,F,D,B,N,V,X){N=N==null?!0:N,V===void 0&&(V=!1),X===void 0&&(X=!1);var K=this.gl,Z=K.createTexture();K.activeTexture(K.TEXTURE0);var G=K.getParameter(K.TEXTURE_BINDING_2D);return K.bindTexture(K.TEXTURE_2D,Z),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,E),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,M),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,L),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,R),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,X),F==null?K.texImage2D(K.TEXTURE_2D,S,O,D,B,0,O,K.UNSIGNED_BYTE,null):(V||(D=F.width,B=F.height),K.texImage2D(K.TEXTURE_2D,S,O,O,K.UNSIGNED_BYTE,F)),c(D,B)&&K.generateMipmap(K.TEXTURE_2D),G&&K.bindTexture(K.TEXTURE_2D,G),Z.isAlphaPremultiplied=N,Z.isRenderTexture=!1,Z.width=D,Z.height=B,Z.glIndex=0,Z.glIndexCounter=-1,Z},createFramebuffer:function(S,E,M,R){var L=this.gl,O=L.createFramebuffer(),F=0;if(this.setFramebuffer(O),R){var D=L.createRenderbuffer();L.bindRenderbuffer(L.RENDERBUFFER,D),L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,S,E),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.RENDERBUFFER,D)}if(M.isRenderTexture=!0,M.isAlphaPremultiplied=!1,L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,M,0),F=L.checkFramebufferStatus(L.FRAMEBUFFER),F!==L.FRAMEBUFFER_COMPLETE){var B={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+B[F])}return O.renderTexture=M,this.setFramebuffer(null),this.resetTextures(),O},createProgram:function(S,E){var M=this.gl,R=M.createProgram(),L=M.createShader(M.VERTEX_SHADER),O=M.createShader(M.FRAGMENT_SHADER);if(M.shaderSource(L,S),M.shaderSource(O,E),M.compileShader(L),M.compileShader(O),!M.getShaderParameter(L,M.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+M.getShaderInfoLog(L));if(!M.getShaderParameter(O,M.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+M.getShaderInfoLog(O));if(M.attachShader(R,L),M.attachShader(R,O),M.linkProgram(R),!M.getProgramParameter(R,M.LINK_STATUS))throw new Error(`Link Program failed:
`+M.getProgramInfoLog(R));return M.useProgram(R),R},createVertexBuffer:function(S,E){var M=this.gl,R=M.createBuffer();return M.bindBuffer(M.ARRAY_BUFFER,R),M.bufferData(M.ARRAY_BUFFER,S,E),M.bindBuffer(M.ARRAY_BUFFER,null),R},createIndexBuffer:function(S,E){var M=this.gl,R=M.createBuffer();return M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,R),M.bufferData(M.ELEMENT_ARRAY_BUFFER,S,E),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),n(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,M=S.y,R=S.width,L=S.height,O=S.backgroundColor;if(S.emit(h.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,M,R,L),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),O.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(E,M,R,L,y.getTintFromFloats(O.blueGL,O.greenGL,O.redGL,1),O.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,M=this.currentCameraMask;return E.length>0?S=E[E.length-1]:M.mask&&M.mask.isStencil&&(S=M),S},postRenderCamera:function(S){var E=S.flashEffect,M=S.fadeEffect;if(E.isRunning||M.isRunning||M.isComplete){var R=this.pipelines.setMulti();E.postRenderWebGL(R,y.getTintFromFloats),M.postRenderWebGL(R,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(h.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(a.PRE_RENDER)}},render:function(S,E,M){if(!this.contextLost){var R=E.length;if(this.emit(a.RENDER,S,M),this.preRenderCamera(M),R===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(M);return}this.currentType="";for(var L=this.currentMask,O=0;O<R;O++){this.finalType=O===R-1;var F=E[O],D=F.mask;L=this.currentMask,L.mask&&L.mask!==D&&L.mask.postRenderWebGL(this,L.camera),D&&L.mask!==D&&D.preRenderWebGL(this,F,M),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var B=F.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[O+1].type===this.currentType,F.renderWebGL(this,F,M),this.newType=!1}L=this.currentMask,L.mask&&L.mask.postRenderWebGL(this,L.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(M)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(a.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,M){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,M)},snapshotArea:function(S,E,M,R,L,O,F){var D=this.snapshotState;return D.callback=L,D.type=O,D.encoder=F,D.getPixel=!1,D.x=S,D.y=E,D.width=Math.min(M,this.gl.drawingBufferWidth),D.height=Math.min(R,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,M){return this.snapshotArea(S,E,1,1,M),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,M,R,L,O,F,D,B,N,V){L===void 0&&(L=!1),O===void 0&&(O=0),F===void 0&&(F=0),D===void 0&&(D=E),B===void 0&&(B=M);var X=this.currentFramebuffer;this.snapshotArea(O,F,D,B,R,N,V);var K=this.snapshotState;return K.getPixel=L,K.isFramebuffer=!0,K.bufferWidth=E,K.bufferHeight=M,this.setFramebuffer(S),T(this.canvas,K),this.setFramebuffer(X),K.callback=null,K.isFramebuffer=!1,this},canvasToTexture:function(S,E,M,R){return M===void 0&&(M=!1),R===void 0&&(R=!1),E?this.updateCanvasTexture(S,E,R):this.createCanvasTexture(S,M,R)},createCanvasTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var R=this.gl,L=R.NEAREST,O=R.NEAREST,F=S.width,D=S.height,B=R.CLAMP_TO_EDGE,N=c(F,D);return!E&&N&&(B=R.REPEAT),this.config.antialias&&(L=N?this.mipmapFilter:R.LINEAR,O=R.LINEAR),this.createTexture2D(0,L,O,B,B,R.RGBA,S,F,D,!0,!1,M)},updateCanvasTexture:function(S,E,M){M===void 0&&(M=!1);var R=this.gl,L=S.width,O=S.height;if(L>0&&O>0){R.activeTexture(R.TEXTURE0);var F=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,E),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,M),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),E.width=L,E.height=O,F&&R.bindTexture(R.TEXTURE_2D,F)}return E},createVideoTexture:function(S,E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);var R=this.gl,L=R.NEAREST,O=R.NEAREST,F=S.videoWidth,D=S.videoHeight,B=R.CLAMP_TO_EDGE,N=c(F,D);return!E&&N&&(B=R.REPEAT),this.config.antialias&&(L=N?this.mipmapFilter:R.LINEAR,O=R.LINEAR),this.createTexture2D(0,L,O,B,B,R.RGBA,S,F,D,!0,!0,M)},updateVideoTexture:function(S,E,M){M===void 0&&(M=!1);var R=this.gl,L=S.videoWidth,O=S.videoHeight;if(L>0&&O>0){R.activeTexture(R.TEXTURE0);var F=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,E),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,M),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),E.width=L,E.height=O,F&&R.bindTexture(R.TEXTURE_2D,F)}return E},setTextureFilter:function(S,E){var M=this.gl,R=[M.LINEAR,M.NEAREST][E];M.activeTexture(M.TEXTURE0);var L=M.getParameter(M.TEXTURE_BINDING_2D);return M.bindTexture(M.TEXTURE_2D,S),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,R),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,R),L&&M.bindTexture(M.TEXTURE_2D,L),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,M=0;M<E.length;M++)S.deleteTexture(E[M]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});i.exports=C},function(i,d,e){var n=e(0),h=e(92),r=e(102),o=e(373),l=e(376),a=e(377),u=e(108),c=e(378),f=e(379),v=e(380),p=e(381),g=new n({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new r([[h.UTILITY_PIPELINE,p],[h.MULTI_PIPELINE,u],[h.BITMAPMASK_PIPELINE,o],[h.SINGLE_PIPELINE,v],[h.ROPE_PIPELINE,f],[h.LIGHT_PIPELINE,a],[h.POINTLIGHT_PIPELINE,c],[h.GRAPHICS_PIPELINE,l]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,C=this.game;if(this.classes.each(function(E,M){x=T.add(E,new M({game:C})),E===h.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(h.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(h.BITMAPMASK_PIPELINE),m)for(y in m){var S=m[y];x=new S(C),x.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var C=new T(this.game);return x&&(C.gameObject=x),C}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,C),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,C),this},blendFramesAdditive:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,C),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,C,S),this},copyFrameRect:function(m,x,y,T,C,S,E,M){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,C,S,E,M),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});i.exports=g},function(i,d,e){var n=e(0),h=e(2),r=e(866),o=e(867),l=e(107),a=e(58),u=new n({Extends:a,initialize:function(f){f.fragShader=h(f,"fragShader",r),f.vertShader=h(f,"vertShader",o),f.batchSize=h(f,"batchSize",1),f.vertices=h(f,"vertices",[-1,1,-1,-7,7,1]),f.attributes=h(f,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),a.call(this,f)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,f){a.prototype.resize.call(this,c,f),this.set2f("uResolution",c,f)},beginMask:function(c,f,v){var p=this.gl;if(c.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(c.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==c&&(g.currentMask.mask=c,g.currentMask.camera=v)}},endMask:function(c,f){var v=this.gl,p=this.renderer,g=c.bitmapMask;if(g&&v){p.flush(),p.pushFramebuffer(c.maskFramebuffer),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,f),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(v.enable(v.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),v.activeTexture(v.TEXTURE1),v.bindTexture(v.TEXTURE_2D,c.maskTexture),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,c.mainTexture),this.set1i("uInvertMaskAlpha",c.invertAlpha),v.drawArrays(this.topology,0,3),p.resetTextures()}}});i.exports=u},function(i,d,e){i.exports={AFTER_FLUSH:e(868),BEFORE_FLUSH:e(869),BIND:e(870),BOOT:e(871),DESTROY:e(872),REBIND:e(873),RESIZE:e(874)}},function(i,d,e){var n=e(0),h=e(2),r=e(107),o=new n({initialize:function(a,u,c,f,v){this.pipeline=a,this.name=u,this.renderer=a.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(c,f),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(l){var a=0,u=0,c=[];this.vertexComponentCount=0;for(var f=0;f<l.length;f++){var v=l[f],p=v.name,g=h(v,"size",1),m=h(v,"type",r.FLOAT),x=m.enum,y=m.size,T=!!v.normalized;c.push({name:p,size:g,type:x,normalized:T,offset:u,enabled:!1,location:-1}),y===4?a+=g:a++,u+=g*y}this.vertexSize=u,this.vertexComponentCount=a,this.attributes=c},bind:function(l,a){return l===void 0&&(l=!1),a===void 0&&(a=!1),a&&this.pipeline.flush(),this.renderer.setProgram(this.program),l&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(l){l===void 0&&(l=!1);for(var a=this.gl,u=this.vertexSize,c=this.attributes,f=this.program,v=0;v<c.length;v++){var p=c[v],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,C=!!p.normalized;if(l){var S=a.getAttribLocation(f,p.name);S>=0?(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,g,m,C,u,x),p.enabled=!0,p.location=S):S!==-1&&a.disableVertexAttribArray(S)}else y?a.vertexAttribPointer(T,g,m,C,u,x):!y&&T>-1&&(a.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var l=this.gl,a=this.program,u=this.uniforms,c,f,v,p=l.getProgramParameter(a,l.ACTIVE_UNIFORMS);for(c=0;c<p;c++){var g=l.getActiveUniform(a,c);if(g){f=g.name,v=l.getUniformLocation(a,f),v!==null&&(u[f]={name:f,location:v,value1:null,value2:null,value3:null,value4:null});var m=f.indexOf("[");m>0&&(f=f.substr(0,m),u.hasOwnProperty(f)||(v=l.getUniformLocation(a,f),v!==null&&(u[f]={name:f,location:v,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(l){return this.uniforms.hasOwnProperty(l)},resetUniform:function(l){var a=this.uniforms[l];return a&&(a.value1=null,a.value2=null,a.value3=null,a.value4=null),this},setUniform1:function(l,a,u,c){var f=this.uniforms[a];return f?((c||f.value1!==u)&&(f.value1=u,this.renderer.setProgram(this.program),l.call(this.gl,f.location,u),this.pipeline.currentShader=this),this):this},setUniform2:function(l,a,u,c,f){var v=this.uniforms[a];return v?((f||v.value1!==u||v.value2!==c)&&(v.value1=u,v.value2=c,this.renderer.setProgram(this.program),l.call(this.gl,v.location,u,c),this.pipeline.currentShader=this),this):this},setUniform3:function(l,a,u,c,f,v){var p=this.uniforms[a];return p?((v||p.value1!==u||p.value2!==c||p.value3!==f)&&(p.value1=u,p.value2=c,p.value3=f,this.renderer.setProgram(this.program),l.call(this.gl,p.location,u,c,f),this.pipeline.currentShader=this),this):this},setUniform4:function(l,a,u,c,f,v,p){var g=this.uniforms[a];return g?((p||g.value1!==u||g.value2!==c||g.value3!==f||g.value4!==v)&&(g.value1=u,g.value2=c,g.value3=f,g.value4=v,this.renderer.setProgram(this.program),l.call(this.gl,g.location,u,c,f,v),this.pipeline.currentShader=this),this):this},set1f:function(l,a){return this.setUniform1(this.gl.uniform1f,l,a)},set2f:function(l,a,u){return this.setUniform2(this.gl.uniform2f,l,a,u)},set3f:function(l,a,u,c){return this.setUniform3(this.gl.uniform3f,l,a,u,c)},set4f:function(l,a,u,c,f){return this.setUniform4(this.gl.uniform4f,l,a,u,c,f)},set1fv:function(l,a){return this.setUniform1(this.gl.uniform1fv,l,a,!0)},set2fv:function(l,a){return this.setUniform1(this.gl.uniform2fv,l,a,!0)},set3fv:function(l,a){return this.setUniform1(this.gl.uniform3fv,l,a,!0)},set4fv:function(l,a){return this.setUniform1(this.gl.uniform4fv,l,a,!0)},set1iv:function(l,a){return this.setUniform1(this.gl.uniform1iv,l,a,!0)},set2iv:function(l,a){return this.setUniform1(this.gl.uniform2iv,l,a,!0)},set3iv:function(l,a){return this.setUniform1(this.gl.uniform3iv,l,a,!0)},set4iv:function(l,a){return this.setUniform1(this.gl.uniform4iv,l,a,!0)},set1i:function(l,a){return this.setUniform1(this.gl.uniform1i,l,a)},set2i:function(l,a,u){return this.setUniform2(this.gl.uniform2i,l,a,u)},set3i:function(l,a,u,c){return this.setUniform3(this.gl.uniform3i,l,a,u,c)},set4i:function(l,a,u,c,f){return this.setUniform4(this.gl.uniform4i,l,a,u,c,f)},setMatrix2fv:function(l,a,u){return this.setUniform2(this.gl.uniformMatrix2fv,l,a,u,!0)},setMatrix3fv:function(l,a,u){return this.setUniform2(this.gl.uniformMatrix3fv,l,a,u,!0)},setMatrix4fv:function(l,a,u){return this.setUniform2(this.gl.uniformMatrix4fv,l,a,u,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});i.exports=o},function(i,d,e){var n=e(0),h=e(59),r=e(2),o=e(875),l=e(876),a=e(25),u=e(107),c=e(58),f=new n({Extends:c,initialize:function(p){p.fragShader=r(p,"fragShader",o),p.vertShader=r(p,"vertShader",l),p.attributes=r(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),c.call(this,p),this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(v,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var C=v+g,S=p+m,E=T.getX(v,p),M=T.getY(v,p),R=T.getX(v,S),L=T.getY(v,S),O=T.getX(C,S),F=T.getY(C,S),D=T.getX(C,p),B=T.getY(C,p),N=this.fillTint;this.batchQuad(E,M,R,L,O,F,D,B,N.TL,N.TR,N.BL,N.BR)},batchFillTriangle:function(v,p,g,m,x,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(v,p),M=S.getY(v,p),R=S.getX(g,m),L=S.getY(g,m),O=S.getX(x,y),F=S.getY(x,y),D=this.fillTint;this.batchTri(E,M,R,L,O,F,D.TL,D.TR,D.BL)},batchStrokeTriangle:function(v,p,g,m,x,y,T,C,S){var E=this.tempTriangle;E[0].x=v,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=v,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(v,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=v.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,M=this.fillTint.BL,R=0;R<x;++R)C=v[R],y.push(C.x,C.y);T=h(y),x=T.length;for(var L=0;L<x;L+=3){var O=T[L+0]*2,F=T[L+1]*2,D=T[L+2]*2,B=y[O+0],N=y[O+1],V=y[F+0],X=y[F+1],K=y[D+0],Z=y[D+1],G=m.getX(B,N),w=m.getY(B,N),b=m.getX(V,X),Y=m.getY(V,X),U=m.getX(K,Z),W=m.getY(K,Z);this.batchTri(G,w,b,Y,U,W,S,E,M)}y.length=0},batchStrokePath:function(v,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=v.length-1,T=0;T<y;T++){var C=v[T],S=v[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(v,p,g,m,x,y,T,C,S,E,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(E,R);var L=g-v,O=m-p,F=Math.sqrt(L*L+O*O),D=x*(m-p)/F,B=x*(v-g)/F,N=y*(m-p)/F,V=y*(v-g)/F,X=g-N,K=m-V,Z=v-D,G=p-B,w=g+N,b=m+V,Y=v+D,U=p+B,W=R.getX(X,K),H=R.getY(X,K),J=R.getX(Z,G),q=R.getY(Z,G),_=R.getX(w,b),nt=R.getY(w,b),rt=R.getX(Y,U),at=R.getY(Y,U),vt=this.strokeTint,ut=vt.TL,ct=vt.TR,Ft=vt.BL,Tt=vt.BR;if(this.batchQuad(rt,at,J,q,W,H,_,nt,ut,ct,Ft,Tt),!(T<=2)){var Ct=this.prevQuad,dt=this.firstQuad;C>0&&Ct[4]?this.batchQuad(rt,at,J,q,Ct[0],Ct[1],Ct[2],Ct[3],ut,ct,Ft,Tt):(dt[0]=rt,dt[1]=at,dt[2]=J,dt[3]=q,dt[4]=1),S&&dt[4]?this.batchQuad(W,H,_,nt,dt[0],dt[1],dt[2],dt[3],ut,ct,Ft,Tt):(Ct[0]=W,Ct[1]=H,Ct[2]=_,Ct[3]=nt,Ct[4]=1)}},batchVert:function(v,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=v,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(v,p,g,m,x,y,T,C,S,E,M,R){var L=!1;return this.shouldFlush(6)&&(this.flush(),L=!0),this.batchVert(v,p,S),this.batchVert(g,m,M),this.batchVert(x,y,R),this.batchVert(v,p,S),this.batchVert(x,y,R),this.batchVert(T,C,E),L},batchTri:function(v,p,g,m,x,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(v,p,T),this.batchVert(g,m,C),this.batchVert(x,y,S),E},destroy:function(){return c.prototype.destroy.call(this),this.polygonCache=null,this}});i.exports=f},function(i,d,e){var n=e(0),h=e(2),r=e(877),o=e(108),l=e(3),a=e(58),u=10,c=new l,f=new n({Extends:o,initialize:function(p){u=p.game.renderer.config.maxLights;for(var g=h(p,"fragShader",r),m=[],x=1;x<=u;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,o.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){a.prototype.boot.call(this);var v=this.gl,p=v.createTexture();v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,p),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(v,p){var g=v.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,C=T.height,S=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,M=E.color,R="uLights["+y+"].";S.transformPoint(E.x,E.y,c),this.set2f(R+"position",c.x-p.scrollX*E.scrollFactorX*p.zoom,C-(c.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(R+"color",M.r,M.g,M.b),this.set1f(R+"intensity",E.intensity),this.set1f(R+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(v){if(v!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(v){var g=-v,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=v}},setTexture2D:function(v,p){var g=this.renderer;v===void 0&&(v=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(v,m)&&(this.flush(),g.setTextureZero(v),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(v,p){p===void 0&&(p=v.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(v);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(v.rotation),this.currentUnit=0,0},getNormalMap:function(v){var p;return v?v.displayTexture?p=v.displayTexture.dataSource[v.displayFrame.sourceIndex]:v.texture?p=v.texture.dataSource[v.frame.sourceIndex]:v.tileset&&(Array.isArray(v.tileset)?p=v.tileset[0].image.dataSource[0]:p=v.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(v,p,g){this.lightsActive&&o.prototype.batchSprite.call(this,v,p,g)},batchTexture:function(v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,N,V,X,K,Z,G,w,b,Y,U,W,H,J,q,_){this.lightsActive&&o.prototype.batchTexture.call(this,v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D,B,N,V,X,K,Z,G,w,b,Y,U,W,H,J,q,_)},batchTextureFrame:function(v,p,g,m,x,y,T){this.lightsActive&&o.prototype.batchTextureFrame.call(this,v,p,g,m,x,y,T)}});f.LIGHT_COUNT=u,i.exports=f},function(i,d,e){var n=e(0),h=e(2),r=e(880),o=e(881),l=e(58),a=new n({Extends:l,initialize:function(c){c.vertShader=h(c,"vertShader",o),c.fragShader=h(c,"fragShader",r),c.attributes=h(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,c)},onRender:function(u,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(u,c,f,v,p,g,m,x,y,T,C,S){var E=u.color,M=u.intensity,R=u.radius,L=u.attenuation,O=E.r*M,F=E.g*M,D=E.b*M,B=c.alpha*u.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(f,v,C,S,R,L,O,F,D,B),this.batchLightVert(p,g,C,S,R,L,O,F,D,B),this.batchLightVert(m,x,C,S,R,L,O,F,D,B),this.batchLightVert(f,v,C,S,R,L,O,F,D,B),this.batchLightVert(m,x,C,S,R,L,O,F,D,B),this.batchLightVert(y,T,C,S,R,L,O,F,D,B)},batchLightVert:function(u,c,f,v,p,g,m,x,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=u,C[++S]=c,C[++S]=f,C[++S]=v,C[++S]=p,C[++S]=g,C[++S]=m,C[++S]=x,C[++S]=y,C[++S]=T,this.vertexCount++}});i.exports=a},function(i,d,e){var n=e(0),h=e(2),r=e(108),o=new n({Extends:r,initialize:function(a){a.topology=5,a.batchSize=h(a,"batchSize",256),r.call(this,a)}});i.exports=o},function(i,d,e){var n=e(0),h=e(2),r=e(108),o=e(882),l=e(883),a=e(58),u=new n({Extends:r,initialize:function(f){f.fragShader=h(f,"fragShader",o),f.vertShader=h(f,"vertShader",l),f.forceZero=!0,r.call(this,f)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});i.exports=u},function(i,d,e){var n=e(884),h=e(35),r=e(0),o=e(198),l=e(885),a=e(886),u=e(2),c=e(887),f=e(382),v=e(58),p=new r({Extends:v,initialize:function(m){m.renderTarget=u(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=u(m,"vertShader",f),m.shaders=u(m,"shaders",[{name:"Copy",fragShader:a},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:l}]),m.attributes=u(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,v.call(this,m),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),m?(C.viewport(0,0,m.width,m.height),C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,C){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>m.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(M),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,g.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,g.texture,0),S&&(E?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,m.texture),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,x,y,T,C),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,m.texture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,C,S,E){var M=this.vertexViewF32;M[2]=g,M[3]=m,M[6]=x,M[7]=y,M[10]=T,M[11]=C,M[14]=g,M[15]=m,M[18]=T,M[19]=C,M[22]=S,M[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});i.exports=p},function(i,d){i.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(i,d,e){var n=e(31),h=e(38),r=e(2),o=function(l,a){var u=l.getContext("experimental-webgl"),c=r(a,"callback"),f=r(a,"type","image/png"),v=r(a,"encoder",.92),p=r(a,"x",0),g=r(a,"y",0),m=r(a,"getPixel",!1),x=r(a,"isFramebuffer",!1),y=x?r(a,"bufferWidth",1):u.drawingBufferWidth,T=x?r(a,"bufferHeight",1):u.drawingBufferHeight;if(m){var C=new Uint8Array(4),S=x?g:T-g;u.readPixels(p,S,1,1,u.RGBA,u.UNSIGNED_BYTE,C),c.call(null,new h(C[0],C[1],C[2],C[3]/255))}else{var E=r(a,"width",y),M=r(a,"height",T),R=E*M*4,L=new Uint8Array(R);u.readPixels(p,T-g-M,E,M,u.RGBA,u.UNSIGNED_BYTE,L);for(var O=n.createWebGL(this,E,M),F=O.getContext("2d"),D=F.getImageData(0,0,E,M),B=D.data,N=0;N<M;N++)for(var V=0;V<E;V++){var X=((M-N-1)*E+V)*4,K=(N*E+V)*4;B[K+0]=L[X+0],B[K+1]=L[X+1],B[K+2]=L[X+2],B[K+3]=L[X+3]}F.putImageData(D,0,0);var Z=new Image;Z.onerror=function(){c.call(null),n.remove(O)},Z.onload=function(){c.call(null,Z),n.remove(O)},Z.src=O.toDataURL(f,v)}};i.exports=o},function(i,d,e){var n=e(33),h=function(r){var o=r.config;if(!o.hideBanner){var l="WebGL";o.renderType===n.CANVAS?l="Canvas":o.renderType===n.HEADLESS&&(l="Headless");var a=o.audio,u=r.device.audio,c;if(u.webAudio&&!a.disableWebAudio?c="Web Audio":a.noAudio||!u.webAudio&&!u.audioData?c="No Audio":c="HTML5 Audio",r.device.browser.ie)window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io");else{var f="",v=[f];if(Array.isArray(o.bannerBackgroundColor)){var p;o.bannerBackgroundColor.forEach(function(m){f=f.concat("%c "),v.push("background: "+m),p=m}),v[v.length-1]="color: "+o.bannerTextColor+"; background: "+p}else f=f.concat("%c "),v.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);v.push("background: transparent"),o.gameTitle&&(f=f.concat(o.gameTitle),o.gameVersion&&(f=f.concat(" v"+o.gameVersion)),o.hidePhaser||(f=f.concat(" / ")));var g="";o.hidePhaser||(f=f.concat("Phaser v"+n.VERSION+g+" ("+l+" | "+c+")")),f=f.concat(" %c "+o.gameURL),v[0]=f,console.log.apply(console,v)}}};i.exports=h},function(i,d,e){var n=e(0),h=e(6),r=e(1),o=e(386),l=new n({initialize:function(u,c){this.game=u,this.raf=new o,this.started=!1,this.running=!1,this.minFps=h(c,"min",5),this.targetFps=h(c,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=h(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=h(c,"deltaHistory",10),this.panicMax=h(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=h(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var a=window.performance.now();this.time=a,this.lastTime=a,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=Math.min(this._target,this.deltaHistory[u]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(a){if(this.started)return this;this.started=!0,this.running=!0;for(var u=0;u<this.deltaSmoothingMax;u++)this.deltaHistory[u]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=a,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var a=window.performance.now();this.now=a;var u=a-this.lastTime;u<0&&(u=0),this.rawDelta=u;var c=this.deltaIndex,f=this.deltaHistory,v=this.deltaSmoothingMax,p=u,g=u;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=f[c],p=Math.min(p,this._min)),f[c]=p,this.deltaIndex++,this.deltaIndex>v&&(this.deltaIndex=0),g=0;for(var m=0;m<v;m++)g+=f[m];g/=v}this.delta=g,this.time+=this.rawDelta,a>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(a,g,x),this.lastTime=a,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(a){this.running||(a&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});i.exports=l},function(i,d,e){var n=e(0),h=e(1),r=new n({initialize:function(){this.isRunning=!1,this.callback=h,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var l=this;this.step=function a(){var u=window.performance.now();l.lastTime=l.tick,l.tick=u,l.callback(u),l.timeOutID=window.requestAnimationFrame(a)},this.stepTimeout=function a(){var u=Date.now(),c=Math.min(Math.max(l.target*2+l.tick-u,0),l.target);l.lastTime=l.tick,l.tick=u,l.callback(u),l.timeOutID=window.setTimeout(a,c)}},start:function(o,l,a){this.isRunning||(this.callback=o,this.isSetTimeOut=l,this.target=a,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=h}});i.exports=r},function(i,d,e){var n=e(22),h=function(r){var o,l=r.events;if(document.hidden!==void 0)o="visibilitychange";else{var a=["webkit","moz","ms"];a.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},o=c+"visibilitychange")})}var u=function(c){document.hidden||c.type==="pause"?l.emit(n.HIDDEN):l.emit(n.VISIBLE)};o&&document.addEventListener(o,u,!1),window.onblur=function(){l.emit(n.BLUR)},window.onfocus=function(){l.emit(n.FOCUS)},window.focus&&r.config.autoFocus&&window.focus()};i.exports=h},function(i,d,e){var n=e(389),h=e(31),r=e(6),o=function(l){var a=r(l,"data",[]),u=r(l,"canvas",null),c=r(l,"palette",n),f=r(l,"pixelWidth",1),v=r(l,"pixelHeight",f),p=r(l,"resizeCanvas",!0),g=r(l,"clearCanvas",!0),m=r(l,"preRender",null),x=r(l,"postRender",null),y=Math.floor(Math.abs(a[0].length*f)),T=Math.floor(Math.abs(a.length*v));u||(u=h.create2D(this,y,T),p=!1,g=!1),p&&(u.width=y,u.height=T);var C=u.getContext("2d");g&&C.clearRect(0,0,y,T),m&&m(u,C);for(var S=0;S<a.length;S++)for(var E=a[S],M=0;M<E.length;M++){var R=E[M];R!=="."&&R!==" "&&(C.fillStyle=c[R],C.fillRect(M*f,S*v,f,v))}return x&&x(u,C),u};i.exports=o},function(i,d){i.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(i,d,e){var n=e(0),h=e(358),r=e(94),o=e(3),l=new n({Extends:r,initialize:function(u,c,f,v){r.call(this,"CubicBezierCurve"),Array.isArray(u)&&(v=new o(u[6],u[7]),f=new o(u[4],u[5]),c=new o(u[2],u[3]),u=new o(u[0],u[1])),this.p0=u,this.p1=c,this.p2=f,this.p3=v},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,u){u===void 0&&(u=new o);var c=this.p0,f=this.p1,v=this.p2,p=this.p3;return u.set(h(a,c.x,f.x,v.x,p.x),h(a,c.y,f.y,v.y,p.y))},draw:function(a,u){u===void 0&&(u=32);var c=this.getPoints(u);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var f=1;f<c.length;f++)a.lineTo(c[f].x,c[f].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(a){var u=a.points,c=new o(u[0],u[1]),f=new o(u[2],u[3]),v=new o(u[4],u[5]),p=new o(u[6],u[7]);return new l(c,f,v,p)},i.exports=l},function(i,d,e){var n=e(0),h=e(94),r=e(36),o=e(6),l=e(196),a=e(3),u=new n({Extends:h,initialize:function(f,v,p,g,m,x,y,T){if(typeof f=="object"){var C=f;f=o(C,"x",0),v=o(C,"y",0),p=o(C,"xRadius",0),g=o(C,"yRadius",p),m=o(C,"startAngle",0),x=o(C,"endAngle",360),y=o(C,"clockwise",!1),T=o(C,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);h.call(this,"EllipseCurve"),this.p0=new a(f,v),this._xRadius=p,this._yRadius=g,this._startAngle=r(m),this._endAngle=r(x),this._clockwise=y,this._rotation=r(T)},getStartPoint:function(c){return c===void 0&&(c=new a),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,f){f===void 0&&(f=new a);for(var v=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=v;for(;p>v;)p-=v;p<Number.EPSILON&&(g?p=0:p=v),this._clockwise&&!g&&(p===v?p=-v:p=p-v);var m=this._startAngle+c*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=x-this.p0.x,E=y-this.p0.y;x=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return f.set(x,y)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return l(this._startAngle)},set:function(c){this._startAngle=r(c)}},endAngle:{get:function(){return l(this._endAngle)},set:function(c){this._endAngle=r(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return l(this._rotation)},set:function(c){this._rotation=r(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});u.fromJSON=function(c){return new u(c)},i.exports=u},function(i,d,e){var n=e(0),h=e(94),r=e(199),o=e(10),l=e(3),a=new n({Extends:h,initialize:function(c,f){h.call(this,"LineCurve"),Array.isArray(c)&&(f=new l(c[2],c[3]),c=new l(c[0],c[1])),this.p0=c,this.p1=f,this.arcLengthDivisions=1},getBounds:function(u){return u===void 0&&(u=new o),r([this.p0,this.p1],u)},getStartPoint:function(u){return u===void 0&&(u=new l),u.copy(this.p0)},getResolution:function(u){return u===void 0&&(u=1),u},getPoint:function(u,c){return c===void 0&&(c=new l),u===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(u).add(this.p0),c)},getPointAt:function(u,c){return this.getPoint(u,c)},getTangent:function(u,c){return c===void 0&&(c=new l),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(u,c,f){var v;if(c){var p=this.getLengths(f),g=p[p.length-1],m=Math.min(c,g);v=m/g}else v=u;return v},draw:function(u){return u.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),u},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});a.fromJSON=function(u){var c=u.points,f=new l(c[0],c[1]),v=new l(c[2],c[3]);return new a(f,v)},i.exports=a},function(i,d,e){var n=e(0),h=e(3),r=new n({initialize:function(l,a){this.active=!1,this.p0=new h(l,a)},getPoint:function(o,l){return l===void 0&&(l=new h),l.copy(this.p0)},getPointAt:function(o,l){return this.getPoint(o,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});i.exports=r},function(i,d,e){var n=e(0),h=e(94),r=e(359),o=e(3),l=new n({Extends:h,initialize:function(u,c,f){h.call(this,"QuadraticBezier"),Array.isArray(u)&&(f=new o(u[4],u[5]),c=new o(u[2],u[3]),u=new o(u[0],u[1])),this.p0=u,this.p1=c,this.p2=f},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,u){u===void 0&&(u=new o);var c=this.p0,f=this.p1,v=this.p2;return u.set(r(a,c.x,f.x,v.x),r(a,c.y,f.y,v.y))},draw:function(a,u){u===void 0&&(u=32);var c=this.getPoints(u);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var f=1;f<c.length;f++)a.lineTo(c[f].x,c[f].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(a){var u=a.points,c=new o(u[0],u[1]),f=new o(u[2],u[3]),v=new o(u[4],u[5]);return new l(c,f,v)},i.exports=l},function(i,d,e){var n=e(194),h=e(0),r=e(94),o=e(3),l=new h({Extends:r,initialize:function(u){u===void 0&&(u=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(u)},addPoints:function(a){for(var u=0;u<a.length;u++){var c=new o;typeof a[u]=="number"?(c.x=a[u],c.y=a[u+1],u++):Array.isArray(a[u])?(c.x=a[u][0],c.y=a[u][1]):(c.x=a[u].x,c.y=a[u].y),this.points.push(c)}return this},addPoint:function(a,u){var c=new o(a,u);return this.points.push(c),c},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.points[0])},getResolution:function(a){return a*this.points.length},getPoint:function(a,u){u===void 0&&(u=new o);var c=this.points,f=(c.length-1)*a,v=Math.floor(f),p=f-v,g=c[v===0?v:v-1],m=c[v],x=c[v>c.length-2?c.length-1:v+1],y=c[v>c.length-3?c.length-1:v+2];return u.set(n(p,g.x,m.x,x.x,y.x),n(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var a=[],u=0;u<this.points.length;u++)a.push(this.points[u].x),a.push(this.points[u].y);return{type:this.type,points:a}}});l.fromJSON=function(a){return new l(a.points)},i.exports=l},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u){(!l||l==="")&&(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!a||a==="")&&(a=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),u===void 0&&(u=null),this.key=o,this.fragmentSrc=l,this.vertexSrc=a,this.uniforms=u}});i.exports=h},function(i,d,e){var n=e(38);n.ColorSpectrum=e(909),n.ColorToRGBA=e(910),n.ComponentToHex=e(398),n.GetColor=e(103),n.GetColor32=e(328),n.HexStringToColor=e(327),n.HSLToColor=e(911),n.HSVColorWheel=e(912),n.HSVToRGB=e(188),n.HueToComponent=e(399),n.IntegerToColor=e(189),n.IntegerToRGB=e(330),n.Interpolate=e(913),n.ObjectToColor=e(331),n.RandomRGB=e(914),n.RGBStringToColor=e(332),n.RGBToHSV=e(329),n.RGBToString=e(915),n.ValueToColor=e(187),i.exports=n},function(i,d){var e=function(n){var h=n.toString(16);return h.length===1?"0"+h:h};i.exports=e},function(i,d){var e=function(n,h,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(h-n)*6*r:r<1/2?h:r<2/3?n+(h-n)*(2/3-r)*6:n};i.exports=e},function(i,d,e){var n=e(105),h=function(r){if(document.readyState==="complete"||document.readyState==="interactive"){r();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),r()};document.body?n.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};i.exports=h},function(i,d){var e=function(n){if(!n)return window.innerHeight;var h=Math.abs(window.orientation),r={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),r.w=h===90?o.offsetHeight:window.innerWidth,r.h=h===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?r.h:r.w};i.exports=e},function(i,d,e){var n=e(201),h=function(r,o){var l=window.screen,a=l?l.orientation||l.mozOrientation||l.msOrientation:!1;if(a&&typeof a.type=="string")return a.type;if(typeof a=="string")return a;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}else return o>r?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE};i.exports=h},function(i,d){i.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(i,d){i.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(i,d){i.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(i,d){i.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(i,d){var e=function(n){var h;return n!==""&&(typeof n=="string"?h=document.getElementById(n):n&&n.nodeType===1&&(h=n)),h||(h=document.body),h};i.exports=e},function(i,d){var e=function(n){var h="";try{if(window.DOMParser){var r=new DOMParser;h=r.parseFromString(n,"text/xml")}else h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(n)}catch(o){h=null}return!h||!h.documentElement||h.getElementsByTagName("parsererror").length?null:h};i.exports=e},function(i,d,e){var n=e(0),h=e(203),r=e(9),o=e(51),l=e(22),a=e(410),u=e(411),c=e(412),f=e(413),v=e(25),p=e(177),g=new n({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new a(this):null,this.mouse=y.inputMouse?new u(this):null,this.touch=y.inputTouch?new f(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new c(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(l.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(l.PRE_RENDER,this.preRender,this),this.game.events.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(o.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(o.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(o.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,C=new c(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,x.push(C)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(m,x);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(!E.active){E.touchstart(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(h.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(h.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,m),y.push(E);break}}this.updateInputPlugins(h.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,m),y.push(E);break}}this.updateInputPlugins(h.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(o.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,C=m.parentContainer;if(C)do{if(!C.willRender(x)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var M=m.x,R=m.y;y.getWorldPoint(M,R,C),m.worldX=C.x,m.worldY=C.y;for(var L={x:0,y:0},O=this._tempMatrix,F=this._tempMatrix2,D=0;D<x.length;D++){var B=x[D];if(!!this.inputCandidate(B,y)){var N=C.x+S*B.scrollFactorX-S,V=C.y+E*B.scrollFactorY-E;B.parentContainer?(B.getWorldTransformMatrix(O,F),O.applyInverse(N,V,L)):p(N,V,B.x,B.y,B.rotation,B.scaleX,B.scaleY,L),this.pointWithinHitArea(B,L.x,L.y)&&T.push(B)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var C=m.position,S=m.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(x),M=this.scaleManager.transformY(y),R=m.smoothFactor;!T||R===0?(C.x=E,C.y=M):(C.x=E*R+S.x*(1-R),C.y=M*R+S.y*(1-R))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});i.exports=g},function(i,d,e){var n=e(93),h=e(0),r=e(22),o=e(51),l=e(143),a=e(1),u=new h({initialize:function(f){this.manager=f,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=a,this.onKeyUp=a,f.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(o.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(o.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var f=this.target;f&&(f.addEventListener("keydown",this.onKeyDown,!1),f.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var f=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=l[p.trim().toUpperCase()]),f.indexOf(p)===-1&&f.push(p)}this.preventDefault=f.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var f=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=l[p.toUpperCase()]),n(f,p)}this.preventDefault=f.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});i.exports=u},function(i,d,e){var n=e(0),h=e(191),r=e(51),o=e(1),l=new n({initialize:function(u){this.manager=u,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,u.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputMouse,this.target=a.inputMouseEventTarget,this.passive=a.inputMousePassive,this.preventDefaultDown=a.inputMousePreventDefaultDown,this.preventDefaultUp=a.inputMousePreventDefaultUp,this.preventDefaultMove=a.inputMousePreventDefaultMove,this.preventDefaultWheel=a.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},requestPointerLock:function(){if(h.pointerLock){var a=this.target;a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock,a.requestPointerLock()}},releasePointerLock:function(){h.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var a=this.target;if(!!a){var u=this,c=this.manager,f=c.canvas,v=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&(c.onMouseMove(g),u.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){v&&window.focus(),!g.defaultPrevented&&u.enabled&&c&&c.enabled&&(c.onMouseDown(g),u.preventDefaultDown&&g.target===f&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&g.target!==f&&c.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&(c.onMouseUp(g),u.preventDefaultUp&&g.target===f&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&g.target!==f&&c.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&c.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&c.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&u.enabled&&c&&c.enabled&&c.onMouseWheel(g),u.preventDefaultWheel&&g.target===f&&g.preventDefault()};var p={passive:!0};if(a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("mousedown",this.onMouseDown),a.addEventListener("mouseup",this.onMouseUp),a.addEventListener("mouseover",this.onMouseOver,p),a.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?a.addEventListener("wheel",this.onMouseWheel,{passive:!1}):a.addEventListener("wheel",this.onMouseWheel,p),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch(g){window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}h.pointerLock&&(this.pointerLockChange=function(g){var m=u.target;u.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,c.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("mousedown",this.onMouseDown),a.removeEventListener("mouseup",this.onMouseUp),a.removeEventListener("mouseover",this.onMouseOver),a.removeEventListener("mouseout",this.onMouseOut),window&&(a=this.isTop?window.top:window,a.removeEventListener("mousedown",this.onMouseDownWindow),a.removeEventListener("mouseup",this.onMouseUpWindow)),h.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});i.exports=l},function(i,d,e){var n=e(349),h=e(0),r=e(50),o=e(124),l=e(360),a=e(3),u=e(105),c=new h({initialize:function(v,p){this.manager=v,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new a,this.prevPosition=new a,this.midPoint=new a(-1,-1),this.velocity=new a,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(f){var v=f.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(f,v){return f.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var f=this.position.x,v=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(f===p&&v===g)){var m=l(this.motionFactor,p,f),x=l(this.motionFactor,g,v);o(m,f,.1)&&(m=f),o(x,v,.1)&&(x=v),this.midPoint.set(m,x);var y=f-m,T=v-x;this.velocity.set(y,T),this.angle=n(m,x,f,v),this.distance=Math.sqrt(y*y+T*T)}},up:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=f.timeStamp,this.wasTouch=!1)},down:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),u.macOS&&f.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=f.timeStamp),this.wasTouch=!1},move:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.locked&&(this.movementX=f.movementX||f.mozMovementX||f.webkitMovementX||0,this.movementY=f.movementY||f.mozMovementY||f.webkitMovementY||0),this.moveTime=f.timeStamp,this.wasTouch=!1},wheel:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.deltaX=f.deltaX,this.deltaY=f.deltaY,this.deltaZ=f.deltaZ,this.wasTouch=!1},touchstart:function(f,v){f.pointerId&&(this.pointerId=f.pointerId),this.identifier=f.identifier,this.target=f.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(f,v){this.event=v,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(f,v){f===void 0&&(f=10),v===void 0&&(v=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<f;y++){var T=1/f*y;v[y]={x:l(T,p,m),y:l(T,g,x)}}return v},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},time:{get:function(){return this.event?this.event.timeStamp:0}}});i.exports=c},function(i,d,e){var n=e(0),h=e(51),r=e(1),o=new n({initialize:function(a){this.manager=a,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,a.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this,a=this.manager.canvas,u=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){u&&window.focus(),!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchStart(p),l.capture&&p.cancelable&&p.target===a&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&p.target!==a&&l.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchMove(p),l.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchEnd(p),l.capture&&p.cancelable&&p.target===a&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&p.target!==a&&l.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&(l.manager.onTouchCancel(p),l.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&l.enabled&&l.manager&&l.manager.enabled&&l.manager.setCanvasOut(p)};var c=this.target;if(!!c){var f={passive:!0},v={passive:!1};c.addEventListener("touchstart",this.onTouchStart,this.capture?v:f),c.addEventListener("touchmove",this.onTouchMove,this.capture?v:f),c.addEventListener("touchend",this.onTouchEnd,this.capture?v:f),c.addEventListener("touchcancel",this.onTouchCancel,this.capture?v:f),c.addEventListener("touchover",this.onTouchOver,this.capture?v:f),c.addEventListener("touchout",this.onTouchOut,this.capture?v:f),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),l.removeEventListener("touchover",this.onTouchOver),l.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});i.exports=o},function(i,d,e){var n=e(0),h=e(22),r=e(9),o=e(8),l=e(16),a=e(5),u=e(2),c=e(24),f=e(93),v=new n({Extends:r,initialize:function(g){r.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(h.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=u(g,"key",null),x=u(g,"plugin",null),y=u(g,"start",!1),T=u(g,"mapping",null),C=u(g,"data",null),m&&(x?this.install(m,x,y,T,C):console.warn("Missing `plugin` for key: "+m));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=u(g,"key",null),x=u(g,"plugin",null),T=u(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(h.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,C=this.game,S=p.scene,E=p.settings.map,M=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],C[y]?(p[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var R=0;R<m.length;R++)for(T=m[R],x=0;x<T.length;x++)if(y=T[x],!!c.hasCore(y)){var L=c.getCore(y),O=L.mapping,F=new L.plugin(S,this,O);p[O]=F,L.custom?S[O]=F:E.hasOwnProperty(O)&&(S[E[O]]=F),M&&F.boot()}for(T=this.plugins,x=0;x<T.length;x++){var D=T[x];D.mapping&&(S[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!c.hasCore(p))c.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(c.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=c.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&f(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){f(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,m){return g&&a.register(p,g),m&&l.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&a.remove(p),m&&l.remove(p),this},registerFileType:function(p,g,m){o.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});i.exports=v},function(i,d,e){var n=e(201),h=e(0),r=e(9),o=e(104),l=e(22),a=e(401),u=e(407),c=e(402),f=e(1),v=e(10),p=e(416),g=e(76),m=e(3),x=new h({Extends:r,initialize:function(T){r.call(this),this.game=T,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:f,windowResize:f,fullScreenChange:f,fullScreenError:f}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(l.PRE_STEP,this.step,this),y.events.once(l.READY,this.refresh,this),y.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,M=y.autoRound;if(typeof T=="string"){var R=this.parentSize.width;R===0&&(R=window.innerWidth);var L=parseInt(T,10)/100;T=Math.floor(R*L)}if(typeof C=="string"){var O=this.parentSize.height;O===0&&(O=window.innerHeight);var F=parseInt(C,10)/100;C=Math.floor(O*F)}this.scaleMode=S,this.autoRound=M,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,M&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===n.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=c(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=u(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==n.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=a(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,M=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,L=y*C,O=T*C;return S&&(L=Math.floor(L),O=Math.floor(O)),(L!==y||O!==T)&&(R.width=L+"px",R.height=O+"px"),this.refresh(E,M)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=c(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(o.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,M=this.zoom,R=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(T*M,C*M),S=this.displaySize.width,E=this.displaySize.height,R&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,R&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,R&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==n.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,M=S.height,R=Math.floor((this.parentSize.width-E)/2),L=Math.floor((this.parentSize.height-M)/2);y===n.CENTER.CENTER_HORIZONTALLY?L=0:y===n.CENTER.CENTER_VERTICALLY&&(R=0),C.marginLeft=R+"px",C.marginTop=L+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});i.exports=x},function(i,d,e){var n=e(18),h=e(0),r=e(76),o=e(3),l=new h({initialize:function(u,c,f,v){u===void 0&&(u=0),c===void 0&&(c=u),f===void 0&&(f=0),v===void 0&&(v=null),this._width=u,this._height=c,this._parent=v,this.aspectMode=f,this.aspectRatio=c===0?1:u/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(a){return a===void 0&&(a=0),this.aspectMode=a,this.setSize(this._width,this._height)},setSnap:function(a,u){return a===void 0&&(a=0),u===void 0&&(u=a),this.snapTo.set(a,u),this.setSize(this._width,this._height)},setParent:function(a){return this._parent=a,this.setSize(this._width,this._height)},setMin:function(a,u){return a===void 0&&(a=0),u===void 0&&(u=a),this.minWidth=n(a,0,this.maxWidth),this.minHeight=n(u,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(a,u){return a===void 0&&(a=Number.MAX_VALUE),u===void 0&&(u=a),this.maxWidth=n(a,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(u,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(a,u){switch(a===void 0&&(a=0),u===void 0&&(u=a),this.aspectMode){case l.NONE:this._width=this.getNewWidth(r(a,this.snapTo.x)),this._height=this.getNewHeight(r(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(a,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(u,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(a,u,!0);break;case l.ENVELOP:this.constrain(a,u,!1);break}return this},setAspectRatio:function(a){return this.aspectRatio=a,this.setSize(this._width,this._height)},resize:function(a,u){return this._width=this.getNewWidth(r(a,this.snapTo.x)),this._height=this.getNewHeight(r(u,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(a,u){return u===void 0&&(u=!0),a=n(a,this.minWidth,this.maxWidth),u&&this._parent&&a>this._parent.width&&(a=Math.max(this.minWidth,this._parent.width)),a},getNewHeight:function(a,u){return u===void 0&&(u=!0),a=n(a,this.minHeight,this.maxHeight),u&&this._parent&&a>this._parent.height&&(a=Math.max(this.minHeight,this._parent.height)),a},constrain:function(a,u,c){a===void 0&&(a=0),u===void 0&&(u=a),c===void 0&&(c=!0),a=this.getNewWidth(a),u=this.getNewHeight(u);var f=this.snapTo,v=u===0?1:a/u;return c&&this.aspectRatio>v||!c&&this.aspectRatio<v?(a=r(a,f.x),u=a/this.aspectRatio,f.y>0&&(u=r(u,f.y),a=u*this.aspectRatio)):(c&&this.aspectRatio<v||!c&&this.aspectRatio>v)&&(u=r(u,f.y),a=u*this.aspectRatio,f.x>0&&(a=r(a,f.x),u=a*(1/this.aspectRatio))),this._width=a,this._height=u,this},fitTo:function(a,u){return this.constrain(a,u,!0)},envelop:function(a,u){return this.constrain(a,u,!1)},setWidth:function(a){return this.setSize(a,this._height)},setHeight:function(a){return this.setSize(this._width,a)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(a){a&&a.style&&(a.style.width=this._width+"px",a.style.height=this._height+"px")},copy:function(a){return a.setAspectMode(this.aspectMode),a.aspectRatio=this.aspectRatio,a.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(a){this.setSize(a,this._height)}},height:{get:function(){return this._height},set:function(a){this.setSize(this._width,a)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,i.exports=l},function(i,d,e){var n=e(0),h=e(144),r=e(20),o=e(22),l=e(6),a=e(95),u=e(1),c=e(418),f=e(204),v=new n({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof c?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof c?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=u,p.init&&(p.init.call(p,m.data),m.status=h.INIT,m.isTransition&&g.events.emit(r.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=h.LOADING,x.once(a.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>h.START&&x.settings.status<=h.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=h.LOADING&&m.settings.status<h.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=h.CREATING,p.create.call(p,m.data),m.status===h.DESTROYED)||(m.isTransition&&g.events.emit(r.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=h.RUNNING,g.events.emit(r.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof c){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new f(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new c(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=l(g,y[T],null);C&&(m[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):S!=="sys"&&(m[S]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof c?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=u,x.start(g);else{x.sceneUpdate=u,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=h.LOADING,y.once(a.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===h.RUNNING||x.settings.status===h.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=u,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});i.exports=v},function(i,d,e){var n=e(0),h=e(204),r=new n({initialize:function(l){this.sys=new h(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});i.exports=r},function(i,d,e){var n=e(2),h=e(205),r=function(o){var l=o.game.config.defaultPhysicsSystem,a=n(o.settings,"physics",!1);if(!(!l&&!a)){var u=[];if(l&&u.push(h(l+"Physics")),a)for(var c in a)c=h(c.concat("Physics")),u.indexOf(c)===-1&&u.push(c);return u}};i.exports=r},function(i,d,e){var n=e(2),h=function(r){var o=r.plugins.getDefaultScenePlugins(),l=n(r.settings,"plugins",!1);return Array.isArray(l)?l:o||[]};i.exports=h},function(i,d,e){var n=e(144),h=e(6),r=e(127),o=e(978),l={create:function(a){return typeof a=="string"?a={key:a}:a===void 0&&(a={}),{status:n.PENDING,key:h(a,"key",""),active:h(a,"active",!1),visible:h(a,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:h(a,"pack",!1),cameras:h(a,"cameras",null),map:h(a,"map",r(o,h(a,"mapAdd",{}))),physics:h(a,"physics",{}),loader:h(a,"loader",{}),plugins:h(a,"plugins",!1),input:h(a,"input",{})}}};i.exports=l},function(i,d,e){var n=e(31),h=e(423),r=e(0),o=e(38),l=e(33),a=e(9),u=e(106),c=e(22),f=e(388),v=e(6),p=e(425),g=e(206),m=new r({Extends:a,initialize:function(y){a.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(u.LOAD,this.updatePending,this),this.on(u.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(u.LOAD),this.off(u.ERROR),this.emit(u.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(u.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,C=new Image;C.onerror=function(){T.emit(u.ERROR,x)},C.onload=function(){var S=T.create(x,C);p.Image(S,0),T.emit(u.ADD,x,S),T.emit(u.LOAD,x,S)},C.src=y}return this},getBase64:function(x,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var M=E.canvasData,R=n.create2D(this,M.width,M.height),L=R.getContext("2d");L.drawImage(E.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),S=R.toDataURL(T,C),n.remove(R)}return S},addImage:function(x,y,T){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.Image(C,0),T&&C.setDataSource(T),this.emit(u.ADD,x,C)),C},addGLTexture:function(x,y,T,C){var S=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(x,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(u.ADD,x,S)),S},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(u.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=n.create(this,1,1);return y.canvas=T,f(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var C=n.create(this,y,T,l.CANVAS,!0);return this.addCanvas(x,C)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var C=null;return T?C=new h(this,x,y,y.width,y.height):this.checkKey(x)&&(C=new h(this,x,y,y.width,y.height),this.list[x]=C,this.emit(u.ADD,x,C)),C},addAtlas:function(x,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,C):this.addAtlasJSONHash(x,y,T,C)},addAtlasJSONArray:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=T.length===1,M=0;M<S.source.length;M++){var R=E?T[0]:T[M];p.JSONArray(S,M,R)}else p.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(u.ADD,x,S)}return S},addAtlasJSONHash:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(S,E,T[E]);else p.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(u.ADD,x,S)}return S},addAtlasXML:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(u.ADD,x,S)),S},addUnityAtlas:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(u.ADD,x,S)),S},addSpriteSheet:function(x,y,T){var C=null;if(this.checkKey(x)){C=this.create(x,y);var S=C.source[0].width,E=C.source[0].height;p.SpriteSheet(C,0,0,0,S,E,T),this.emit(u.ADD,x,C)}return C},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=v(y,"atlas",null),C=v(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var M=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(M,E,y):p.SpriteSheet(M,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(u.ADD,x,M),M}}},create:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=new g(this,x,y,T,C),this.list[x]=S),S},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var R=M.getImageData(0,0,1,1);return new o(R.data[0],R.data[1],R.data[2],R.data[3])}}return null},getPixelAlpha:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(S.source.image,x,y,1,1,0,0,1,1);var R=M.getImageData(0,0,1,1);return R.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});i.exports=m},function(i,d,e){var n=e(0),h=e(18),r=e(38),o=e(33),l=e(138),a=e(206),u=new n({Extends:a,initialize:function(f,v,p,g,m){a.call(this,f,v,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(c,f,v){return this.context.drawImage(v,c,f),this.update()},drawFrame:function(c,f,v,p){v===void 0&&(v=0),p===void 0&&(p=0);var g=this.manager.getFrame(c,f);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,v,p,x/T,y/T),this.update()}else return this},setPixel:function(c,f,v,p,g,m){m===void 0&&(m=255),c=Math.abs(Math.floor(c)),f=Math.abs(Math.floor(f));var x=this.getIndex(c,f);if(x>-1){var y=this.context.getImageData(c,f,1,1);y.data[0]=v,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,c,f)}return this},putData:function(c,f,v,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=c.width),x===void 0&&(x=c.height),this.context.putImageData(c,f,v,p,g,m,x),this},getData:function(c,f,v,p){c=h(Math.floor(c),0,this.width-1),f=h(Math.floor(f),0,this.height-1),v=h(v,1,this.width-c),p=h(p,1,this.height-f);var g=this.context.getImageData(c,f,v,p);return g},getPixel:function(c,f,v){v||(v=new r);var p=this.getIndex(c,f);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];v.setTo(m,x,y,T)}return v},getPixels:function(c,f,v,p){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=this.width),p===void 0&&(p=v),c=Math.abs(Math.round(c)),f=Math.abs(Math.round(f));for(var g=h(c,0,this.width),m=h(c+v,0,this.width),x=h(f,0,this.height),y=h(f+p,0,this.height),T=new r,C=[],S=x;S<y;S++){for(var E=[],M=g;M<m;M++)T=this.getPixel(M,S,T),E.push({x:M,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(c,f){return c=Math.abs(Math.round(c)),f=Math.abs(Math.round(f)),c<this.width&&f<this.height?(c+f*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,f,v,p){return c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=this.width),p===void 0&&(p=this.height),this.context.clearRect(c,f,v,p),this.update()},setSize:function(c,f){return f===void 0&&(f=c),(c!==this.width||f!==this.height)&&(this.canvas.width=c,this.canvas.height=f,this._source.width=c,this._source.height=f,this._source.isPowerOf2=l(c,f),this.frames.__BASE.setSize(c,f,0,0),this.width=c,this.height=f,this.refresh()),this},destroy:function(){a.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});i.exports=u},function(i,d,e){var n=e(31),h=e(0),r=e(138),o=e(168),l=new h({initialize:function(u,c,f,v,p){p===void 0&&(p=!1);var g=u.manager.game;this.renderer=g.renderer,this.texture=u,this.source=c,this.image=c,this.compressionAlgorithm=null,this.resolution=1,this.width=f||c.naturalWidth||c.videoWidth||c.width||0,this.height=v||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(a){var u=this.renderer;u&&(u.gl?this.isCanvas?this.glTexture=u.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=u.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=u.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=u.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),a.config.antialias||this.setFilter(1)},setFilter:function(a){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,a),this.scaleMode=a},setFlipY:function(a){return a===void 0&&(a=!0),this.flipY=a,this},update:function(){var a=this.renderer.gl;a&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):a&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});i.exports=l},function(i,d,e){i.exports={AtlasXML:e(979),Canvas:e(980),Image:e(981),JSONArray:e(982),JSONHash:e(983),SpriteSheet:e(984),SpriteSheetFromAtlas:e(985),UnityYAML:e(986)}},function(i,d,e){var n=e(427),h=e(430),r=e(432),o={create:function(l){var a=l.config.audio,u=l.device.audio;return a.noAudio||!u.webAudio&&!u.audioData?new h(l):u.webAudio&&!a.disableWebAudio?new r(l):new n(l)}};i.exports=o},function(i,d,e){var n=e(145),h=e(0),r=e(70),o=e(429),l=new h({Extends:n,initialize:function(u){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,u)},add:function(a,u){var c=new o(this,a,u);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var a=this;if(this.game.cache.audio.entries.each(function(v,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return a.locked=!0,!1;return!0}),!!this.locked){var u=!1,c=function(){u=!0},f=function(){if(u){u=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",f);var v=[];if(a.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&v.push(y)}return!0}),v.length!==0){var p=v[v.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,v.forEach(function(g){g.dataset.locked="false"}),a.unlocked=!0},v.forEach(function(g){g.load()})}};this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",f,!1)}},onBlur:function(){this.forEachActiveSound(function(a){a.isPlaying&&(this.onBlurPausedSounds.push(a),a.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(a){a.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(a,u,c){return a.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:a,prop:u,value:c}),!0):!1},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this._mute},set:function(a){this._mute=a,this.forEachActiveSound(function(u){u.updateMute()}),this.emit(r.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this._volume},set:function(a){this._volume=a,this.forEachActiveSound(function(u){u.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,a)}}});i.exports=l},function(i,d,e){var n=e(78),h=function(r,o,l,a,u){if(a===void 0&&(a=0),u===void 0&&(u=r.length),n(r,a,u))for(var c=a;c<u;c++){var f=r[c];if(!o||o&&l===void 0&&f.hasOwnProperty(o)||o&&l!==void 0&&f[o]===l)return f}return null};i.exports=h},function(i,d,e){var n=e(146),h=e(0),r=e(70),o=e(18),l=new h({Extends:n,initialize:function(u,c,f){if(f===void 0&&(f={}),this.tags=u.game.cache.audio.get(c),!this.tags)throw new Error('There is no audio asset with key "'+c+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,u,c,f)},play:function(a,u){return this.manager.isLocked(this,"play",[a,u])||!n.prototype.play.call(this,a,u)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!n.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var a=this.currentConfig.seek,u=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+a;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),u===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+u*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var a=0;a<this.tags.length;a++){var u=this.tags[a];if(u.dataset.used==="false")return u.dataset.used="true",this.audio=u,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&c.push(v)},this),c.sort(function(v,p){return v.loop===p.loop?p.seek/p.duration-v.seek/v.duration:v.loop?1:-1});var f=c[0];return this.audio=f.audio,f.reset(),f.audio=null,f.startTime=0,f.previousTime=0,!0},playCatchPromise:function(){var a=this.audio.play();a&&a.catch(function(u){console.warn(u)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(a){if(!!this.isPlaying){if(this.startTime>0){this.startTime<a-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,a-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var u=this.currentMarker?this.currentMarker.start:0,c=u+this.duration,f=this.audio.currentTime;if(this.currentConfig.loop)f>=c-this.manager.loopEndOffset?(this.audio.currentTime=u+Math.max(0,f-c),f=this.audio.currentTime):f<u&&(this.audio.currentTime+=u,f=this.audio.currentTime),f<this.previousTime&&this.emit(r.LOOPED,this);else if(f>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(r.COMPLETE,this);return}this.previousTime=f}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(a){this.currentConfig.mute=a,!this.manager.isLocked(this,"mute",a)&&(this.updateMute(),this.emit(r.MUTE,this,a))}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.currentConfig.volume},set:function(a){this.currentConfig.volume=a,!this.manager.isLocked(this,"volume",a)&&(this.updateVolume(),this.emit(r.VOLUME,this,a))}},setVolume:function(a){return this.volume=a,this},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,!this.manager.isLocked(this,r.RATE,a)&&(this.calculateRate(),this.emit(r.RATE,this,a))}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,!this.manager.isLocked(this,r.DETUNE,a)&&(this.calculateRate(),this.emit(r.DETUNE,this,a))}},setDetune:function(a){return this.detune=a,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.isLocked(this,"seek",a)||this.startTime>0||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.isPlaying?(this.previousTime=a,this.audio.currentTime=a):this.isPaused&&(this.currentConfig.seek=a),this.emit(r.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,!this.manager.isLocked(this,"loop",a)&&(this.audio&&(this.audio.loop=a),this.emit(r.LOOP,this,a))}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.currentConfig.pan},set:function(a){this.currentConfig.pan=a,this.emit(r.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});i.exports=l},function(i,d,e){var n=e(145),h=e(0),r=e(9),o=e(431),l=e(1),a=new h({Extends:r,initialize:function(c){r.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(u,c){var f=new o(this,u,c);return this.sounds.push(f),f},addAudioSprite:function(u,c){var f=this.add(u,c);return f.spritemap={},f},play:function(u,c){return!1},playAudioSprite:function(u,c,f){return!1},remove:function(u){return n.prototype.remove.call(this,u)},removeByKey:function(u){return n.prototype.removeByKey.call(this,u)},pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,forEachActiveSound:function(u,c){n.prototype.forEachActiveSound.call(this,u,c)},destroy:function(){n.prototype.destroy.call(this)}});i.exports=a},function(i,d,e){var n=e(146),h=e(0),r=e(9),o=e(17),l=function(){return!1},a=function(){return null},u=function(){return this},c=new h({Extends:r,initialize:function(v,p,g){g===void 0&&(g={}),r.call(this),this.manager=v,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:l,updateMarker:l,removeMarker:a,play:l,pause:l,resume:l,stop:l,destroy:function(){n.prototype.destroy.call(this)},setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u});i.exports=c},function(i,d,e){var n=e(433),h=e(145),r=e(0),o=e(70),l=e(22),a=e(434),u=new r({Extends:h,initialize:function(f){this.context=this.createAudioContext(f),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),h.call(this,f),this.locked&&f.isBooted?this.unlock():f.events.once(l.BOOT,this.unlock,this)},createAudioContext:function(c){var f=c.config.audio;if(f.context)return f.context.resume(),f.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(c){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=c,this.masterMuteNode=c.createGain(),this.masterVolumeNode=c.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(c.destination),this.destination=this.masterMuteNode,this},add:function(c,f){var v=new a(this,c,f);return this.sounds.push(v),v},decodeAudio:function(c,f){var v;Array.isArray(c)?v=c:v=[{key:c,data:f}];for(var p=this.game.cache.audio,g=v.length,m=0;m<v.length;m++){var x=v[m],y=x.key,T=x.data;typeof T=="string"&&(T=n(T));var C=function(E,M){p.add(E,M),this.emit(o.DECODED,E),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y),S=function(E,M){console.error("Error decoding audio: "+E+" - ",M?M.message:""),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var c=this,f=document.body,v=function p(){if(c.context&&f){var g=f.removeEventListener;c.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),c.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};f&&(f.addEventListener("touchstart",v,!1),f.addEventListener("touchend",v,!1),f.addEventListener("click",v,!1),f.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var c=this.context;(c.state==="suspended"||c.state==="interrupted")&&!this.locked&&c.resume()},update:function(c,f){h.prototype.update.call(this,c,f);var v=this.context;v&&v.state==="interrupted"&&v.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var c=this;this.context.close().then(function(){c.context=null})}h.prototype.destroy.call(this)},setMute:function(c){return this.mute=c,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(c){this.masterMuteNode.gain.setValueAtTime(c?0:1,0),this.emit(o.GLOBAL_MUTE,this,c)}},setVolume:function(c){return this.volume=c,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(c){this.masterVolumeNode.gain.setValueAtTime(c,0),this.emit(o.GLOBAL_VOLUME,this,c)}}});i.exports=u},function(i,d){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),h=0;h<e.length;h++)n[e.charCodeAt(h)]=h;var r=function(o){o=o.substr(o.indexOf(",")+1);var l=o.length,a=l*.75,u=0,c,f,v,p;o[l-1]==="="&&(a--,o[l-2]==="="&&a--);for(var g=new ArrayBuffer(a),m=new Uint8Array(g),x=0;x<l;x+=4)c=n[o.charCodeAt(x)],f=n[o.charCodeAt(x+1)],v=n[o.charCodeAt(x+2)],p=n[o.charCodeAt(x+3)],m[u++]=c<<2|f>>4,m[u++]=(f&15)<<4|v>>2,m[u++]=(v&3)<<6|p&63;return g};i.exports=r},function(i,d,e){var n=e(146),h=e(0),r=e(70),o=new h({Extends:n,initialize:function(a,u,c){if(c===void 0&&(c={}),this.audioBuffer=a.game.cache.audio.get(u),!this.audioBuffer)throw new Error('Audio key "'+u+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=a.context.createGain(),this.volumeNode=a.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),a.context.createStereoPanner?(this.pannerNode=a.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(a.destination)):this.volumeNode.connect(a.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,a,u,c)},play:function(l,a){return n.prototype.play.call(this,l,a)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return n.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0):!1},createAndStartBufferSource:function(){var l=this.currentConfig.seek,a=this.currentConfig.delay,u=this.manager.context.currentTime+a,c=(this.currentMarker?this.currentMarker.start:0)+l,f=this.duration-l;this.playTime=u-l,this.startTime=u,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,u),Math.max(0,c),Math.max(0,f)),this.resetConfig()},createAndStartLoopBufferSource:function(){var l=this.getLoopTime(),a=this.currentMarker?this.currentMarker.start:0,u=this.duration;this.loopTime=l,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,l),Math.max(0,a),Math.max(0,u))},createBufferSource:function(){var l=this,a=this.manager.context.createBufferSource();return a.buffer=this.audioBuffer,a.connect(this.muteNode),a.onended=function(u){u.target===l.source&&(l.currentConfig.loop?l.hasLooped=!0:l.hasEnded=!0)},a},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var l=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,l),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,l)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var l=0,a=0;a<this.rateUpdates.length;a++){var u=0;a<this.rateUpdates.length-1?u=this.rateUpdates[a+1].time:u=this.manager.context.currentTime-this.playTime,l+=(u-this.rateUpdates[a].time)*this.rateUpdates[a].rate}return l},getLoopTime:function(){for(var l=0,a=0;a<this.rateUpdates.length-1;a++)l+=(this.rateUpdates[a+1].time-this.rateUpdates[a].time)*this.rateUpdates[a].rate;var u=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+u.time+(this.duration-l)/u.rate},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.calculateRate(),this.emit(r.RATE,this,l)}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.calculateRate(),this.emit(r.DETUNE,this,l)}},setDetune:function(l){return this.detune=l,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(l){this.currentConfig.mute=l,this.muteNode.gain.setValueAtTime(l?0:1,0),this.emit(r.MUTE,this,l)}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(l){this.currentConfig.volume=l,this.volumeNode.gain.setValueAtTime(l,0),this.emit(r.VOLUME,this,l)}},setVolume:function(l){return this.volume=l,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.currentConfig.seek=l,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),l&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,l)}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(l){this.currentConfig.pan=l,this.pannerNode&&this.pannerNode.pan.setValueAtTime(l,this.manager.context.currentTime),this.emit(r.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});i.exports=o},function(i,d){var e=function(n){for(var h=n.length,r=n[0].length,o=new Array(r),l=0;l<r;l++){o[l]=new Array(h);for(var a=h-1;a>-1;a--)o[l][a]=n[a][l]}return o};i.exports=e},function(i,d){function e(r,o,l){var a=r[o];r[o]=r[l],r[l]=a}function n(r,o){return r<o?-1:r>o?1:0}var h=function(r,o,l,a,u){for(l===void 0&&(l=0),a===void 0&&(a=r.length-1),u===void 0&&(u=n);a>l;){if(a-l>600){var c=a-l+1,f=o-l+1,v=Math.log(c),p=.5*Math.exp(2*v/3),g=.5*Math.sqrt(v*p*(c-p)/c)*(f-c/2<0?-1:1),m=Math.max(l,Math.floor(o-f*p/c+g)),x=Math.min(a,Math.floor(o+(c-f)*p/c+g));h(r,o,m,x,u)}var y=r[o],T=l,C=a;for(e(r,l,o),u(r[a],y)>0&&e(r,l,a);T<C;){for(e(r,T,C),T++,C--;u(r[T],y)<0;)T++;for(;u(r[C],y)>0;)C--}u(r[l],y)===0?e(r,l,C):(C++,e(r,C,a)),C<=o&&(l=C+1),o<=C&&(a=C-1)}};i.exports=h},function(i,d,e){var n=e(6),h=e(131),r=function(l,a,u){for(var c=[],f=0;f<l.length;f++)for(var v=0;v<a.length;v++)for(var p=0;p<u;p++)c.push({a:l[f],b:a[v]});return c},o=function(l,a,u){var c=n(u,"max",0),f=n(u,"qty",1),v=n(u,"random",!1),p=n(u,"randomB",!1),g=n(u,"repeat",0),m=n(u,"yoyo",!1),x=[];if(p&&h(a),g===-1)if(c===0)g=0;else{var y=l.length*a.length*f;m&&(y*=2),g=Math.ceil(c/y)}for(var T=0;T<=g;T++){var C=r(l,a,f);v&&h(C),x=x.concat(C),m&&(C.reverse(),x=x.concat(C))}return c&&x.splice(c),x};i.exports=o},function(i,d,e){i.exports={PROCESS_QUEUE_ADD:e(1041),PROCESS_QUEUE_REMOVE:e(1042)}},function(i,d,e){var n=e(13),h=function(r,o){var l=n(o,"anims",null);if(l===null)return r;if(typeof l=="string")r.anims.play(l);else if(typeof l=="object"){var a=r.anims,u=n(l,"key",void 0);if(u){var c=n(l,"startFrame",void 0),f=n(l,"delay",0),v=n(l,"repeat",0),p=n(l,"repeatDelay",0),g=n(l,"yoyo",!1),m=n(l,"play",!1),x=n(l,"delayedPlay",0),y={key:u,delay:f,repeat:v,repeatDelay:p,yoyo:g,startFrame:c};m?a.play(y):x>0?a.playAfterDelay(y,x):a.load(y)}}return r};i.exports=h},function(i,d,e){var n=e(0),h=e(109),r=new n({initialize:function(l,a,u,c,f){this.parent=l,this.x=a,this.y=u,this.frame=c,this.data={},this.tint=16777215,this._visible=f,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof h&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,l,a){return this.x=o,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,a&&this.setFrame(a),this},setPosition:function(o,l){return this.x=o,this.y=l,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,l){return this.flipX=o,this.flipY=l,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});i.exports=r},function(i,d,e){var n=e(10),h=function(r,o,l){l===void 0&&(l=new n);var a=Math.min(r.x,o.x),u=Math.min(r.y,o.y),c=Math.max(r.right,o.right)-a,f=Math.max(r.bottom,o.bottom)-u;return l.setTo(a,u,c,f)};i.exports=h},function(i,d,e){var n=e(0),h=e(11),r=e(1055),o=e(15),l=e(7),a=e(202),u=e(20),c=e(140),f=new n({Extends:o,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Origin,h.ScrollFactor,h.Transform,h.Visible,r],initialize:function(p,g,m,x,y,T){o.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(u.SLEEP,this.handleSceneEvent,this),p.sys.events.on(u.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(v){var p=this.node,g=p.style;p&&(g.display=v.settings.visible?"block":"none")},setSkew:function(v,p){return v===void 0&&(v=0),p===void 0&&(p=v),this.skewX=v,this.skewY=p,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.addEventListener(v[p],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.removeEventListener(v[p],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,p,g){return this.setElement(document.createElement(v),p,g)},setElement:function(v,p,g){this.removeElement();var m;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),m=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(m=v),!m)return this;if(this.node=m,p&&l(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(v,p){var g=this.cache.get(v);return g&&this.createFromHTML(g,p),this},createFromHTML:function(v,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(a(this.node),this.node=null),this},updateSize:function(){var v=this.node,p=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(v,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][v]===p)return g[m]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preUpdate:function(){var v=this.parentContainer,p=this.node;p&&v&&!v.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(u.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(u.WAKE,this.handleSceneEvent,this)}});i.exports=f},function(i,d,e){var n=e(1056),h=e(15),r=e(25),o=new r,l=new r,a=new r,u=function(c,f,v,p){if(!!f.node){var g=f.node.style,m=f.scene.sys.settings;if(!g||!m.visible||h.RENDER_MASK!==f.renderFlags||f.cameraFilter!==0&&f.cameraFilter&v.id||f.parentContainer&&!f.parentContainer.willRender()){g.display="none";return}var x=f.parentContainer,y=v.alpha*f.alpha;x&&(y*=x.alpha);var T=o,C=l,S=a,E=0,M=0,R="0%",L="0%";p?(E=f.width*f.scaleX*f.originX,M=f.height*f.scaleY*f.originY,C.applyITRS(f.x-E,f.y-M,f.rotation,f.scaleX,f.scaleY),T.copyFrom(v.matrix),T.multiplyWithOffset(p,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),C.e=f.x-E,C.f=f.y-M,T.multiply(C,S)):(E=f.width*f.originX,M=f.height*f.originY,C.applyITRS(f.x-E,f.y-M,f.rotation,f.scaleX,f.scaleY),T.copyFrom(v.matrix),R=100*f.originX+"%",L=100*f.originY+"%",C.e-=v.scrollX*f.scrollFactorX,C.f-=v.scrollY*f.scrollFactorY,T.multiply(C,S)),f.transformOnly||(g.display="block",g.opacity=y,g.zIndex=f._depth,g.pointerEvents=f.pointerEvents,g.mixBlendMode=n[f._blendMode]),g.transform=S.getCSSMatrix()+" skew("+f.skewX+"rad, "+f.skewY+"rad) rotate3d("+f.rotate3d.x+","+f.rotate3d.y+","+f.rotate3d.z+","+f.rotate3d.w+f.rotate3dAngle+")",g.transformOrigin=R+" "+L}};i.exports=u},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(1060),l=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.Origin,h.ScrollFactor,h.Size,h.Texture,h.Tint,h.Transform,h.Visible,o],initialize:function(u){r.call(this,u,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});i.exports=l},function(i,d,e){var n=e(218),h=e(98),r=e(14),o=e(4),l=function(a,u,c){c===void 0&&(c=new o);var f=h(u,0,r.PI2);return n(a,f,c)};i.exports=l},function(i,d,e){var n=e(447),h=e(218),r=e(98),o=e(14),l=function(a,u,c,f){f===void 0&&(f=[]),!u&&c>0&&(u=n(a)/c);for(var v=0;v<u;v++){var p=r(v/u,0,o.PI2);f.push(h(a,p))}return f};i.exports=l},function(i,d){var e=function(n){var h=n.width/2,r=n.height/2,o=Math.pow(h-r,2)/Math.pow(h+r,2);return Math.PI*(h+r)*(1+3*o/(10+Math.sqrt(4-3*o)))};i.exports=e},function(i,d,e){var n=e(217),h=e(30),r=function(o,l,a,u,c,f){var v=l.commandBuffer,p=v.length,g=c||o.currentContext;if(!(p===0||!h(o,g,l,a,u))){a.addToRenderList(l);var m=1,x=1,y=0,T=0,C=1,S=0,E=0,M=0;g.beginPath();for(var R=0;R<p;++R){var L=v[R];switch(L){case n.ARC:g.arc(v[R+1],v[R+2],v[R+3],v[R+4],v[R+5],v[R+6]),R+=7;break;case n.LINE_STYLE:C=v[R+1],y=v[R+2],m=v[R+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,M=y&255,g.strokeStyle="rgba("+S+","+E+","+M+","+m+")",g.lineWidth=C,R+=3;break;case n.FILL_STYLE:T=v[R+1],x=v[R+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,M=T&255,g.fillStyle="rgba("+S+","+E+","+M+","+x+")",R+=2;break;case n.BEGIN_PATH:g.beginPath();break;case n.CLOSE_PATH:g.closePath();break;case n.FILL_PATH:f||g.fill();break;case n.STROKE_PATH:f||g.stroke();break;case n.FILL_RECT:f?g.rect(v[R+1],v[R+2],v[R+3],v[R+4]):g.fillRect(v[R+1],v[R+2],v[R+3],v[R+4]),R+=4;break;case n.FILL_TRIANGLE:g.beginPath(),g.moveTo(v[R+1],v[R+2]),g.lineTo(v[R+3],v[R+4]),g.lineTo(v[R+5],v[R+6]),g.closePath(),f||g.fill(),R+=6;break;case n.STROKE_TRIANGLE:g.beginPath(),g.moveTo(v[R+1],v[R+2]),g.lineTo(v[R+3],v[R+4]),g.lineTo(v[R+5],v[R+6]),g.closePath(),f||g.stroke(),R+=6;break;case n.LINE_TO:g.lineTo(v[R+1],v[R+2]),R+=2;break;case n.MOVE_TO:g.moveTo(v[R+1],v[R+2]),R+=2;break;case n.LINE_FX_TO:g.lineTo(v[R+1],v[R+2]),R+=5;break;case n.MOVE_FX_TO:g.moveTo(v[R+1],v[R+2]),R+=5;break;case n.SAVE:g.save();break;case n.RESTORE:g.restore();break;case n.TRANSLATE:g.translate(v[R+1],v[R+2]),R+=2;break;case n.SCALE:g.scale(v[R+1],v[R+2]),R+=2;break;case n.ROTATE:g.rotate(v[R+1]),R+=1;break;case n.GRADIENT_FILL_STYLE:R+=5;break;case n.GRADIENT_LINE_STYLE:R+=6;break}}g.restore()}};i.exports=r},function(i,d,e){var n=e(0),h=e(137),r=e(80),o=e(2),l=e(68),a=new n({initialize:function(c,f,v,p){p===void 0&&(p=!1),this.propertyKey=f,this.propertyValue=v,this.defaultValue=v,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(c)},loadConfig:function(u,c){u===void 0&&(u={}),c&&(this.propertyKey=c),this.propertyValue=o(u,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(u){return this.propertyValue=u,this.setMethods()},setMethods:function(){var u=this.propertyValue,c=typeof u;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,c==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(u))this.onEmit=this.randomStaticValueEmit;else if(c==="function")this.emitOnly?this.onEmit=u:this.onUpdate=u;else if(c==="object"&&this.hasBoth(u,"start","end")){this.start=u.start,this.end=u.end;var f=this.has(u,"random");if(f&&(this.onEmit=this.randomRangedValueEmit),this.has(u,"steps"))this.steps=u.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var v=this.has(u,"ease")?u.ease:"Linear";this.ease=r(v,u.easeParams),f||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(c==="object"&&this.hasBoth(u,"min","max"))this.start=u.min,this.end=u.max,this.onEmit=this.randomRangedValueEmit;else if(c==="object"&&this.has(u,"random")){var p=u.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else c==="object"&&this.hasEither(u,"onEmit","onUpdate")&&(this.has(u,"onEmit")&&(this.onEmit=u.onEmit),this.has(u,"onUpdate")&&(this.onUpdate=u.onUpdate));return this},has:function(u,c){return u.hasOwnProperty(c)},hasBoth:function(u,c,f){return u.hasOwnProperty(c)&&u.hasOwnProperty(f)},hasEither:function(u,c,f){return u.hasOwnProperty(c)||u.hasOwnProperty(f)},defaultEmit:function(u,c,f){return f},defaultUpdate:function(u,c,f,v){return v},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var u=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[u]},randomRangedValueEmit:function(u,c){var f=h(this.start,this.end);return u&&u.data[c]&&(u.data[c].min=f),f},steppedEmit:function(){var u=this.counter,c=this.counter+(this.end-this.start)/this.steps;return this.counter=l(c,this.start,this.end),u},easedValueEmit:function(u,c){if(u&&u.data[c]){var f=u.data[c];f.min=this.start,f.max=this.end}return this.start},easeValueUpdate:function(u,c,f){var v=u.data[c];return(v.max-v.min)*this.ease(f)+v.min}});i.exports=a},function(i,d,e){var n=e(0),h=e(2),r=new n({initialize:function(l,a,u,c,f){if(typeof l=="object"){var v=l;l=h(v,"x",0),a=h(v,"y",0),u=h(v,"power",0),c=h(v,"epsilon",100),f=h(v,"gravity",50)}else l===void 0&&(l=0),a===void 0&&(a=0),u===void 0&&(u=0),c===void 0&&(c=100),f===void 0&&(f=50);this.x=l,this.y=a,this.active=!0,this._gravity=f,this._power=0,this._epsilon=0,this.power=u,this.epsilon=c},update:function(o,l){var a=this.x-o.x,u=this.y-o.y,c=a*a+u*u;if(c!==0){var f=Math.sqrt(c);c<this._epsilon&&(c=this._epsilon);var v=this._power*l/(c*f)*100;o.velocityX+=a*v,o.velocityY+=u*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var l=this.power;this._gravity=o,this.power=l}}});i.exports=r},function(i,d,e){var n=e(0),h=e(36),r=e(50),o=new n({initialize:function(a){this.emitter=a,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(l,a){var u=this.emitter;this.frame=u.getFrame(),u.emitZone&&u.emitZone.getPoint(this),l===void 0?this.x+=u.x.onEmit(this,"x"):this.x+=l,a===void 0?this.y+=u.y.onEmit(this,"y"):this.y+=a,this.life=u.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var c=u.speedX.onEmit(this,"speedX"),f=u.speedY?u.speedY.onEmit(this,"speedY"):c;if(u.radial){var v=h(u.angle.onEmit(this,"angle"));this.velocityX=Math.cos(v)*Math.abs(c),this.velocityY=Math.sin(v)*Math.abs(f)}else if(u.moveTo){var p=u.moveToX.onEmit(this,"moveToX"),g=u.moveToY?u.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=r(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=c,this.velocityY=f;u.acceleration&&(this.accelerationX=u.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=u.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=u.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=u.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=u.delay.onEmit(this,"delay"),this.scaleX=u.scaleX.onEmit(this,"scaleX"),this.scaleY=u.scaleY?u.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=u.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),this.bounce=u.bounce.onEmit(this,"bounce"),this.alpha=u.alpha.onEmit(this,"alpha"),this.tint=u.tint.onEmit(this,"tint")},computeVelocity:function(l,a,u,c){var f=this.velocityX,v=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;f+=l.gravityX*u,v+=l.gravityY*u,p&&(f+=p*u),g&&(v+=g*u),f>m?f=m:f<-m&&(f=-m),v>x?v=x:v<-x&&(v=-x),this.velocityX=f,this.velocityY=v;for(var y=0;y<c.length;y++)c[y].update(this,a,u)},checkBounds:function(l){var a=l.bounds,u=-this.bounce;this.x<a.x&&l.collideLeft?(this.x=a.x,this.velocityX*=u):this.x>a.right&&l.collideRight&&(this.x=a.right,this.velocityX*=u),this.y<a.y&&l.collideTop?(this.y=a.y,this.velocityY*=u):this.y>a.bottom&&l.collideBottom&&(this.y=a.bottom,this.velocityY*=u)},update:function(l,a,u){if(this.delayCurrent>0)return this.delayCurrent-=l,!1;var c=this.emitter,f=1-this.lifeCurrent/this.life;return this.lifeT=f,this.computeVelocity(c,l,a,u),this.x+=this.velocityX*a,this.y+=this.velocityY*a,c.bounds&&this.checkBounds(c),c.deathZone&&c.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=c.scaleX.onUpdate(this,"scaleX",f,this.scaleX),c.scaleY?this.scaleY=c.scaleY.onUpdate(this,"scaleY",f,this.scaleY):this.scaleY=this.scaleX,this.angle=c.rotate.onUpdate(this,"rotate",f,this.angle),this.rotation=h(this.angle),this.alpha=c.alpha.onUpdate(this,"alpha",f,this.alpha),this.tint=c.tint.onUpdate(this,"tint",f,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0)}});i.exports=o},function(i,d,e){var n=e(35),h=e(0),r=e(11),o=e(453),l=e(454),a=e(449),u=e(2),c=e(210),f=e(455),v=e(126),p=e(451),g=e(456),m=e(10),x=e(79),y=e(3),T=e(68),C=new h({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(E,M){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new a(M,"x",0,!0),this.y=new a(M,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new a(M,"accelerationX",0,!0),this.accelerationY=new a(M,"accelerationY",0,!0),this.maxVelocityX=new a(M,"maxVelocityX",1e4,!0),this.maxVelocityY=new a(M,"maxVelocityY",1e4,!0),this.speedX=new a(M,"speedX",0,!0),this.speedY=new a(M,"speedY",0,!0),this.moveTo=!1,this.moveToX=new a(M,"moveToX",0,!0),this.moveToY=new a(M,"moveToY",0,!0),this.bounce=new a(M,"bounce",0,!0),this.scaleX=new a(M,"scaleX",1),this.scaleY=new a(M,"scaleY",1),this.tint=new a(M,"tint",16777215),this.alpha=new a(M,"alpha",1),this.lifespan=new a(M,"lifespan",1e3,!0),this.angle=new a(M,"angle",{min:0,max:360},!0),this.rotate=new a(M,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new a(M,"quantity",1,!0),this.delay=new a(M,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,M&&this.fromJSON(M)},fromJSON:function(S){if(!S)return this;var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],v(S,M)&&(this[M]=u(S,M));for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],v(S,M)&&this[M].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,v(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(f(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),v(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),v(S,"callbackScope")){var R=u(S,"callbackScope",null);this.emitCallbackScope=R,this.deathCallbackScope=R}return v(S,"emitZone")&&this.setEmitZone(S.emitZone),v(S,"deathZone")&&this.setDeathZone(S.deathZone),v(S,"bounds")&&this.setBounds(S.bounds),v(S,"followOffset")&&this.followOffset.setFromObject(u(S,"followOffset",0)),v(S,"frame")&&this.setFrame(S.frame),v(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,M="";for(E=0;E<this.configFastMap.length;E++)M=this.configFastMap[E],S[M]=this[M];for(E=0;E<this.configOpMap.length;E++)M=this.configOpMap[E],this[M]&&(S[M]=this[M].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,M,R){return E===void 0&&(E=0),M===void 0&&(M=0),R===void 0&&(R=!1),this.follow=S,this.followOffset.set(E,M),this.trackVisible=R,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,M){E===void 0&&(E=!0),M===void 0&&(M=1),this.randomFrame=E,this.frameQuantity=M,this.currentFrame=0,this._frameCounter=0;var R=typeof S;if(Array.isArray(S)||R==="string"||R==="number")this.manager.setEmitterFrames(S,this);else if(R==="object"){var L=S;S=u(L,"frames",null),S&&this.manager.setEmitterFrames(S,this);var O=u(L,"cycle",!1);this.randomFrame=!O,this.frameQuantity=u(L,"quantity",M)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,M,R){if(typeof S=="object"){var L=S;S=L.x,E=L.y,M=v(L,"w")?L.w:L.width,R=v(L,"h")?L.h:L.height}return this.bounds?this.bounds.setTo(S,E,M,R):this.bounds=new m(S,E,M,R),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=u(S,"type","random"),M=u(S,"source",null);switch(E){case"random":this.emitZone=new g(M);break;case"edge":var R=u(S,"quantity",1),L=u(S,"stepRate",0),O=u(S,"yoyo",!1),F=u(S,"seamless",!0);this.emitZone=new l(M,R,L,O,F);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=u(S,"type","onEnter"),M=u(S,"source",null);if(M&&typeof M.contains=="function"){var R=E==="onEnter";this.deathZone=new o(M,R)}}return this},reserve:function(S){for(var E=this.dead,M=0;M<S;M++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var M=this.alive,R=M.length,L=0;L<R;++L)S.call(E,M[L],this);return this},forEachDead:function(S,E){for(var M=this.dead,R=M.length,L=0;L<R;++L)S.call(E,M[L],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,M){return this.frequency=-1,this.emitParticle(S,E,M)},emitParticleAt:function(S,E,M){return this.emitParticle(M,S,E)},emitParticle:function(S,E,M){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var R=this.dead,L=this.follow?this.follow.x+this.followOffset.x:E,O=this.follow?this.follow.y+this.followOffset.y:M,F=0;F<S;F++){var D=R.pop();if(D||(D=new this.particleClass(this)),D.fire(L,O),this.particleBringToTop?this.alive.push(D):this.alive.unshift(D),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,D,this),this.atLimit())break}return D}},preUpdate:function(S,E){E*=this.timeScale;var M=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var R=this.manager.getProcessors(),L=this.alive,O=this.dead,F=0,D=[],B=L.length;for(F=0;F<B;F++){var N=L[F];N.update(E,M,R)&&D.push({index:F,particle:N})}if(B=D.length,B>0){var V=this.deathCallback,X=this.deathCallbackScope;for(F=B-1;F>=0;F--){var K=D[F];L.splice(K.index,1),O.push(K.particle),V&&V.call(X,K.particle),K.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});i.exports=C},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l){this.source=o,this.killOnEnter=l},willKill:function(r){var o=this.source.contains(r.x,r.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});i.exports=h},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u,c){u===void 0&&(u=!1),c===void 0&&(c=!0),this.source=o,this.points=[],this.quantity=l,this.stepRate=a,this.yoyo=u,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var r=this.points[0],o=this.points[this.points.length-1];r.x===o.x&&r.y===o.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(r){return this.source=r,this.updateSource()},getPoint:function(r){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(r.x=o.x,r.y=o.y)}});i.exports=h},function(i,d){var e=function(n,h){for(var r=0;r<h.length;r++)if(n.hasOwnProperty(h[r]))return!0;return!1};i.exports=e},function(i,d,e){var n=e(0),h=e(3),r=new n({initialize:function(l){this.source=l,this._tempVec=new h},getPoint:function(o){var l=this._tempVec;this.source.getRandomPoint(l),o.x=l.x,o.y=l.y}});i.exports=r},function(i,d,e){var n=e(0),h=e(11),r=e(73),o=new n({Extends:r,Mixins:[h.PathFollower],initialize:function(a,u,c,f,v,p){r.call(this,a,c,f,v,p),this.path=u},preUpdate:function(l,a){this.anims.update(l,a),this.pathUpdate(l)}});i.exports=o},function(i,d){var e=function(n,h,r){var o=n.canvas,l=n.context,a=n.style,u=[],c=0,f=r.length;a.maxLines>0&&a.maxLines<r.length&&(f=a.maxLines),a.syncFont(o,l);for(var v=0;v<f;v++){var p=a.strokeThickness;p+=l.measureText(r[v]).width,a.wordWrap&&(p-=l.measureText(" ").width),u[v]=Math.ceil(p),c=Math.max(c,u[v])}var g=h.fontSize+a.strokeThickness,m=g*f,x=n.lineSpacing;return f>1&&(m+=x*(f-1)),{width:c,height:m,lines:f,lineWidths:u,lineSpacing:x,lineHeight:g}};i.exports=e},function(i,d,e){var n=e(0),h=e(13),r=e(6),o=e(460),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},a=new n({initialize:function(c,f){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(f,!1,!0);var v=r(f,"metrics",!1);v?this.metrics={ascent:r(v,"ascent",0),descent:r(v,"descent",0),fontSize:r(v,"fontSize",0)}:this.metrics=o(this)},setStyle:function(u,c,f){c===void 0&&(c=!0),f===void 0&&(f=!1),u&&u.hasOwnProperty("fontSize")&&typeof u.fontSize=="number"&&(u.fontSize=u.fontSize.toString()+"px");for(var v in l){var p=f?l[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=r(u,l[v][0],p):this[v]=h(u,l[v][0],p)}var g=r(u,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=r(u,"fill",null);return m!==null&&(this.color=m),c?this.update(!0):this.parent},syncFont:function(u,c){c.font=this._font},syncStyle:function(u,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(u,c){c?(u.shadowOffsetX=this.shadowOffsetX,u.shadowOffsetY=this.shadowOffsetY,u.shadowColor=this.shadowColor,u.shadowBlur=this.shadowBlur):(u.shadowOffsetX=0,u.shadowOffsetY=0,u.shadowColor=0,u.shadowBlur=0)},update:function(u){return u&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(u,c){c===void 0&&(c=!0);var f=u,v="",p="";if(typeof u!="string")f=r(u,"fontFamily","Courier"),v=r(u,"fontSize","16px"),p=r(u,"fontStyle","");else{var g=u.split(" "),m=0;p=g.length>2?g[m++]:"",v=g[m++]||"16px",f=g[m++]||"Courier"}return(f!==this.fontFamily||v!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=f,this.fontSize=v,this.fontStyle=p,c&&this.update(!0)),this.parent},setFontFamily:function(u){return this.fontFamily!==u&&(this.fontFamily=u,this.update(!0)),this.parent},setFontStyle:function(u){return this.fontStyle!==u&&(this.fontStyle=u,this.update(!0)),this.parent},setFontSize:function(u){return typeof u=="number"&&(u=u.toString()+"px"),this.fontSize!==u&&(this.fontSize=u,this.update(!0)),this.parent},setTestString:function(u){return this.testString=u,this.update(!0)},setFixedSize:function(u,c){return this.fixedWidth=u,this.fixedHeight=c,u&&(this.parent.width=u),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(u){return this.backgroundColor=u,this.update(!1)},setFill:function(u){return this.color=u,this.update(!1)},setColor:function(u){return this.color=u,this.update(!1)},setResolution:function(u){return this.resolution=u,this.update(!1)},setStroke:function(u,c){return c===void 0&&(c=this.strokeThickness),u===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==u||this.strokeThickness!==c)&&(this.stroke=u,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(u,c,f,v,p,g){return u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f="#000"),v===void 0&&(v=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=u,this.shadowOffsetY=c,this.shadowColor=f,this.shadowBlur=v,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(u,c){return u===void 0&&(u=0),c===void 0&&(c=u),this.shadowOffsetX=u,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(u){return u===void 0&&(u="#000"),this.shadowColor=u,this.update(!1)},setShadowBlur:function(u){return u===void 0&&(u=0),this.shadowBlur=u,this.update(!1)},setShadowStroke:function(u){return this.shadowStroke=u,this.update(!1)},setShadowFill:function(u){return this.shadowFill=u,this.update(!1)},setWordWrapWidth:function(u,c){return c===void 0&&(c=!1),this.wordWrapWidth=u,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(u,c){return c===void 0&&(c=null),this.wordWrapCallback=u,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(u){return u===void 0&&(u="left"),this.align=u,this.update(!1)},setMaxLines:function(u){return u===void 0&&(u=0),this.maxLines=u,this.update(!1)},getTextMetrics:function(){var u=this.metrics;return{ascent:u.ascent,descent:u.descent,fontSize:u.fontSize}},toJSON:function(){var u={};for(var c in l)u[c]=this[c];return u.metrics=this.getTextMetrics(),u},destroy:function(){this.parent=void 0}});i.exports=a},function(i,d,e){var n=e(31),h=function(r){var o=n.create(this),l=o.getContext("2d");r.syncFont(o,l);var a=l.measureText(r.testString);if("actualBoundingBoxAscent"in a){var u=a.actualBoundingBoxAscent,c=a.actualBoundingBoxDescent;return n.remove(o),{ascent:u,descent:c,fontSize:u+c}}var f=Math.ceil(a.width*r.baselineX),v=f,p=2*v;v=v*r.baselineY|0,o.width=f,o.height=p,l.fillStyle="#f00",l.fillRect(0,0,f,p),l.font=r._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(r.testString,0,v);var g={ascent:0,descent:0,fontSize:0},m=l.getImageData(0,0,f,p);if(!m)return g.ascent=v,g.descent=v+6,g.fontSize=g.ascent+g.descent,n.remove(o),g;var x=m.data,y=x.length,T=f*4,C,S,E=0,M=!1;for(C=0;C<v;C++){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E+=T;else break}for(g.ascent=v-C,E=y-T,M=!1,C=p;C>v;C--){for(S=0;S<T;S+=4)if(x[E+S]!==255){M=!0;break}if(!M)E-=T;else break}return g.descent=C-v,g.fontSize=g.ascent+g.descent,n.remove(o),g};i.exports=h},function(i,d,e){var n=e(1097),h=e(0),r=e(36),o=e(59),l=e(65),a=e(14),u=e(34),c=new h({Extends:u,Mixins:[n],initialize:function(v,p,g,m,x,y,T,C,S){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),u.call(this,v,"Arc",new l(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(f){this._iterations=f,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(f){this.geom.radius=f;var v=f*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(f){this._startAngle=f,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(f){this._endAngle=f,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(f){this._anticlockwise=f,this.updateData()}},setRadius:function(f){return this.radius=f,this},setIterations:function(f){return f===void 0&&(f=.01),this.iterations=f,this},setStartAngle:function(f,v){return this._startAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(f,v){return this._endAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var f=this._iterations,v=f,p=this.geom.radius,g=r(this._startAngle),m=r(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-a.PI2?m=-a.PI2:m>0&&(m=-a.PI2+m%a.PI2):m>a.PI2?m=a.PI2:m<0&&(m=a.PI2+m%a.PI2);for(var C=[y+Math.cos(g)*p,T+Math.sin(g)*p],S;v<1;)S=m*v+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),v+=f;return S=m+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),C.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=o(C),this.pathData=C,this}});i.exports=c},function(i,d,e){var n=e(0),h=e(1100),r=e(59),o=e(10),l=e(34),a=new n({Extends:l,Mixins:[h],initialize:function(c,f,v,p,g,m){f===void 0&&(f=0),v===void 0&&(v=0),l.call(this,c,"Curve",p),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(f,v),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){var u=this._curveBounds,c=this._smoothness;this.geom.getBounds(u,c),this.setSize(u.width,u.height),this.updateDisplayOrigin();for(var f=[],v=this.geom.getPoints(c),p=0;p<v.length;p++)f.push(v[p].x,v[p].y);return f.push(v[0].x,v[0].y),this.pathIndexes=r(f),this.pathData=f,this}});i.exports=a},function(i,d,e){var n=e(0),h=e(59),r=e(1103),o=e(111),l=e(34),a=new n({Extends:l,Mixins:[r],initialize:function(c,f,v,p,g,m,x){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=128),l.call(this,c,"Ellipse",new o(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(f,v),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(u){this._smoothness=u,this.updateData()}},setSize:function(u,c){return this.width=u,this.height=c,this.geom.setPosition(u/2,c/2),this.geom.setSize(u,c),this.updateData()},setSmoothness:function(u){return this._smoothness=u,this.updateData()},updateData:function(){for(var u=[],c=this.geom.getPoints(this._smoothness),f=0;f<c.length;f++)u.push(c[f].x,c[f].y);return u.push(c[0].x,c[0].y),this.pathIndexes=h(u),this.pathData=u,this}});i.exports=a},function(i,d,e){var n=e(0),h=e(34),r=e(1106),o=new n({Extends:h,Mixins:[r],initialize:function(a,u,c,f,v,p,g,m,x,y,T){u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f=128),v===void 0&&(v=128),p===void 0&&(p=32),g===void 0&&(g=32),h.call(this,a,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(u,c),this.setSize(f,v),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(l,a){return a===void 0&&(a=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=a,this.showCells=!0),this},setAltFillStyle:function(l,a){return a===void 0&&(a=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=a,this.showAltCells=!0),this},setOutlineStyle:function(l,a){return a===void 0&&(a=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=a,this.showOutline=!0),this}});i.exports=o},function(i,d,e){var n=e(1109),h=e(0),r=e(34),o=new h({Extends:r,Mixins:[n],initialize:function(a,u,c,f,v,p,g,m){u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f=48),v===void 0&&(v=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),r.call(this,a,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(u,c),this.setSize(f,v),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,a,u){return l===void 0&&(l=!0),a===void 0&&(a=!0),u===void 0&&(u=!0),this.showTop=l,this.showLeft=a,this.showRight=u,this},setFillStyle:function(l,a,u){return this.fillTop=l,this.fillLeft=a,this.fillRight=u,this.isFilled=!0,this}});i.exports=o},function(i,d,e){var n=e(0),h=e(1112),r=e(34),o=new n({Extends:r,Mixins:[h],initialize:function(a,u,c,f,v,p,g,m,x){u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f=48),v===void 0&&(v=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),r.call(this,a,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(u,c),this.setSize(f,v),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,a,u){return l===void 0&&(l=!0),a===void 0&&(a=!0),u===void 0&&(u=!0),this.showTop=l,this.showLeft=a,this.showRight=u,this},setFillStyle:function(l,a,u){return this.fillTop=l,this.fillLeft=a,this.fillRight=u,this.isFilled=!0,this}});i.exports=o},function(i,d,e){var n=e(0),h=e(34),r=e(47),o=e(1115),l=new n({Extends:h,Mixins:[o],initialize:function(u,c,f,v,p,g,m,x,y){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),h.call(this,u,"Line",new r(v,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,f),this.setSize(T,C),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(a,u){return u===void 0&&(u=a),this._startWidth=a,this._endWidth=u,this.lineWidth=a,this},setTo:function(a,u,c,f){return this.geom.setTo(a,u,c,f),this}});i.exports=l},function(i,d,e){var n=e(1118),h=e(0),r=e(59),o=e(469),l=e(227),a=e(34),u=e(472),c=new h({Extends:a,Mixins:[n],initialize:function(v,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),a.call(this,v,"Polygon",new l(m));var T=o(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(f){f===void 0&&(f=1);for(var v=0;v<f;v++)u(this.geom);return this.updateData()},updateData:function(){for(var f=[],v=this.geom.points,p=0;p<v.length;p++)f.push(v[p].x,v[p].y);return f.push(v[0].x,v[0].y),this.pathIndexes=r(f),this.pathData=f,this}});i.exports=c},function(i,d,e){var n=e(10),h=function(r,o){o===void 0&&(o=new n);for(var l=Infinity,a=Infinity,u=-l,c=-a,f,v=0;v<r.points.length;v++)f=r.points[v],l=Math.min(l,f.x),a=Math.min(a,f.y),u=Math.max(u,f.x),c=Math.max(c,f.y);return o.x=l,o.y=a,o.width=u-l,o.height=c-a,o};i.exports=h},function(i,d,e){var n=e(67),h=e(47),r=e(471),o=function(l,a,u,c){c===void 0&&(c=[]);var f=l.points,v=r(l);!a&&u>0&&(a=v/u);for(var p=0;p<a;p++)for(var g=v*(p/a),m=0,x=0;x<f.length;x++){var y=f[x],T=f[(x+1)%f.length],C=new h(y.x,y.y,T.x,T.y),S=n(C);if(g<m||g>m+S){m+=S;continue}var E=C.getPoint((g-m)/S);c.push(E);break}return c};i.exports=o},function(i,d,e){var n=e(67),h=e(47),r=function(o){for(var l=o.points,a=0,u=0;u<l.length;u++){var c=l[u],f=l[(u+1)%l.length],v=new h(c.x,c.y,f.x,f.y);a+=n(v)}return a};i.exports=r},function(i,d){var e=function(h,r){return h[0]=r[0],h[1]=r[1],h},n=function(h){var r,o=[],l=h.points;for(r=0;r<l.length;r++)o.push([l[r].x,l[r].y]);var a=[];for(o.length>0&&a.push(e([0,0],o[0])),r=0;r<o.length-1;r++){var u=o[r],c=o[r+1],f=u[0],v=u[1],p=c[0],g=c[1];a.push([.85*f+.15*p,.85*v+.15*g]),a.push([.15*f+.85*p,.15*v+.85*g])}return o.length>1&&a.push(e([0,0],o[o.length-1])),h.setTo(a)};i.exports=n},function(i,d,e){var n=e(0),h=e(10),r=e(34),o=e(1121),l=new n({Extends:r,Mixins:[o],initialize:function(u,c,f,v,p,g,m){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=128),p===void 0&&(p=128),r.call(this,u,"Rectangle",new h(0,0,v,p)),this.setPosition(c,f),this.setSize(v,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(a,u){return this.width=a,this.height=u,this.geom.setSize(a,u),this.updateData(),this},updateData:function(){var a=[],u=this.geom,c=this._tempLine;return u.getLineA(c),a.push(c.x1,c.y1,c.x2,c.y2),u.getLineB(c),a.push(c.x2,c.y2),u.getLineC(c),a.push(c.x2,c.y2),u.getLineD(c),a.push(c.x2,c.y2),this.pathData=a,this}});i.exports=l},function(i,d,e){var n=e(1124),h=e(0),r=e(59),o=e(34),l=new h({Extends:o,Mixins:[n],initialize:function(u,c,f,v,p,g,m,x){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=5),p===void 0&&(p=32),g===void 0&&(g=64),o.call(this,u,"Star",null),this._points=v,this._innerRadius=p,this._outerRadius=g,this.setPosition(c,f),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(a){return this._points=a,this.updateData()},setInnerRadius:function(a){return this._innerRadius=a,this.updateData()},setOuterRadius:function(a){return this._outerRadius=a,this.updateData()},points:{get:function(){return this._points},set:function(a){this._points=a,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(a){this._innerRadius=a,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(a){this._outerRadius=a,this.updateData()}},updateData:function(){var a=[],u=this._points,c=this._innerRadius,f=this._outerRadius,v=Math.PI/2*3,p=Math.PI/u,g=f,m=f;a.push(g,m+-f);for(var x=0;x<u;x++)a.push(g+Math.cos(v)*f,m+Math.sin(v)*f),v+=p,a.push(g+Math.cos(v)*c,m+Math.sin(v)*c),v+=p;return a.push(g,m+-f),this.pathIndexes=r(a),this.pathData=a,this}});i.exports=l},function(i,d,e){var n=e(0),h=e(34),r=e(82),o=e(1127),l=new n({Extends:h,Mixins:[o],initialize:function(u,c,f,v,p,g,m,x,y,T,C){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),h.call(this,u,"Triangle",new r(v,p,g,m,x,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(c,f),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(a,u,c,f,v,p){return this.geom.setTo(a,u,c,f,v,p),this.updateData()},updateData:function(){var a=[],u=this.geom,c=this._tempLine;return u.getLineA(c),a.push(c.x1,c.y1,c.x2,c.y2),u.getLineB(c),a.push(c.x2,c.y2),u.getLineC(c),a.push(c.x2,c.y2),this.pathData=a,this}});i.exports=l},function(i,d,e){var n=e(4),h=e(67),r=function(o,l,a){a===void 0&&(a=new n);var u=o.getLineA(),c=o.getLineB(),f=o.getLineC();if(l<=0||l>=1)return a.x=u.x1,a.y=u.y1,a;var v=h(u),p=h(c),g=h(f),m=v+p+g,x=m*l,y=0;return x<v?(y=x/v,a.x=u.x1+(u.x2-u.x1)*y,a.y=u.y1+(u.y2-u.y1)*y):x>v+p?(x-=v+p,y=x/g,a.x=f.x1+(f.x2-f.x1)*y,a.y=f.y1+(f.y2-f.y1)*y):(x-=v,y=x/p,a.x=c.x1+(c.x2-c.x1)*y,a.y=c.y1+(c.y2-c.y1)*y),a};i.exports=r},function(i,d,e){var n=e(67),h=e(4),r=function(o,l,a,u){u===void 0&&(u=[]);var c=o.getLineA(),f=o.getLineB(),v=o.getLineC(),p=n(c),g=n(f),m=n(v),x=p+g+m;!l&&a>0&&(l=x/a);for(var y=0;y<l;y++){var T=x*(y/l),C=0,S=new h;T<p?(C=T/p,S.x=c.x1+(c.x2-c.x1)*C,S.y=c.y1+(c.y2-c.y1)*C):T>p+g?(T-=p+g,C=T/m,S.x=v.x1+(v.x2-v.x1)*C,S.y=v.y1+(v.y2-v.y1)*C):(T-=p,C=T/g,S.x=f.x1+(f.x2-f.x1)*C,S.y=f.y1+(f.y2-f.y1)*C),u.push(S)}return u};i.exports=r},function(i,d){var e=function(n,h,r){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(h))return n[h]=r,!0;if(h.indexOf(".")!==-1){for(var o=h.split("."),l=n,a=n,u=0;u<o.length;u++)if(l.hasOwnProperty(o[u]))a=l,l=l[o[u]];else return!1;return a[o[o.length-1]]=r,!0}return!1};i.exports=e},function(i,d,e){var n=e(116),h=e(117),r=function(o,l,a,u,c,f,v){if(u===void 0&&(u=!1),f===void 0&&(f=16777215),v===void 0&&(v=1),o.length!==l.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,C,S,E,M,R,L,O=u?3:2,F=Array.isArray(f),D=Array.isArray(v);if(Array.isArray(a)&&a.length>0)for(g=0;g<a.length;g++){var B=a[g],N=a[g]*2,V=a[g]*O;m=o[V],x=o[V+1],y=u?o[V+2]:0,T=l[N],C=l[N+1],S=F?f[B]:f,E=D?v[B]:v,M=0,R=0,L=0,c&&(M=c[V],R=c[V+1],L=u?c[V+2]:0),p.vertices.push(new h(m,x,y,T,C,S,E,M,R,L))}else{var X=0,K=0;for(g=0;g<o.length;g+=O)m=o[g],x=o[g+1],y=u?o[g+2]:0,T=l[X],C=l[X+1],S=F?f[K]:f,E=D?v[K]:v,M=0,R=0,L=0,c&&(M=c[g],R=c[g+1],L=u?c[g+2]:0),p.vertices.push(new h(m,x,y,T,C,S,E,M,R,L)),X+=2,K++}for(g=0;g<p.vertices.length;g+=3){var Z=p.vertices[g],G=p.vertices[g+1],w=p.vertices[g+2];p.faces.push(new n(Z,G,w))}return p};i.exports=r},function(i,d,e){var n=e(116),h=e(69),r=e(39),o=e(117),l=new r,a=new r,u=new h,c=function(f,v,p,g,m,x,y,T,C,S){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},M=f.materials;l.set(g,m,x),a.set(y,T,C),u.fromRotationXYTranslation(a,l,S);for(var R=0;R<f.models.length;R++)for(var L=f.models[R],O=L.vertices,F=L.textureCoords,D=L.faces,B=0;B<D.length;B++){var N=D[B],V=N.vertices[0],X=N.vertices[1],K=N.vertices[2],Z=O[V.vertexIndex],G=O[X.vertexIndex],w=O[K.vertexIndex],b=V.textureCoordsIndex,Y=X.textureCoordsIndex,U=K.textureCoordsIndex,W=b===-1?{u:0,v:1}:F[b],H=Y===-1?{u:0,v:0}:F[Y],J=U===-1?{u:1,v:1}:F[U],q=16777215;N.material!==""&&M[N.material]&&(q=M[N.material]);var _=new o(Z.x*p,Z.y*p,Z.z*p,W.u,W.v,q).transformMat4(u),nt=new o(G.x*p,G.y*p,G.z*p,H.u,H.v,q).transformMat4(u),rt=new o(w.x*p,w.y*p,w.z*p,J.u,J.v,q).transformMat4(u);E.verts.push(_,nt,rt),E.faces.push(new n(_,nt,rt))}return v&&(v.faces=v.faces.concat(E.faces),v.vertices=v.vertices.concat(E.verts)),E};i.exports=c},function(i,d,e){var n=e(65),h=e(0),r=e(11),o=e(200),l=e(12),a=new h({Extends:n,Mixins:[r.ScrollFactor,r.Visible],initialize:function(c,f,v,p,g,m,x){n.call(this,c,f,v),this.color=new o(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(u){return!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},setColor:function(u){var c=l.getFloatsFromUintRGB(u);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(u){return this.intensity=u,this},setRadius:function(u){return this.radius=u,this}});a.RENDER_MASK=15,i.exports=a},function(i,d,e){var n=e(151),h=e(0),r=e(50),o=e(481),l=e(150),a=e(200),u=e(74),c=e(79),f=e(12),v=new h({initialize:function(){this.lights=[],this.ambientColor=new a(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new l(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&n(T,m)&&x.push({light:T,distance:r(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(c(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=f.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=f.getFloatsFromUintRGB(x),C=new o(p,g,m,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&u(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});i.exports=v},function(i,d,e){var n=e(56),h=e(17),r={Circle:e(1191),Ellipse:e(1201),Intersects:e(484),Line:e(1221),Mesh:e(1243),Point:e(1246),Polygon:e(1260),Rectangle:e(502),Triangle:e(1293)};r=h(!1,r,n),i.exports=r},function(i,d,e){i.exports={CircleToCircle:e(231),CircleToRectangle:e(151),GetCircleToCircle:e(1211),GetCircleToRectangle:e(1212),GetLineToCircle:e(232),GetLineToLine:e(485),GetLineToPoints:e(486),GetLineToPolygon:e(487),GetLineToRectangle:e(234),GetRaysFromPointToPolygon:e(1213),GetRectangleIntersection:e(1214),GetRectangleToRectangle:e(1215),GetRectangleToTriangle:e(1216),GetTriangleToCircle:e(1217),GetTriangleToLine:e(492),GetTriangleToTriangle:e(1218),LineToCircle:e(233),LineToLine:e(96),LineToRectangle:e(488),PointToLine:e(496),PointToLineSegment:e(1219),RectangleToRectangle:e(152),RectangleToTriangle:e(489),RectangleToValues:e(1220),TriangleToCircle:e(491),TriangleToLine:e(493),TriangleToTriangle:e(494)}},function(i,d,e){var n=e(39),h=function(r,o,l){var a=r.x1,u=r.y1,c=r.x2,f=r.y2,v=o.x1,p=o.y1,g=o.x2,m=o.y2,x=c-a,y=f-u,T=g-v,C=m-p,S=C*x-T*y;if(x===0||S===0)return!1;var E=(x*(p-u)+y*(a-v))/(T*y-C*x),M=(v+T*E-a)/x;return M<0||E<0||E>1?null:(l===void 0&&(l=new n),l.set(a+x*M,u+y*M,M))};i.exports=h},function(i,d,e){var n=e(39),h=e(485),r=e(47),o=new r,l=new n,a=function(u,c,f){f===void 0&&(f=new n);var v=!1;f.set(),l.set();for(var p=c[0],g=1;g<c.length;g++){var m=c[g];o.setTo(p.x,p.y,m.x,m.y),p=m,h(u,o,l)&&(!v||l.z<f.z)&&(f.copy(l),v=!0)}return v?f:null};i.exports=a},function(i,d,e){var n=e(39),h=e(140),r=e(486),o=new n,l=function(a,u,c){c===void 0&&(c=new h),Array.isArray(u)||(u=[u]);var f=!1;c.set(),o.set();for(var v=0;v<u.length;v++)r(a,u[v].points,o)&&(!f||o.z<c.z)&&(c.set(o.x,o.y,o.z,v),f=!0);return f?c:null};i.exports=l},function(i,d){var e=function(n,h){var r=n.x1,o=n.y1,l=n.x2,a=n.y2,u=h.x,c=h.y,f=h.right,v=h.bottom,p=0;if(r>=u&&r<=f&&o>=c&&o<=v||l>=u&&l<=f&&a>=c&&a<=v)return!0;if(r<u&&l>=u){if(p=o+(a-o)*(u-r)/(l-r),p>c&&p<=v)return!0}else if(r>f&&l<=f&&(p=o+(a-o)*(f-r)/(l-r),p>=c&&p<=v))return!0;if(o<c&&a>=c){if(p=r+(l-r)*(c-o)/(a-o),p>=u&&p<=f)return!0}else if(o>v&&a<=v&&(p=r+(l-r)*(v-o)/(a-o),p>=u&&p<=f))return!0;return!1};i.exports=e},function(i,d,e){var n=e(96),h=e(57),r=e(235),o=e(490),l=function(a,u){if(u.left>a.right||u.right<a.left||u.top>a.bottom||u.bottom<a.top)return!1;var c=u.getLineA(),f=u.getLineB(),v=u.getLineC();if(h(a,c.x1,c.y1)||h(a,c.x2,c.y2)||h(a,f.x1,f.y1)||h(a,f.x2,f.y2)||h(a,v.x1,v.y1)||h(a,v.x2,v.y2))return!0;var p=a.getLineA(),g=a.getLineB(),m=a.getLineC(),x=a.getLineD();if(n(c,p)||n(c,g)||n(c,m)||n(c,x)||n(f,p)||n(f,g)||n(f,m)||n(f,x)||n(v,p)||n(v,g)||n(v,m)||n(v,x))return!0;var y=o(a),T=r(u,y,!0);return T.length>0};i.exports=l},function(i,d){var e=function(n,h){return h===void 0&&(h=[]),h.push({x:n.x,y:n.y}),h.push({x:n.right,y:n.y}),h.push({x:n.right,y:n.bottom}),h.push({x:n.x,y:n.bottom}),h};i.exports=e},function(i,d,e){var n=e(233),h=e(115),r=function(o,l){return o.left>l.right||o.right<l.left||o.top>l.bottom||o.bottom<l.top?!1:!!(h(o,l.x,l.y)||n(o.getLineA(),l)||n(o.getLineB(),l)||n(o.getLineC(),l))};i.exports=r},function(i,d,e){var n=e(4),h=e(493),r=e(96),o=function(l,a,u){if(u===void 0&&(u=[]),h(l,a))for(var c=l.getLineA(),f=l.getLineB(),v=l.getLineC(),p=[new n,new n,new n],g=[r(c,a,p[0]),r(f,a,p[1]),r(v,a,p[2])],m=0;m<3;m++)g[m]&&u.push(p[m]);return u};i.exports=o},function(i,d,e){var n=e(96),h=function(r,o){return!!(r.contains(o.x1,o.y1)||r.contains(o.x2,o.y2)||n(r.getLineA(),o)||n(r.getLineB(),o)||n(r.getLineC(),o))};i.exports=h},function(i,d,e){var n=e(235),h=e(495),r=e(96),o=function(l,a){if(l.left>a.right||l.right<a.left||l.top>a.bottom||l.bottom<a.top)return!1;var u=l.getLineA(),c=l.getLineB(),f=l.getLineC(),v=a.getLineA(),p=a.getLineB(),g=a.getLineC();if(r(u,v)||r(u,p)||r(u,g)||r(c,v)||r(c,p)||r(c,g)||r(f,v)||r(f,p)||r(f,g))return!0;var m=h(l),x=n(a,m,!0);return!!(x.length>0||(m=h(a),x=n(l,m,!0),x.length>0))};i.exports=o},function(i,d){var e=function(n,h){return h===void 0&&(h=[]),h.push({x:n.x1,y:n.y1}),h.push({x:n.x2,y:n.y2}),h.push({x:n.x3,y:n.y3}),h};i.exports=e},function(i,d){var e=function(n,h,r){r===void 0&&(r=1);var o=h.x1,l=h.y1,a=h.x2,u=h.y2,c=n.x,f=n.y,v=(a-o)*(a-o)+(u-l)*(u-l);if(v===0)return!1;var p=((c-o)*(a-o)+(f-l)*(u-l))/v;if(p<0)return Math.sqrt((o-c)*(o-c)+(l-f)*(l-f))<=r;if(p>=0&&p<=1){var g=((l-f)*(a-o)-(o-c)*(u-l))/v;return Math.abs(g)*Math.sqrt(v)<=r}else return Math.sqrt((a-c)*(a-c)+(u-f)*(u-f))<=r};i.exports=e},function(i,d,e){var n=e(14),h=e(68),r=e(97),o=function(l){var a=r(l)-n.TAU;return h(a,-Math.PI,Math.PI)};i.exports=o},function(i,d){var e=!0,n="untitled",h="",r="";function o(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function l(y){return y.models.length===0&&y.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),h="",y.models[y.models.length-1]}function a(y,T){var C=y.length>=2?y[1]:n;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function u(y){y.length===2&&(h=y[1])}function c(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;l(T).vertices.push({x:S,y:E,z:M})}function f(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(M)&&(M=0),e&&(E=1-E),l(T).textureCoords.push({u:S,v:E,w:M})}function v(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,M=C>=4?parseFloat(y[3]):0;l(T).vertexNormals.push({x:S,y:E,z:M})}function p(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:h,material:r,vertices:[]},E=0;E<C;E++){var M=y[E+1],R=M.split("/"),L=R.length;if(!(L<1||L>3)){var O=0,F=0,D=0;O=parseInt(R[0],10),L>1&&R[1]!==""&&(F=parseInt(R[1],10)),L>2&&(D=parseInt(R[2],10)),O!==0&&(O<0&&(O=l(T).vertices.length+1+O),F-=1,O-=1,D-=1,S.vertices.push({textureCoordsIndex:F,vertexIndex:O,vertexNormalIndex:D}))}}l(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(r=y[1])}var x=function(y,T){T===void 0&&(T=!0),e=T;var C={materials:{},materialLibraries:[],models:[]};h="",r="";for(var S=y.split(`
`),E=0;E<S.length;E++){var M=o(S[E]),R=M.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":a(R,C);break;case"g":u(R);break;case"v":c(R,C);break;case"vt":f(R,C);break;case"vn":v(R,C);break;case"f":p(R,C);break;case"mtllib":g(R,C);break;case"usemtl":m(R);break}}return C};i.exports=x},function(i,d,e){var n=e(103),h=function(r){for(var o={},l=r.split(`
`),a="",u=0;u<l.length;u++){var c=l[u].trim();if(!(c.indexOf("#")===0||c==="")){var f=c.replace(/\s\s+/g," ").trim().split(" ");switch(f[0].toLowerCase()){case"newmtl":{a=f[1];break}case"kd":{var v=Math.floor(f[1]*255),p=f.length>=2?Math.floor(f[2]*255):v,g=f.length>=3?Math.floor(f[3]*255):v;o[a]=n(v,p,g);break}}}}return o};i.exports=h},function(i,d){var e=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)};i.exports=e},function(i,d){var e=function(n){return n.x*n.x+n.y*n.y};i.exports=e},function(i,d,e){var n=e(10);n.Area=e(1267),n.Ceil=e(1268),n.CeilAll=e(1269),n.CenterOn=e(190),n.Clone=e(1270),n.Contains=e(57),n.ContainsPoint=e(1271),n.ContainsRect=e(503),n.CopyFrom=e(1272),n.Decompose=e(490),n.Equals=e(1273),n.FitInside=e(1274),n.FitOutside=e(1275),n.Floor=e(1276),n.FloorAll=e(1277),n.FromPoints=e(199),n.FromXY=e(1278),n.GetAspectRatio=e(237),n.GetCenter=e(1279),n.GetPoint=e(171),n.GetPoints=e(306),n.GetSize=e(1280),n.Inflate=e(1281),n.Intersection=e(1282),n.MarchingAnts=e(316),n.MergePoints=e(1283),n.MergeRect=e(1284),n.MergeXY=e(1285),n.Offset=e(1286),n.OffsetPoint=e(1287),n.Overlaps=e(1288),n.Perimeter=e(130),n.PerimeterPoint=e(1289),n.Random=e(174),n.RandomOutside=e(1290),n.SameDimensions=e(1291),n.Scale=e(1292),n.Union=e(441),i.exports=n},function(i,d){var e=function(n,h){return h.width*h.height>n.width*n.height?!1:h.x>n.x&&h.x<n.right&&h.right>n.x&&h.right<n.right&&h.y>n.y&&h.y<n.bottom&&h.bottom>n.y&&h.bottom<n.bottom};i.exports=e},function(i,d,e){var n=e(4),h=function(r,o){return o===void 0&&(o=new n),o.x=(r.x1+r.x2+r.x3)/3,o.y=(r.y1+r.y2+r.y3)/3,o};i.exports=h},function(i,d){var e=function(n,h,r){return n.x1+=h,n.y1+=r,n.x2+=h,n.y2+=r,n.x3+=h,n.y3+=r,n};i.exports=e},function(i,d,e){var n=e(4);function h(o,l,a,u){var c=o-a,f=l-u,v=c*c+f*f;return Math.sqrt(v)}var r=function(o,l){l===void 0&&(l=new n);var a=o.x1,u=o.y1,c=o.x2,f=o.y2,v=o.x3,p=o.y3,g=h(v,p,c,f),m=h(a,u,v,p),x=h(c,f,a,u),y=g+m+x;return l.x=(a*g+c*m+v*x)/y,l.y=(u*g+f*m+p*x)/y,l};i.exports=r},function(i,d){var e=function(n,h){return function(r,o,l,a){var u=n.getPixelAlpha(o,l,a.texture.key,a.frame.name);return u&&u>=h}};i.exports=e},function(i,d){var e=function(n,h,r){return{gameObject:n,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};i.exports=e},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l){this.pad=o,this.events=o.events,this.index=l,this.value=0,this.threshold=.1},update:function(r){this.value=r},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});i.exports=h},function(i,d,e){var n=e(0),h=e(239),r=new n({initialize:function(l,a){this.pad=l,this.events=l.manager,this.index=a,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var l=this.pad,a=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(h.BUTTON_DOWN,l,this,o),this.pad.emit(h.GAMEPAD_BUTTON_DOWN,a,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(h.BUTTON_UP,l,this,o),this.pad.emit(h.GAMEPAD_BUTTON_UP,a,o,this))},destroy:function(){this.pad=null,this.events=null}});i.exports=r},function(i,d,e){var n=e(509),h=e(510),r=e(0),o=e(9),l=e(3),a=new r({Extends:o,initialize:function(c,f){o.call(this),this.manager=c,this.pad=f,this.id=f.id,this.index=f.index;for(var v=[],p=0;p<f.buttons.length;p++)v.push(new h(this,p));this.buttons=v;var g=[];for(p=0;p<f.axes.length;p++)g.push(new n(this,p));this.axes=g,this.vibration=f.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:m,this._LCRight=v[15]?v[15]:m,this._LCTop=v[12]?v[12]:m,this._LCBottom=v[13]?v[13]:m,this._RCLeft=v[2]?v[2]:m,this._RCRight=v[1]?v[1]:m,this._RCTop=v[3]?v[3]:m,this._RCBottom=v[0]?v[0]:m,this._FBLeftTop=v[4]?v[4]:m,this._FBLeftBottom=v[6]?v[6]:m,this._FBRightTop=v[5]?v[5]:m,this._FBRightBottom=v[7]?v[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(u){return this.axes[u].getValue()},setAxisThreshold:function(u){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=u},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(u){return this.buttons[u].value},isButtonDown:function(u){return this.buttons[u].pressed},update:function(u){if(!(u.timestamp<this._created)){var c,f=this.buttons,v=u.buttons,p=f.length;for(c=0;c<p;c++)f[c].update(v[c].value);var g=this.axes,m=u.axes;for(p=g.length,c=0;c<p;c++)g[c].update(m[c]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var u;for(u=0;u<this.buttons.length;u++)this.buttons[u].destroy();for(u=0;u<this.axes.length;u++)this.axes[u].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});i.exports=a},function(i,d,e){var n=e(0),h=e(9),r=e(154),o=new n({Extends:h,initialize:function(a,u){h.call(this),this.plugin=a,this.keyCode=u,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,!!this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,!!this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,l))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});i.exports=o},function(i,d,e){var n=e(0),h=e(154),r=e(2),o=e(514),l=e(516),a=new n({initialize:function(c,f,v){if(v===void 0&&(v={}),f.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var p=0;p<f.length;p++){var g=f[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(v,"resetOnWrongKey",!0),this.maxKeyDelay=r(v,"maxKeyDelay",0),this.resetOnMatch=r(v,"resetOnMatch",!1),this.deleteOnMatch=r(v,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=o(y,m);T&&(m.manager.emit(h.COMBO_MATCH,m,y),m.resetOnMatch?l(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(h.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(h.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});i.exports=a},function(i,d,e){var n=e(515),h=function(r,o){if(o.matched)return!0;var l=!1,a=!1;if(r.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var u=o.timeLastMatched+o.maxKeyDelay;r.timeStamp<=u&&(a=!0,l=n(r,o))}else a=!0,l=n(r,o);return!a&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),l&&(o.timeLastMatched=r.timeStamp,o.matched=!0,o.timeMatched=r.timeStamp),l};i.exports=h},function(i,d){var e=function(n,h){return h.timeLastMatched=n.timeStamp,h.index++,h.index===h.size?!0:(h.current=h.keyCodes[h.index],!1)};i.exports=e},function(i,d){var e=function(n){return n.current=n.keyCodes[0],n.index=0,n.timeLastMatched=0,n.matched=!1,n.timeMatched=0,n};i.exports=e},function(i,d,e){var n=e(240),h=function(r,o){var l=n(o,r.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",r.src,l.async,l.user,l.password),a.responseType=r.xhrSettings.responseType,a.timeout=l.timeout,l.headers)for(var u in l.headers)a.setRequestHeader(u,l.headers[u]);return l.header&&l.headerValue&&a.setRequestHeader(l.header,l.headerValue),l.requestedWith&&a.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&a.overrideMimeType(l.overrideMimeType),l.withCredentials&&(a.withCredentials=!0),a.onload=r.onLoad.bind(r,a),a.onerror=r.onError.bind(r,a),a.onprogress=r.onProgress.bind(r),a.send(),a};i.exports=h},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(519),u=e(7),c=new n({Extends:r,initialize:function(v,p,g,m,x){if(u(p)){var y=p;p=l(y,"key"),m=l(y,"xhrSettings"),x=l(y,"context",x)}var T={type:"audio",cache:v.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};r.call(this,v,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var f=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){f.data=v,f.onProcessComplete()},function(v){console.error("Error decoding audio: "+f.key+" - ",v?v.message:null),f.onProcessError()}),this.config.context=null}});c.create=function(f,v,p,g,m){var x=f.systems.game,y=x.config.audio,T=x.device.audio;u(v)&&(p=l(v,"url",[]),g=l(v,"config",{}));var C=c.getAudioURL(x,p);return C?T.webAudio&&!y.disableWebAudio?new c(f,v,C,m,x.sound.context):new a(f,v,C,g):null},c.getAudioURL=function(f,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=l(v[p],"url",v[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=l(v[p],"type",m?m[1]:"").toLowerCase(),f.device.audio[m])return{url:g,type:m}}return null},o.register("audio",function(f,v,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(f))for(var C=0;C<f.length;C++)T=c.create(this,f[C]),T&&this.addFile(T);else T=c.create(this,f,v,p,g),T&&this.addFile(T);return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(95),r=e(23),o=e(2),l=e(155),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g){if(a(v)){var m=v;v=o(m,"key"),g=o(m,"config",g)}var x={type:"audio",cache:f.cacheManager.audio,extension:p.type,key:v,url:p.url,config:g};r.call(this,f,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var f=this.data[c];f.oncanplaythrough=null,f.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var f=c.target;f.oncanplaythrough=null,f.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var f=0;f<c;f++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+f).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(f=0;f<this.data.length;f++)v=this.data[f],v.src=l(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});i.exports=u},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g){var m="js";if(a(v)){var x=v;v=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};r.call(this,f,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,f,v));return this}),i.exports=u},function(i,d,e){var n=e(522),h=e(157),r=e(0),o=e(62),l=e(524),a=e(525),u=new r({initialize:function(f){this.world=f,this.scene=f.scene,this.sys=f.scene.sys},collider:function(c,f,v,p,g){return this.world.addCollider(c,f,v,p,g)},overlap:function(c,f,v,p,g){return this.world.addOverlap(c,f,v,p,g)},existing:function(c,f){var v=f?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(c,v),c},staticImage:function(c,f,v,p){var g=new n(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},image:function(c,f,v,p){var g=new n(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticSprite:function(c,f,v,p){var g=new h(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},sprite:function(c,f,v,p){var g=new h(this.scene,c,f,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticGroup:function(c,f){return this.sys.updateList.add(new a(this.world,this.world.scene,c,f))},group:function(c,f){return this.sys.updateList.add(new l(this.world,this.world.scene,c,f))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});i.exports=u},function(i,d,e){var n=e(0),h=e(243),r=e(125),o=new n({Extends:r,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(a,u,c,f,v){r.call(this,a,u,c,f,v),this.body=null}});i.exports=o},function(i,d,e){var n=e(244),h=e(65),r=e(231),o=e(151),l=function(a,u,c,f,v,p){var g=n(a,u-f,c-f,2*f,2*f,v,p);if(g.length===0)return g;for(var m=new h(u,c,f),x=new h,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(x.setTo(C.center.x,C.center.y,C.halfWidth),r(m,x)&&y.push(C)):o(m,C)&&y.push(C)}return y};i.exports=l},function(i,d,e){var n=e(157),h=e(0),r=e(62),o=e(2),l=e(113),a=e(7),u=new h({Extends:l,initialize:function(f,v,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(a(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&a(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=f,g.classType=o(g,"classType",n),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(g,"collideWorldBounds",!1),setBoundsRectangle:o(g,"customBoundsRectangle",null),setAccelerationX:o(g,"accelerationX",0),setAccelerationY:o(g,"accelerationY",0),setAllowDrag:o(g,"allowDrag",!0),setAllowGravity:o(g,"allowGravity",!0),setAllowRotation:o(g,"allowRotation",!0),setBounceX:o(g,"bounceX",0),setBounceY:o(g,"bounceY",0),setDragX:o(g,"dragX",0),setDragY:o(g,"dragY",0),setEnable:o(g,"enable",!0),setGravityX:o(g,"gravityX",0),setGravityY:o(g,"gravityY",0),setFrictionX:o(g,"frictionX",0),setFrictionY:o(g,"frictionY",0),setMaxVelocityX:o(g,"maxVelocityX",1e4),setMaxVelocityY:o(g,"maxVelocityY",1e4),setVelocityX:o(g,"velocityX",0),setVelocityY:o(g,"velocityY",0),setAngularVelocity:o(g,"angularVelocity",0),setAngularAcceleration:o(g,"angularAcceleration",0),setAngularDrag:o(g,"angularDrag",0),setMass:o(g,"mass",1),setImmovable:o(g,"immovable",!1)},l.call(this,v,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,r.DYNAMIC_BODY);var f=c.body;for(var v in this.defaults)f[v](this.defaults[v])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,f,v){v===void 0&&(v=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(c+g*v,f+g*v);return this},setVelocityX:function(c,f){f===void 0&&(f=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.x=c+p*f;return this},setVelocityY:function(c,f){f===void 0&&(f=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.y=c+p*f;return this}});i.exports=u},function(i,d,e){var n=e(157),h=e(0),r=e(62),o=e(2),l=e(113),a=e(7),u=new h({Extends:l,initialize:function(f,v,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n}:a(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=o(g,"classType",n)):Array.isArray(p)&&a(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=o(m,"classType",n)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=f,this.physicsType=r.STATIC_BODY,l.call(this,v,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,r.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,f=0;f<c.length;f++)c[f].body.reset();return this}});i.exports=u},function(i,d,e){var n=e(350),h=e(527),r=e(18),o=e(0),l=e(528),a=e(62),u=e(50),c=e(9),f=e(245),v=e(124),p=e(354),g=e(355),m=e(246),x=e(247),y=e(529),T=e(6),C=e(14),S=e(211),E=e(530),M=e(10),R=e(531),L=e(532),O=e(537),F=e(538),D=e(149),B=e(539),N=e(248),V=e(25),X=e(3),K=e(68),Z=new o({Extends:c,initialize:function(w,b){c.call(this),this.scene=w,this.bodies=new D,this.staticBodies=new D,this.pendingDestroy=new D,this.colliders=new S,this.gravity=new X(T(b,"gravity.x",0),T(b,"gravity.y",0)),this.bounds=new M(T(b,"x",0),T(b,"y",0),T(b,"width",w.sys.scale.width),T(b,"height",w.sys.scale.height)),this.checkCollision={up:T(b,"checkCollision.up",!0),down:T(b,"checkCollision.down",!0),left:T(b,"checkCollision.left",!0),right:T(b,"checkCollision.right",!0)},this.fps=T(b,"fps",60),this.fixedStep=T(b,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(b,"timeScale",1),this.OVERLAP_BIAS=T(b,"overlapBias",4),this.TILE_BIAS=T(b,"tileBias",16),this.forceX=T(b,"forceX",!1),this.isPaused=T(b,"isPaused",!1),this._total=0,this.drawDebug=T(b,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(b,"debugShowBody",!0),debugShowStaticBody:T(b,"debugShowStaticBody",!0),debugShowVelocity:T(b,"debugShowVelocity",!0),bodyDebugColor:T(b,"debugBodyColor",16711935),staticBodyDebugColor:T(b,"debugStaticBodyColor",255),velocityDebugColor:T(b,"debugVelocityColor",65280)},this.maxEntries=T(b,"maxEntries",16),this.useTree=T(b,"useTree",!0),this.tree=new R(this.maxEntries),this.staticTree=new R(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new V,this._tempMatrix2=new V,this.drawDebug&&this.createDebugGraphic()},enable:function(G,w){w===void 0&&(w=a.DYNAMIC_BODY),Array.isArray(G)||(G=[G]);for(var b=0;b<G.length;b++){var Y=G[b];if(Y.isParent)for(var U=Y.getChildren(),W=0;W<U.length;W++){var H=U[W];H.isParent?this.enable(H,w):this.enableBody(H,w)}else this.enableBody(Y,w)}},enableBody:function(G,w){return w===void 0&&(w=a.DYNAMIC_BODY),G.body||(w===a.DYNAMIC_BODY?G.body=new h(this,G):w===a.STATIC_BODY&&(G.body=new B(this,G))),this.add(G.body),G},add:function(G){return G.physicsType===a.DYNAMIC_BODY?this.bodies.set(G):G.physicsType===a.STATIC_BODY&&(this.staticBodies.set(G),this.staticTree.insert(G)),G.enable=!0,G},disable:function(G){Array.isArray(G)||(G=[G]);for(var w=0;w<G.length;w++){var b=G[w];if(b.isParent)for(var Y=b.getChildren(),U=0;U<Y.length;U++){var W=Y[U];W.isParent?this.disable(W):this.disableBody(W.body)}else this.disableBody(b.body)}},disableBody:function(G){this.remove(G),G.enable=!1},remove:function(G){G.physicsType===a.DYNAMIC_BODY?(this.tree.remove(G),this.bodies.delete(G)):G.physicsType===a.STATIC_BODY&&(this.staticBodies.delete(G),this.staticTree.remove(G))},createDebugGraphic:function(){var G=this.scene.sys.add.graphics({x:0,y:0});return G.setDepth(Number.MAX_VALUE),this.debugGraphic=G,this.drawDebug=!0,G},setBounds:function(G,w,b,Y,U,W,H,J){return this.bounds.setTo(G,w,b,Y),U!==void 0&&this.setBoundsCollision(U,W,H,J),this},setBoundsCollision:function(G,w,b,Y){return G===void 0&&(G=!0),w===void 0&&(w=!0),b===void 0&&(b=!0),Y===void 0&&(Y=!0),this.checkCollision.left=G,this.checkCollision.right=w,this.checkCollision.up=b,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(f.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(f.RESUME),this},addCollider:function(G,w,b,Y,U){b===void 0&&(b=null),Y===void 0&&(Y=null),U===void 0&&(U=b);var W=new l(this,!1,G,w,b,Y,U);return this.colliders.add(W),W},addOverlap:function(G,w,b,Y,U){b===void 0&&(b=null),Y===void 0&&(Y=null),U===void 0&&(U=b);var W=new l(this,!0,G,w,b,Y,U);return this.colliders.add(W),W},removeCollider:function(G){return this.colliders.remove(G),this},setFPS:function(G){return this.fps=G,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(G,w){if(!(this.isPaused||this.bodies.size===0)){var b,Y=this._frameTime,U=this._frameTimeMS*this.timeScale;this._elapsed+=w;var W,H=this.bodies.entries,J=this._elapsed>=U;for(this.fixedStep||(Y=w*.001,J=!0,this._elapsed=0),b=0;b<H.length;b++)W=H[b],W.enable&&W.preUpdate(J,Y);if(J){this._elapsed-=U,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(H));var q=this.colliders.update();for(b=0;b<q.length;b++){var _=q[b];_.active&&_.update()}this.emit(f.WORLD_STEP,Y)}for(;this._elapsed>=U;)this._elapsed-=U,this.step(Y)}},step:function(G){var w,b,Y=this.bodies.entries,U=Y.length;for(w=0;w<U;w++)b=Y[w],b.enable&&b.update(G);this.useTree&&(this.tree.clear(),this.tree.load(Y));var W=this.colliders.update();for(w=0;w<W.length;w++){var H=W[w];H.active&&H.update()}this.emit(f.WORLD_STEP,G),this.stepsLastFrame++},postUpdate:function(){var G,w,b=this.bodies.entries,Y=b.length,U=this.bodies,W=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,G=0;G<Y;G++)w=b[G],w.enable&&w.postUpdate();if(this.drawDebug){var H=this.debugGraphic;for(H.clear(),G=0;G<Y;G++)w=b[G],w.willDrawDebug()&&w.drawDebug(H);for(b=W.entries,Y=b.length,G=0;G<Y;G++)w=b[G],w.willDrawDebug()&&w.drawDebug(H)}var J=this.pendingDestroy;if(J.size>0){var q=this.tree,_=this.staticTree;for(b=J.entries,Y=b.length,G=0;G<Y;G++)w=b[G],w.physicsType===a.DYNAMIC_BODY?(q.remove(w),U.delete(w)):w.physicsType===a.STATIC_BODY&&(_.remove(w),W.delete(w)),w.world=void 0,w.gameObject=void 0;J.clear()}},updateMotion:function(G,w){G.allowRotation&&this.computeAngularVelocity(G,w),this.computeVelocity(G,w)},computeAngularVelocity:function(G,w){var b=G.angularVelocity,Y=G.angularAcceleration,U=G.angularDrag,W=G.maxAngular;Y?b+=Y*w:G.allowDrag&&U&&(U*=w,p(b-U,0,.1)?b-=U:g(b+U,0,.1)?b+=U:b=0),b=r(b,-W,W);var H=b-G.angularVelocity;G.angularVelocity+=H,G.rotation+=G.angularVelocity*w},computeVelocity:function(G,w){var b=G.velocity.x,Y=G.acceleration.x,U=G.drag.x,W=G.maxVelocity.x,H=G.velocity.y,J=G.acceleration.y,q=G.drag.y,_=G.maxVelocity.y,nt=G.speed,rt=G.maxSpeed,at=G.allowDrag,vt=G.useDamping;G.allowGravity&&(b+=(this.gravity.x+G.gravity.x)*w,H+=(this.gravity.y+G.gravity.y)*w),Y?b+=Y*w:at&&U&&(vt?(U=Math.pow(U,w),b*=U,nt=Math.sqrt(b*b+H*H),v(nt,0,.001)&&(b=0)):(U*=w,p(b-U,0,.01)?b-=U:g(b+U,0,.01)?b+=U:b=0)),J?H+=J*w:at&&q&&(vt?(q=Math.pow(q,w),H*=q,nt=Math.sqrt(b*b+H*H),v(nt,0,.001)&&(H=0)):(q*=w,p(H-q,0,.01)?H-=q:g(H+q,0,.01)?H+=q:H=0)),b=r(b,-W,W),H=r(H,-_,_),G.velocity.set(b,H),rt>-1&&nt>rt&&(G.velocity.normalize().scale(rt),nt=rt),G.speed=nt},separate:function(G,w,b,Y,U,W){if(!W&&!G.enable||!w.enable||G.checkCollision.none||w.checkCollision.none||!this.intersects(G,w)||b&&b.call(Y,G.gameObject,w.gameObject)===!1)return!1;if(G.isCircle&&w.isCircle)return this.separateCircle(G,w,U);if(G.isCircle!==w.isCircle){var H=G.isCircle?w:G,J=G.isCircle?G:w,q={x:H.x,y:H.y,right:H.right,bottom:H.bottom},_=J.center;if((_.y<q.y||_.y>q.bottom)&&(_.x<q.x||_.x>q.right))return this.separateCircle(G,w,U)}var nt=!1,rt=!1;U?(nt=O(G,w,U,this.OVERLAP_BIAS),rt=F(G,w,U,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+G.gravity.y)<Math.abs(this.gravity.x+G.gravity.x)?(nt=O(G,w,U,this.OVERLAP_BIAS),this.intersects(G,w)&&(rt=F(G,w,U,this.OVERLAP_BIAS))):(rt=F(G,w,U,this.OVERLAP_BIAS),this.intersects(G,w)&&(nt=O(G,w,U,this.OVERLAP_BIAS)));var at=nt||rt;return at&&(U?(G.onOverlap||w.onOverlap)&&this.emit(f.OVERLAP,G.gameObject,w.gameObject,G,w):(G.onCollide||w.onCollide)&&this.emit(f.COLLIDE,G.gameObject,w.gameObject,G,w)),at},separateCircle:function(G,w,b,Y){m(G,w,!1,Y),x(G,w,!1,Y);var U=0;if(G.isCircle!==w.isCircle){var W={x:w.isCircle?G.position.x:w.position.x,y:w.isCircle?G.position.y:w.position.y,right:w.isCircle?G.right:w.right,bottom:w.isCircle?G.bottom:w.bottom},H={x:G.isCircle?G.center.x:w.center.x,y:G.isCircle?G.center.y:w.center.y,radius:G.isCircle?G.halfWidth:w.halfWidth};H.y<W.y?H.x<W.x?U=u(H.x,H.y,W.x,W.y)-H.radius:H.x>W.right&&(U=u(H.x,H.y,W.right,W.y)-H.radius):H.y>W.bottom&&(H.x<W.x?U=u(H.x,H.y,W.x,W.bottom)-H.radius:H.x>W.right&&(U=u(H.x,H.y,W.right,W.bottom)-H.radius)),U*=-1}else U=G.halfWidth+w.halfWidth-u(G.center.x,G.center.y,w.center.x,w.center.y);if(G.overlapR=U,w.overlapR=U,b||U===0||G.immovable&&w.immovable||G.customSeparateX||w.customSeparateX)return U!==0&&(G.onOverlap||w.onOverlap)&&this.emit(f.OVERLAP,G.gameObject,w.gameObject,G,w),U!==0;var J=G.center.x-w.center.x,q=G.center.y-w.center.y,_=Math.sqrt(Math.pow(J,2)+Math.pow(q,2)),nt=(w.center.x-G.center.x)/_||0,rt=(w.center.y-G.center.y)/_||0,at=2*(G.velocity.x*nt+G.velocity.y*rt-w.velocity.x*nt-w.velocity.y*rt)/(G.mass+w.mass);(G.immovable||w.immovable)&&(at*=2),G.immovable||(G.velocity.x=G.velocity.x-at/G.mass*nt,G.velocity.y=G.velocity.y-at/G.mass*rt),w.immovable||(w.velocity.x=w.velocity.x+at/w.mass*nt,w.velocity.y=w.velocity.y+at/w.mass*rt),!G.immovable&&!w.immovable&&(U/=2);var vt=n(G.center,w.center),ut=(U+C.EPSILON)*Math.cos(vt),ct=(U+C.EPSILON)*Math.sin(vt);return G.immovable||(G.x-=ut,G.y-=ct,G.updateCenter()),w.immovable||(w.x+=ut,w.y+=ct,w.updateCenter()),G.velocity.x*=G.bounce.x,G.velocity.y*=G.bounce.y,w.velocity.x*=w.bounce.x,w.velocity.y*=w.bounce.y,(G.onCollide||w.onCollide)&&this.emit(f.COLLIDE,G.gameObject,w.gameObject,G,w),!0},intersects:function(G,w){return G===w?!1:!G.isCircle&&!w.isCircle?!(G.right<=w.position.x||G.bottom<=w.position.y||G.position.x>=w.right||G.position.y>=w.bottom):G.isCircle?w.isCircle?u(G.center.x,G.center.y,w.center.x,w.center.y)<=G.halfWidth+w.halfWidth:this.circleBodyIntersects(G,w):this.circleBodyIntersects(w,G)},circleBodyIntersects:function(G,w){var b=r(G.center.x,w.left,w.right),Y=r(G.center.y,w.top,w.bottom),U=(G.center.x-b)*(G.center.x-b),W=(G.center.y-Y)*(G.center.y-Y);return U+W<=G.halfWidth*G.halfWidth},overlap:function(G,w,b,Y,U){return b===void 0&&(b=null),Y===void 0&&(Y=null),U===void 0&&(U=b),this.collideObjects(G,w,b,Y,U,!0)},collide:function(G,w,b,Y,U){return b===void 0&&(b=null),Y===void 0&&(Y=null),U===void 0&&(U=b),this.collideObjects(G,w,b,Y,U,!1)},collideObjects:function(G,w,b,Y,U,W){var H,J;G.isParent&&G.physicsType===void 0&&(G=G.children.entries),w&&w.isParent&&w.physicsType===void 0&&(w=w.children.entries);var q=Array.isArray(G),_=Array.isArray(w);if(this._total=0,!q&&!_)this.collideHandler(G,w,b,Y,U,W);else if(!q&&_)for(H=0;H<w.length;H++)this.collideHandler(G,w[H],b,Y,U,W);else if(q&&!_)if(w)for(H=0;H<G.length;H++)this.collideHandler(G[H],w,b,Y,U,W);else for(H=0;H<G.length;H++){var nt=G[H];for(J=H+1;J<G.length;J++)H!==J&&this.collideHandler(nt,G[J],b,Y,U,W)}else for(H=0;H<G.length;H++)for(J=0;J<w.length;J++)this.collideHandler(G[H],w[J],b,Y,U,W);return this._total>0},collideHandler:function(G,w,b,Y,U,W){if(w===void 0&&G.isParent)return this.collideGroupVsGroup(G,G,b,Y,U,W);if(!G||!w)return!1;if(G.body){if(w.body)return this.collideSpriteVsSprite(G,w,b,Y,U,W);if(w.isParent)return this.collideSpriteVsGroup(G,w,b,Y,U,W);if(w.isTilemap)return this.collideSpriteVsTilemapLayer(G,w,b,Y,U,W)}else if(G.isParent){if(w.body)return this.collideSpriteVsGroup(w,G,b,Y,U,W);if(w.isParent)return this.collideGroupVsGroup(G,w,b,Y,U,W);if(w.isTilemap)return this.collideGroupVsTilemapLayer(G,w,b,Y,U,W)}else if(G.isTilemap){if(w.body)return this.collideSpriteVsTilemapLayer(w,G,b,Y,U,W);if(w.isParent)return this.collideGroupVsTilemapLayer(w,G,b,Y,U,W)}},collideSpriteVsSprite:function(G,w,b,Y,U,W){return!G.body||!w.body?!1:(this.separate(G.body,w.body,Y,U,W)&&(b&&b.call(U,G,w),this._total++),!0)},collideSpriteVsGroup:function(G,w,b,Y,U,W){var H=G.body;if(!(w.length===0||!H||!H.enable||H.checkCollision.none)){var J,q,_;if(this.useTree||w.physicsType===a.STATIC_BODY){var nt=this.treeMinMax;nt.minX=H.left,nt.minY=H.top,nt.maxX=H.right,nt.maxY=H.bottom;var rt=w.physicsType===a.DYNAMIC_BODY?this.tree.search(nt):this.staticTree.search(nt);for(q=rt.length,J=0;J<q;J++)_=rt[J],!(H===_||!_.enable||_.checkCollision.none||!w.contains(_.gameObject))&&this.separate(H,_,Y,U,W,!0)&&(b&&b.call(U,H.gameObject,_.gameObject),this._total++)}else{var at=w.getChildren(),vt=w.children.entries.indexOf(G);for(q=at.length,J=0;J<q;J++)_=at[J].body,!(!_||J===vt||!_.enable)&&this.separate(H,_,Y,U,W)&&(b&&b.call(U,H.gameObject,_.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(G,w,b,Y,U,W){var H=G.getChildren();if(H.length===0)return!1;for(var J=!1,q=0;q<H.length;q++)H[q].body&&this.collideSpriteVsTilemapLayer(H[q],w,b,Y,U,W)&&(J=!0);return J},collideTiles:function(G,w,b,Y,U){return!G.body.enable||w.length===0?!1:this.collideSpriteVsTilesHandler(G,w,b,Y,U,!1,!1)},overlapTiles:function(G,w,b,Y,U){return!G.body.enable||w.length===0?!1:this.collideSpriteVsTilesHandler(G,w,b,Y,U,!0,!1)},collideSpriteVsTilemapLayer:function(G,w,b,Y,U,W){var H=G.body;if(!H.enable||H.checkCollision.none)return!1;var J=H.position.x,q=H.position.y,_=H.width,nt=H.height,rt=w.layer;if(rt.tileWidth>rt.baseTileWidth){var at=(rt.tileWidth-rt.baseTileWidth)*w.scaleX;J-=at,_+=at}if(rt.tileHeight>rt.baseTileHeight){var vt=(rt.tileHeight-rt.baseTileHeight)*w.scaleY;nt+=vt}var ut=y(J,q,_,nt,null,w.scene.cameras.main,w.layer);return ut.length===0?!1:this.collideSpriteVsTilesHandler(G,ut,b,Y,U,W,!0)},collideSpriteVsTilesHandler:function(G,w,b,Y,U,W,H){for(var J=G.body,q,_={left:0,right:0,top:0,bottom:0},nt,rt=!1,at=0;at<w.length;at++){q=w[at],nt=q.tilemapLayer;var vt=nt.tileToWorldXY(q.x,q.y);_.left=vt.x,_.top=vt.y,q.baseHeight!==q.height&&(_.top-=(q.height-q.baseHeight)*nt.scaleY),_.right=_.left+q.width*nt.scaleX,_.bottom=_.top+q.height*nt.scaleY,N(_,J)&&(!Y||Y.call(U,G,q))&&E(q,G)&&(W||L(at,J,q,_,nt,this.TILE_BIAS,H))&&(this._total++,rt=!0,b&&b.call(U,G,q),W&&J.onOverlap?this.emit(f.TILE_OVERLAP,G,q,J):J.onCollide&&this.emit(f.TILE_COLLIDE,G,q,J))}return rt},collideGroupVsGroup:function(G,w,b,Y,U,W){if(!(G.length===0||w.length===0))for(var H=G.getChildren(),J=0;J<H.length;J++)this.collideSpriteVsGroup(H[J],w,b,Y,U,W)},wrap:function(G,w){G.body?this.wrapObject(G,w):G.getChildren?this.wrapArray(G.getChildren(),w):Array.isArray(G)?this.wrapArray(G,w):this.wrapObject(G,w)},wrapArray:function(G,w){for(var b=0;b<G.length;b++)this.wrapObject(G[b],w)},wrapObject:function(G,w){w===void 0&&(w=0),G.x=K(G.x,this.bounds.left-w,this.bounds.right+w),G.y=K(G.y,this.bounds.top-w,this.bounds.bottom+w)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});i.exports=Z},function(i,d,e){var n=e(0),h=e(62),r=e(245),o=e(196),l=e(10),a=e(57),u=e(3),c=new n({initialize:function(v,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=v,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new u,this.newVelocity=new u,this.deltaMax=new u,this.acceleration=new u,this.allowDrag=!0,this.drag=new u,this.allowGravity=!0,this.gravity=new u,this.bounce=new u,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new u(1e4,1e4),this.maxSpeed=-1,this.friction=new u(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=h.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=h.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new l},updateBounds:function(){var f=this.gameObject,v=this.transform;if(f.parentContainer){var p=f.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=p.tx,v.y=p.ty,v.rotation=o(p.rotation),v.scaleX=p.scaleX,v.scaleY=p.scaleY,v.displayOriginX=f.displayOriginX,v.displayOriginY=f.displayOriginY}else v.x=f.x,v.y=f.y,v.rotation=f.angle,v.scaleX=f.scaleX,v.scaleY=f.scaleY,v.displayOriginX=f.displayOriginX,v.displayOriginY=f.displayOriginY;var g=!1;if(this.syncBounds){var m=f.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(v.scaleX),y=Math.abs(v.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var f=this.transform;this.position.x=f.x+f.scaleX*(this.offset.x-f.displayOriginX),this.position.y=f.y+f.scaleY*(this.offset.y-f.displayOriginY),this.updateCenter()},resetFlags:function(f){f===void 0&&(f=!1);var v=this.wasTouching,p=this.touching,g=this.blocked;f?(v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1):(v.none=p.none,v.up=p.up,v.down=p.down,v.left=p.left,v.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(f,v){f&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),f&&this.update(v)},update:function(f){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,f);var v=this.velocity.x,p=this.velocity.y;this.newVelocity.set(v*f,p*f),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,v),this.speed=Math.sqrt(v*v+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var f=this.position.x-this.prevFrame.x,v=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&f!==0&&(f<0&&f<-p?f=-p:f>0&&f>p&&(f=p)),g!==0&&v!==0&&(v<0&&v<-g?v=-g:v>0&&v>g&&(v=g)),this.gameObject.x+=f,this.gameObject.y+=v}f<0?this.facing=h.FACING_LEFT:f>0&&(this.facing=h.FACING_RIGHT),v<0?this.facing=h.FACING_UP:v>0&&(this.facing=h.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=f,this._ty=v},setBoundsRectangle:function(f){return this.customBoundsRectangle=f||this.world.bounds,this},checkWorldBounds:function(){var f=this.position,v=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return f.x<v.x&&p.left?(f.x=v.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>v.right&&p.right&&(f.x=v.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),f.y<v.y&&p.up?(f.y=v.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>v.bottom&&p.down&&(f.y=v.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(f,v){return v===void 0&&(v=f),this.offset.set(f,v),this},setSize:function(f,v,p){p===void 0&&(p=!0);var g=this.gameObject;if(!f&&g.frame&&(f=g.frame.realWidth),!v&&g.frame&&(v=g.frame.realHeight),this.sourceWidth=f,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-f)/2,x=(g.height-v)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(f,v,p){return v===void 0&&(v=this.offset.x),p===void 0&&(p=this.offset.y),f>0?(this.isCircle=!0,this.radius=f,this.sourceWidth=f*2,this.sourceHeight=f*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,p),this.updateCenter()):this.isCircle=!1,this},reset:function(f,v){this.stop();var p=this.gameObject;p.setPosition(f,v),p.getTopLeft?p.getTopLeft(this.position):this.position.set(f,v),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,v){if(!this.isCircle)return a(this,f,v);if(this.radius>0&&f>=this.left&&f<=this.right&&v>=this.top&&v<=this.bottom){var p=(this.center.x-f)*(this.center.x-f),g=(this.center.y-v)*(this.center.y-v);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(f){var v=this.position,p=v.x+this.halfWidth,g=v.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor),this.isCircle?f.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&f.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&f.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&f.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&f.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(f.lineStyle(f.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),f.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(f,v,p,g){f===void 0&&(f=!0),this.collideWorldBounds=f;var m=v!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new u),m&&(this.worldBounce.x=v),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(f,v){return this.velocity.set(f,v),f=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(f*f+v*v),this},setVelocityX:function(f){this.velocity.x=f;var v=f,p=this.velocity.y;return this.speed=Math.sqrt(v*v+p*p),this},setVelocityY:function(f){this.velocity.y=f;var v=this.velocity.x,p=f;return this.speed=Math.sqrt(v*v+p*p),this},setMaxVelocity:function(f,v){return this.maxVelocity.set(f,v),this},setMaxVelocityX:function(f){return this.maxVelocity.x=f,this},setMaxVelocityY:function(f){return this.maxVelocity.y=f,this},setMaxSpeed:function(f){return this.maxSpeed=f,this},setBounce:function(f,v){return this.bounce.set(f,v),this},setBounceX:function(f){return this.bounce.x=f,this},setBounceY:function(f){return this.bounce.y=f,this},setAcceleration:function(f,v){return this.acceleration.set(f,v),this},setAccelerationX:function(f){return this.acceleration.x=f,this},setAccelerationY:function(f){return this.acceleration.y=f,this},setAllowDrag:function(f){return f===void 0&&(f=!0),this.allowDrag=f,this},setAllowGravity:function(f){return f===void 0&&(f=!0),this.allowGravity=f,this},setAllowRotation:function(f){return f===void 0&&(f=!0),this.allowRotation=f,this},setDrag:function(f,v){return this.drag.set(f,v),this},setDamping:function(f){return this.useDamping=f,this},setDragX:function(f){return this.drag.x=f,this},setDragY:function(f){return this.drag.y=f,this},setGravity:function(f,v){return this.gravity.set(f,v),this},setGravityX:function(f){return this.gravity.x=f,this},setGravityY:function(f){return this.gravity.y=f,this},setFriction:function(f,v){return this.friction.set(f,v),this},setFrictionX:function(f){return this.friction.x=f,this},setFrictionY:function(f){return this.friction.y=f,this},setAngularVelocity:function(f){return this.angularVelocity=f,this},setAngularAcceleration:function(f){return this.angularAcceleration=f,this},setAngularDrag:function(f){return this.angularDrag=f,this},setMass:function(f){return this.mass=f,this},setImmovable:function(f){return f===void 0&&(f=!0),this.immovable=f,this},setEnable:function(f){return f===void 0&&(f=!0),this.enable=f,this},processX:function(f,v,p,g){this.x+=f,this.updateCenter(),v!==null&&(this.velocity.x=v);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(f,v,p,g){this.y+=f,this.updateCenter(),v!==null&&(this.velocity.y=v);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});i.exports=c},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u,c,f,v){this.world=o,this.name="",this.active=!0,this.overlapOnly=l,this.object1=a,this.object2=u,this.collideCallback=c,this.processCallback=f,this.callbackContext=v},setName:function(r){return this.name=r,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});i.exports=h},function(i,d,e){var n=e(26),h=e(3),r=new h,o=new h,l=function(a,u,c,f,v,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(a,u,!0,r,p,g);var x=r.x,y=r.y;m(a+c,u+f,!1,o,p,g);var T=Math.ceil(o.x),C=Math.ceil(o.y);return n(x,y,T-x,C-y,v,g)};i.exports=l},function(i,d){var e=function(n,h){return n.collisionCallback?!n.collisionCallback.call(n.collisionCallbackContext,h,n):n.layer.callbacks[n.index]?!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,h,n):!0};i.exports=e},function(i,d,e){var n=e(436);function h(C){var S=[".left",".top",".right",".bottom"];if(!(this instanceof h))return new h(C,S);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}h.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],M=this.toBBox;if(!x(C,S))return E;for(var R=[],L,O,F,D;S;){for(L=0,O=S.children.length;L<O;L++)F=S.children[L],D=S.leaf?M(F):F,x(C,D)&&(S.leaf?E.push(F):m(C,D)?this._all(F,E):R.push(F));S=R.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!x(C,S))return!1;for(var M=[],R,L,O,F;S;){for(R=0,L=S.children.length;R<L;R++)if(O=S.children[R],F=S.leaf?E(O):O,x(C,F)){if(S.leaf||m(C,F))return!0;M.push(O)}S=M.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var M=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var R=this.data;this.data=M,M=R}this._insert(M,this.data.height-M.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,M=this.toBBox(C),R=[],L=[],O,F,D,B;E||R.length;){if(E||(E=R.pop(),F=R[R.length-1],O=L.pop(),B=!0),E.leaf&&(D=r(C,E.children,S),D!==-1))return E.children.splice(D,1),R.push(E),this._condense(R),this;!B&&!E.leaf&&m(E,M)?(R.push(E),L.push(O),O=0,F=E,E=E.children[0]):F?(O++,E=F.children[O],B=!1):E=null}return this},toBBox:function(C){return C},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,M){var R=E-S+1,L=this._maxEntries,O;if(R<=L)return O=y(C.slice(S,E+1)),o(O,this.toBBox),O;M||(M=Math.ceil(Math.log(R)/Math.log(L)),L=Math.ceil(R/Math.pow(L,M-1))),O=y([]),O.leaf=!1,O.height=M;var F=Math.ceil(R/L),D=F*Math.ceil(Math.sqrt(L)),B,N,V,X;for(T(C,S,E,D,this.compareMinX),B=S;B<=E;B+=D)for(V=Math.min(B+D-1,E),T(C,B,V,F,this.compareMinY),N=B;N<=V;N+=F)X=Math.min(N+F-1,V),O.children.push(this._build(C,N,X,M-1));return o(O,this.toBBox),O},_chooseSubtree:function(C,S,E,M){for(var R,L,O,F,D,B,N,V;M.push(S),!(S.leaf||M.length-1===E);){for(N=V=Infinity,R=0,L=S.children.length;R<L;R++)O=S.children[R],D=f(O),B=p(C,O)-D,B<V?(V=B,N=D<N?D:N,F=O):B===V&&D<N&&(N=D,F=O);S=F||S.children[0]}return S},_insert:function(C,S,E){var M=this.toBBox,R=E?C:M(C),L=[],O=this._chooseSubtree(R,this.data,S,L);for(O.children.push(C),a(O,R);S>=0&&L[S].children.length>this._maxEntries;)this._split(L,S),S--;this._adjustParentBBoxes(R,L,S)},_split:function(C,S){var E=C[S],M=E.children.length,R=this._minEntries;this._chooseSplitAxis(E,R,M);var L=this._chooseSplitIndex(E,R,M),O=y(E.children.splice(L,E.children.length-L));O.height=E.height,O.leaf=E.leaf,o(E,this.toBBox),o(O,this.toBBox),S?C[S-1].children.push(O):this._splitRoot(E,O)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var M,R,L,O,F,D,B,N;for(D=B=Infinity,M=S;M<=E-S;M++)R=l(C,0,M,this.toBBox),L=l(C,M,E,this.toBBox),O=g(R,L),F=f(R)+f(L),O<D?(D=O,N=M,B=F<B?F:B):O===D&&F<B&&(B=F,N=M);return N},_chooseSplitAxis:function(C,S,E){var M=C.leaf?this.compareMinX:u,R=C.leaf?this.compareMinY:c,L=this._allDistMargin(C,S,E,M),O=this._allDistMargin(C,S,E,R);L<O&&C.children.sort(M)},_allDistMargin:function(C,S,E,M){C.children.sort(M);var R=this.toBBox,L=l(C,0,S,R),O=l(C,E-S,E,R),F=v(L)+v(O),D,B;for(D=S;D<E-S;D++)B=C.children[D],a(L,C.leaf?R(B):B),F+=v(L);for(D=E-S-1;D>=S;D--)B=C.children[D],a(O,C.leaf?R(B):B),F+=v(O);return F},_adjustParentBBoxes:function(C,S,E){for(var M=E;M>=0;M--)a(S[M],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():o(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function r(C,S,E){if(!E)return S.indexOf(C);for(var M=0;M<S.length;M++)if(E(C,S[M]))return M;return-1}function o(C,S){l(C,0,C.children.length,S,C)}function l(C,S,E,M,R){R||(R=y(null)),R.minX=Infinity,R.minY=Infinity,R.maxX=-Infinity,R.maxY=-Infinity;for(var L=S,O;L<E;L++)O=C.children[L],a(R,C.leaf?M(O):O);return R}function a(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function u(C,S){return C.minX-S.minX}function c(C,S){return C.minY-S.minY}function f(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function v(C){return C.maxX-C.minX+(C.maxY-C.minY)}function p(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),M=Math.max(C.minY,S.minY),R=Math.min(C.maxX,S.maxX),L=Math.min(C.maxY,S.maxY);return Math.max(0,R-E)*Math.max(0,L-M)}function m(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function x(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function T(C,S,E,M,R){for(var L=[S,E],O;L.length;)E=L.pop(),S=L.pop(),!(E-S<=M)&&(O=S+Math.ceil((E-S)/M/2)*M,n(C,O,S,E,R),L.push(S,O,O,E))}i.exports=h},function(i,d,e){var n=e(533),h=e(535),r=e(248),o=function(l,a,u,c,f,v,p){var g=c.left,m=c.top,x=c.right,y=c.bottom,T=u.faceLeft||u.faceRight,C=u.faceTop||u.faceBottom;if(p||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,M=0,R=1;if(a.deltaAbsX()>a.deltaAbsY()?M=-1:a.deltaAbsX()<a.deltaAbsY()&&(R=-1),a.deltaX()!==0&&a.deltaY()!==0&&T&&C&&(M=Math.min(Math.abs(a.position.x-x),Math.abs(a.right-g)),R=Math.min(Math.abs(a.position.y-y),Math.abs(a.bottom-m))),M<R){if(T&&(S=n(a,u,g,x,v,p),S!==0&&!r(c,a)))return!0;C&&(E=h(a,u,m,y,v,p))}else{if(C&&(E=h(a,u,m,y,v,p),E!==0&&!r(c,a)))return!0;T&&(S=n(a,u,g,x,v,p))}return S!==0||E!==0};i.exports=o},function(i,d,e){var n=e(534),h=function(r,o,l,a,u,c){var f=0,v=o.faceLeft,p=o.faceRight,g=o.collideLeft,m=o.collideRight;return c||(v=!0,p=!0,g=!0,m=!0),r.deltaX()<0&&m&&r.checkCollision.left?p&&r.x<a&&(f=r.x-a,f<-u&&(f=0)):r.deltaX()>0&&g&&r.checkCollision.right&&v&&r.right>l&&(f=r.right-l,f>u&&(f=0)),f!==0&&(r.customSeparateX?r.overlapX=f:n(r,f)),f};i.exports=h},function(i,d){var e=function(n,h){h<0?(n.blocked.none=!1,n.blocked.left=!0):h>0&&(n.blocked.none=!1,n.blocked.right=!0),n.position.x-=h,n.bounce.x===0?n.velocity.x=0:n.velocity.x=-n.velocity.x*n.bounce.x};i.exports=e},function(i,d,e){var n=e(536),h=function(r,o,l,a,u,c){var f=0,v=o.faceTop,p=o.faceBottom,g=o.collideUp,m=o.collideDown;return c||(v=!0,p=!0,g=!0,m=!0),r.deltaY()<0&&m&&r.checkCollision.up?p&&r.y<a&&(f=r.y-a,f<-u&&(f=0)):r.deltaY()>0&&g&&r.checkCollision.down&&v&&r.bottom>l&&(f=r.bottom-l,f>u&&(f=0)),f!==0&&(r.customSeparateY?r.overlapY=f:n(r,f)),f};i.exports=h},function(i,d){var e=function(n,h){h<0?(n.blocked.none=!1,n.blocked.up=!0):h>0&&(n.blocked.none=!1,n.blocked.down=!0),n.position.y-=h,n.bounce.y===0?n.velocity.y=0:n.velocity.y=-n.velocity.y*n.bounce.y};i.exports=e},function(i,d,e){var n=e(246),h=e(1389),r=function(o,l,a,u){var c=n(o,l,a,u),f=o.immovable,v=l.immovable;if(a||c===0||f&&v||o.customSeparateX||l.customSeparateX)return c!==0||o.embedded&&l.embedded;var p=h.Set(o,l,c);return!f&&!v?p>0?!0:h.Check():(f?h.RunImmovableBody1(p):v&&h.RunImmovableBody2(p),!0)};i.exports=r},function(i,d,e){var n=e(247),h=e(1390),r=function(o,l,a,u){var c=n(o,l,a,u),f=o.immovable,v=l.immovable;if(a||c===0||f&&v||o.customSeparateY||l.customSeparateY)return c!==0||o.embedded&&l.embedded;var p=h.Set(o,l,c);return!f&&!v?p>0?!0:h.Check():(f?h.RunImmovableBody1(p):v&&h.RunImmovableBody2(p),!0)};i.exports=r},function(i,d,e){var n=e(66),h=e(0),r=e(62),o=e(57),l=e(3),a=new h({initialize:function(c,f){var v=f.displayWidth?f.displayWidth:64,p=f.displayHeight?f.displayHeight:64;this.world=c,this.gameObject=f,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(f.x-v*f.originX,f.y-p*f.originY),this.width=v,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(u,c){return u&&u!==this.gameObject&&(this.gameObject.body=null,u.body=this,this.gameObject=u),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var u=this.gameObject;return u.getTopLeft(this.position),this.width=u.displayWidth,this.height=u.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(u,c){return c===void 0&&(c=u),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(u,c,f){f===void 0&&(f=!0);var v=this.gameObject;if(!u&&v.frame&&(u=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight),this.world.staticTree.remove(this),this.width=u,this.height=c,this.halfWidth=Math.floor(u/2),this.halfHeight=Math.floor(c/2),f&&v.getCenter){var p=v.displayWidth/2,g=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(u,c,f){return c===void 0&&(c=this.offset.x),f===void 0&&(f=this.offset.y),u>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=u,this.width=u*2,this.height=u*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,f),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(u,c){var f=this.gameObject;u===void 0&&(u=f.x),c===void 0&&(c=f.y),this.world.staticTree.remove(this),f.setPosition(u,c),f.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(u){return u.x=this.x,u.y=this.y,u.right=this.right,u.bottom=this.bottom,u},hitTest:function(u,c){return this.isCircle?n(this,u,c):o(this,u,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(u){var c=this.position,f=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(u.lineStyle(u.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?u.strokeCircle(f,v,this.width/2):u.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(u){return u<=0&&(u=.1),this.mass=u,this},x:{get:function(){return this.position.x},set:function(u){this.world.staticTree.remove(this),this.position.x=u,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(u){this.world.staticTree.remove(this),this.position.y=u,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});i.exports=a},function(i,d,e){var n=e(0),h=new n({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});i.exports=h},function(i,d,e){var n=e(3),h=new n,r=function(o,l,a,u){var c=a.tilemapLayer,f=c.cullPaddingX,v=c.cullPaddingY,p=c.tilemap.tileToWorldXY(o,l,h,u,c);return p.x>u.worldView.x+c.scaleX*a.tileWidth*(-f-.5)&&p.x<u.worldView.right+c.scaleX*a.tileWidth*(f-.5)&&p.y>u.worldView.y+c.scaleY*a.tileHeight*(-v-1)&&p.y<u.worldView.bottom+c.scaleY*a.tileHeight*(v-.5)};i.exports=r},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c,f){for(var v=n(l,a,u,c,null,f),p=0;p<v.length;p++)v[p]&&v[p].index===r&&(v[p].index=o)};i.exports=h},function(i,d,e){var n=e(10),h=e(139),r=e(76),o=new n,l=function(a,u){var c=a.tilemapLayer.tilemap,f=a.tilemapLayer,v=Math.floor(c.tileWidth*f.scaleX),p=Math.floor(c.tileHeight*f.scaleY),g=r(u.worldView.x-f.x,v,0,!0)-f.cullPaddingX,m=h(u.worldView.right-f.x,v,0,!0)+f.cullPaddingX,x=r(u.worldView.y-f.y,p,0,!0)-f.cullPaddingY,y=h(u.worldView.bottom-f.y,p,0,!0)+f.cullPaddingY;return o.setTo(g,x,m-g,y-x)};i.exports=l},function(i,d,e){var n=e(543),h=e(159),r=function(o,l,a,u){a===void 0&&(a=[]),u===void 0&&(u=0),a.length=0;var c=o.tilemapLayer,f=n(o,l);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(f.left=0,f.right=o.width,f.top=0,f.bottom=o.height),h(o,f,u,a),a};i.exports=r},function(i,d,e){var n=e(546),h=e(159),r=function(o,l,a,u){a===void 0&&(a=[]),u===void 0&&(u=0),a.length=0;var c=o.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var f=n(o,l);h(o,f,u,a)}return a};i.exports=r},function(i,d,e){var n=e(139),h=e(76),r=function(o,l){var a=o.tilemapLayer.tilemap,u=o.tilemapLayer,c=Math.floor(a.tileWidth*u.scaleX),f=Math.floor(a.tileHeight*u.scaleY),v=o.hexSideLength,p=(f-v)/2+v,g=h(l.worldView.x-u.x,c,0,!0)-u.cullPaddingX,m=n(l.worldView.right-u.x,c,0,!0)+u.cullPaddingX,x=h(l.worldView.y-u.y,p,0,!0)-u.cullPaddingY,y=n(l.worldView.bottom-u.y,p,0,!0)+u.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};i.exports=r},function(i,d,e){var n=e(541),h=function(r,o,l,a){l===void 0&&(l=[]),a===void 0&&(a=0),l.length=0;var u=r.tilemapLayer,c=r.data,f=r.width,v=r.height,p=0,g=f,m=0,x=v;if(!u.skipCull){var y,T,C;if(a===0){for(T=m;T<x;T++)for(y=p;c[T]&&y<g;y++)if(n(y,T,r,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(a===1){for(T=m;T<x;T++)for(y=g;c[T]&&y>=p;y--)if(n(y,T,r,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(a===2){for(T=x;T>=m;T--)for(y=p;c[T]&&y<g;y++)if(n(y,T,r,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}else if(a===3){for(T=x;T>=m;T--)for(y=g;c[T]&&y>=p;y--)if(n(y,T,r,o)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;l.push(C)}}}return u.tilesDrawn=l.length,u.tilesTotal=f*v,l};i.exports=h},function(i,d,e){var n=e(549),h=e(159),r=function(o,l,a,u){a===void 0&&(a=[]),u===void 0&&(u=0),a.length=0;var c=o.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var f=n(o,l);h(o,f,u,a)}return a};i.exports=r},function(i,d,e){var n=e(139),h=e(76),r=function(o,l){var a=o.tilemapLayer.tilemap,u=o.tilemapLayer,c=Math.floor(a.tileWidth*u.scaleX),f=Math.floor(a.tileHeight*u.scaleY),v=h(l.worldView.x-u.x,c,0,!0)-u.cullPaddingX,p=n(l.worldView.right-u.x,c,0,!0)+u.cullPaddingX,g=h(l.worldView.y-u.y,f/2,0,!0)-u.cullPaddingY,m=n(l.worldView.bottom-u.y,f/2,0,!0)+u.cullPaddingY;return{left:v,right:p,top:g,bottom:m}};i.exports=r},function(i,d,e){var n=e(3),h=function(r,o,l,a,u){l||(l=new n);var c=u.baseTileWidth,f=u.baseTileHeight,v=u.tilemapLayer,p=0,g=0;v&&(a||(a=v.scene.cameras.main),p=v.x+a.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+a.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var m=u.hexSideLength,x=(f-m)/2+m,y=p+r*c+o%2*(c/2),T=g+o*x;return l.set(y,T)};i.exports=h},function(i,d,e){var n=e(3),h=function(r,o,l,a,u){l||(l=new n);var c=u.baseTileWidth,f=u.baseTileHeight,v=u.tilemapLayer,p=0,g=0;v&&(a||(a=v.scene.cameras.main),p=v.x+a.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+a.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var m=p+(r-o)*(c/2),x=g+(r+o)*(f/2);return l.set(m,x)};i.exports=h},function(i,d,e){var n=e(3),h=function(r,o,l,a,u){l||(l=new n);var c=u.baseTileWidth,f=u.baseTileHeight,v=u.tilemapLayer,p=0,g=0;v&&(a||(a=v.scene.cameras.main),p=v.x+a.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+a.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var m=p+r*c+o%2*(c/2),x=g+o*(f/2);return l.set(m,x)};i.exports=h},function(i,d,e){var n=e(253),h=e(254),r=e(3),o=function(l,a,u,c,f){return u||(u=new r(0,0)),u.x=n(l,c,f),u.y=h(a,c,f),u};i.exports=o},function(i,d){var e=function(n,h,r){var o=r.baseTileHeight,l=r.tilemapLayer,a=0;l&&(h===void 0&&(h=l.scene.cameras.main),a=l.y+h.scrollY*(1-l.scrollFactorY),o*=l.scaleY);var u=l.tilemap.hexSideLength,c=(o-u)/2+u;return a+n*c};i.exports=e},function(i,d){var e=function(n,h,r){var o=r.baseTileHeight,l=r.tilemapLayer,a=0;return l&&(h===void 0&&(h=l.scene.cameras.main),a=l.y+h.scrollY*(1-l.scrollFactorY),o*=l.scaleY),a+n*(o/2)};i.exports=e},function(i,d,e){var n=e(3),h=function(r,o,l,a,u,c){a||(a=new n);var f=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(u||(u=p.scene.cameras.main),o=o-(p.y+u.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),f*=p.scaleX);var g=c.hexSideLength,m=(v-g)/2+g,x=l?Math.floor(o/m):o/m,y=l?Math.floor((r-x%2*.5*f)/f):(r-x%2*.5*f)/f;return a.set(y,x)};i.exports=h},function(i,d,e){var n=e(3),h=function(r,o,l,a,u,c){a||(a=new n);var f=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(u||(u=p.scene.cameras.main),o=o-(p.y+u.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),f*=p.scaleX);var g=l?Math.floor((r/(f/2)+o/(v/2))/2):(r/(f/2)+o/(v/2))/2,m=l?Math.floor((o/(v/2)-r/(f/2))/2):(o/(v/2)-r/(f/2))/2;return a.set(g,m)};i.exports=h},function(i,d,e){var n=e(3),h=function(r,o,l,a,u,c){a||(a=new n);var f=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(u||(u=p.scene.cameras.main),o=o-(p.y+u.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,r=r-(p.x+u.scrollX*(1-p.scrollFactorX)),f*=p.scaleX);var g=l?Math.floor(o/(v/2)):o/(v/2),m=l?Math.floor((r+g%2*.5*f)/f):(r+g%2*.5*f)/f;return a.set(m,g)};i.exports=h},function(i,d,e){var n=e(255),h=e(256),r=e(3),o=function(l,a,u,c,f,v){return u===void 0&&(u=!0),c||(c=new r(0,0)),c.x=n(l,u,f,v),c.y=h(a,u,f,v),c};i.exports=o},function(i,d){var e=function(n,h,r,o){var l=o.baseTileHeight,a=o.tilemapLayer;a&&(r||(r=a.scene.cameras.main),n=n-(a.y+r.scrollY*(1-a.scrollFactorY)),l*=a.scaleY);var u=o.hexSideLength,c=(l-u)/2+u;return h?Math.floor(n/c):n/c};i.exports=e},function(i,d){var e=function(n,h,r,o){var l=o.baseTileHeight,a=o.tilemapLayer;return a&&(r||(r=a.scene.cameras.main),n=n-(a.y+r.scrollY*(1-a.scrollFactorY)),l*=a.scaleY),h?Math.floor(n/(l/2)):n/(l/2)};i.exports=e},function(i,d,e){var n=e(119),h=function(r,o,l){if(n(r,o,l)){var a=l.data[o][r];return a!==null&&a.index>-1}else return!1};i.exports=h},function(i,d,e){var n=e(85),h=e(119),r=e(252),o=function(l,a,u,c,f){if(u===void 0&&(u=!0),c===void 0&&(c=!0),!h(l,a,f))return null;var v=f.data[a][l];if(v)f.data[a][l]=u?null:new n(f,-1,l,a,f.tileWidth,f.tileHeight);else return null;return c&&v&&v.collides&&r(l,a,f),v};i.exports=o},function(i,d,e){var n=e(40),h=e(259),r=e(565),o=e(566),l=e(577),a=function(u,c,f,v,p,g){var m;switch(c){case n.ARRAY_2D:m=h(u,f,v,p,g);break;case n.CSV:m=r(u,f,v,p,g);break;case n.TILED_JSON:m=o(u,f,g);break;case n.WELTMEISTER:m=l(u,f,g);break;default:console.warn("Unrecognized tilemap data format: "+c),m=null}return m};i.exports=a},function(i,d,e){var n=e(40),h=e(259),r=function(o,l,a,u,c){var f=l.trim().split(`
`).map(function(p){return p.split(",")}),v=h(o,f,a,u,c);return v.format=n.CSV,v};i.exports=r},function(i,d,e){var n=e(567),h=e(568),r=e(29),o=e(40),l=e(258),a=e(121),u=e(569),c=e(570),f=e(573),v=e(575),p=function(g,m,x){var y=new a({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:l(m.orientation),format:o.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===r.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=f(m,x),y.images=u(m);var T=v(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=c(m),y.tiles=h(y),n(y),y};i.exports=p},function(i,d,e){var n=e(17),h=function(r){for(var o,l,a,u,c,f=0;f<r.layers.length;f++){o=r.layers[f],u=null;for(var v=0;v<o.data.length;v++){c=o.data[v];for(var p=0;p<c.length;p++)l=c[p],!(l===null||l.index<0)&&(a=r.tiles[l.index][2],u=r.tilesets[a],l.width=u.tileWidth,l.height=u.tileHeight,u.tileProperties&&u.tileProperties[l.index-u.firstgid]&&(l.properties=n(l.properties,u.tileProperties[l.index-u.firstgid])))}}};i.exports=h},function(i,d,e){var n=e(122),h=function(r){var o,l,a=[];for(o=0;o<r.imageCollections.length;o++)for(var u=r.imageCollections[o],c=u.images,f=0;f<c.length;f++){var v=c[f];l=new n(v.image,v.gid,u.imageWidth,u.imageHeight,0,0),l.updateTileData(u.imageWidth,u.imageHeight),r.tilesets.push(l)}for(o=0;o<r.tilesets.length;o++){l=r.tilesets[o];for(var p=l.tileMargin,g=l.tileMargin,m=0,x=0,y=0,T=l.firstgid;T<l.firstgid+l.total&&(a[T]=[p,g,o],p+=l.tileWidth+l.tileSpacing,m++,!(m===l.total||(x++,x===l.columns&&(p=l.tileMargin,g+=l.tileHeight+l.tileSpacing,x=0,y++,y===l.rows))));T++);}return a};i.exports=h},function(i,d,e){var n=e(2),h=e(161),r=function(o){for(var l=[],a=[],u=h(o);u.i<u.layers.length||a.length>0;){if(u.i>=u.layers.length){if(a.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=a.pop();continue}var c=u.layers[u.i];if(u.i++,c.type!=="imagelayer"){if(c.type==="group"){var f=h(o,c,u);a.push(u),u=f}continue}var v=n(c,"offsetx",0)+n(c,"startx",0),p=n(c,"offsety",0)+n(c,"starty",0);l.push({name:u.name+c.name,image:c.image,x:u.x+v+c.x,y:u.y+p+c.y,alpha:u.opacity*c.opacity,visible:u.visible&&c.visible,properties:n(c,"properties",{})})}return l};i.exports=r},function(i,d,e){var n=e(2),h=e(260),r=e(572),o=e(161),l=function(a){for(var u=[],c=[],f=o(a);f.i<f.layers.length||c.length>0;){if(f.i>=f.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=c.pop();continue}var v=f.layers[f.i];if(f.i++,v.opacity*=f.opacity,v.visible=f.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var p=o(a,v,f);c.push(f),f=p}continue}v.name=f.name+v.name;for(var g=f.x+n(v,"startx",0)+n(v,"offsetx",0),m=f.y+n(v,"starty",0)+n(v,"offsety",0),x=[],y=0;y<v.objects.length;y++){var T=h(v.objects[y],g,m);x.push(T)}var C=new r(v);C.objects=x,u.push(C)}return u};i.exports=l},function(i,d,e){var n=e(126),h=function(r,o){for(var l={},a=0;a<o.length;a++){var u=o[a];n(r,u)&&(l[u]=r[u])}return l};i.exports=h},function(i,d,e){var n=e(0),h=e(2),r=new n({initialize:function(l){l===void 0&&(l={}),this.name=h(l,"name","object layer"),this.opacity=h(l,"opacity",1),this.properties=h(l,"properties",{}),this.propertyTypes=h(l,"propertytypes",{}),this.type=h(l,"type","objectgroup"),this.visible=h(l,"visible",!0),this.objects=h(l,"objects",[])}});i.exports=r},function(i,d,e){var n=e(574),h=e(29),r=e(161),o=e(258),l=e(2),a=e(120),u=e(261),c=e(85),f=function(v,p){for(var g=l(v,"infinite",!1),m=[],x=[],y=r(v);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=r(v,T,y);x.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=n(T.chunks[S].data);T.data&&(T.data=n(T.data)),delete T.encoding}var E,M,R,L,O=[],F=0;if(g){var D=l(T,"startx",0)+T.x,B=l(T,"starty",0)+T.y;E=new a({name:y.name+T.name,x:y.x+l(T,"offsetx",0)+D*v.tilewidth,y:y.y+l(T,"offsety",0)+B*v.tileheight,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:l(T,"properties",[]),orientation:o(v.orientation)}),E.orientation===h.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var N=0;N<T.height;N++){O.push([null]);for(var V=0;V<T.width;V++)O[N][V]=null}for(N=0,J=T.chunks.length;N<J;N++)for(var X=T.chunks[N],K=X.x-D,Z=X.y-B,G=0,w=0,b=X.data.length;w<b;w++){var Y=F+K,U=G+Z;M=u(X.data[w]),M.gid>0?(R=new c(E,M.gid,Y,U,v.tilewidth,v.tileheight),R.rotation=M.rotation,R.flipX=M.flipped,O[U][Y]=R):(L=p?null:new c(E,-1,Y,U,v.tilewidth,v.tileheight),O[U][Y]=L),F++,F===X.width&&(G++,F=0)}}else{E=new a({name:y.name+T.name,x:y.x+l(T,"offsetx",0)+T.x,y:y.y+l(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:l(T,"properties",[]),orientation:o(v.orientation)}),E.orientation===h.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var W=[],H=0,J=T.data.length;H<J;H++)M=u(T.data[H]),M.gid>0?(R=new c(E,M.gid,F,O.length,v.tilewidth,v.tileheight),R.rotation=M.rotation,R.flipX=M.flipped,W.push(R)):(L=p?null:new c(E,-1,F,O.length,v.tilewidth,v.tileheight),W.push(L)),F++,F===T.width&&(O.push(W),F=0,W=[])}E.data=O,m.push(E)}return m};i.exports=f},function(i,d){var e=function(n){for(var h=window.atob(n),r=h.length,o=new Array(r/4),l=0;l<r;l+=4)o[l/4]=(h.charCodeAt(l)|h.charCodeAt(l+1)<<8|h.charCodeAt(l+2)<<16|h.charCodeAt(l+3)<<24)>>>0;return o};i.exports=e},function(i,d,e){var n=e(122),h=e(576),r=e(260),o=e(1453),l=function(a){for(var u=[],c=[],f=null,v,p=0;p<a.tilesets.length;p++){var g=a.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new n(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(a.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(N){S[N.name]=N.value}),y[C.id]=S}if(C.objectgroup&&((x[C.id]||(x[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(N){return r(N)});x[C.id].objectgroup.objects=E}C.animation&&((x[C.id]||(x[C.id]={})).animation=C.animation),C.type&&((x[C.id]||(x[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},o(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(v in m.tileData){var M=m.tileData[v].objectgroup;if(M&&M.objects){var R=M.objects.map(function(N){return r(N)});m.tileData[v].objectgroup.objects=R}}}m.updateTileData(g.imagewidth,g.imageheight),u.push(m)}else{var L=new h(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),O=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var F=C.image,D=parseInt(C.id,10),B=g.firstgid+D;L.addImage(B,F),O=Math.max(D,O)}L.maxId=O,c.push(L)}f&&(f.lastgid=g.firstgid-1),f=g}return{tilesets:u,imageCollections:c}};i.exports=l},function(i,d,e){var n=e(0),h=new n({initialize:function(o,l,a,u,c,f,v){(a===void 0||a<=0)&&(a=32),(u===void 0||u<=0)&&(u=32),c===void 0&&(c=0),f===void 0&&(f=0),this.name=o,this.firstgid=l|0,this.imageWidth=a|0,this.imageHeight=u|0,this.imageMargin=c|0,this.imageSpacing=f|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},addImage:function(r,o){return this.images.push({gid:r,image:o}),this.total++,this}});i.exports=h},function(i,d,e){var n=e(40),h=e(121),r=e(578),o=e(579),l=function(a,u,c){if(u.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+a),null;for(var f=0,v=0,p=0;p<u.layer.length;p++)u.layer[p].width>f&&(f=u.layer[p].width),u.layer[p].height>v&&(v=u.layer[p].height);var g=new h({width:f,height:v,name:a,tileWidth:u.layer[0].tilesize,tileHeight:u.layer[0].tilesize,format:n.WELTMEISTER});return g.layers=r(u,c),g.tilesets=o(u),g};i.exports=l},function(i,d,e){var n=e(120),h=e(85),r=function(o,l){for(var a=[],u=0;u<o.layer.length;u++){for(var c=o.layer[u],f=new n({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),v=[],p=[],g=0;g<c.data.length;g++){for(var m=0;m<c.data[g].length;m++){var x=c.data[g][m]-1,y;x>-1?y=new h(f,x,m,g,c.tilesize,c.tilesize):y=l?null:new h(f,-1,m,g,c.tilesize,c.tilesize),v.push(y)}p.push(v),v=[]}f.data=p,a.push(f)}return a};i.exports=r},function(i,d,e){var n=e(122),h=function(r){for(var o=[],l=[],a=0;a<r.layer.length;a++){var u=r.layer[a],c=u.tilesetName;c!==""&&l.indexOf(c)===-1&&(l.push(c),o.push(new n(c,0,u.tilesize,u.tilesize,0,0)))}return o};i.exports=h},function(i,d,e){var n=e(0),h=e(36),r=e(40),o=e(2),l=e(120),a=e(29),u=e(362),c=e(74),f=e(73),v=e(85),p=e(251),g=e(581),m=e(122),x=new n({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(S),WorldToTileX:p.GetWorldToTileXFunction(S),WorldToTileY:p.GetWorldToTileYFunction(S),TileToWorldXY:p.GetTileToWorldXYFunction(S),TileToWorldX:p.GetTileToWorldXFunction(S),TileToWorldY:p.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,M,R,L){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,M,R,L)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,M,R){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var L=this.scene.sys.textures.get(T),O=this.getTilesetIndex(y);if(O===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var F=this.tilesets[O];return F?(F.setTileSize(C,S),F.setSpacing(E,M),F.setImage(L),F):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),M===void 0&&(M=0),R===void 0&&(R=0),F=new m(y,R,C,S,E,M),F.setImage(L),this.tilesets.push(F),F)},copy:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L!==null?(p.Copy(y,T,C,S,E,M,R,L),this):null},createBlankLayer:function(y,T,C,S,E,M,R,L){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),M===void 0&&(M=this.height),R===void 0&&(R=this.tileWidth),L===void 0&&(L=this.tileHeight);var O=this.getLayerIndex(y);if(O!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var F=new l({name:y,tileWidth:R,tileHeight:L,width:E,height:M,orientation:this.orientation}),D,B=0;B<M;B++){D=[];for(var N=0;N<E;N++)D.push(new v(F,-1,N,B,R,L,this.tileWidth,this.tileHeight));F.data.push(D)}this.layers.push(F),this.currentLayerIndex=this.layers.length-1;var V=new g(this.scene,this,this.currentLayerIndex,T,C,S);return V.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(V),V},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var M=this.layers[E];if(M.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=M.x),S===void 0&&(S=M.y);var R=new g(this.scene,this,E,T,C,S);return R.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(R),R},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,M=0;M<T.length;M++){for(var R=T[M],L=o(R,"id",null),O=o(R,"gid",null),F=o(R,"name",null),D,B=[],N=0;N<E.length;N++)D=E[N],(L===null&&O===null&&F===null||L!==null&&D.id===L||O!==null&&D.gid===O||F!==null&&D.name===F)&&B.push(D);for(var V=o(R,"classType",f),X=o(R,"scene",this.scene),K=o(R,"container",null),Z=o(R,"key",null),G=o(R,"frame",null),w=0;w<B.length;w++){D=B[w];var b=new V(X);b.setName(D.name),b.setPosition(D.x,D.y),b.setTexture(Z,G),D.width&&(b.displayWidth=D.width),D.height&&(b.displayHeight=D.height);var Y={x:b.originX*D.width,y:(b.originY-1)*D.height};if(D.rotation){var U=h(D.rotation);u(Y,U),b.rotation=U}if(b.x+=Y.x,b.y+=Y.y,(D.flippedHorizontal!==void 0||D.flippedVertical!==void 0)&&b.setFlip(D.flippedHorizontal,D.flippedVertical),D.visible||(b.visible=!1),Array.isArray(D.properties))D.properties.forEach(function(H){var J=H.name;b[J]!==void 0?b[J]=H.value:b.setData(J,H.value)});else for(var W in D.properties)b[W]!==void 0?b[W]=D.properties[W]:b.setData(W,D.properties[W]);K?K.add(b):X.add.existing(b),C.push(b)}}return C},createFromTiles:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.CreateFromTiles(y,T,C,S,E,M)},fill:function(y,T,C,S,E,M,R){return M===void 0&&(M=!0),R=this.getLayer(R),R===null?null:(p.Fill(y,T,C,S,E,M,R),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L===null?null:p.FilterTiles(y,T,C,S,E,M,R,L)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L===null?null:p.FindTile(y,T,C,S,E,M,R,L)},forEachTile:function(y,T,C,S,E,M,R,L){return L=this.getLayer(L),L===null?null:(p.ForEachTile(y,T,C,S,E,M,R,L),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithin(y,T,C,S,E,M)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:p.GetTilesWithinWorldXY(y,T,C,S,E,M,R)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:p.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,M){return S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.PutTileAtWorldXY(y,T,C,S,E,M)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.Randomize(y,T,C,S,E,M),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(p.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){c(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),c(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var M=y[E];S.push(this.removeTileAt(M.x,M.y,!0,C,M.tilemapLayer)),T>-1&&this.putTileAt(T,M.x,M.y,C,M.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,M){return C===void 0&&(C=!0),S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:p.RemoveTileAtWorldXY(y,T,C,S,E,M)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===a.ORTHOGONAL&&p.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)p.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:(p.ReplaceByIndex(y,T,C,S,E,M,R),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(p.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(p.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:(p.SetTileLocationCallback(y,T,C,S,E,M,R),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,M=this.layers[C].height,R=0;R<M;R++)for(var L=0;L<E;L++){var O=S[R][L];O!==null&&O.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,M=C.height,R=0;R<M;R++)for(var L=0;L<E;L++){var O=S[R][L];O!==null&&O.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,M,R){return R=this.getLayer(R),R===null?null:(p.SwapByIndex(y,T,C,S,E,M,R),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:(p.WeightedRandomize(T,C,S,E,y,M),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileXY(y,T,C,S,E,M)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});i.exports=x},function(i,d,e){var n=e(0),h=e(11),r=e(15),o=e(251),l=e(1456),a=new n({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Origin,h.Pipeline,h.Transform,h.Visible,h.ScrollFactor,l],initialize:function(c,f,v,p,g,m){r.call(this,c,"TilemapLayer"),this.isTilemap=!0,this.tilemap=f,this.layerIndex=v,this.layer=f.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(f.tileWidth*this.layer.width,f.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(u){var c=[],f=[],v=this.tilemap;Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++){var g=u[p];if(typeof g=="string"&&(g=v.getTileset(g)),g){f.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)c[m+x]=g}}this.gidMap=c,this.tileset=f},setRenderOrder:function(u){var c=["right-down","left-down","right-up","left-up"];return typeof u=="string"&&(u=c.indexOf(u)),u>=0&&u<4&&(this._renderOrder=u),this},calculateFacesAt:function(u,c){return o.CalculateFacesAt(u,c,this.layer),this},calculateFacesWithin:function(u,c,f,v){return o.CalculateFacesWithin(u,c,f,v,this.layer),this},createFromTiles:function(u,c,f,v,p){return o.CreateFromTiles(u,c,f,v,p,this.layer)},cull:function(u){return this.cullCallback(this.layer,u,this.culledTiles,this._renderOrder)},copy:function(u,c,f,v,p,g,m){return o.Copy(u,c,f,v,p,g,m,this.layer),this},fill:function(u,c,f,v,p,g){return o.Fill(u,c,f,v,p,g,this.layer),this},filterTiles:function(u,c,f,v,p,g,m){return o.FilterTiles(u,c,f,v,p,g,m,this.layer)},findByIndex:function(u,c,f){return o.FindByIndex(u,c,f,this.layer)},findTile:function(u,c,f,v,p,g,m){return o.FindTile(u,c,f,v,p,g,m,this.layer)},forEachTile:function(u,c,f,v,p,g,m){return o.ForEachTile(u,c,f,v,p,g,m,this.layer),this},getTileAt:function(u,c,f){return o.GetTileAt(u,c,f,this.layer)},getTileAtWorldXY:function(u,c,f,v){return o.GetTileAtWorldXY(u,c,f,v,this.layer)},getTilesWithin:function(u,c,f,v,p){return o.GetTilesWithin(u,c,f,v,p,this.layer)},getTilesWithinShape:function(u,c,f){return o.GetTilesWithinShape(u,c,f,this.layer)},getTilesWithinWorldXY:function(u,c,f,v,p,g){return o.GetTilesWithinWorldXY(u,c,f,v,p,g,this.layer)},hasTileAt:function(u,c){return o.HasTileAt(u,c,this.layer)},hasTileAtWorldXY:function(u,c,f){return o.HasTileAtWorldXY(u,c,f,this.layer)},putTileAt:function(u,c,f,v){return o.PutTileAt(u,c,f,v,this.layer)},putTileAtWorldXY:function(u,c,f,v,p){return o.PutTileAtWorldXY(u,c,f,v,p,this.layer)},putTilesAt:function(u,c,f,v){return o.PutTilesAt(u,c,f,v,this.layer),this},randomize:function(u,c,f,v,p){return o.Randomize(u,c,f,v,p,this.layer),this},removeTileAt:function(u,c,f,v){return o.RemoveTileAt(u,c,f,v,this.layer)},removeTileAtWorldXY:function(u,c,f,v,p){return o.RemoveTileAtWorldXY(u,c,f,v,p,this.layer)},renderDebug:function(u,c){return o.RenderDebug(u,c,this.layer),this},replaceByIndex:function(u,c,f,v,p,g){return o.ReplaceByIndex(u,c,f,v,p,g,this.layer),this},setSkipCull:function(u){return u===void 0&&(u=!0),this.skipCull=u,this},setCullPadding:function(u,c){return u===void 0&&(u=1),c===void 0&&(c=1),this.cullPaddingX=u,this.cullPaddingY=c,this},setCollision:function(u,c,f,v){return o.SetCollision(u,c,f,this.layer,v),this},setCollisionBetween:function(u,c,f,v){return o.SetCollisionBetween(u,c,f,v,this.layer),this},setCollisionByProperty:function(u,c,f){return o.SetCollisionByProperty(u,c,f,this.layer),this},setCollisionByExclusion:function(u,c,f){return o.SetCollisionByExclusion(u,c,f,this.layer),this},setCollisionFromCollisionGroup:function(u,c){return o.SetCollisionFromCollisionGroup(u,c,this.layer),this},setTileIndexCallback:function(u,c,f){return o.SetTileIndexCallback(u,c,f,this.layer),this},setTileLocationCallback:function(u,c,f,v,p,g){return o.SetTileLocationCallback(u,c,f,v,p,g,this.layer),this},shuffle:function(u,c,f,v){return o.Shuffle(u,c,f,v,this.layer),this},swapByIndex:function(u,c,f,v,p,g){return o.SwapByIndex(u,c,f,v,p,g,this.layer),this},tileToWorldX:function(u,c){return this.tilemap.tileToWorldX(u,c,this)},tileToWorldY:function(u,c){return this.tilemap.tileToWorldY(u,c,this)},tileToWorldXY:function(u,c,f,v){return this.tilemap.tileToWorldXY(u,c,f,v,this)},weightedRandomize:function(u,c,f,v,p){return o.WeightedRandomize(c,f,v,p,u,this.layer),this},worldToTileX:function(u,c,f){return this.tilemap.worldToTileX(u,c,f,this)},worldToTileY:function(u,c,f){return this.tilemap.worldToTileY(u,c,f,this)},worldToTileXY:function(u,c,f,v,p){return this.tilemap.worldToTileXY(u,c,f,v,p,this)},destroy:function(u){u===void 0&&(u=!0),!!this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),u&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});i.exports=a},function(i,d,e){var n=e(0),h=e(2),r=new n({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(o){return this.delay=h(o,"delay",0),this.repeat=h(o,"repeat",0),this.loop=h(o,"loop",!1),this.callback=h(o,"callback",void 0),this.callbackScope=h(o,"callbackScope",this.callback),this.args=h(o,"args",[]),this.timeScale=h(o,"timeScale",1),this.startAt=h(o,"startAt",0),this.paused=h(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,l=this.elapsed+this.delay*(this.repeat-this.repeatCount);return l/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});i.exports=r},function(i,d,e){var n=e(1465),h=function(r){var o,l=[];if(r.hasOwnProperty("props"))for(o in r.props)o.substr(0,1)!=="_"&&l.push({key:o,value:r.props[o]});else for(o in r)n.indexOf(o)===-1&&o.substr(0,1)!=="_"&&l.push({key:o,value:r[o]});return l};i.exports=h},function(i,d,e){var n=e(6),h=function(r){var o=n(r,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};i.exports=h},function(i,d,e){var n=e(265),h=e(13),r=e(99),o=e(80),l=e(162),a=e(6),u=e(264),c=e(266),f=e(268),v=function(p,g,m){m===void 0&&(m=n);var x=a(g,"from",0),y=a(g,"to",1),T=[{value:x}],C=l(g,"delay",m.delay),S=l(g,"duration",m.duration),E=a(g,"easeParams",m.easeParams),M=o(a(g,"ease",m.ease),E),R=l(g,"hold",m.hold),L=l(g,"repeat",m.repeat),O=l(g,"repeatDelay",m.repeatDelay),F=r(g,"yoyo",m.yoyo),D=[],B=u("value",y),N=f(T[0],0,"value",B.getEnd,B.getStart,B.getActive,M,C,S,F,R,L,O,!1,!1);N.start=x,N.current=x,N.to=y,D.push(N);var V=new c(p,D,T);V.offset=h(g,"offset",null),V.completeDelay=h(g,"completeDelay",0),V.loop=Math.round(h(g,"loop",0)),V.loopDelay=Math.round(h(g,"loopDelay",0)),V.paused=r(g,"paused",!1),V.useFrames=r(g,"useFrames",!1);for(var X=a(g,"callbackScope",V),K=[V,null],Z=c.TYPES,G=0;G<Z.length;G++){var w=Z[G],b=a(g,w,!1);if(b){var Y=a(g,w+"Scope",X),U=a(g,w+"Params",[]);V.setCallback(w,b,K.concat(U),Y)}}return V};i.exports=v},function(i,d,e){var n=e(80),h=e(6),r=e(14),o=function(l,a){a===void 0&&(a={});var u,c=h(a,"start",0),f=h(a,"ease",null),v=h(a,"grid",null),p=h(a,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(l),C=parseFloat(T?l[0]:l),S=T?parseFloat(l[1]):0,E=Math.max(C,S);if(T&&(c+=C),v){var M=v[0],R=v[1],L=0,O=0,F=0,D=0,B=[];x?(L=M-1,O=R-1):y?(L=p%M,O=Math.floor(p/M)):m&&(L=(M-1)/2,O=(R-1)/2);for(var N=r.MIN_SAFE_INTEGER,V=0;V<R;V++){B[V]=[];for(var X=0;X<M;X++){F=L-X,D=O-V;var K=Math.sqrt(F*F+D*D);K>N&&(N=K),B[V][X]=K}}}var Z=f?n(f):null;return v?u=function(G,w,b,Y){var U=0,W=Y%M,H=Math.floor(Y/M);W>=0&&W<M&&H>=0&&H<R&&(U=B[H][W]);var J;if(T){var q=S-C;Z?J=U/N*q*Z(U/N):J=U/N*q}else Z?J=U*C*Z(U/N):J=U*C;return J+c}:u=function(G,w,b,Y,U){U--;var W;g?W=Y:m?W=Math.abs(U/2-Y):x?W=U-Y:y&&(W=Math.abs(p-Y));var H;if(T){var J;m?J=(S-C)/U*(W*2):J=(S-C)/U*W,Z?H=J*Z(W/U):H=J}else Z?H=U*E*Z(W/U):H=W*C;return H+c},u};i.exports=o},function(i,d,e){var n=e(77),h=e(265),r=e(13),o=e(99),l=e(80),a=e(162),u=e(263),c=e(584),f=e(6),v=e(588),p=e(163),g=function(m,x){var y=new v(m);y.completeDelay=r(x,"completeDelay",0),y.loop=Math.round(r(x,"loop",0)),y.loopDelay=Math.round(r(x,"loopDelay",0)),y.paused=o(x,"paused",!1),y.useFrames=o(x,"useFrames",!1);var T=f(x,"callbackScope",y),C=[y],S=f(x,"onStart",!1);if(S){var E=f(x,"onStartScope",T),M=f(x,"onStartParams",[]);y.setCallback("onStart",S,C.concat(M),E)}var R=f(x,"onUpdate",!1);if(R){var L=f(x,"onUpdateScope",T),O=f(x,"onUpdateParams",[]);y.setCallback("onUpdate",R,C.concat(O),L)}var F=f(x,"onLoop",!1);if(F){var D=f(x,"onLoopScope",T),B=f(x,"onLoopParams",[]);y.setCallback("onLoop",F,C.concat(B),D)}var N=f(x,"onYoyo",!1);if(N){var V=f(x,"onYoyoScope",T),X=f(x,"onYoyoParams",[]);y.setCallback("onYoyo",N,C.concat(null,X),V)}var K=f(x,"onComplete",!1);if(K){var Z=f(x,"onCompleteScope",T),G=f(x,"onCompleteParams",[]);y.setCallback("onComplete",K,C.concat(G),Z)}var w=c(x);if(w.length===0)return y.paused=!0,y;var b=n(h);b.targets=u(x);var Y=r(x,"totalDuration",0);Y>0?b.duration=Math.floor(Y/w.length):b.duration=a(x,"duration",b.duration),b.delay=a(x,"delay",b.delay),b.easeParams=f(x,"easeParams",b.easeParams),b.ease=l(f(x,"ease",b.ease),b.easeParams),b.hold=a(x,"hold",b.hold),b.repeat=a(x,"repeat",b.repeat),b.repeatDelay=a(x,"repeatDelay",b.repeatDelay),b.yoyo=o(x,"yoyo",b.yoyo),b.flipX=o(x,"flipX",b.flipX),b.flipY=o(x,"flipY",b.flipY);for(var U=0;U<w.length;U++)y.queue(p(y,w[U],b));return y};i.exports=g},function(i,d,e){var n=e(0),h=e(9),r=e(267),o=e(163),l=e(100),a=new n({Extends:h,initialize:function(c){h.call(this),this.manager=c,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING_ADD,this._pausedState=l.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(u,c){this.emit(u,this),c&&c.func.apply(c.scope,c.params)},setTimeScale:function(u){return this.timeScale=u,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},add:function(u){return this.queue(o(this,u))},queue:function(u){return this.isPlaying()||(u.parent=this,u.parentIsTimeline=!0,this.data.push(u),this.totalData=this.data.length),this},hasOffset:function(u){return u.offset!==null},isOffsetAbsolute:function(u){return typeof u=="number"},isOffsetRelative:function(u){var c=typeof u;if(c==="string"){var f=u[0];if(f==="-"||f==="+")return!0}return!1},getRelativeOffset:function(u,c){var f=u[0],v=parseFloat(u.substr(2)),p=c;switch(f){case"+":p+=v;break;case"-":p-=v;break}return Math.max(0,p)},calcDuration:function(){for(var u=0,c=0,f=0,v=0;v<this.totalData;v++){var p=this.data[v];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(f=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,u)):p.calculatedOffset=f,u=p.totalDuration+p.calculatedOffset,c+=p.totalDuration,f+=p.totalDuration}this.duration=c,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=l.PAUSED,!1):!0},resetTweens:function(u){for(var c=0;c<this.totalData;c++){var f=this.data[c];f.play(u)}},setCallback:function(u,c,f,v){return a.TYPES.indexOf(u)!==-1&&(this.callbacks[u]={func:c,scope:v,params:f}),this},makeActive:function(u){return this.manager.makeActive(u)},play:function(){if(this.state!==l.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=l.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(u,c){if(this.state!==l.PAUSED){switch(this.useFrames&&(c=1*this.manager.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:for(var f=this.totalData,v=0;v<this.totalData;v++){var p=this.data[v];p.update(u,c)&&f--}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),f===0&&this.nextState();break;case l.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case l.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===l.PENDING_REMOVE}},stop:function(){this.state=l.PENDING_REMOVE},pause:function(){if(this.state!==l.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===l.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(u){for(var c=0;c<this.data.length;c++)if(this.data[c].hasTarget(u))return!0;return!1},destroy:function(){for(var u=0;u<this.data.length;u++)this.data[u].stop()}});a.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],i.exports=a},function(i,d,e){var n=e(86),h=e(41),r=e(32),o=e(2),l=e(64),a={parseBody:function(u,c,f,v){v===void 0&&(v={});for(var p=o(f,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=r.clone(f,!0);r.extend(T,v,!0),delete T.fixtures,delete T.type;var C=h.create(T);return h.setParts(C,g),h.setPosition(C,{x:u,y:c}),C},parseFixture:function(u){var c=r.extend({},!1,u);delete c.circle,delete c.vertices;var f;if(u.circle){var v=o(u.circle,"x"),p=o(u.circle,"y"),g=o(u.circle,"radius");f=[n.circle(v,p,g,c)]}else u.vertices&&(f=this.parseVertices(u.vertices,c));return f},parseVertices:function(u,c){c===void 0&&(c={});for(var f=[],v=0;v<u.length;v++)l.clockwiseSort(u[v]),f.push(h.create(r.extend({position:l.centre(u[v]),vertices:u[v]},c)));return n.flagCoincidentParts(f)}};i.exports=a},function(i,d,e){var n=e(86),h=e(41),r={parseBody:function(o,l,a,u){u===void 0&&(u={});var c,f=a.vertices;if(f.length===1)u.vertices=f[0],c=h.create(u),n.flagCoincidentParts(c.parts);else{for(var v=[],p=0;p<f.length;p++){var g=h.create({vertices:f[p]});v.push(g)}n.flagCoincidentParts(v),u.parts=v,c=h.create(u)}return c.label=a.label,h.setPosition(c,{x:o,y:l}),c}};i.exports=r},function(i,d,e){var n={};i.exports=n;var h=e(118),r=e(128),o=e(32),l=e(41),a=e(86);(function(){n.stack=function(u,c,f,v,p,g,m){for(var x=h.create({label:"Stack"}),y=u,T=c,C,S=0,E=0;E<v;E++){for(var M=0,R=0;R<f;R++){var L=m(y,T,R,E,C,S);if(L){var O=L.bounds.max.y-L.bounds.min.y,F=L.bounds.max.x-L.bounds.min.x;O>M&&(M=O),l.translate(L,{x:F*.5,y:O*.5}),y=L.bounds.max.x+p,h.addBody(x,L),C=L,S+=1}else y+=p}T+=M+g,y=u}return x},n.chain=function(u,c,f,v,p,g){for(var m=u.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,M=T.bounds.max.x-T.bounds.min.x,R={bodyA:y,pointA:{x:S*c,y:C*f},bodyB:T,pointB:{x:M*v,y:E*p}},L=o.extend(R,g);h.addConstraint(u,r.create(L))}return u.label+=" Chain",u},n.mesh=function(u,c,f,v,p){var g=u.bodies,m,x,y,T,C;for(m=0;m<f;m++){for(x=1;x<c;x++)y=g[x-1+m*c],T=g[x+m*c],h.addConstraint(u,r.create(o.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<c;x++)y=g[x+(m-1)*c],T=g[x+m*c],h.addConstraint(u,r.create(o.extend({bodyA:y,bodyB:T},p))),v&&x>0&&(C=g[x-1+(m-1)*c],h.addConstraint(u,r.create(o.extend({bodyA:C,bodyB:T},p)))),v&&x<c-1&&(C=g[x+1+(m-1)*c],h.addConstraint(u,r.create(o.extend({bodyA:C,bodyB:T},p))))}return u.label+=" Mesh",u},n.pyramid=function(u,c,f,v,p,g,m){return n.stack(u,c,f,v,p,g,function(x,y,T,C,S,E){var M=Math.min(v,Math.ceil(f/2)),R=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>M)){C=M-C;var L=C,O=f-1-C;if(!(T<L||T>O)){E===1&&l.translate(S,{x:(T+(f%2==1?1:-1))*R,y:0});var F=S?T*R:0;return m(u+F+T*p,y,T,C,S,E)}}})},n.newtonsCradle=function(u,c,f,v,p){for(var g=h.create({label:"Newtons Cradle"}),m=0;m<f;m++){var x=1.9,y=a.circle(u+m*(v*x),c+p,v,{inertia:Infinity,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=r.create({pointA:{x:u+m*(v*x),y:c},bodyB:y});h.addBody(g,y),h.addConstraint(g,T)}return g},n.car=function(u,c,f,v,p){var g=l.nextGroup(!0),m=20,x=-f*.5+m,y=f*.5-m,T=0,C=h.create({label:"Car"}),S=a.rectangle(u,c,f,v,{collisionFilter:{group:g},chamfer:{radius:v*.5},density:2e-4}),E=a.circle(u+x,c+T,p,{collisionFilter:{group:g},friction:.8}),M=a.circle(u+y,c+T,p,{collisionFilter:{group:g},friction:.8}),R=r.create({bodyB:S,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),L=r.create({bodyB:S,pointB:{x:y,y:T},bodyA:M,stiffness:1,length:0});return h.addBody(C,S),h.addBody(C,E),h.addBody(C,M),h.addConstraint(C,R),h.addConstraint(C,L),C},n.softBody=function(u,c,f,v,p,g,m,x,y,T){y=o.extend({inertia:Infinity},y),T=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=n.stack(u,c,f,v,p,g,function(S,E){return a.circle(S,E,x,y)});return n.mesh(C,f,v,m,T),C.label="Soft Body",C}})()},function(i,d,e){var n={};i.exports=n;var h=e(84),r=e(32);(function(){n.pathToVertices=function(o,l){typeof window!="undefined"&&!("SVGPathSeg"in window)&&r.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,u,c,f,v,p,g,m,x,y,T=[],C,S,E=0,M=0,R=0;l=l||15;var L=function(F,D,B){var N=B%2==1&&B>1;if(!x||F!=x.x||D!=x.y){x&&N?(C=x.x,S=x.y):(C=0,S=0);var V={x:C+F,y:S+D};(N||!x)&&(x=V),T.push(V),M=C+F,R=S+D}},O=function(F){var D=F.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":M=F.x,R=F.y;break;case"H":M=F.x;break;case"V":R=F.y;break}L(M,R,F.pathSegType)}};for(n._svgPathToAbsolute(o),c=o.getTotalLength(),p=[],a=0;a<o.pathSegList.numberOfItems;a+=1)p.push(o.pathSegList.getItem(a));for(g=p.concat();E<c;){if(y=o.getPathSegAtLength(E),v=p[y],v!=m){for(;g.length&&g[0]!=v;)O(g.shift());m=v}switch(v.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=o.getPointAtLength(E),L(f.x,f.y,0);break}E+=l}for(a=0,u=g.length;a<u;++a)O(g[a]);return T},n._svgPathToAbsolute=function(o){for(var l,a,u,c,f,v,p=o.pathSegList,g=0,m=0,x=p.numberOfItems,y=0;y<x;++y){var T=p.getItem(y),C=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in T&&(g=T.x),"y"in T&&(m=T.y);else switch("x1"in T&&(u=g+T.x1),"x2"in T&&(f=g+T.x2),"y1"in T&&(c=m+T.y1),"y2"in T&&(v=m+T.y2),"x"in T&&(g+=T.x),"y"in T&&(m+=T.y),C){case"m":p.replaceItem(o.createSVGPathSegMovetoAbs(g,m),y);break;case"l":p.replaceItem(o.createSVGPathSegLinetoAbs(g,m),y);break;case"h":p.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(g),y);break;case"v":p.replaceItem(o.createSVGPathSegLinetoVerticalAbs(m),y);break;case"c":p.replaceItem(o.createSVGPathSegCurvetoCubicAbs(g,m,u,c,f,v),y);break;case"s":p.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(g,m,f,v),y);break;case"q":p.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(g,m,u,c),y);break;case"t":p.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(g,m),y);break;case"a":p.replaceItem(o.createSVGPathSegArcAbs(g,m,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),y);break;case"z":case"Z":g=l,m=a;break}(C=="M"||C=="m")&&(l=g,a=m)}}})()},function(i,d,e){var n=e(86),h=e(41),r=e(0),o=e(249),l=e(9),a=e(2),u=e(126),c=e(64),f=new r({Extends:l,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(p,g,m){l.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=a(m,"body",null),y=a(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),C=a(T,"objects",[]);C.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(v){v===void 0&&(v={}),u(v,"isStatic")||(v.isStatic=!0),u(v,"addToWorld")||(v.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=n.rectangle(g,m,p.width,p.height,v);return this.setBody(x,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),u(v,"isStatic")||(v.isStatic=!0),u(v,"addToWorld")||(v.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=a(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],M=m+E.x*p,R=x+E.y*g,L=E.width*p,O=E.height*g,F=null;if(E.rectangle)F=n.rectangle(M+L/2,R+O/2,L,O,v);else if(E.ellipse)F=n.circle(M+L/2,R+O/2,L/2,v);else if(E.polygon||E.polyline){var D=E.polygon?E.polygon:E.polyline,B=D.map(function(X){return{x:X.x*p,y:X.y*g}}),N=c.create(B),V=c.centre(N);M+=V.x,R+=V.y,F=n.fromVertices(M,R,N,v)}F&&C.push(F)}return C.length===1?this.setBody(C[0],v.addToWorld):C.length>1&&(v.parts=C,this.setBody(h.create(v),v.addToWorld)),this},setBody:function(v,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});i.exports=f},function(i,d,e){var n=e(1399);n.Body=e(41),n.Composite=e(118),n.World=e(596),n.Detector=e(273),n.Grid=e(597),n.Pairs=e(598),n.Pair=e(250),n.Query=e(1400),n.Resolver=e(599),n.SAT=e(274),n.Constraint=e(128),n.Common=e(32),n.Engine=e(1401),n.Events=e(166),n.Sleeping=e(165),n.Plugin=e(595),n.Bodies=e(86),n.Composites=e(591),n.Axes=e(271),n.Bounds=e(84),n.Svg=e(592),n.Vector=e(83),n.Vertices=e(64),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,i.exports=n},function(i,d,e){var n={};i.exports=n;var h=e(32);(function(){n._registry={},n.register=function(r){if(n.isPlugin(r)||h.warn("Plugin.register:",n.toString(r),"does not implement all required fields."),r.name in n._registry){var o=n._registry[r.name],l=n.versionParse(r.version).number,a=n.versionParse(o.version).number;l>a?(h.warn("Plugin.register:",n.toString(o),"was upgraded to",n.toString(r)),n._registry[r.name]=r):l<a?h.warn("Plugin.register:",n.toString(o),"can not be downgraded to",n.toString(r)):r!==o&&h.warn("Plugin.register:",n.toString(r),"is already registered to different plugin object")}else n._registry[r.name]=r;return r},n.resolve=function(r){return n._registry[n.dependencyParse(r).name]},n.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},n.isPlugin=function(r){return r&&r.name&&r.version&&r.install},n.isUsed=function(r,o){return r.used.indexOf(o)>-1},n.isFor=function(r,o){var l=r.for&&n.dependencyParse(r.for);return!r.for||o.name===l.name&&n.versionSatisfies(o.version,l.range)},n.use=function(r,o){if(r.uses=(r.uses||[]).concat(o||[]),r.uses.length===0){h.warn("Plugin.use:",n.toString(r),"does not specify any dependencies to install.");return}for(var l=n.dependencies(r),a=h.topologicalSort(l),u=[],c=0;c<a.length;c+=1)if(a[c]!==r.name){var f=n.resolve(a[c]);if(!f){u.push(" "+a[c]);continue}n.isUsed(r,f.name)||(n.isFor(f,r)||(h.warn("Plugin.use:",n.toString(f),"is for",f.for,"but installed on",n.toString(r)+"."),f._warned=!0),f.install?f.install(r):(h.warn("Plugin.use:",n.toString(f),"does not specify an install function."),f._warned=!0),f._warned?(u.push(" "+n.toString(f)),delete f._warned):u.push(" "+n.toString(f)),r.used.push(f.name))}u.length>0&&!f.silent&&h.info(u.join("  "))},n.dependencies=function(r,o){var l=n.dependencyParse(r),a=l.name;if(o=o||{},!(a in o)){r=n.resolve(r)||r,o[a]=h.map(r.uses||[],function(c){n.isPlugin(c)&&n.register(c);var f=n.dependencyParse(c),v=n.resolve(c);return v&&!n.versionSatisfies(v.version,f.range)?(h.warn("Plugin.dependencies:",n.toString(v),"does not satisfy",n.toString(f),"used by",n.toString(l)+"."),v._warned=!0,r._warned=!0):v||(h.warn("Plugin.dependencies:",n.toString(c),"used by",n.toString(l),"could not be resolved."),r._warned=!0),f.name});for(var u=0;u<o[a].length;u+=1)n.dependencies(o[a][u],o);return o}},n.dependencyParse=function(r){if(h.isString(r)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(r)||h.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},n.versionParse=function(r){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(r)||h.warn("Plugin.versionParse:",r,"is not a valid version or range.");var l=r.split("-");r=l[0];var a=isNaN(Number(r[0])),u=a?r.substr(1):r,c=h.map(u.split("."),function(f){return Number(f)});return{isRange:a,version:u,range:r,operator:a?r[0]:"",parts:c,prerelease:l[1],number:c[0]*1e8+c[1]*1e4+c[2]}},n.versionSatisfies=function(r,o){o=o||"*";var l=n.versionParse(o),a=l.parts,u=n.versionParse(r),c=u.parts;if(l.isRange){if(l.operator==="*"||r==="*")return!0;if(l.operator==="~")return c[0]===a[0]&&c[1]===a[1]&&c[2]>=a[2];if(l.operator==="^")return a[0]>0?c[0]===a[0]&&u.number>=l.number:a[1]>0?c[1]===a[1]&&c[2]>=a[2]:c[2]===a[2]}return r===o||r==="*"}})()},function(i,d,e){var n={};i.exports=n;var h=e(118),r=e(128),o=e(32);(function(){n.create=function(l){var a=h.create(),u={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}}};return o.extend(a,u,l)}})()},function(i,d,e){var n={};i.exports=n;var h=e(250),r=e(273),o=e(32);(function(){n.create=function(l){var a={controller:n,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(a,l)},n.update=function(l,a,u,c){var f,v,p,g=u.world,m=l.buckets,x,y,T=!1,C=u.metrics;for(C.broadphaseTests=0,f=0;f<a.length;f++){var S=a[f];if(!(S.isSleeping&&!c)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=n._getRegion(l,S);if(!S.region||E.id!==S.region.id||c){C.broadphaseTests+=1,(!S.region||c)&&(S.region=E);var M=n._regionUnion(E,S.region);for(v=M.startCol;v<=M.endCol;v++)for(p=M.startRow;p<=M.endRow;p++){y=n._getBucketId(v,p),x=m[y];var R=v>=E.startCol&&v<=E.endCol&&p>=E.startRow&&p<=E.endRow,L=v>=S.region.startCol&&v<=S.region.endCol&&p>=S.region.startRow&&p<=S.region.endRow;!R&&L&&L&&x&&n._bucketRemoveBody(l,x,S),(S.region===E||R&&!L||c)&&(x||(x=n._createBucket(m,y)),n._bucketAddBody(l,x,S))}S.region=E,T=!0}}}T&&(l.pairsList=n._createActivePairsList(l))},n.clear=function(l){l.buckets={},l.pairs={},l.pairsList=[]},n._regionUnion=function(l,a){var u=Math.min(l.startCol,a.startCol),c=Math.max(l.endCol,a.endCol),f=Math.min(l.startRow,a.startRow),v=Math.max(l.endRow,a.endRow);return n._createRegion(u,c,f,v)},n._getRegion=function(l,a){var u=a.bounds,c=Math.floor(u.min.x/l.bucketWidth),f=Math.floor(u.max.x/l.bucketWidth),v=Math.floor(u.min.y/l.bucketHeight),p=Math.floor(u.max.y/l.bucketHeight);return n._createRegion(c,f,v,p)},n._createRegion=function(l,a,u,c){return{id:l+","+a+","+u+","+c,startCol:l,endCol:a,startRow:u,endRow:c}},n._getBucketId=function(l,a){return"C"+l+"R"+a},n._createBucket=function(l,a){var u=l[a]=[];return u},n._bucketAddBody=function(l,a,u){for(var c=0;c<a.length;c++){var f=a[c];if(!(u.id===f.id||u.isStatic&&f.isStatic)){var v=h.id(u,f),p=l.pairs[v];p?p[2]+=1:l.pairs[v]=[u,f,1]}}a.push(u)},n._bucketRemoveBody=function(l,a,u){a.splice(a.indexOf(u),1);for(var c=0;c<a.length;c++){var f=a[c],v=h.id(u,f),p=l.pairs[v];p&&(p[2]-=1)}},n._createActivePairsList=function(l){var a,u,c=[];a=o.keys(l.pairs);for(var f=0;f<a.length;f++)u=l.pairs[a[f]],u[2]>0?c.push(u):delete l.pairs[a[f]];return c}})()},function(i,d,e){var n={};i.exports=n;var h=e(250),r=e(32);(function(){n._pairMaxIdleLife=1e3,n.create=function(o){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},n.update=function(o,l,a){var u=o.list,c=o.table,f=o.collisionStart,v=o.collisionEnd,p=o.collisionActive,g,m,x,y;for(f.length=0,v.length=0,p.length=0,y=0;y<u.length;y++)u[y].confirmedActive=!1;for(y=0;y<l.length;y++)g=l[y],g.collided&&(m=h.id(g.bodyA,g.bodyB),x=c[m],x?(x.isActive?p.push(x):f.push(x),h.update(x,g,a),x.confirmedActive=!0):(x=h.create(g,a),c[m]=x,f.push(x),u.push(x)));for(y=0;y<u.length;y++)x=u[y],x.isActive&&!x.confirmedActive&&(h.setActive(x,!1,a),v.push(x))},n.removeOld=function(o,l){var a=o.list,u=o.table,c=[],f,v,p,g;for(g=0;g<a.length;g++){if(f=a[g],v=f.collision,v.bodyA.isSleeping||v.bodyB.isSleeping){f.timeUpdated=l;continue}l-f.timeUpdated>n._pairMaxIdleLife&&c.push(g)}for(g=0;g<c.length;g++)p=c[g]-g,f=a[p],delete u[f.id],a.splice(p,1)},n.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(i,d,e){var n={};i.exports=n;var h=e(64),r=e(83),o=e(32),l=e(84);(function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(a){var u,c,f;for(u=0;u<a.length;u++)c=a[u],!!c.isActive&&(f=c.activeContacts.length,c.collision.parentA.totalContacts+=f,c.collision.parentB.totalContacts+=f)},n.solvePosition=function(a,u,c){var f,v,p,g,m,x,y,T,C,S,E,M,R,L,O,F,D=c*n._positionDampen;for(f=0;f<u.length;f++){var B=u[f];B.previousPositionImpulse.x=B.positionImpulse.x,B.previousPositionImpulse.y=B.positionImpulse.y}for(f=0;f<a.length;f++)g=a[f],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,M=y.previousPositionImpulse,S=m.penetration,L=M.x-E.x+S.x,O=M.y-E.y+S.y,v=T.x,p=T.y,C=v*L+p*O,g.separation=C,F=(C-g.slop)*D,(x.isStatic||y.isStatic)&&(F*=2),x.isStatic||x.isSleeping||(R=F/x.totalContacts,x.positionImpulse.x+=v*R,x.positionImpulse.y+=p*R),y.isStatic||y.isSleeping||(R=F/y.totalContacts,y.positionImpulse.x-=v*R,y.positionImpulse.y-=p*R))},n.postSolvePosition=function(a){for(var u=0;u<a.length;u++){var c=a[u];if(c.totalContacts=0,c.positionImpulse.x!==0||c.positionImpulse.y!==0){for(var f=0;f<c.parts.length;f++){var v=c.parts[f];h.translate(v.vertices,c.positionImpulse),l.update(v.bounds,v.vertices,c.velocity),v.position.x+=c.positionImpulse.x,v.position.y+=c.positionImpulse.y}c.positionPrev.x+=c.positionImpulse.x,c.positionPrev.y+=c.positionImpulse.y,r.dot(c.positionImpulse,c.velocity)<0?(c.positionImpulse.x=0,c.positionImpulse.y=0):(c.positionImpulse.x*=n._positionWarming,c.positionImpulse.y*=n._positionWarming)}}},n.preSolveVelocity=function(a){var u,c,f,v,p,g,m,x,y,T,C,S,E,M,R=r._temp[0],L=r._temp[1];for(u=0;u<a.length;u++)if(f=a[u],!(!f.isActive||f.isSensor))for(v=f.activeContacts,p=f.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,c=0;c<v.length;c++)T=v[c],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(R.x=x.x*S+y.x*E,R.y=x.y*S+y.y*E,g.isStatic||g.isSleeping||(M=r.sub(C,g.position,L),g.positionPrev.x+=R.x*g.inverseMass,g.positionPrev.y+=R.y*g.inverseMass,g.anglePrev+=r.cross(M,R)*g.inverseInertia),m.isStatic||m.isSleeping||(M=r.sub(C,m.position,L),m.positionPrev.x-=R.x*m.inverseMass,m.positionPrev.y-=R.y*m.inverseMass,m.anglePrev-=r.cross(M,R)*m.inverseInertia))},n.solveVelocity=function(a,u){for(var c=u*u,f=r._temp[0],v=r._temp[1],p=r._temp[2],g=r._temp[3],m=r._temp[4],x=r._temp[5],y=0;y<a.length;y++){var T=a[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,M=C.normal,R=C.tangent,L=T.activeContacts,O=1/L.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var F=0;F<L.length;F++){var D=L[F],B=D.vertex,N=r.sub(B,S.position,v),V=r.sub(B,E.position,p),X=r.add(S.velocity,r.mult(r.perp(N),S.angularVelocity),g),K=r.add(E.velocity,r.mult(r.perp(V),E.angularVelocity),m),Z=r.sub(X,K,x),G=r.dot(M,Z),w=r.dot(R,Z),b=Math.abs(w),Y=o.sign(w),U=(1+T.restitution)*G,W=o.clamp(T.separation+G,0,1)*n._frictionNormalMultiplier,H=w,J=Infinity;b>T.friction*T.frictionStatic*W*c&&(J=b,H=o.clamp(T.friction*Y*c,-J,J));var q=r.cross(N,M),_=r.cross(V,M),nt=O/(S.inverseMass+E.inverseMass+S.inverseInertia*q*q+E.inverseInertia*_*_);if(U*=nt,H*=nt,G<0&&G*G>n._restingThresh*c)D.normalImpulse=0;else{var rt=D.normalImpulse;D.normalImpulse=Math.min(D.normalImpulse+U,0),U=D.normalImpulse-rt}if(w*w>n._restingThreshTangent*c)D.tangentImpulse=0;else{var at=D.tangentImpulse;D.tangentImpulse=o.clamp(D.tangentImpulse+H,-J,J),H=D.tangentImpulse-at}f.x=M.x*U+R.x*H,f.y=M.y*U+R.y*H,S.isStatic||S.isSleeping||(S.positionPrev.x+=f.x*S.inverseMass,S.positionPrev.y+=f.y*S.inverseMass,S.anglePrev+=r.cross(N,f)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=f.x*E.inverseMass,E.positionPrev.y-=f.y*E.inverseMass,E.anglePrev-=r.cross(V,f)*E.inverseInertia)}}}}})()},function(i,d){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(n){typeof window=="object"&&(e=window)}i.exports=e},function(i,d,e){var n=e(276),h=function(r,o,l,a){for(var u=r[0],c=1;c<r.length;c++){var f=r[c];n(f,u,o,l,a),u=f}return r};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"angle",o,l,a,u)};i.exports=h},function(i,d){var e=function(n,h,r){for(var o=0;o<n.length;o++){var l=n[o];h.call(r,l)}return n};i.exports=e},function(i,d){var e=function(n,h,r){r===void 0&&(r=0);for(var o=r;o<n.length;o++){var l=n[o],a=!0;for(var u in h)l[u]!==h[u]&&(a=!1);if(a)return l}return null};i.exports=e},function(i,d){var e=function(n,h,r){r===void 0&&(r=0);for(var o=r;o<n.length;o++){var l=n[o],a=!0;for(var u in h)l[u]!==h[u]&&(a=!1);if(a)return l}return null};i.exports=e},function(i,d,e){var n=e(289),h=e(123),r=e(2),o=e(1),l=e(129),a=new l({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),u=function(c,f){f===void 0&&(f={});var v=f.hasOwnProperty("width"),p=f.hasOwnProperty("height"),g=r(f,"width",-1),m=r(f,"height",-1),x=r(f,"cellWidth",1),y=r(f,"cellHeight",x),T=r(f,"position",h.TOP_LEFT),C=r(f,"x",0),S=r(f,"y",0),E=0,M=0,R=g*x,L=m*y;a.setPosition(C,S),a.setSize(x,y);for(var O=0;O<c.length;O++)if(n(c[O],a,T),v&&g===-1)a.x+=x;else if(p&&m===-1)a.y+=y;else if(p&&!v){if(M+=y,a.y+=y,M===L&&(M=0,E+=x,a.y=S,a.x+=x,E===R))break}else if(E+=x,a.x+=x,E===R&&(E=0,M+=y,a.x=C,a.y+=y,M===L))break;return c};i.exports=u},function(i,d,e){var n=e(18),h=2,r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,l,a,u){return o===void 0&&(o=1),l===void 0?this.alpha=o:(this._alphaTL=n(o,0,1),this._alphaTR=n(l,0,1),this._alphaBL=n(a,0,1),this._alphaBR=n(u,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var l=n(o,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var l=n(o,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=h)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var l=n(o,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=h)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var l=n(o,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=h)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var l=n(o,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=h)}}};i.exports=r},function(i,d){var e={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,h){return this.width=n,this.height=h,this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this}};i.exports=e},function(i,d){var e={texture:null,frame:null,isCropped:!1,setCrop:function(n,h,r,o){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,h,r,o,this.flipX,this.flipY);else{var l=n;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};i.exports=e},function(i,d){var e={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,h){return this.flipX=n,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};i.exports=e},function(i,d,e){var n=e(10),h=e(308),r=e(3),o={prepareBoundsOutput:function(l,a){if(a===void 0&&(a=!1),this.rotation!==0&&h(l,this.x,this.y,this.rotation),a&&this.parentContainer){var u=this.parentContainer.getBoundsTransformMatrix();u.transformPoint(l.x,l.y,l)}return l},getCenter:function(l){return l===void 0&&(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,l},getTopLeft:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,a)},getTopCenter:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,a)},getTopRight:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,a)},getLeftCenter:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,a)},getRightCenter:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,a)},getBottomLeft:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,a)},getBottomCenter:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,a)},getBottomRight:function(l,a){return l||(l=new r),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,a)},getBounds:function(l){l===void 0&&(l=new n);var a,u,c,f,v,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),x.transformPoint(l.x,l.y,l),a=l.x,u=l.y,this.getTopRight(l),x.transformPoint(l.x,l.y,l),c=l.x,f=l.y,this.getBottomLeft(l),x.transformPoint(l.x,l.y,l),v=l.x,p=l.y,this.getBottomRight(l),x.transformPoint(l.x,l.y,l),g=l.x,m=l.y}else this.getTopLeft(l),a=l.x,u=l.y,this.getTopRight(l),c=l.x,f=l.y,this.getBottomLeft(l),v=l.x,p=l.y,this.getBottomRight(l),g=l.x,m=l.y;return l.x=Math.min(a,c,v,g),l.y=Math.min(u,f,p,m),l.width=Math.max(a,c,v,g)-l.x,l.height=Math.max(u,f,p,m)-l.y,l}};i.exports=o},function(i,d){i.exports="blur"},function(i,d){i.exports="boot"},function(i,d){i.exports="contextlost"},function(i,d){i.exports="contextrestored"},function(i,d){i.exports="destroy"},function(i,d){i.exports="focus"},function(i,d){i.exports="hidden"},function(i,d){i.exports="pause"},function(i,d){i.exports="postrender"},function(i,d){i.exports="poststep"},function(i,d){i.exports="prerender"},function(i,d){i.exports="prestep"},function(i,d){i.exports="ready"},function(i,d){i.exports="resume"},function(i,d){i.exports="step"},function(i,d){i.exports="visible"},function(i,d){i.exports="postrender"},function(i,d){i.exports="prerender"},function(i,d){i.exports="render"},function(i,d){i.exports="resize"},function(i,d){var e={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,h){return n===void 0&&(n=.5),h===void 0&&(h=n),this.originX=n,this.originY=h,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.displayOriginX=n,this.displayOriginY=h,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};i.exports=e},function(i,d,e){var n=e(36),h=e(99),r=e(6),o=e(100),l=e(3),a={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(u,c){c===void 0&&(c=this.pathConfig);var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this.path=u,c&&this.startFollow(c),this},setRotateToPath:function(u,c){return c===void 0&&(c=0),this.rotateToPath=u,this.pathRotationOffset=c,this},isFollowing:function(){var u=this.pathTween;return u&&u.isPlaying()},startFollow:function(u,c){u===void 0&&(u={}),c===void 0&&(c=0);var f=this.pathTween;f&&f.isPlaying()&&f.stop(),typeof u=="number"&&(u={duration:u}),u.from=r(u,"from",0),u.to=r(u,"to",1);var v=h(u,"positionOnPath",!1);this.rotateToPath=h(u,"rotateToPath",!1),this.pathRotationOffset=r(u,"rotationOffset",0);var p=r(u,"startAt",c);if(p&&(u.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(u),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=u,this},pauseFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.pause(),this},resumeFollow:function(){var u=this.pathTween;return u&&u.isPaused()&&u.resume(),this},stopFollow:function(){var u=this.pathTween;return u&&u.isPlaying()&&u.stop(),this},pathUpdate:function(){var u=this.pathTween;if(u){var c=u.data[0],f=this.pathDelta,v=this.pathVector;if(f.copy(v).negate(),c.state===o.COMPLETE){this.path.getPoint(1,v),f.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(c.state!==o.PLAYING_FORWARD&&c.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(u.getValue(),v),f.add(v),v.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(v.x,v.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+n(this.pathRotationOffset))}}};i.exports=a},function(i,d){var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){return n===void 0&&(n=this.frame),this.width=n.realWidth,this.height=n.realHeight,this},setSize:function(n,h){return this.width=n,this.height=h,this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this}};i.exports=e},function(i,d){var e=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(h,r){return this.texture=this.scene.sys.textures.get(h),this.setFrame(r)},setFrame:function(h,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~e:this.renderFlags|=e,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};i.exports=n},function(i,d){var e=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(h,r,o,l){if(h===void 0)this.isCropped=!1;else if(this.frame){if(typeof h=="number")this.frame.setCropUVs(this._crop,h,r,o,l,this.flipX,this.flipY);else{var a=h;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(h,r){return this.texture=this.scene.sys.textures.get(h),this.setFrame(r)},setFrame:function(h,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~e:this.renderFlags|=e,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};i.exports=n},function(i,d){var e={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(n,h,r,o){return n===void 0&&(n=16777215),h===void 0&&(h=n,r=n,o=n),this.tintTopLeft=n,this.tintTopRight=h,this.tintBottomLeft=r,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(n,h,r,o){return this.setTint(n,h,r,o),this.tintFill=!0,this},tint:{set:function(n){this.setTint(n,n,n,n)}},isTinted:{get:function(){var n=16777215;return this.tintFill||this.tintTopLeft!==n||this.tintTopRight!==n||this.tintBottomLeft!==n||this.tintBottomRight!==n}}};i.exports=e},function(i,d){i.exports="changedata"},function(i,d){i.exports="changedata-"},function(i,d){i.exports="destroy"},function(i,d){i.exports="removedata"},function(i,d){i.exports="setdata"},function(i,d){i.exports="addedtoscene"},function(i,d){i.exports="destroy"},function(i,d){i.exports="removedfromscene"},function(i,d){i.exports="complete"},function(i,d){i.exports="created"},function(i,d){i.exports="error"},function(i,d){i.exports="loop"},function(i,d){i.exports="play"},function(i,d){i.exports="seeked"},function(i,d){i.exports="seeking"},function(i,d){i.exports="stop"},function(i,d){i.exports="timeout"},function(i,d){i.exports="unlocked"},function(i,d){i.exports="addedtoscene"},function(i,d){i.exports="boot"},function(i,d){i.exports="create"},function(i,d){i.exports="destroy"},function(i,d){i.exports="pause"},function(i,d){i.exports="postupdate"},function(i,d){i.exports="prerender"},function(i,d){i.exports="preupdate"},function(i,d){i.exports="ready"},function(i,d){i.exports="removedfromscene"},function(i,d){i.exports="render"},function(i,d){i.exports="resume"},function(i,d){i.exports="shutdown"},function(i,d){i.exports="sleep"},function(i,d){i.exports="start"},function(i,d){i.exports="transitioncomplete"},function(i,d){i.exports="transitioninit"},function(i,d){i.exports="transitionout"},function(i,d){i.exports="transitionstart"},function(i,d){i.exports="transitionwake"},function(i,d){i.exports="update"},function(i,d){i.exports="wake"},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"alpha",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"x",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u,c,f){return l==null&&(l=o),n(r,"x",o,a,c,f),n(r,"y",l,u,c,f)};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"y",o,l,a,u)};i.exports=h},function(i,d){var e=function(n,h,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var l=r,a=(o-r)/n.length,u=0;u<n.length;u++)n[u].x=h.x+h.radius*Math.cos(l),n[u].y=h.y+h.radius*Math.sin(l),l+=a;return n};i.exports=e},function(i,d){var e=function(n,h,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var l=r,a=(o-r)/n.length,u=h.width/2,c=h.height/2,f=0;f<n.length;f++)n[f].x=h.x+u*Math.cos(l),n[f].y=h.y+c*Math.sin(l),l+=a;return n};i.exports=e},function(i,d,e){var n=e(172),h=function(r,o){for(var l=n(o,r.length),a=0;a<r.length;a++){var u=r[a],c=l[a];u.x=c.x,u.y=c.y}return r};i.exports=h},function(i,d,e){var n=e(316),h=e(178),r=e(179),o=function(l,a,u){u===void 0&&(u=0);var c=n(a,!1,l.length);u>0?h(c,u):u<0&&r(c,Math.abs(u));for(var f=0;f<l.length;f++)l[f].x=c[f].x,l[f].y=c[f].y;return l};i.exports=o},function(i,d,e){var n=e(317),h=function(r,o,l){var a=n({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},l),u=n({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},l),c=n({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},l);a.pop(),u.pop(),c.pop(),a=a.concat(u,c);for(var f=a.length/r.length,v=0,p=0;p<r.length;p++){var g=r[p],m=a[Math.floor(v)];g.x=m.x,g.y=m.y,v+=f}return r};i.exports=h},function(i,d){var e=function(n,h,r){for(var o=0;o<n.length;o++){var l=n[o];l.anims&&l.anims.play(h,r)}return n};i.exports=e},function(i,d,e){var n=e(170),h=function(r,o){for(var l=0;l<r.length;l++)n(o,r[l]);return r};i.exports=h},function(i,d,e){var n=e(180),h=function(r,o){for(var l=0;l<r.length;l++)n(o,r[l]);return r};i.exports=h},function(i,d,e){var n=e(173),h=function(r,o){for(var l=0;l<r.length;l++)n(o,r[l]);return r};i.exports=h},function(i,d,e){var n=e(174),h=function(r,o){for(var l=0;l<r.length;l++)n(o,r[l]);return r};i.exports=h},function(i,d,e){var n=e(181),h=function(r,o){for(var l=0;l<r.length;l++)n(o,r[l]);return r};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"rotation",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(182),h=e(50),r=function(o,l,a){for(var u=l.x,c=l.y,f=0;f<o.length;f++){var v=o[f];n(v,u,c,a,Math.max(1,h(v.x,v.y,u,c)))}return o};i.exports=r},function(i,d,e){var n=e(182),h=function(r,o,l,a){var u=o.x,c=o.y;if(a===0)return r;for(var f=0;f<r.length;f++)n(r[f],u,c,l,a);return r};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"scaleX",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u,c,f){return l==null&&(l=o),n(r,"scaleX",o,a,c,f),n(r,"scaleY",l,u,c,f)};i.exports=h},function(i,d,e){var n=e(46),h=function(r,o,l,a,u){return n(r,"scaleY",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"alpha",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a){return n(r,"blendMode",o,0,l,a)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"depth",o,l,a,u)};i.exports=h},function(i,d){var e=function(n,h,r){for(var o=0;o<n.length;o++)n[o].setInteractive(h,r);return n};i.exports=e},function(i,d,e){var n=e(27),h=function(r,o,l,a,u,c,f){return l==null&&(l=o),n(r,"originX",o,a,c,f),n(r,"originY",l,u,c,f),r.forEach(function(v){v.updateDisplayOrigin()}),r};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"rotation",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u,c,f){return l==null&&(l=o),n(r,"scaleX",o,a,c,f),n(r,"scaleY",l,u,c,f)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"scaleX",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"scaleY",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u,c,f){return l==null&&(l=o),n(r,"scrollFactorX",o,a,c,f),n(r,"scrollFactorY",l,u,c,f)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"scrollFactorX",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"scrollFactorY",o,l,a,u)};i.exports=h},function(i,d){var e=function(n,h,r,o,l){for(var a=0;a<n.length;a++)n[a].setTint(h,r,o,l);return n};i.exports=e},function(i,d,e){var n=e(27),h=function(r,o,l,a){return n(r,"visible",o,0,l,a)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"x",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u,c,f){return l==null&&(l=o),n(r,"x",o,a,c,f),n(r,"y",l,u,c,f)};i.exports=h},function(i,d,e){var n=e(27),h=function(r,o,l,a,u){return n(r,"y",o,l,a,u)};i.exports=h},function(i,d,e){var n=e(3),h=function(r,o,l,a,u){a===void 0&&(a=0),u===void 0&&(u=new n);var c,f;if(r.length>1){var v,p,g,m;if(a===0){var x=r.length-1;for(c=r[x].x,f=r[x].y,v=x-1;v>=0;v--)m=r[v],p=m.x,g=m.y,m.x=c,m.y=f,c=p,f=g;r[x].x=o,r[x].y=l}else{for(c=r[0].x,f=r[0].y,v=1;v<r.length;v++)m=r[v],p=m.x,g=m.y,m.x=c,m.y=f,c=p,f=g;r[0].x=o,r[0].y=l}}else c=r[0].x,f=r[0].y,r[0].x=o,r[0].y=l;return u.x=c,u.y=f,u};i.exports=h},function(i,d,e){var n=e(131),h=function(r){return n(r)};i.exports=h},function(i,d,e){var n=e(183),h=function(r,o,l,a,u){u===void 0&&(u=!1);var c=Math.abs(a-l)/r.length,f;if(u)for(f=0;f<r.length;f++)r[f][o]+=n(f*c,l,a);else for(f=0;f<r.length;f++)r[f][o]=n(f*c,l,a);return r};i.exports=h},function(i,d,e){var n=e(184),h=function(r,o,l,a,u){u===void 0&&(u=!1);var c=Math.abs(a-l)/r.length,f;if(u)for(f=0;f<r.length;f++)r[f][o]+=n(f*c,l,a);else for(f=0;f<r.length;f++)r[f][o]=n(f*c,l,a);return r};i.exports=h},function(i,d){var e=function(n,h,r,o,l){l===void 0&&(l=!1);var a=Math.abs(o-r)/n.length,u;if(l)for(u=0;u<n.length;u++)n[u][h]+=u*a+r;else for(u=0;u<n.length;u++)n[u][h]=u*a+r;return n};i.exports=e},function(i,d){var e=function(n){for(var h=0;h<n.length;h++)n[h].visible=!n[h].visible;return n};i.exports=e},function(i,d,e){var n=e(68),h=function(r,o,l){l===void 0&&(l=0);for(var a=0;a<r.length;a++){var u=r[a];u.x=n(u.x,o.left-l,o.right+l),u.y=n(u.y,o.top-l,o.bottom+l)}return r};i.exports=h},function(i,d,e){i.exports={Animation:e(185),AnimationFrame:e(319),AnimationManager:e(321),AnimationState:e(164),Events:e(132)}},function(i,d){i.exports="add"},function(i,d){i.exports="animationcomplete"},function(i,d){i.exports="animationcomplete-"},function(i,d){i.exports="animationrepeat"},function(i,d){i.exports="animationrestart"},function(i,d){i.exports="animationstart"},function(i,d){i.exports="animationstop"},function(i,d){i.exports="animationupdate"},function(i,d){i.exports="pauseall"},function(i,d){i.exports="remove"},function(i,d){i.exports="resumeall"},function(i,d,e){i.exports={BaseCache:e(323),CacheManager:e(325),Events:e(324)}},function(i,d){i.exports="add"},function(i,d){i.exports="remove"},function(i,d,e){i.exports={Controls:e(739),Scene2D:e(742)}},function(i,d,e){i.exports={FixedKeyControl:e(740),SmoothedKeyControl:e(741)}},function(i,d,e){var n=e(0),h=e(6),r=new n({initialize:function(l){this.camera=h(l,"camera",null),this.left=h(l,"left",null),this.right=h(l,"right",null),this.up=h(l,"up",null),this.down=h(l,"down",null),this.zoomIn=h(l,"zoomIn",null),this.zoomOut=h(l,"zoomOut",null),this.zoomSpeed=h(l,"zoomSpeed",.01),this.minZoom=h(l,"minZoom",.001),this.maxZoom=h(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var a=h(l,"speed",null);typeof a=="number"?(this.speedX=a,this.speedY=a):(this.speedX=h(l,"speed.x",0),this.speedY=h(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});i.exports=r},function(i,d,e){var n=e(0),h=e(6),r=new n({initialize:function(l){this.camera=h(l,"camera",null),this.left=h(l,"left",null),this.right=h(l,"right",null),this.up=h(l,"up",null),this.down=h(l,"down",null),this.zoomIn=h(l,"zoomIn",null),this.zoomOut=h(l,"zoomOut",null),this.zoomSpeed=h(l,"zoomSpeed",.01),this.minZoom=h(l,"minZoom",.001),this.maxZoom=h(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var a=h(l,"acceleration",null);typeof a=="number"?(this.accelX=a,this.accelY=a):(this.accelX=h(l,"acceleration.x",0),this.accelY=h(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var u=h(l,"drag",null);typeof u=="number"?(this.dragX=u,this.dragY=u):(this.dragX=h(l,"drag.x",0),this.dragY=h(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=h(l,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=h(l,"maxSpeed.x",0),this.maxSpeedY=h(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*o|0),this._speedY!==0&&(l.scrollY-=this._speedY*o|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});i.exports=r},function(i,d,e){i.exports={Camera:e(326),BaseCamera:e(133),CameraManager:e(799),Effects:e(333),Events:e(37)}},function(i,d){i.exports="cameradestroy"},function(i,d){i.exports="camerafadeincomplete"},function(i,d){i.exports="camerafadeinstart"},function(i,d){i.exports="camerafadeoutcomplete"},function(i,d){i.exports="camerafadeoutstart"},function(i,d){i.exports="cameraflashcomplete"},function(i,d){i.exports="cameraflashstart"},function(i,d){i.exports="followupdate"},function(i,d){i.exports="camerapancomplete"},function(i,d){i.exports="camerapanstart"},function(i,d){i.exports="postrender"},function(i,d){i.exports="prerender"},function(i,d){i.exports="camerarotatecomplete"},function(i,d){i.exports="camerarotatestart"},function(i,d){i.exports="camerashakecomplete"},function(i,d){i.exports="camerashakestart"},function(i,d){i.exports="camerazoomcomplete"},function(i,d){i.exports="camerazoomstart"},function(i,d,e){var n=e(18),h=e(0),r=e(37),o=new h({initialize:function(a){this.camera=a,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,a,u,c,f,v,p,g){if(l===void 0&&(l=!0),a===void 0&&(a=1e3),u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=a,this.direction=l,this.progress=0,this.red=u,this.green=c,this.blue=f,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=l?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(m,this.camera,this,a,u,c,f),this.camera},update:function(l,a){!this.isRunning||(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(l,a){if(!this.isRunning&&!this.isComplete)return!1;var u=this.camera,c=this.red/255,f=this.green/255,v=this.blue/255;return l.drawFillRect(u.x,u.y,u.width,u.height,a(v,f,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=o},function(i,d,e){var n=e(18),h=e(0),r=e(37),o=new h({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,a,u,c,f,v,p){return l===void 0&&(l=250),a===void 0&&(a=255),u===void 0&&(u=255),c===void 0&&(c=255),f===void 0&&(f=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene),!f&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,this.red=a,this.green=u,this.blue=c,this.alpha=1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(r.FLASH_START,this.camera,this,l,a,u,c),this.camera)},update:function(l,a){!this.isRunning||(this._elapsed+=a,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var a=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(l,a){if(!this.isRunning)return!1;var u=this.camera,c=this.red/255,f=this.green/255,v=this.blue/255;return l.drawFillRect(u.x,u.y,u.width,u.height,a(v,f,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=o},function(i,d,e){var n=e(18),h=e(0),r=e(134),o=e(37),l=e(3),a=new h({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,c,f,v,p,g,m){f===void 0&&(f=1e3),v===void 0&&(v=r.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(u,c),x.getScroll(u,c,this.current),typeof v=="string"&&r.hasOwnProperty(v)?this.ease=r[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(o.PAN_START,this.camera,this,f,u,c)),x},update:function(u,c){if(!!this.isRunning){this._elapsed+=c;var f=n(this._elapsed/this.duration,0,1);this.progress=f;var v=this.camera;if(this._elapsed<this.duration){var p=this.ease(f);v.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;v.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,g,m)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});i.exports=a},function(i,d){var e=function(n,h){return h===void 0&&(h=1.70158),n*n*((h+1)*n-h)};i.exports=e},function(i,d){var e=function(n,h){return h===void 0&&(h=1.70158),--n*n*((h+1)*n+h)+1};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h=1.70158);var r=h*1.525;return(n*=2)<1?.5*(n*n*((r+1)*n-r)):.5*((n-=2)*n*((r+1)*n+r)+2)};i.exports=e},function(i,d){var e=function(n){return n=1-n,n<1/2.75?1-7.5625*n*n:n<2/2.75?1-(7.5625*(n-=1.5/2.75)*n+.75):n<2.5/2.75?1-(7.5625*(n-=2.25/2.75)*n+.9375):1-(7.5625*(n-=2.625/2.75)*n+.984375)};i.exports=e},function(i,d){var e=function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375};i.exports=e},function(i,d){var e=function(n){var h=!1;return n<.5?(n=1-n*2,h=!0):n=n*2-1,n<1/2.75?n=7.5625*n*n:n<2/2.75?n=7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?n=7.5625*(n-=2.25/2.75)*n+.9375:n=7.5625*(n-=2.625/2.75)*n+.984375,h?(1-n)*.5:n*.5+.5};i.exports=e},function(i,d){var e=function(n){return 1-Math.sqrt(1-n*n)};i.exports=e},function(i,d){var e=function(n){return Math.sqrt(1- --n*n)};i.exports=e},function(i,d){var e=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)};i.exports=e},function(i,d){var e=function(n){return n*n*n};i.exports=e},function(i,d){var e=function(n){return--n*n*n+1};i.exports=e},function(i,d){var e=function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)};i.exports=e},function(i,d){var e=function(n,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var o=r/4;return h<1?h=1:o=r*Math.asin(1/h)/(2*Math.PI),-(h*Math.pow(2,10*(n-=1))*Math.sin((n-o)*(2*Math.PI)/r))};i.exports=e},function(i,d){var e=function(n,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var o=r/4;return h<1?h=1:o=r*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*n)*Math.sin((n-o)*(2*Math.PI)/r)+1};i.exports=e},function(i,d){var e=function(n,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),n===0)return 0;if(n===1)return 1;var o=r/4;return h<1?h=1:o=r*Math.asin(1/h)/(2*Math.PI),(n*=2)<1?-.5*(h*Math.pow(2,10*(n-=1))*Math.sin((n-o)*(2*Math.PI)/r)):h*Math.pow(2,-10*(n-=1))*Math.sin((n-o)*(2*Math.PI)/r)*.5+1};i.exports=e},function(i,d){var e=function(n){return Math.pow(2,10*(n-1))-.001};i.exports=e},function(i,d){var e=function(n){return 1-Math.pow(2,-10*n)};i.exports=e},function(i,d){var e=function(n){return(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(2-Math.pow(2,-10*(n-1)))};i.exports=e},function(i,d){var e=function(n){return n};i.exports=e},function(i,d){var e=function(n){return n*n};i.exports=e},function(i,d){var e=function(n){return n*(2-n)};i.exports=e},function(i,d){var e=function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)};i.exports=e},function(i,d){var e=function(n){return n*n*n*n};i.exports=e},function(i,d){var e=function(n){return 1- --n*n*n*n};i.exports=e},function(i,d){var e=function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)};i.exports=e},function(i,d){var e=function(n){return n*n*n*n*n};i.exports=e},function(i,d){var e=function(n){return--n*n*n*n*n+1};i.exports=e},function(i,d){var e=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};i.exports=e},function(i,d){var e=function(n){return n===0?0:n===1?1:1-Math.cos(n*Math.PI/2)};i.exports=e},function(i,d){var e=function(n){return n===0?0:n===1?1:Math.sin(n*Math.PI/2)};i.exports=e},function(i,d){var e=function(n){return n===0?0:n===1?1:.5*(1-Math.cos(Math.PI*n))};i.exports=e},function(i,d){var e=function(n,h){return h===void 0&&(h=1),n<=0?0:n>=1?1:((h*n|0)+1)*(1/h)};i.exports=e},function(i,d,e){var n=e(18),h=e(0),r=e(37),o=e(3),l=new h({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(a,u,c,f,v){return a===void 0&&(a=100),u===void 0&&(u=.05),c===void 0&&(c=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,typeof u=="number"?this.intensity.set(u):this.intensity.set(u.x,u.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(r.SHAKE_START,this.camera,this,a,u),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(a,u){if(!!this.isRunning)if(this._elapsed+=u,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,f=this.camera.width,v=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*c.x*f*2-c.x*f)*p,this._offsetY=(Math.random()*c.y*v*2-c.y*v)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});i.exports=l},function(i,d,e){var n=e(18),h=e(0),r=e(37),o=e(134),l=new h({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(a,u,c,f,v,p,g){c===void 0&&(c=1e3),f===void 0&&(f=o.Linear),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),u===void 0&&(u=!1),this.shortestPath=u;var m=a;a<0?(m=-1*a,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!v&&this.isRunning)return y;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=y.rotation,this.destination=m,typeof f=="string"&&o.hasOwnProperty(f)?this.ease=o[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+x)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(r.ROTATE_START,this.camera,this,c,m),y},update:function(a,u){if(!!this.isRunning){this._elapsed+=u;var c=n(this._elapsed/this.duration,0,1);this.progress=c;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(c);this.current=f.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=f.rotation+p*v:y=f.rotation-p*v,f.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,c,y)}else f.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});i.exports=l},function(i,d,e){var n=e(18),h=e(0),r=e(134),o=e(37),l=new h({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,u,c,f,v,p){u===void 0&&(u=1e3),c===void 0&&(c=r.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=u,this.progress=0,this.source=g.zoom,this.destination=a,typeof c=="string"&&r.hasOwnProperty(c)?this.ease=r[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(o.ZOOM_START,this.camera,this,u,a)),g},update:function(a,u){!this.isRunning||(this._elapsed+=u,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=l},function(i,d,e){var n=e(326),h=e(0),r=e(2),o=e(24),l=e(57),a=e(104),u=e(20),c=new h({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(u.BOOT,this.boot,this),v.sys.events.on(u.START,this.start,this)},boot:function(){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,f.scale.width,f.scale.height).setScene(this.scene),f.game.scale.on(a.RESIZE,this.onResize,this),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){if(!this.main){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(u.UPDATE,this.update,this),v.once(u.SHUTDOWN,this.shutdown,this)},add:function(f,v,p,g,m,x){f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new n(f,v,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(f,v){v===void 0&&(v=!1);var p=this.cameras.indexOf(f);return p===-1?(f.id=this.getNextID(),f.setRoundPixels(this.roundPixels),this.cameras.push(f),v&&(this.main=f),f):null},getNextID:function(){for(var f=this.cameras,v=1,p=0;p<32;p++){for(var g=!1,m=0;m<f.length;m++){var x=f[m];if(x&&x.id===v){g=!0;continue}}if(g)v=v<<1;else return v}return 0},getTotal:function(f){f===void 0&&(f=!1);for(var v=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!f||f&&m.visible)&&v++}return v},fromJSON:function(f){Array.isArray(f)||(f=[f]);for(var v=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<f.length;g++){var m=f[g],x=r(m,"x",0),y=r(m,"y",0),T=r(m,"width",v),C=r(m,"height",p),S=this.add(x,y,T,C);S.name=r(m,"name",""),S.zoom=r(m,"zoom",1),S.rotation=r(m,"rotation",0),S.scrollX=r(m,"scrollX",0),S.scrollY=r(m,"scrollY",0),S.roundPixels=r(m,"roundPixels",!1),S.visible=r(m,"visible",!0);var E=r(m,"backgroundColor",!1);E&&S.setBackgroundColor(E);var M=r(m,"bounds",null);if(M){var R=r(M,"x",0),L=r(M,"y",0),O=r(M,"width",v),F=r(M,"height",p);S.setBounds(R,L,O,F)}}return this},getCamera:function(f){for(var v=this.cameras,p=0;p<v.length;p++)if(v[p].name===f)return v[p];return null},getCamerasBelowPointer:function(f){for(var v=this.cameras,p=f.x,g=f.y,m=[],x=0;x<v.length;x++){var y=v[x];y.visible&&y.inputEnabled&&l(y,p,g)&&m.unshift(y)}return m},remove:function(f,v){v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);for(var p=0,g=this.cameras,m=0;m<f.length;m++){var x=g.indexOf(f[m]);x!==-1&&(v?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(f,v){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(v.getChildren(),x);f.render(p,y,x)}}},getVisibleChildren:function(f,v){for(var p=[],g=0;g<f.length;g++){var m=f[g];m.willRender(v)&&p.push(m)}return p},resetAll:function(){for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(f,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(f,v)},onResize:function(f,v,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(v.width,v.height)}},resize:function(f,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(f,v)},shutdown:function(){this.main=void 0;for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();this.cameras=[];var v=this.systems.events;v.off(u.UPDATE,this.update,this),v.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",c,"cameras"),i.exports=c},function(i,d){i.exports="enterfullscreen"},function(i,d){i.exports="fullscreenfailed"},function(i,d){i.exports="fullscreenunsupported"},function(i,d){i.exports="leavefullscreen"},function(i,d){i.exports="orientationchange"},function(i,d){i.exports="resize"},function(i,d,e){i.exports={Config:e(346),CreateRenderer:e(366),DebugHeader:e(384),Events:e(22),TimeStep:e(385),VisibilityHandler:e(387)}},function(i,d){var e=i.exports={},n,h;function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=r}catch(y){n=r}try{typeof clearTimeout=="function"?h=clearTimeout:h=o}catch(y){h=o}})();function l(y){if(n===setTimeout)return setTimeout(y,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch(T){try{return n.call(null,y,0)}catch(C){return n.call(this,y,0)}}}function a(y){if(h===clearTimeout)return clearTimeout(y);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(y);try{return h(y)}catch(T){try{return h.call(null,y)}catch(C){return h.call(this,y)}}}var u=[],c=!1,f,v=-1;function p(){!c||!f||(c=!1,f.length?u=f.concat(u):v=-1,u.length&&g())}function g(){if(!c){var y=l(p);c=!0;for(var T=u.length;T;){for(f=u,u=[];++v<T;)f&&f[v].run();v=-1,T=u.length}f=null,c=!1,a(y)}}e.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];u.push(new m(y,T)),u.length===1&&!c&&l(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(i,d,e){var n=e(136),h={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function r(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(h.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(h.mspointer=!0),navigator.getGamepads&&(h.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?h.wheelEvent="wheel":"onmousewheel"in window?h.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(h.wheelEvent="DOMMouseScroll")),h}i.exports=r()},function(i,d,e){var n=e(136),h={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function r(){if(typeof importScripts=="function")return h;h.audioData=!!window.Audio,h.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),l=!!o.canPlayType;try{if(l&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(h.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(h.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(h.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(h.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(h.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(h.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(n.edge)h.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var a=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(a===10&&u>=11||a>10)&&(h.dolby=!0)}}}catch(c){}return h}i.exports=r()},function(i,d){var e={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function n(){if(typeof importScripts=="function")return e;var h=document.createElement("video"),r=!!h.canPlayType;try{r&&(h.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(e.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.h264=!0,e.mp4=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(e.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(e.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.hls=!0))}catch(o){}return e}i.exports=n()},function(i,d){var e={available:!1,cancel:"",keyboard:!1,request:""};function n(){if(typeof importScripts=="function")return e;var h,r="Fullscreen",o="FullScreen",l=["request"+r,"request"+o,"webkitRequest"+r,"webkitRequest"+o,"msRequest"+r,"msRequest"+o,"mozRequest"+o,"mozRequest"+r];for(h=0;h<l.length;h++)if(document.documentElement[l[h]]){e.available=!0,e.request=l[h];break}var a=["cancel"+o,"exit"+r,"webkitCancel"+o,"webkitExit"+r,"msCancel"+o,"msExit"+r,"mozCancel"+o,"mozExit"+r];if(e.available){for(h=0;h<a.length;h++)if(document[a[h]]){e.cancel=a[h];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}i.exports=n()},function(i,d,e){i.exports={Between:e(349),BetweenPoints:e(350),BetweenPointsY:e(813),BetweenY:e(814),CounterClockwise:e(815),Normalize:e(351),Random:e(816),RandomDegrees:e(817),Reverse:e(818),RotateTo:e(819),ShortestBetween:e(820),Wrap:e(269),WrapDegrees:e(270)}},function(i,d){var e=function(n,h){return Math.atan2(h.x-n.x,h.y-n.y)};i.exports=e},function(i,d){var e=function(n,h,r,o){return Math.atan2(r-n,o-h)};i.exports=e},function(i,d,e){var n=e(14),h=function(r){return r>Math.PI&&(r-=n.PI2),Math.abs(((r+n.TAU)%n.PI2-n.PI2)%n.PI2)};i.exports=h},function(i,d,e){var n=e(137),h=function(){return n(-Math.PI,Math.PI)};i.exports=h},function(i,d,e){var n=e(137),h=function(){return n(-180,180)};i.exports=h},function(i,d,e){var n=e(351),h=function(r){return n(r+Math.PI)};i.exports=h},function(i,d,e){var n=e(14),h=function(r,o,l){return l===void 0&&(l=.05),r===o||(Math.abs(o-r)<=l||Math.abs(o-r)>=n.PI2-l?r=o:(Math.abs(o-r)>Math.PI&&(o<r?o+=n.PI2:o-=n.PI2),o>r?r+=l:o<r&&(r-=l))),r};i.exports=h},function(i,d){var e=function(n,h){var r=h-n;if(r===0)return 0;var o=Math.floor((r- -180)/360);return r-o*360};i.exports=e},function(i,d,e){i.exports={Between:e(50),BetweenPoints:e(352),BetweenPointsSquared:e(822),Chebyshev:e(823),Power:e(824),Snake:e(825),Squared:e(353)}},function(i,d){var e=function(n,h){var r=n.x-h.x,o=n.y-h.y;return r*r+o*o};i.exports=e},function(i,d){var e=function(n,h,r,o){return Math.max(Math.abs(n-r),Math.abs(h-o))};i.exports=e},function(i,d){var e=function(n,h,r,o,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(r-n,l)+Math.pow(o-h,l))};i.exports=e},function(i,d){var e=function(n,h,r,o){return Math.abs(n-r)+Math.abs(h-o)};i.exports=e},function(i,d,e){i.exports={Back:e(334),Bounce:e(335),Circular:e(336),Cubic:e(337),Elastic:e(338),Expo:e(339),Linear:e(340),Quadratic:e(341),Quartic:e(342),Quintic:e(343),Sine:e(344),Stepped:e(345)}},function(i,d,e){i.exports={Ceil:e(828),Equal:e(124),Floor:e(829),GreaterThan:e(354),LessThan:e(355)}},function(i,d){var e=function(n,h){return h===void 0&&(h=1e-4),Math.ceil(n-h)};i.exports=e},function(i,d){var e=function(n,h){return h===void 0&&(h=1e-4),Math.floor(n+h)};i.exports=e},function(i,d,e){i.exports={Bezier:e(831),CatmullRom:e(832),CubicBezier:e(358),Linear:e(833),QuadraticBezier:e(359),SmoothStep:e(360),SmootherStep:e(834)}},function(i,d,e){var n=e(356),h=function(r,o){for(var l=0,a=r.length-1,u=0;u<=a;u++)l+=Math.pow(1-o,a-u)*Math.pow(o,u)*r[u]*n(a,u);return l};i.exports=h},function(i,d,e){var n=e(194),h=function(r,o){var l=r.length-1,a=l*o,u=Math.floor(a);return r[0]===r[l]?(o<0&&(u=Math.floor(a=l*(1+o))),n(a-u,r[(u-1+l)%l],r[u],r[(u+1)%l],r[(u+2)%l])):o<0?r[0]-(n(-a,r[0],r[0],r[1],r[1])-r[0]):o>1?r[l]-(n(a-l,r[l],r[l],r[l-1],r[l-1])-r[l]):n(a-u,r[u?u-1:0],r[u],r[l<u+1?l:u+1],r[l<u+2?l:u+2])};i.exports=h},function(i,d,e){var n=e(135),h=function(r,o){var l=r.length-1,a=l*o,u=Math.floor(a);return o<0?n(r[0],r[1],a):o>1?n(r[l],r[l-1],l-a):n(r[u],r[u+1>l?l:u+1],a-u)};i.exports=h},function(i,d,e){var n=e(183),h=function(r,o,l){return o+(l-o)*n(r,0,1)};i.exports=h},function(i,d,e){i.exports={GetNext:e(361),IsSize:e(138),IsValue:e(836)}},function(i,d){var e=function(n){return n>0&&(n&n-1)==0};i.exports=e},function(i,d,e){i.exports={Ceil:e(139),Floor:e(76),To:e(838)}},function(i,d){var e=function(n,h,r,o){return r===void 0&&(r=0),h===0?n:(n-=r,n=h*Math.round(n/h),o?(r+n)/h:r+n)};i.exports=e},function(i,d,e){var n=e(0),h=new n({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var r=2091639*this.s0+this.c*23283064365386963e-26;return this.c=r|0,this.s0=this.s1,this.s1=this.s2,this.s2=r-this.c,this.s2},hash:function(r){var o,l=this.n;r=r.toString();for(var a=0;a<r.length;a++)l+=r.charCodeAt(a),o=.02519603282416938*l,l=o>>>0,o-=l,o*=l,l=o>>>0,o-=l,l+=o*4294967296;return this.n=l,(l>>>0)*23283064365386963e-26},init:function(r){typeof r=="string"?this.state(r):this.sow(r)},sow:function(r){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!r)for(var o=0;o<r.length&&r[o]!=null;o++){var l=r[o];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},between:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},realInRange:function(r,o){return this.frac()*(o-r)+r},normal:function(){return 1-2*this.frac()},uuid:function(){var r="",o="";for(o=r="";r++<36;o+=~r%5|r*3&4?(r^15?8^this.frac()*(r^20?16:4):4).toString(16):"-");return o},pick:function(r){return r[this.integerInRange(0,r.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(r){return r[~~(Math.pow(this.frac(),2)*(r.length-1)+.5)]},timestamp:function(r,o){return this.realInRange(r||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(r){return typeof r=="string"&&r.match(/^!rnd/)&&(r=r.split(","),this.c=parseFloat(r[1]),this.s0=parseFloat(r[2]),this.s1=parseFloat(r[3]),this.s2=parseFloat(r[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(r){for(var o=r.length-1,l=o;l>0;l--){var a=Math.floor(this.frac()*(l+1)),u=r[a];r[a]=r[l],r[l]=u}return r}});i.exports=h},function(i,d){var e=function(n){for(var h=0,r=0;r<n.length;r++)h+=+n[r];return h/n.length};i.exports=e},function(i,d){var e=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var o=Math.pow(r,-h);return Math.ceil(n*o)/o};i.exports=e},function(i,d){var e=function(n,h){return Math.abs(n-h)};i.exports=e},function(i,d,e){var n=e(18),h=e(0),r=e(69),o=e(1),l=new r,a=new h({initialize:function u(c,f,v,p){c===void 0&&(c=0),f===void 0&&(f=0),v===void 0&&(v=0),p===void 0&&(p=u.DefaultOrder),this._x=c,this._y=f,this._z=v,this._order=p,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(u){this._x=u,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(u){this._y=u,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(u){this._z=u,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(u){this._order=u,this.onChangeCallback(this)}},set:function(u,c,f,v){return v===void 0&&(v=this._order),this._x=u,this._y=c,this._z=f,this._order=v,this.onChangeCallback(this),this},copy:function(u){return this.set(u.x,u.y,u.z,u.order)},setFromQuaternion:function(u,c,f){return c===void 0&&(c=this._order),f===void 0&&(f=!1),l.fromQuat(u),this.setFromRotationMatrix(l,c,f)},setFromRotationMatrix:function(u,c,f){c===void 0&&(c=this._order),f===void 0&&(f=!1);var v=u.val,p=v[0],g=v[4],m=v[8],x=v[1],y=v[5],T=v[9],C=v[2],S=v[6],E=v[10],M=0,R=0,L=0,O=.99999;switch(c){case"XYZ":{R=Math.asin(n(m,-1,1)),Math.abs(m)<O?(M=Math.atan2(-T,E),L=Math.atan2(-g,p)):M=Math.atan2(S,y);break}case"YXZ":{M=Math.asin(-n(T,-1,1)),Math.abs(T)<O?(R=Math.atan2(m,E),L=Math.atan2(x,y)):R=Math.atan2(-C,p);break}case"ZXY":{M=Math.asin(n(S,-1,1)),Math.abs(S)<O?(R=Math.atan2(-C,E),L=Math.atan2(-g,y)):L=Math.atan2(x,p);break}case"ZYX":{R=Math.asin(-n(C,-1,1)),Math.abs(C)<O?(M=Math.atan2(S,E),L=Math.atan2(x,p)):L=Math.atan2(-g,y);break}case"YZX":{L=Math.asin(n(x,-1,1)),Math.abs(x)<O?(M=Math.atan2(-T,y),R=Math.atan2(-C,p)):R=Math.atan2(m,E);break}case"XZY":{L=Math.asin(-n(g,-1,1)),Math.abs(g)<O?(M=Math.atan2(S,y),R=Math.atan2(m,p)):M=Math.atan2(-T,E);break}}return this._x=M,this._y=R,this._z=L,this._order=c,f&&this.onChangeCallback(this),this}});a.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],a.DefaultOrder="XYZ",i.exports=a},function(i,d){var e=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var o=Math.pow(r,-h);return Math.floor(n*o)/o};i.exports=e},function(i,d){var e=function(n,h){return n/h/1e3};i.exports=e},function(i,d){var e=function(n){return n==parseFloat(n)?!(n%2):void 0};i.exports=e},function(i,d){var e=function(n){return n===parseFloat(n)?!(n%2):void 0};i.exports=e},function(i,d){var e=function(n,h,r){return Math.min(n+h,r)};i.exports=e},function(i,d){var e=function(n){var h=n.length;if(h===0)return 0;n.sort(function(o,l){return o-l});var r=Math.floor(h/2);return h%2==0?(n[r]+n[r-1])/2:n[r]};i.exports=e},function(i,d){var e=function(n,h,r){return Math.max(n-h,r)};i.exports=e},function(i,d){var e=function(n,h,r,o){r===void 0&&(r=h+1);var l=(n-h)/(r-h);return l>1?o!==void 0?(l=(o-n)/(o-r),l<0&&(l=0)):l=1:l<0&&(l=0),l};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h=1);var r=Math.random()*2*Math.PI;return n.x=Math.cos(r)*h,n.y=Math.sin(r)*h,n};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h=1);var r=Math.random()*2*Math.PI,o=Math.random()*2-1,l=Math.sqrt(1-o*o)*h;return n.x=Math.cos(r)*l,n.y=Math.sin(r)*l,n.z=o*h,n};i.exports=e},function(i,d){var e=function(n,h){return h===void 0&&(h=1),n.x=(Math.random()*2-1)*h,n.y=(Math.random()*2-1)*h,n.z=(Math.random()*2-1)*h,n.w=(Math.random()*2-1)*h,n};i.exports=e},function(i,d){var e=function(n,h,r,o,l){return n.x=h+l*Math.cos(o),n.y=r+l*Math.sin(o),n};i.exports=e},function(i,d){var e=function(n,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var o=Math.pow(r,-h);return Math.round(n*o)/o};i.exports=e},function(i,d){var e=function(n,h,r,o){h===void 0&&(h=1),r===void 0&&(r=1),o===void 0&&(o=1),o*=Math.PI/n;for(var l=[],a=[],u=0;u<n;u++)r-=h*o,h+=r*o,l[u]=r,a[u]=h;return{sin:a,cos:l,length:n}};i.exports=e},function(i,d,e){var n=e(3),h=function(r,o,l,a){a===void 0&&(a=new n);var u=0,c=0,f=o*l;return r>0&&r<=f&&(r>o-1?(c=Math.floor(r/o),u=r-c*o):u=r),a.set(u,c)};i.exports=h},function(i,d){var e=function(n,h,r){return Math.abs(n-h)<=r};i.exports=e},function(i,d,e){var n=e(39),h=e(69),r=e(365),o=new h,l=new r,a=new n,u=function(c,f,v){return l.setAxisAngle(f,v),o.fromRotationTranslation(l,a.set(0,0,0)),c.transformMat4(o)};i.exports=u},function(i,d){i.exports="addtexture"},function(i,d){i.exports="onerror"},function(i,d){i.exports="onload"},function(i,d){i.exports="ready"},function(i,d){i.exports="removetexture"},function(i,d){i.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(i,d){i.exports="pipelineafterflush"},function(i,d){i.exports="pipelinebeforeflush"},function(i,d){i.exports="pipelinebind"},function(i,d){i.exports="pipelineboot"},function(i,d){i.exports="pipelinedestroy"},function(i,d){i.exports="pipelinerebind"},function(i,d){i.exports="pipelineresize"},function(i,d){i.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(i,d){i.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(i,d,e){i.exports={GenerateTexture:e(388),Palettes:e(889)}},function(i,d,e){i.exports={ARNE16:e(389),C64:e(890),CGA:e(891),JMP:e(892),MSX:e(893)}},function(i,d){i.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(i,d){i.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(i,d){i.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(i,d){i.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(i,d,e){i.exports={Path:e(895),MoveTo:e(393),CubicBezier:e(390),Curve:e(94),Ellipse:e(391),Line:e(392),QuadraticBezier:e(394),Spline:e(395)}},function(i,d,e){var n=e(0),h=e(390),r=e(391),o=e(5),l=e(392),a=e(393),u=e(394),c=e(10),f=e(395),v=e(3),p=e(14),g=new n({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new l(x,m)),this},cubicBezierTo:function(m,x,y,T,C,S){var E=this.getEndPoint(),M,R,L;return m instanceof v?(M=m,R=x,L=y):(M=new v(y,T),R=new v(C,S),L=new v(m,x)),this.add(new h(E,M,R,L))},quadraticBezierTo:function(m,x,y,T){var C=this.getEndPoint(),S,E;return m instanceof v?(S=m,E=x):(S=new v(y,T),E=new v(m,x)),this.add(new u(C,S,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,C,S){var E=new r(0,0,m,x,y,T,C,S),M=this.getEndPoint(this._tmpVec2A),R=E.getStartPoint(this._tmpVec2B);return M.subtract(R),E.x=M.x,E.y=M.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(l.fromJSON(y));break;case"EllipseCurve":this.add(r.fromJSON(y));break;case"SplineCurve":this.add(f.fromJSON(y));break;case"CubicBezierCurve":this.add(h.fromJSON(y));break;case"QuadraticBezierCurve":this.add(u.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new c),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new c,T=p.MIN_SAFE_INTEGER,C=p.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];!E.active||(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return m.right=T,m.bottom=C,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),R=M===0?0:1-S/M;return E.getPointAt(R,x)}C++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(!!C.active)for(var S=C.getResolution(m),E=C.getPoints(S),M=0;M<E.length;M++){var R=E[M];y&&y.equals(R)||(x.push(R),y=R)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new v),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new v),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],M=E.getLength(),R=M===0?0:1-S/M;return E.getTangentAt(R,x)}C++}return null},lineTo:function(m,x){m instanceof v?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new l([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new f(m))},moveTo:function(m,x){return m instanceof v?this.add(new a(m.x,m.y)):this.add(new a(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(m,x){return new g(m,x)}),i.exports=g},function(i,d,e){i.exports={DataManager:e(101),DataManagerPlugin:e(897),Events:e(315)}},function(i,d,e){var n=e(0),h=e(101),r=e(24),o=e(20),l=new n({Extends:h,initialize:function(u){h.call(this,u,u.sys.events),this.scene=u,this.systems=u.sys,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){h.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",l,"data"),i.exports=l},function(i,d,e){i.exports={Align:e(899),BaseShader:e(396),Bounds:e(902),Canvas:e(906),Color:e(397),ColorMatrix:e(198),Masks:e(916),RGB:e(200)}},function(i,d,e){var n=e(123),h=e(17),r={In:e(900),To:e(901)};r=h(!1,r,n),i.exports=r},function(i,d,e){i.exports={BottomCenter:e(290),BottomLeft:e(291),BottomRight:e(292),Center:e(293),LeftCenter:e(295),QuickSet:e(289),RightCenter:e(296),TopCenter:e(297),TopLeft:e(298),TopRight:e(299)}},function(i,d,e){i.exports={BottomCenter:e(277),BottomLeft:e(278),BottomRight:e(279),LeftBottom:e(280),LeftCenter:e(281),LeftTop:e(282),QuickSet:e(276),RightBottom:e(283),RightCenter:e(284),RightTop:e(285),TopCenter:e(286),TopLeft:e(287),TopRight:e(288)}},function(i,d,e){i.exports={CenterOn:e(294),GetBottom:e(42),GetBounds:e(903),GetCenterX:e(87),GetCenterY:e(89),GetLeft:e(43),GetOffsetX:e(904),GetOffsetY:e(905),GetRight:e(44),GetTop:e(45),SetBottom:e(55),SetCenterX:e(88),SetCenterY:e(90),SetLeft:e(53),SetRight:e(54),SetTop:e(52)}},function(i,d,e){var n=e(42),h=e(43),r=e(44),o=e(45),l=function(a,u){u===void 0&&(u={});var c=h(a),f=o(a);return u.x=c,u.y=f,u.width=r(a)-c,u.height=n(a)-f,u};i.exports=l},function(i,d){var e=function(n){return n.width*n.originX};i.exports=e},function(i,d){var e=function(n){return n.height*n.originY};i.exports=e},function(i,d,e){i.exports={CanvasInterpolation:e(367),CanvasPool:e(31),Smoothing:e(192),TouchAction:e(907),UserSelect:e(908)}},function(i,d){var e=function(n,h){return h===void 0&&(h="none"),n.style.msTouchAction=h,n.style["ms-touch-action"]=h,n.style["touch-action"]=h,n};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h="none");var r=["-webkit-","-khtml-","-moz-","-ms-",""];return r.forEach(function(o){n.style[o+"user-select"]=h}),n.style["-webkit-touch-callout"]=h,n.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",n};i.exports=e},function(i,d,e){var n=e(103),h=function(r){r===void 0&&(r=1024);var o=[],l=255,a,u=255,c=0,f=0;for(a=0;a<=l;a++)o.push({r:u,g:a,b:f,color:n(u,a,f)});for(c=255,a=l;a>=0;a--)o.push({r:a,g:c,b:f,color:n(a,c,f)});for(u=0,a=0;a<=l;a++,c--)o.push({r:u,g:c,b:a,color:n(u,c,a)});for(c=0,f=255,a=0;a<=l;a++,f--,u++)o.push({r:u,g:c,b:f,color:n(u,c,f)});if(r===1024)return o;var v=[],p=0,g=1024/r;for(a=0;a<r;a++)v.push(o[Math.floor(p)]),p+=g;return v};i.exports=h},function(i,d){var e=function(n){var h={r:n>>16&255,g:n>>8&255,b:n&255,a:255};return n>16777215&&(h.a=n>>>24),h};i.exports=e},function(i,d,e){var n=e(38),h=e(399),r=function(o,l,a){var u=a,c=a,f=a;if(l!==0){var v=a<.5?a*(1+l):a+l-a*l,p=2*a-v;u=h(p,v,o+1/3),c=h(p,v,o),f=h(p,v,o-1/3)}var g=new n;return g.setGLTo(u,c,f,1)};i.exports=r},function(i,d,e){var n=e(188),h=function(r,o){r===void 0&&(r=1),o===void 0&&(o=1);for(var l=[],a=0;a<=359;a++)l.push(n(a/359,r,o));return l};i.exports=h},function(i,d,e){var n=e(135),h=function(l,a,u,c,f,v,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:n(l,c,m),g:n(a,f,m),b:n(u,v,m)}},r=function(l,a,u,c){return u===void 0&&(u=100),c===void 0&&(c=0),h(l.r,l.g,l.b,a.r,a.g,a.b,u,c)},o=function(l,a,u,c,f,v){return f===void 0&&(f=100),v===void 0&&(v=0),h(l.r,l.g,l.b,a,u,c,f,v)};i.exports={RGBWithRGB:h,ColorWithRGB:o,ColorWithColor:r}},function(i,d,e){var n=e(195),h=e(38),r=function(o,l){return o===void 0&&(o=0),l===void 0&&(l=255),new h(n(o,l),n(o,l),n(o,l))};i.exports=r},function(i,d,e){var n=e(398),h=function(r,o,l,a,u){return a===void 0&&(a=255),u===void 0&&(u="#"),u==="#"?"#"+((1<<24)+(r<<16)+(o<<8)+l).toString(16).slice(1,7):"0x"+n(a)+n(r)+n(o)+n(l)};i.exports=h},function(i,d,e){i.exports={BitmapMask:e(310),GeometryMask:e(311)}},function(i,d,e){var n={AddToDOM:e(142),DOMContentLoaded:e(400),GetInnerHeight:e(401),GetScreenOrientation:e(402),GetTarget:e(407),ParseXML:e(408),RemoveFromDOM:e(202),RequestAnimationFrame:e(386)};i.exports=n},function(i,d,e){i.exports={EventEmitter:e(919)}},function(i,d,e){var n=e(0),h=e(9),r=e(24),o=new n({Extends:h,initialize:function(){h.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",o,"events"),i.exports=o},function(i,d,e){var n=e(142),h=e(321),r=e(325),o=e(31),l=e(0),a=e(346),u=e(921),c=e(366),f=e(101),v=e(384),p=e(347),g=e(400),m=e(9),x=e(22),y=e(409),T=e(24),C=e(414),S=e(415),E=e(417),M=e(106),R=e(422),L=e(385),O=e(387),F=e(426),D=new l({initialize:function(N){this.config=new a(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new h(this),this.textures=new R(this),this.cache=new r(this),this.registry=new f(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new S(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new L(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),u(this),v(this),n(this.canvas,this.config.parent),this.textures.once(M.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),O(this);var B=this.events;B.on(x.HIDDEN,this.onHidden,this),B.on(x.VISIBLE,this.onVisible,this),B.on(x.BLUR,this.onBlur,this),B.on(x.FOCUS,this.onFocus,this)},step:function(B,N){if(this.pendingDestroy)return this.runDestroy();var V=this.events;V.emit(x.PRE_STEP,B,N),V.emit(x.STEP,B,N),this.scene.update(B,N),V.emit(x.POST_STEP,B,N);var X=this.renderer;X.preRender(),V.emit(x.PRE_RENDER,X,B,N),this.scene.render(X),X.postRender(),V.emit(x.POST_RENDER,X,B,N)},headlessStep:function(B,N){if(this.pendingDestroy)return this.runDestroy();var V=this.events;V.emit(x.PRE_STEP,B,N),V.emit(x.STEP,B,N),this.scene.update(B,N),V.emit(x.POST_STEP,B,N),V.emit(x.PRE_RENDER),V.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});i.exports=D},function(i,d,e){var n=e(142),h=function(r){var o=r.config;if(!(!o.parent||!o.domCreateContainer)){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+r.scale.width+"px;","height: "+r.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),r.domContainer=l,n(l,o.parent)}};i.exports=h},function(i,d){i.exports="boot"},function(i,d){i.exports="destroy"},function(i,d){i.exports="dragend"},function(i,d){i.exports="dragenter"},function(i,d){i.exports="drag"},function(i,d){i.exports="dragleave"},function(i,d){i.exports="dragover"},function(i,d){i.exports="dragstart"},function(i,d){i.exports="drop"},function(i,d){i.exports="gameout"},function(i,d){i.exports="gameover"},function(i,d){i.exports="gameobjectdown"},function(i,d){i.exports="dragend"},function(i,d){i.exports="dragenter"},function(i,d){i.exports="drag"},function(i,d){i.exports="dragleave"},function(i,d){i.exports="dragover"},function(i,d){i.exports="dragstart"},function(i,d){i.exports="drop"},function(i,d){i.exports="gameobjectmove"},function(i,d){i.exports="gameobjectout"},function(i,d){i.exports="gameobjectover"},function(i,d){i.exports="pointerdown"},function(i,d){i.exports="pointermove"},function(i,d){i.exports="pointerout"},function(i,d){i.exports="pointerover"},function(i,d){i.exports="pointerup"},function(i,d){i.exports="wheel"},function(i,d){i.exports="gameobjectup"},function(i,d){i.exports="gameobjectwheel"},function(i,d){i.exports="boot"},function(i,d){i.exports="process"},function(i,d){i.exports="update"},function(i,d){i.exports="pointerdown"},function(i,d){i.exports="pointerdownoutside"},function(i,d){i.exports="pointermove"},function(i,d){i.exports="pointerout"},function(i,d){i.exports="pointerover"},function(i,d){i.exports="pointerup"},function(i,d){i.exports="pointerupoutside"},function(i,d){i.exports="wheel"},function(i,d){i.exports="pointerlockchange"},function(i,d){i.exports="preupdate"},function(i,d){i.exports="shutdown"},function(i,d){i.exports="start"},function(i,d){i.exports="update"},function(i,d){i.exports="addfile"},function(i,d){i.exports="complete"},function(i,d){i.exports="filecomplete"},function(i,d){i.exports="filecomplete-"},function(i,d){i.exports="loaderror"},function(i,d){i.exports="load"},function(i,d){i.exports="fileprogress"},function(i,d){i.exports="postprocess"},function(i,d){i.exports="progress"},function(i,d){i.exports="start"},function(i,d,e){var n={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};i.exports=n},function(i,d){var e=function(n,h,r){if(!r.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=n.source[h];n.add("__BASE",h,0,0,o.width,o.height);for(var l=r.getElementsByTagName("SubTexture"),a,u=0;u<l.length;u++){var c=l[u].attributes,f=c.name.value,v=parseInt(c.x.value,10),p=parseInt(c.y.value,10),g=parseInt(c.width.value,10),m=parseInt(c.height.value,10);if(a=n.add(f,h,v,p,g,m),c.frameX){var x=Math.abs(parseInt(c.frameX.value,10)),y=Math.abs(parseInt(c.frameY.value,10)),T=parseInt(c.frameWidth.value,10),C=parseInt(c.frameHeight.value,10);a.setTrim(g,m,x,y,T,C)}}return n};i.exports=e},function(i,d){var e=function(n,h){var r=n.source[h];return n.add("__BASE",h,0,0,r.width,r.height),n};i.exports=e},function(i,d){var e=function(n,h){var r=n.source[h];return n.add("__BASE",h,0,0,r.width,r.height),n};i.exports=e},function(i,d,e){var n=e(77),h=function(r,o,l){if(!l.frames&&!l.textures){console.warn("Invalid Texture Atlas JSON Array");return}var a=r.source[o];r.add("__BASE",o,0,0,a.width,a.height);for(var u=Array.isArray(l.textures)?l.textures[o].frames:l.frames,c,f=0;f<u.length;f++){var v=u[f];c=r.add(v.filename,o,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=n(v)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?r.customData[g]=l[g].slice(0):r.customData[g]=l[g]);return r};i.exports=h},function(i,d,e){var n=e(77),h=function(r,o,l){if(!l.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var a=r.source[o];r.add("__BASE",o,0,0,a.width,a.height);var u=l.frames,c;for(var f in u)if(!!u.hasOwnProperty(f)){var v=u[f];c=r.add(f,o,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=n(v)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?r.customData[g]=l[g].slice(0):r.customData[g]=l[g]);return r};i.exports=h},function(i,d,e){var n=e(2),h=function(r,o,l,a,u,c,f){var v=n(f,"frameWidth",null),p=n(f,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=r.source[o];r.add("__BASE",o,0,0,g.width,g.height);var m=n(f,"startFrame",0),x=n(f,"endFrame",-1),y=n(f,"margin",0),T=n(f,"spacing",0),C=Math.floor((u-y+T)/(v+T)),S=Math.floor((c-y+T)/(p+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",r.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var M=y,R=y,L=0,O=0,F=0;F<E;F++){L=0,O=0;var D=M+v,B=R+p;D>u&&(L=D-u),B>c&&(O=B-c),r.add(F,o,l+M,a+R,v-L,p-O),M+=v+T,M+v>u&&(M=y,R+=p+T)}return r};i.exports=h},function(i,d,e){var n=e(2),h=function(r,o,l){var a=n(l,"frameWidth",null),u=n(l,"frameHeight",a);if(!a)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=r.source[0];r.add("__BASE",0,0,0,c.width,c.height);var f=n(l,"startFrame",0),v=n(l,"endFrame",-1),p=n(l,"margin",0),g=n(l,"spacing",0),m=o.cutX,x=o.cutY,y=o.cutWidth,T=o.cutHeight,C=o.realWidth,S=o.realHeight,E=Math.floor((C-p+g)/(a+g)),M=Math.floor((S-p+g)/(u+g)),R=E*M,L=o.x,O=a-L,F=a-(C-y-L),D=o.y,B=u-D,N=u-(S-T-D);(f>R||f<-R)&&(f=0),f<0&&(f=R+f),v!==-1&&(R=f+(v+1));for(var V,X=p,K=p,Z=0,G=o.sourceIndex,w=0;w<M;w++){for(var b=w===0,Y=w===M-1,U=0;U<E;U++){var W=U===0,H=U===E-1;if(V=r.add(Z,G,m+X,x+K,a,u),W||b||H||Y){var J=W?L:0,q=b?D:0,_=0,nt=0;W&&(_+=a-O),H&&(_+=a-F),b&&(nt+=u-B),Y&&(nt+=u-N);var rt=a-_,at=u-nt;V.cutWidth=rt,V.cutHeight=at,V.setTrim(a,u,J,q,rt,at)}X+=g,W?X+=O:H?X+=F:X+=a,Z++}X=p,K+=g,b?K+=B:Y?K+=N:K+=u}return r};i.exports=h},function(i,d){var e=0,n=function(r,o,l,a){var u=e-a.y-a.height;r.add(l,o,a.x,u,a.width,a.height)},h=function(r,o,l){var a=r.source[o];r.add("__BASE",o,0,0,a.width,a.height),e=a.height;for(var u=l.split(`
`),c=/^[ ]*(- )*(\w+)+[: ]+(.*)/,f="",v="",p={x:0,y:0,width:0,height:0},g=0;g<u.length;g++){var m=u[g].match(c);if(!!m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(v!==f&&(n(r,o,v,p),f=v),p={x:0,y:0,width:0,height:0}),y==="name"){v=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return v!==f&&n(r,o,v,p),r};i.exports=h},function(i,d){i.exports="complete"},function(i,d){i.exports="decoded"},function(i,d){i.exports="decodedall"},function(i,d){i.exports="destroy"},function(i,d){i.exports="detune"},function(i,d){i.exports="detune"},function(i,d){i.exports="mute"},function(i,d){i.exports="rate"},function(i,d){i.exports="volume"},function(i,d){i.exports="loop"},function(i,d){i.exports="looped"},function(i,d){i.exports="mute"},function(i,d){i.exports="pan"},function(i,d){i.exports="pauseall"},function(i,d){i.exports="pause"},function(i,d){i.exports="play"},function(i,d){i.exports="rate"},function(i,d){i.exports="resumeall"},function(i,d){i.exports="resume"},function(i,d){i.exports="seek"},function(i,d){i.exports="stopall"},function(i,d){i.exports="stop"},function(i,d){i.exports="unlocked"},function(i,d){i.exports="volume"},function(i,d,e){var n={Events:e(75),DisplayList:e(1012),GameObjectCreator:e(16),GameObjectFactory:e(5),UpdateList:e(1040),Components:e(11),GetCalcMatrix:e(19),BuildGameObject:e(28),BuildGameObjectAnimation:e(439),GameObject:e(15),BitmapText:e(148),Blitter:e(213),Bob:e(440),Container:e(214),DOMElement:e(442),DynamicBitmapText:e(215),Extern:e(444),Graphics:e(216),Group:e(113),Image:e(125),Layer:e(219),Particles:e(1074),PathFollower:e(457),RenderTexture:e(221),RetroFont:e(1082),Rope:e(223),Sprite:e(73),Text:e(224),GetTextSize:e(458),MeasureText:e(460),TextStyle:e(459),TileSprite:e(225),Zone:e(129),Video:e(226),Shape:e(34),Arc:e(461),Curve:e(462),Ellipse:e(463),Grid:e(464),IsoBox:e(465),IsoTriangle:e(466),Line:e(467),Polygon:e(468),Rectangle:e(473),Star:e(474),Triangle:e(475),Factories:{Blitter:e(1130),Container:e(1131),DOMElement:e(1132),DynamicBitmapText:e(1133),Extern:e(1134),Graphics:e(1135),Group:e(1136),Image:e(1137),Layer:e(1138),Particles:e(1139),PathFollower:e(1140),RenderTexture:e(1141),Rope:e(1142),Sprite:e(1143),StaticBitmapText:e(1144),Text:e(1145),TileSprite:e(1146),Zone:e(1147),Video:e(1148),Arc:e(1149),Curve:e(1150),Ellipse:e(1151),Grid:e(1152),IsoBox:e(1153),IsoTriangle:e(1154),Line:e(1155),Polygon:e(1156),Rectangle:e(1157),Star:e(1158),Triangle:e(1159)},Creators:{Blitter:e(1160),Container:e(1161),DynamicBitmapText:e(1162),Graphics:e(1163),Group:e(1164),Image:e(1165),Layer:e(1166),Particles:e(1167),RenderTexture:e(1168),Rope:e(1169),Sprite:e(1170),StaticBitmapText:e(1171),Text:e(1172),TileSprite:e(1173),Zone:e(1174),Video:e(1175)}};n.Shader=e(229),n.Mesh=e(230),n.PointLight=e(150),n.Factories.Shader=e(1184),n.Factories.Mesh=e(1185),n.Factories.PointLight=e(1186),n.Creators.Shader=e(1187),n.Creators.Mesh=e(1188),n.Creators.PointLight=e(1189),n.Light=e(481),n.LightsManager=e(482),n.LightsPlugin=e(1190),i.exports=n},function(i,d,e){var n=e(0),h=e(110),r=e(24),o=e(75),l=e(20),a=e(79),u=new n({Extends:h,initialize:function(f){h.call(this,f),this.sortChildrenFlag=!1,this.scene=f,this.systems=f.sys,this.events=f.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(o.ADDED_TO_SCENE,c,this.scene),this.events.emit(l.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(o.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(a(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,f){return c._depth-f._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,f=c.length;f--;)c[f].destroy(!0);c.length=0,this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",u,"displayList"),i.exports=u},function(i,d,e){i.exports={CheckMatrix:e(209),MatrixToString:e(1014),ReverseColumns:e(1015),ReverseRows:e(1016),Rotate180:e(1017),RotateLeft:e(1018),RotateMatrix:e(147),RotateRight:e(1019),Translate:e(1020),TransposeMatrix:e(435)}},function(i,d,e){var n=e(186),h=e(209),r=function(o){var l="";if(!h(o))return l;for(var a=0;a<o.length;a++){for(var u=0;u<o[a].length;u++){var c=o[a][u].toString();c!=="undefined"?l+=n(c,2):l+="?",u<o[a].length-1&&(l+=" |")}if(a<o.length-1){l+=`
`;for(var f=0;f<o[a].length;f++)l+="---",f<o[a].length-1&&(l+="+");l+=`
`}}return l};i.exports=r},function(i,d){var e=function(n){return n.reverse()};i.exports=e},function(i,d){var e=function(n){for(var h=0;h<n.length;h++)n[h].reverse();return n};i.exports=e},function(i,d,e){var n=e(147),h=function(r){return n(r,180)};i.exports=h},function(i,d,e){var n=e(147),h=function(r){return n(r,90)};i.exports=h},function(i,d,e){var n=e(147),h=function(r){return n(r,-90)};i.exports=h},function(i,d,e){var n=e(178),h=e(179),r=function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),a!==0&&(a<0?n(o,Math.abs(a)):h(o,a)),l!==0)for(var u=0;u<o.length;u++){var c=o[u];l<0?n(c,Math.abs(l)):h(c,l)}return o};i.exports=r},function(i,d){var e=function(n,h,r,o,l){if(l===void 0&&(l=n),r>0){var a=r-n.length;if(a<=0)return null}if(!Array.isArray(h))return n.indexOf(h)===-1?(n.push(h),o&&o.call(l,h),h):null;for(var u=h.length-1;u>=0;)n.indexOf(h[u])!==-1&&h.splice(u,1),u--;if(u=h.length,u===0)return null;r>0&&u>a&&(h.splice(a),u=a);for(var c=0;c<u;c++){var f=h[c];n.push(f),o&&o.call(l,f)}return h};i.exports=e},function(i,d){var e=function(n,h,r,o,l,a){if(r===void 0&&(r=0),a===void 0&&(a=n),o>0){var u=o-n.length;if(u<=0)return null}if(!Array.isArray(h))return n.indexOf(h)===-1?(n.splice(r,0,h),l&&l.call(a,h),h):null;for(var c=h.length-1;c>=0;)n.indexOf(h[c])!==-1&&h.pop(),c--;if(c=h.length,c===0)return null;o>0&&c>u&&(h.splice(u),c=u);for(var f=c-1;f>=0;f--){var v=h[f];n.splice(r,0,v),l&&l.call(a,v)}return h};i.exports=e},function(i,d){var e=function(n,h){var r=n.indexOf(h);return r!==-1&&r<n.length&&(n.splice(r,1),n.push(h)),h};i.exports=e},function(i,d,e){var n=e(78),h=function(r,o,l,a,u){a===void 0&&(a=0),u===void 0&&(u=r.length);var c=0;if(n(r,a,u))for(var f=a;f<u;f++){var v=r[f];v[o]===l&&c++}return c};i.exports=h},function(i,d){var e=function(n,h,r){var o,l=[null];for(o=3;o<arguments.length;o++)l.push(arguments[o]);for(o=0;o<n.length;o++)l[0]=n[o],h.apply(r,l);return n};i.exports=e},function(i,d,e){var n=e(78),h=function(r,o,l,a,u){if(a===void 0&&(a=0),u===void 0&&(u=r.length),n(r,a,u)){var c,f=[null];for(c=5;c<arguments.length;c++)f.push(arguments[c]);for(c=a;c<u;c++)f[0]=r[c],o.apply(l,f)}return r};i.exports=h},function(i,d){var e=function(n,h){var r=n.indexOf(h);if(r>0){var o=n[r-1],l=n.indexOf(o);n[r]=o,n[l]=h}return n};i.exports=e},function(i,d){var e=function(n,h,r){var o=n.indexOf(h);if(o===-1||r<0||r>=n.length)throw new Error("Supplied index out of bounds");return o!==r&&(n.splice(o,1),n.splice(r,0,h)),h};i.exports=e},function(i,d){var e=function(n,h){var r=n.indexOf(h);if(r!==-1&&r<n.length-1){var o=n[r+1],l=n.indexOf(o);n[r]=o,n[l]=h}return n};i.exports=e},function(i,d){var e=function(n,h,r){if(h===r)return n;var o=n.indexOf(h),l=n.indexOf(r);if(o<0||l<0)throw new Error("Supplied items must be elements of the same array");return o>l||(n.splice(o,1),l===n.length-1?n.push(h):n.splice(l,0,h)),n};i.exports=e},function(i,d){var e=function(n,h,r){if(h===r)return n;var o=n.indexOf(h),l=n.indexOf(r);if(o<0||l<0)throw new Error("Supplied items must be elements of the same array");return o<l||(n.splice(o,1),l===0?n.unshift(h):n.splice(l,0,h)),n};i.exports=e},function(i,d,e){var n=e(363),h=function(r,o,l){r===void 0&&(r=0),o===void 0&&(o=null),l===void 0&&(l=1),o===null&&(o=r,r=0);for(var a=[],u=Math.max(n((o-r)/(l||1)),0),c=0;c<u;c++)a.push(r),r+=l;return a};i.exports=h},function(i,d,e){var n=e(74),h=function(r,o,l,a){if(a===void 0&&(a=r),o<0||o>r.length-1)throw new Error("Index out of bounds");var u=n(r,o);return l&&l.call(a,u),u};i.exports=h},function(i,d,e){var n=e(78),h=function(r,o,l,a,u){if(o===void 0&&(o=0),l===void 0&&(l=r.length),u===void 0&&(u=r),n(r,o,l)){var c=l-o,f=r.splice(o,c);if(a)for(var v=0;v<f.length;v++){var p=f[v];a.call(u,p)}return f}else return[]};i.exports=h},function(i,d,e){var n=e(74),h=function(r,o,l){o===void 0&&(o=0),l===void 0&&(l=r.length);var a=o+Math.floor(Math.random()*l);return n(r,a)};i.exports=h},function(i,d){var e=function(n,h,r){var o=n.indexOf(h),l=n.indexOf(r);return o!==-1&&l===-1?(n[o]=r,!0):!1};i.exports=e},function(i,d){var e=function(n,h){var r=n.indexOf(h);return r!==-1&&r>0&&(n.splice(r,1),n.unshift(h)),h};i.exports=e},function(i,d,e){var n=e(78),h=function(r,o,l,a,u){if(a===void 0&&(a=0),u===void 0&&(u=r.length),n(r,a,u))for(var c=a;c<u;c++){var f=r[c];f.hasOwnProperty(o)&&(f[o]=l)}return r};i.exports=h},function(i,d){var e=function(n,h,r){if(h===r)return n;var o=n.indexOf(h),l=n.indexOf(r);if(o<0||l<0)throw new Error("Supplied items must be elements of the same array");return n[o]=r,n[l]=h,n};i.exports=e},function(i,d,e){var n=e(0),h=e(211),r=e(24),o=e(20),l=new n({Extends:h,initialize:function(u){h.call(this),this.checkQueue=!0,this.scene=u,this.systems=u.sys,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(o.PRE_UPDATE,this.update,this),a.on(o.UPDATE,this.sceneUpdate,this),a.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(a,u){for(var c=this._active,f=c.length,v=0;v<f;v++){var p=c[v];p.active&&p.preUpdate.call(p,a,u)}},shutdown:function(){for(var a=this._active.length;a--;)this._active[a].destroy(!0);for(a=this._pending.length;a--;)this._pending[a].destroy(!0);for(a=this._destroy.length;a--;)this._destroy[a].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var u=this.systems.events;u.off(o.PRE_UPDATE,this.update,this),u.off(o.UPDATE,this.sceneUpdate,this),u.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",l,"updateList"),i.exports=l},function(i,d){i.exports="add"},function(i,d){i.exports="remove"},function(i,d){var e=function(n,h,r,o){if(r===void 0&&(r=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var l=n.text,a=l.length,u=n.maxWidth,c=n.wordWrapCharCode,f=Number.MAX_VALUE,v=Number.MAX_VALUE,p=0,g=0,m=n.fontData.chars,x=n.fontData.lineHeight,y=n.letterSpacing,T=0,C=0,S=0,E=null,M=n._align,R=0,L=0,O=n.fontSize/n.fontData.size,F=O*n.scaleX,D=O*n.scaleY,B=null,N=0,V=[],X=Number.MAX_VALUE,K=0,Z=0,G=0,w,b=[],Y=[],U=null;if(u>0){for(w=0;w<a;w++){if(S=l.charCodeAt(w),S===10){U!==null&&(b.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!0}),U=null),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(B!==null)var W=E.kerning[N];S===c?U!==null&&(b.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!1}),U=null):(U===null&&(U={word:"",i:w,x:T,y:C,w:0,h:x,cr:!1}),U.word=U.word.concat(l[w]),U.w+=E.xOffset+E.xAdvance+(W!==void 0?W:0)),T+=E.xAdvance+y,B=E,N=S}}U!==null&&b.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!1}),T=0,C=0,B=null,N=0;var H,J=0,q=[];for(w=0;w<b.length;w++){var _=b[w],nt=_.x,rt=_.x+_.w;if(H){var at=nt-(H.x+H.w);J=nt-(at+H.w),H=null}var vt=nt-J,ut=rt-J;vt>u||ut>u?(q.push(_.i-1),_.cr?(q.push(_.i+_.word.length),J=0,H=null):H=_):_.cr&&(q.push(_.i+_.word.length),J=0,H=null)}var ct=function(qt,ie,Pe){return qt.substr(0,ie)+Pe+qt.substr(ie+1)};for(w=q.length-1;w>=0;w--)l=ct(l,q[w],`
`);o.wrappedText=l,a=l.length,b=[],U=null}var Ft=0;for(w=0;w<a;w++){if(S=l.charCodeAt(w),S===10){U!==null&&(b.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),U=null),T=0,C+=x,B=null,V[Z]=G,G>K&&(K=G),G<X&&(X=G),Z++,G=0;continue}if(E=m[S],!!E){if(R=T,L=C,B!==null){var Tt=E.kerning[N];R+=Tt!==void 0?Tt:0}f>R&&(f=R),v>L&&(v=L);var Ct=R+E.xAdvance,dt=L+x;p<Ct&&(p=Ct),g<dt&&(g=dt);var It=E.xOffset+E.xAdvance+(Tt!==void 0?Tt:0);S===c?U!==null&&(b.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),U=null):(U===null&&(U={word:"",i:Ft,x:T,y:C,w:0,h:x}),U.word=U.word.concat(l[w]),U.w+=It),Y.push({i:Ft,char:l[w],code:S,x:(E.xOffset+T)*O,y:(E.yOffset+C)*O,w:E.width*O,h:E.height*O,t:C*O,r:Ct*O,b:x*O,line:Z,glyph:E}),T+=E.xAdvance+y,B=E,N=S,G=Ct*O,Ft++}}if(U!==null&&b.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),V[Z]=G,G>K&&(K=G),G<X&&(X=G),M>0)for(var gt=0;gt<Y.length;gt++){var Pt=Y[gt];if(M===1){var xe=(K-V[Pt.line])/2;Pt.x+=xe,Pt.r+=xe}else if(M===2){var Ge=K-V[Pt.line];Pt.x+=Ge,Pt.r+=Ge}}var $t=o.local,Ut=o.global,ee=o.lines;return $t.x=f*O,$t.y=v*O,$t.width=p*O,$t.height=g*O,Ut.x=n.x-n._displayOriginX+f*F,Ut.y=n.y-n._displayOriginY+v*D,Ut.width=p*F,Ut.height=g*D,ee.shortest=X,ee.longest=K,ee.lengths=V,h&&($t.x=Math.ceil($t.x),$t.y=Math.ceil($t.y),$t.width=Math.ceil($t.width),$t.height=Math.ceil($t.height),Ut.x=Math.ceil(Ut.x),Ut.y=Math.ceil(Ut.y),Ut.width=Math.ceil(Ut.width),Ut.height=Math.ceil(Ut.height),ee.shortest=Math.ceil(X),ee.longest=Math.ceil(K)),r&&(n._displayOriginX=n.originX*$t.width,n._displayOriginY=n.originY*$t.height,Ut.x=n.x-n._displayOriginX*n.scaleX,Ut.y=n.y-n._displayOriginY*n.scaleY,h&&(Ut.x=Math.ceil(Ut.x),Ut.y=Math.ceil(Ut.y))),o.words=b,o.characters=Y,o.lines.height=x,o.scale=O,o.scaleX=n.scaleX,o.scaleY=n.scaleY,o};i.exports=e},function(i,d,e){var n=e(212),h=function(r,o,l,a,u,c,f){var v=r.sys.textures.get(l),p=v.get(a),g=r.sys.cache.xml.get(u);if(p&&g){var m=n(g,p,c,f,v);return r.sys.cache.bitmapFont.add(o,{data:m,texture:l,frame:a,fromAtlas:!0}),!0}else return!1};i.exports=h},function(i,d,e){var n=e(1),h=e(1);n=e(1046),h=e(1048),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(1047),h=e(19),r=e(12),o=function(l,a,u,c){var f=a._text,v=f.length;if(v!==0){u.addToRenderList(a);var p=l.pipelines.set(a.pipeline,a),g=h(a,u,c).calc,m=u.roundPixels,x=u.alpha,y=a.charColors,T=a.tintFill,C=r.getTintAppendFloatAlpha,S=C(a.tintTopLeft,x*a._alphaTL),E=C(a.tintTopRight,x*a._alphaTR),M=C(a.tintBottomLeft,x*a._alphaBL),R=C(a.tintBottomRight,x*a._alphaBR),L=a.frame.glTexture,O=p.setGameObject(a),F=a.getTextBounds(!1),D,B,N,V=F.characters,X=a.dropShadowX,K=a.dropShadowY,Z=X!==0||K!==0;if(l.pipelines.preBatch(a),Z){var G=a.dropShadowColor,w=a.dropShadowAlpha,b=C(G,x*w*a._alphaTL),Y=C(G,x*w*a._alphaTR),U=C(G,x*w*a._alphaBL),W=C(G,x*w*a._alphaBR);for(D=0;D<V.length;D++)B=V[D],N=B.glyph,!(B.code===32||N.width===0||N.height===0)&&n(p,a,B,N,X,K,g,m,b,Y,U,W,1,L,O)}for(D=0;D<V.length;D++)if(B=V[D],N=B.glyph,!(B.code===32||N.width===0||N.height===0))if(y[B.i]){var H=y[B.i],J=H.tintEffect,q=C(H.tintTL,x*a._alphaTL),_=C(H.tintTR,x*a._alphaTR),nt=C(H.tintBL,x*a._alphaBL),rt=C(H.tintBR,x*a._alphaBR);n(p,a,B,N,0,0,g,m,q,_,nt,rt,J,L,O)}else n(p,a,B,N,0,0,g,m,S,E,M,R,T,L,O);l.pipelines.postBatch(a)}};i.exports=o},function(i,d){var e=function(n,h,r,o,l,a,u,c,f,v,p,g,m,x,y){var T=r.x-h.displayOriginX+l,C=r.y-h.displayOriginY+a,S=T+r.w,E=C+r.h,M=u.getXRound(T,C,c),R=u.getYRound(T,C,c),L=u.getXRound(T,E,c),O=u.getYRound(T,E,c),F=u.getXRound(S,E,c),D=u.getYRound(S,E,c),B=u.getXRound(S,C,c),N=u.getYRound(S,C,c);n.batchQuad(h,M,R,L,O,F,D,B,N,o.u0,o.v0,o.u1,o.v1,f,v,p,g,m,x,y)};i.exports=e},function(i,d,e){var n=e(30),h=function(r,o,l,a){var u=o._text,c=u.length,f=r.currentContext;if(!(c===0||!n(r,f,o,l,a))){l.addToRenderList(o);var v=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.fontData.chars,g=o.fontData.lineHeight,m=o._letterSpacing,x=0,y=0,T=0,C=null,S=0,E=0,M=0,R=0,L=0,O=0,F=null,D=0,B=v.source.image,N=v.cutX,V=v.cutY,X=o._fontSize/o.fontData.size,K=o._align,Z=0,G=0,w=o.getTextBounds(!1);o.maxWidth>0&&(u=w.wrappedText,c=u.length);var b=o._bounds.lines;K===1?G=(b.longest-b.lengths[0])/2:K===2&&(G=b.longest-b.lengths[0]),f.translate(-o.displayOriginX,-o.displayOriginY);for(var Y=l.roundPixels,U=0;U<c;U++){if(T=u.charCodeAt(U),T===10){Z++,K===1?G=(b.longest-b.lengths[Z])/2:K===2&&(G=b.longest-b.lengths[Z]),x=0,y+=g,F=null;continue}if(C=p[T],!!C){if(S=N+C.x,E=V+C.y,M=C.width,R=C.height,L=C.xOffset+x,O=C.yOffset+y,F!==null){var W=C.kerning[D];L+=W!==void 0?W:0}L*=X,O*=X,L+=G,x+=C.xAdvance+m,F=C,D=T,!(M===0||R===0||T===32)&&(Y&&(L=Math.round(L),O=Math.round(O)),f.save(),f.translate(L,O),f.scale(X,X),f.drawImage(B,S,E,M,R,0,0,M,R),f.restore())}}f.restore()}};i.exports=h},function(i,d,e){var n=e(1),h=e(1);n=e(1050),h=e(1051),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(25),h=e(12),r=new n,o=function(l,a,u,c){var f=a.getRenderList();if(f.length!==0){var v=u.alpha*a.alpha;if(v!==0){u.addToRenderList(a);var p=l.pipelines.set(this.pipeline,a),g=u.scrollX*a.scrollFactorX,m=u.scrollY*a.scrollFactorY,x=r.copyFrom(u.matrix);c&&(x.multiplyWithOffset(c,-g,-m),g=0,m=0);var y=a.x-g,T=a.y-m,C=-1,S=!1,E=u.roundPixels;l.pipelines.preBatch(a);for(var M=0;M<f.length;M++){var R=f[M],L=R.frame,O=R.alpha*v;if(O!==0){var F=L.width,D=L.height,B=y+R.x+L.x,N=T+R.y+L.y;R.flipX&&(F*=-1,B+=L.width),R.flipY&&(D*=-1,N+=L.height);var V=B+F,X=N+D,K=x.getX(B,N),Z=x.getY(B,N),G=x.getX(V,X),w=x.getY(V,X),b=h.getTintAppendFloatAlpha(R.tint,O);if(L.sourceIndex!==C){var Y=p.setGameObject(a,L);C=L.sourceIndex}E&&(K=Math.round(K),Z=Math.round(Z),G=Math.round(G),w=Math.round(w)),p.batchQuad(a,K,Z,K,w,G,w,G,Z,L.u0,L.v0,L.u1,L.v1,b,b,b,b,S,L.glTexture,Y)&&(C=-1)}}l.pipelines.postBatch(a)}}};i.exports=o},function(i,d){var e=function(n,h,r,o){var l=h.getRenderList();if(l.length!==0){var a=n.currentContext,u=r.alpha*h.alpha;if(u!==0){r.addToRenderList(h),a.globalCompositeOperation=n.blendModes[h.blendMode],a.imageSmoothingEnabled=!(!n.antialias||h.frame.source.scaleMode);var c=h.x-r.scrollX*h.scrollFactorX,f=h.y-r.scrollY*h.scrollFactorY;a.save(),o&&o.copyToContext(a);for(var v=r.roundPixels,p=0;p<l.length;p++){var g=l[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,C=x.y,S=1,E=1,M=g.alpha*u;M!==0&&(a.globalAlpha=M,m?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),a.save(),a.translate(g.x+c,g.y+f),a.scale(S,E),a.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),a.restore()):(v&&(T=Math.round(T),C=Math.round(C)),a.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+c,C+g.y+f,y.width,y.height)))}a.restore()}}};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1053),h=e(1054),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h);var l=h.list,a=l.length;if(a!==0){var u=h.localTransform;o?(u.loadIdentity(),u.multiply(o),u.translate(h.x,h.y),u.rotate(h.rotation),u.scale(h.scaleX,h.scaleY)):u.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),n.pipelines.preBatch(h);var c=h.blendMode!==-1;c||n.setBlendMode(0);for(var f=h.alpha,v=h.scrollFactorX,p=h.scrollFactorY,g=0;g<a;g++){var m=l[g];if(!!m.willRender(r)){var x,y,T,C;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,C=m.alphaBottomRight;else{var S=m.alpha;x=S,y=S,T=S,C=S}var E=m.scrollFactorX,M=m.scrollFactorY;!c&&m.blendMode!==n.currentBlendMode&&n.setBlendMode(m.blendMode);var R=m.mask;R&&R.preRenderWebGL(n,m,r);var L=m.type;L!==n.currentType&&(n.newType=!0,n.currentType=L),n.nextTypeMatch=g<a-1?l[g+1].type===n.currentType:!1,m.setScrollFactor(E*v,M*p),m.setAlpha(x*f,y*f,T*f,C*f),m.renderWebGL(n,m,r,u),m.setAlpha(x,y,T,C),m.setScrollFactor(E,M),R&&R.postRenderWebGL(n,r),n.newType=!1}}n.pipelines.postBatch(h)}};i.exports=e},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h);var l=h.list;if(l.length!==0){var a=h.localTransform;o?(a.loadIdentity(),a.multiply(o),a.translate(h.x,h.y),a.rotate(h.rotation),a.scale(h.scaleX,h.scaleY)):a.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var u=h.blendMode!==-1;u||n.setBlendMode(0);var c=h._alpha,f=h.scrollFactorX,v=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(n,null,r);for(var p=0;p<l.length;p++){var g=l[p];if(!!g.willRender(r)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!u&&g.blendMode!==n.currentBlendMode&&n.setBlendMode(g.blendMode),g.setScrollFactor(x*f,y*v),g.setAlpha(m*c),g.renderCanvas(n,g,r,a),g.setAlpha(m),g.setScrollFactor(x,y)}}h.mask&&h.mask.postRenderCanvas(n)}};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(443),h=e(443),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d){i.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(i,d,e){var n=e(1),h=e(1);n=e(1058),h=e(1059),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(25),r=e(12),o=new h,l=function(a,u,c,f){var v=u.text,p=v.length;if(p!==0){c.addToRenderList(u);var g=a.pipelines.set(u.pipeline,u),m=n(u,c,f),x=m.sprite,y=m.calc,T=o,C=u.cropWidth>0||u.cropHeight>0;C&&(g.flush(),a.pushScissor(y.tx,y.ty,u.cropWidth*y.scaleX,u.cropHeight*y.scaleY));var S=u.frame,E=S.glTexture,M=u.tintFill,R=r.getTintAppendFloatAlpha(u.tintTopLeft,c.alpha*u._alphaTL),L=r.getTintAppendFloatAlpha(u.tintTopRight,c.alpha*u._alphaTR),O=r.getTintAppendFloatAlpha(u.tintBottomLeft,c.alpha*u._alphaBL),F=r.getTintAppendFloatAlpha(u.tintBottomRight,c.alpha*u._alphaBR),D=g.setGameObject(u),B=0,N=0,V=0,X=0,K=u.letterSpacing,Z,G=0,w=0,b,Y=u.scrollX,U=u.scrollY,W=u.fontData,H=W.chars,J=W.lineHeight,q=u.fontSize/W.size,_=0,nt=u._align,rt=0,at=0,vt=u.getTextBounds(!1);u.maxWidth>0&&(v=vt.wrappedText,p=v.length);var ut=u._bounds.lines;nt===1?at=(ut.longest-ut.lengths[0])/2:nt===2&&(at=ut.longest-ut.lengths[0]);var ct=c.roundPixels,Ft=u.displayCallback,Tt=u.callbackData;a.pipelines.preBatch(u);for(var Ct=0;Ct<p;Ct++){if(V=v.charCodeAt(Ct),V===10){rt++,nt===1?at=(ut.longest-ut.lengths[rt])/2:nt===2&&(at=ut.longest-ut.lengths[rt]),B=0,N+=J,b=null;continue}if(Z=H[V],!!Z){G=Z.width,w=Z.height;var dt=Z.xOffset+B-Y,It=Z.yOffset+N-U;if(b!==null){var gt=Z.kerning[X];dt+=gt!==void 0?gt:0}if(B+=Z.xAdvance+K,b=Z,X=V,!(G===0||w===0||V===32)){if(q=u.fontSize/u.fontData.size,_=0,Ft){Tt.color=0,Tt.tint.topLeft=R,Tt.tint.topRight=L,Tt.tint.bottomLeft=O,Tt.tint.bottomRight=F,Tt.index=Ct,Tt.charCode=V,Tt.x=dt,Tt.y=It,Tt.scale=q,Tt.rotation=_,Tt.data=Z.data;var Pt=Ft(Tt);dt=Pt.x,It=Pt.y,q=Pt.scale,_=Pt.rotation,Pt.color?(R=Pt.color,L=Pt.color,O=Pt.color,F=Pt.color):(R=Pt.tint.topLeft,L=Pt.tint.topRight,O=Pt.tint.bottomLeft,F=Pt.tint.bottomRight),R=r.getTintAppendFloatAlpha(R,c.alpha*u._alphaTL),L=r.getTintAppendFloatAlpha(L,c.alpha*u._alphaTR),O=r.getTintAppendFloatAlpha(O,c.alpha*u._alphaBL),F=r.getTintAppendFloatAlpha(F,c.alpha*u._alphaBR)}dt*=q,It*=q,dt-=u.displayOriginX,It-=u.displayOriginY,dt+=at,T.applyITRS(dt,It,_,q,q),y.multiply(T,x);var xe=Z.u0,Ge=Z.v0,$t=Z.u1,Ut=Z.v1,ee=G,qt=w,ie=x.e,Pe=x.f,ui=qt*x.c+x.e,fi=qt*x.d+x.f,di=ee*x.a+qt*x.c+x.e,vi=ee*x.b+qt*x.d+x.f,ci=ee*x.a+x.e,pi=ee*x.b+x.f;ct&&(ie=Math.round(ie),Pe=Math.round(Pe),ui=Math.round(ui),fi=Math.round(fi),di=Math.round(di),vi=Math.round(vi),ci=Math.round(ci),pi=Math.round(pi)),g.batchQuad(u,ie,Pe,ui,fi,di,vi,ci,pi,xe,Ge,$t,Ut,R,L,O,F,M,E,D)}}}C&&(g.flush(),a.popScissor()),a.pipelines.postBatch(u)}};i.exports=l},function(i,d,e){var n=e(30),h=function(r,o,l,a){var u=o._text,c=u.length,f=r.currentContext;if(!(c===0||!n(r,f,o,l,a))){l.addToRenderList(o);var v=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.displayCallback,g=o.callbackData,m=o.fontData.chars,x=o.fontData.lineHeight,y=o._letterSpacing,T=0,C=0,S=0,E=null,M=0,R=0,L=0,O=0,F=0,D=0,B=null,N=0,V=o.frame.source.image,X=v.cutX,K=v.cutY,Z=0,G=0,w=o._fontSize/o.fontData.size,b=o._align,Y=0,U=0;o.getTextBounds(!1);var W=o._bounds.lines;b===1?U=(W.longest-W.lengths[0])/2:b===2&&(U=W.longest-W.lengths[0]),f.translate(-o.displayOriginX,-o.displayOriginY);var H=l.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(f.beginPath(),f.rect(0,0,o.cropWidth,o.cropHeight),f.clip());for(var J=0;J<c;J++){if(G=w,Z=0,S=u.charCodeAt(J),S===10){Y++,b===1?U=(W.longest-W.lengths[Y])/2:b===2&&(U=W.longest-W.lengths[Y]),T=0,C+=x,B=null;continue}if(E=m[S],!!E){if(M=X+E.x,R=K+E.y,L=E.width,O=E.height,F=E.xOffset+T-o.scrollX,D=E.yOffset+C-o.scrollY,B!==null){var q=E.kerning[N];F+=q!==void 0?q:0}if(p){g.index=J,g.charCode=S,g.x=F,g.y=D,g.scale=G,g.rotation=Z,g.data=E.data;var _=p(g);F=_.x,D=_.y,G=_.scale,Z=_.rotation}F*=G,D*=G,F+=U,T+=E.xAdvance+y,B=E,N=S,!(L===0||O===0||S===32)&&(H&&(F=Math.round(F),D=Math.round(D)),f.save(),f.translate(F,D),f.rotate(Z),f.scale(G,G),f.drawImage(V,M,R,L,O,0,0,L,O),f.restore())}}f.restore()}};i.exports=h},function(i,d,e){var n=e(1),h=e(1);n=e(1061),h=e(1062),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=function(r,o,l,a){r.pipelines.clear();var u=n(o,l,a).calc;o.render.call(o,r,l,u),r.pipelines.rebind()};i.exports=h},function(i,d){},function(i,d,e){var n=e(1),h=e(1);n=e(1064),h=e(448),h=e(448),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(217),h=e(19),r=e(25),o=e(12),l=function(v,p,g){this.x=v,this.y=p,this.width=g},a=function(v,p,g){this.points=[],this.pointsLength=1,this.points[0]=new l(v,p,g)},u=[],c=new r,f=function(v,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=v.pipelines.set(p.pipeline,p);v.pipelines.preBatch(p);for(var y=h(p,g,m).calc,T=c.loadIdentity(),C=p.commandBuffer,S=g.alpha*p.alpha,E=1,M=x.fillTint,R=x.strokeTint,L=0,O=0,F=0,D=.01,B=Math.PI*2,N,V=[],X=0,K=!0,Z=null,G=o.getTintAppendFloatAlpha,w=0;w<C.length;w++)switch(N=C[w],N){case n.BEGIN_PATH:{V.length=0,Z=null,K=!0;break}case n.CLOSE_PATH:{K=!1,Z&&Z.points.length&&Z.points.push(Z.points[0]);break}case n.FILL_PATH:{for(X=0;X<V.length;X++)x.batchFillPath(V[X].points,T,y);break}case n.STROKE_PATH:{for(X=0;X<V.length;X++)x.batchStrokePath(V[X].points,E,K,T,y);break}case n.LINE_STYLE:{E=C[++w];var b=C[++w],Y=C[++w]*S,U=G(b,Y);R.TL=U,R.TR=U,R.BL=U,R.BR=U;break}case n.FILL_STYLE:{var W=C[++w],H=C[++w]*S,J=G(W,H);M.TL=J,M.TR=J,M.BL=J,M.BR=J;break}case n.GRADIENT_FILL_STYLE:{var q=C[++w]*S,_=C[++w]*S,nt=C[++w]*S,rt=C[++w]*S;M.TL=G(C[++w],q),M.TR=G(C[++w],_),M.BL=G(C[++w],nt),M.BR=G(C[++w],rt);break}case n.GRADIENT_LINE_STYLE:{E=C[++w];var at=C[++w]*S;R.TL=G(C[++w],at),R.TR=G(C[++w],at),R.BL=G(C[++w],at),R.BR=G(C[++w],at);break}case n.ARC:{var vt=0,ut=C[++w],ct=C[++w],Ft=C[++w],Tt=C[++w],Ct=C[++w],dt=C[++w],It=C[++w];for(Ct-=Tt,dt?Ct<-B?Ct=-B:Ct>0&&(Ct=-B+Ct%B):Ct>B?Ct=B:Ct<0&&(Ct=B+Ct%B),Z===null&&(Z=new a(ut+Math.cos(Tt)*Ft,ct+Math.sin(Tt)*Ft,E),V.push(Z),vt+=D);vt<1+It;)F=Ct*vt+Tt,L=ut+Math.cos(F)*Ft,O=ct+Math.sin(F)*Ft,Z.points.push(new l(L,O,E)),vt+=D;F=Ct+Tt,L=ut+Math.cos(F)*Ft,O=ct+Math.sin(F)*Ft,Z.points.push(new l(L,O,E));break}case n.FILL_RECT:{x.batchFillRect(C[++w],C[++w],C[++w],C[++w],T,y);break}case n.FILL_TRIANGLE:{x.batchFillTriangle(C[++w],C[++w],C[++w],C[++w],C[++w],C[++w],T,y);break}case n.STROKE_TRIANGLE:{x.batchStrokeTriangle(C[++w],C[++w],C[++w],C[++w],C[++w],C[++w],E,T,y);break}case n.LINE_TO:{Z!==null?Z.points.push(new l(C[++w],C[++w],E)):(Z=new a(C[++w],C[++w],E),V.push(Z));break}case n.MOVE_TO:{Z=new a(C[++w],C[++w],E),V.push(Z);break}case n.SAVE:{u.push(T.copyToArray());break}case n.RESTORE:{T.copyFromArray(u.pop());break}case n.TRANSLATE:{ut=C[++w],ct=C[++w],T.translate(ut,ct);break}case n.SCALE:{ut=C[++w],ct=C[++w],T.scale(ut,ct);break}case n.ROTATE:{T.rotate(C[++w]);break}}v.pipelines.postBatch(p)}};i.exports=f},function(i,d,e){var n=e(1),h=e(1);n=e(1066),h=e(1067),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h),h.pipeline.batchSprite(h,r,o)};i.exports=e},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h),n.batchSprite(h,h.frame,r,o)};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1069),h=e(1070),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h),this.pipeline.batchSprite(h,r,o)};i.exports=e},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h),n.batchSprite(h,h.frame,r,o)};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1072),h=e(1073),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d){var e=function(n,h,r){var o=h.list,l=o.length;if(l!==0){h.depthSort(),n.pipelines.preBatch(h);var a=h.blendMode!==-1;a||n.setBlendMode(0);for(var u=h.alpha,c=0;c<l;c++){var f=o[c];if(!!f.willRender(r)){var v,p,g,m;if(f.alphaTopLeft!==void 0)v=f.alphaTopLeft,p=f.alphaTopRight,g=f.alphaBottomLeft,m=f.alphaBottomRight;else{var x=f.alpha;v=x,p=x,g=x,m=x}!a&&f.blendMode!==n.currentBlendMode&&n.setBlendMode(f.blendMode);var y=f.mask;y&&y.preRenderWebGL(n,f,r);var T=f.type;T!==n.currentType&&(n.newType=!0,n.currentType=T),n.nextTypeMatch=c<l-1?o[c+1].type===n.currentType:!1,f.setAlpha(v*u,p*u,g*u,m*u),f.renderWebGL(n,f,r),f.setAlpha(v,p,g,m),y&&y.postRenderWebGL(n,r),n.newType=!1}}n.pipelines.postBatch(h)}};i.exports=e},function(i,d){var e=function(n,h,r){var o=h.list;if(o.length!==0){h.depthSort();var l=h.blendMode!==-1;l||n.setBlendMode(0);var a=h._alpha;h.mask&&h.mask.preRenderCanvas(n,null,r);for(var u=0;u<o.length;u++){var c=o[u];if(!!c.willRender(r)){var f=c.alpha;!l&&c.blendMode!==n.currentBlendMode&&n.setBlendMode(c.blendMode),c.setAlpha(f*a),c.renderCanvas(n,c,r),c.setAlpha(f)}}h.mask&&h.mask.postRenderCanvas(n)}};i.exports=e},function(i,d,e){i.exports={EmitterOp:e(449),GravityWell:e(450),Particle:e(451),ParticleEmitter:e(452),ParticleEmitterManager:e(220),Zones:e(1078)}},function(i,d,e){var n=e(1),h=e(1);n=e(1076),h=e(1077),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(25),h=e(12),r=new n,o=new n,l=new n,a=new n,u=function(c,f,v,p){var g=f.emitters.list,m=g.length;if(m!==0){var x=c.pipelines.set(f.pipeline),y=r,T=o,C=l,S=a;p?(S.loadIdentity(),S.multiply(p),S.translate(f.x,f.y),S.rotate(f.rotation),S.scale(f.scaleX,f.scaleY)):S.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var E=v.roundPixels,M=f.defaultFrame.glTexture,R=h.getTintAppendFloatAlpha,L=x.setGameObject(f,f.defaultFrame);c.pipelines.preBatch(f);for(var O=0;O<m;O++){var F=g[O],D=F.alive,B=D.length;if(!(!F.visible||B===0)){v.addToRenderList(F);var N=F.scrollFactorX,V=F.scrollFactorY;c.setBlendMode(F.blendMode),F.mask&&(F.mask.preRenderWebGL(c,F,v),c.pipelines.set(f.pipeline));for(var X=0,K=0;K<B;K++){var Z=D[K],G=Z.alpha*v.alpha;if(!(G<=0)){C.applyITRS(Z.x,Z.y,Z.rotation,Z.scaleX,Z.scaleY),y.copyFrom(v.matrix),y.multiplyWithOffset(S,-v.scrollX*N,-v.scrollY*V),C.e=Z.x,C.f=Z.y,y.multiply(C,T);var w=Z.frame,b=-w.halfWidth,Y=-w.halfHeight,U=b+w.width,W=Y+w.height,H=T.getXRound(b,Y,E),J=T.getYRound(b,Y,E),q=T.getXRound(b,W,E),_=T.getYRound(b,W,E),nt=T.getXRound(U,W,E),rt=T.getYRound(U,W,E),at=T.getXRound(U,Y,E),vt=T.getYRound(U,Y,E),ut=R(Z.tint,G);x.batchQuad(F,H,J,q,_,nt,rt,at,vt,w.u0,w.v0,w.u1,w.v1,ut,ut,ut,ut,X,M,L)}}F.mask&&F.mask.postRenderWebGL(c,v)}}c.pipelines.postBatch(f)}};i.exports=u},function(i,d,e){var n=e(25),h=new n,r=new n,o=new n,l=new n,a=function(u,c,f,v){var p=c.emitters.list,g=p.length;if(g!==0){var m=h.copyFrom(f.matrix),x=r,y=o,T=l;v?(T.loadIdentity(),T.multiply(v),T.translate(c.x,c.y),T.rotate(c.rotation),T.scale(c.scaleX,c.scaleY)):T.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);for(var C=u.currentContext,S=f.roundPixels,E=0;E<g;E++){var M=p[E],R=M.alive,L=R.length;if(!(!M.visible||L===0)){f.addToRenderList(M);var O=M.scrollFactorX,F=M.scrollFactorY;C.save(),C.globalCompositeOperation=u.blendModes[M.blendMode];for(var D=0;D<L;D++){var B=R[D],N=B.alpha*f.alpha;if(!(N<=0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),m.copyFrom(f.matrix),m.multiplyWithOffset(T,-f.scrollX*O,-f.scrollY*F),y.e=B.x,y.f=B.y,m.multiply(y,x);var V=B.frame,X=V.canvasData,K=-V.halfWidth,Z=-V.halfHeight;C.globalAlpha=N,C.save(),x.setToContext(C),S&&(K=Math.round(K),Z=Math.round(Z)),C.imageSmoothingEnabled=!(!u.antialias||V.source.scaleMode),C.drawImage(V.source.image,X.x,X.y,X.width,X.height,K,Z,X.width,X.height),C.restore()}}C.restore()}}}};i.exports=a},function(i,d,e){i.exports={DeathZone:e(453),EdgeZone:e(454),RandomZone:e(456)}},function(i,d,e){var n=e(1),h=e(1);n=e(1080),h=e(1081),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(12),h=function(r,o,l,a){l.addToRenderList(o);var u=l.alpha,c=o.renderTarget,f=c.width,v=c.height,p=n.getTintAppendFloatAlpha,g=r.pipelines.set(o.pipeline),m=g.setTexture2D(c.texture);r.pipelines.preBatch(o),g.batchTexture(o,c.texture,f,v,o.x,o.y,f,v,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,f,v,p(o.tintTopLeft,u*o._alphaTL),p(o.tintTopRight,u*o._alphaTR),p(o.tintBottomLeft,u*o._alphaBL),p(o.tintBottomRight,u*o._alphaBR),o.tintFill,0,0,l,a,!0,m),r.resetTextures(),r.pipelines.postBatch(o)};i.exports=h},function(i,d){var e=function(n,h,r,o){r.addToRenderList(h),n.batchSprite(h,h.frame,r,o)};i.exports=e},function(i,d,e){var n=e(1083),h=e(17),r={Parse:e(1084)};r=h(!1,r,n),i.exports=r},function(i,d){var e={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};i.exports=e},function(i,d,e){var n=e(6),h=function(r,o){var l=o.width,a=o.height,u=Math.floor(l/2),c=Math.floor(a/2),f=n(o,"chars","");if(f!==""){var v=n(o,"image",""),p=r.sys.textures.getFrame(v),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=n(o,"offset.x",0),C=n(o,"offset.y",0),S=n(o,"spacing.x",0),E=n(o,"spacing.y",0),M=n(o,"lineSpacing",0),R=n(o,"charsPerRow",null);R===null&&(R=x/l,R>f.length&&(R=f.length));for(var L=T,O=C,F={retroFont:!0,font:v,size:l,lineHeight:a+M,chars:{}},D=0,B=0;B<f.length;B++){var N=f.charCodeAt(B),V=(g+L)/x,X=(m+O)/y,K=(g+L+l)/x,Z=(m+O+a)/y;F.chars[N]={x:L,y:O,width:l,height:a,centerX:u,centerY:c,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:V,v0:X,u1:K,v1:Z},D++,D===R?(D=0,L=T,O+=a+E):L+=l+S}var G={data:F,frame:null,texture:v};return G}};i.exports=h},function(i,d,e){var n=e(1),h=e(1);n=e(1086),h=e(1087),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(12),r=function(o,l,a,u){a.addToRenderList(l);var c=o.pipelines.set(l.pipeline,l),f=n(l,a,u).calc,v=l.vertices,p=l.uv,g=l.colors,m=l.alphas,x=l.alpha,y=h.getTintAppendFloatAlpha,T=a.roundPixels,C=v.length,S=Math.floor(C*.5);c.flush(),o.pipelines.preBatch(l);var E=c.setGameObject(l),M=c.vertexViewF32,R=c.vertexViewU32,L=c.vertexCount*c.currentShader.vertexComponentCount-1,O=0,F=l.tintFill;l.dirty&&l.updateVertices();for(var D=l.debugCallback,B=[],N=0;N<C;N+=2){var V=v[N+0],X=v[N+1],K=V*f.a+X*f.c+f.e,Z=V*f.b+X*f.d+f.f;T&&(K=Math.round(K),Z=Math.round(Z)),M[++L]=K,M[++L]=Z,M[++L]=p[N+0],M[++L]=p[N+1],M[++L]=E,M[++L]=F,R[++L]=y(g[O],a.alpha*(m[O]*x)),O++,D&&(B[N+0]=K,B[N+1]=Z)}D&&D.call(l,l,C,B),c.vertexCount+=S,o.pipelines.postBatch(l)};i.exports=r},function(i,d){var e=function(){};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1089),h=e(1090),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(12),h=function(r,o,l,a){if(!(o.width===0||o.height===0)){l.addToRenderList(o);var u=o.frame,c=u.width,f=u.height,v=n.getTintAppendFloatAlpha,p=r.pipelines.set(o.pipeline,o),g=p.setTexture2D(u.glTexture,o);r.pipelines.preBatch(o),p.batchTexture(o,u.glTexture,c,f,o.x,o.y,c/o.style.resolution,f/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,c,f,v(o.tintTopLeft,l.alpha*o._alphaTL),v(o.tintTopRight,l.alpha*o._alphaTR),v(o.tintBottomLeft,l.alpha*o._alphaBL),v(o.tintBottomRight,l.alpha*o._alphaBR),o.tintFill,0,0,l,a,!1,g),r.pipelines.postBatch(o)}};i.exports=h},function(i,d){var e=function(n,h,r,o){h.width===0||h.height===0||(r.addToRenderList(h),n.batchSprite(h,h.frame,r,o))};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1092),h=e(1093),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(12),h=function(r,o,l,a){o.updateCanvas();var u=o.width,c=o.height;if(!(u===0||c===0)){l.addToRenderList(o),r.pipelines.preBatch(o);var f=n.getTintAppendFloatAlpha,v=r.pipelines.set(o.pipeline,o),p=v.setTexture2D(o.fillPattern,o);v.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,u,c,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*u,o.originY*c,0,0,u,c,f(o.tintTopLeft,l.alpha*o._alphaTL),f(o.tintTopRight,l.alpha*o._alphaTR),f(o.tintBottomLeft,l.alpha*o._alphaBL),f(o.tintBottomRight,l.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,l,a,!1,p),r.pipelines.postBatch(o)}};i.exports=h},function(i,d){var e=function(n,h,r,o){h.updateCanvas(),r.addToRenderList(h),n.batchSprite(h,h.frame,r,o)};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1095),h=e(1096),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d){var e=function(n,h,r,o){h.videoTexture&&(r.addToRenderList(h),h.pipeline.batchSprite(h,r,o))};i.exports=e},function(i,d){var e=function(n,h,r,o){h.videoTexture&&(r.addToRenderList(h),n.batchSprite(h,h.frame,r,o))};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1098),h=e(1099),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(114),r=e(81),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=n(a,u,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=u.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&h(f,p,a,x,g,m),a.isStroked&&r(f,a,x,g,m),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(36),h=e(48),r=e(60),o=e(30),l=function(a,u,c,f){c.addToRenderList(u);var v=a.currentContext;if(o(a,v,u,c,f)){var p=u.radius;v.beginPath(),v.arc(p-u.originX*(p*2),p-u.originY*(p*2),p,n(u._startAngle),n(u._endAngle),u.anticlockwise),u.closePath&&v.closePath(),u.isFilled&&(h(v,u),v.fill()),u.isStroked&&(r(v,u),v.stroke()),v.restore()}};i.exports=l},function(i,d,e){var n=e(1),h=e(1);n=e(1101),h=e(1102),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(114),h=e(19),r=e(81),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=h(a,u,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX+a._curveBounds.x,m=a._displayOriginY+a._curveBounds.y,x=u.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&r(f,a,x,g,m),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=a._displayOriginX+a._curveBounds.x,p=a._displayOriginY+a._curveBounds.y,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}a.closePath&&f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(h(f,a),f.stroke()),f.restore()}};i.exports=o},function(i,d,e){var n=e(1),h=e(1);n=e(1104),h=e(1105),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(114),h=e(19),r=e(81),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=h(a,u,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=u.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&r(f,a,x,g,m),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(h(f,a),f.stroke()),f.restore()}};i.exports=o},function(i,d,e){var n=e(1),h=e(1);n=e(1107),h=e(1108),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(12),r=function(o,l,a,u){a.addToRenderList(l);var c=o.pipelines.set(l.pipeline),f=n(l,a,u),v=c.calcMatrix.copyFrom(f.calc);v.translate(-l._displayOriginX,-l._displayOriginY);var p=a.alpha*l.alpha,g=l.width,m=l.height,x=l.cellWidth,y=l.cellHeight,T=Math.ceil(g/x),C=Math.ceil(m/y),S=x,E=y,M=x-(T*x-g),R=y-(C*y-m),L,O,F=l.showCells,D=l.showAltCells,B=l.showOutline,N=0,V=0,X=0,K=0,Z=0;if(B&&(S--,E--,M===x&&M--,R===y&&R--),o.pipelines.preBatch(l),F&&l.fillAlpha>0)for(L=c.fillTint,O=h.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*p),L.TL=O,L.TR=O,L.BL=O,L.BR=O,V=0;V<C;V++)for(D&&(X=V%2),N=0;N<T;N++){if(D&&X){X=0;continue}X++,K=N<T-1?S:M,Z=V<C-1?E:R,c.batchFillRect(N*x,V*y,K,Z)}if(D&&l.altFillAlpha>0)for(L=c.fillTint,O=h.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*p),L.TL=O,L.TR=O,L.BL=O,L.BR=O,V=0;V<C;V++)for(D&&(X=V%2),N=0;N<T;N++){if(D&&!X){X=1;continue}X=0,K=N<T-1?S:M,Z=V<C-1?E:R,c.batchFillRect(N*x,V*y,K,Z)}if(B&&l.outlineFillAlpha>0){var G=c.strokeTint,w=h.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*p);for(G.TL=w,G.TR=w,G.BL=w,G.BR=w,N=1;N<T;N++){var b=N*x;c.batchLine(b,0,b,m,1,1,1,0,!1)}for(V=1;V<C;V++){var Y=V*y;c.batchLine(0,Y,g,Y,1,1,1,0,!1)}}o.pipelines.postBatch(l)};i.exports=r},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=-a._displayOriginX,p=-a._displayOriginY,g=u.alpha*a.alpha,m=a.width,x=a.height,y=a.cellWidth,T=a.cellHeight,C=Math.ceil(m/y),S=Math.ceil(x/T),E=y,M=T,R=y-(C*y-m),L=T-(S*T-x),O=a.showCells,F=a.showAltCells,D=a.showOutline,B=0,N=0,V=0,X=0,K=0;if(D&&(E--,M--,R===y&&R--,L===T&&L--),O&&a.fillAlpha>0)for(n(f,a),N=0;N<S;N++)for(F&&(V=N%2),B=0;B<C;B++){if(F&&V){V=0;continue}V++,X=B<C-1?E:R,K=N<S-1?M:L,f.fillRect(v+B*y,p+N*T,X,K)}if(F&&a.altFillAlpha>0)for(n(f,a,a.altFillColor,a.altFillAlpha*g),N=0;N<S;N++)for(F&&(V=N%2),B=0;B<C;B++){if(F&&!V){V=1;continue}V=0,X=B<C-1?E:R,K=N<S-1?M:L,f.fillRect(v+B*y,p+N*T,X,K)}if(D&&a.outlineFillAlpha>0){for(h(f,a,a.outlineFillColor,a.outlineFillAlpha*g),B=1;B<C;B++){var Z=B*y;f.beginPath(),f.moveTo(Z+v,p),f.lineTo(Z+v,x+p),f.stroke()}for(N=1;N<S;N++){var G=N*T;f.beginPath(),f.moveTo(v,G+p),f.lineTo(v+m,G+p),f.stroke()}}f.restore()}};i.exports=o},function(i,d,e){var n=e(1),h=e(1);n=e(1110),h=e(1111),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(12),r=function(o,l,a,u){a.addToRenderList(l);var c=o.pipelines.set(l.pipeline),f=n(l,a,u),v=c.calcMatrix.copyFrom(f.calc),p=l.width,g=l.height,m=p/2,x=p/l.projection,y=a.alpha*l.alpha;if(!!l.isFilled){var T,C,S,E,M,R,L,O,F;o.pipelines.preBatch(l),l.showTop&&(T=h.getTintAppendFloatAlpha(l.fillTop,y),C=v.getX(-m,-g),S=v.getY(-m,-g),E=v.getX(0,-x-g),M=v.getY(0,-x-g),R=v.getX(m,-g),L=v.getY(m,-g),O=v.getX(0,x-g),F=v.getY(0,x-g),c.batchQuad(l,C,S,E,M,R,L,O,F,0,0,1,1,T,T,T,T,2)),l.showLeft&&(T=h.getTintAppendFloatAlpha(l.fillLeft,y),C=v.getX(-m,0),S=v.getY(-m,0),E=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),L=v.getY(0,x-g),O=v.getX(-m,-g),F=v.getY(-m,-g),c.batchQuad(l,C,S,E,M,R,L,O,F,0,0,1,1,T,T,T,T,2)),l.showRight&&(T=h.getTintAppendFloatAlpha(l.fillRight,y),C=v.getX(m,0),S=v.getY(m,0),E=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),L=v.getY(0,x-g),O=v.getX(m,-g),F=v.getY(m,-g),c.batchQuad(l,C,S,E,M,R,L,O,F,0,0,1,1,T,T,T,T,2)),o.pipelines.postBatch(l)}};i.exports=r},function(i,d,e){var n=e(48),h=e(30),r=function(o,l,a,u){a.addToRenderList(l);var c=o.currentContext;if(h(o,c,l,a,u)&&l.isFilled){var f=l.width,v=l.height,p=f/2,g=f/l.projection;l.showTop&&(n(c,l,l.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(p,-1),c.lineTo(0,g-1),c.lineTo(-p,-1),c.lineTo(-p,-v),c.fill()),l.showLeft&&(n(c,l,l.fillLeft),c.beginPath(),c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(-p,-v),c.lineTo(-p,0),c.fill()),l.showRight&&(n(c,l,l.fillRight),c.beginPath(),c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(p,-v),c.lineTo(p,0),c.fill()),c.restore()}};i.exports=r},function(i,d,e){var n=e(1),h=e(1);n=e(1113),h=e(1114),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(12),r=function(o,l,a,u){a.addToRenderList(l);var c=o.pipelines.set(l.pipeline),f=n(l,a,u),v=c.calcMatrix.copyFrom(f.calc),p=l.width,g=l.height,m=p/2,x=p/l.projection,y=l.isReversed,T=a.alpha*l.alpha;if(!!l.isFilled){o.pipelines.preBatch(l);var C,S,E,M,R,L,O;if(l.showTop&&y){C=h.getTintAppendFloatAlpha(l.fillTop,T),S=v.getX(-m,-g),E=v.getY(-m,-g),M=v.getX(0,-x-g),R=v.getY(0,-x-g),L=v.getX(m,-g),O=v.getY(m,-g);var F=v.getX(0,x-g),D=v.getY(0,x-g);c.batchQuad(l,S,E,M,R,L,O,F,D,0,0,1,1,C,C,C,C,2)}l.showLeft&&(C=h.getTintAppendFloatAlpha(l.fillLeft,T),y?(S=v.getX(-m,-g),E=v.getY(-m,-g),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)):(S=v.getX(-m,0),E=v.getY(-m,0),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)),c.batchTri(l,S,E,M,R,L,O,0,0,1,1,C,C,C,2)),l.showRight&&(C=h.getTintAppendFloatAlpha(l.fillRight,T),y?(S=v.getX(m,-g),E=v.getY(m,-g),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)):(S=v.getX(m,0),E=v.getY(m,0),M=v.getX(0,x),R=v.getY(0,x),L=v.getX(0,x-g),O=v.getY(0,x-g)),c.batchTri(l,S,E,M,R,L,O,0,0,1,1,C,C,C,2)),o.pipelines.postBatch(l)}};i.exports=r},function(i,d,e){var n=e(48),h=e(30),r=function(o,l,a,u){a.addToRenderList(l);var c=o.currentContext;if(h(o,c,l,a,u)&&l.isFilled){var f=l.width,v=l.height,p=f/2,g=f/l.projection,m=l.isReversed;l.showTop&&m&&(n(c,l,l.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(0,g-v),c.fill()),l.showLeft&&(n(c,l,l.fillLeft),c.beginPath(),m?(c.moveTo(-p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),l.showRight&&(n(c,l,l.fillRight),c.beginPath(),m?(c.moveTo(p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),c.restore()}};i.exports=r},function(i,d,e){var n=e(1),h=e(1);n=e(1116),h=e(1117),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(12),r=function(o,l,a,u){a.addToRenderList(l);var c=o.pipelines.set(l.pipeline),f=n(l,a,u);c.calcMatrix.copyFrom(f.calc);var v=l._displayOriginX,p=l._displayOriginY,g=a.alpha*l.alpha;if(o.pipelines.preBatch(l),l.isStroked){var m=c.strokeTint,x=h.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=l._startWidth,T=l._endWidth;c.batchLine(l.geom.x1-v,l.geom.y1-p,l.geom.x2-v,l.geom.y2-p,y,T,1,0,!1,f.sprite,f.camera)}o.pipelines.postBatch(l)};i.exports=r},function(i,d,e){var n=e(60),h=e(30),r=function(o,l,a,u){a.addToRenderList(l);var c=o.currentContext;if(h(o,c,l,a,u)){var f=l._displayOriginX,v=l._displayOriginY;l.isStroked&&(n(c,l),c.beginPath(),c.moveTo(l.geom.x1-f,l.geom.y1-v),c.lineTo(l.geom.x2-f,l.geom.y2-v),c.stroke()),c.restore()}};i.exports=r},function(i,d,e){var n=e(1),h=e(1);n=e(1119),h=e(1120),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(114),h=e(19),r=e(81),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=h(a,u,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=u.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&r(f,a,x,g,m),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(h(f,a),f.stroke()),f.restore()}};i.exports=o},function(i,d,e){var n=e(1),h=e(1);n=e(1122),h=e(1123),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(81),r=e(12),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=n(a,u,c);f.calcMatrix.copyFrom(v.calc);var p=a._displayOriginX,g=a._displayOriginY,m=u.alpha*a.alpha;if(l.pipelines.preBatch(a),a.isFilled){var x=f.fillTint,y=r.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,f.batchFillRect(-p,-g,a.width,a.height)}a.isStroked&&h(f,a,m,p,g),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=a._displayOriginX,p=a._displayOriginY;a.isFilled&&(n(f,a),f.fillRect(-v,-p,a.width,a.height)),a.isStroked&&(h(f,a),f.beginPath(),f.rect(-v,-p,a.width,a.height),f.stroke()),f.restore()}};i.exports=o},function(i,d,e){var n=e(1),h=e(1);n=e(1125),h=e(1126),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(114),h=e(19),r=e(81),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=h(a,u,c),p=f.calcMatrix.copyFrom(v.calc),g=a._displayOriginX,m=a._displayOriginY,x=u.alpha*a.alpha;l.pipelines.preBatch(a),a.isFilled&&n(f,p,a,x,g,m),a.isStroked&&r(f,a,x,g,m),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;f.beginPath(),f.moveTo(x,y),a.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;f.lineTo(C,S)}f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(h(f,a),f.stroke()),f.restore()}};i.exports=o},function(i,d,e){var n=e(1),h=e(1);n=e(1128),h=e(1129),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=e(81),r=e(12),o=function(l,a,u,c){u.addToRenderList(a);var f=l.pipelines.set(a.pipeline),v=n(a,u,c);f.calcMatrix.copyFrom(v.calc);var p=a._displayOriginX,g=a._displayOriginY,m=u.alpha*a.alpha;if(l.pipelines.preBatch(a),a.isFilled){var x=f.fillTint,y=r.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=a.geom.x1-p,C=a.geom.y1-g,S=a.geom.x2-p,E=a.geom.y2-g,M=a.geom.x3-p,R=a.geom.y3-g;f.batchFillTriangle(T,C,S,E,M,R,v.sprite,v.camera)}a.isStroked&&h(f,a,m,p,g),l.pipelines.postBatch(a)};i.exports=o},function(i,d,e){var n=e(48),h=e(60),r=e(30),o=function(l,a,u,c){u.addToRenderList(a);var f=l.currentContext;if(r(l,f,a,u,c)){var v=a._displayOriginX,p=a._displayOriginY,g=a.geom.x1-v,m=a.geom.y1-p,x=a.geom.x2-v,y=a.geom.y2-p,T=a.geom.x3-v,C=a.geom.y3-p;f.beginPath(),f.moveTo(g,m),f.lineTo(x,y),f.lineTo(T,C),f.closePath(),a.isFilled&&(n(f,a),f.fill()),a.isStroked&&(h(f,a),f.stroke()),f.restore()}};i.exports=o},function(i,d,e){var n=e(213),h=e(5);h.register("blitter",function(r,o,l,a){return this.displayList.add(new n(this.scene,r,o,l,a))})},function(i,d,e){var n=e(214),h=e(5);h.register("container",function(r,o,l){return this.displayList.add(new n(this.scene,r,o,l))})},function(i,d,e){var n=e(442),h=e(5);h.register("dom",function(r,o,l,a,u){var c=new n(this.scene,r,o,l,a,u);return this.displayList.add(c),c})},function(i,d,e){var n=e(215),h=e(5);h.register("dynamicBitmapText",function(r,o,l,a,u){return this.displayList.add(new n(this.scene,r,o,l,a,u))})},function(i,d,e){var n=e(444),h=e(5);h.register("extern",function(){var r=new n(this.scene);return this.displayList.add(r),r})},function(i,d,e){var n=e(216),h=e(5);h.register("graphics",function(r){return this.displayList.add(new n(this.scene,r))})},function(i,d,e){var n=e(113),h=e(5);h.register("group",function(r,o){return this.updateList.add(new n(this.scene,r,o))})},function(i,d,e){var n=e(125),h=e(5);h.register("image",function(r,o,l,a){return this.displayList.add(new n(this.scene,r,o,l,a))})},function(i,d,e){var n=e(219),h=e(5);h.register("layer",function(r){return this.displayList.add(new n(this.scene,r))})},function(i,d,e){var n=e(5),h=e(220);n.register("particles",function(r,o,l){return this.displayList.add(new h(this.scene,r,o,l))})},function(i,d,e){var n=e(5),h=e(457);n.register("follower",function(r,o,l,a,u){var c=new h(this.scene,r,o,l,a,u);return this.displayList.add(c),this.updateList.add(c),c})},function(i,d,e){var n=e(5),h=e(221);n.register("renderTexture",function(r,o,l,a,u,c){return this.displayList.add(new h(this.scene,r,o,l,a,u,c))})},function(i,d,e){var n=e(223),h=e(5);h.register("rope",function(r,o,l,a,u,c,f,v){return this.displayList.add(new n(this.scene,r,o,l,a,u,c,f,v))})},function(i,d,e){var n=e(5),h=e(73);n.register("sprite",function(r,o,l,a){var u=new h(this.scene,r,o,l,a);return this.displayList.add(u),u})},function(i,d,e){var n=e(148),h=e(5);h.register("bitmapText",function(r,o,l,a,u,c){return this.displayList.add(new n(this.scene,r,o,l,a,u,c))})},function(i,d,e){var n=e(224),h=e(5);h.register("text",function(r,o,l,a){return this.displayList.add(new n(this.scene,r,o,l,a))})},function(i,d,e){var n=e(225),h=e(5);h.register("tileSprite",function(r,o,l,a,u,c){return this.displayList.add(new n(this.scene,r,o,l,a,u,c))})},function(i,d,e){var n=e(129),h=e(5);h.register("zone",function(r,o,l,a){return this.displayList.add(new n(this.scene,r,o,l,a))})},function(i,d,e){var n=e(226),h=e(5);h.register("video",function(r,o,l){return this.displayList.add(new n(this.scene,r,o,l))})},function(i,d,e){var n=e(461),h=e(5);h.register("arc",function(r,o,l,a,u,c,f,v){return this.displayList.add(new n(this.scene,r,o,l,a,u,c,f,v))}),h.register("circle",function(r,o,l,a,u){return this.displayList.add(new n(this.scene,r,o,l,0,360,!1,a,u))})},function(i,d,e){var n=e(5),h=e(462);n.register("curve",function(r,o,l,a,u){return this.displayList.add(new h(this.scene,r,o,l,a,u))})},function(i,d,e){var n=e(463),h=e(5);h.register("ellipse",function(r,o,l,a,u,c){return this.displayList.add(new n(this.scene,r,o,l,a,u,c))})},function(i,d,e){var n=e(5),h=e(464);n.register("grid",function(r,o,l,a,u,c,f,v,p,g){return this.displayList.add(new h(this.scene,r,o,l,a,u,c,f,v,p,g))})},function(i,d,e){var n=e(5),h=e(465);n.register("isobox",function(r,o,l,a,u,c,f){return this.displayList.add(new h(this.scene,r,o,l,a,u,c,f))})},function(i,d,e){var n=e(5),h=e(466);n.register("isotriangle",function(r,o,l,a,u,c,f,v){return this.displayList.add(new h(this.scene,r,o,l,a,u,c,f,v))})},function(i,d,e){var n=e(5),h=e(467);n.register("line",function(r,o,l,a,u,c,f,v){return this.displayList.add(new h(this.scene,r,o,l,a,u,c,f,v))})},function(i,d,e){var n=e(5),h=e(468);n.register("polygon",function(r,o,l,a,u){return this.displayList.add(new h(this.scene,r,o,l,a,u))})},function(i,d,e){var n=e(5),h=e(473);n.register("rectangle",function(r,o,l,a,u,c){return this.displayList.add(new h(this.scene,r,o,l,a,u,c))})},function(i,d,e){var n=e(474),h=e(5);h.register("star",function(r,o,l,a,u,c,f){return this.displayList.add(new n(this.scene,r,o,l,a,u,c,f))})},function(i,d,e){var n=e(5),h=e(475);n.register("triangle",function(r,o,l,a,u,c,f,v,p,g){return this.displayList.add(new h(this.scene,r,o,l,a,u,c,f,v,p,g))})},function(i,d,e){var n=e(213),h=e(28),r=e(16),o=e(13);r.register("blitter",function(l,a){l===void 0&&(l={});var u=o(l,"key",null),c=o(l,"frame",null),f=new n(this.scene,0,0,u,c);return a!==void 0&&(l.add=a),h(this.scene,f,l),f})},function(i,d,e){var n=e(28),h=e(214),r=e(16),o=e(13);r.register("container",function(l,a){l===void 0&&(l={});var u=o(l,"x",0),c=o(l,"y",0),f=o(l,"children",null),v=new h(this.scene,u,c,f);return a!==void 0&&(l.add=a),n(this.scene,v,l),v})},function(i,d,e){var n=e(215),h=e(28),r=e(16),o=e(13);r.register("dynamicBitmapText",function(l,a){l===void 0&&(l={});var u=o(l,"font",""),c=o(l,"text",""),f=o(l,"size",!1),v=new n(this.scene,0,0,u,c,f);return a!==void 0&&(l.add=a),h(this.scene,v,l),v})},function(i,d,e){var n=e(16),h=e(216);n.register("graphics",function(r,o){r===void 0&&(r={}),o!==void 0&&(r.add=o);var l=new h(this.scene,r);return r.add&&this.scene.sys.displayList.add(l),l})},function(i,d,e){var n=e(16),h=e(113);n.register("group",function(r){return new h(this.scene,null,r)})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(125);h.register("image",function(l,a){l===void 0&&(l={});var u=r(l,"key",null),c=r(l,"frame",null),f=new o(this.scene,0,0,u,c);return a!==void 0&&(l.add=a),n(this.scene,f,l),f})},function(i,d,e){var n=e(28),h=e(219),r=e(16),o=e(13);r.register("layer",function(l,a){l===void 0&&(l={});var u=o(l,"children",null),c=new h(this.scene,u);return a!==void 0&&(l.add=a),n(this.scene,c,l),c})},function(i,d,e){var n=e(16),h=e(13),r=e(2),o=e(220);n.register("particles",function(l,a){l===void 0&&(l={});var u=h(l,"key",null),c=h(l,"frame",null),f=r(l,"emitters",null),v=new o(this.scene,u,c,f);a!==void 0&&(l.add=a);var p=r(l,"add",!1);return p?this.displayList.add(v):this.updateList.add(v),v})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(221);h.register("renderTexture",function(l,a){l===void 0&&(l={});var u=r(l,"x",0),c=r(l,"y",0),f=r(l,"width",32),v=r(l,"height",32),p=r(l,"key",void 0),g=r(l,"frame",void 0),m=new o(this.scene,u,c,f,v,p,g);return a!==void 0&&(l.add=a),n(this.scene,m,l),m})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(6),l=e(223);h.register("rope",function(a,u){a===void 0&&(a={});var c=r(a,"key",null),f=r(a,"frame",null),v=r(a,"horizontal",!0),p=o(a,"points",void 0),g=o(a,"colors",void 0),m=o(a,"alphas",void 0),x=new l(this.scene,0,0,c,f,p,v,g,m);return u!==void 0&&(a.add=u),n(this.scene,x,a),a.add||this.updateList.add(x),x})},function(i,d,e){var n=e(28),h=e(439),r=e(16),o=e(13),l=e(73);r.register("sprite",function(a,u){a===void 0&&(a={});var c=o(a,"key",null),f=o(a,"frame",null),v=new l(this.scene,0,0,c,f);return u!==void 0&&(a.add=u),n(this.scene,v,a),h(v,a),v})},function(i,d,e){var n=e(148),h=e(28),r=e(16),o=e(13),l=e(6);r.register("bitmapText",function(a,u){a===void 0&&(a={});var c=l(a,"font",""),f=o(a,"text",""),v=o(a,"size",!1),p=l(a,"align",0),g=new n(this.scene,0,0,c,f,v,p);return u!==void 0&&(a.add=u),h(this.scene,g,a),g})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(224);h.register("text",function(l,a){l===void 0&&(l={});var u=r(l,"text",""),c=r(l,"style",null),f=r(l,"padding",null);f!==null&&(c.padding=f);var v=new o(this.scene,0,0,u,c);return a!==void 0&&(l.add=a),n(this.scene,v,l),v.autoRound=r(l,"autoRound",!0),v.resolution=r(l,"resolution",1),v})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(225);h.register("tileSprite",function(l,a){l===void 0&&(l={});var u=r(l,"x",0),c=r(l,"y",0),f=r(l,"width",512),v=r(l,"height",512),p=r(l,"key",""),g=r(l,"frame",""),m=new o(this.scene,u,c,f,v,p,g);return a!==void 0&&(l.add=a),n(this.scene,m,l),m})},function(i,d,e){var n=e(16),h=e(13),r=e(129);n.register("zone",function(o){var l=h(o,"x",0),a=h(o,"y",0),u=h(o,"width",1),c=h(o,"height",u);return new r(this.scene,l,a,u,c)})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(226);h.register("video",function(l,a){l===void 0&&(l={});var u=r(l,"key",null),c=new o(this.scene,0,0,u);return a!==void 0&&(l.add=a),n(this.scene,c,l),l.add||this.updateList.add(c),c})},function(i,d,e){var n=e(1),h=e(1);n=e(1177),h=e(1178),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=function(r,o,l,a){if(!!o.shader){if(l.addToRenderList(o),r.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var u=n(o,l,a).calc;(r.width!==o._rendererWidth||r.height!==o._rendererHeight)&&o.projOrtho(0,r.width,r.height,0),o.load(u.matrix),o.flush()}r.pipelines.rebind()}};i.exports=h},function(i,d){var e=function(){};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1180),h=e(1181),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=function(r,o,l,a){var u=o.faces,c=u.length;if(c!==0){l.addToRenderList(o);var f=r.pipelines.set(o.pipeline,o),v=n(o,l,a).calc,p=f.setGameObject(o),g=f.vertexViewF32,m=f.vertexViewU32,x=f.vertexCount*f.currentShader.vertexComponentCount-1,y=o.tintFill,T=[],C=o.debugCallback,S=v.a,E=v.b,M=v.c,R=v.d,L=v.e,O=v.f,F=o.viewPosition.z,D=o.hideCCW,B=l.roundPixels,N=l.alpha*o.alpha,V=0;r.pipelines.preBatch(o);for(var X=0;X<c;X++){var K=u[X];!K.isInView(l,D,F,N,S,E,M,R,L,O,B)||(f.shouldFlush(3)&&(f.flush(),x=0),x=K.load(g,m,x,p,y),V++,f.vertexCount+=3,C&&T.push(K))}o.totalFrame+=V,C&&C.call(o,o,T),r.pipelines.postBatch(o)}};i.exports=h},function(i,d){var e=function(){};i.exports=e},function(i,d,e){var n=e(1),h=e(1);n=e(1183),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(19),h=function(r,o,l,a){l.addToRenderList(o);var u=r.pipelines.set(o.pipeline),c=n(o,l,a).calc,f=o.width,v=o.height,p=-o._radius,g=-o._radius,m=p+f,x=g+v,y=c.getX(0,0),T=c.getY(0,0),C=c.getX(p,g),S=c.getY(p,g),E=c.getX(p,x),M=c.getY(p,x),R=c.getX(m,x),L=c.getY(m,x),O=c.getX(m,g),F=c.getY(m,g);r.pipelines.preBatch(o),u.batchPointLight(o,l,C,S,E,M,R,L,O,F,y,T),r.pipelines.postBatch(o)};i.exports=h},function(i,d,e){var n=e(229),h=e(5);h.register("shader",function(r,o,l,a,u,c,f){return this.displayList.add(new n(this.scene,r,o,l,a,u,c,f))})},function(i,d,e){var n=e(230),h=e(5);h.register("mesh",function(r,o,l,a,u,c,f,v,p,g,m){return this.displayList.add(new n(this.scene,r,o,l,a,u,c,f,v,p,g,m))})},function(i,d,e){var n=e(5),h=e(150);n.register("pointlight",function(r,o,l,a,u,c){return this.displayList.add(new h(this.scene,r,o,l,a,u,c))})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(229);h.register("shader",function(l,a){l===void 0&&(l={});var u=r(l,"key",null),c=r(l,"x",0),f=r(l,"y",0),v=r(l,"width",128),p=r(l,"height",128),g=new o(this.scene,u,c,f,v,p);return a!==void 0&&(l.add=a),n(this.scene,g,l),g})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(6),l=e(230);h.register("mesh",function(a,u){a===void 0&&(a={});var c=r(a,"key",null),f=r(a,"frame",null),v=o(a,"vertices",[]),p=o(a,"uvs",[]),g=o(a,"indicies",[]),m=o(a,"containsZ",!1),x=o(a,"normals",[]),y=o(a,"colors",16777215),T=o(a,"alphas",1),C=new l(this.scene,0,0,c,f,v,p,g,m,x,y,T);return u!==void 0&&(a.add=u),n(this.scene,C,a),C})},function(i,d,e){var n=e(28),h=e(16),r=e(13),o=e(150);h.register("pointlight",function(l,a){l===void 0&&(l={});var u=r(l,"color",16777215),c=r(l,"radius",128),f=r(l,"intensity",1),v=r(l,"attenuation",.1),p=new o(this.scene,0,0,u,c,f,v);return a!==void 0&&(l.add=a),n(this.scene,p,l),p})},function(i,d,e){var n=e(0),h=e(482),r=e(24),o=e(20),l=new n({Extends:h,initialize:function(u){this.scene=u,this.systems=u.sys,u.sys.settings.isBooted||u.sys.events.once(o.BOOT,this.boot,this),h.call(this)},boot:function(){var a=this.systems.events;a.on(o.SHUTDOWN,this.shutdown,this),a.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",l,"lights"),i.exports=l},function(i,d,e){var n=e(65);n.Area=e(1192),n.Circumference=e(302),n.CircumferencePoint=e(169),n.Clone=e(1193),n.Contains=e(66),n.ContainsPoint=e(1194),n.ContainsRect=e(1195),n.CopyFrom=e(1196),n.Equals=e(1197),n.GetBounds=e(1198),n.GetPoint=e(300),n.GetPoints=e(301),n.Offset=e(1199),n.OffsetPoint=e(1200),n.Random=e(170),i.exports=n},function(i,d){var e=function(n){return n.radius>0?Math.PI*n.radius*n.radius:0};i.exports=e},function(i,d,e){var n=e(65),h=function(r){return new n(r.x,r.y,r.radius)};i.exports=h},function(i,d,e){var n=e(66),h=function(r,o){return n(r,o.x,o.y)};i.exports=h},function(i,d,e){var n=e(66),h=function(r,o){return n(r,o.x,o.y)&&n(r,o.right,o.y)&&n(r,o.x,o.bottom)&&n(r,o.right,o.bottom)};i.exports=h},function(i,d){var e=function(n,h){return h.setTo(n.x,n.y,n.radius)};i.exports=e},function(i,d){var e=function(n,h){return n.x===h.x&&n.y===h.y&&n.radius===h.radius};i.exports=e},function(i,d,e){var n=e(10),h=function(r,o){return o===void 0&&(o=new n),o.x=r.left,o.y=r.top,o.width=r.diameter,o.height=r.diameter,o};i.exports=h},function(i,d){var e=function(n,h,r){return n.x+=h,n.y+=r,n};i.exports=e},function(i,d){var e=function(n,h){return n.x+=h.x,n.y+=h.y,n};i.exports=e},function(i,d,e){var n=e(111);n.Area=e(1202),n.Circumference=e(447),n.CircumferencePoint=e(218),n.Clone=e(1203),n.Contains=e(112),n.ContainsPoint=e(1204),n.ContainsRect=e(1205),n.CopyFrom=e(1206),n.Equals=e(1207),n.GetBounds=e(1208),n.GetPoint=e(445),n.GetPoints=e(446),n.Offset=e(1209),n.OffsetPoint=e(1210),n.Random=e(180),i.exports=n},function(i,d){var e=function(n){return n.isEmpty()?0:n.getMajorRadius()*n.getMinorRadius()*Math.PI};i.exports=e},function(i,d,e){var n=e(111),h=function(r){return new n(r.x,r.y,r.width,r.height)};i.exports=h},function(i,d,e){var n=e(112),h=function(r,o){return n(r,o.x,o.y)};i.exports=h},function(i,d,e){var n=e(112),h=function(r,o){return n(r,o.x,o.y)&&n(r,o.right,o.y)&&n(r,o.x,o.bottom)&&n(r,o.right,o.bottom)};i.exports=h},function(i,d){var e=function(n,h){return h.setTo(n.x,n.y,n.width,n.height)};i.exports=e},function(i,d){var e=function(n,h){return n.x===h.x&&n.y===h.y&&n.width===h.width&&n.height===h.height};i.exports=e},function(i,d,e){var n=e(10),h=function(r,o){return o===void 0&&(o=new n),o.x=r.left,o.y=r.top,o.width=r.width,o.height=r.height,o};i.exports=h},function(i,d){var e=function(n,h,r){return n.x+=h,n.y+=r,n};i.exports=e},function(i,d){var e=function(n,h){return n.x+=h.x,n.y+=h.y,n};i.exports=e},function(i,d,e){var n=e(4),h=e(231),r=function(o,l,a){if(a===void 0&&(a=[]),h(o,l)){var u=o.x,c=o.y,f=o.radius,v=l.x,p=l.y,g=l.radius,m,x,y,T,C;if(c===p)C=(g*g-f*f-v*v+u*u)/(2*(u-v)),m=1,x=-2*p,y=v*v+C*C-2*v*C+p*p-g*g,T=x*x-4*m*y,T===0?a.push(new n(C,-x/(2*m))):T>0&&(a.push(new n(C,(-x+Math.sqrt(T))/(2*m))),a.push(new n(C,(-x-Math.sqrt(T))/(2*m))));else{var S=(u-v)/(c-p),E=(g*g-f*f-v*v+u*u-p*p+c*c)/(2*(c-p));m=S*S+1,x=2*c*S-2*E*S-2*u,y=u*u+c*c+E*E-f*f-2*c*E,T=x*x-4*m*y,T===0?(C=-x/(2*m),a.push(new n(C,E-C*S))):T>0&&(C=(-x+Math.sqrt(T))/(2*m),a.push(new n(C,E-C*S)),C=(-x-Math.sqrt(T))/(2*m),a.push(new n(C,E-C*S)))}}return a};i.exports=r},function(i,d,e){var n=e(232),h=e(151),r=function(o,l,a){if(a===void 0&&(a=[]),h(o,l)){var u=l.getLineA(),c=l.getLineB(),f=l.getLineC(),v=l.getLineD();n(u,o,a),n(c,o,a),n(f,o,a),n(v,o,a)}return a};i.exports=r},function(i,d,e){var n=e(140),h=e(487),r=e(47),o=new r;function l(c,f,v,p,g){var m=Math.cos(c),x=Math.sin(c);o.setTo(f,v,f+m,v+x);var y=h(o,p);y&&g.push(new n(y.x,y.y,c,y.w))}function a(c,f){return c.z-f.z}var u=function(c,f,v){Array.isArray(v)||(v=[v]);for(var p=[],g=[],m=0;m<v.length;m++)for(var x=v[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-f,x[y].x-c);g.indexOf(T)===-1&&(l(T,c,f,v,p),l(T-1e-5,c,f,v,p),l(T+1e-5,c,f,v,p),g.push(T))}return p.sort(a)};i.exports=u},function(i,d,e){var n=e(10),h=e(152),r=function(o,l,a){return a===void 0&&(a=new n),h(o,l)&&(a.x=Math.max(o.x,l.x),a.y=Math.max(o.y,l.y),a.width=Math.min(o.right,l.right)-a.x,a.height=Math.min(o.bottom,l.bottom)-a.y),a};i.exports=r},function(i,d,e){var n=e(234),h=e(152),r=function(o,l,a){if(a===void 0&&(a=[]),h(o,l)){var u=o.getLineA(),c=o.getLineB(),f=o.getLineC(),v=o.getLineD();n(u,l,a),n(c,l,a),n(f,l,a),n(v,l,a)}return a};i.exports=r},function(i,d,e){var n=e(489),h=e(234),r=function(o,l,a){if(a===void 0&&(a=[]),n(o,l)){var u=l.getLineA(),c=l.getLineB(),f=l.getLineC();h(u,o,a),h(c,o,a),h(f,o,a)}return a};i.exports=r},function(i,d,e){var n=e(232),h=e(491),r=function(o,l,a){if(a===void 0&&(a=[]),h(o,l)){var u=o.getLineA(),c=o.getLineB(),f=o.getLineC();n(u,l,a),n(c,l,a),n(f,l,a)}return a};i.exports=r},function(i,d,e){var n=e(494),h=e(492),r=function(o,l,a){if(a===void 0&&(a=[]),n(o,l)){var u=l.getLineA(),c=l.getLineB(),f=l.getLineC();h(o,u,a),h(o,c,a),h(o,f,a)}return a};i.exports=r},function(i,d,e){var n=e(496),h=function(r,o){if(!n(r,o))return!1;var l=Math.min(o.x1,o.x2),a=Math.max(o.x1,o.x2),u=Math.min(o.y1,o.y2),c=Math.max(o.y1,o.y2);return r.x>=l&&r.x<=a&&r.y>=u&&r.y<=c};i.exports=h},function(i,d){var e=function(n,h,r,o,l,a){return a===void 0&&(a=0),!(h>n.right+a||r<n.left-a||o>n.bottom+a||l<n.top-a)};i.exports=e},function(i,d,e){var n=e(47);n.Angle=e(97),n.BresenhamPoints=e(317),n.CenterOn=e(1222),n.Clone=e(1223),n.CopyFrom=e(1224),n.Equals=e(1225),n.Extend=e(1226),n.GetEasedPoints=e(1227),n.GetMidPoint=e(1228),n.GetNearestPoint=e(1229),n.GetNormal=e(1230),n.GetPoint=e(307),n.GetPoints=e(172),n.GetShortestDistance=e(1231),n.Height=e(1232),n.Length=e(67),n.NormalAngle=e(497),n.NormalX=e(1233),n.NormalY=e(1234),n.Offset=e(1235),n.PerpSlope=e(1236),n.Random=e(173),n.ReflectAngle=e(1237),n.Rotate=e(1238),n.RotateAroundPoint=e(1239),n.RotateAroundXY=e(236),n.SetToAngle=e(1240),n.Slope=e(1241),n.Width=e(1242),i.exports=n},function(i,d){var e=function(n,h,r){var o=h-(n.x1+n.x2)/2,l=r-(n.y1+n.y2)/2;return n.x1+=o,n.y1+=l,n.x2+=o,n.y2+=l,n};i.exports=e},function(i,d,e){var n=e(47),h=function(r){return new n(r.x1,r.y1,r.x2,r.y2)};i.exports=h},function(i,d){var e=function(n,h){return h.setTo(n.x1,n.y1,n.x2,n.y2)};i.exports=e},function(i,d){var e=function(n,h){return n.x1===h.x1&&n.y1===h.y1&&n.x2===h.x2&&n.y2===h.y2};i.exports=e},function(i,d,e){var n=e(67),h=function(r,o,l){l===void 0&&(l=o);var a=n(r),u=r.x2-r.x1,c=r.y2-r.y1;return o&&(r.x1=r.x1-u/a*o,r.y1=r.y1-c/a*o),l&&(r.x2=r.x2+u/a*l,r.y2=r.y2+c/a*l),r};i.exports=h},function(i,d,e){var n=e(352),h=e(80),r=e(4),o=function(l,a,u,c,f){c===void 0&&(c=0),f===void 0&&(f=[]);var v=[],p=l.x1,g=l.y1,m=l.x2-p,x=l.y2-g,y=h(a,f),T,C,S=u-1;for(T=0;T<S;T++)C=y(T/S),v.push(new r(p+m*C,g+x*C));if(C=y(1),v.push(new r(p+m*C,g+x*C)),c>0){var E=v[0],M=[E];for(T=1;T<v.length-1;T++){var R=v[T];n(E,R)>=c&&(M.push(R),E=R)}var L=v[v.length-1];return n(E,L)<c&&M.pop(),M.push(L),M}else return v};i.exports=o},function(i,d,e){var n=e(4),h=function(r,o){return o===void 0&&(o=new n),o.x=(r.x1+r.x2)/2,o.y=(r.y1+r.y2)/2,o};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o,l){l===void 0&&(l=new n);var a=r.x1,u=r.y1,c=r.x2,f=r.y2,v=(c-a)*(c-a)+(f-u)*(f-u);if(v===0)return l;var p=((o.x-a)*(c-a)+(o.y-u)*(f-u))/v;return l.x=a+p*(c-a),l.y=u+p*(f-u),l};i.exports=h},function(i,d,e){var n=e(14),h=e(97),r=e(4),o=function(l,a){a===void 0&&(a=new r);var u=h(l)-n.TAU;return a.x=Math.cos(u),a.y=Math.sin(u),a};i.exports=o},function(i,d){var e=function(n,h){var r=n.x1,o=n.y1,l=n.x2,a=n.y2,u=(l-r)*(l-r)+(a-o)*(a-o);if(u===0)return!1;var c=((o-h.y)*(l-r)-(r-h.x)*(a-o))/u;return Math.abs(c)*Math.sqrt(u)};i.exports=e},function(i,d){var e=function(n){return Math.abs(n.y1-n.y2)};i.exports=e},function(i,d,e){var n=e(14),h=e(97),r=function(o){return Math.cos(h(o)-n.TAU)};i.exports=r},function(i,d,e){var n=e(14),h=e(97),r=function(o){return Math.sin(h(o)-n.TAU)};i.exports=r},function(i,d){var e=function(n,h,r){return n.x1+=h,n.y1+=r,n.x2+=h,n.y2+=r,n};i.exports=e},function(i,d){var e=function(n){return-((n.x2-n.x1)/(n.y2-n.y1))};i.exports=e},function(i,d,e){var n=e(97),h=e(497),r=function(o,l){return 2*h(l)-Math.PI-n(o)};i.exports=r},function(i,d,e){var n=e(236),h=function(r,o){var l=(r.x1+r.x2)/2,a=(r.y1+r.y2)/2;return n(r,l,a,o)};i.exports=h},function(i,d,e){var n=e(236),h=function(r,o,l){return n(r,o.x,o.y,l)};i.exports=h},function(i,d){var e=function(n,h,r,o,l){return n.x1=h,n.y1=r,n.x2=h+Math.cos(o)*l,n.y2=r+Math.sin(o)*l,n};i.exports=e},function(i,d){var e=function(n){return(n.y2-n.y1)/(n.x2-n.x1)};i.exports=e},function(i,d){var e=function(n){return Math.abs(n.x1-n.x2)};i.exports=e},function(i,d,e){var n={Face:e(116),GenerateGridVerts:e(1244),GenerateObjVerts:e(480),GenerateVerts:e(479),ParseObj:e(498),ParseObjMaterial:e(499),RotateFace:e(1245),Vertex:e(117)};i.exports=n},function(i,d,e){var n=e(116),h=e(2),r=e(69),o=e(39),l=e(117),a=new o,u=new o,c=new r,f=function(v){var p=h(v,"mesh"),g=h(v,"texture",null),m=h(v,"frame"),x=h(v,"width",1),y=h(v,"height",x),T=h(v,"widthSegments",1),C=h(v,"heightSegments",T),S=h(v,"x",0),E=h(v,"y",0),M=h(v,"z",0),R=h(v,"rotateX",0),L=h(v,"rotateY",0),O=h(v,"rotateZ",0),F=h(v,"zIsUp",!0),D=h(v,"isOrtho",p?p.dirtyCache[11]:!1),B=h(v,"colors",[16777215]),N=h(v,"alphas",[1]),V=h(v,"tile",!1),X=h(v,"flipY",!1),K=h(v,"width",null),Z={faces:[],verts:[]};if(a.set(S,E,M),u.set(R,L,O),c.fromRotationXYTranslation(u,a,F),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return Z;var G=g.get(m);!K&&D&&g&&p&&(x=G.width/p.height,y=G.height/p.height);var w=x/2,b=y/2,Y=Math.floor(T),U=Math.floor(C),W=Y+1,H=U+1,J=x/Y,q=y/U,_=[],nt=[],rt,at,vt=0,ut=1,ct=0,Ft=1;G&&(vt=G.u0,ut=G.u1,X?(ct=G.v1,Ft=G.v0):(ct=G.v0,Ft=G.v1));var Tt=ut-vt,Ct=Ft-ct;for(at=0;at<H;at++){var dt=at*q-b;for(rt=0;rt<W;rt++){var It=rt*J-w;nt.push(It,-dt);var gt=vt+Tt*(rt/Y),Pt=ct+Ct*(at/U);_.push(gt,Pt)}}Array.isArray(B)||(B=[B]),Array.isArray(N)||(N=[N]);var xe=0,Ge=0;for(at=0;at<U;at++)for(rt=0;rt<Y;rt++){var $t=(rt+W*at)*2,Ut=(rt+W*(at+1))*2,ee=(rt+1+W*(at+1))*2,qt=(rt+1+W*at)*2,ie=B[Ge],Pe=N[xe],ui=new l(nt[$t],nt[$t+1],0,_[$t],_[$t+1],ie,Pe).transformMat4(c),fi=new l(nt[Ut],nt[Ut+1],0,_[Ut],_[Ut+1],ie,Pe).transformMat4(c),di=new l(nt[qt],nt[qt+1],0,_[qt],_[qt+1],ie,Pe).transformMat4(c),vi=new l(nt[Ut],nt[Ut+1],0,_[Ut],_[Ut+1],ie,Pe).transformMat4(c),ci=new l(nt[ee],nt[ee+1],0,_[ee],_[ee+1],ie,Pe).transformMat4(c),pi=new l(nt[qt],nt[qt+1],0,_[qt],_[qt+1],ie,Pe).transformMat4(c);V&&(ui.setUVs(vt,Ft),fi.setUVs(vt,ct),di.setUVs(ut,Ft),vi.setUVs(vt,ct),ci.setUVs(ut,ct),pi.setUVs(ut,Ft)),Ge++,Ge===B.length&&(Ge=0),xe++,xe===N.length&&(xe=0),Z.verts.push(ui,fi,di,vi,ci,pi),Z.faces.push(new n(ui,fi,di),new n(vi,ci,pi))}return p&&(p.faces=p.faces.concat(Z.faces),p.vertices=p.vertices.concat(Z.verts)),Z};i.exports=f},function(i,d){var e=function(n,h,r,o){var l,a;if(r===void 0&&o===void 0){var u=n.getInCenter();l=u.x,a=u.y}var c=Math.cos(h),f=Math.sin(h),v=n.vertex1,p=n.vertex2,g=n.vertex3,m=v.x-l,x=v.y-a;v.set(m*c-x*f+l,m*f+x*c+a),m=p.x-l,x=p.y-a,p.set(m*c-x*f+l,m*f+x*c+a),m=g.x-l,x=g.y-a,g.set(m*c-x*f+l,m*f+x*c+a)};i.exports=e},function(i,d,e){var n=e(4);n.Ceil=e(1247),n.Clone=e(1248),n.CopyFrom=e(1249),n.Equals=e(1250),n.Floor=e(1251),n.GetCentroid=e(1252),n.GetMagnitude=e(500),n.GetMagnitudeSq=e(501),n.GetRectangleFromPoints=e(1253),n.Interpolate=e(1254),n.Invert=e(1255),n.Negative=e(1256),n.Project=e(1257),n.ProjectUnit=e(1258),n.SetMagnitude=e(1259),i.exports=n},function(i,d){var e=function(n){return n.setTo(Math.ceil(n.x),Math.ceil(n.y))};i.exports=e},function(i,d,e){var n=e(4),h=function(r){return new n(r.x,r.y)};i.exports=h},function(i,d){var e=function(n,h){return h.setTo(n.x,n.y)};i.exports=e},function(i,d){var e=function(n,h){return n.x===h.x&&n.y===h.y};i.exports=e},function(i,d){var e=function(n){return n.setTo(Math.floor(n.x),Math.floor(n.y))};i.exports=e},function(i,d,e){var n=e(4),h=function(r,o){if(o===void 0&&(o=new n),!Array.isArray(r))throw new Error("GetCentroid points argument must be an array");var l=r.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)o.x=r[0].x,o.y=r[0].y;else{for(var a=0;a<l;a++)o.x+=r[a].x,o.y+=r[a].y;o.x/=l,o.y/=l}return o};i.exports=h},function(i,d,e){var n=e(10),h=function(r,o){o===void 0&&(o=new n);for(var l=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,f=0;f<r.length;f++){var v=r[f];v.x>l&&(l=v.x),v.x<a&&(a=v.x),v.y>u&&(u=v.y),v.y<c&&(c=v.y)}return o.x=a,o.y=c,o.width=l-a,o.height=u-c,o};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o,l,a){return l===void 0&&(l=0),a===void 0&&(a=new n),a.x=r.x+(o.x-r.x)*l,a.y=r.y+(o.y-r.y)*l,a};i.exports=h},function(i,d){var e=function(n){return n.setTo(n.y,n.x)};i.exports=e},function(i,d,e){var n=e(4),h=function(r,o){return o===void 0&&(o=new n),o.setTo(-r.x,-r.y)};i.exports=h},function(i,d,e){var n=e(4),h=e(501),r=function(o,l,a){a===void 0&&(a=new n);var u=o.x*l.x+o.y*l.y,c=u/h(l);return c!==0&&(a.x=c*l.x,a.y=c*l.y),a};i.exports=r},function(i,d,e){var n=e(4),h=function(r,o,l){l===void 0&&(l=new n);var a=r.x*o.x+r.y*o.y;return a!==0&&(l.x=a*o.x,l.y=a*o.y),l};i.exports=h},function(i,d,e){var n=e(500),h=function(r,o){if(r.x!==0||r.y!==0){var l=n(r);r.x/=l,r.y/=l}return r.x*=o,r.y*=o,r};i.exports=h},function(i,d,e){var n=e(227);n.Clone=e(1261),n.Contains=e(228),n.ContainsPoint=e(1262),n.Earcut=e(59),n.GetAABB=e(469),n.GetNumberArray=e(1263),n.GetPoints=e(470),n.Perimeter=e(471),n.Reverse=e(1264),n.Simplify=e(1265),n.Smooth=e(472),n.Translate=e(1266),i.exports=n},function(i,d,e){var n=e(227),h=function(r){return new n(r.points)};i.exports=h},function(i,d,e){var n=e(228),h=function(r,o){return n(r,o.x,o.y)};i.exports=h},function(i,d){var e=function(n,h){h===void 0&&(h=[]);for(var r=0;r<n.points.length;r++)h.push(n.points[r].x),h.push(n.points[r].y);return h};i.exports=e},function(i,d){var e=function(n){return n.points.reverse(),n};i.exports=e},function(i,d){function e(a,u){var c=a.x-u.x,f=a.y-u.y;return c*c+f*f}function n(a,u,c){var f=u.x,v=u.y,p=c.x-f,g=c.y-v;if(p!==0||g!==0){var m=((a.x-f)*p+(a.y-v)*g)/(p*p+g*g);m>1?(f=c.x,v=c.y):m>0&&(f+=p*m,v+=g*m)}return p=a.x-f,g=a.y-v,p*p+g*g}function h(a,u){for(var c=a[0],f=[c],v,p=1,g=a.length;p<g;p++)v=a[p],e(v,c)>u&&(f.push(v),c=v);return c!==v&&f.push(v),f}function r(a,u,c,f,v){for(var p=f,g,m=u+1;m<c;m++){var x=n(a[m],a[u],a[c]);x>p&&(g=m,p=x)}p>f&&(g-u>1&&r(a,u,g,f,v),v.push(a[g]),c-g>1&&r(a,g,c,f,v))}function o(a,u){var c=a.length-1,f=[a[0]];return r(a,0,c,u,f),f.push(a[c]),f}var l=function(a,u,c){u===void 0&&(u=1),c===void 0&&(c=!1);var f=a.points;if(f.length>2){var v=u*u;c||(f=h(f,v)),a.setTo(o(f,v))}return a};i.exports=l},function(i,d){var e=function(n,h,r){for(var o=n.points,l=0;l<o.length;l++)o[l].x+=h,o[l].y+=r;return n};i.exports=e},function(i,d){var e=function(n){return n.width*n.height};i.exports=e},function(i,d){var e=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n};i.exports=e},function(i,d){var e=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n};i.exports=e},function(i,d,e){var n=e(10),h=function(r){return new n(r.x,r.y,r.width,r.height)};i.exports=h},function(i,d,e){var n=e(57),h=function(r,o){return n(r,o.x,o.y)};i.exports=h},function(i,d){var e=function(n,h){return h.setTo(n.x,n.y,n.width,n.height)};i.exports=e},function(i,d){var e=function(n,h){return n.x===h.x&&n.y===h.y&&n.width===h.width&&n.height===h.height};i.exports=e},function(i,d,e){var n=e(237),h=function(r,o){var l=n(r);return l<n(o)?r.setSize(o.height*l,o.height):r.setSize(o.width,o.width/l),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};i.exports=h},function(i,d,e){var n=e(237),h=function(r,o){var l=n(r);return l>n(o)?r.setSize(o.height*l,o.height):r.setSize(o.width,o.width/l),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};i.exports=h},function(i,d){var e=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n};i.exports=e},function(i,d){var e=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n.width=Math.floor(n.width),n.height=Math.floor(n.height),n};i.exports=e},function(i,d,e){var n=e(10),h=function(r,o,l,a,u){return u===void 0&&(u=new n),u.setTo(Math.min(r,l),Math.min(o,a),Math.abs(r-l),Math.abs(o-a))};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o){return o===void 0&&(o=new n),o.x=r.centerX,o.y=r.centerY,o};i.exports=h},function(i,d,e){var n=e(4),h=function(r,o){return o===void 0&&(o=new n),o.x=r.width,o.y=r.height,o};i.exports=h},function(i,d,e){var n=e(190),h=function(r,o,l){var a=r.centerX,u=r.centerY;return r.setSize(r.width+o*2,r.height+l*2),n(r,a,u)};i.exports=h},function(i,d,e){var n=e(10),h=e(152),r=function(o,l,a){return a===void 0&&(a=new n),h(o,l)?(a.x=Math.max(o.x,l.x),a.y=Math.max(o.y,l.y),a.width=Math.min(o.right,l.right)-a.x,a.height=Math.min(o.bottom,l.bottom)-a.y):a.setEmpty(),a};i.exports=r},function(i,d){var e=function(n,h){for(var r=n.x,o=n.right,l=n.y,a=n.bottom,u=0;u<h.length;u++)r=Math.min(r,h[u].x),o=Math.max(o,h[u].x),l=Math.min(l,h[u].y),a=Math.max(a,h[u].y);return n.x=r,n.y=l,n.width=o-r,n.height=a-l,n};i.exports=e},function(i,d){var e=function(n,h){var r=Math.min(n.x,h.x),o=Math.max(n.right,h.right);n.x=r,n.width=o-r;var l=Math.min(n.y,h.y),a=Math.max(n.bottom,h.bottom);return n.y=l,n.height=a-l,n};i.exports=e},function(i,d){var e=function(n,h,r){var o=Math.min(n.x,h),l=Math.max(n.right,h);n.x=o,n.width=l-o;var a=Math.min(n.y,r),u=Math.max(n.bottom,r);return n.y=a,n.height=u-a,n};i.exports=e},function(i,d){var e=function(n,h,r){return n.x+=h,n.y+=r,n};i.exports=e},function(i,d){var e=function(n,h){return n.x+=h.x,n.y+=h.y,n};i.exports=e},function(i,d){var e=function(n,h){return n.x<h.right&&n.right>h.x&&n.y<h.bottom&&n.bottom>h.y};i.exports=e},function(i,d,e){var n=e(4),h=e(36),r=function(o,l,a){a===void 0&&(a=new n),l=h(l);var u=Math.sin(l),c=Math.cos(l),f=c>0?o.width/2:o.width/-2,v=u>0?o.height/2:o.height/-2;return Math.abs(f*u)<Math.abs(v*c)?v=f*u/c:f=v*c/u,a.x=f+o.centerX,a.y=v+o.centerY,a};i.exports=r},function(i,d,e){var n=e(195),h=e(503),r=e(4),o=function(l,a,u){if(u===void 0&&(u=new r),h(l,a))switch(n(0,3)){case 0:u.x=l.x+Math.random()*(a.right-l.x),u.y=l.y+Math.random()*(a.top-l.y);break;case 1:u.x=a.x+Math.random()*(l.right-a.x),u.y=a.bottom+Math.random()*(l.bottom-a.bottom);break;case 2:u.x=l.x+Math.random()*(a.x-l.x),u.y=a.y+Math.random()*(l.bottom-a.y);break;case 3:u.x=a.right+Math.random()*(l.right-a.right),u.y=l.y+Math.random()*(a.bottom-l.y);break}return u};i.exports=o},function(i,d){var e=function(n,h){return n.width===h.width&&n.height===h.height};i.exports=e},function(i,d){var e=function(n,h,r){return r===void 0&&(r=h),n.width*=h,n.height*=r,n};i.exports=e},function(i,d,e){var n=e(82);n.Area=e(1294),n.BuildEquilateral=e(1295),n.BuildFromPolygon=e(1296),n.BuildRight=e(1297),n.CenterOn=e(1298),n.Centroid=e(504),n.CircumCenter=e(1299),n.CircumCircle=e(1300),n.Clone=e(1301),n.Contains=e(115),n.ContainsArray=e(235),n.ContainsPoint=e(1302),n.CopyFrom=e(1303),n.Decompose=e(495),n.Equals=e(1304),n.GetPoint=e(476),n.GetPoints=e(477),n.InCenter=e(506),n.Perimeter=e(1305),n.Offset=e(505),n.Random=e(181),n.Rotate=e(1306),n.RotateAroundPoint=e(1307),n.RotateAroundXY=e(238),i.exports=n},function(i,d){var e=function(n){var h=n.x1,r=n.y1,o=n.x2,l=n.y2,a=n.x3,u=n.y3;return Math.abs(((a-h)*(l-r)-(o-h)*(u-r))/2)};i.exports=e},function(i,d,e){var n=e(82),h=function(r,o,l){var a=l*(Math.sqrt(3)/2),u=r,c=o,f=r+l/2,v=o+a,p=r-l/2,g=o+a;return new n(u,c,f,v,p,g)};i.exports=h},function(i,d,e){var n=e(59),h=e(82),r=function(o,l,a,u,c){l===void 0&&(l=null),a===void 0&&(a=1),u===void 0&&(u=1),c===void 0&&(c=[]);for(var f=n(o,l),v,p,g,m,x,y,T,C,S,E=0;E<f.length;E+=3)v=f[E],p=f[E+1],g=f[E+2],m=o[v*2]*a,x=o[v*2+1]*u,y=o[p*2]*a,T=o[p*2+1]*u,C=o[g*2]*a,S=o[g*2+1]*u,c.push(new h(m,x,y,T,C,S));return c};i.exports=r},function(i,d,e){var n=e(82),h=function(r,o,l,a){a===void 0&&(a=l);var u=r,c=o,f=r,v=o-a,p=r+l,g=o;return new n(u,c,f,v,p,g)};i.exports=h},function(i,d,e){var n=e(504),h=e(505),r=function(o,l,a,u){u===void 0&&(u=n);var c=u(o),f=l-c.x,v=a-c.y;return h(o,f,v)};i.exports=r},function(i,d,e){var n=e(3);function h(o,l,a,u){return o*u-l*a}var r=function(o,l){l===void 0&&(l=new n);var a=o.x3,u=o.y3,c=o.x1-a,f=o.y1-u,v=o.x2-a,p=o.y2-u,g=2*h(c,f,v,p),m=h(f,c*c+f*f,p,v*v+p*p),x=h(c,c*c+f*f,v,v*v+p*p);return l.x=a-m/g,l.y=u+x/g,l};i.exports=r},function(i,d,e){var n=e(65),h=function(r,o){o===void 0&&(o=new n);var l=r.x1,a=r.y1,u=r.x2,c=r.y2,f=r.x3,v=r.y3,p=u-l,g=c-a,m=f-l,x=v-a,y=p*(l+u)+g*(a+c),T=m*(l+f)+x*(a+v),C=2*(p*(v-c)-g*(f-u)),S,E;if(Math.abs(C)<1e-6){var M=Math.min(l,u,f),R=Math.min(a,c,v);S=(Math.max(l,u,f)-M)*.5,E=(Math.max(a,c,v)-R)*.5,o.x=M+S,o.y=R+E,o.radius=Math.sqrt(S*S+E*E)}else o.x=(x*y-g*T)/C,o.y=(p*T-m*y)/C,S=o.x-l,E=o.y-a,o.radius=Math.sqrt(S*S+E*E);return o};i.exports=h},function(i,d,e){var n=e(82),h=function(r){return new n(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};i.exports=h},function(i,d,e){var n=e(115),h=function(r,o){return n(r,o.x,o.y)};i.exports=h},function(i,d){var e=function(n,h){return h.setTo(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};i.exports=e},function(i,d){var e=function(n,h){return n.x1===h.x1&&n.y1===h.y1&&n.x2===h.x2&&n.y2===h.y2&&n.x3===h.x3&&n.y3===h.y3};i.exports=e},function(i,d,e){var n=e(67),h=function(r){var o=r.getLineA(),l=r.getLineB(),a=r.getLineC();return n(o)+n(l)+n(a)};i.exports=h},function(i,d,e){var n=e(238),h=e(506),r=function(o,l){var a=h(o);return n(o,a.x,a.y,l)};i.exports=r},function(i,d,e){var n=e(238),h=function(r,o,l){return n(r,o.x,o.y,l)};i.exports=h},function(i,d,e){var n=e(203),h=e(17),r={CreatePixelPerfectHandler:e(507),CreateInteractiveObject:e(508),Events:e(51),Gamepad:e(1309),InputManager:e(409),InputPlugin:e(1321),InputPluginCache:e(153),Keyboard:e(1322),Mouse:e(1336),Pointer:e(412),Touch:e(1337)};r=h(!1,r,n),i.exports=r},function(i,d,e){i.exports={Axis:e(509),Button:e(510),Events:e(239),Gamepad:e(511),GamepadPlugin:e(1316),Configs:e(1317)}},function(i,d){i.exports="down"},function(i,d){i.exports="up"},function(i,d){i.exports="connected"},function(i,d){i.exports="disconnected"},function(i,d){i.exports="down"},function(i,d){i.exports="up"},function(i,d,e){var n=e(0),h=e(9),r=e(239),o=e(511),l=e(6),a=e(153),u=e(51),c=new n({Extends:h,initialize:function(v){h.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(u.BOOT,this.boot,this),v.pluginEvents.on(u.START,this.start,this)},boot:function(){var f=this.scene.sys.game,v=this.settings.input,p=f.config;this.enabled=l(v,"gamepad",p.inputGamepad)&&f.device.input.gamepads,this.target=l(v,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var f=this,v=this.target,p=function(g){g.defaultPrevented||!f.isActive()||(f.refreshPads(),f.queue.push(g))};this.onGamepadHandler=p,v.addEventListener("gamepadconnected",p,!1),v.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(u.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(u.UPDATE,this.update);for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].removeAllListeners()},disconnectAll:function(){for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].pad.connected=!1},refreshPads:function(){var f=navigator.getGamepads();if(!f)this.disconnectAll();else for(var v=this.gamepads,p=0;p<f.length;p++){var g=f[p];if(!!g){var m=g.id,x=g.index,y=v[x];if(y)y.id!==m?(y.destroy(),v[x]=new o(this,g)):y.update(g);else{var T=new o(this,g);v[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var f=[],v=this.gamepads,p=0;p<v.length;p++)v[p]&&f.push(v[p]);return f},getPad:function(f){for(var v=this.gamepads,p=0;p<v.length;p++)if(v[p]&&v[p].index===f)return v[p]},update:function(){if(!!this.enabled){this.refreshPads();var f=this.queue.length;if(f!==0)for(var v=this.queue.splice(0,f),p=0;p<f;p++){var g=v[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(r.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var f=0;f<this.gamepads.length;f++)this.gamepads[f]&&this.gamepads[f].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});a.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),i.exports=c},function(i,d,e){i.exports={DUALSHOCK_4:e(1318),SNES_USB:e(1319),XBOX_360:e(1320)}},function(i,d){i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(i,d){i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(i,d){i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(i,d,e){var n=e(65),h=e(66),r=e(0),o=e(203),l=e(508),a=e(507),u=e(50),c=e(111),f=e(112),v=e(51),p=e(9),g=e(2),m=e(56),x=e(153),y=e(7),T=e(24),C=e(10),S=e(57),E=e(20),M=e(82),R=e(115),L=new r({Extends:p,initialize:function(F){p.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(E.BOOT,this.boot,this),F.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var O=this.systems.events;O.on(E.TRANSITION_START,this.transitionIn,this),O.on(E.TRANSITION_OUT,this.transitionOut,this),O.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),O.on(E.PRE_UPDATE,this.preUpdate,this),O.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(O){this.isActive()&&this.emit(v.GAME_OVER,O.timeStamp,O)},onGameOut:function(O){this.isActive()&&this.emit(v.GAME_OUT,O.timeStamp,O)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var O=this._pendingRemoval,F=this._pendingInsertion,D=O.length,B=F.length;if(!(D===0&&B===0)){for(var N=this._list,V=0;V<D;V++){var X=O[V],K=N.indexOf(X);K>-1&&(N.splice(K,1),this.clear(X,!0))}O.length=0,this._pendingRemoval.length=0,this._list=N.concat(F.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(O,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,O,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,B=this.manager,N=B.pointers,V=B.pointersTotal;for(D=0;D<V;D++)N[D].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(D=0;D<V;D++){var Z=0,G=N[D];this._tempZones=[],this._temp=this.hitTestPointer(G),this.sortGameObjects(this._temp,G),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),Z+=this.processOverOutEvents(G),this.getDragState(G)===2&&this.processDragThresholdEvent(G,O),Z>0&&(K=!0)}return K},update:function(O,F){if(!this.isActive())return!1;for(var D=F.length,B=!1,N=0;N<D;N++){var V=0,X=F[N];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),O){case o.MOUSE_DOWN:V+=this.processDragDownEvent(X),V+=this.processDownEvents(X),V+=this.processOverOutEvents(X);break;case o.MOUSE_UP:V+=this.processDragUpEvent(X),V+=this.processUpEvents(X),V+=this.processOverOutEvents(X);break;case o.TOUCH_START:V+=this.processDragDownEvent(X),V+=this.processDownEvents(X),V+=this.processOverEvents(X);break;case o.TOUCH_END:case o.TOUCH_CANCEL:V+=this.processDragUpEvent(X),V+=this.processUpEvents(X),V+=this.processOutEvents(X);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:V+=this.processDragMoveEvent(X),V+=this.processMoveEvents(X),V+=this.processOverOutEvents(X);break;case o.MOUSE_WHEEL:V+=this.processWheelEvent(X);break}V>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(O,F){F===void 0&&(F=!1);var D=O.input;if(!!D){F||this.queueForRemoval(O),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,O.input=null;var B=this._draggable.indexOf(O);return B>-1&&this._draggable.splice(B,1),B=this._drag[0].indexOf(O),B>-1&&this._drag[0].splice(B,1),B=this._over[0].indexOf(O),B>-1&&(this._over[0].splice(B,1),this.manager.resetCursor(D)),O}},disable:function(O){O.input.enabled=!1},enable:function(O,F,D,B){return B===void 0&&(B=!1),O.input?O.input.enabled=!0:this.setHitArea(O,F,D),O.input&&B&&!O.input.dropZone&&(O.input.dropZone=B),this},hitTestPointer:function(O){for(var F=this.cameras.getCamerasBelowPointer(O),D=0;D<F.length;D++){for(var B=F[D],N=this.manager.hitTest(O,this._list,B),V=0;V<N.length;V++){var X=N[V];X.input.dropZone&&this._tempZones.push(X)}if(N.length>0)return O.camera=B,N}return O.camera=F[0],[]},processDownEvents:function(O){var F=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var V=!1,X=0;X<D.length;X++){var K=D[X];if(!!K.input){if(F++,K.emit(v.GAMEOBJECT_POINTER_DOWN,O,K.input.localX,K.input.localY,N),B.cancelled||!K.input){V=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,O,K,N),B.cancelled||!K.input){V=!0;break}}}return!V&&this.manager&&(O.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,O,D):this.emit(v.POINTER_DOWN_OUTSIDE,O)),F},getDragState:function(O){return this._dragState[O.id]},setDragState:function(O,F){this._dragState[O.id]=F},processDragThresholdEvent:function(O,F){var D=!1,B=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&u(O.x,O.y,O.downX,O.downY)>=N||B>0&&F>=O.downTime+B)&&(D=!0),D)return this.setDragState(O,3),this.processDragStartList(O)},processDragStartList:function(O){if(this.getDragState(O)!==3)return 0;for(var F=this._drag[O.id],D=0;D<F.length;D++){var B=F[D],N=B.input;N.dragState=2,N.dragStartX=B.x,N.dragStartY=B.y,N.dragStartXGlobal=O.worldX,N.dragStartYGlobal=O.worldY,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,B.emit(v.GAMEOBJECT_DRAG_START,O,N.dragX,N.dragY),this.emit(v.DRAG_START,O,B)}return this.setDragState(O,4),F.length},processDragDownEvent:function(O){var F=this._temp;if(this._draggable.length===0||F.length===0||!O.primaryDown||this.getDragState(O)!==0)return 0;this.setDragState(O,1);for(var D=[],B=0;B<F.length;B++){var N=F[B];N.input.draggable&&N.input.dragState===0&&D.push(N)}return D.length===0?(this.setDragState(O,0),0):(D.length>1&&(this.sortGameObjects(D,O),this.topOnly&&D.splice(1)),this._drag[O.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(O,3),this.processDragStartList(O)):(this.setDragState(O,2),0))},processDragMoveEvent:function(O){if(this.getDragState(O)===2&&this.processDragThresholdEvent(O,this.manager.game.loop.now),this.getDragState(O)!==4)return 0;for(var F=this._tempZones,D=this._drag[O.id],B=0;B<D.length;B++){var N=D[B],V=N.input,X=V.target;if(X){var K=F.indexOf(X);K===0?(N.emit(v.GAMEOBJECT_DRAG_OVER,O,X),this.emit(v.DRAG_OVER,O,N,X)):K>0?(N.emit(v.GAMEOBJECT_DRAG_LEAVE,O,X),this.emit(v.DRAG_LEAVE,O,N,X),V.target=F[0],X=V.target,N.emit(v.GAMEOBJECT_DRAG_ENTER,O,X),this.emit(v.DRAG_ENTER,O,N,X)):(N.emit(v.GAMEOBJECT_DRAG_LEAVE,O,X),this.emit(v.DRAG_LEAVE,O,N,X),F[0]?(V.target=F[0],X=V.target,N.emit(v.GAMEOBJECT_DRAG_ENTER,O,X),this.emit(v.DRAG_ENTER,O,N,X)):V.target=null)}else!X&&F[0]&&(V.target=F[0],X=V.target,N.emit(v.GAMEOBJECT_DRAG_ENTER,O,X),this.emit(v.DRAG_ENTER,O,N,X));var Z,G;if(!N.parentContainer)Z=O.worldX-V.dragX,G=O.worldY-V.dragY;else{var w=O.worldX-V.dragStartXGlobal,b=O.worldY-V.dragStartYGlobal,Y=N.getParentRotation(),U=w*Math.cos(Y)+b*Math.sin(Y),W=b*Math.cos(Y)-w*Math.sin(Y);U*=1/N.parentContainer.scaleX,W*=1/N.parentContainer.scaleY,Z=U+V.dragStartX,G=W+V.dragStartY}N.emit(v.GAMEOBJECT_DRAG,O,Z,G),this.emit(v.DRAG,O,N,Z,G)}return D.length},processDragUpEvent:function(O){for(var F=this._drag[O.id],D=0;D<F.length;D++){var B=F[D],N=B.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-B.displayOriginX,N.dragY=N.localY-B.displayOriginY;var V=!1,X=N.target;X&&(B.emit(v.GAMEOBJECT_DROP,O,X),this.emit(v.DROP,O,B,X),N.target=null,V=!0),B.input&&(B.emit(v.GAMEOBJECT_DRAG_END,O,N.dragX,N.dragY,V),this.emit(v.DRAG_END,O,B,V))}}return this.setDragState(O,0),F.splice(0),0},processMoveEvents:function(O){var F=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var V=!1,X=0;X<D.length;X++){var K=D[X];if(!!K.input){if(F++,K.emit(v.GAMEOBJECT_POINTER_MOVE,O,K.input.localX,K.input.localY,N),B.cancelled||!K.input){V=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,O,K,N),B.cancelled||!K.input){V=!0;break}if(this.topOnly)break}}return V||this.emit(v.POINTER_MOVE,O,D),F},processWheelEvent:function(O){var F=0,D=this._temp,B=this._eventData,N=this._eventContainer;B.cancelled=!1;for(var V=!1,X=O.deltaX,K=O.deltaY,Z=O.deltaZ,G=0;G<D.length;G++){var w=D[G];if(!!w.input){if(F++,w.emit(v.GAMEOBJECT_POINTER_WHEEL,O,X,K,Z,N),B.cancelled||!w.input){V=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,O,w,X,K,Z,N),B.cancelled||!w.input){V=!0;break}}}return V||this.emit(v.POINTER_WHEEL,O,D,X,K,Z),F},processOverEvents:function(O){var F=this._temp,D=0,B=F.length,N=[];if(B>0){var V=this.manager,X=this._eventData,K=this._eventContainer;X.cancelled=!1;for(var Z=!1,G=0;G<B;G++){var w=F[G];if(!!w.input){if(N.push(w),V.setCursor(w.input),w.emit(v.GAMEOBJECT_POINTER_OVER,O,w.input.localX,w.input.localY,K),D++,X.cancelled||!w.input){Z=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,w,K),X.cancelled||!w.input){Z=!0;break}}}Z||this.emit(v.POINTER_OVER,O,N)}return this._over[O.id]=N,D},processOutEvents:function(O){var F=this._over[O.id],D=0,B=F.length;if(B>0){var N=this.manager,V=this._eventData,X=this._eventContainer;V.cancelled=!1;var K=!1;this.sortGameObjects(F,O);for(var Z=0;Z<B;Z++){var G=F[Z];if(G=F[Z],!!G.input){if(N.resetCursor(G.input),G.emit(v.GAMEOBJECT_POINTER_OUT,O,X),D++,V.cancelled||!G.input){K=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,G,X),V.cancelled||!G.input){K=!0;break}K||this.emit(v.POINTER_OUT,O,F)}}this._over[O.id]=[]}return D},processOverOutEvents:function(O){var F=this._temp,D,B,N=[],V=[],X=[],K=this._over[O.id],Z=this._drag[O.id],G=this.manager;for(D=0;D<K.length;D++)B=K[D],F.indexOf(B)===-1&&Z.indexOf(B)===-1?N.push(B):X.push(B);for(D=0;D<F.length;D++)B=F[D],K.indexOf(B)===-1&&V.push(B);var w=N.length,b=0,Y=this._eventData,U=this._eventContainer;Y.cancelled=!1;var W=!1;if(w>0){for(this.sortGameObjects(N,O),D=0;D<w;D++)if(B=N[D],!!B.input){if(G.resetCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OUT,O,U),b++,Y.cancelled||!B.input){W=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,B,U),Y.cancelled||!B.input){W=!0;break}}W||this.emit(v.POINTER_OUT,O,N)}if(w=V.length,Y.cancelled=!1,W=!1,w>0){for(this.sortGameObjects(V,O),D=0;D<w;D++)if(B=V[D],!!B.input){if(G.setCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OVER,O,B.input.localX,B.input.localY,U),b++,Y.cancelled||!B.input){W=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,B,U),Y.cancelled||!B.input){W=!0;break}}W||this.emit(v.POINTER_OVER,O,V)}return K=X.concat(V),this._over[O.id]=this.sortGameObjects(K,O),b},processUpEvents:function(O){var F=this._temp,D=this._eventData,B=this._eventContainer;D.cancelled=!1;for(var N=!1,V=0;V<F.length;V++){var X=F[V];if(!!X.input){if(X.emit(v.GAMEOBJECT_POINTER_UP,O,X.input.localX,X.input.localY,B),D.cancelled||!X.input){N=!0;break}if(this.emit(v.GAMEOBJECT_UP,O,X,B),D.cancelled||!X.input){N=!0;break}}}return!N&&this.manager&&(O.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,O,F):this.emit(v.POINTER_UP_OUTSIDE,O)),F.length},queueForInsertion:function(O){return this._pendingInsertion.indexOf(O)===-1&&this._list.indexOf(O)===-1&&this._pendingInsertion.push(O),this},queueForRemoval:function(O){return this._pendingRemoval.push(O),this},setDraggable:function(O,F){F===void 0&&(F=!0),Array.isArray(O)||(O=[O]);for(var D=0;D<O.length;D++){var B=O[D];B.input.draggable=F;var N=this._draggable.indexOf(B);F&&N===-1?this._draggable.push(B):!F&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(O){O===void 0&&(O=1);var F=this.systems.textures;return a(F,O)},setHitArea:function(O,F,D){if(F===void 0)return this.setHitAreaFromTexture(O);Array.isArray(O)||(O=[O]);var B=!1,N=!1,V=!1,X=!1,K=!1,Z=!0;if(y(F)){var G=F;F=g(G,"hitArea",null),D=g(G,"hitAreaCallback",null),B=g(G,"draggable",!1),N=g(G,"dropZone",!1),V=g(G,"cursor",!1),X=g(G,"useHandCursor",!1),K=g(G,"pixelPerfect",!1);var w=g(G,"alphaTolerance",1);K&&(F={},D=this.makePixelPerfect(w)),(!F||!D)&&(this.setHitAreaFromTexture(O),Z=!1)}else typeof F=="function"&&!D&&(D=F,F={});for(var b=0;b<O.length;b++){var Y=O[b];if(K&&Y.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var U=Y.input?Y.input:l(Y,F,D);U.customHitArea=Z,U.dropZone=N,U.cursor=X?"pointer":V,Y.input=U,B&&this.setDraggable(Y),this.queueForInsertion(Y)}return this},setHitAreaCircle:function(O,F,D,B,N){N===void 0&&(N=h);var V=new n(F,D,B);return this.setHitArea(O,V,N)},setHitAreaEllipse:function(O,F,D,B,N,V){V===void 0&&(V=f);var X=new c(F,D,B,N);return this.setHitArea(O,X,V)},setHitAreaFromTexture:function(O,F){F===void 0&&(F=S),Array.isArray(O)||(O=[O]);for(var D=0;D<O.length;D++){var B=O[D],N=B.frame,V=0,X=0;if(B.width?(V=B.width,X=B.height):N&&(V=N.realWidth,X=N.realHeight),B.type==="Container"&&(V===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}V!==0&&X!==0&&(B.input=l(B,new C(0,0,V,X),F),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(O,F,D,B,N,V){V===void 0&&(V=S);var X=new C(F,D,B,N);return this.setHitArea(O,X,V)},setHitAreaTriangle:function(O,F,D,B,N,V,X,K){K===void 0&&(K=R);var Z=new M(F,D,B,N,V,X);return this.setHitArea(O,Z,K)},enableDebug:function(O,F){F===void 0&&(F=65280);var D=O.input;if(!D||!D.hitArea)return this;var B=D.hitArea,N=B.type,V=D.hitAreaDebug,X=this.systems.add,K=this.systems.updateList;V&&(K.remove(V),V.destroy(),V=null);var Z=0,G=0;switch(N){case m.CIRCLE:V=X.arc(0,0,B.radius),Z=B.x-B.radius,G=B.y-B.radius;break;case m.ELLIPSE:V=X.ellipse(0,0,B.width,B.height),Z=B.x-B.width/2,G=B.y-B.height/2;break;case m.LINE:V=X.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:V=X.polygon(0,0,B.points);break;case m.RECTANGLE:V=X.rectangle(0,0,B.width,B.height),Z=B.x,G=B.y;break;case m.TRIANGLE:V=X.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return V&&(V.isFilled=!1,V.preUpdate=function(){V.setStrokeStyle(1/O.scale,F),V.setDisplayOrigin(O.displayOriginX,O.displayOriginY);var w=O.x,b=O.y,Y=O.rotation,U=O.scaleX,W=O.scaleY;if(O.parentContainer){var H=O.getWorldTransformMatrix();w=H.tx,b=H.ty,Y=H.rotation,U=H.scaleX,W=H.scaleY}V.setRotation(Y),V.setScale(U,W),V.setPosition(w+Z,b+G),V.setScrollFactor(O.scrollFactorX,O.scrollFactorY),V.setDepth(O.depth)},K.add(V),D.hitAreaDebug=V),this},removeDebug:function(O){var F=O.input;if(F&&F.hitAreaDebug){var D=F.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(O){return this.pollRate=O,this._pollTimer=0,this},setGlobalTopOnly:function(O){return this.manager.globalTopOnly=O,this},setTopOnly:function(O){return this.topOnly=O,this},sortGameObjects:function(O,F){if(O.length<2)return O;var D=F.camera.renderList;return O.sort(function(B,N){return D.indexOf(N)-D.indexOf(B)})},sortDropZones:function(O){return O.length<2?O:(this.scene.sys.depthSort(),O.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(O,F){if(!O.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(O);if(O.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-O.parentContainer.getIndex(O);if(O.parentContainer===F)return-1;if(F.parentContainer===O)return 1;for(var D=O.getIndexList(),B=F.getIndexList(),N=Math.min(D.length,B.length),V=0;V<N;V++){var X=D[V],K=B[V];if(X!==K)return K-X}return B.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(O){return this.manager.addPointer(O)},setDefaultCursor:function(O){return this.manager.setDefaultCursor(O),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var O=0;O<10;O++)this._drag[O]=[],this._over[O]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var D=this.systems.events;D.off(E.TRANSITION_START,this.transitionIn,this),D.off(E.TRANSITION_OUT,this.transitionOut,this),D.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(E.PRE_UPDATE,this.preUpdate,this),F.events.off(v.GAME_OUT,this.onGameOut,this),F.events.off(v.GAME_OVER,this.onGameOver,this),D.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",L,"input"),i.exports=L},function(i,d,e){i.exports={Events:e(154),KeyboardManager:e(410),KeyboardPlugin:e(1330),Key:e(512),KeyCodes:e(143),KeyCombo:e(513),AdvanceKeyCombo:e(515),ProcessKeyCombo:e(514),ResetKeyCombo:e(516),JustDown:e(1332),JustUp:e(1333),DownDuration:e(1334),UpDuration:e(1335)}},function(i,d){i.exports="keydown"},function(i,d){i.exports="keyup"},function(i,d){i.exports="keycombomatch"},function(i,d){i.exports="down"},function(i,d){i.exports="keydown-"},function(i,d){i.exports="keyup-"},function(i,d){i.exports="up"},function(i,d,e){var n=e(0),h=e(9),r=e(154),o=e(22),l=e(6),a=e(51),u=e(153),c=e(512),f=e(143),v=e(513),p=e(1331),g=e(20),m=e(76),x=new n({Extends:h,initialize:function(T){h.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(a.BOOT,this.boot,this),T.pluginEvents.on(a.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=l(y,"keyboard",!0);var T=l(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:f.UP,down:f.DOWN,left:f.LEFT,right:f.RIGHT,space:f.SPACE,shift:f.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var M=y[E].trim();M&&(S[M]=this.addKey(M,T,C))}}else for(var R in y)S[R]=this.addKey(y[R],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof c){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=f[y.toUpperCase()]),S[y]||(S[y]=new c(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof c){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=f[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new v(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=m(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],M=E.keyCode,R=C[M],L=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(M===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=M,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(R&&(L=R.isDown,R.onDown(E)),!E.cancelled&&(!R||!L)&&(p[M]&&this.emit(r.KEY_DOWN+p[M],E),E.cancelled||this.emit(r.ANY_KEY_DOWN,E))):(R&&R.onUp(E),E.cancelled||(p[M]&&this.emit(r.KEY_UP+p[M],E),E.cancelled||this.emit(r.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(a.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});u.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),i.exports=x},function(i,d,e){var n=e(143),h={};for(var r in n)h[n[r]]=r;i.exports=h},function(i,d){var e=function(n){return n._justDown?(n._justDown=!1,!0):!1};i.exports=e},function(i,d){var e=function(n){return n._justUp?(n._justUp=!1,!0):!1};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h=50);var r=n.plugin.game.loop.time-n.timeDown;return n.isDown&&r<h};i.exports=e},function(i,d){var e=function(n,h){h===void 0&&(h=50);var r=n.plugin.game.loop.time-n.timeUp;return n.isUp&&r<h};i.exports=e},function(i,d,e){i.exports={MouseManager:e(411)}},function(i,d,e){i.exports={TouchManager:e(413)}},function(i,d,e){var n=e(21),h=e(17),r={Events:e(95),FileTypes:e(1339),File:e(23),FileTypesManager:e(8),GetURL:e(155),LoaderPlugin:e(1365),MergeXHRSettings:e(240),MultiFile:e(49),XHRLoader:e(517),XHRSettings:e(156)};r=h(!1,r,n),i.exports=r},function(i,d,e){i.exports={AnimationJSONFile:e(1340),AsepriteFile:e(1341),AtlasJSONFile:e(1342),AtlasXMLFile:e(1343),AudioFile:e(518),AudioSpriteFile:e(1344),BinaryFile:e(1345),BitmapFontFile:e(1346),CSSFile:e(1347),GLSLFile:e(1348),HTML5AudioFile:e(519),HTMLFile:e(1349),HTMLTextureFile:e(1350),ImageFile:e(71),JSONFile:e(61),MultiAtlasFile:e(1351),MultiScriptFile:e(1352),OBJFile:e(1353),PackFile:e(1354),PluginFile:e(1355),SceneFile:e(1356),ScenePluginFile:e(1357),ScriptFile:e(520),SpriteSheetFile:e(1358),SVGFile:e(1359),TextFile:e(242),TilemapCSVFile:e(1360),TilemapImpactFile:e(1361),TilemapJSONFile:e(1362),UnityAtlasFile:e(1363),VideoFile:e(1364),XMLFile:e(241)}},function(i,d,e){var n=e(0),h=e(8),r=e(61),o=e(95),l=new n({Extends:r,initialize:function(u,c,f,v,p){r.call(this,u,c,f,v,p),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});h.register("animation",function(a,u,c,f){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new l(this,a[v]));else this.addFile(new l(this,a,u,f,c));return this}),i.exports=l},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(71),l=e(7),a=e(61),u=e(49),c=new n({Extends:u,initialize:function(v,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new o(v,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new a(v,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new a(v,p,m,y);T.linkFile?u.call(this,v,"atlasjson",p,[T,C,T.linkFile]):u.call(this,v,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,p),v.addToCache(),this.complete=!0}}});h.register("aseprite",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(71),l=e(7),a=e(61),u=e(49),c=new n({Extends:u,initialize:function(v,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new o(v,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new a(v,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new a(v,p,m,y);T.linkFile?u.call(this,v,"atlasjson",p,[T,C,T.linkFile]):u.call(this,v,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});h.register("atlas",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(71),l=e(7),a=e(49),u=e(241),c=new n({Extends:a,initialize:function(v,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new o(v,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new u(v,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","xml"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new u(v,p,m,y);T.linkFile?a.call(this,v,"atlasxml",p,[T,C,T.linkFile]):a.call(this,v,"atlasxml",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(f.key,f.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});h.register("atlasXML",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),i.exports=c},function(i,d,e){var n=e(518),h=e(0),r=e(8),o=e(2),l=e(7),a=e(61),u=e(49),c=new h({Extends:u,initialize:function(v,p,g,m,x,y,T){if(l(p)){var C=p;p=o(C,"key"),g=o(C,"jsonURL"),m=o(C,"audioURL"),x=o(C,"audioConfig"),y=o(C,"audioXhrSettings"),T=o(C,"jsonXhrSettings")}var S;if(!m)S=new a(v,p,g,T),u.call(this,v,"audiosprite",p,[S]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=n.create(v,p,m,x,y);E&&(S=new a(v,p,g,T),u.call(this,v,"audiosprite",p,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(f){var v=this.files.indexOf(f);if(v!==-1&&(this.pending--,this.config.resourceLoad&&f.type==="json"&&f.data.hasOwnProperty("resources"))){var p=f.data.resources,g=o(this.config,"audioConfig"),m=o(this.config,"audioXhrSettings"),x=n.create(this.loader,f.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache(),v.addToCache(),this.complete=!0}}});r.register("audioSprite",function(f,v,p,g,m,x){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(f))for(var E=0;E<f.length;E++)S=new c(this,f[E]),S.files&&this.addFile(S.files);else S=new c(this,f,v,p,g,m,x),S.files&&this.addFile(S.files);return this})},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g,m){var x="bin";if(a(v)){var y=v;v=l(y,"key"),p=l(y,"url"),g=l(y,"xhrSettings"),x=l(y,"extension",x),m=l(y,"dataType",m)}var T={type:"binary",cache:f.cacheManager.binary,extension:x,responseType:"arraybuffer",key:v,url:p,xhrSettings:g,config:{dataType:m}};r.call(this,f,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(c,f,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new u(this,c[g]));else this.addFile(new u(this,c,f,p,v));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(71),l=e(7),a=e(49),u=e(212),c=e(241),f=new n({Extends:a,initialize:function(p,g,m,x,y,T){var C,S;if(l(g)){var E=g;g=r(E,"key"),C=new o(p,{key:g,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),S=new c(p,{key:g,url:r(E,"fontDataURL"),extension:r(E,"fontDataExtension","xml"),xhrSettings:r(E,"fontDataXhrSettings")})}else C=new o(p,g,m,y),S=new c(p,g,x,T);C.linkFile?a.call(this,p,"bitmapfont",g,[C,S,C.linkFile]):a.call(this,p,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1];v.addToCache(),p.pendingDestroy();var g=v.cache.get(v.key),m=u(p.data,v.cache.getFrame(v.key),0,0,g);this.loader.cacheManager.bitmapFont.add(v.key,{data:m,texture:v.key,frame:null}),this.complete=!0}}});h.register("bitmapFont",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new f(this,v[T]),this.addFile(y.files);else y=new f(this,v,p,g,m,x),this.addFile(y.files);return this}),i.exports=f},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g){var m="css";if(a(v)){var x=v;v=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};r.call(this,f,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,f,v));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=e(396),c=new n({Extends:r,initialize:function(v,p,g,m,x){var y="glsl";if(a(p)){var T=p;p=l(T,"key"),g=l(T,"url"),m=l(T,"shaderType","fragment"),x=l(T,"xhrSettings"),y=l(T,"extension",y)}else m===void 0&&(m="fragment");var C={type:"glsl",cache:v.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};r.call(this,v,C)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.split(`
`),v=this.extractBlock(f,0);if(v)for(;v;){var p=this.getShaderName(v.header),g=this.getShaderType(v.header),m=this.getShaderUniforms(v.header),x=v.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new u(p,x,"",m)):this.cache.add(p,new u(p,"",x,m));v=this.extractBlock(f,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new u(this.key,this.data)):this.cache.add(this.key,new u(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(f){for(var v=0;v<f.length;v++){var p=f[v].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(f){for(var v=0;v<f.length;v++){var p=f[v].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(f){for(var v={},p=0;p<f.length;p++){var g=f[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{v[x]=JSON.parse(g.substring(m+1))}catch(y){console.warn("Invalid uniform JSON: "+x)}}}}return v},extractBlock:function(f,v){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],C=[],S=v;S<f.length;S++){var E=f[S].trim();if(E==="---")if(p===-1)p=S,x=!0;else if(x)g=S,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(C.push(E),m=S)}return!x&&g!==-1?{header:T,shader:C.join(`
`),offset:m}:null}});o.register("glsl",function(f,v,p,g){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new c(this,f[m]));else this.addFile(new c(this,f,v,p,g));return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g){var m="html";if(a(v)){var x=v;v=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"text",cache:f.cacheManager.html,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};r.call(this,f,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,f,v));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(a(v)){var T=v;v=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"width",g),m=l(T,"height",m)}var C={type:"html",cache:f.textureManager,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{width:g,height:m}};r.call(this,f,C)},onProcess:function(){this.state=h.FILE_PROCESSING;var c=this.config.width,f=this.config.height,v=[];v.push('<svg width="'+c+'px" height="'+f+'px" viewBox="0 0 '+c+" "+f+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var p=[v.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch(x){g.state=h.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(g.data),g.onProcessError()},r.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});o.register("htmlTexture",function(c,f,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new u(this,c[m]));else this.addFile(new u(this,c,f,v,p,g));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(71),l=e(7),a=e(61),u=e(49),c=new n({Extends:u,initialize:function(v,p,g,m,x,y,T){if(l(p)){var C=p;p=r(C,"key"),r(C,"url",!1)?g=r(C,"url"):g=r(C,"atlasURL"),y=r(C,"xhrSettings"),m=r(C,"path"),x=r(C,"baseURL"),T=r(C,"textureXhrSettings")}var S=new a(v,p,g,y);u.call(this,v,"multiatlas",p,[S]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(f){var v=this.files.indexOf(f);if(v!==-1&&(this.pending--,f.type==="json"&&f.data.hasOwnProperty("textures"))){var p=f.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,C=r(g,"baseURL",this.baseURL),S=r(g,"path",this.path),E=r(g,"prefix",this.prefix),M=r(g,"textureXhrSettings");m.setBaseURL(C),m.setPath(S),m.setPrefix(E);for(var R=0;R<p.length;R++){var L=p[R].image,O="MA"+this.multiKeyIndex+"_"+L,F=new o(m,O,L,M);if(this.addToMultiFile(F),m.addFile(F),p[R].normalMap){var D=new o(m,O,p[R].normalMap,M);D.type="normalMap",F.setLink(D),this.addToMultiFile(D),m.addFile(D)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var f=this.files[0],v=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),C=x.data,S=0;S<f.data.textures.length;S++){var E=f.data.textures[S];if(E.image===T){p.push(C),v.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,v,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});h.register("multiatlas",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(7),l=e(49),a=e(520),u=new n({Extends:l,initialize:function(f,v,p,g){var m="js",x=[];if(o(v)){var y=v;v=r(y,"key"),p=r(y,"url"),g=r(y,"xhrSettings"),m=r(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var C=new a(f,{key:v+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},x.push(C)}l.call(this,f,"scripts",v,x)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var f=this.files[c];f.data=document.createElement("script"),f.data.language="javascript",f.data.type="text/javascript",f.data.defer=!1,f.data.text=f.xhrLoader.responseText,document.head.appendChild(f.data)}this.complete=!0}}});h.register("scripts",function(c,f,v){var p;if(Array.isArray(c))for(var g=0;g<c.length;g++)p=new u(this,c[g]),this.addFile(p.files);else p=new u(this,c,f,v),this.addFile(p.files);return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(7),l=e(49),a=e(498),u=e(499),c=e(242),f=new n({Extends:l,initialize:function(p,g,m,x,y,T){var C,S,E=p.cacheManager.obj;if(o(g)){var M=g;g=r(M,"key"),C=new c(p,{key:g,type:"obj",cache:E,url:r(M,"url"),extension:r(M,"extension","obj"),xhrSettings:r(M,"xhrSettings"),config:{flipUV:r(M,"flipUV",y)}}),x=r(M,"matURL"),x&&(S=new c(p,{key:g,type:"mat",cache:E,url:x,extension:r(M,"matExtension","mat"),xhrSettings:r(M,"xhrSettings")}))}else C=new c(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(S=new c(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));l.call(this,p,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1],g=a(v.data,v.config.flipUV);p&&(g.materials=u(p.data)),v.cache.add(v.key,g),this.complete=!0}}});h.register("obj",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new f(this,v[T]),this.addFile(y.files);else y=new f(this,v,p,g,m,x),this.addFile(y.files);return this}),i.exports=f},function(i,d,e){var n=e(0),h=e(21),r=e(8),o=e(61),l=new n({Extends:o,initialize:function(u,c,f,v,p){o.call(this,u,c,f,v,p),this.type="packfile"},onProcess:function(){this.state!==h.FILE_POPULATED&&(this.state=h.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",function(a,u,c,f){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new l(this,a[v]));else this.addFile(new l(this,a,u,f,c));return this}),i.exports=l},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g,m,x){var y="js";if(a(v)){var T=v;v=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"start"),m=l(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{start:g,mapping:m}};r.call(this,f,C),typeof p=="function"&&(this.data=p,this.state=h.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,f=this.config,v=l(f,"start",!1),p=l(f,"mapping",null);if(this.state===h.FILE_POPULATED)c.install(this.key,this.data,v,p);else{this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=c.install(this.key,window[this.key],v,p);(v||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});o.register("plugin",function(c,f,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new u(this,c[m]));else this.addFile(new u(this,c,f,v,p,g));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g){var m="js";if(a(v)){var x=v;v=l(x,"key"),p=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:v,url:p,xhrSettings:g};r.call(this,f,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),f=eval;this.loader.sceneManager.add(this.key,f(c)),this.complete=!0}});o.register("sceneFile",function(c,f,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new u(this,c[p]));else this.addFile(new u(this,c,f,v));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g,m,x){var y="js";if(a(v)){var T=v;v=l(T,"key"),p=l(T,"url"),x=l(T,"xhrSettings"),y=l(T,"extension",y),g=l(T,"systemKey"),m=l(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};r.call(this,f,C),typeof p=="function"&&(this.data=p,this.state=h.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,f=this.config,v=this.key,p=l(f,"systemKey",v),g=l(f,"sceneKey",v);this.state===h.FILE_POPULATED?c.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(c,f,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new u(this,c[m]));else this.addFile(new u(this,c,f,v,p,g));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(8),r=e(71),o=new n({Extends:r,initialize:function(a,u,c,f,v){r.call(this,a,u,c,v,f),this.type="spritesheet"},addToCache:function(){var l=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(l)}});h.register("spritesheet",function(l,a,u,c){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new o(this,l[f]));else this.addFile(new o(this,l,a,u,c));return this}),i.exports=o},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=new n({Extends:r,initialize:function(f,v,p,g,m){var x="svg";if(a(v)){var y=v;v=l(y,"key"),p=l(y,"url"),g=l(y,"svgConfig",{}),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"svg",cache:f.textureManager,extension:x,responseType:"text",key:v,url:p,xhrSettings:m,config:{width:l(g,"width"),height:l(g,"height"),scale:l(g,"scale")}};r.call(this,f,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var c=this.xhrLoader.responseText,f=[c],v=this.config.width,p=this.config.height,g=this.config.scale;t:if(v&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(c,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)v=C*g,p=S*g;else break t;y.setAttribute("width",v.toString()+"px"),y.setAttribute("height",p.toString()+"px"),f=[new XMLSerializer().serializeToString(y)]}try{var M=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch(O){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var R=this,L=!1;this.data.onload=function(){L||r.revokeObjectURL(R.data),R.onProcessComplete()},this.data.onerror=function(){L?R.onProcessError():(L=!0,r.revokeObjectURL(R.data),R.data.src="data:image/svg+xml,"+encodeURIComponent(f.join("")))},r.createObjectURL(this.data,M,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});o.register("svg",function(c,f,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new u(this,c[g]));else this.addFile(new u(this,c,f,v,p));return this}),i.exports=u},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(2),a=e(7),u=e(40),c=new n({Extends:r,initialize:function(v,p,g,m){var x="csv";if(a(p)){var y=p;p=l(y,"key"),g=l(y,"url"),m=l(y,"xhrSettings"),x=l(y,"extension",x)}var T={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};r.call(this,v,T),this.tilemapFormat=u.CSV},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,f),this.pendingDestroy(f)}});o.register("tilemapCSV",function(f,v,p){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new c(this,f[g]));else this.addFile(new c(this,f,v,p));return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(8),r=e(61),o=e(40),l=new n({Extends:r,initialize:function(u,c,f,v){r.call(this,u,c,f,v),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var a={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});h.register("tilemapImpact",function(a,u,c){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new l(this,a[f]));else this.addFile(new l(this,a,u,c));return this}),i.exports=l},function(i,d,e){var n=e(0),h=e(8),r=e(61),o=e(40),l=new n({Extends:r,initialize:function(u,c,f,v){r.call(this,u,c,f,v),this.type="tilemapJSON",this.cache=u.cacheManager.tilemap},addToCache:function(){var a={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,a),this.pendingDestroy(a)}});h.register("tilemapTiledJSON",function(a,u,c){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new l(this,a[f]));else this.addFile(new l(this,a,u,c));return this}),i.exports=l},function(i,d,e){var n=e(0),h=e(8),r=e(2),o=e(71),l=e(7),a=e(49),u=e(242),c=new n({Extends:a,initialize:function(v,p,g,m,x,y){var T,C;if(l(p)){var S=p;p=r(S,"key"),T=new o(v,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new u(v,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","txt"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(v,p,g,x),C=new u(v,p,m,y);T.linkFile?a.call(this,v,"unityatlas",p,[T,C,T.linkFile]):a.call(this,v,"unityatlas",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(f.key,f.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});h.register("unityAtlas",function(f,v,p,g,m){var x;if(Array.isArray(f))for(var y=0;y<f.length;y++)x=new c(this,f[y]),this.addFile(x.files);else x=new c(this,f,v,p,g,m),this.addFile(x.files);return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(21),r=e(23),o=e(8),l=e(155),a=e(2),u=e(7),c=new n({Extends:r,initialize:function(v,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var C={type:"video",cache:v.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,v,C)},onProcess:function(){if(this.state=h.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var f=this.createVideoElement();this.data=f;var v=this;this.data.onloadeddata=function(){v.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(v.data),v.onProcessError()},r.createObjectURL(f,this.xhrLoader.response,""),f.load()},createVideoElement:function(){var f=document.createElement("video");return f.controls=!1,f.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(f.muted=!0,f.defaultMuted=!0,f.setAttribute("autoplay","autoplay")),f.setAttribute("playsinline","playsinline"),f.setAttribute("preload","auto"),f},onVideoLoadHandler:function(f){var v=f.target;v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0),this.data=v,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(f){var v=f.target;v&&(v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var f=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var v=this.createVideoElement();v.addEventListener(f,this.onLoadCallback,!0),v.addEventListener("error",this.onErrorCallback,!0),v.src=l(this,this.loader.baseURL),v.load()}}});c.create=function(f,v,p,g,m,x,y){var T=f.systems.game;u(v)&&(p=a(v,"url",[]),g=a(v,"loadEvent","loadeddata"),m=a(v,"asBlob",!1),x=a(v,"noAudio",!1),y=a(v,"xhrSettings"),v=a(v,"key"));var C=c.getVideoURL(T,p);if(C)return new c(f,v,C,g,m,x,y)},c.getVideoURL=function(f,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=a(v[p],"url",v[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=a(v[p],"type",m?m[1]:"").toLowerCase(),f.device.video[m])return{url:g,type:m}}return null},o.register("video",function(f,v,p,g,m,x){var y;if(Array.isArray(f))for(var T=0;T<f.length;T++)y=c.create(this,f[T]),y&&this.addFile(y);else y=c.create(this,f,v,p,g,m,x),y&&this.addFile(y);return this}),i.exports=c},function(i,d,e){var n=e(0),h=e(21),r=e(149),o=e(9),l=e(95),a=e(8),u=e(2),c=e(24),f=e(20),v=e(156),p=new n({Extends:o,initialize:function(m){o.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,a.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(u(y,"baseURL",x.loaderBaseURL)),this.setPath(u(y,"path",x.loaderPath)),this.setPrefix(u(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=u(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=v(u(y,"responseType",x.loaderResponseType),u(y,"async",x.loaderAsync),u(y,"user",x.loaderUser),u(y,"password",x.loaderPassword),u(y,"timeout",x.loaderTimeout),u(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=u(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=h.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(f.BOOT,this.boot,this),m.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(l.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],M=u(E,"baseURL",y),R=u(E,"path",T),L=u(E,"prefix",C),O=u(E,"files",null),F=u(E,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(M),this.setPath(R),this.setPrefix(L);for(var D=0;D<O.length;D++){var B=O[D],N=B.hasOwnProperty("type")?B.type:F;this[N]&&(this[N](B),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),x>0},isLoading:function(){return this.state===h.LOADER_LOADING||this.state===h.LOADER_PROCESSING},isReady:function(){return this.state===h.LOADER_IDLE||this.state===h.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=h.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(f.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===h.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===h.FILE_POPULATED||g.state===h.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){!this.inflight||(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(l.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(l.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===h.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===h.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=h.LOADER_COMPLETE,this.systems.events.off(f.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=m,C.textContent="Download "+m,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(u(m,"baseURL",g.loaderBaseURL)),this.setPath(u(m,"path",g.loaderPath)),this.setPrefix(u(m,"prefix",g.loaderPrefix)),this.state=h.LOADER_IDLE},shutdown:function(){this.reset(),this.state=h.LOADER_SHUTDOWN,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=h.LOADER_DESTROYED,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});c.register("Loader",p,"load"),i.exports=p},function(i,d,e){var n=e(62),h=e(17),r={ArcadePhysics:e(1367),Body:e(527),Collider:e(528),Components:e(243),Events:e(245),Factory:e(521),GetOverlapX:e(246),GetOverlapY:e(247),SeparateX:e(537),SeparateY:e(538),Group:e(524),Image:e(522),Sprite:e(157),StaticBody:e(539),StaticGroup:e(525),Tilemap:e(1391),World:e(526)};r=h(!1,r,n),i.exports=r},function(i,d,e){var n=e(0),h=e(36),r=e(50),o=e(353),l=e(521),a=e(2),u=e(127),c=e(523),f=e(244),v=e(24),p=e(20),g=e(3),m=e(526),x=new n({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new l(this.world));var y=this.systems.events;a(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=u(a(T,"arcade",{}),a(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,M){S===void 0&&(S=60);var R=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(R,S),E!==void 0&&M!==void 0&&y.body.maxVelocity.set(E,M),R},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,M=y.y,R=T.length,L=0;L<R;L++){var O=T[L],F=O.body||O;if(!(y===O||y===F||y===F.gameObject||y===F.center)){var D=o(E,M,F.center.x,F.center.y);D<C&&(S=O,C=D)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,M=y.y,R=T.length,L=0;L<R;L++){var O=T[L],F=O.body||O;if(!(y===O||y===F||y===F.gameObject||y===F.center)){var D=o(E,M,F.center.x,F.center.y);D>C&&(S=O,C=D)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var M=Math.atan2(C-y.y,T-y.x);return E>0&&(S=r(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(M,S),M},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(h(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,M){return f(this.world,y,T,C,S,E,M)},overlapCirc:function(y,T,C,S,E){return c(this.world,y,T,C,S,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",x,"arcadePhysics"),i.exports=x},function(i,d){var e={setAcceleration:function(n,h){return this.body.acceleration.set(n,h),this},setAccelerationX:function(n){return this.body.acceleration.x=n,this},setAccelerationY:function(n){return this.body.acceleration.y=n,this}};i.exports=e},function(i,d){var e={setAngularVelocity:function(n){return this.body.angularVelocity=n,this},setAngularAcceleration:function(n){return this.body.angularAcceleration=n,this},setAngularDrag:function(n){return this.body.angularDrag=n,this}};i.exports=e},function(i,d){var e={setBounce:function(n,h){return this.body.bounce.set(n,h),this},setBounceX:function(n){return this.body.bounce.x=n,this},setBounceY:function(n){return this.body.bounce.y=n,this},setCollideWorldBounds:function(n,h,r){return this.body.setCollideWorldBounds(n,h,r),this}};i.exports=e},function(i,d){var e={setDebug:function(n,h,r){return this.debugShowBody=n,this.debugShowVelocity=h,this.debugBodyColor=r,this},setDebugBodyColor:function(n){return this.body.debugBodyColor=n,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(n){this.body.debugShowBody=n}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(n){this.body.debugShowVelocity=n}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(n){this.body.debugBodyColor=n}}};i.exports=e},function(i,d){var e={setDrag:function(n,h){return this.body.drag.set(n,h),this},setDragX:function(n){return this.body.drag.x=n,this},setDragY:function(n){return this.body.drag.y=n,this},setDamping:function(n){return this.body.useDamping=n,this}};i.exports=e},function(i,d){var e={enableBody:function(n,h,r,o,l){return n&&this.body.reset(h,r),o&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,h){return n===void 0&&(n=!1),h===void 0&&(h=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),h&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};i.exports=e},function(i,d){var e={setFriction:function(n,h){return this.body.friction.set(n,h),this},setFrictionX:function(n){return this.body.friction.x=n,this},setFrictionY:function(n){return this.body.friction.y=n,this}};i.exports=e},function(i,d){var e={setGravity:function(n,h){return this.body.gravity.set(n,h),this},setGravityX:function(n){return this.body.gravity.x=n,this},setGravityY:function(n){return this.body.gravity.y=n,this}};i.exports=e},function(i,d){var e={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};i.exports=e},function(i,d){var e={setMass:function(n){return this.body.mass=n,this}};i.exports=e},function(i,d){var e={setPushable:function(n){return n===void 0&&(n=!0),this.body.pushable=n,this}};i.exports=e},function(i,d){var e={setOffset:function(n,h){return this.body.setOffset(n,h),this},setSize:function(n,h,r){return this.body.setSize(n,h,r),this},setBodySize:function(n,h,r){return this.body.setSize(n,h,r),this},setCircle:function(n,h,r){return this.body.setCircle(n,h,r),this}};i.exports=e},function(i,d){var e={setVelocity:function(n,h){return this.body.setVelocity(n,h),this},setVelocityX:function(n){return this.body.setVelocityX(n),this},setVelocityY:function(n){return this.body.setVelocityY(n),this},setMaxVelocity:function(n,h){return this.body.maxVelocity.set(n,h),this}};i.exports=e},function(i,d){i.exports="collide"},function(i,d){i.exports="overlap"},function(i,d){i.exports="pause"},function(i,d){i.exports="resume"},function(i,d){i.exports="tilecollide"},function(i,d){i.exports="tileoverlap"},function(i,d){i.exports="worldbounds"},function(i,d){i.exports="worldstep"},function(i,d){var e,n,h,r,o,l,a,u,c,f,v,p,g,m,x,y,T,C=function(O,F,D){e=O,n=F;var B=e.velocity.x,N=n.velocity.x;return h=e.pushable,c=e._dx<0,f=e._dx>0,v=e._dx===0,x=Math.abs(e.right-n.x)<=Math.abs(n.right-e.x),a=N-B*e.bounce.x,r=n.pushable,p=n._dx<0,g=n._dx>0,m=n._dx===0,y=!x,u=B-N*n.bounce.x,T=Math.abs(D),S()},S=function(){return f&&x&&n.blocked.right?(e.processX(-T,a,!1,!0),1):c&&y&&n.blocked.left?(e.processX(T,a,!0),1):g&&y&&e.blocked.right?(n.processX(-T,u,!1,!0),2):p&&x&&e.blocked.left?(n.processX(T,u,!0),2):0},E=function(){var O=e.velocity.x,F=n.velocity.x,D=Math.sqrt(F*F*n.mass/e.mass)*(F>0?1:-1),B=Math.sqrt(O*O*e.mass/n.mass)*(O>0?1:-1),N=(D+B)*.5;return D-=N,B-=N,o=N+D*e.bounce.x,l=N+B*n.bounce.x,c&&y?M(0):p&&x?M(1):f&&x?M(2):g&&y?M(3):!1},M=function(O){if(h&&r)T*=.5,O===0||O===3?(e.processX(T,o),n.processX(-T,l)):(e.processX(-T,o),n.processX(T,l));else if(h&&!r)O===0||O===3?e.processX(T,a,!0):e.processX(-T,a,!1,!0);else if(!h&&r)O===0||O===3?n.processX(-T,u,!1,!0):n.processX(T,u,!0);else{var F=T*.5;O===0?m?(e.processX(T,0,!0),n.processX(0,null,!1,!0)):g?(e.processX(F,0,!0),n.processX(-F,0,!1,!0)):(e.processX(F,n.velocity.x,!0),n.processX(-F,null,!1,!0)):O===1?v?(e.processX(0,null,!1,!0),n.processX(T,0,!0)):f?(e.processX(-F,0,!1,!0),n.processX(F,0,!0)):(e.processX(-F,null,!1,!0),n.processX(F,e.velocity.x,!0)):O===2?m?(e.processX(-T,0,!1,!0),n.processX(0,null,!0)):p?(e.processX(-F,0,!1,!0),n.processX(F,0,!0)):(e.processX(-F,n.velocity.x,!1,!0),n.processX(F,null,!0)):O===3&&(v?(e.processX(0,null,!0),n.processX(-T,0,!1,!0)):c?(e.processX(F,0,!0),n.processX(-F,0,!1,!0)):(e.processX(F,n.velocity.y,!0),n.processX(-F,null,!1,!0)))}return!0},R=function(O){O===1?n.velocity.x=0:x?n.processX(T,u,!0):n.processX(-T,u,!1,!0),e.moves&&(n.y+=(e.y-e.prev.y)*e.friction.y,n._dy=n.y-n.prev.y)},L=function(O){O===2?e.velocity.x=0:y?e.processX(T,a,!0):e.processX(-T,a,!1,!0),n.moves&&(e.y+=(n.y-n.prev.y)*n.friction.y,e._dy=e.y-e.prev.y)};i.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:R,RunImmovableBody2:L}},function(i,d){var e,n,h,r,o,l,a,u,c,f,v,p,g,m,x,y,T,C=function(O,F,D){e=O,n=F;var B=e.velocity.y,N=n.velocity.y;return h=e.pushable,c=e._dy<0,f=e._dy>0,v=e._dy===0,x=Math.abs(e.bottom-n.y)<=Math.abs(n.bottom-e.y),a=N-B*e.bounce.y,r=n.pushable,p=n._dy<0,g=n._dy>0,m=n._dy===0,y=!x,u=B-N*n.bounce.y,T=Math.abs(D),S()},S=function(){return f&&x&&n.blocked.down?(e.processY(-T,a,!1,!0),1):c&&y&&n.blocked.up?(e.processY(T,a,!0),1):g&&y&&e.blocked.down?(n.processY(-T,u,!1,!0),2):p&&x&&e.blocked.up?(n.processY(T,u,!0),2):0},E=function(){var O=e.velocity.y,F=n.velocity.y,D=Math.sqrt(F*F*n.mass/e.mass)*(F>0?1:-1),B=Math.sqrt(O*O*e.mass/n.mass)*(O>0?1:-1),N=(D+B)*.5;return D-=N,B-=N,o=N+D*e.bounce.y,l=N+B*n.bounce.y,c&&y?M(0):p&&x?M(1):f&&x?M(2):g&&y?M(3):!1},M=function(O){if(h&&r)T*=.5,O===0||O===3?(e.processY(T,o),n.processY(-T,l)):(e.processY(-T,o),n.processY(T,l));else if(h&&!r)O===0||O===3?e.processY(T,a,!0):e.processY(-T,a,!1,!0);else if(!h&&r)O===0||O===3?n.processY(-T,u,!1,!0):n.processY(T,u,!0);else{var F=T*.5;O===0?m?(e.processY(T,0,!0),n.processY(0,null,!1,!0)):g?(e.processY(F,0,!0),n.processY(-F,0,!1,!0)):(e.processY(F,n.velocity.y,!0),n.processY(-F,null,!1,!0)):O===1?v?(e.processY(0,null,!1,!0),n.processY(T,0,!0)):f?(e.processY(-F,0,!1,!0),n.processY(F,0,!0)):(e.processY(-F,null,!1,!0),n.processY(F,e.velocity.y,!0)):O===2?m?(e.processY(-T,0,!1,!0),n.processY(0,null,!0)):p?(e.processY(-F,0,!1,!0),n.processY(F,0,!0)):(e.processY(-F,n.velocity.y,!1,!0),n.processY(F,null,!0)):O===3&&(v?(e.processY(0,null,!0),n.processY(-T,0,!1,!0)):c?(e.processY(F,0,!0),n.processY(-F,0,!1,!0)):(e.processY(F,n.velocity.y,!0),n.processY(-F,null,!1,!0)))}return!0},R=function(O){O===1?n.velocity.y=0:x?n.processY(T,u,!0):n.processY(-T,u,!1,!0),e.moves&&(n.x+=(e.x-e.prev.x)*e.friction.x,n._dx=n.x-n.prev.x)},L=function(O){O===2?e.velocity.y=0:y?e.processY(T,a,!0):e.processY(-T,a,!1,!0),n.moves&&(e.x+=(n.x-n.prev.x)*n.friction.x,e._dx=e.x-e.prev.x)};i.exports={BlockCheck:S,Check:E,Set:C,Run:M,RunImmovableBody1:R,RunImmovableBody2:L}},function(i,d,e){var n={ProcessTileCallbacks:e(530),ProcessTileSeparationX:e(534),ProcessTileSeparationY:e(536),SeparateTile:e(532),TileCheckX:e(533),TileCheckY:e(535),TileIntersectsBody:e(248)};i.exports=n},function(i,d,e){var n=e(0),h=e(3),r=new n({initialize:function(){this.boundsCenter=new h,this.centerDiff=new h},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,a=this.centerDiff,u=o.bounds.max.x-o.bounds.min.x,c=o.bounds.max.y-o.bounds.min.y,f=u*o.centerOfMass.x,v=c*o.centerOfMass.y;return l.set(u/2,c/2),a.set(f-l.x,v-l.y),!0},getTopLeft:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l+u.x+c.x,a+u.y+c.y)}return!1},getTopCenter:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l+c.x,a+u.y+c.y)}return!1},getTopRight:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l-(u.x-c.x),a+u.y+c.y)}return!1},getLeftCenter:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l+u.x+c.x,a+c.y)}return!1},getCenter:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.centerDiff;return new h(l+u.x,a+u.y)}return!1},getRightCenter:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l-(u.x-c.x),a+c.y)}return!1},getBottomLeft:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l+u.x+c.x,a-(u.y-c.y))}return!1},getBottomCenter:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l+c.x,a-(u.y-c.y))}return!1},getBottomRight:function(o,l,a){if(l===void 0&&(l=0),a===void 0&&(a=0),this.parseBody(o)){var u=this.boundsCenter,c=this.centerDiff;return new h(l-(u.x-c.x),a-(u.y-c.y))}return!1}});i.exports=r},function(i,d){i.exports={decomp:O,quickDecomp:N,isSimple:D,removeCollinearPoints:V,removeDuplicatePoints:X,makeCCW:x};function e(G,w,b){b=b||0;var Y=[0,0],U,W,H,J,q,_,nt;return U=G[1][1]-G[0][1],W=G[0][0]-G[1][0],H=U*G[0][0]+W*G[0][1],J=w[1][1]-w[0][1],q=w[0][0]-w[1][0],_=J*w[0][0]+q*w[0][1],nt=U*q-J*W,K(nt,0,b)||(Y[0]=(q*H-W*_)/nt,Y[1]=(U*_-J*H)/nt),Y}function n(G,w,b,Y){var U=w[0]-G[0],W=w[1]-G[1],H=Y[0]-b[0],J=Y[1]-b[1];if(H*W-J*U==0)return!1;var q=(U*(b[1]-G[1])+W*(G[0]-b[0]))/(H*W-J*U),_=(H*(G[1]-b[1])+J*(b[0]-G[0]))/(J*U-H*W);return q>=0&&q<=1&&_>=0&&_<=1}function h(G,w,b){return(w[0]-G[0])*(b[1]-G[1])-(b[0]-G[0])*(w[1]-G[1])}function r(G,w,b){return h(G,w,b)>0}function o(G,w,b){return h(G,w,b)>=0}function l(G,w,b){return h(G,w,b)<0}function a(G,w,b){return h(G,w,b)<=0}var u=[],c=[];function f(G,w,b,Y){if(Y){var U=u,W=c;U[0]=w[0]-G[0],U[1]=w[1]-G[1],W[0]=b[0]-w[0],W[1]=b[1]-w[1];var H=U[0]*W[0]+U[1]*W[1],J=Math.sqrt(U[0]*U[0]+U[1]*U[1]),q=Math.sqrt(W[0]*W[0]+W[1]*W[1]),_=Math.acos(H/(J*q));return _<Y}else return h(G,w,b)===0}function v(G,w){var b=w[0]-G[0],Y=w[1]-G[1];return b*b+Y*Y}function p(G,w){var b=G.length;return G[w<0?w%b+b:w%b]}function g(G){G.length=0}function m(G,w,b,Y){for(var U=b;U<Y;U++)G.push(w[U])}function x(G){for(var w=0,b=G,Y=1;Y<G.length;++Y)(b[Y][1]<b[w][1]||b[Y][1]===b[w][1]&&b[Y][0]>b[w][0])&&(w=Y);return r(p(G,w-1),p(G,w),p(G,w+1))?!1:(y(G),!0)}function y(G){for(var w=[],b=G.length,Y=0;Y!==b;Y++)w.push(G.pop());for(var Y=0;Y!==b;Y++)G[Y]=w[Y]}function T(G,w){return l(p(G,w-1),p(G,w),p(G,w+1))}var C=[],S=[];function E(G,w,b){var Y,U,W=C,H=S;if(o(p(G,w+1),p(G,w),p(G,b))&&a(p(G,w-1),p(G,w),p(G,b)))return!1;U=v(p(G,w),p(G,b));for(var J=0;J!==G.length;++J)if(!((J+1)%G.length===w||J===w)&&o(p(G,w),p(G,b),p(G,J+1))&&a(p(G,w),p(G,b),p(G,J))&&(W[0]=p(G,w),W[1]=p(G,b),H[0]=p(G,J),H[1]=p(G,J+1),Y=e(W,H),v(p(G,w),Y)<U))return!1;return!0}function M(G,w,b){for(var Y=0;Y!==G.length;++Y)if(!(Y===w||Y===b||(Y+1)%G.length===w||(Y+1)%G.length===b)&&n(p(G,w),p(G,b),p(G,Y),p(G,Y+1)))return!1;return!0}function R(G,w,b,Y){var U=Y||[];if(g(U),w<b)for(var W=w;W<=b;W++)U.push(G[W]);else{for(var W=0;W<=b;W++)U.push(G[W]);for(var W=w;W<G.length;W++)U.push(G[W])}return U}function L(G){for(var w=[],b=[],Y=[],U=[],W=Number.MAX_VALUE,H=0;H<G.length;++H)if(T(G,H)){for(var J=0;J<G.length;++J)if(E(G,H,J)){b=L(R(G,H,J,U)),Y=L(R(G,J,H,U));for(var q=0;q<Y.length;q++)b.push(Y[q]);b.length<W&&(w=b,W=b.length,w.push([p(G,H),p(G,J)]))}}return w}function O(G){var w=L(G);return w.length>0?F(G,w):[G]}function F(G,w){if(w.length===0)return[G];if(w instanceof Array&&w.length&&w[0]instanceof Array&&w[0].length===2&&w[0][0]instanceof Array){for(var b=[G],Y=0;Y<w.length;Y++)for(var U=w[Y],W=0;W<b.length;W++){var H=b[W],J=F(H,U);if(J){b.splice(W,1),b.push(J[0],J[1]);break}}return b}else{var U=w,Y=G.indexOf(U[0]),W=G.indexOf(U[1]);return Y!==-1&&W!==-1?[R(G,Y,W),R(G,W,Y)]:!1}}function D(G){var w=G,b;for(b=0;b<w.length-1;b++)for(var Y=0;Y<b-1;Y++)if(n(w[b],w[b+1],w[Y],w[Y+1]))return!1;for(b=1;b<w.length-2;b++)if(n(w[0],w[w.length-1],w[b],w[b+1]))return!1;return!0}function B(G,w,b,Y,U){U=U||0;var W=w[1]-G[1],H=G[0]-w[0],J=W*G[0]+H*G[1],q=Y[1]-b[1],_=b[0]-Y[0],nt=q*b[0]+_*b[1],rt=W*_-q*H;return K(rt,0,U)?[0,0]:[(_*J-H*nt)/rt,(W*nt-q*J)/rt]}function N(G,w,b,Y,U,W,H){W=W||100,H=H||0,U=U||25,w=typeof w!="undefined"?w:[],b=b||[],Y=Y||[];var J=[0,0],q=[0,0],_=[0,0],nt=0,rt=0,at=0,vt=0,ut=0,ct=0,Ft=0,Tt=[],Ct=[],dt=G,It=G;if(It.length<3)return w;if(H++,H>W)return console.warn("quickDecomp: max level ("+W+") reached."),w;for(var gt=0;gt<G.length;++gt)if(T(dt,gt)){b.push(dt[gt]),nt=rt=Number.MAX_VALUE;for(var Pt=0;Pt<G.length;++Pt)r(p(dt,gt-1),p(dt,gt),p(dt,Pt))&&a(p(dt,gt-1),p(dt,gt),p(dt,Pt-1))&&(_=B(p(dt,gt-1),p(dt,gt),p(dt,Pt),p(dt,Pt-1)),l(p(dt,gt+1),p(dt,gt),_)&&(at=v(dt[gt],_),at<rt&&(rt=at,q=_,ct=Pt))),r(p(dt,gt+1),p(dt,gt),p(dt,Pt+1))&&a(p(dt,gt+1),p(dt,gt),p(dt,Pt))&&(_=B(p(dt,gt+1),p(dt,gt),p(dt,Pt),p(dt,Pt+1)),r(p(dt,gt-1),p(dt,gt),_)&&(at=v(dt[gt],_),at<nt&&(nt=at,J=_,ut=Pt)));if(ct===(ut+1)%G.length)_[0]=(q[0]+J[0])/2,_[1]=(q[1]+J[1])/2,Y.push(_),gt<ut?(m(Tt,dt,gt,ut+1),Tt.push(_),Ct.push(_),ct!==0&&m(Ct,dt,ct,dt.length),m(Ct,dt,0,gt+1)):(gt!==0&&m(Tt,dt,gt,dt.length),m(Tt,dt,0,ut+1),Tt.push(_),Ct.push(_),m(Ct,dt,ct,gt+1));else{if(ct>ut&&(ut+=G.length),vt=Number.MAX_VALUE,ut<ct)return w;for(var Pt=ct;Pt<=ut;++Pt)o(p(dt,gt-1),p(dt,gt),p(dt,Pt))&&a(p(dt,gt+1),p(dt,gt),p(dt,Pt))&&(at=v(p(dt,gt),p(dt,Pt)),at<vt&&M(dt,gt,Pt)&&(vt=at,Ft=Pt%G.length));gt<Ft?(m(Tt,dt,gt,Ft+1),Ft!==0&&m(Ct,dt,Ft,It.length),m(Ct,dt,0,gt+1)):(gt!==0&&m(Tt,dt,gt,It.length),m(Tt,dt,0,Ft+1),m(Ct,dt,Ft,gt+1))}return Tt.length<Ct.length?(N(Tt,w,b,Y,U,W,H),N(Ct,w,b,Y,U,W,H)):(N(Ct,w,b,Y,U,W,H),N(Tt,w,b,Y,U,W,H)),w}return w.push(G),w}function V(G,w){for(var b=0,Y=G.length-1;G.length>3&&Y>=0;--Y)f(p(G,Y-1),p(G,Y),p(G,Y+1),w)&&(G.splice(Y%G.length,1),b++);return b}function X(G,w){for(var b=G.length-1;b>=1;--b)for(var Y=G[b],U=b-1;U>=0;--U)if(Z(Y,G[U],w)){G.splice(b,1);continue}}function K(G,w,b){return b=b||0,Math.abs(G-w)<=b}function Z(G,w,b){return K(G[0],w[0],b)&&K(G[1],w[1],b)}},function(i,d,e){var n=e(86),h=e(0),r=e(591),o=e(128),l=e(592),a=e(1395),u=e(1396),c=e(1397),f=e(593),v=e(589),p=e(590),g=e(1398),m=e(64),x=new h({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var M=n.rectangle(y,T,C,S,E);return this.world.add(M),M},trapezoid:function(y,T,C,S,E,M){var R=n.trapezoid(y,T,C,S,E,M);return this.world.add(R),R},circle:function(y,T,C,S,E){var M=n.circle(y,T,C,S,E);return this.world.add(M),M},polygon:function(y,T,C,S,E){var M=n.polygon(y,T,C,S,E);return this.world.add(M),M},fromVertices:function(y,T,C,S,E,M,R){typeof C=="string"&&(C=m.fromPath(C));var L=n.fromVertices(y,T,C,S,E,M,R);return this.world.add(L),L},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var M=v.parseBody(y,T,C,S);return E&&!this.world.has(M)&&this.world.add(M),M},fromSVG:function(y,T,C,S,E,M){S===void 0&&(S=1),E===void 0&&(E={}),M===void 0&&(M=!0);for(var R=C.getElementsByTagName("path"),L=[],O=0;O<R.length;O++){var F=l.pathToVertices(R[O],30);S!==1&&m.scale(F,S,S),L.push(F)}var D=n.fromVertices(y,T,L,E);return M&&this.world.add(D),D},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var M=p.parseBody(y,T,C,S);return M&&E&&this.world.add(M),M},imageStack:function(y,T,C,S,E,M,R,L,O){R===void 0&&(R=0),L===void 0&&(L=0),O===void 0&&(O={});var F=this.world,D=this.sys.displayList;O.addToWorld=!1;var B=r.stack(C,S,E,M,R,L,function(N,V){var X=new u(F,N,V,y,T,O);return D.add(X),X.body});return F.add(B),B},stack:function(y,T,C,S,E,M,R){var L=r.stack(y,T,C,S,E,M,R);return this.world.add(L),L},pyramid:function(y,T,C,S,E,M,R){var L=r.pyramid(y,T,C,S,E,M,R);return this.world.add(L),L},chain:function(y,T,C,S,E,M){return r.chain(y,T,C,S,E,M)},mesh:function(y,T,C,S,E){return r.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var M=r.newtonsCradle(y,T,C,S,E);return this.world.add(M),M},car:function(y,T,C,S,E){var M=r.car(y,T,C,S,E);return this.world.add(M),M},softBody:function(y,T,C,S,E,M,R,L,O,F){var D=r.softBody(y,T,C,S,E,M,R,L,O,F);return this.world.add(D),D},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var M=o.create(E);return this.world.add(M),M},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=o.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var M=new u(this.world,y,T,C,S,E);return this.sys.displayList.add(M),M},tileBody:function(y,T){return new f(this.world,y,T)},sprite:function(y,T,C,S,E){var M=new c(this.world,y,T,C,S,E);return this.sys.displayList.add(M),this.sys.updateList.add(M),M},gameObject:function(y,T,C){return a(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});i.exports=x},function(i,d,e){var n=e(249),h=e(2),r=e(3);function o(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}var l=function(a,u,c,f){c===void 0&&(c={}),f===void 0&&(f=!0);var v=u.x,p=u.y;u.body={temp:!0,position:{x:v,y:p}};var g=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];if(g.forEach(function(x){for(var y in x)o(x[y])?Object.defineProperty(u,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(u,y,{value:x[y]})}),u.world=a,u._tempVec2=new r(v,p),c.hasOwnProperty("type")&&c.type==="body")u.setExistingBody(c,f);else{var m=h(c,"shape",null);m||(m="rectangle"),c.addToWorld=f,u.setBody(m,c)}return u};i.exports=l},function(i,d,e){var n=e(0),h=e(249),r=e(15),o=e(2),l=e(125),a=e(167),u=e(3),c=new n({Extends:l,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,a],initialize:function(v,p,g,m,x,y){r.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new u(p,g);var T=o(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});i.exports=c},function(i,d,e){var n=e(164),h=e(0),r=e(249),o=e(15),l=e(2),a=e(167),u=e(73),c=e(3),f=new h({Extends:u,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,a],initialize:function(p,g,m,x,y,T){o.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new c(g,m);var C=l(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});i.exports=f},function(i,d,e){var n=e(84),h=e(0),r=e(118),o=e(128),l=e(273),a=e(272),u=e(51),c=e(127),f=e(165),v=e(3),p=e(64),g=new h({initialize:function(x,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=o.create(c(T,C)),this.world.on(a.BEFORE_UPDATE,this.update,this),x.sys.input.on(u.POINTER_DOWN,this.onDown,this),x.sys.input.on(u.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=r.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&n.contains(S.bounds,x)&&l.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(a.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=m.parts[S];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,f.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,f.set(x,!1),this.world.emit(a.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(a.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(a.BEFORE_UPDATE,this.update),this.scene.sys.input.off(u.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(u.POINTER_UP,this.onUp,this)}});i.exports=g},function(i,d,e){var n={};i.exports=n;var h=e(595),r=e(32);(function(){n.name="matter-js",n.version="0.14.2",n.uses=[],n.used=[],n.use=function(){h.use(n,Array.prototype.slice.call(arguments))},n.before=function(o,l){return o=o.replace(/^Matter./,""),r.chainPathBefore(n,o,l)},n.after=function(o,l){return o=o.replace(/^Matter./,""),r.chainPathAfter(n,o,l)}})()},function(i,d,e){var n={};i.exports=n;var h=e(83),r=e(274),o=e(84),l=e(86),a=e(64);(function(){n.collides=function(u,c){for(var f=[],v=0;v<c.length;v++){var p=c[v];if(u!==p&&o.overlaps(p.bounds,u.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(o.overlaps(m.bounds,u.bounds)){var x=r.collides(m,u);if(x.collided){f.push(x);break}}}}return f},n.ray=function(u,c,f,v){v=v||1e-100;for(var p=h.angle(c,f),g=h.magnitude(h.sub(c,f)),m=(f.x+c.x)*.5,x=(f.y+c.y)*.5,y=l.rectangle(m,x,g,v,{angle:p}),T=n.collides(y,u),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},n.region=function(u,c,f){for(var v=[],p=0;p<u.length;p++){var g=u[p],m=o.overlaps(g.bounds,c);(m&&!f||!m&&f)&&v.push(g)}return v},n.point=function(u,c){for(var f=[],v=0;v<u.length;v++){var p=u[v];if(o.contains(p.bounds,c))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(o.contains(m.bounds,c)&&a.contains(m.vertices,c)){f.push(p);break}}}return f}})()},function(i,d,e){var n={};i.exports=n;var h=e(596),r=e(165),o=e(599),l=e(598),a=e(1523),u=e(597),c=e(166),f=e(118),v=e(128),p=e(32),g=e(41);(function(){n.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:u}},T=p.extend(y,x);return T.world=x.world||h.create(T.world),T.pairs=l.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=a.create(T.metrics),T},n.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,C=m.timing,S=m.broadphase,E=[],M;C.timestamp+=x*C.timeScale;var R={timestamp:C.timestamp};c.trigger(m,"beforeUpdate",R);var L=f.allBodies(T),O=f.allConstraints(T);for(a.reset(m.metrics),m.enableSleeping&&r.update(L,C.timeScale),n._bodiesApplyGravity(L,T.gravity),n._bodiesUpdate(L,x,C.timeScale,y,T.bounds),v.preSolveAll(L),M=0;M<m.constraintIterations;M++)v.solveAll(O,C.timeScale);v.postSolveAll(L),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,L,m,T.isModified),E=S.pairsList):E=L,T.isModified&&f.setModified(T,!1,!1,!0);var F=S.detector(E,m),D=m.pairs,B=C.timestamp;for(l.update(D,F,B),l.removeOld(D,B),m.enableSleeping&&r.afterCollisions(D.list,C.timeScale),D.collisionStart.length>0&&c.trigger(m,"collisionStart",{pairs:D.collisionStart}),o.preSolvePosition(D.list),M=0;M<m.positionIterations;M++)o.solvePosition(D.list,L,C.timeScale);for(o.postSolvePosition(L),v.preSolveAll(L),M=0;M<m.constraintIterations;M++)v.solveAll(O,C.timeScale);for(v.postSolveAll(L),o.preSolveVelocity(D.list),M=0;M<m.velocityIterations;M++)o.solveVelocity(D.list,C.timeScale);return D.collisionActive.length>0&&c.trigger(m,"collisionActive",{pairs:D.collisionActive}),D.collisionEnd.length>0&&c.trigger(m,"collisionEnd",{pairs:D.collisionEnd}),a.update(m.metrics,m),n._bodiesClearForces(L),c.trigger(m,"afterUpdate",R),m},n.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,n.clear(m);for(var y=f.allBodies(m.world),T=0;T<y.length;T++){var C=y[T];r.set(C,!1),C.id=p.nextId()}}},n.clear=function(m){var x=m.world;l.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=f.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},n._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},n._bodiesApplyGravity=function(m,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var C=m[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*x.x*y*C.gravityScale.x,C.force.y+=C.mass*x.y*y*C.gravityScale.y)}},n._bodiesUpdate=function(m,x,y,T,C){for(var S=0;S<m.length;S++){var E=m[S];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(i,d,e){var n=e(86),h=e(41),r=e(0),o=e(32),l=e(118),a=e(1401),u=e(9),c=e(272),f=e(2),v=e(6),p=e(41),g=e(166),m=e(593),x=e(596),y=e(83),T=new r({Extends:u,initialize:function(S,E){u.call(this),this.scene=S,this.engine=a.create(E),this.localWorld=this.engine.world;var M=v(E,"gravity",null);M?this.setGravity(M.x,M.y,M.scale):M===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(E,"enabled",!0),this.correction=v(E,"correction",1),this.getDelta=v(E,"getDelta",this.update60Hz);var R=f(E,"runner",{}),L=f(R,"fps",!1),O=f(R,"fps",60),F=f(R,"delta",1e3/O),D=f(R,"deltaMin",1e3/O),B=f(R,"deltaMax",1e3/(O*.5));L||(O=1e3/F),this.runner={fps:O,correction:f(R,"correction",1),deltaSampleSize:f(R,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:f(R,"isFixed",!1),delta:F,deltaMin:D,deltaMax:B},this.autoUpdate=v(E,"autoUpdate",!0);var N=v(E,"debug",!1);if(this.drawDebug=typeof N=="object"?!0:N,this.debugGraphic,this.debugConfig={showAxes:f(N,"showAxes",!1),showAngleIndicator:f(N,"showAngleIndicator",!1),angleColor:f(N,"angleColor",15208787),showBroadphase:f(N,"showBroadphase",!1),broadphaseColor:f(N,"broadphaseColor",16757760),showBounds:f(N,"showBounds",!1),boundsColor:f(N,"boundsColor",16777215),showVelocity:f(N,"showVelocity",!1),velocityColor:f(N,"velocityColor",44783),showCollisions:f(N,"showCollisions",!1),collisionColor:f(N,"collisionColor",16094476),showSeparations:f(N,"showSeparations",!1),separationColor:f(N,"separationColor",16753920),showBody:f(N,"showBody",!0),showStaticBody:f(N,"showStaticBody",!0),showInternalEdges:f(N,"showInternalEdges",!1),renderFill:f(N,"renderFill",!1),renderLine:f(N,"renderLine",!0),fillColor:f(N,"fillColor",1075465),fillOpacity:f(N,"fillOpacity",1),lineColor:f(N,"lineColor",2678297),lineOpacity:f(N,"lineOpacity",1),lineThickness:f(N,"lineThickness",1),staticFillColor:f(N,"staticFillColor",857979),staticLineColor:f(N,"staticLineColor",1255396),showSleeping:f(N,"showSleeping",!1),staticBodySleepOpacity:f(N,"staticBodySleepOpacity",.7),sleepFillColor:f(N,"sleepFillColor",4605510),sleepLineColor:f(N,"sleepLineColor",10066585),showSensors:f(N,"showSensors",!0),sensorFillColor:f(N,"sensorFillColor",857979),sensorLineColor:f(N,"sensorLineColor",1255396),showPositions:f(N,"showPositions",!0),positionSize:f(N,"positionSize",4),positionColor:f(N,"positionColor",14697178),showJoint:f(N,"showJoint",!0),jointColor:f(N,"jointColor",14737474),jointLineOpacity:f(N,"jointLineOpacity",1),jointLineThickness:f(N,"jointLineThickness",2),pinSize:f(N,"pinSize",4),pinColor:f(N,"pinColor",4382944),springColor:f(N,"springColor",14697184),anchorColor:f(N,"anchorColor",15724527),anchorSize:f(N,"anchorSize",4),showConvexHulls:f(N,"showConvexHulls",!1),hullColor:f(N,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),f(E,"setBounds",!1)){var V=E.setBounds;if(typeof V=="boolean")this.setBounds();else{var X=f(V,"x",0),K=f(V,"y",0),Z=f(V,"width",S.sys.scale.width),G=f(V,"height",S.sys.scale.height),w=f(V,"thickness",64),b=f(V,"left",!0),Y=f(V,"right",!0),U=f(V,"top",!0),W=f(V,"bottom",!0);this.setBounds(X,K,Z,G,w,b,Y,U,W)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,M=C.composites,R,L,O;for(R=0;R<S.length;R++)L=S[R],O=L.render,this.setBodyRenderStyle(L,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity);for(R=0;R<E.length;R++)L=E[R],O=L.render,this.setConstraintRenderStyle(L,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize);for(R=0;R<M.length;R++)L=M[R],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(C,S,E,M,R,L){var O=C.render,F=this.debugConfig;return O?(S==null&&(S=C.isStatic?F.staticLineColor:F.lineColor),E==null&&(E=F.lineOpacity),M==null&&(M=F.lineThickness),R==null&&(R=C.isStatic?F.staticFillColor:F.fillColor),L==null&&(L=F.fillOpacity),S!==!1&&(O.lineColor=S),E!==!1&&(O.lineOpacity=E),M!==!1&&(O.lineThickness=M),R!==!1&&(O.fillColor=R),L!==!1&&(O.fillOpacity=L),this):this},setConstraintRenderStyle:function(C,S,E,M,R,L,O){var F=C.render,D=this.debugConfig;if(!F)return this;if(S==null){var B=F.type;B==="line"?S=D.jointColor:B==="pin"?S=D.pinColor:B==="spring"&&(S=D.springColor)}return E==null&&(E=D.jointLineOpacity),M==null&&(M=D.jointLineThickness),R==null&&(R=D.pinSize),L==null&&(L=D.anchorColor),O==null&&(O=D.anchorSize),S!==!1&&(F.lineColor=S),E!==!1&&(F.lineOpacity=E),M!==!1&&(F.lineThickness=M),R!==!1&&(F.pinSize=R),L!==!1&&(F.anchorColor=L),O!==!1&&(F.anchorSize=O),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(M){C.setCompositeRenderStyle(M)}),g.on(E,"beforeAdd",function(M){for(var R=[].concat(M.object),L=0;L<R.length;L++){var O=R[L],F=O.render;O.type==="body"?C.setBodyRenderStyle(O,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity):O.type==="composite"?C.setCompositeRenderStyle(O):O.type==="constraint"&&C.setConstraintRenderStyle(O,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize)}})),g.on(E,"beforeAdd",function(M){C.emit(c.BEFORE_ADD,M)}),g.on(E,"afterAdd",function(M){C.emit(c.AFTER_ADD,M)}),g.on(E,"beforeRemove",function(M){C.emit(c.BEFORE_REMOVE,M)}),g.on(E,"afterRemove",function(M){C.emit(c.AFTER_REMOVE,M)}),g.on(S,"beforeUpdate",function(M){C.emit(c.BEFORE_UPDATE,M)}),g.on(S,"afterUpdate",function(M){C.emit(c.AFTER_UPDATE,M)}),g.on(S,"collisionStart",function(M){var R=M.pairs,L,O;R.length>0&&(L=R[0].bodyA,O=R[0].bodyB),C.emit(c.COLLISION_START,M,L,O)}),g.on(S,"collisionActive",function(M){var R=M.pairs,L,O;R.length>0&&(L=R[0].bodyA,O=R[0].bodyB),C.emit(c.COLLISION_ACTIVE,M,L,O)}),g.on(S,"collisionEnd",function(M){var R=M.pairs,L,O;R.length>0&&(L=R[0].bodyA,O=R[0].bodyB),C.emit(c.COLLISION_END,M,L,O)})},setBounds:function(C,S,E,M,R,L,O,F,D){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),M===void 0&&(M=this.scene.sys.scale.height),R===void 0&&(R=64),L===void 0&&(L=!0),O===void 0&&(O=!0),F===void 0&&(F=!0),D===void 0&&(D=!0),this.updateWall(L,"left",C-R,S-R,R,M+R*2),this.updateWall(O,"right",C+E,S-R,R,M+R*2),this.updateWall(F,"top",C,S-R,E,R),this.updateWall(D,"bottom",C,S+M,E,R),this},updateWall:function(C,S,E,M,R,L){var O=this.walls[S];C?(O&&x.remove(this.localWorld,O),E+=R/2,M+=L/2,this.walls[S]=this.create(E,M,R,L,{isStatic:!0,friction:0,frictionStatic:0})):(O&&x.remove(this.localWorld,O),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,M,R){var L=n.rectangle(C,S,E,M,R);return x.add(this.localWorld,L),L},add:function(C){return x.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var M=C[E],R=M.body?M.body:M;l.remove(this.localWorld,R,S)}return this},removeConstraint:function(C,S){return l.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,M=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(M,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new m(this,C[E],S);return this},nextGroup:function(C){return p.nextGroup(C)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,M=this.runner,R=E.timing,L=this.correction;M.isFixed?S=this.getDelta(C,S):(S=C-M.timePrev||M.delta,M.timePrev=C,M.deltaHistory.push(S),M.deltaHistory=M.deltaHistory.slice(-M.deltaSampleSize),S=Math.min.apply(null,M.deltaHistory),S=S<M.deltaMin?M.deltaMin:S,S=S>M.deltaMax?M.deltaMax:S,L=S/M.delta,M.delta=S),M.timeScalePrev!==0&&(L*=R.timeScale/M.timeScalePrev),R.timeScale===0&&(L=0),M.timeScalePrev=R.timeScale,M.correction=L,M.frameCounter+=1,C-M.counterTimestamp>=1e3&&(M.fps=M.frameCounter*((C-M.counterTimestamp)/1e3),M.counterTimestamp=C,M.frameCounter=0),a.update(E,S,L)}},step:function(C,S){a.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return l.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,M=l.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(M,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(M),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(M,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(M,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,M){S.lineStyle(1,E,M);for(var R=o.keys(C.buckets),L=0;L<R.length;L++){var O=R[L];if(!(C.buckets[O].length<2)){var F=O.split(/C|R/);S.strokeRect(parseInt(F[1],10)*C.bucketWidth,parseInt(F[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var M=0;M<C.length;M++){var R=C[M];if(!!R.isActive){var L=R.collision,O=L.bodyA,F=L.bodyB,D=O.position,B=F.position,N=L.penetration,V=!O.isStatic&&!F.isStatic?4:1;F.isStatic&&(V=0),S.lineBetween(B.x,B.y,B.x-N.x*V,B.y-N.y*V),V=!O.isStatic&&!F.isStatic?4:1,O.isStatic&&(V=0),S.lineBetween(D.x,D.y,D.x-N.x*V,D.y-N.y*V)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var M,R;for(M=0;M<C.length;M++)if(R=C[M],!!R.isActive)for(var L=0;L<R.activeContacts.length;L++){var O=R.activeContacts[L],F=O.vertex;S.fillRect(F.x-2,F.y-2,5,5)}for(M=0;M<C.length;M++)if(R=C[M],!!R.isActive){var D=R.collision,B=R.activeContacts;if(B.length>0){var N=B[0].vertex.x,V=B[0].vertex.y;B.length===2&&(N=(B[0].vertex.x+B[1].vertex.x)/2,V=(B[0].vertex.y+B[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?S.lineBetween(N-D.normal.x*8,V-D.normal.y*8,N,V):S.lineBetween(N+D.normal.x*8,V+D.normal.y*8,N,V)}}return this},renderBodyBounds:function(C,S,E,M){S.lineStyle(1,E,M);for(var R=0;R<C.length;R++){var L=C[R];if(!!L.render.visible){var O=L.bounds;if(O)S.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var F=L.parts,D=F.length>1?1:0;D<F.length;D++){var B=F[D];S.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,M,R){S.lineStyle(1,M,R);for(var L=0;L<C.length;L++){var O=C[L],F=O.parts;if(!!O.render.visible){var D,B,N;if(E)for(B=F.length>1?1:0;B<F.length;B++)for(D=F[B],N=0;N<D.axes.length;N++){var V=D.axes[N];S.lineBetween(D.position.x,D.position.y,D.position.x+V.x*20,D.position.y+V.y*20)}else for(B=F.length>1?1:0;B<F.length;B++)for(D=F[B],N=0;N<D.axes.length;N++)S.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,M,R){S.lineStyle(R,E,M);for(var L=0;L<C.length;L++){var O=C[L];!O.render.visible||S.lineBetween(O.position.x,O.position.y,O.position.x+(O.position.x-O.positionPrev.x)*2,O.position.y+(O.position.y-O.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,M=E.showBody,R=E.showStaticBody,L=E.showSleeping,O=E.showInternalEdges,F=E.showConvexHulls,D=E.renderFill,B=E.renderLine,N=E.staticBodySleepOpacity,V=E.sleepFillColor,X=E.sleepLineColor,K=E.hullColor,Z=0;Z<C.length;Z++){var G=C[Z];if(!!G.render.visible&&!(!R&&G.isStatic||!M&&!G.isStatic)){var w=G.render.lineColor,b=G.render.lineOpacity,Y=G.render.lineThickness,U=G.render.fillColor,W=G.render.fillOpacity;L&&G.isSleeping&&(G.isStatic?(b*=N,W*=N):(w=X,U=V)),D||(U=null),B||(w=null),this.renderBody(G,S,O,w,b,Y,U,W);var H=G.parts.length;F&&H>1&&this.renderConvexHull(G,S,K,Y)}}},renderBody:function(C,S,E,M,R,L,O,F){M===void 0&&(M=null),R===void 0&&(R=null),L===void 0&&(L=1),O===void 0&&(O=null),F===void 0&&(F=null);for(var D=this.debugConfig,B=D.sensorFillColor,N=D.sensorLineColor,V=C.parts,X=V.length,K=X>1?1:0;K<X;K++){var Z=V[K],G=Z.render,w=G.opacity;if(!(!G.visible||w===0||Z.isSensor&&!D.showSensors)){var b=Z.circleRadius;if(S.beginPath(),Z.isSensor?(O!==null&&S.fillStyle(B,F*w),M!==null&&S.lineStyle(L,N,R*w)):(O!==null&&S.fillStyle(O,F*w),M!==null&&S.lineStyle(L,M,R*w)),b)S.arc(Z.position.x,Z.position.y,b,0,2*Math.PI);else{var Y=Z.vertices,U=Y.length;S.moveTo(Y[0].x,Y[0].y);for(var W=1;W<U;W++){var H=Y[W];if(!Y[W-1].isInternal||E?S.lineTo(H.x,H.y):S.moveTo(H.x,H.y),W<U&&H.isInternal&&!E){var J=(W+1)%U;S.moveTo(Y[J].x,Y[J].y)}}S.closePath()}O!==null&&S.fillPath(),M!==null&&S.strokePath()}}if(D.showPositions&&!C.isStatic){var q=C.position.x,_=C.position.y,nt=Math.ceil(D.positionSize/2);S.fillStyle(D.positionColor,1),S.fillRect(q-nt,_-nt,D.positionSize,D.positionSize)}return this},renderConvexHull:function(C,S,E,M){M===void 0&&(M=1);var R=C.parts,L=R.length;if(L>1){var O=C.vertices;S.lineStyle(M,E),S.beginPath(),S.moveTo(O[0].x,O[0].y);for(var F=1;F<O.length;F++)S.lineTo(O[F].x,O[F].y);S.lineTo(O[0].x,O[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=l.allConstraints(this.localWorld),E=0;E<S.length;E++){var M=S[E].render,R=M.lineColor,L=M.lineOpacity,O=M.lineThickness,F=M.pinSize,D=M.anchorColor,B=M.anchorSize;this.renderConstraint(S[E],C,R,L,O,F,D,B)}},renderConstraint:function(C,S,E,M,R,L,O,F){var D=C.render;if(!D.visible||!C.pointA||!C.pointB)return this;S.lineStyle(R,E,M);var B=C.bodyA,N=C.bodyB,V,X;if(B?V=y.add(B.position,C.pointA):V=C.pointA,D.type==="pin")S.strokeCircle(V.x,V.y,L);else{if(N?X=y.add(N.position,C.pointB):X=C.pointB,S.beginPath(),S.moveTo(V.x,V.y),D.type==="spring")for(var K=y.sub(X,V),Z=y.perp(y.normalise(K)),G=Math.ceil(o.clamp(C.length/5,12,20)),w,b=1;b<G;b+=1)w=b%2==0?1:-1,S.lineTo(V.x+K.x*(b/G)+Z.x*w*4,V.y+K.y*(b/G)+Z.y*w*4);S.lineTo(X.x,X.y)}return S.strokePath(),D.anchors&&F>0&&(S.fillStyle(O),S.fillCircle(V.x,V.y,F),S.fillCircle(X.x,X.y,F)),this},resetCollisionIDs:function(){return h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),a.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});i.exports=T},function(i,d,e){i.exports={BasePlugin:e(540),DefaultPlugins:e(197),PluginCache:e(24),PluginManager:e(414),ScenePlugin:e(1404)}},function(i,d,e){var n=e(540),h=e(0),r=e(20),o=new h({Extends:n,initialize:function(a,u,c){n.call(this,u),this.scene=a,this.systems=a.sys,this.pluginKey=c,a.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});i.exports=o},function(i,d,e){i.exports={Canvas:e(1406),Events:e(91),Snapshot:e(1407),WebGL:e(1408)}},function(i,d,e){i.exports={CanvasRenderer:e(368),GetBlendModes:e(370),SetTransform:e(30)}},function(i,d,e){i.exports={Canvas:e(369),WebGL:e(383)}},function(i,d,e){var n=e(107),h=e(17),r={PipelineManager:e(372),Pipelines:e(1409),RenderTarget:e(141),Utils:e(12),WebGLPipeline:e(58),WebGLRenderer:e(371),WebGLShader:e(375)};r=h(!1,r,n),i.exports=r},function(i,d,e){var n=e(92),h=e(17),r={BitmapMaskPipeline:e(373),Events:e(374),GraphicsPipeline:e(376),LightPipeline:e(377),MultiPipeline:e(108),PointLightPipeline:e(378),PostFXPipeline:e(1410),RopePipeline:e(379),SinglePipeline:e(380),UtilityPipeline:e(381)};r=h(!1,r,n),i.exports=r},function(i,d,e){var n=e(0),h=e(198),r=e(2),o=e(1411),l=e(382),a=e(58),u=new n({Extends:a,initialize:function(f){f.renderTarget=r(f,"renderTarget",1),f.fragShader=r(f,"fragShader",o),f.vertShader=r(f,"vertShader",l),f.attributes=r(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),f.batchSize=1,f.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],a.call(this,f),this.isPostFX=!0,this.gameObject,this.colorMatrix=new h,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){a.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},copyFrame:function(c,f,v,p,g){this.manager.copyFrame(c,f,v,p,g)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,f,v){this.manager.drawFrame(c,f,v,this.colorMatrix)},blendFrames:function(c,f,v,p,g){this.manager.blendFrames(c,f,v,p,g)},blendFramesAdditive:function(c,f,v,p,g){this.manager.blendFramesAdditive(c,f,v,p,g)},clearFrame:function(c,f){this.manager.clearFrame(c,f)},blitFrame:function(c,f,v,p,g,m){this.manager.blitFrame(c,f,v,p,g,m)},copyFrameRect:function(c,f,v,p,g,m,x,y){this.manager.copyFrameRect(c,f,v,p,g,m,x,y)},bindAndDraw:function(c,f,v,p,g){v===void 0&&(v=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),f?(m.viewport(0,0,f.width,f.height),m.bindFramebuffer(m.FRAMEBUFFER,f.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f.texture,0),v&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),f?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});i.exports=u},function(i,d){i.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(i,d,e){var n=e(17),h=e(201),r={Center:e(403),Events:e(104),Orientation:e(404),ScaleManager:e(415),ScaleModes:e(405),Zoom:e(406)};r=n(!1,r,h.CENTER),r=n(!1,r,h.ORIENTATION),r=n(!1,r,h.SCALE_MODE),r=n(!1,r,h.ZOOM),i.exports=r},function(i,d,e){var n=e(144),h=e(17),r={Events:e(20),GetPhysicsPlugins:e(419),GetScenePlugins:e(420),SceneManager:e(417),ScenePlugin:e(1414),Settings:e(421),Systems:e(204)};r=h(!1,r,n),i.exports=r},function(i,d,e){var n=e(18),h=e(0),r=e(20),o=e(2),l=e(24),a=new h({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(r.BOOT,this.boot,this),c.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",u,c),this},restart:function(u){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,u),this},transition:function(u){u===void 0&&(u={});var c=o(u,"target",!1),f=this.manager.getScene(c);if(!c||!this.checkValidTransition(f))return!1;var v=o(u,"duration",1e3);this._elapsed=0,this._target=f,this._duration=v,this._willSleep=o(u,"sleep",!1),this._willRemove=o(u,"remove",!1);var p=o(u,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=o(u,"onUpdateScope",this.scene));var g=o(u,"allowInput",!1);this.settings.transitionAllowInput=g;var m=f.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=v,m.transitionAllowInput=g,o(u,"moveAbove",!1)?this.manager.moveAbove(this.key,c):o(u,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),f.sys.isSleeping()?f.sys.wake(o(u,"data")):this.manager.start(c,o(u,"data")),this.systems.events.emit(r.TRANSITION_OUT,f,v),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(u){return!(!u||u.sys.isActive()||u.sys.isTransitioning()||u===this.scene||this.systems.isTransitioning())},step:function(u,c){this._elapsed+=c,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var u=this._target.sys,c=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),u.events.emit(r.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(u,c,f,v){return this.manager.add(u,c,f,v)},launch:function(u,c){return u&&u!==this.key&&this.manager.queueOp("start",u,c),this},run:function(u,c){return u&&u!==this.key&&this.manager.queueOp("run",u,c),this},pause:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("pause",u,c),this},resume:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("resume",u,c),this},sleep:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("sleep",u,c),this},wake:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("wake",u,c),this},switch:function(u){return u!==this.key&&this.manager.queueOp("switch",this.key,u),this},stop:function(u,c){return u===void 0&&(u=this.key),this.manager.queueOp("stop",u,c),this},setActive:function(u,c,f){c===void 0&&(c=this.key);var v=this.manager.getScene(c);return v&&v.sys.setActive(u,f),this},setVisible:function(u,c){c===void 0&&(c=this.key);var f=this.manager.getScene(c);return f&&f.sys.setVisible(u),this},isSleeping:function(u){return u===void 0&&(u=this.key),this.manager.isSleeping(u)},isActive:function(u){return u===void 0&&(u=this.key),this.manager.isActive(u)},isPaused:function(u){return u===void 0&&(u=this.key),this.manager.isPaused(u)},isVisible:function(u){return u===void 0&&(u=this.key),this.manager.isVisible(u)},swapPosition:function(u,c){return c===void 0&&(c=this.key),u!==c&&this.manager.swapPosition(u,c),this},moveAbove:function(u,c){return c===void 0&&(c=this.key),u!==c&&this.manager.moveAbove(u,c),this},moveBelow:function(u,c){return c===void 0&&(c=this.key),u!==c&&this.manager.moveBelow(u,c),this},remove:function(u){return u===void 0&&(u=this.key),this.manager.remove(u),this},moveUp:function(u){return u===void 0&&(u=this.key),this.manager.moveUp(u),this},moveDown:function(u){return u===void 0&&(u=this.key),this.manager.moveDown(u),this},bringToTop:function(u){return u===void 0&&(u=this.key),this.manager.bringToTop(u),this},sendToBack:function(u){return u===void 0&&(u=this.key),this.manager.sendToBack(u),this},get:function(u){return this.manager.getScene(u)},getIndex:function(u){return u===void 0&&(u=this.key),this.manager.getIndex(u)},shutdown:function(){var u=this.systems.events;u.off(r.SHUTDOWN,this.shutdown,this),u.off(r.POST_UPDATE,this.step,this),u.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",a,"scenePlugin"),i.exports=a},function(i,d,e){i.exports={Events:e(438),List:e(110),Map:e(102),ProcessQueue:e(211),RTree:e(531),Set:e(149),Size:e(416)}},function(i,d,e){var n=e(17),h=e(1417),r={CanvasTexture:e(423),Events:e(106),FilterMode:h,Frame:e(109),Parsers:e(425),Texture:e(206),TextureManager:e(422),TextureSource:e(424)};r=n(!1,r,h),i.exports=r},function(i,d){var e={LINEAR:0,NEAREST:1};i.exports=e},function(i,d,e){var n=e(17),h=e(1419),r={Components:e(251),Parsers:e(1452),Formats:e(40),ImageCollection:e(576),ParseToTilemap:e(262),Tile:e(85),Tilemap:e(580),TilemapCreator:e(1459),TilemapFactory:e(1460),Tileset:e(122),TilemapLayer:e(581),Orientation:e(29),LayerData:e(120),MapData:e(121),ObjectLayer:e(572)};r=n(!1,r,h.ORIENTATION),i.exports=r},function(i,d,e){var n={ORIENTATION:e(29)};i.exports=n},function(i,d,e){var n=e(26),h=e(63),r=function(o,l,a,u,c,f,v,p){v===void 0&&(v=!0),o<0&&(o=0),l<0&&(l=0);for(var g=n(o,l,a,u,null,p),m=c-o,x=f-l,y=0;y<g.length;y++){var T=g[y].x+m,C=g[y].y+x;T>=0&&T<p.width&&C>=0&&C<p.height&&p.data[C][T]&&p.data[C][T].copy(g[y])}v&&h(c-1,f-1,a+2,u+2,p)};i.exports=r},function(i,d,e){var n=e(26),h=e(542),r=function(o,l,a,u,c,f){a||(a={}),Array.isArray(o)||(o=[o]);var v=f.tilemapLayer;u||(u=v.scene),c||(c=u.cameras.main);var p=n(0,0,f.width,f.height,null,f),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(o.indexOf(x.index)!==-1){var y=v.tileToWorldXY(x.x,x.y,void 0,c,f);a.x=y.x,a.y=y.y,g.push(u.make.sprite(a))}}if(typeof l=="number")for(m=0;m<o.length;m++)h(o[m],l,0,0,f.width,f.height,f);else if(Array.isArray(l))for(m=0;m<o.length;m++)h(o[m],l[m],0,0,f.width,f.height,f);return g};i.exports=r},function(i,d,e){var n=e(26),h=e(63),r=e(72),o=function(l,a,u,c,f,v,p){for(var g=p.collideIndexes.indexOf(l)!==-1,m=n(a,u,c,f,null,p),x=0;x<m.length;x++)m[x].index=l,r(m[x],g);v&&h(a-1,u-1,c+2,f+2,p)};i.exports=o},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c,f,v){var p=n(l,a,u,c,f,v);return p.filter(r,o)};i.exports=h},function(i,d){var e=function(n,h,r,o){h===void 0&&(h=0),r===void 0&&(r=!1);var l=0,a,u,c;if(r){for(u=o.height-1;u>=0;u--)for(a=o.width-1;a>=0;a--)if(c=o.data[u][a],c&&c.index===n){if(l===h)return c;l+=1}}else for(u=0;u<o.height;u++)for(a=0;a<o.width;a++)if(c=o.data[u][a],c&&c.index===n){if(l===h)return c;l+=1}return null};i.exports=e},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c,f,v){var p=n(l,a,u,c,f,v);return p.find(r,o)||null};i.exports=h},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c,f,v){var p=n(l,a,u,c,f,v);p.forEach(r,o)};i.exports=h},function(i,d,e){var n=e(29),h=e(544),r=e(545),o=e(547),l=e(1),a=e(548),u=function(c){return c===n.ORTHOGONAL?h:c===n.HEXAGONAL?r:c===n.STAGGERED?a:c===n.ISOMETRIC?o:l};i.exports=u},function(i,d,e){var n=e(158),h=e(3),r=new h,o=function(l,a,u,c,f){return f.tilemapLayer.worldToTileXY(l,a,!0,r,c),n(r.x,r.y,u,f)};i.exports=o},function(i,d,e){var n=e(483),h=e(26),r=e(484),o=e(1),l=e(3),a=function(p,g){return r.RectangleToTriangle(g,p)},u=new l,c=new l,f=new l,v=function(p,g,m,x){if(p===void 0)return[];var y=o;p instanceof n.Circle?y=r.CircleToRectangle:p instanceof n.Rectangle?y=r.RectangleToRectangle:p instanceof n.Triangle?y=a:p instanceof n.Line&&(y=r.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,c,m);var T=c.x,C=c.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,f,m);var S=Math.ceil(f.x),E=Math.ceil(f.y),M=Math.max(S-T,1),R=Math.max(E-C,1),L=h(T,C,M,R,g,x),O=x.tileWidth,F=x.tileHeight;x.tilemapLayer&&(O*=x.tilemapLayer.scaleX,F*=x.tilemapLayer.scaleY);for(var D=[],B=new n.Rectangle(0,0,O,F),N=0;N<L.length;N++){var V=L[N];x.tilemapLayer.tileToWorldXY(V.x,V.y,u,m),B.x=u.x,B.y=u.y,y(p,B)&&D.push(V)}return D};i.exports=v},function(i,d,e){var n=e(29),h=e(1),r=e(253),o=function(l){return l===n.ORTHOGONAL?r:h};i.exports=o},function(i,d,e){var n=e(29),h=e(550),r=e(551),o=e(1),l=e(552),a=e(553),u=function(c){return c===n.ORTHOGONAL?a:c===n.ISOMETRIC?r:c===n.HEXAGONAL?h:c===n.STAGGERED?l:o};i.exports=u},function(i,d,e){var n=e(29),h=e(554),r=e(1),o=e(555),l=e(254),a=function(u){return u===n.ORTHOGONAL?l:u===n.HEXAGONAL?h:u===n.STAGGERED?o:r};i.exports=a},function(i,d,e){var n=e(29),h=e(1),r=e(255),o=function(l){return l===n.ORTHOGONAL?r:h};i.exports=o},function(i,d,e){var n=e(29),h=e(556),r=e(557),o=e(1),l=e(558),a=e(559),u=function(c){return c===n.ORTHOGONAL?a:c===n.ISOMETRIC?r:c===n.HEXAGONAL?h:c===n.STAGGERED?l:o};i.exports=u},function(i,d,e){var n=e(29),h=e(560),r=e(1),o=e(561),l=e(256),a=function(u){return u===n.ORTHOGONAL?l:u===n.HEXAGONAL?h:u===n.STAGGERED?o:r};i.exports=a},function(i,d,e){var n=e(562),h=e(3),r=new h,o=function(l,a,u,c){c.tilemapLayer.worldToTileXY(l,a,!0,r,u);var f=r.x,v=r.y;return n(f,v,c)};i.exports=o},function(i,d,e){var n=e(257),h=e(3),r=new h,o=function(l,a,u,c,f,v){return v.tilemapLayer.worldToTileXY(a,u,!0,r,f,v),n(l,r.x,r.y,c,v)};i.exports=o},function(i,d,e){var n=e(63),h=e(257),r=function(o,l,a,u,c){if(u===void 0&&(u=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var f=o.length,v=o[0].length,p=0;p<f;p++)for(var g=0;g<v;g++){var m=o[p][g];h(m,l+g,a+p,!1,c)}u&&n(l-1,a-1,v+2,f+2,c)};i.exports=r},function(i,d,e){var n=e(26),h=e(210),r=function(o,l,a,u,c,f){var v,p=n(o,l,a,u,{},f);if(!c)for(c=[],v=0;v<p.length;v++)c.indexOf(p[v].index)===-1&&c.push(p[v].index);for(v=0;v<p.length;v++)p[v].index=h(c)};i.exports=r},function(i,d,e){var n=e(563),h=e(3),r=new h,o=function(l,a,u,c,f,v){return v.tilemapLayer.worldToTileXY(l,a,!0,r,f,v),n(r.x,r.y,u,c,v)};i.exports=o},function(i,d,e){var n=e(26),h=e(397),r=new h(105,210,231,150),o=new h(243,134,48,200),l=new h(40,39,37,150),a=function(u,c,f){c===void 0&&(c={});var v=c.tileColor!==void 0?c.tileColor:r,p=c.collidingTileColor!==void 0?c.collidingTileColor:o,g=c.faceColor!==void 0?c.faceColor:l,m=n(0,0,f.width,f.height,null,f);u.translateCanvas(f.tilemapLayer.x,f.tilemapLayer.y),u.scaleCanvas(f.tilemapLayer.scaleX,f.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,M=y.collides?p:v;M!==null&&(u.fillStyle(M.color,M.alpha/255),u.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(u.lineStyle(1,g.color,g.alpha/255),y.faceTop&&u.lineBetween(S,E,S+T,E),y.faceRight&&u.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&u.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&u.lineBetween(S,E,S,E+C))}};i.exports=a},function(i,d,e){var n=e(72),h=e(63),r=e(160),o=function(l,a,u,c,f){a===void 0&&(a=!0),u===void 0&&(u=!0),f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);for(var v=0;v<l.length;v++)r(l[v],a,c);if(f)for(var p=0;p<c.height;p++)for(var g=0;g<c.width;g++){var m=c.data[p][g];m&&l.indexOf(m.index)!==-1&&n(m,a)}u&&h(0,0,c.width,c.height,c)};i.exports=o},function(i,d,e){var n=e(72),h=e(63),r=e(160),o=function(l,a,u,c,f,v){if(u===void 0&&(u=!0),c===void 0&&(c=!0),v===void 0&&(v=!0),!(l>a)){for(var p=l;p<=a;p++)r(p,u,f);if(v)for(var g=0;g<f.height;g++)for(var m=0;m<f.width;m++){var x=f.data[g][m];x&&x.index>=l&&x.index<=a&&n(x,u)}c&&h(0,0,f.width,f.height,f)}};i.exports=o},function(i,d,e){var n=e(72),h=e(63),r=e(160),o=function(l,a,u,c){a===void 0&&(a=!0),u===void 0&&(u=!0),Array.isArray(l)||(l=[l]);for(var f=0;f<c.height;f++)for(var v=0;v<c.width;v++){var p=c.data[f][v];p&&l.indexOf(p.index)===-1&&(n(p,a),r(p.index,a,c))}u&&h(0,0,c.width,c.height,c)};i.exports=o},function(i,d,e){var n=e(72),h=e(63),r=e(126),o=function(l,a,u,c){a===void 0&&(a=!0),u===void 0&&(u=!0);for(var f=0;f<c.height;f++)for(var v=0;v<c.width;v++){var p=c.data[f][v];if(!!p){for(var g in l)if(!!r(p.properties,g)){var m=l[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&n(p,a)}}}u&&h(0,0,c.width,c.height,c)};i.exports=o},function(i,d,e){var n=e(72),h=e(63),r=function(o,l,a){o===void 0&&(o=!0),l===void 0&&(l=!0);for(var u=0;u<a.height;u++)for(var c=0;c<a.width;c++){var f=a.data[u][c];if(!!f){var v=f.getCollisionGroup();v&&v.objects&&v.objects.length>0&&n(f,o)}}l&&h(0,0,a.width,a.height,a)};i.exports=r},function(i,d){var e=function(n,h,r,o){if(typeof n=="number")o.callbacks[n]=h!==null?{callback:h,callbackContext:r}:void 0;else for(var l=0,a=n.length;l<a;l++)o.callbacks[n[l]]=h!==null?{callback:h,callbackContext:r}:void 0};i.exports=e},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c,f){for(var v=n(r,o,l,a,null,f),p=0;p<v.length;p++)v[p].setCollisionCallback(u,c)};i.exports=h},function(i,d,e){var n=e(26),h=e(131),r=function(o,l,a,u,c){var f=n(o,l,a,u,null,c),v=f.map(function(g){return g.index});h(v);for(var p=0;p<f.length;p++)f[p].index=v[p]};i.exports=r},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c,f){for(var v=n(l,a,u,c,null,f),p=0;p<v.length;p++)v[p]&&(v[p].index===r?v[p].index=o:v[p].index===o&&(v[p].index=r))};i.exports=h},function(i,d,e){var n=e(26),h=function(r,o,l,a,u,c){if(!!u){var f,v=n(r,o,l,a,null,c),p=0;for(f=0;f<u.length;f++)p+=u[f].weight;if(!(p<=0))for(f=0;f<v.length;f++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<u.length;y++)if(m+=u[y].weight,g<=m){var T=u[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}v[f].index=x}}};i.exports=h},function(i,d,e){i.exports={FromOrientationString:e(258),Parse:e(564),Parse2DArray:e(259),ParseCSV:e(565),Impact:e(1454),Tiled:e(1455)}},function(i,d){var e=function(n,h){for(var r=0;r<n.length;r++){var o=n[r],l=r;if(o.name&&o.name!==""&&(l=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var a={},u={},c,f,v;if(Array.isArray(o.edgecolors))for(c=0;c<o.edgecolors.length;c++)v=1+c,f=o.edgecolors[c],f.name!==""&&(a[v]=f.name);if(Array.isArray(o.cornercolors))for(c=0;c<o.cornercolors.length;c++)v=1+c,f=o.cornercolors[c],f.name!==""&&(u[v]=f.name);if(Array.isArray(o.colors))for(c=0;c<o.colors.length;c++)f=o.colors[c],v=1+c,f.name!==""&&(a[v]=u[v]=f.name);for(var p=[a,u,a,u,a,u,a,u],g=0;g<o.wangtiles.length;g++){var m=o.wangtiles[g],x=h[m.tileid]||(h[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(f=m.wangid[T],f===0){y.push(void 0);continue}var C=p[T][f];if(C!==void 0){y.push(C);continue}y.push(f)}x[l]=y}}}};i.exports=e},function(i,d,e){i.exports={ParseTileLayers:e(578),ParseTilesets:e(579),ParseWeltmeister:e(577)}},function(i,d,e){i.exports={AssignTileProperties:e(567),Base64Decode:e(574),BuildTilesetIndex:e(568),CreateGroupLayer:e(161),ParseGID:e(261),ParseImageLayers:e(569),ParseJSONTiled:e(566),ParseObject:e(260),ParseObjectLayers:e(570),ParseTileLayers:e(573),ParseTilesets:e(575)}},function(i,d,e){var n=e(1),h=e(1);n=e(1457),h=e(1458),i.exports={renderWebGL:n,renderCanvas:h}},function(i,d,e){var n=e(12),h=function(r,o,l){var a=o.cull(l),u=a.length,c=l.alpha*o.alpha;if(!(u===0||c<=0)){var f=o.gidMap,v=r.pipelines.set(o.pipeline,o),p=n.getTintAppendFloatAlpha,g=o.scrollFactorX,m=o.scrollFactorY,x=o.x,y=o.y,T=o.scaleX,C=o.scaleY;r.pipelines.preBatch(o);for(var S=0;S<u;S++){var E=a[S],M=f[E.index];if(!!M){var R=M.getTileTextureCoordinates(E.index);if(R!==null){var L=M.glTexture,O=v.setTexture2D(L,o),F=M.tileWidth,D=M.tileHeight,B=R.x,N=R.y,V=M.tileWidth*.5,X=M.tileHeight*.5,K=p(E.tint,c*E.alpha);v.batchTexture(o,L,L.width,L.height,x+(V+E.pixelX)*T,y+(X+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,m,V,X,B,N,F,D,K,K,K,K,!1,0,0,l,null,!0,O)}}}r.pipelines.postBatch(o)}};i.exports=h},function(i,d,e){var n=e(25),h=new n,r=new n,o=new n,l=function(a,u,c,f){var v=u.cull(c),p=v.length,g=c.alpha*u.alpha;if(!(p===0||g<=0)){var m=h,x=r,y=o;x.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),m.copyFrom(c.matrix);var T=a.currentContext,C=u.gidMap;T.save(),f?(m.multiplyWithOffset(f,-c.scrollX*u.scrollFactorX,-c.scrollY*u.scrollFactorY),x.e=u.x,x.f=u.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=c.scrollX*u.scrollFactorX,x.f-=c.scrollY*u.scrollFactorY,x.copyToContext(T)),(!a.antialias||u.scaleX>1||u.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<p;S++){var E=v[S],M=C[E.index];if(!!M){var R=M.image.getSourceImage(),L=M.getTileTextureCoordinates(E.index);if(L!==null){var O=M.tileWidth,F=M.tileHeight,D=O*.5,B=F*.5;T.save(),T.translate(E.pixelX+D,E.pixelY+B),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(R,L.x,L.y,O,F,-D,-B,O,F),T.restore()}}}T.restore()}};i.exports=l},function(i,d,e){var n=e(16),h=e(262);n.register("tilemap",function(r){var o=r!==void 0?r:{};return h(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(i,d,e){var n=e(5),h=e(262);n.register("tilemap",function(r,o,l,a,u,c,f){return r===null&&(r=void 0),o===null&&(o=void 0),l===null&&(l=void 0),a===null&&(a=void 0),u===null&&(u=void 0),h(this.scene,r,o,l,a,u,c,f)})},function(i,d,e){i.exports={Clock:e(1462),TimerEvent:e(582)}},function(i,d,e){var n=e(0),h=e(24),r=e(20),o=e(582),l=e(93),a=new n({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(r.BOOT,this.boot,this),c.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var u=this.systems.events;u.on(r.PRE_UPDATE,this.preUpdate,this),u.on(r.UPDATE,this.update,this),u.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(u){var c;return u instanceof o?(c=u,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new o(u),this._pendingInsertion.push(c),c},delayedCall:function(u,c,f,v){return this.addEvent({delay:u,callback:c,args:f,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var f=u[c];l(this._pendingRemoval,f),l(this._pendingInsertion,f),l(this._active,f)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var u=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(u===0&&c===0)){var f,v;for(f=0;f<u;f++){v=this._pendingRemoval[f];var p=this._active.indexOf(v);p>-1&&this._active.splice(p,1),v.destroy()}for(f=0;f<c;f++)v=this._pendingInsertion[f],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(u,c){if(this.now=u,!this.paused){c*=this.timeScale;for(var f=0;f<this._active.length;f++){var v=this._active[f];if(!v.paused&&(v.elapsed+=c*v.timeScale,v.elapsed>=v.delay)){var p=v.elapsed-v.delay;v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0?(v.repeatCount--,v.elapsed=p,v.hasDispatched=!1):this._pendingRemoval.push(v)}}}},shutdown:function(){var u;for(u=0;u<this._pendingInsertion.length;u++)this._pendingInsertion[u].destroy();for(u=0;u<this._active.length;u++)this._active[u].destroy();for(u=0;u<this._pendingRemoval.length;u++)this._pendingRemoval[u].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(r.PRE_UPDATE,this.preUpdate,this),c.off(r.UPDATE,this.update,this),c.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});h.register("Clock",a,"time"),i.exports=a},function(i,d,e){var n=e(100),h=e(17),r={Builders:e(1464),Events:e(267),TweenManager:e(1480),Tween:e(266),TweenData:e(268),Timeline:e(588)};r=h(!1,r,n),i.exports=r},function(i,d,e){i.exports={GetBoolean:e(99),GetEaseFunction:e(80),GetNewValue:e(162),GetProps:e(583),GetTargets:e(263),GetTweens:e(584),GetValueOp:e(264),NumberTweenBuilder:e(585),StaggerBuilder:e(586),TimelineBuilder:e(587),TweenBuilder:e(163)}},function(i,d){i.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(i,d){i.exports="complete"},function(i,d){i.exports="loop"},function(i,d){i.exports="pause"},function(i,d){i.exports="resume"},function(i,d){i.exports="start"},function(i,d){i.exports="update"},function(i,d){i.exports="active"},function(i,d){i.exports="complete"},function(i,d){i.exports="loop"},function(i,d){i.exports="repeat"},function(i,d){i.exports="start"},function(i,d){i.exports="stop"},function(i,d){i.exports="update"},function(i,d){i.exports="yoyo"},function(i,d,e){var n=e(93),h=e(0),r=e(585),o=e(24),l=e(20),a=e(586),u=e(587),c=e(100),f=e(163),v=new h({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(l.BOOT,this.boot,this),g.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(l.PRE_UPDATE,this.preUpdate,this),p.on(l.UPDATE,this.update,this),p.once(l.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return u(this,p)},timeline:function(p){var g=u(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return f(this,p)},add:function(p){var g=f(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=r(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return a(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=c.REMOVED,m.splice(T,1))):(y.state=c.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===c.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return n(this._add,p),n(this._pending,p),n(this._active,p),n(this._destroy,p),p.state=c.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=c.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,C;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(l.PRE_UPDATE,this.preUpdate,this),p.off(l.UPDATE,this.update,this),p.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",v,"tweens"),i.exports=v},function(i,d,e){i.exports={Array:e(208),Base64:e(1482),Objects:e(1484),String:e(1488),NOOP:e(1)}},function(i,d,e){i.exports={ArrayBufferToBase64:e(1483),Base64ToArrayBuffer:e(433)}},function(i,d){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(h,r){for(var o=new Uint8Array(h),l=o.length,a=r?"data:"+r+";base64,":"",u=0;u<l;u+=3)a+=e[o[u]>>2],a+=e[(o[u]&3)<<4|o[u+1]>>4],a+=e[(o[u+1]&15)<<2|o[u+2]>>6],a+=e[o[u+2]&63];return l%3==2?a=a.substring(0,a.length-1)+"=":l%3==1&&(a=a.substring(0,a.length-2)+"=="),a};i.exports=n},function(i,d,e){i.exports={Clone:e(77),DeepCopy:e(175),Extend:e(17),GetAdvancedValue:e(13),GetFastValue:e(2),GetMinMaxValue:e(1485),GetValue:e(6),HasAll:e(1486),HasAny:e(455),HasValue:e(126),IsPlainObject:e(7),Merge:e(127),MergeRight:e(1487),Pick:e(571),SetValue:e(478)}},function(i,d,e){var n=e(6),h=e(18),r=function(o,l,a,u,c){c===void 0&&(c=a);var f=n(o,l,c);return h(f,a,u)};i.exports=r},function(i,d){var e=function(n,h){for(var r=0;r<h.length;r++)if(!n.hasOwnProperty(h[r]))return!1;return!0};i.exports=e},function(i,d,e){var n=e(77),h=function(r,o){var l=n(r);for(var a in o)l.hasOwnProperty(a)&&(l[a]=o[a]);return l};i.exports=h},function(i,d,e){i.exports={Format:e(1489),Pad:e(186),RemoveAt:e(1490),Reverse:e(1491),UppercaseFirst:e(205),UUID:e(222)}},function(i,d){var e=function(n,h){return n.replace(/%([0-9]+)/g,function(r,o){return h[Number(o)-1]})};i.exports=e},function(i,d){var e=function(n,h){return h===0?n.slice(1):n.slice(0,h-1)+n.slice(h)};i.exports=e},function(i,d){var e=function(n){return n.split("").reverse().join("")};i.exports=e},function(i,d,e){i.exports={SoundManagerCreator:e(426),Events:e(70),BaseSound:e(146),BaseSoundManager:e(145),WebAudioSound:e(434),WebAudioSoundManager:e(432),HTML5AudioSound:e(429),HTML5AudioSoundManager:e(427),NoAudioSound:e(431),NoAudioSoundManager:e(430)}},function(i,d,e){i.exports={Arcade:e(1366),Matter:e(1494)}},function(i,d,e){i.exports={BodyBounds:e(1392),Components:e(249),Events:e(272),Factory:e(1394),MatterGameObject:e(1395),Image:e(1396),Matter:e(594),MatterPhysics:e(1524),PolyDecomp:e(1393),Sprite:e(1397),TileBody:e(593),PhysicsEditorParser:e(589),PhysicsJSONParser:e(590),PointerConstraint:e(1398),World:e(1402)}},function(i,d){var e={setBounce:function(n){return this.body.restitution=n,this}};i.exports=e},function(i,d){var e={setCollisionCategory:function(n){return this.body.collisionFilter.category=n,this},setCollisionGroup:function(n){return this.body.collisionFilter.group=n,this},setCollidesWith:function(n){var h=0;if(!Array.isArray(n))h=n;else for(var r=0;r<n.length;r++)h|=n[r];return this.body.collisionFilter.mask=h,this},setOnCollide:function(n){return this.body.onCollideCallback=n,this},setOnCollideEnd:function(n){return this.body.onCollideEndCallback=n,this},setOnCollideActive:function(n){return this.body.onCollideActiveCallback=n,this},setOnCollideWith:function(n,h){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var o=n[r].hasOwnProperty("body")?n[r].body:n[r];this.body.setOnCollideWith(o,h)}return this}};i.exports=e},function(i,d,e){var n=e(41),h={applyForce:function(r){return this._tempVec2.set(this.body.position.x,this.body.position.y),n.applyForce(this.body,this._tempVec2,r),this},applyForceFrom:function(r,o){return n.applyForce(this.body,r,o),this},thrust:function(r){var o=this.body.angle;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(r){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(r){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(r){var o=this.body.angle-Math.PI;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};i.exports=h},function(i,d){var e={setFriction:function(n,h,r){return this.body.friction=n,h!==void 0&&(this.body.frictionAir=h),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(n){return this.body.frictionAir=n,this},setFrictionStatic:function(n){return this.body.frictionStatic=n,this}};i.exports=e},function(i,d){var e={setIgnoreGravity:function(n){return this.body.ignoreGravity=n,this}};i.exports=e},function(i,d,e){var n=e(41),h=e(3),r={setMass:function(o){return n.setMass(this.body,o),this},setDensity:function(o){return n.setDensity(this.body,o),this},centerOfMass:{get:function(){return new h(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};i.exports=r},function(i,d){var e={setSensor:function(n){return this.body.isSensor=n,this},isSensor:function(){return this.body.isSensor}};i.exports=e},function(i,d,e){var n=e(86),h=e(41),r=e(124),o=e(2),l=e(589),a=e(590),u=e(64),c={setRectangle:function(f,v,p){return this.setBody({type:"rectangle",width:f,height:v},p)},setCircle:function(f,v){return this.setBody({type:"circle",radius:f},v)},setPolygon:function(f,v,p){return this.setBody({type:"polygon",sides:v,radius:f},p)},setTrapezoid:function(f,v,p,g){return this.setBody({type:"trapezoid",width:f,height:v,slope:p},g)},setExistingBody:function(f,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=f;for(var p=0;p<f.parts.length;p++)f.parts[p].gameObject=this;var g=this;if(f.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},v&&(this.world.has(f)&&this.world.remove(f,!0),this.world.add(f)),this._originComponent){var m=f.render.sprite.xOffset,x=f.render.sprite.yOffset,y=f.centerOfMass.x,T=f.centerOfMass.y;if(r(y,.5)&&r(T,.5))this.setOrigin(m+.5,x+.5);else{var C=f.centerOffset.x,S=f.centerOffset.y;this.setOrigin(m+C/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(f,v){if(!f)return this;var p;typeof f=="string"&&(f={type:f});var g=o(f,"type","rectangle"),m=o(f,"x",this._tempVec2.x),x=o(f,"y",this._tempVec2.y),y=o(f,"width",this.width),T=o(f,"height",this.height);switch(g){case"rectangle":p=n.rectangle(m,x,y,T,v);break;case"circle":var C=o(f,"radius",Math.max(y,T)/2),S=o(f,"maxSides",25);p=n.circle(m,x,C,v,S);break;case"trapezoid":var E=o(f,"slope",.5);p=n.trapezoid(m,x,y,T,E,v);break;case"polygon":var M=o(f,"sides",5),R=o(f,"radius",Math.max(y,T)/2);p=n.polygon(m,x,M,R,v);break;case"fromVertices":case"fromVerts":var L=o(f,"verts",null);if(L)if(typeof L=="string"&&(L=u.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))h.setVertices(this.body,L),p=this.body;else{var O=o(f,"flagInternal",!1),F=o(f,"removeCollinear",.01),D=o(f,"minimumArea",10);p=n.fromVertices(m,x,L,v,O,F,D)}break;case"fromPhysicsEditor":p=l.parseBody(m,x,f,v);break;case"fromPhysicsTracer":p=a.parseBody(m,x,f,v);break}return p&&this.setExistingBody(p,f.addToWorld),this}};i.exports=c},function(i,d,e){var n=e(272),h=e(165),r=e(166),o={setToSleep:function(){return h.set(this.body,!0),this},setAwake:function(){return h.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,a){return this.setSleepStartEvent(l),this.setSleepEndEvent(a),this},setSleepStartEvent:function(l){if(l){var a=this.world;r.on(this.body,"sleepStart",function(u){a.emit(n.SLEEP_START,u,this)})}else r.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var a=this.world;r.on(this.body,"sleepEnd",function(u){a.emit(n.SLEEP_END,u,this)})}else r.off(this.body,"sleepEnd");return this}};i.exports=o},function(i,d){i.exports="afteradd"},function(i,d){i.exports="afterremove"},function(i,d){i.exports="afterupdate"},function(i,d){i.exports="beforeadd"},function(i,d){i.exports="beforeremove"},function(i,d){i.exports="beforeupdate"},function(i,d){i.exports="collisionactive"},function(i,d){i.exports="collisionend"},function(i,d){i.exports="collisionstart"},function(i,d){i.exports="dragend"},function(i,d){i.exports="drag"},function(i,d){i.exports="dragstart"},function(i,d){i.exports="pause"},function(i,d){i.exports="resume"},function(i,d){i.exports="sleepend"},function(i,d){i.exports="sleepstart"},function(i,d,e){var n=e(41),h={setStatic:function(r){return n.setStatic(this.body,r),this},isStatic:function(){return this.body.isStatic}};i.exports=h},function(i,d,e){var n=e(41),h=e(14),r=e(269),o=e(270),l=4,a={x:{get:function(){return this.body.position.x},set:function(u){this._tempVec2.set(u,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(u){this._tempVec2.set(this.x,u),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(u){var c=1/this._scaleX,f=1/this._scaleY;this._scaleX=u,this._scaleX===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,c,f),n.scale(this.body,u,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(u){var c=1/this._scaleX,f=1/this._scaleY;this._scaleY=u,this._scaleY===0?this.renderFlags&=~l:this.renderFlags|=l,n.scale(this.body,c,f),n.scale(this.body,this._scaleX,u)}},angle:{get:function(){return o(this.body.angle*h.RAD_TO_DEG)},set:function(u){this.rotation=o(u)*h.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(u){this._rotation=r(u),n.setAngle(this.body,this._rotation)}},setPosition:function(u,c){return u===void 0&&(u=0),c===void 0&&(c=u),this._tempVec2.set(u,c),n.setPosition(this.body,this._tempVec2),this},setRotation:function(u){return u===void 0&&(u=0),this._rotation=r(u),n.setAngle(this.body,u),this},setFixedRotation:function(){return n.setInertia(this.body,Infinity),this},setAngle:function(u){return u===void 0&&(u=0),this.angle=u,n.setAngle(this.body,this.rotation),this},setScale:function(u,c,f){u===void 0&&(u=1),c===void 0&&(c=u);var v=1/this._scaleX,p=1/this._scaleY;return this._scaleX=u,this._scaleY=c,n.scale(this.body,v,p,f),n.scale(this.body,u,c,f),this}};i.exports=a},function(i,d,e){var n=e(41),h={setAngularVelocity:function(r){return n.setAngularVelocity(this.body,r),this},setVelocityX:function(r){return this._tempVec2.set(r,this.body.velocity.y),n.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(r){return this._tempVec2.set(this.body.velocity.x,r),n.setVelocity(this.body,this._tempVec2),this},setVelocity:function(r,o){return this._tempVec2.set(r,o),n.setVelocity(this.body,this._tempVec2),this}};i.exports=h},function(i,d,e){var n={};i.exports=n;var h=e(118),r=e(32);(function(){n.create=function(o){var l={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return r.extend(l,!1,o)},n.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},n.update=function(o,l){if(o.extended){var a=l.world,u=h.allBodies(a);o.collisions=o.narrowDetections,o.pairs=l.pairs.list.length,o.bodies=u.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(u.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(i,d,e){var n=e(123),h=e(271),r=e(86),o=e(41),l=e(1392),a=e(84),u=e(0),c=e(118),f=e(591),v=e(128),p=e(273),g=e(50),m=e(1394),x=e(2),y=e(6),T=e(597),C=e(1525),S=e(1526),E=e(1399),M=e(1527),R=e(127),L=e(250),O=e(598),F=e(595),D=e(24),B=e(1400),N=e(599),V=e(274),X=e(20),K=e(592),Z=e(83),G=e(64),w=e(1402),b=new u({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=c,this.detector=p,this.grid=T,this.pair=L,this.pairs=O,this.query=B,this.resolver=N,this.sat=V,this.constraint=v,this.bodies=r,this.composites=f,this.axes=h,this.bounds=a,this.svg=K,this.vector=Z,this.vertices=G,this.verts=G,this._tempVec2=Z.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),N._restingThresh=y(this.config,"restingThresh",4),N._restingThreshTangent=y(this.config,"restingThreshTangent",6),N._positionDampen=y(this.config,"positionDampen",.9),N._positionWarming=y(this.config,"positionWarming",.8),N._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),U.sys.events.once(X.BOOT,this.boot,this),U.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new w(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new l,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new w(this.scene,this.config),this.add=new m(this.world));var Y=this.systems.events;Y.on(X.UPDATE,this.world.update,this.world),Y.on(X.POST_UPDATE,this.world.postUpdate,this.world),Y.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var Y=this.systems.game.config.physics,U=this.systems.settings.physics,W=R(x(U,"matter",{}),x(Y,"matter",{}));return W},enableAttractorPlugin:function(){return F.register(C),F.use(E,C),this},enableWrapPlugin:function(){return F.register(M),F.use(E,M),this},enableCollisionEventsPlugin:function(){return F.register(S),F.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(Y,U){this.world.step(Y,U)},containsPoint:function(Y,U,W){Y=this.getMatterBodies(Y);var H=Z.create(U,W),J=B.point(Y,H);return J.length>0},intersectPoint:function(Y,U,W){W=this.getMatterBodies(W);var H=Z.create(Y,U),J=[],q=B.point(W,H);return q.forEach(function(_){J.indexOf(_)===-1&&J.push(_)}),J},intersectRect:function(Y,U,W,H,J,q){J===void 0&&(J=!1),q=this.getMatterBodies(q);var _={min:{x:Y,y:U},max:{x:Y+W,y:U+H}},nt=[],rt=B.region(q,_,J);return rt.forEach(function(at){nt.indexOf(at)===-1&&nt.push(at)}),nt},intersectRay:function(Y,U,W,H,J,q){J===void 0&&(J=1),q=this.getMatterBodies(q);for(var _=[],nt=B.ray(q,Z.create(Y,U),Z.create(W,H),J),rt=0;rt<nt.length;rt++)_.push(nt[rt].body);return _},intersectBody:function(Y,U){U=this.getMatterBodies(U);for(var W=[],H=B.collides(Y,U),J=0;J<H.length;J++){var q=H[J];q.bodyA===Y?W.push(q.bodyB):W.push(q.bodyA)}return W},overlap:function(Y,U,W,H,J){W===void 0&&(W=null),H===void 0&&(H=null),J===void 0&&(J=W),Array.isArray(Y)||(Y=[Y]),Y=this.getMatterBodies(Y),U=this.getMatterBodies(U);for(var q=!1,_=0;_<Y.length;_++)for(var nt=Y[_],rt=B.collides(nt,U),at=0;at<rt.length;at++){var vt=rt[at],ut=vt.bodyA.id===nt.id?vt.bodyB:vt.bodyA;if(!H||H.call(J,nt,ut,vt)){if(q=!0,W)W.call(J,nt,ut,vt);else if(!H)return!0}}return q},setCollisionCategory:function(Y,U){return Y=this.getMatterBodies(Y),Y.forEach(function(W){W.collisionFilter.category=U}),this},setCollisionGroup:function(Y,U){return Y=this.getMatterBodies(Y),Y.forEach(function(W){W.collisionFilter.group=U}),this},setCollidesWith:function(Y,U){Y=this.getMatterBodies(Y);var W=0;if(!Array.isArray(U))W=U;else for(var H=0;H<U.length;H++)W|=U[H];return Y.forEach(function(J){J.collisionFilter.mask=W}),this},getMatterBodies:function(Y){if(!Y)return this.world.getAllBodies();Array.isArray(Y)||(Y=[Y]);for(var U=[],W=0;W<Y.length;W++){var H=Y[W].hasOwnProperty("body")?Y[W].body:Y[W];U.push(H)}return U},setVelocity:function(Y,U,W){Y=this.getMatterBodies(Y);var H=this._tempVec2;return H.x=U,H.y=W,Y.forEach(function(J){o.setVelocity(J,H)}),this},setVelocityX:function(Y,U){Y=this.getMatterBodies(Y);var W=this._tempVec2;return W.x=U,Y.forEach(function(H){W.y=H.velocity.y,o.setVelocity(H,W)}),this},setVelocityY:function(Y,U){Y=this.getMatterBodies(Y);var W=this._tempVec2;return W.y=U,Y.forEach(function(H){W.x=H.velocity.x,o.setVelocity(H,W)}),this},setAngularVelocity:function(Y,U){return Y=this.getMatterBodies(Y),Y.forEach(function(W){o.setAngularVelocity(W,U)}),this},applyForce:function(Y,U){Y=this.getMatterBodies(Y);var W=this._tempVec2;return Y.forEach(function(H){W.x=H.position.x,W.y=H.position.y,o.applyForce(H,W,U)}),this},applyForceFromPosition:function(Y,U,W,H){Y=this.getMatterBodies(Y);var J=this._tempVec2;return Y.forEach(function(q){H===void 0&&(H=q.angle),J.x=W*Math.cos(H),J.y=W*Math.sin(H),o.applyForce(q,U,J)}),this},applyForceFromAngle:function(Y,U,W){Y=this.getMatterBodies(Y);var H=this._tempVec2;return Y.forEach(function(J){W===void 0&&(W=J.angle),H.x=U*Math.cos(W),H.y=U*Math.sin(W),o.applyForce(J,{x:J.position.x,y:J.position.y},H)}),this},getConstraintLength:function(Y){var U=Y.pointA.x,W=Y.pointA.y,H=Y.pointB.x,J=Y.pointB.y;return Y.bodyA&&(U+=Y.bodyA.position.x,W+=Y.bodyA.position.y),Y.bodyB&&(H+=Y.bodyB.position.x,J+=Y.bodyB.position.y),g(U,W,H,J)},alignBody:function(Y,U,W,H){Y=Y.hasOwnProperty("body")?Y.body:Y;var J;switch(H){case n.TOP_LEFT:case n.LEFT_TOP:J=this.bodyBounds.getTopLeft(Y,U,W);break;case n.TOP_CENTER:J=this.bodyBounds.getTopCenter(Y,U,W);break;case n.TOP_RIGHT:case n.RIGHT_TOP:J=this.bodyBounds.getTopRight(Y,U,W);break;case n.LEFT_CENTER:J=this.bodyBounds.getLeftCenter(Y,U,W);break;case n.CENTER:J=this.bodyBounds.getCenter(Y,U,W);break;case n.RIGHT_CENTER:J=this.bodyBounds.getRightCenter(Y,U,W);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:J=this.bodyBounds.getBottomLeft(Y,U,W);break;case n.BOTTOM_CENTER:J=this.bodyBounds.getBottomCenter(Y,U,W);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:J=this.bodyBounds.getBottomRight(Y,U,W);break}return J&&o.setPosition(Y,J),this},shutdown:function(){var Y=this.systems.events;this.world&&(Y.off(X.UPDATE,this.world.update,this.world),Y.off(X.POST_UPDATE,this.world.postUpdate,this.world)),Y.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});D.register("MatterPhysics",b,"matterPhysics"),i.exports=b},function(i,d,e){var n=e(594),h={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Body.create",function(){h.Body.init(this)}),r.before("Engine.update",function(o){h.Engine.update(o)})},Body:{init:function(r){r.plugin.attractors=r.plugin.attractors||[]}},Engine:{update:function(r){for(var o=n.Composite.allBodies(r.world),l=0;l<o.length;l++){var a=o[l],u=a.plugin.attractors;if(u&&u.length>0)for(var c=0;c<o.length;c++){var f=o[c];if(l!==c)for(var v=0;v<u.length;v++){var p=u[v],g=p;n.Common.isFunction(p)&&(g=p(a,f)),g&&n.Body.applyForce(f,f.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(r,o){var l=n.Vector.sub(o.position,r.position),a=n.Vector.magnitudeSquared(l)||1e-4,u=n.Vector.normalise(l),c=-h.Attractors.gravityConstant*(r.mass*o.mass/a),f=n.Vector.mult(u,c);n.Body.applyForce(r,r.position,n.Vector.neg(f)),n.Body.applyForce(o,o.position,f)}}};i.exports=h},function(i,d){var e={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.create",function(){n.Events.on(this,"collisionStart",function(h){h.pairs.map(function(r){var o=r.bodyA,l=r.bodyB;o.gameObject&&o.gameObject.emit("collide",o,l,r),l.gameObject&&l.gameObject.emit("collide",l,o,r),n.Events.trigger(o,"onCollide",{pair:r}),n.Events.trigger(l,"onCollide",{pair:r}),o.onCollideCallback&&o.onCollideCallback(r),l.onCollideCallback&&l.onCollideCallback(r),o.onCollideWith[l.id]&&o.onCollideWith[l.id](l,r),l.onCollideWith[o.id]&&l.onCollideWith[o.id](o,r)})}),n.Events.on(this,"collisionActive",function(h){h.pairs.map(function(r){var o=r.bodyA,l=r.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,l,r),l.gameObject&&l.gameObject.emit("collideActive",l,o,r),n.Events.trigger(o,"onCollideActive",{pair:r}),n.Events.trigger(l,"onCollideActive",{pair:r}),o.onCollideActiveCallback&&o.onCollideActiveCallback(r),l.onCollideActiveCallback&&l.onCollideActiveCallback(r)})}),n.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(r){var o=r.bodyA,l=r.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,l,r),l.gameObject&&l.gameObject.emit("collideEnd",l,o,r),n.Events.trigger(o,"onCollideEnd",{pair:r}),n.Events.trigger(l,"onCollideEnd",{pair:r}),o.onCollideEndCallback&&o.onCollideEndCallback(r),l.onCollideEndCallback&&l.onCollideEndCallback(r)})})})}};i.exports=e},function(i,d,e){var n=e(594),h={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Engine.update",function(){h.Engine.update(this)})},Engine:{update:function(r){for(var o=r.world,l=n.Composite.allBodies(o),a=n.Composite.allComposites(o),u=0;u<l.length;u+=1){var c=l[u];c.plugin.wrap&&h.Body.wrap(c,c.plugin.wrap)}for(u=0;u<a.length;u+=1){var f=a[u];f.plugin.wrap&&h.Composite.wrap(f,f.plugin.wrap)}}},Bounds:{wrap:function(r,o){var l=null,a=null;if(typeof o.min.x!="undefined"&&typeof o.max.x!="undefined"&&(r.min.x>o.max.x?l=o.min.x-r.max.x:r.max.x<o.min.x&&(l=o.max.x-r.min.x)),typeof o.min.y!="undefined"&&typeof o.max.y!="undefined"&&(r.min.y>o.max.y?a=o.min.y-r.max.y:r.max.y<o.min.y&&(a=o.max.y-r.min.y)),l!==null||a!==null)return{x:l||0,y:a||0}}},Body:{wrap:function(r,o){var l=h.Bounds.wrap(r.bounds,o);return l&&n.Body.translate(r,l),l}},Composite:{bounds:function(r){for(var o=n.Composite.allBodies(r),l=[],a=0;a<o.length;a+=1){var u=o[a];l.push(u.bounds.min,u.bounds.max)}return n.Bounds.create(l)},wrap:function(r,o){var l=h.Bounds.wrap(h.Composite.bounds(r),o);return l&&n.Composite.translate(r,l),l}}};i.exports=h},function(i,d,e){(function(n){var h=e(33),r=e(17),o={Actions:e(275),Animations:e(723),BlendModes:e(35),Cache:e(735),Cameras:e(738),Core:e(806),Class:e(0),Create:e(888),Curves:e(894),Data:e(896),Display:e(898),DOM:e(917),Events:e(918),Game:e(920),GameObjects:e(1011),Geom:e(483),Input:e(1308),Loader:e(1338),Math:e(193),Physics:e(1493),Plugins:e(1403),Renderer:e(1405),Scale:e(1412),ScaleModes:e(168),Scene:e(418),Scenes:e(1413),Structs:e(1415),Textures:e(1416),Tilemaps:e(1418),Time:e(1461),Tweens:e(1463),Utils:e(1481)};o.Sound=e(1492),o=r(!1,o,h),i.exports=o,n.Phaser=o}).call(this,e(600))}])})}),TL=m0(yL),bs=TL;var SL=function(s){return s===void 0&&(s=CL),this.getFrameNameCallback=s,this},CL=function(s,t,i){return i==="__BASE"?`${s},${t}`:`${i}_${s},${t}`},yr=function(s){var t,i,d;if(typeof s!="object"||s===null)return s;t=Array.isArray(s)?[]:{};for(d in s)i=s[d],t[d]=yr(i);return t},EL=function(s,t,i,d){Array.isArray(t)&&(d=i,i=t,t=void 0),t===void 0&&(t="__BASE"),i=yr(i),d=yr(d),this.textureKey=s,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=d,this.rows.count=d?d.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var e=this.scene.sys.textures.get(s);if(!e)return this.clear(),this;if(!i||!d)return this.clear(),this;for(var n=e.get(t),h=n.width,r=0,o=0,l=i.length;o<l;o++)i[o]===void 0?r++:typeof i[o]=="number"?h-=i[o]:h-=i[o].width;for(var a=h/r,u=n.height,c=0,o=0,l=d.length;o<l;o++)d[o]===void 0?c++:typeof d[o]=="number"?u-=d[o]:u-=d[o].width;for(var f=u/c,v,p,g,m,x,y=0,T=0,C=0,S=d.length;C<S;C++){d[C]===void 0&&(d[C]=f),typeof d[C]=="number"&&(d[C]={height:d[C],stretch:C%2}),v=d[C],g=v.height,this.rows.stretch+=v.stretch|0,this.rows.minHeight+=v.stretch>0?0:g,y=0;for(var o=0,E=i.length;o<E;o++){if(i[o]===void 0&&(i[o]=a),typeof i[o]=="number"&&(i[o]={width:i[o],stretch:o%2}),p=i[o],m=p.width,C===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(o,C,t);var M=typeof x;(M==="string"||M==="number")&&e.add(x,0,y+n.cutX,T+n.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},PL=function(){if(this.clear(),this.textureKey===void 0)return this;var s=this.scene.sys.textures.get(this.textureKey);if(!s)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,i=this.rows.minHeight*this.maxFixedPartScaleY,d=this.width-t,e=this.height-i,n=d>=0?this.maxFixedPartScaleX:this.width/t,h=e>=0?this.maxFixedPartScaleY:this.height/i;if(this.preserveRatio){var r=Math.min(n,h);if(n>r){var o=(n-r)*t;d>=0?d+=o:d=o,n=r}if(h>r){var l=(h-r)*i;e>=0?e+=l:e=l,h=r}}this.columns.scale=n,this.rows.scale=h;var a;d>0?a=this.columns.stretch>0?d/this.columns.stretch:0:a=0;var u;e>0?u=this.rows.stretch>0?e/this.rows.stretch:0:u=0;for(var c,f,v,p,g,m=0,x=0,y,T=0,C=this.rows.count;T<C;T++){v=this.rows.data[T],g=v.stretch===0?v.height*h:u*v.stretch,m=0;for(var S=0,E=this.columns.count;S<E;S++)f=this.columns.data[S],p=f.stretch===0?f.width*n:a*f.stretch,c=this.getFrameNameCallback(S,T,this.baseFrameName),s.has(c)&&p>0&&g>0&&(v.stretch===0&&f.stretch===0||this.getStretchMode(S,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,c,m,x,p,g):this._drawTileSprite(this.textureKey,c,m,x,p,g)),m+=p;x+=g}},ML=Phaser.Utils.Objects.IsPlainObject,x0=Phaser.Utils.Objects.GetValue,AL=function(s){return ML(s)?(this.stretchMode.edge=zf(x0(s,"edge",0)),this.stretchMode.internal=zf(x0(s,"internal",0))):(s=zf(s),this.stretchMode.edge=s,this.stretchMode.internal=s),this},zf=function(s){return typeof s=="string"&&(s=RL[s]),s},RL={scale:0,repeat:1},OL=function(s,t){return s===0||s===this.columns.count-1||t===0||t===this.rows.count-1},LL=function(s,t){return OL.call(this,s,t)?this.stretchMode.edge:this.stretchMode.internal},FL=function(s){return s==null&&(s=!0),this.preserveRatio=s,this},IL=function(s,t){return t===void 0&&(t=s),this.maxFixedPartScaleX=s,this.maxFixedPartScaleY=t,this},ei=function(){},wL={_drawImage:ei,_drawTileSprite:ei,setGetFrameNameCallback:SL,setTexture:EL,updateTexture:PL,setStretchMode:AL,getStretchMode:LL,setPreserveRatio:FL,setMaxFixedPartScale:IL},Ra=Phaser.Utils.Objects.IsPlainObject,kt=Phaser.Utils.Objects.GetValue,y0=function(s,t){class i extends s{constructor(e,n,h,r,o,l,a,u,c,f){Ra(n)?(f=n,n=kt(f,"x",0),h=kt(f,"y",0),r=kt(f,"width",1),o=kt(f,"height",1),l=kt(f,"key",void 0),a=kt(f,"baseFrame",void 0),u=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):Ra(r)?(f=r,r=kt(f,"width",1),o=kt(f,"height",1),l=kt(f,"key",void 0),a=kt(f,"baseFrame",void 0),u=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):Ra(l)?(f=l,l=kt(f,"key",void 0),a=kt(f,"baseFrame",void 0),u=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):Ra(a)?(f=a,a=kt(f,"baseFrame",void 0),u=kt(f,"columns",void 0),c=kt(f,"rows",void 0)):Array.isArray(a)?(f=c,c=u,u=a,a=kt(f,"baseFrame",void 0)):Ra(u)&&(f=u,u=kt(f,"columns",void 0),c=kt(f,"rows",void 0)),super(e),this.type=t,this.setPosition(n,h).setSize(r,o).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(kt(f,"getFrameNameCallback",void 0)),this.setStretchMode(kt(f,"stretchMode",0)),this.setPreserveRatio(kt(f,"preserveRatio",!0));var v=kt(f,"maxFixedPartScale",1),p=kt(f,"maxFixedPartScaleX",v),g=kt(f,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(l,a,u,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(e,n){return this.width===e&&this.height===n?this:(super.resize(e,n),this.updateTexture(),this)}}return Object.assign(i.prototype,wL),i},T0=function(s,t,i){return i===void 0&&(i="image"),s[t]||(s[t]=s.scene.make[i]({add:!1,origin:{x:0,y:0}}),s.once("destroy",function(){s[t]&&(s[t].destroy(),s[t]=void 0)})),s[t]},DL=function(s,t,i,d,e,n){var h=T0(this,"_image","image").setTexture(s,t).setDisplaySize(e,n);this.draw(h,i,d)},BL=function(s,t,i,d,e,n){var h=T0(this,"_tileSprite","tileSprite").setTexture(s,t).setSize(e,n);this.draw(h,i,d)},GL={_drawImage:DL,_drawTileSprite:BL},bL=Phaser.GameObjects.RenderTexture,Tr=class extends y0(bL,"rexNinePatch"){};Object.assign(Tr.prototype,GL);var NL=Phaser.GameObjects.GetCalcMatrix,YL=function(s,t,i,d){var e=t.getRenderList();if(e.length!==0){i.addToRenderList(t);var n=s.pipelines.set(t.pipeline),h=t.frame.glTexture,r=n.setGameObject(t),o=i.roundPixels,l=NL(t,i,d),a=n.calcMatrix.copyFrom(l.calc),u=t._displayOriginX,c=t._displayOriginY,f=i.alpha*t.alpha;s.pipelines.preBatch(t);for(var v=0,p=e.length;v<p;v++)e[v].webglRender(n,a,f,u,c,h,r,o);s.pipelines.postBatch(t)}},zL=Phaser.Renderer.Canvas.SetTransform,UL=function(s,t,i,d){var e=s.currentContext,n=t.getRenderList();if(!(n.length===0||!zL(s,e,t,i,d))){i.addToRenderList(t);var h=i.roundPixels,r=-t._displayOriginX,o=-t._displayOriginY;e.translate(r,o);for(var l=0,a=n.length;l<a;l++)n[l].canvasRender(e,r,o,h);e.restore()}},VL={renderWebGL:YL,renderCanvas:UL},C0=function(s,t){return this.texture=this.scene.sys.textures.get(s),this.frame=this.texture.get(t),this},S0=function(s,t){if(this.width===s&&this.height===t)return this;this.width=s,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=s,i.hitArea.height=t),this},WL=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.add(s),this.lastAppendedChildren.push(...s)):(this.children.add(s),this.lastAppendedChildren.push(s)),this},XL=Phaser.Utils.Array.Remove,HL=function(s){return this.poolManager&&this.poolManager.free(s),XL(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},E0=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},$L=function(){return this.lastAppendedChildren},KL=function(){return this.children.list},ZL={setTint(s){return this.tint=s,this.tintFill=!1,this},setTintFill(s){return this.tint=s,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},P0={setTexture:C0,resize:S0,setSize:S0,addChild:WL,removeChild:HL,removeChildren:E0,clear:E0,getLastAppendedChildren:$L,getChildren:KL};Object.assign(P0,ZL);var Nn=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},JL=Phaser.Utils.Objects.GetValue,QL={},M0=class{constructor(t){this.pools=JL(t,"pools",QL)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new Nn),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,d=t.length;i<d;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}},kL=Phaser.GameObjects.GameObject,jL=Phaser.Utils.Objects.IsPlainObject,Oa=Phaser.Utils.Objects.GetValue,qL=Phaser.Structs.List,_L=Phaser.Utils.Array.StableSort,Uf=class extends kL{constructor(t,i,d,e,n,h){jL(i)&&(h=i,i=Oa(h,"x",0),d=Oa(h,"y",0),e=Oa(h,"texture"),n=Oa(h,"frame")),i===void 0&&(i=0),d===void 0&&(d=0),super(t,"rexBlitter"),this.children=new qL,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var r=Oa(h,"reuseBob",!0);this.poolManager=r?new M0(h):void 0,this.setTexture(e,n).setPosition(i,d).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,i=this.children.list,d=0,e=i.length;d<e;d++){var n=i[d];tF(n)&&(this.renderList.push(n),t||(t=n.depth!==0))}t&&_L(this.renderList,eF),this.displayListDirty=!1}return this.renderList}},tF=function(s){return s.active&&s.visible&&s.alpha>0},eF=function(s,t){return s._depth-t._depth},ki=Phaser.GameObjects.Components;Phaser.Class.mixin(Uf,[ki.Alpha,ki.BlendMode,ki.ComputedSize,ki.Depth,ki.GetBounds,ki.Mask,ki.Origin,ki.Pipeline,ki.ScrollFactor,ki.Transform,ki.Visible,VL,P0]);var A0="image";var ii=function(s,t,i){if(!s||typeof s=="number")return i;if(s.hasOwnProperty(t))return s[t];if(t.indexOf(".")!==-1){for(var d=t.split("."),e=s,n=i,h=0;h<d.length;h++)if(e.hasOwnProperty(d[h]))n=e[d[h]],e=e[d[h]];else{n=i;break}return n}else return i},ss=function(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))s.length=0;else for(var t in s)delete s[t];return s},Hh={enableData(){return this.data===void 0&&(this.data={}),this},setData(s,t){if(this.enableData(),arguments.length===1){var i=s;for(s in i)this.data[s]=i[s]}else this.data[s]=t;return this},getData(s,t){return this.enableData(),s===void 0?this.data:ii(this.data,s,t)},incData(s,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(s,this.getData(s,i)+t),this},mulData(s,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(s,this.getData(s,i)*t),this},clearData(){return this.data&&ss(this.data),this}},Vf=class{constructor(t,i){this.type=i,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Vf.prototype,Hh);var iF=Phaser.Math.DegToRad,nF=Phaser.Math.RadToDeg,Cr=Phaser.Utils.Objects.GetValue,R0=class extends Vf{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setRotation(t){return this.rotation=t,this}get angle(){return nF(this.rotation)}set angle(t){this.rotation=iF(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,i){return i===void 0&&(i=!1),this.displayWidth=t,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,i){return i===void 0&&(i=!1),this.displayHeight=t,i&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,i){return i===void 0&&(i=t),this.setOriginX(t).setOriginY(i),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=Cr(t,"width",void 0),d=Cr(t,"height",void 0),e=Cr(t,"scale",void 0),n=Cr(t,"scaleX",e),h=Cr(t,"scaleY",e);i!==void 0?d===void 0&&h===void 0?this.setWidth(i,!0):this.setWidth(i):n!==void 0?this.setScaleX(n):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),d!==void 0?i===void 0&&n===void 0?this.setHeight(d,!0):this.setHeight(d):h!==void 0?this.setScaleY(h):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var r=Cr(t,"origin",void 0);return r!==void 0?this.setOrigin(r):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,i,d,e,n,h,r,o){}canvasRender(t,i,d,e){}},sF=Phaser.GameObjects.Components.TransformMatrix,rF=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,ji=new sF,aF=function(s,t,i,d,e,n,h,r){var o=this._width,l=this._height,a=o*this.originX,u=l*this.originY,c=this.x-d,f=this.y-e,v=1,p=1;this.flipX&&(c+=o-a*2,v=-1),this.flipY&&(f+=l-u*2,p=-1),ji.applyITRS(c,f,this.rotation,this.scaleX*v,this.scaleY*p),t.multiply(ji,ji);var g=-a,m=-u,x=g+o,y=m+l,T=ji.getXRound(g,m,r),C=ji.getXRound(g,y,r),S=ji.getXRound(x,y,r),E=ji.getXRound(x,m,r),M=ji.getYRound(g,m,r),R=ji.getYRound(g,y,r),L=ji.getYRound(x,y,r),O=ji.getYRound(x,m,r),F=this.frame.u0,D=this.frame.v0,B=this.frame.u1,N=this.frame.v1,V=rF(this.tint,this.alpha*i);s.batchQuad(this.parent,T,M,C,R,S,L,E,O,F,D,B,N,V,V,V,V,this.tintFill,n,h)},oF=function(s,t,i,d){s.save();var e=this._width,n=this._height,h=e*this.originX,r=n*this.originY,o=this.x-h,l=this.y-r,a=1,u=1;this.flipX&&(o+=e,a=-1),this.flipY&&(l+=n,u=-1),d&&(o=Math.round(o),l=Math.round(l)),s.translate(o,l),s.rotate(this.rotation),s.scale(this.scaleX*a,this.scaleY*u);var c=this.frame;s.drawImage(c.source.image,c.cutX,c.cutY,e,n,0,0,e,n),s.restore()},hF=Phaser.Utils.Objects.IsPlainObject,Wf=class extends R0{constructor(t,i){super(t,A0);this.setFrame(i)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!hF(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}},lF={webglRender:aF,canvasRender:oF};Object.assign(Wf.prototype,lF);var O0=function(s,t){typeof t=="string"&&(t={frame:t});var i=s.poolManager?s.poolManager.allocate(A0):null;return i===null?i=new Wf(s):i.setParent(s).setActive(),i.modifyPorperties(t),s.addChild(i),i},uF=function(s,t,i,d,e,n){O0(this,{frame:t,x:i,y:d,width:e,height:n})},fF=function(s,t,i,d,e,n){var h=this.texture.get(t),r=h.width,o=h.height,l=Math.floor(e/r),a=Math.floor(n/o);i+=(e-l*r)/2,d+=(n-a*o)/2;for(var u=0;u<l;u++)for(var c=0;c<a;c++)O0(this,{frame:t,x:i+u*r,y:d+c*o})},dF={_drawImage:uF,_drawTileSprite:fF},Sr=class extends y0(Uf,"rexNinePatch2"){setTexture(t,i,d,e){return C0.call(this,t,"__BASE"),this.columns?(super.setTexture(t,i,d,e),this):this}};Object.assign(Sr.prototype,dF);var rs=Phaser.Utils.Objects.GetValue,Xf=class{constructor(t,i,d,e,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,d,e,n)}setTo(t,i,d,e,n){return this.setPosition(t,i),this.setRadius(n),this.setSize(d,e),this}setPosition(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,d;typeof t=="number"?(i=t,d=t):(i=rs(t,"x",0),d=rs(t,"y",0));var e=this.cornerRadius;e.tl=$h(rs(t,"tl",void 0),i,d),e.tr=$h(rs(t,"tr",void 0),i,d),e.bl=$h(rs(t,"bl",void 0),i,d),e.br=$h(rs(t,"br",void 0),i,d)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Kh(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Kh(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Kh(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Kh(this.cornerRadius.br,t)}},$h=function(s,t,i){return s===void 0?{x:t,y:i}:typeof s=="number"?{x:s,y:s}:s},Kh=function(s,t){typeof t=="number"?(s.x=t,s.y=t):(s.x=rs(t,"x",0),s.y=rs(t,"y",0))},Er=function(s,t,i){var d=i.length;if(d>=2){var e=i[d-2],n=i[d-1];if(s===e&&t===n)return i}return i.push(s,t),i},L0=Phaser.Math.DegToRad,Pr=function(s,t,i,d,e,n,h,r,o){h&&n>e?n-=360:!h&&n<e&&(n+=360);var l=n-e,a=L0(l)/r;e=L0(e);for(var u=0;u<=r;u++){var c=e+a*u,f=s+i*Math.cos(c),v=t+d*Math.sin(c);Er(f,v,o)}return o},vF=Phaser.Renderer.WebGL.Utils,F0=function(s,t,i,d,e,n){for(var h=vF.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*d),r=i.pathData,o=i.pathIndexes,l=0;l<o.length;l+=3){var a=o[l]*2,u=o[l+1]*2,c=o[l+2]*2,f=r[a+0]-e,v=r[a+1]-n,p=r[u+0]-e,g=r[u+1]-n,m=r[c+0]-e,x=r[c+1]-n,y=t.getX(f,v),T=t.getY(f,v),C=t.getX(p,g),S=t.getY(p,g),E=t.getX(m,x),M=t.getY(m,x);s.batchTri(i,y,T,C,S,E,M,0,0,1,1,h,h,h,2)}},cF=Phaser.Renderer.WebGL.Utils,Zh=function(s,t,i,d,e){var n=s.strokeTint,h=cF.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);n.TL=h,n.TR=h,n.BL=h,n.BR=h;var r=t.pathData,o=r.length-1,l=t.lineWidth,a=l/2,u=r[0]-d,c=r[1]-e;t.closePath||(o-=2);for(var f=2;f<o;f+=2){var v=r[f]-d,p=r[f+1]-e;s.batchLine(u,c,v,p,a,a,l,f-2,t.closePath?f===o-1:!1),u=v,c=p}},pF=Phaser.GameObjects.GetCalcMatrix,gF=function(s,t,i,d){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var e=s.pipelines.set(t.pipeline),n=pF(t,i,d),h=e.calcMatrix.copyFrom(n.calc),r=t._displayOriginX,o=t._displayOriginY,l=i.alpha*t.alpha;s.pipelines.preBatch(t),t.isFilled&&F0(e,h,t,l,r,o),t.isStroked&&Zh(e,t,l,r,o),s.pipelines.postBatch(t)},La=function(s,t,i,d){var e=i||t.fillColor,n=d||t.fillAlpha,h=(e&16711680)>>>16,r=(e&65280)>>>8,o=e&255;s.fillStyle="rgba("+h+","+r+","+o+","+n+")"},Fa=function(s,t,i,d){var e=i||t.strokeColor,n=d||t.strokeAlpha,h=(e&16711680)>>>16,r=(e&65280)>>>8,o=e&255;s.strokeStyle="rgba("+h+","+r+","+o+","+n+")",s.lineWidth=t.lineWidth},mF=Phaser.Renderer.Canvas.SetTransform,xF=function(s,t,i,d){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var e=s.currentContext;if(mF(s,e,t,i,d)){var n=t._displayOriginX,h=t._displayOriginY,r=t.pathData,o=r.length-1,l=r[0]-n,a=r[1]-h;e.beginPath(),e.moveTo(l,a),t.closePath||(o-=2);for(var u=2;u<o;u+=2){var c=r[u]-n,f=r[u+1]-h;e.lineTo(c,f)}e.closePath(),t.isFilled&&(La(e,t),e.fill()),t.isStroked&&(Fa(e,t),e.stroke()),e.restore()}},yF={renderWebGL:gF,renderCanvas:xF},TF=Phaser.GameObjects.Shape,CF=Phaser.Utils.Objects.IsPlainObject,I0=Phaser.Utils.Objects.GetValue,SF=Phaser.Geom.Polygon.Earcut,Si=class extends TF{constructor(t,i,d,e,n,h,r,o){var l,a,u;if(CF(i)){var c=i;i=c.x,d=c.y,e=c.width,n=c.height,h=c.radius,r=c.color,o=c.alpha,l=c.strokeColor,a=c.strokeAlpha,u=c.strokeWidth}i===void 0&&(i=0),d===void 0&&(d=0),h===void 0&&(h=0);var f=new Xf;super(t,"rexRoundRectangleShape",f);var v=I0(h,"radius",h);f.setTo(0,0,e,n,v);var p=I0(h,"iteration",void 0);this.setIteration(p),this.setPosition(i,d),r!==void 0&&this.setFillStyle(r,o),l!==void 0&&(u===void 0&&(u=2),this.setStrokeStyle(u,l,a)),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var d=t.cornerRadius,e,n=this.iteration+1;if(e=d.br,Jh(e)){var h=t.width-e.x,r=t.height-e.y;Pr(h,r,e.x,e.y,0,90,!1,n,i)}else Er(t.width,t.height,i);if(e=d.bl,Jh(e)){var h=e.x,r=t.height-e.y;Pr(h,r,e.x,e.y,90,180,!1,n,i)}else Er(0,t.height,i);if(e=d.tl,Jh(e)){var h=e.x,r=e.y;Pr(h,r,e.x,e.y,180,270,!1,n,i)}else Er(0,0,i);if(e=d.tr,Jh(e)){var h=t.width-e.x,r=e.y;Pr(h,r,e.x,e.y,270,360,!1,n,i)}else Er(t.width,0,i);return i.push(i[0],i[1]),this.pathIndexes=SF(i),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){if(i===void 0&&(i=t),this.geom.width===t&&this.geom.height===i)return this;this.geom.setSize(t,i),this.updateDisplayOrigin(),this.dirty=!0;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=t,d.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}},Jh=function(s){return s.x!==0&&s.y!==0};Object.assign(Si.prototype,yF);var EF=Phaser.Renderer.WebGL.Utils,PF=function(s,t,i,d){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){i.addToRenderList(t);var e=t.frame,n=e.width,h=e.height,r=EF.getTintAppendFloatAlpha,o=s.pipelines.set(t.pipeline,t),l=o.setTexture2D(e.glTexture,t);s.pipelines.preBatch(t),o.batchTexture(t,e.glTexture,n,h,t.x,t.y,n/t.resolution,h/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,h,r(t.tintTopLeft,i.alpha*t._alphaTL),r(t.tintTopRight,i.alpha*t._alphaTR),r(t.tintBottomLeft,i.alpha*t._alphaBL),r(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,d,!1,l),s.pipelines.postBatch(t)}},MF=function(s,t,i,d){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(i.addToRenderList(t),s.batchSprite(t,t.frame,i,d))},AF={renderWebGL:PF,renderCanvas:MF},RF=Phaser.Display.Color,OF={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(s){return this.context.fillStyle=s,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(s,t){var i=this,d=new Image;return d.onload=function(){i.width!==d.width||i.height!==d.height?i.resize(d.width,d.height):i.clear(),i.context.drawImage(d,0,0),i.updateTexture(),t&&t(),d.onload=null,d.src="",d.remove()},d.src=s,this},loadFromURLPromise(s){var t=this;return new Promise(function(i,d){t.loadFromURL(s,i)})},drawFrame(s,t,i,d,e,n){var h=this.scene.sys.textures.getFrame(s,t);return h?(i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=h.cutWidth),n===void 0&&(n=h.cutHeight),this.context.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,i,d,e,n),this.dirty=!0,this):this},getDataURL(s,t){return this.canvas.toDataURL(s,t)},getPixel(s,t,i){i===void 0&&(i=new RF);var d=this.context.getImageData(s,t,1,1);return i.setTo(d.data[0],d.data[1],d.data[2],d.data[3]),i},setPixel(s,t,i,d,e,n){if(typeof i!="number"){var h=i;i=h.red,d=h.green,e=h.blue,n=h.alpha}n===void 0&&(n=i!==0||d!==0||e!==0?255:0);var r=this.context.createImageData(1,1);return r.data[0]=i,r.data[1]=d,r.data[2]=e,r.data[3]=n,this.context.putImageData(r,s,t),this.dirty=!0,this}},w0=function(s,t,i,d,e,n,h){var r=s.sys.textures,o=s.renderer;d===void 0&&(d=0),e===void 0&&(e=0),n===void 0&&(n=t.width),h===void 0&&(h=t.height);var l;r.exists(i)?l=r.get(i):l=r.createCanvas(i,n,h);var a=l.getSourceImage();a.width!==n&&(a.width=n),a.height!==h&&(a.height=h);var u=a.getContext("2d");u.clearRect(0,0,n,h),u.drawImage(t,d,e,n,h),o.gl&&l&&o.canvasToTexture(a,l.source[0].glTexture,!0,0)},LF={updateTexture(s,t){s&&(t?s.call(t,this.canvas,this.context):s(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},generateTexture(s,t,i,d,e){var n=this.canvas;return d===void 0?d=n.width:d*=this.resolution,e===void 0?e=n.height:e*=this.resolution,w0(this.scene,n,s,t,i,d,e),this},loadTexture(s,t){var i=this.scene.sys.textures.getFrame(s,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.drawFrame(s,t),this.dirty=!0,this):this}},D0=Phaser.Display.Canvas.CanvasPool,FF=Phaser.GameObjects.GameObject,Yi=class extends FF{constructor(t,i,d,e,n){i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=1),n===void 0&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=e,this._height=n,e=Math.max(Math.ceil(e*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=D0.create(this,e,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(i,d),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),D0.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,i){return this._width===t&&this._height===i?this:(this._width=t,this._height=i,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=t,this.canvas.height=i,this.frame.setSize(t,i),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,i){return this.setSize(t,i),this}},Ei=Phaser.GameObjects.Components;Phaser.Class.mixin(Yi,[Ei.Alpha,Ei.BlendMode,Ei.Crop,Ei.Depth,Ei.Flip,Ei.GetBounds,Ei.Mask,Ei.Origin,Ei.Pipeline,Ei.ScrollFactor,Ei.Tint,Ei.Transform,Ei.Visible,AF,OF,LF]);var IF=Phaser.Utils.String.Pad,zt=function(s,t,i){if(s==null)return s;switch(typeof s){case"string":return s;case"number":return`#${IF(Math.floor(s).toString(16),6,"0",1)}`;case"function":return s(t,i);case"object":return s.hasOwnProperty("r")?s.hasOwnProperty("a")?`rgba(${s.r},${s.g},${s.b},${s.a})`:`rgb(${s.r},${s.g},${s.b})`:s.hasOwnProperty("h")?s.hasOwnProperty("a")?`hsla(${s.h},${s.s},${s.l},${s.a})`:`hsl(${s.h},${s.s},${s.l})`:s;default:return s}},Qh=Phaser.Math.DegToRad,B0=Qh(0),G0=Qh(90),b0=Qh(180),N0=Qh(270),Y0=function(s,t,i,d,e,n,h){var r=new Xf(t,i,d,e,n),o=r.minWidth,l=r.minHeight,a=d>=o?1:d/o,u=e>=l?1:e/l,c=r.cornerRadius,f,v,p,g,m;s.save(),s.beginPath(),s.translate(t,i),f=c.br,v=f.x*a,p=f.y*u,g=d-v,m=e-p,s.moveTo(d,m),v>0&&p>0?kh(s,g,m,v,p,B0,G0,h):(s.lineTo(d,e),s.lineTo(g,e)),f=c.bl,v=f.x*a,p=f.y*u,g=v,m=e-p,s.lineTo(v,e),v>0&&p>0?kh(s,g,m,v,p,G0,b0,h):(s.lineTo(0,e),s.lineTo(0,m)),f=c.tl,v=f.x*a,p=f.y*u,g=v,m=p,s.lineTo(0,m),v>0&&p>0?kh(s,g,m,v,p,b0,N0,h):(s.lineTo(0,0),s.lineTo(g,0)),f=c.tr,v=f.x*a,p=f.y*u,g=d-v,m=p,s.lineTo(g,0),v>0&&p>0?kh(s,g,m,v,p,N0,B0,h):(s.lineTo(d,0),s.lineTo(d,m)),s.closePath(),s.restore()},kh=function(s,t,i,d,e,n,h,r){if(r==null)s.ellipse(t,i,d,e,0,n,h);else{r+=1;for(var o,l,a,u=(h-n)/r,c=0;c<=r;c++)a=n+u*c,o=t+d*Math.cos(a),l=i+e*Math.sin(a),s.lineTo(o,l)}},wF=function(s,t,i,d,e,n,h,r,o,l,a,u,c){if(Y0(t,i,d,e,n,h,c),r!=null){if(a!=null){var f;u?f=t.createLinearGradient(0,0,e,0):f=t.createLinearGradient(0,0,0,n),f.addColorStop(0,r),f.addColorStop(1,a),r=f}t.fillStyle=r,t.fill()}o!=null&&l>0&&(t.strokeStyle=o,t.lineWidth=l,t.stroke())},Hf=function(s,t,i,d,e,n,h,r){if(!(t==null&&i==null)){var o=s.canvas.width,l=s.canvas.height;i==null&&(d=0);var a=d/2;o-=d,l-=d,wF(s.canvas,s.context,a,a,o,l,e,t,i,d,n,h,r)}},DF=function(){Hf(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)},z0=Phaser.Utils.Objects.GetValue,jh=class extends Yi{constructor(t,i,d,e,n,h,r,o,l,a,u){super(t,i,d,e,n);this.type="rexRoundRectangleCanvas";var c=z0(h,"radius",h),f=z0(h,"iteration",void 0);this.setRadius(c),this.setIteration(f),this.setFillStyle(r,a,u),this.setStrokeStyle(o,l)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=zt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=zt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,i,d){return d===void 0&&(d=!0),this.fillStyle=t,this.fillColor2=i,this.isHorizontalGradient=d,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=zt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,i){return this.strokeStyle=t,this.lineWidth=i,this}updateTexture(){return this.clear(),DF.call(this),super.updateTexture(),this}};var BF=Phaser.Renderer.WebGL.Utils,GF=function(s,t,i,d){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var e=t.frame,n=e.width,h=e.height,r=BF.getTintAppendFloatAlpha,o=s.pipelines.set(t.pipeline,t),l=o.setTexture2D(e.glTexture,t);s.pipelines.preBatch(t),o.batchTexture(t,e.glTexture,n,h,t.x,t.y,n/t.style.resolution,h/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,h,r(t.tintTopLeft,i.alpha*t._alphaTL),r(t.tintTopRight,i.alpha*t._alphaTR),r(t.tintBottomLeft,i.alpha*t._alphaBL),r(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,d,!1,l),s.pipelines.postBatch(t)}};var bF=function(s,t,i,d){t.width===0||t.height===0||(i.addToRenderList(t),s.batchSprite(t,t.frame,i,d))},NF={renderWebGL:GF,renderCanvas:bF},$f=Phaser.Display.Canvas.CanvasPool,YF=function(s,t,i){i===void 0&&(i={});var d=$f.create(this),e=d.getContext("2d");s.syncFont(d,e);var n=e.measureText(t),h=Math.ceil(n.width*s.baselineX),r=h,o=2*r;if(r=r*s.baselineY|0,d.width=h,d.height=o,e.fillStyle="#f00",e.fillRect(0,0,h,o),e.font=s._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(s.testString,0,r),i.left=0,h===0||o===0||!e.getImageData(0,0,h,o))return $f.remove(d),i;for(var l=e.getImageData(0,0,h,o).data,a=!1,u=0;u<h;u++){for(var c=0;c<o;c++){var f=(c*h+u)*4;if(l[f]!==255){i.left=u,a=!0;break}}if(a)break}return $f.remove(d),i},zF=Phaser.GameObjects.GameObject,Kf=class extends zF{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,d){return this.style.setBackgroundColor(t,i,d)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,d,e,n,h){return this.style.setShadow(t,i,d,e,n,h)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}measureTextMargins(t,i){return YF(this.style,t,i)}},ni=Phaser.GameObjects.Components;Phaser.Class.mixin(Kf,[ni.Alpha,ni.BlendMode,ni.ComputedSize,ni.Crop,ni.Depth,ni.Flip,ni.GetBounds,ni.Mask,ni.Origin,ni.Pipeline,ni.ScrollFactor,ni.Tint,ni.Transform,ni.Visible,NF]);var UF={backgroundColor:["backgroundColor",null,zt],backgroundColor2:["backgroundColor2",null,zt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,zt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",zt],stroke:["stroke","#fff",zt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",zt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",zt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};var qh=Phaser.Display.Canvas.CanvasPool,U0=function(s){var t=qh.create(this),i=t.getContext("2d");s.syncFont(t,i);var d=i.measureText(s.testString);if("actualBoundingBoxAscent"in d){var e=d.actualBoundingBoxAscent,n=d.actualBoundingBoxDescent,l={ascent:e,descent:n,fontSize:e+n};return qh.remove(t),l}var h=Math.ceil(d.width*s.baselineX),r=h,o=2*r;r=r*s.baselineY|0,t.width=h,t.height=o,i.fillStyle="#f00",i.fillRect(0,0,h,o),i.font=s._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s.testString,0,r);var l={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,h,o))return l.ascent=r,l.descent=r+6,l.fontSize=l.ascent+l.descent,qh.remove(t),l;var a=i.getImageData(0,0,h,o).data,u=a.length,c=h*4,f,v,p=0,g=!1;for(f=0;f<r;f++){for(v=0;v<c;v+=4)if(a[p+v]!==255){g=!0;break}if(!g)p+=c;else break}for(l.ascent=r-f,p=u-c,g=!1,f=o;f>r;f--){for(v=0;v<c;v+=4)if(a[p+v]!==255){g=!0;break}if(!g)p-=c;else break}return l.descent=f-r,l.fontSize=l.ascent+l.descent,qh.remove(t),l},Te={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/},VF=Phaser.Utils.Objects.GetAdvancedValue,Pi=Phaser.Utils.Objects.GetValue,_h=class{constructor(t,i,d){this.parent=t,d===void 0&&(d=UF),this.propertyMap=d,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Te.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,d){if(i===void 0&&(i=!0),d===void 0&&(d=!1),t&&t.hasOwnProperty("wrap")){var e=t.wrap;if(e.hasOwnProperty("mode")){var n=e.mode;typeof n=="string"&&(e.mode=V0[n])}else e.hasOwnProperty("width")&&(e.mode=1)}t&&t.rtl&&d&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var h=this.propertyMap;for(var r in h){var o=h[r],l=o[0],a=d?o[1]:this[r],u=o[2];if(r==="wrapCallback"||r==="wrapCallbackScope")this[r]=Pi(t,l,a);else{var c=VF(t,l,a);u&&(c=u(c)),this[r]=c}}var f=Pi(t,"font",null);f===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=f;var v=Pi(t,"fill",null);v!==null&&(this.color=zt(v));var p=Pi(t,"metrics",!1);return p?this.metrics={ascent:Pi(p,"ascent",0),descent:Pi(p,"descent",0),fontSize:Pi(p,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=U0(this)),i?this.parent.updateText():this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=U0(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Pi(t,"fontFamily","Courier"),this.fontSize=Pi(t,"fontSize","16px"),this.fontStyle=Pi(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,d){return d===void 0&&(d=!0),this.backgroundColor=zt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=zt(i,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=d,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=zt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=zt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=zt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=zt(t,this.parent.canvas,this.parent.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,d,e,n,h){return t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d="#000"),e===void 0&&(e=0),n===void 0&&(n=!1),h===void 0&&(h=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=zt(d,this.parent.canvas,this.parent.context),this.shadowBlur=e,this.shadowStroke=n,this.shadowFill=h,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=zt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,d){return t===void 0&&(t="#000"),i===void 0&&(i=0),d===void 0&&(d=0),this.underlineColor=zt(t,this.parent.canvas,this.parent.context),this.underlineThickness=i,this.underlineOffset=d,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=zt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=V0[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,i&&(typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=Pi(i,"fontFamily",this.fontFamily),this.fontSize=Pi(i,"fontSize",this.fontSize),this.fontStyle=Pi(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},i=this.propertyMap;for(var d in i)t[d]=this[d];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},V0={none:Te.NO_WRAP,word:Te.WORD_WRAP,char:Te.CHAR_WRAP,character:Te.CHAR_WRAP},WF={draw(s,t,i,d){var e=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var h=this.defaultStyle;this.clear(),Hf(this,h.backgroundColor,h.backgroundStrokeColor,h.backgroundStrokeLineWidth,h.backgroundCornerRadius,h.backgroundColor2,h.backgroundHorizontalGradient,h.backgroundCornerIteration),s+=this.startXOffset,t+=this.startYOffset;var r=h.halign,o=h.valign,l,a=h.lineHeight,u=e.lines,c=u.length,f=h.maxLines,v,p,g;f>0&&c>f?(v=f,o==="center"?p=Math.floor((c-v)/2):o==="bottom"?p=c-v:p=0):(v=c,p=0),g=p+v;var m,x,y=this.rtl,T=y?this.parent.width:void 0;o==="center"?x=Math.max((d-v*a)/2,0):o==="bottom"?x=Math.max(d-v*a-2,0):x=0,x+=t;for(var C=p;C<g;C++)if(l=e.getLineWidth(C),l!==0){for(var S=u[C],E=S.length,M=r,R=0;R<E;R++){var L=S[R].prop.align;if(L!==void 0){M=L;break}}M==="center"?m=(i-l)/2:M==="right"?m=y?0:i-l:m=y?i-l:0,m+=s;for(var R=0;R<E;R++)this.drawPen(S[R],m,x,T)}n.restore()},drawPen(s,t,i,d){t+=s.x,i+=s.y+(s.prop.y||0),d!==void 0&&(t=d-t);var e=this.canvas,n=this.context;n.save();var h=this.parser.propToContextStyle(this.defaultStyle,s.prop);h.buildFont(),h.syncFont(e,n),h.syncStyle(e,n),h.underlineThickness>0&&s.width>0&&this.drawUnderline(t,i,s.width,h),s.isTextPen&&this.drawText(t,i,s.text,h),s.isImagePen&&this.drawImage(t,i,s.prop.img,h),n.restore(),s.hasAreaMarker&&s.width>0&&this.hitAreaManager.add(s.prop.area,t,i-this.startYOffset,s.width,this.defaultStyle.lineHeight)},clear(){var s=this.canvas;this.context.clearRect(0,0,s.width,s.height)},drawUnderline(s,t,i,d){t+=d.underlineOffset-d.underlineThickness/2,this.autoRound&&(s=Math.round(s),t=Math.round(t));var e=this.context,n=e.lineCap;e.lineCap="butt",e.strokeStyle=d.underlineColor,e.lineWidth=d.underlineThickness,e.beginPath(),e.moveTo(s,t),e.lineTo(s+i,t),e.stroke(),e.lineCap=n},drawText(s,t,i,d){this.autoRound&&(s=Math.round(s),t=Math.round(t));var e=this.context;d.stroke&&d.stroke!=="none"&&d.strokeThickness>0&&(d.syncShadow(e,d.shadowStroke),e.strokeText(i,s,t)),d.color&&d.color!=="none"&&(d.syncShadow(e,d.shadowFill),e.fillText(i,s,t))},drawImage(s,t,i,d){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,s,t,this.autoRound)}},Ns=Phaser.Utils.Objects.GetValue,XF=Te.NO_NEWLINE,W0=Te.RAW_NEWLINE,X0=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Ns(t,"text",""),this.x=Ns(t,"x",0),this.y=Ns(t,"y",0),this.width=Ns(t,"width",0);var i=Ns(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=Ns(t,"newLineMode",0),this.startIndex=Ns(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===W0&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==XF&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===W0&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}},Ys=function(s,t){var i=Array.isArray(s);if(t===void 0?t=i?[]:{}:ss(t),i){t.length=s.length;for(var d=0,e=s.length;d<e;d++)t[d]=s[d]}else for(var n in s)t[n]=s[n];return t},H0=Phaser.Utils.Objects.GetFastValue,$0=Te.NO_NEWLINE,HF=Te.WRAPPED_NEWLINE,tl=class{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=H0(t,"tagToText",ei),this.tagToTextScope=H0(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,d,e,n,h){var r=this.pensPool.pop();return r==null&&(r=new X0),zs.text=t,zs.x=i,zs.y=d,zs.width=e,zs.prop=n,zs.newLineMode=h,r.resetFromJSON(zs),this.addPen(r),this}addImagePen(t,i,d,e){return this.addTextPen("",t,i,d,e,$0),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,d=t?t.y:0,e=t?Ys(t.prop):null;return this.addTextPen("",i,d,0,e,HF),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var d=this.lastLine;d==null&&(d=this.linesPool.pop()||[],this.lines.push(d)),d.push(t),t.newLineMode!==$0&&(d=this.linesPool.pop()||[],this.lines.push(d)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new tl),t.clear();for(var i=0,d=this.lines.length;i<d;i++)for(var e=this.lines[i],n=0,h=e.length;n<h;n++){var r=e[n];t.addPen(r.text,r.x,r.y,r.width,Ys(r.prop),r.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,d=!1,e;for(i=t;i>=0&&(e=this.lines[i],d=e!=null&&e.length>0,!d);i--);if(!d)return 0;var n=e[e.length-1];return n.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var d=i[i.length-1];if(d==null)return 0;var e=d.lastX;return e}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,d=0,e=this.lines.length;d<e;d++)t=this.getLineWidth(d),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,d=this.lines.length;i<d;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,d=0,e=i.length;d<e;d++)t+=i[d].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,d=0,e=this.pens.length;d<e;d++)t+=i[d].rawTextLength;return t}getSliceTagText(t,i,d){if(t===void 0&&(t=0),i===void 0){var e=this.lastPen;if(e==null)return"";i=e.endIndex}d===void 0&&(d=!1);for(var n="",h,r,o,l,a,u,c,f=0,v=this.pens.length;f<v&&(h=this.pens[f],l=h.endIndex,!(!(l<=t)&&(h=this.pens[f],r=d?h.wrapText:h.plainText,u=h.prop,o=h.startIndex,a=o>=t&&l<=i,a||(r=r.substring(t-o,i-o)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,r,u,c):n+=this.tagToText(r,u,c),c=u,l>=i)));f++);return n}get length(){return this.lines.length}set length(t){this.clear()}},zs={},$F=Phaser.Geom.Rectangle,K0=new Nn,Z0=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return K0.pushMultiple(this.hitAreas),this}add(t,i,d,e,n){var h=K0.pop();return h===null?h=new $F(i,d,e,n):h.setTo(i,d,e,n),h.key=t,this.hitAreas.push(h),this}getFirst(t,i){for(var d=0,e=this.hitAreas.length;d<e;d++){var n=this.hitAreas[d];if(n.contains(t,i))return n}return null}drawBounds(t,i,d){i===void 0&&(i=16777215),d&&t.save().scaleCanvas(d.scaleX,d.scaleY).rotateCanvas(d.rotation).translateCanvas(d.x,d.y);for(var e=0,n=this.hitAreas.length;e<n;e++){var h=this.hitAreas[e];t.lineStyle(1,i).strokeRect(h.x,h.y,h.width,h.height)}return d&&t.restore(),this}},JF=function(){this.parent.on("pointerdown",KF,this).on("pointerup",ZF,this).on("pointermove",Zf,this).on("pointerover",Zf,this).on("pointerout",function(s,t){Zf.call(this,s,null,null,t)},this)},KF=function(s,t,i,d){var e=this.hitAreaManager.getFirst(t,i);e!==null&&Ia.call(this,"areadown",e.key,s,t,i,d)},ZF=function(s,t,i,d){var e=this.hitAreaManager.getFirst(t,i);e!==null&&Ia.call(this,"areaup",e.key,s,t,i,d)},Zf=function(s,t,i,d){if(t===null){this.lastHitAreaKey!==null&&Ia.call(this,"areaout",this.lastHitAreaKey,s,t,i,d),this.lastHitAreaKey=null;return}var e=this.hitAreaManager.getFirst(t,i),n=e?e.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&Ia.call(this,"areaout",this.lastHitAreaKey,s,t,i,d),n!==null&&Ia.call(this,"areaover",n,s,t,i,d),this.lastHitAreaKey=n)},Ia=function(s,t,i,d,e,n){this.parent.emit(`${s}-${t}`,i,d,e,n),this.parent.emit(s,t,i,d,e,n)},QF=Te.NO_NEWLINE,kF=Te.RAW_NEWLINE,Jf=Te.WRAPPED_NEWLINE,J0=Te.NO_WRAP,jF=Te.WORD_WRAP,qF=Te.CHAR_WRAP,_F=Te.SPLITREGEXP,Q0=function(s,t,i,d,e,n){d<=0&&(i=J0);var h=[];if(!s||!s.length)return h;for(var r=i===J0,o=i===jF,l=s.split(_F),a,u,c,f=0,v=l.length;f<v;f++){if(a=l[f],c=f===v-1?QF:kF,r){var p=t(a);h.push(n.getLine(a,p,c));continue}if(u=f===0?d-e:d,a.length<=100){var p=t(a);if(p<=u){h.push(n.getLine(a,p,c));continue}}var g,m;o?(g=a.split(" "),m=g[g.length-1]==="",m&&(g.length-=1)):g=a;for(var x,y,T,C="",S=0,E,M=o?t(" "):void 0,R=0,L=g.length;R<L;R++){if(x=g[R],y=t(x),T=R===L-1,o&&(!T||m)&&(x+=" ",y+=M),o&&y>d){C!==""?h.push(n.getLine(C,S,Jf)):R===0&&e>0&&h.push(n.getLine("",0,Jf)),h.push(...Q0(x,t,qF,d,0,n));var O=h.pop();C=O.text,S=O.width,n.freeLine(O),C===" "&&(C="",S=0);continue}E=S+y,E>u?(h.push(n.getLine(C,S,Jf)),C=x,S=y,u=d):(C+=x,S=E),T&&h.push(n.getLine(C,S,c))}}return h},Qf=Phaser.Utils.Objects.GetValue,tI=Te.NO_WRAP,eI=Te.NO_NEWLINE,kf=class{constructor(t){this.parent=t.parent,this.context=Qf(t,"context",null),this.canvas=this.context.canvas,this.parser=Qf(t,"parser",null),this.defaultStyle=Qf(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new Z0,this.lastHitAreaKey=null;var i=this.context;this.getTextWidth=function(d){return i.measureText(d).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,i,d,e,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var h=this.parent.style;if(h.isWrapFitMode){var r=this.parent.padding;d=h.fixedWidth-r.left-r.right}for(var o=this.canvas,l=this.context,a=function(N){return l.measureText(N).width},u=0,c=0,f=h.wrapCallback,v=h.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(t),T,C,S=this.wrapTextLinesPool,E=0,M=y.length;E<M;E++)if(T=this.parser.tagTextToProp(y[E],m),g=T.plainText,m=T.prop,m.img){var R=this.imageManager.getOuterWidth(m.img);d>0&&i!==tI&&d<u+R&&(n.addNewLinePen(),c+=e,u=0),n.addImagePen(u,c,R,Ys(m)),u+=R}else if(g!==""){if(l.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(o,l),x.syncStyle(o,l),!f)C=Q0(g,a,i,d,u,S);else{C=f.call(v,g,a,d,u),typeof C=="string"&&(C=C.split(`
`));for(var F,L=0,O=C.length;L<O;L++)F=C[L],typeof F=="string"?C[L]=S.getLine(F,a(F),L<O-1?2:0):p=!1}for(var F,L=0,O=C.length;L<O;L++)F=C[L],n.addTextPen(F.text,u,c,F.width,Ys(m),F.newLineMode),F.newLineMode!==eI?(u=0,c+=e):u+=F.width;p&&S.freeLines(C),C=null,l.restore()}for(var E=0,M=this.lines.length;E<M;E++){var D=this.lines[E],B=D[D.length-1];B&&(B.width+=this.parser.getStrokeThinkness(this.defaultStyle,B.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new tl({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,d){var e;if(t==null)e=this.penManager.plainText;else{var n=this.parser.splitText(t,1);e="";for(var h=0,r=n.length;h<r;h++)e+=n[h]}return(i!=null||d!=null)&&(i==null&&(i=0),d==null&&(d=e.length),e=e.substring(i,d)),e}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var d=this.defaultStyle;return this.updatePenManager(t,d.wrapMode,d.wrapWidth,d.lineHeight,i),i}getText(t,i,d,e){if(t==null)return this.penManager.getSliceTagText(i,d,e);var n=this.tmpPenManager,h=this.defaultStyle;return this.updatePenManager(t,h.wrapMode,h.wrapWidth,h.lineHeight,n),n.getSliceTagText(i,d,e)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}},iI={setInteractive:JF};Object.assign(kf.prototype,WF,iI);var k0=class extends Nn{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,i,d){var e=this.pop();return e===null&&(e={}),e.text=t,e.width=i,e.newLineMode=d,e}},jf=Phaser.Utils.Objects.GetValue,qf=function(s,t){t===void 0&&(t={key:s}),t.hasOwnProperty("key")||(t.key=s);var i=t.key,d=t.frame,e=t.width,n=t.height;if(e===void 0||n===void 0){var h=this.textureManager.getFrame(i,d),r=h?h.cutWidth:0,o=h?h.cutHeight:0;e===void 0&&n===void 0?(e=r,n=o):e===void 0?e=r*(n/o):n===void 0&&(n=o*(e/r))}this.images[s]={key:i,frame:d,width:e,height:n,y:jf(t,"y",0),left:jf(t,"left",0),right:jf(t,"right",0)}},nI=function(s,t,i,d,e){var n=this.get(s);i+=n.left,d+=n.y,e&&(i=Math.round(i),d=Math.round(d));var h=this.textureManager.getFrame(n.key,n.frame);t.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,i,d,n.width,n.height)},el=class{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")qf.call(this,t,i);else if(Array.isArray(t))for(var d=t,e=0,n=d.length;e<n;e++)qf.call(this,d[e]);else{var d=t;for(var t in d)qf.call(this,t,d[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}},sI={draw:nI};Object.assign(el.prototype,sI);var rI=Phaser.Utils.Objects.IsPlainObject,aI=Phaser.DOM.AddToDOM,j0=Phaser.Display.Canvas.CanvasPool,oI=Phaser.GameObjects.GameObject,qi=Phaser.Utils.Objects.GetValue,hI=Phaser.DOM.RemoveFromDOM,lI=Te.SPLITREGEXP,Mr=null,_f=null,td=null,ed=class extends Kf{constructor(t,i,d,e,n,h,r){if(rI(i)){var o=i;i=qi(o,"x",0),d=qi(o,"y",0),e=qi(o,"text",""),n=qi(o,"style","")}if(i===void 0&&(i=0),d===void 0&&(d=0),super(t,h),this.renderer=t.sys.game.renderer,this.setPosition(i,d),this.setOrigin(0,0),this.initPipeline(),this.canvas=j0.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var l=n.align;delete n.align,n.halign=l}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new _h(this,n);var a=qi(n,"images",void 0);a&&this.addImage(a),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Mr||(Mr={},_f=new Nn,td=new k0,this.scene.game.events.once("destroy",function(){Mr=null,_f=null,td=null})),Mr.hasOwnProperty(h)||(Mr[h]=new Nn),this.canvasText=new kf({parent:this,context:this.context,parser:r,style:this.style,pensPool:Mr[h],linesPool:_f,wrapTextLinesPool:td}),this.parser=r,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(e),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&hI(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),j0.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",aI(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,i,d,e){if(typeof t=="object"){var n=t,h=qi(n,"x",null);h!==null?(t=h,d=h):(t=qi(n,"left",0),d=qi(n,"right",t));var r=qi(n,"y",null);r!==null?(i=r,e=r):(i=qi(n,"top",0),e=qi(n,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),d===void 0&&(d=t),e===void 0&&(e=i);return this.padding.left=t,this.padding.top=i,this.padding.right=d,this.padding.bottom=e,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,d=this.style;t&&i.updatePenManager(this._text,d.wrapMode,d.wrapWidth,d.lineHeight);var e=this.padding,n,h,r=Math.ceil(i.linesWidth);d.fixedWidth===0?(this.width=r+e.left+e.right,n=r):(this.width=d.fixedWidth,n=this.width-e.left-e.right,n<r&&(n=r)),d.fixedHeight===0?(this.height=i.linesHeight+e.top+e.bottom,h=i.linesHeight):(this.height=d.fixedHeight,h=this.height-e.top-e.bottom,h<i.linesHeight&&(h=i.linesHeight));var o=this.width,l=this.height;this.updateDisplayOrigin();var a=d.resolution;o*=a,l*=a,o=Math.max(Math.ceil(o),1),l=Math.max(Math.ceil(l),1);var u=this.canvas,c=this.context;u.width!==o||u.height!==l?(u.width=o,u.height=l,this.frame.setSize(o,l)):c.clearRect(0,0,o,l),c.save(),c.scale(a,a);var f=this.style.rtl?e.right:e.left,v=e.top;i.draw(f,v,n,h),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,d){var e=!!this.input;return oI.prototype.setInteractive.call(this,t,i,d),e||this.canvasText.setInteractive(),this}getWrappedText(t,i,d){return t=this.canvasText.getText(t,i,d,!0),t.split(lI)}getPlainText(t,i,d){return this.canvasText.getPlainText(t,i,d)}getText(t,i,d,e){return e===void 0&&(e=!1),this.canvasText.getText(t,i,d,e)}getSubString(t,i,d){return this.getText(t,i,d)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}get imageManager(){return this._imageManager||(this._imageManager=new el(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}generateTexture(t,i,d,e,n){var h=this.canvas;return e===void 0?e=h.width:e*=this.resolution,n===void 0?n=h.height:n*=this.resolution,w0(this.scene,h,t,i,d,e,n),this}},Ye=function(s,t){return t===void 0?`\\[${s}\\]`:`\\[${s}=(${t})\\]`},si=function(s){return`\\[/${s}\\]`},id="[-.0-9]+",nd="[a-z]+|#[0-9abcdef]+",sd="[^\\]]+",q0="esc",_0=Ye(q0),tm=si(q0),em="raw",im=Ye(em),nm=si(em),sm="b",rm=Ye(sm),am=si(sm),om="i",hm=Ye(om),lm=si(om),um="weight",fm=Ye(um,id),dm=si(um),vm="size",cm=Ye(vm,id),pm=si(vm),gm="color",mm=Ye(gm,nd),xm=si(gm),rd="u",ym=Ye(rd),Tm=Ye(rd,nd),Cm=si(rd),Sm="shadow",Em=Ye(Sm),Pm=si(Sm),ad="stroke",Mm=Ye(ad),Am=Ye(ad,nd),Rm=si(ad),Om="y",Lm=Ye(Om,id),Fm=si(Om),Im="img",wm=Ye(Im,sd),Dm=si(Im),Bm="area",Gm=Ye(Bm,sd),bm=si(Bm),Nm="align",Ym=Ye(Nm,sd),zm=si(Nm),Um=new RegExp(_0,"i"),od=new RegExp(tm,"i"),Vm=new RegExp(im,"i"),hd=new RegExp(nm,"i"),uI=new RegExp(rm,"i"),fI=new RegExp(am,"i"),dI=new RegExp(hm,"i"),vI=new RegExp(lm,"i"),Wm=new RegExp(fm,"i"),cI=new RegExp(dm,"i"),Xm=new RegExp(cm,"i"),pI=new RegExp(pm,"i"),Hm=new RegExp(mm,"i"),gI=new RegExp(xm,"i"),mI=new RegExp(ym,"i"),$m=new RegExp(Tm,"i"),xI=new RegExp(Cm,"i"),yI=new RegExp(Em,"i"),TI=new RegExp(Pm,"i"),CI=new RegExp(Mm,"i"),Km=new RegExp(Am,"i"),SI=new RegExp(Rm,"i"),Zm=new RegExp(Lm,"i"),EI=new RegExp(Fm,"i"),Jm=new RegExp(wm,"i"),PI=new RegExp(Dm,"i"),Qm=new RegExp(Gm,"i"),MI=new RegExp(bm,"i"),km=new RegExp(Ym,"i"),AI=new RegExp(zm,"i"),jm=new RegExp([im,nm,_0,tm,rm,am,hm,lm,fm,dm,cm,pm,mm,xm,ym,Tm,Cm,Em,Pm,Mm,Am,Rm,Lm,Fm,wm,Dm,Gm,bm,Ym,zm].join("|"),"ig"),RI=function(s,t){for(var i=[],d=0,e=!1,n=!1;;){var h=jm.exec(s);if(!h)break;var r=h[0];if(n)if(od.test(r))n=!1;else continue;else if(e)if(hd.test(r))e=!1;else continue;else Um.test(r)?n=!0:Vm.test(r)&&(e=!0);var o=jm.lastIndex,l=o-r.length;if(d<l){var a=s.substring(d,l);i.push(a)}t===void 0&&i.push(r),d=o}var u=s.length;return d<u&&i.push(s.substring(d,u)),i},we=!1,De=!0,OI={plainText:null,prevProp:null},LI=function(s,t){t==null&&(t={});var i="";if(t.img&&Xt(t,we,"img"),t.esc)od.test(s)?Xt(t,we,"esc"):i=s;else if(t.raw)hd.test(s)?Xt(t,we,"raw"):i=s;else if(Um.test(s))Xt(t,De,"esc",!0);else if(od.test(s))Xt(t,we,"esc");else if(Vm.test(s))Xt(t,De,"raw",!0);else if(hd.test(s))Xt(t,we,"raw");else if(uI.test(s))Xt(t,De,"b",!0);else if(fI.test(s))Xt(t,we,"b");else if(dI.test(s))Xt(t,De,"i",!0);else if(vI.test(s))Xt(t,we,"i");else if(Wm.test(s)){var d=s.match(Wm);Xt(t,De,"weight",d[1])}else if(cI.test(s))Xt(t,we,"weight");else if(Xm.test(s)){var d=s.match(Xm);Xt(t,De,"size",`${d[1]}px`)}else if(pI.test(s))Xt(t,we,"size");else if(Hm.test(s)){var d=s.match(Hm);Xt(t,De,"color",d[1])}else if(gI.test(s))Xt(t,we,"color");else if(mI.test(s))Xt(t,De,"u",!0);else if($m.test(s)){var d=s.match($m);Xt(t,De,"u",d[1])}else if(xI.test(s))Xt(t,we,"u");else if(yI.test(s))Xt(t,De,"shadow",!0);else if(TI.test(s))Xt(t,we,"shadow");else if(CI.test(s))Xt(t,De,"stroke",!0);else if(Km.test(s)){var d=s.match(Km);Xt(t,De,"stroke",d[1])}else if(SI.test(s))Xt(t,we,"stroke");else if(Zm.test(s)){var d=s.match(Zm);Xt(t,De,"y",parseFloat(d[1]))}else if(EI.test(s))Xt(t,we,"y");else if(Jm.test(s)){var d=s.match(Jm);Xt(t,De,"img",d[1])}else if(PI.test(s))Xt(t,we,"img");else if(Qm.test(s)){var d=s.match(Qm);Xt(t,De,"area",d[1])}else if(MI.test(s))Xt(t,we,"area");else if(km.test(s)){var d=s.match(km);Xt(t,De,"align",d[1])}else AI.test(s)?Xt(t,we,"align"):i=s;var e=OI;return e.plainText=i,e.prop=t,e},Xt=function(s,t,i,d){return t===De?s[i]=d:s.hasOwnProperty(i)&&delete s[i],s},wI=function(s,t){var i=II;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=s.fontFamily,t.hasOwnProperty("size")){var d=t.size;typeof d=="number"&&(d=`${d}px`),i.fontSize=d}else i.fontSize=s.fontSize;i.fontStyle=FI(t),t.hasOwnProperty("color")?i.color=t.color:i.color=s.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=s.stroke,i.strokeThickness=s.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=s.strokeThickness):(i.stroke=s.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=s.shadowColor,i.shadowOffsetX=s.shadowOffsetX,i.shadowOffsetY=s.shadowOffsetY,i.shadowBlur=s.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=s.shadowOffsetX,i.shadowOffsetY=s.shadowOffsetY,i.shadowBlur=s.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=s.underlineColor,i.underlineThickness=s.underlineThickness,i.underlineOffset=s.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=s.underlineThickness,i.underlineOffset=s.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},FI=function(s){var t=s.b,i=s.weight,d=s.i;return t||i||d?d?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},II=new _h,BI=function(s,t,i){i==null&&(i=DI);var d=[];for(var e in i)t.hasOwnProperty(e)||d.push(`[/${e}]`);for(var e in t){var n=t[e];if(i[e]!==n)switch(e){case"size":d.push(`[size=${n.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":d.push(`[${e}=${n}]`);break;case"u":n===!0?d.push("[u]"):d.push(`[u=${n}]`);break;default:d.push(`[${e}]`);break}}return d.push(s),d.join("")},DI={},ld=class{getStrokeThinkness(t,i){var d;return i.hasOwnProperty("stroke")?d=t.strokeThickness:d=0,d}},GI={splitText:RI,tagTextToProp:LI,propToContextStyle:wI,propToTagText:BI};Object.assign(ld.prototype,GI);var wa=class extends ed{constructor(t,i,d,e,n){var h=new ld(n);super(t,i,d,e,n,"rexBBCodeText",h)}},bI={plainText:null,prevProp:null},NI=new _h,qm=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,i){this.tags[t]=i}getTag(t){return this.tags[t]}splitText(t,i){for(var d=[],e=0;;){var n=ud.exec(t);if(!n)break;var h=n[0],r=ud.lastIndex-h.length;if(e<r&&d.push(t.substring(e,r)),i===void 0)d.push(h);else if(i===1){if(_m.test(h)){var o=h.match(tx);d.push(o[2])}else if(ex.test(h)){var o=h.match(ix);d.push(o[2])}}e=ud.lastIndex}var l=t.length;return e<l&&d.push(t.substring(e,l)),d}tagTextToProp(t,i){var d,e;if(_m.test(t)){var n=t.match(tx);if(n!=null){var h=n[1],r=this.tags;r.hasOwnProperty(h)?e=r[h]:e={},e._class=h,d=n[2]}}else if(ex.test(t)){var n=t.match(ix);if(n!=null){var o=n[1];e=YI(o),e._style=o,d=n[2]}}d==null&&(d=t),e==null&&(e={});var l=bI;return l.plainText=d,l.prop=e,l}propToContextStyle(t,i){var d=NI;if(i.hasOwnProperty("img"))d.image=i.img;else{if(d.image=null,i.hasOwnProperty("family")||i.hasOwnProperty("fontFamily")||i.hasOwnProperty("font-family")){var e=i.hasOwnProperty("family")?i.family:i.hasOwnProperty("fontFamily")?i.fontFamily:i["font-family"];d.fontFamily=e}else d.fontFamily=t.fontFamily;if(i.hasOwnProperty("size")||i.hasOwnProperty("fontSize")||i.hasOwnProperty("font-size")){var n=i.hasOwnProperty("size")?i.size:i.hasOwnProperty("fontSize")?i.fontSize:i["font-size"];typeof n=="number"&&(n=`${n}px`),d.fontSize=n}else d.fontSize=t.fontSize;if(i.hasOwnProperty("style")||i.hasOwnProperty("fontStyle")||i.hasOwnProperty("font-style")){var h=i.hasOwnProperty("style")?i.style:i.hasOwnProperty("fontStyle")?i.fontStyle:i["font-style"];d.fontStyle=h}else d.fontStyle=t.fontStyle;if(i.hasOwnProperty("color")||i.hasOwnProperty("font-color")){var r=i.hasOwnProperty("color")?i.color:i["font-color"];d.color=r}else d.color=t.color;if(i.hasOwnProperty("stroke")){var o=i.stroke;d.stroke=o.hasOwnProperty("color")?o.color:t.stroke,d.strokeThickness=o.hasOwnProperty("thickness")?o.thickness:t.strokeThickness}else d.stroke=t.stroke,d.strokeThickness=t.strokeThickness}if(i.hasOwnProperty("shadow")){var l=i.shadow;d.shadowColor=l.hasOwnProperty("color")?l.color:t.shadowColor,d.shadowOffsetX=l.hasOwnProperty("offsetX")?l.offsetX:t.shadowOffsetX,d.shadowOffsetY=l.hasOwnProperty("offsetY")?l.offsetY:t.shadowOffsetY,d.shadowBlur=l.hasOwnProperty("blur")?l.blur:t.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0}else d.shadowColor=t.shadowColor,d.shadowOffsetX=t.shadowOffsetX,d.shadowOffsetY=t.shadowOffsetY,d.shadowBlur=t.shadowBlur,d.shadowStroke=t.shadowStroke,d.shadowFill=t.shadowFill;if(i.hasOwnProperty("u")||i.hasOwnProperty("underline")){var a=i.hasOwnProperty("u")?i.u:i.underline;d.underlineColor=a.hasOwnProperty("color")?a.color:t.underlineColor,d.underlineThickness=a.hasOwnProperty("thickness")?a.thickness:t.underlineThickness,d.underlineOffset=a.hasOwnProperty("offset")?a.offset:t.underlineOffset}else d.underlineColor=t.underlineColor,d.underlineThickness=t.underlineThickness,d.underlineOffset=t.underlineOffset;return d}getStrokeThinkness(t,i){var d;if(i.hasOwnProperty("stroke")){var e=i.stroke;d=e.hasOwnProperty("thickness")?e.thickness:t.strokeThickness}else d=t.strokeThickness;return d}propToTagText(t,i,d){return i.hasOwnProperty("_class")?t===""&&this.isTextTag(i._class)?"":`<class='${i._class}'>${t}</class>`:i.hasOwnProperty("_style")?`<style='${i._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var i=this.tags[t];return i?i.img==null:!1}},YI=function(s){s=s.split(";");for(var t={},i,d,e,n=0,h=s.length;n<h;n++)if(i=s[n].split(":"),d=i[0],e=i[1],!(nx(d)||nx(e))){switch(d){case"stroke":var r=e.split(" "),o=r.length;e={},o>=1&&(e.color=r[0]),o>=2&&(e.thickness=parseInt(r[1].replace("px","")));break;case"shadow":var l=e.split(" "),o=l.length;e={},o>=1&&(e.color=l[0]),o>=2&&(e.offsetX=parseInt(l[1].replace("px",""))),o>=3&&(e.offsetY=parseInt(l[2].replace("px",""))),o>=4&&(e.blur=parseInt(l[3].replace("px","")));break;case"u":case"underline":var a=e.split(" "),o=a.length;e={},o>=1&&(e.color=a[0]),o>=2&&(e.thickness=parseInt(a[1].replace("px",""))),o>=3&&(e.offset=parseInt(a[2].replace("px","")));break;case"y":e=parseFloat(e);break}t[d]=e}return t},nx=function(s){return s=s.replace(zI,""),s.length===0},ud=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,_m=/<\s*class=/i,tx=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,ex=/<\s*style=/i,ix=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,zI=/^\s+|\s+$/,UI=Phaser.Utils.Objects.GetValue,il=class extends ed{constructor(t,i,d,e,n){var h=UI(n,"tags",void 0),r=new qm(h);super(t,i,d,e,n,"rexTagText",r)}addTag(t,i){return this.parser.addTag(t,i),this.updateText(!0)}addTags(t){for(var i in t)this.parser.addTag(i,t[i]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}},VI=function(s,t){if(this.scene.sys.scale.autoRound&&(s=Math.floor(s),t=Math.floor(t)),this.width===s&&this.height===t)return this;var i=this.node.style;return i.width=`${s}px`,i.height=`${t}px`,this.updateSize(),this},WI=Phaser.Utils.Objects.GetValue,sx=function(s,t,i){i===void 0&&(i={});var d,e;for(var n in s)d=s[n],e=WI(t,n,d[1]),e!==void 0&&(i[d[0]]=e);return i},XI=function(s,t,i){for(let d in i)t.addEventListener(d,function(e){s.emit(i[d],s,e)})},HI=function(s){s.addEventListener("touchstart",Ar,!1),s.addEventListener("touchmove",Ar,!1),s.addEventListener("touchend",Ar,!1),s.addEventListener("mousedown",Ar,!1),s.addEventListener("mouseup",Ar,!1),s.addEventListener("mousemove",Ar,!1)},Ar=function(s){s.stopPropagation()},$I=Phaser.GameObjects.DOMElement,rx=Phaser.Utils.Objects.IsPlainObject,Yn=Phaser.Utils.Objects.GetValue,nl=class extends $I{constructor(t,i,d,e,n,h){rx(i)?(h=i,i=Yn(h,"x",0),d=Yn(h,"y",0),e=Yn(h,"width",0),n=Yn(h,"height",0)):rx(e)&&(h=e,e=Yn(h,"width",0),n=Yn(h,"height",0)),h===void 0&&(h={});var r,o=Yn(h,"type","text");o==="textarea"?(r=document.createElement("textarea"),r.style.resize="none"):(r=document.createElement("input"),r.type=o),sx(ax,h,r);var l=Yn(h,"style",void 0);l=sx(ox,h,l);var a=r.style;for(var u in h)u in ax||u in ox||u in a&&(l[u]=h[u]);l["box-sizing"]="border-box",super(t,i,d,r,l),this.type="rexInputText",this.resize(e,n),XI(this,r,KI),HI(r),Yn(h,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return t===void 0?this.node.select():this.node.setSelectionRange(t,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0&&(t=0),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node.style[t]=i,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}},ZI={resize:VI};Object.assign(nl.prototype,ZI);var ax={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},ox={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},KI={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"},fd=function(s,t,i,d){if(t)return!(i&&!i(s,t)||!hx(s,t)||d&&!d(s,t));for(var e=s.scene.input.manager,n=e.pointersTotal,h=e.pointers,t,r=0;r<n;r++)if(t=h[r],!(i&&!i(s,t))&&!!hx(s,t)&&!(d&&!d(s,t)))return!0;return!1},hx=function(s,t){for(var i=s.scene,d=i.input.cameras.getCamerasBelowPointer(t),e=i.input.manager,n=[s],h,r=0,o=d.length;r<o;r++)if(h=e.hitTest(t,n,d[r]),h.length>0)return!0;return!1},JI=function(s,t,i){s=s.replace(" ","");var d=i.previousText;if(s===d)return s;if(isNaN(s)){s=d;var e=i.cursorPosition-1;i.setText(s),i.setCursorPosition(e)}else i.previousText=s;return s},QI=Phaser.Game,lx=function(s){return s instanceof QI},kI=Phaser.Scene,Rr=function(s){return s instanceof kI},jI=function(s){if(lx(s))return s;if(lx(s.game))return s.game;if(Rr(s))return s.sys.game;if(Rr(s.scene))return s.scene.sys.game},dd=function(s){return jI(s).loop.delta},Or=Phaser.Utils.Objects.GetValue,qI=Phaser.Math.Wrap,sl=class extends nl{constructor(t,i){super(t.scene,i);var d=this.node.style;d.position="absolute",d.opacity=0,d.pointerEvents="none",d.zIndex=0,d.transform="scale(0)",this.setCursor(Or(i,"cursor","|")),this.setCursorFlashDuration(Or(i,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(Or(i,"enterClose",!0)),this.onOpenCallback=Or(i,"onOpen",void 0),this.onCloseCallback=Or(i,"onClose",void 0);var e=Or(i,"onUpdate",void 0);e==="number"&&(e=JI),this.onUpdateCallback=e,this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){fd(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var i=this.onUpdateCallback(t,this.textObject,this);i!=null&&(t=i)}if(this.isFocused&&this.hasCursor){var d=this.cursorPosition;t=t.substring(0,d)+this.cursor+t.substring(d)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var i=this.cursorFlashTimer+dd(this.scene);return this.cursorFlashTimer=qI(i,0,this.cursorFlashDuration),t}setEnterClose(t){return t===void 0&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}},_I=Phaser.GameObjects.Zone,tw=Phaser.Utils.Array.Add,ew=Phaser.Utils.Array.Remove,Lr=class extends _I{constructor(t,i,d,e,n){i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=1),n===void 0&&(n=1),super(t,i,d,e,n),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var i,d=this.children.length-1;d>=0;d--)i=this.children[d],!i.parentContainer&&!i.displayList&&i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var i=this;return tw(this.children,t,0,function(d){d.once("destroy",i.onChildDestroy,i)},this),this}remove(t,i){var d=this;return ew(this.children,t,function(e){e.off("destroy",d.onChildDestroy,d),i&&e.destroy()}),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i=this,d,e=0,n=this.children.length;e<n;e++)d=this.children[e],d.off("destroy",i.onChildDestroy,i),t&&d.destroy();return this.children.length=0,this}},ux=Phaser.GameObjects.Components;Phaser.Class.mixin(Lr,[ux.Alpha,ux.Flip]);var zi=function(s,t){var i;if(t===void 0)s.hasOwnProperty("rexContainer")&&(i=s.rexContainer.parent);else for(i=zi(s);i&&i.name!==t;)i=zi(i);return i},vd=function(s){for(var t=zi(s);t;)s=t,t=zi(t);return s},iw=Phaser.Math.DegToRad,nw=Phaser.Math.RadToDeg,Ht=function(s){if(!s.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return nw(this.rotation)},set:function(i){this.rotation=iw(i)}}),Object.defineProperty(t,"displayWidth",{get:function(){return s.width*this.scaleX},set:function(i){this.scaleX=i/s.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return s.height*this.scaleY},set:function(i){this.scaleY=i/s.height}}),s.rexContainer=t}return s.rexContainer},sw={setParent(s,t){t===void 0&&(t=this);var i=Ht(s);return t?(i.parent=t,i.self=s):(i.parent=null,i.self=null),this},getParent(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),zi(s,t)},getTopmostParent(s){return s===void 0&&(s=this),vd(s)}},rl=Phaser.Utils.Objects.GetValue,fx=Lr.prototype.add,cd=function(s,t){this.setParent(s);var i=Ht(s);return dx(i,t),this.resetChildState(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),fx.call(this,s),this.addToRenderLayer(s),this},pd=function(s,t){this.setParent(s);var i=Ht(s);return dx(i,t),i.x=s.x,i.y=s.y,i.rotation=s.rotation,i.scaleX=s.scaleX,i.scaleY=s.scaleY,i.alpha=s.alpha,i.visible=s.visible,i.active=s.active,this.updateChildPosition(s).updateChildAlpha(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),fx.call(this,s),this.addToRenderLayer(s),this},dx=function(s,t){s.syncPosition=rl(t,"syncPosition",!0),s.syncRotation=rl(t,"syncRotation",!0),s.syncScale=rl(t,"syncScale",!0),s.syncAlpha=rl(t,"syncAlpha",!0)},rw={add(s){return Array.isArray(s)?this.addMultiple(s):cd.call(this,s),this},pin(s,t){return Array.isArray(s)?this.addMultiple(s,t):cd.call(this,s,t),this},addMultiple(s){for(var t=0,i=s.length;t<i;t++)cd.call(this,s[t]);return this},addLocal(s){return Array.isArray(s)?this.addMultiple(s):pd.call(this,s),this},pinLocal(s,t){return Array.isArray(s)?this.addMultiple(s,t):pd.call(this,s,t),this},addLocalMultiple(s){for(var t=0,i=s.length;t<i;t++)pd.call(this,s[t]);return this}},aw=Lr.prototype.remove,ow=Lr.prototype.clear,hw={remove(s,t){return zi(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),aw.call(this,s,t),this)},clear(s){for(var t=this.children,i=0,d=t.length;i<d;i++){var e=t[i];this.setParent(e,null),s||this.removeFromRenderLayer(e)}return ow.call(this,s),this}},lw={getLocalState(s){return Ht(s)},resetChildState(s){return this.resetChildPositionState(s).resetChildVisibleState(s).resetChildAlphaState(s).resetChildActiveState(s),this},resetChildrenState(s){for(var t=0,i=s.length;t<i;t++)this.resetChildState(s[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},vx=Phaser.Math.RotateAround,uw={worldToLocal(s){return s.x-=this.x,s.y-=this.y,vx(s,0,0,-this.rotation),s.x/=this.scaleX,s.y/=this.scaleY,s},localToWorld(s){return s.x*=this.scaleX,s.y*=this.scaleY,vx(s,0,0,this.rotation),s.x+=this.x,s.y+=this.y,s}},Da=function(s,t){return s===t?1:s/t},fw={updateChildPosition(s){s.isRexContainerLite&&(s.syncChildrenEnable=!1);var t=Ht(s),i=t.parent;return t.syncPosition&&(s.x=t.x,s.y=t.y,i.localToWorld(s)),t.syncRotation&&(s.rotation=t.rotation+i.rotation),t.syncScale&&(s.scaleX=t.scaleX*i.scaleX,s.scaleY=t.scaleY*i.scaleY),s.isRexContainerLite&&(s.syncChildrenEnable=!0,s.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(s){var t=Ht(s),i=t.parent;return t.x=s.x,t.y=s.y,i.worldToLocal(t),t.scaleX=Da(s.scaleX,i.scaleX),t.scaleY=Da(s.scaleY,i.scaleY),t.rotation=s.rotation-i.rotation,this},setChildPosition(s,t,i){return s.x=t,s.y=i,this.resetChildPositionState(s),this},setChildLocalPosition(s,t,i){var d=Ht(s);return d.x=t,d.y=i,this.updateChildPosition(s),this},resetLocalPositionState(){var s=Ht(this).parent;return s&&s.resetChildPositionState(this),this}},dw=Phaser.Math.DegToRad,vw={updateChildRotation(s){var t=Ht(s),i=t.parent;return t.syncRotation&&(s.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(s){var t=Ht(s),i=t.parent;return t.rotation=s.rotation-i.rotation,this},setChildRotation(s,t){return s.rotation=t,this.resetChildRotationState(s),this},setChildAngle(s,t){return s.angle=t,this.resetChildRotationState(s),this},setChildLocalRotation(s,t){var i=Ht(s);return i.rotation=t,this.updateChildRotation(s),this},setChildLocalAngle(s,t){var i=Ht(s);return i.rotation=dw(t),this.updateChildRotation(s),this},resetLocalRotationState(){var s=Ht(this).parent;return s&&s.resetChildRotationState(this),this}},cw={updateChildScale(s){var t=Ht(s),i=t.parent;return t.syncScale&&(s.scaleX=i.scaleX*t.scaleX,s.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(s){var t=Ht(s),i=t.parent;return t.scaleX=Da(s.scaleX,i.scaleX),t.scaleY=Da(s.scaleY,i.scaleY),this},setChildScale(s,t,i){return i===void 0&&(i=t),s.scaleX=t,s.scaleY=i,this.resetChildScaleState(s),this},setChildLocalScale(s,t,i){i===void 0&&(i=t);var d=Ht(s);return d.scaleX=t,d.scaleY=i,this.updateChildScale(s),this},setChildDisplaySize(s,t,i){return s.setDisplaySize(t,i),this.resetChildScaleState(s),this},resetLocalScaleState(){var s=Ht(this).parent;return s&&s.resetChildScaleState(this),this}},pw={updateChildVisible(s){var t=Ht(s),i=t.parent,d=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return s.visible=i.visible&&t.visible&&d,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(s){var t=Ht(s);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=s.visible,this},setChildVisible(s,t){return this.setChildLocalVisible(s,t),this},setChildLocalVisible(s,t){t===void 0&&(t=!0);var i=Ht(s);return i.visible=t,this.updateChildVisible(s),this},setChildMaskVisible(s,t){t===void 0&&(t=!0);var i=Ht(s);return i.maskVisible=t,this.updateChildVisible(s),this},resetLocalVisibleState(){var s=Ht(this).parent;return s&&s.resetChildVisibleState(this),this}},gw={updateChildAlpha(s){var t=Ht(s),i=t.parent;return t.syncAlpha&&(s.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(s){var t=Ht(s),i=t.parent;return t.alpha=Da(s.alpha,i.alpha),this},setChildAlpha(s,t){return s.alpha=t,this.resetChildAlphaState(s),this},setChildLocalAlpha(s,t){var i=Ht(s);return i.alpha=t,this.updateChildAlpha(s),this},resetLocalAlphaState(){var s=Ht(this).parent;return s&&s.resetChildAlphaState(this),this}},mw={updateChildActive(s){var t=Ht(s),i=t.parent;return s.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(s){var t=Ht(s);return t.active=s.active,this},setChildActive(s,t){return s.active=t,this.resetChildActiveState(s),this},setChildLocalActive(s,t){t===void 0&&(t=!0);var i=Ht(s);return i.active=t,this.updateChildActive(s),this},resetLocalActiveState(){var s=Ht(this).parent;return s&&s.resetChildActiveState(this),this}},xw={updateChildScrollFactor(s){var t=Ht(s),i=t.parent;return s.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},yw={updateChildMask(s){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==s&&(s.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(s){return this.mask=s,this},clearMask(s){return s===void 0&&(s=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),s&&this.mask&&this.mask.destroy(),this}},Ba=function(s,t){if(s.length===0)return s;t===void 0&&(t=!1);var i=s[0].scene,d=i.sys.displayList;return d.depthSort(),t?s.sort(function(e,n){return d.getIndex(n)-d.getIndex(e)}):s.sort(function(e,n){return d.getIndex(e)-d.getIndex(n)}),s},Tw={setDepth(s,t){if(this.depth=s,!t&&this.children)for(var i=this.getAllChildren(),d=0,e=i.length;d<e;d++)i[d].depth=s;return this},swapDepth(s){var t=this.depth,i=s.depth;return this.setDepth(i),s.setDepth(t),this},incDepth(s){if(this.depth+=s,this.children)for(var t=this.getAllChildren(),i=0,d=t.length;i<d;i++)t[i].depth+=s;return this},moveDepthBelow(s){var t=this.displayList;if(s.displayList!==t)return this;var i=this.getAllChildren([this]);Ba(i);for(var d=0,e=i.length;d<e;d++){var n=i[d];if(t.exists(n)){t.moveBelow(s,n);break}}return this},moveDepthAbove(s){var t=this.displayList;if(s.displayList!==t)return this;var i=this.getAllChildren([this]);Ba(i,!0);for(var d=0,e=i.length;d<e;d++){var n=i[d];if(t.exists(n)){t.moveAbove(s,n);break}}return this}},cx=function(s,t){var i=t(s);if(!i&&s.isRexContainerLite)for(var d=s.children,e=0,n=d.length;e<n;e++)cx(d[e],t)},gd=function(s,t){for(var i=[s];i.length>0;){var d=i.shift(),e=t(d);!e&&d.isRexContainerLite&&i.push(...d.children)}},Us=Phaser.Utils.Array,Cw={getChildren(s){if(!s)s=this.children;else for(var t=0,i=this.children.length;t<i;t++)s.push(this.children[t]);return s},getAllChildren(s){s===void 0&&(s=[]);var t=this;return gd(t,function(i){i!==t&&s.push(i)}),s},getAllVisibleChildren(s){s===void 0&&(s=[]);var t=this;return gd(t,function(i){if(i!==t){if(!i.visible)return!0;s.push(i)}}),s},bfs(s,t){return t===void 0&&(t=this),gd(t,s),this},dfs(s,t){return t===void 0&&(t=this),cx(t,s),this},contains(s){var t=zi(s);return t?t===this?!0:this.contains(t):!1},getByName(s,t){if(t){for(var i=[this],d,e;i.length;){d=i.shift();for(var n=0,h=d.children.length;n<h;n++){if(e=d.children[n],e.name===s)return e;e.isRexContainerLite&&i.push(e)}}return null}else return Us.GetFirst(this.children,"name",s)},getRandom(s,t){return Us.GetRandom(this.children,s,t)},getFirst(s,t,i,d){return Us.GetFirstElement(this.children,s,t,i,d)},getAll(s,t,i,d){return Us.GetAll(this.children,s,t,i,d)},count(s,t,i,d){return Us.CountAllMatching(this.children,s,t,i,d)},swap(s,t){return Us.Swap(this.children,s,t),this},setAll(s,t,i,d){return Us.SetAll(this.children,s,t,i,d),this}},md=function(s){for(var t=[],i=0,d=s.length;i<d;i++){var e=s[i];!e.hasOwnProperty("rexContainer")||t.push(e.rexContainer)}return t},Sw=function(s){for(var t=0,i=s.length;t<i;t++){var d=s[t].scene;if(d)return d}return null},px=function(s,t,i){if(!i.parent){s.remove();return}var d=i.parent,e=i.self;switch(t){case"x":case"y":d.updateChildPosition(e);break;case"angle":case"rotation":d.updateChildRotation(e);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":d.updateChildScale(e);break;case"alpha":d.updateChildAlpha(e);break;default:d.updateChildPosition(e),d.updateChildRotation(e),d.updateChildScale(e),d.updateChildAlpha(e);break}},Ew={tweenChild(s){var t=s.targets;Array.isArray(t)||(t=[t]);var i=this.scene||Sw(t);if(!!i){s.targets=md(t);var d=i.tweens.add(s);return d.on("update",px),d}},createTweenChildConfig(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=md(t));var i=s.onUpdate;return s.onUpdate=function(d,e){i&&i(d,e),px(d,void 0,e)},s},tween(s){var t=this.scene;return s.targets||(s.targets=this),t.tweens.add(s)},timelineChild(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=md(t));for(var i=s.tweens,d=0,e=i.length;d<e;d++)i[d]=this.createTweenChildConfig(i[d]);var n=this.scene.tweens.timeline(s);return n}},gx=function(s){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return Ba(t),s.add(t),this._setParentContainerFlag=!1,this},Pw=function(){if(!this.parentContainer)return this;this._setParentContainerFlag=!0;var s=this.getAllChildren([this]);return Ba(s),s.reverse(),this.parentContainer.remove(s),this._setParentContainerFlag=!1,this},Mw={addToLayer:gx,addToContainer:gx,removeFromContainer:Pw},Aw={enableLayer(){if(this.layer)return this;var s=this.scene.add.layer();return this.moveDepthBelow(s),this.once("destroy",function(){s.list.length=0,s.destroy()}),this.addToLayer(s),this.layer=s,this},getLayer(){return this.layer||this.enableLayer(),this.layer},getRenderLayer(){if(this.layer)return this.layer;for(var s=this.getParent();s;){var t=s.layer;if(t)return t;s=s.getParent()}return null},addToRenderLayer(s){if(!s.displayList)return this;var t=this.getRenderLayer();if(!t)return this;s.isRexContainerLite?s.addToLayer(t):t.add(s);var i=Ht(s);return i.layer=t,this},removeFromRenderLayer(s){var t=Ht(s),i=t.layer;return i?(i.remove(s),t.layer=null,this):this}},_t=function(s){return s.displayWidth!==void 0?s.displayWidth:s.width},Jt=function(s){return s.displayHeight!==void 0?s.displayHeight:s.height},mx=Phaser.Geom.Rectangle,as=Phaser.Math.Vector2,Rw=Phaser.Math.RotateAround,al=function(s,t){if(t===void 0?t=new mx:t===!0&&(xd===void 0&&(xd=new mx),t=xd),s.getBounds)return s.getBounds(t);var i,d,e,n,h,r,o,l;if(s.parentContainer){var a=s.parentContainer.getBoundsTransformMatrix();yd(s,t),a.transformPoint(t.x,t.y,t),i=t.x,d=t.y,Td(s,t),a.transformPoint(t.x,t.y,t),e=t.x,n=t.y,Cd(s,t),a.transformPoint(t.x,t.y,t),h=t.x,r=t.y,Sd(s,t),a.transformPoint(t.x,t.y,t),o=t.x,l=t.y}else yd(s,t),i=t.x,d=t.y,Td(s,t),e=t.x,n=t.y,Cd(s,t),h=t.x,r=t.y,Sd(s,t),o=t.x,l=t.y;return t.x=Math.min(i,e,h,o),t.y=Math.min(d,n,r,l),t.width=Math.max(i,e,h,o)-t.x,t.height=Math.max(d,n,r,l)-t.y,t},xd=void 0,yd=function(s,t,i){return t===void 0?t=new as:t===!0&&(Ui===void 0&&(Ui=new as),t=Ui),s.getTopLeft?s.getTopLeft(t):(t.x=s.x-_t(s)*s.originX,t.y=s.y-Jt(s)*s.originY,ol(s,t,i))},Td=function(s,t,i){return t===void 0?t=new as:t===!0&&(Ui===void 0&&(Ui=new as),t=Ui),s.getTopRight?s.getTopRight(t):(t.x=s.x-_t(s)*s.originX+_t(s),t.y=s.y-Jt(s)*s.originY,ol(s,t,i))},Cd=function(s,t,i){return t===void 0?t=new as:t===!0&&(Ui===void 0&&(Ui=new as),t=Ui),s.getBottomLeft?s.getBottomLeft(t):(t.x=s.x-_t(s)*s.originX,t.y=s.y-Jt(s)*s.originY+Jt(s),ol(s,t,i))},Sd=function(s,t,i){return t===void 0?t=new as:t===!0&&(Ui===void 0&&(Ui=new as),t=Ui),s.getBottomRight?s.getBottomRight(t):(t.x=s.x-_t(s)*s.originX+_t(s),t.y=s.y-Jt(s)*s.originY+Jt(s),ol(s,t,i))},Ui=void 0,ol=function(s,t,i){if(i===void 0&&(i=!1),s.rotation!==0&&Rw(t,s.x,s.y,s.rotation),i&&s.parentContainer){var d=s.parentContainer.getBoundsTransformMatrix();d.transformPoint(t.x,t.y,t)}return t},xx=Phaser.Geom.Rectangle,Ow=Phaser.Geom.Rectangle.Union,Lw=function(s,t){t===void 0?t=new xx:t===!0&&(Ed===void 0&&(Ed=new xx),t=Ed),t.setTo(0,0,0,0);for(var i,d=!0,e=0,n=s.length;e<n;e++)if(i=s[e],!!i.getBounds){var h=al(i,!0);d?(t.setTo(h.x,h.y,h.width,h.height),d=!1):Ow(h,t,t)}return t},Ed,Vs=Phaser.Utils.Objects.GetValue,hl=function(s){if(!!s){var t=s.gameObjects,i=s.renderTexture,d=Vs(s,"x",void 0),e=Vs(s,"y",void 0),n=Vs(s,"width",void 0),h=Vs(s,"height",void 0),r=Vs(s,"originX",0),o=Vs(s,"originY",0),l=Vs(s,"padding",0),a,u;if(n===void 0||h===void 0||d===void 0||e===void 0){var c=Lw(t,!0),f=d!==void 0&&e!==void 0;f?(n=Math.max(d-c.left,c.right-d)*2,h=Math.max(e-c.top,c.bottom-e)*2,r=.5,o=.5):(d=c.x,e=c.y,n=c.width,h=c.height,r=0,o=0),a=c.x,u=c.y}else a=d+(0-r)*n,u=e+(0-o)*h;a-=l,u-=l,n+=l*2,h+=l*2;var v=!i;if(v){var p=t[0].scene;i=p.add.renderTexture(0,0,n,h)}i.setPosition(d,e),(i.width!==n||i.height!==h)&&i.setSize(n,h),i.setOrigin(r,o),i.camera.setScroll(a,u),t=Ba(Ys(t)),i.draw(t);var g=s.saveTexture;return g&&i.saveTexture(g),v&&g&&i.destroy(),i}},Fw={snapshot(s){var t=this.scaleX,i=this.scaleY,d=t===1&&i===1;d||this.setScale(1),s===void 0&&(s={}),s.gameObjects=this.getAllVisibleChildren(),s.x=this.x,s.y=this.y,s.originX=this.originX,s.originY=this.originY;var e=hl(s),n=!!e.scene;return d||(this.setScale(t,i),n&&e.setScale(t,i)),n?e:this}},yx=Phaser.Utils.Objects.GetValue,Tx=function(s,t,i){var d=s.getBounds||s.width!==void 0&&s.height!==void 0;if(!!d){var e,n;typeof i=="number"?e=i:(e=yx(i,"color"),n=yx(i,"lineWidth")),e===void 0&&(e=16777215),n===void 0&&(n=1),zn[0]=yd(s,zn[0]),zn[1]=Td(s,zn[1]),zn[2]=Sd(s,zn[2]),zn[3]=Cd(s,zn[3]),t.lineStyle(n,e).strokePoints(zn,!0,!0)}},zn=[void 0,void 0,void 0,void 0],Iw=Phaser.Utils.Objects.GetValue,ww=function(s,t){for(var i=Iw(t,"drawContainer",!0),d=this.getAllVisibleChildren([this]),e=0,n=d.length;e<n;e++){var h=d[e];!i&&h.isRexContainerLite||Tx(h,s,t)}return this},Dw=Phaser.Math.RotateAround,Bw=function(s,t,i){i===void 0&&(i=t);var d={x:(t-s.originX)*s.displayWidth,y:(i-s.originY)*s.displayHeight};return Dw(d,0,0,s.rotation),s.originX=t,s.originY=i,s.x=s.x+d.x,s.y=s.y+d.y,s},Gw=function(s,t){this.syncChildrenEnable=!1,Bw(this,s,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),d=0,e=i.length;d<e;d++)this.resetChildPositionState(i[d]);return this},Cx={changeOrigin:Gw,drawBounds:ww};Object.assign(Cx,sw,rw,hw,lw,uw,fw,vw,cw,pw,gw,mw,xw,yw,Tw,Cw,Ew,Mw,Aw,Fw);var ri=class extends Lr{constructor(t,i,d,e,n,h){Array.isArray(e)&&(h=e,e=void 0,n=void 0),super(t,i,d,e,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,h&&this.add(h)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return zi(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=zi(this);return t?t.setParentContainerFlag:!1}};Object.assign(ri.prototype,Cx);var ll=Phaser.Utils.Objects.GetValue,Ga=class extends Yi{constructor(t,i,d,e,n,h){super(t,i,d);this.type="rexCircleMaskImage",this.setTexture(e,n,h)}setTexture(t,i,d){typeof i=="object"&&(d=i,i=void 0),typeof d=="string"&&(d={maskType:d});var e=ll(d,"maskType",0),n=ll(d,"backgroundColor",void 0);if(e===void 0?e=0:typeof e=="string"&&(e=bw[e]),this._textureKey=t,this._frameName=i,e===null)return this.loadTexture(t,i),this.dirty=!0,this;var h=n!=null;h||this.loadTexture(t,i);var r=this.canvas,o=this.context,l=r.width,a=r.height;switch(o.save(),o.globalCompositeOperation=h?"source-over":"destination-in",o.beginPath(),e){case 2:var u=ll(d,"radius",0),c=ll(d,"iteration",void 0);Y0(o,0,0,l,a,u,c);break;default:var f=Math.floor(l/2),v=Math.floor(a/2);e===0?o.arc(f,v,Math.min(f,v),0,2*Math.PI):o.ellipse(f,v,f,v,0,0,2*Math.PI);break}return h&&(o.fillStyle=n),o.fill(),o.restore(),h&&(o.save(),o.globalCompositeOperation="destination-atop",this.loadTexture(t,i),o.restore()),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}},bw={circle:0,ellipse:1,roundRectangle:2},ba=Phaser.Utils.Objects.GetValue,ul=class extends Yi{constructor(t,i,d,e,n,h){super(t,i,d);this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(e,n,h)}setTexture(t,i,d){typeof i=="object"&&(d=i,i=void 0),typeof d=="string"&&(d={mask:{key:d}});var e=ba(d,"mask.key"),n=ba(d,"mask.frame"),h=ba(d,"mask.invertAlpha",!1),r=ba(d,"mask.scale"),o=ba(d,"backgroundColor");if(e){this._maskKey=e,this._maskFrame=n,this._maskScale=r;var l=e?this.scene.sys.textures.get(e):null;this.maskFrame=l?l.get(n):null}this._textureKey=t,this._frameName=i;var a=this.maskFrame;if(a===null)return this.loadTexture(t,i),this.dirty=!0,this;var u=o!=null;this.loadTexture(t,i);var c=this.canvas,f=this.context,v=c.width,p=c.height;f.save(),f.globalCompositeOperation=h?"destination-out":"destination-in";var g,m;this._maskScale!=null?(g=a.cutWidth*this._maskScale,m=a.cutHeight*this._maskScale):(g=v,m=p);var x=(v-g)/2,y=(p-m)/2;return this.drawFrame(this._maskKey,this._maskFrame,x,y,g,m),f.restore(),u&&(f.save(),f.globalCompositeOperation="destination-over",f.fillStyle=o,f.fillRect(0,0,v,p),f.restore()),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}},fl=Phaser.Utils.Objects.GetValue,dl=function(s,t){return t===void 0?s:s[t]},os=function(s,t,i){s===void 0&&(s={}),t===void 0&&(t=0);var d=typeof t;return d==="string"?s[t]=i:d==="number"?(s.left=t,s.right=t,s.top=t,s.bottom=t):(s.left=fl(t,"left",0),s.right=fl(t,"right",0),s.top=fl(t,"top",0),s.bottom=fl(t,"bottom",0)),s},vl=class{constructor(t,i){this.setParent(t),this.type=i,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}};Object.assign(vl.prototype,Hh);var Nw=Phaser.Math.DegToRad,Yw=Phaser.Math.RadToDeg,cl=Phaser.Utils.Objects.GetValue,Na=class extends vl{constructor(t,i){super(t,i);this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setInitialPosition(t,i){return this.x0=t,this.y0=i,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return Yw(this._rotation)}set angle(t){this.rotation=Nw(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=cl(t,"width",void 0),d=cl(t,"height",void 0),e=cl(t,"scaleX",void 0),n=cl(t,"scaleY",void 0);return i!==void 0?d===void 0&&n===void 0?this.setWidth(i,!0):this.setWidth(i):e!==void 0&&this.setScaleX(e),d!==void 0?i===void 0&&e===void 0?this.setHeight(d,!0):this.setHeight(d):n!==void 0&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var t=this.context;t.save();var i=this.x+this.leftSpace+this.offsetX-this.originX*this.width,d=this.y+this.offsetY;this.autoRound&&(i=Math.round(i),d=Math.round(d)),t.translate(i,d),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),t.restore()}},Ws=Phaser.Utils.Objects.GetValue,Sx=class extends Na{constructor(t,i){super(t,"background");this.setColor(Ws(i,"color",null),Ws(i,"color2",null),Ws(i,"horizontalGradient",!0)),this.setStroke(Ws(i,"stroke",null),Ws(i,"strokeThickness",2)),this.setCornerRadius(Ws(i,"cornerRadius",0),Ws(i,"cornerIteration",null))}set color(t){t=zt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=zt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,d){return d===void 0&&(d=!0),this.color=t,this.color2=i,this.horizontalGradient=d,this}set stroke(t){t=zt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return this.stroke=t,this.strokeThickness=i,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,i){return this.cornerRadius=t,this.cornerIteration=i,this}drawContent(){Hf(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}},Ya=Phaser.Utils.Objects.GetValue,Ex=class extends Na{constructor(t,i){super(t,"background");this.setColor(Ya(i,"color",null),Ya(i,"color2",null),Ya(i,"horizontalGradient",!0)),this.setStroke(Ya(i,"stroke",null),Ya(i,"strokeThickness",2))}set color(t){t=zt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=zt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,d){return d===void 0&&(d=!0),this.color=t,this.color2=i,this.horizontalGradient=d,this}set stroke(t){t=zt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return this.stroke=t,this.strokeThickness=i,this}drawContent(){var t=this.parent.padding,i=t.left,d=t.top,e=this.parent.width-t.left-t.right,n=this.parent.height-t.top-t.bottom,h=this.context;if(this.color!=null){var r;if(this.color2!=null){var o;this.horizontalGradient?o=h.createLinearGradient(0,0,e,0):o=h.createLinearGradient(0,0,0,n),o.addColorStop(0,this.color),o.addColorStop(1,this.color2),r=o}else r=this.color;h.fillStyle=r,h.fillRect(i,d,e,n)}this.stroke!=null&&this.strokeThickness>0&&(h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.strokeRect(i,d,e,n))}},pl=function(s,t,i){return t.hasOwnProperty(s)?t[s]:i[s]},ze=Phaser.Utils.Objects.GetValue,za=class{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,align:this.align}}set(t){return this.setBold(ze(t,"bold",!1)),this.setItalic(ze(t,"italic",!1)),this.setFontSize(ze(t,"fontSize","16px")),this.setFontFamily(ze(t,"fontFamily","Courier")),this.setColor(ze(t,"color","#fff")),this.setStrokeStyle(ze(t,"stroke",null),ze(t,"strokeThickness",0)),this.setShadow(ze(t,"shadowColor",null),ze(t,"shadowOffsetX",0),ze(t,"shadowOffsetY",0),ze(t,"shadowBlur",0)),this.setOffset(ze(t,"offsetX",0),ze(t,"offsetY",0)),this.setSpace(ze(t,"leftSpace",0),ze(t,"rightSpace",0)),this.setAlign(ze(t,"align",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(pl("stroke",t,this),pl("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(pl("shadowOffsetX",t,this),pl("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}clone(){return new za(this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=zt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,i){return this.stroke=zt(t),i!==void 0&&(this.strokeThickness=i),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=zt(t),this}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.shadowOffsetX=t,this.shadowOffsetY=i,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,i,d,e){return this.setShadowColor(t).setShadowOffset(i,d).setShadowBlur(e),this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,i){return this.setOffsetX(t).setOffsetY(i),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,i){return this.setLeftSpace(t).setRightSpace(i),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var i=this.hasFill,d=this.hasStroke;return t.fillStyle=i?this.color:"#000",t.strokeStyle=d?this.stroke:"#000",t.lineWidth=d?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,i){return this.syncFont(t).syncStyle(t),t.measureText(i)}},zw=function(s,t){return s===void 0&&(s=0),t===void 0&&(t=0),s>0&&t>0?(this.fixedWidth!==s||this.fixedHeight!==t)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=s,this.fixedHeight=t,s>0&&(this.width=s),t>0&&(this.height=t),this},Uw=function(s,t){var i=this.padding,d=i.left,e=i.right,n=i.top,h=i.bottom;return os(i,s,t),this.dirty=this.dirty||d!=i.left||e!=i.right||n!=i.top||h!=i.bottom,this},Vw=function(s){return dl(this.padding,s)},Ww=function(s){return this.textStyle.modify(s),this},Xw=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},Hw=function(s){return this.poolManager.free(s),RemoveItem(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},$w=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Kw=function(){return this.setText(),this},Zw=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.push(...s),this.lastAppendedChildren.push(...s)):(this.children.push(s),this.lastAppendedChildren.push(s)),this},Fr="text",Pd="image",Md="command",hs=function(s){var t=s.type;return t===Fr||t===Pd},Px=function(s){return s.type===Fr&&s.text===`
`},Jw=function(s){return s.type===Fr&&s.text===" "},Qw=function(s){return s.type===Md},Mx=class extends Na{constructor(t,i,d){super(t,Fr);this.style=new za(d),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var t=this.style.getTextMetrics(this.context,this.text);this.textWidth=t.width;var i,d;t.hasOwnProperty("actualBoundingBoxAscent")?(i=t.actualBoundingBoxAscent,d=t.actualBoundingBoxDescent):(i=0,d=0),this.textHeight=i+d}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,i=t.hasFill,d=t.hasStroke;if(!(!i&&!d)){var e=this.context;t.syncFont(e).syncStyle(e),d&&(t.syncShadow(e),e.strokeText(this.text,0,0)),i&&(t.syncShadow(e),e.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}},gl=function(s,t){t&&this.textStyle.modify(t);for(var i=[],d=0,e=s.length;d<e;d++){var n=s.charAt(d),h=this.poolManager.allocate(Fr);h===null?h=new Mx(this,n,this.textStyle):h.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),i.push(h)}return this.addChild(i),this},kw=function(s,t){return s===void 0&&(s=""),this.removeChildren(),gl.call(this,s,t),this.dirty=!0,this},Ax=class extends Na{constructor(t,i,d){super(t,Pd);this.setTexture(i,d)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,i){return this.key=t,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(t,i),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,i=this.frameObj,d=this.frameWidth,e=this.frameHeight;t.drawImage(i.source.image,i.cutX,i.cutY,d,e,0,0,d,e)}draw(){if(!this.visible)return this;super.draw()}},Rx=function(s,t,i){var d=this.poolManager.allocate(Pd);return d===null?d=new Ax(this,s,t):d.setParent(this).setActive().setTexture(s,t),d.modifyPorperties(i),this.addChild(d),this},Ox=class extends vl{constructor(t,i,d,e,n){super(t,Md);this.setName(i).setParameter(e).setCallback(d,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,i){return this.callback=t,this.scope=i,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},Wt=function(s,t,i,d){var e=this.poolManager.allocate(Md);return e===null?e=new Ox(this,s,t,i,d):e.setParent(this).setActive().setName(s).setCallback(t,d).setParameter(i),this.addChild(e),this},jw=function(s){return s===void 0&&(s={}),this.wrapConfig=s,this},qw=function(s,t,i,d){d===void 0&&(d={word:[],width:0}),d.word.length=0;for(var e=s.length,n=t,h=d.word,r=0;n<e;){var o=s[n];if(!hs(o)){h.push(o),n++;continue}if(o.type===Fr&&o.text!==" "&&o.text!==`
`)h.push(o),r+=o.outerWidth,n++;else{n===t&&(h.push(o),r+=o.outerWidth);break}if(i)break}return d.width=r,d},Lx=function(s){for(var t=0,i=s.length;t<i;t++){var d=s[t];if(d.align!==void 0)return d.align}},Fx=function(s,t,i){if(!(t===0&&i===0))for(var d=0,e=s.length;d<e;d++){var n=s[d];!hs(n)||(n.x+=t,n.y+=i)}},_w=function(s,t,i){var d=s.hAlign,e=s.vAlign,n,h,r=s.linesHeight;switch(e){case 1:case"center":h=(i-r)/2;break;case 2:case"bottom":h=i-r;break;default:h=0;break}for(var o=s.lines,l=0,a=o.length;l<a;l++){var u=o[l],c=u.width,f=u.children,v=Lx(f);switch(v===void 0&&(v=d),v){case 1:case"center":n=(t-c)/2;break;case 2:case"right":n=t-c;break;default:n=0;break}Fx(f,n,h)}},_i=Phaser.Utils.Objects.GetValue,tD=function(s){var t=_i(s,"start",0);os(this.wrapPadding,_i(s,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,d=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,e=_i(s,"lineHeight",void 0),n;if(e===void 0)if(n=_i(s,"maxLines",0),this.fixedHeight>0){var b=this.fixedHeight-i;e=b/n}else e=0;else if(this.fixedHeight>0){if(n=_i(s,"maxLines",void 0),n===void 0){var b=this.fixedHeight-i;n=Math.floor(b/e)}}else n=_i(s,"maxLines",0);var h=n===0,r=_i(s,"wrapWidth",void 0);r===void 0&&(this.fixedWidth>0?r=this.fixedWidth-d:r=Infinity);for(var o=_i(s,"letterSpacing",0),l=_i(s,"hAlign",0),a=_i(s,"vAlign",0),u=_i(s,"charWrap",!1),c={start:t,isLastPage:!1,padding:this.wrapPadding,lineHeight:e,maxLines:n,wrapWidth:r,letterSpacing:o,hAlign:l,vAlign:a,charWrap:u,children:[],lines:[],maxLineWidth:0,linesHeight:0},f=this.children,v=0,p=f.length;v<p;v++)f[v].setActive(!1);r+=o;for(var g=this.padding.left+this.wrapPadding.left,m=this.padding.top+this.wrapPadding.top+e,x=g,y=m,T=r,C=t,S=f.length,E=c.children,M=c.lines,R=[],L=0,O=0,F;C<S;){F=qw(f,C,u,F);var D=F.word,B=D.length,N=F.width+B*o;C+=B;var V=Px(D[0]);if(T<N||V){if(V){var X=D[0];X.setActive().setPosition(x,y),E.push(X),R.push(X)}if(x=g,y+=e,T=r,M.push({children:R,width:L}),O=Math.max(O,L),L=0,R=[],!h&&M.length===n)break;if(V)continue}T-=N,L+=N;for(var v=0,p=D.length;v<p;v++){var K=D[v];K.setActive(),E.push(K),R.push(K),hs(K)&&(K.setPosition(x,y),x+=K.outerWidth+o)}}R.length>0&&(M.push({children:R,width:L}),O=Math.max(O,L)),c.start+=E.length,c.isLastPage=c.start===S,c.maxLineWidth=O,c.linesHeight=M.length*e;var Z=this.fixedWidth>0?this.fixedWidth:c.maxLineWidth+d,G=this.fixedHeight>0?this.fixedHeight:c.linesHeight+i,w=Z-d,b=G-i;_w(c,w,b),this.setSize(Z,G);for(var v=0,p=E.length;v<p;v++){var K=E[v];!hs(K)||(K.x0=K.x,K.y0=K.y)}return c},eD=Phaser.Utils.Objects.Merge,iD=function(s){return s===void 0&&(s={}),tD.call(this,eD(s,this.wrapConfig))},nD=function(s,t,i){var d=s.hAlign,e=s.vAlign,n,h,r=s.rtl,o=s.lines,l=s.lineWidth,a=s.linesWidth;switch(d){case 1:case"center":n=(t-a)/2;break;case 2:case"right":n=t-a;break;default:n=0;break}r&&(n+=l);for(var u=0,c=o.length;u<c;u++){var f=o[r?c-u-1:u],v=f.children,p=f.height,g=Lx(v);switch(g===void 0&&(g=e),g){case 1:case"center":h=(i-p)/2;break;case 2:case"bottom":h=i-p;break;default:h=0;break}Fx(v,n,h),n+=l}},Mi=Phaser.Utils.Objects.GetValue,sD=function(s){var t=Mi(s,"start",0);os(this.wrapPadding,Mi(s,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,d=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,e=Mi(s,"lineWidth",void 0),n;if(e===void 0)if(n=Mi(s,"maxLines",0),this.fixedWidth>0){var Z=this.fixedWidth-d;e=Z/n}else e=0;else if(this.fixedWidth>0){if(n=Mi(s,"maxLines",void 0),n===void 0){var Z=this.fixedWidth-d;n=Math.floor(Z/e)+1}}else n=Mi(s,"maxLines",0);var h=n===0,r=Mi(s,"fixedChildHeight",void 0);if(r===void 0){var o=Mi(s,"charPerLine",void 0);if(o!==void 0){var G=this.fixedHeight-i;r=Math.floor(G/o)}}var l=Mi(s,"wrapHeight",void 0);l===void 0&&(this.fixedHeight>0?l=this.fixedHeight-i:l=Infinity);for(var a=Mi(s,"letterSpacing",0),u=Mi(s,"rtl",!0),c=Mi(s,"hAlign",u?2:0),f=Mi(s,"vAlign",0),v={start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:e,maxLines:n,fixedChildHeight:r,wrapHeight:l,letterSpacing:a,hAlign:c,vAlign:f,rtl:u,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,g=0,m=p.length;g<m;g++)p[g].setActive(!1);l+=a;for(var x=this.padding.left+this.wrapPadding.left,y=this.padding.top+this.wrapPadding.top,T=x,C=y,S=l,E=t,M=p.length,R=v.children,L=v.lines,O=[],F=0,D=0;E<M;){var B=p[E];if(E++,!hs(B)){B.setActive(),R.push(B),O.push(B);continue}var N=(r!==void 0?r:B.height)+a,V=Px(B);if(S<N||V){if(V&&(B.setActive().setPosition(T,C).setOrigin(.5),R.push(B),O.push(B)),T=x,C=y,S=l,L.push({children:O,height:F}),D=Math.max(D,F),F=0,O=[],!h&&L.length===n)break;if(V)continue}S-=N,F+=N,B.setActive().setPosition(T,C).setOrigin(.5),R.push(B),O.push(B),C+=N}O.length>0&&(L.push({children:O,height:F}),D=Math.max(D,F)),v.start+=R.length,v.isLastPage=v.start===M,v.maxLineHeight=D,v.linesWidth=L.length*e;var X=this.fixedWidth>0?this.fixedWidth:v.linesWidth+d,K=this.fixedHeight>0?this.fixedHeight:v.maxLineHeight+i,Z=X-d,G=K-i;nD(v,Z,G),this.setSize(X,K);for(var g=0,m=R.length;g<m;g++){var w=R[g];!hs(w)||(w.x0=w.x,w.y0=w.y)}return v},rD=Phaser.Utils.Objects.Merge,aD=function(s){return s===void 0&&(s={}),sD.call(this,rD(s,this.wrapConfig))},oD=function(){this.clear(),this.setSize(this.width,this.height),this.background.active&&this.background.draw();for(var s,t=0,i=this.children.length;t<i;t++)s=this.children[t],s.active&&s.visible&&s.draw();this.innerBounds.active&&this.innerBounds.draw()},hD=function(){return this.children},lD=function(){return this.lastAppendedChildren},uD=Phaser.Utils.Array.GetAll,fD=function(){return uD(this.children,"active",!0)},dD=function(){for(var s=this.children,t=0,i=0,d=0,e=s.length;d<e;d++){var n=s[d];if(!(!hs(n)||!n.active||!n.visible)){var h=n.x0!==void 0?n.x0:n.x,r=n.y0!==void 0?n.y0:n.y;t=Math.max(t,h),i=Math.max(i,r)}}var o=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,l=i+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==o||this.height!==l)&&(this.dirty=!0,this.width=o,this.height=l),this},vD={setFixedSize:zw,setPadding:Uw,getPadding:Vw,modifyTextStyle:Ww,resetTextStyle:Xw,removeChild:Hw,removeChildren:$w,clearContent:Kw,addChild:Zw,setText:kw,appendText:gl,appendImage:Rx,appendCommand:Wt,setWrapConfig:jw,runWordWrap:iD,runVerticalWrap:aD,drawContent:oD,getChildren:hD,getLastAppendedChildren:lD,getActiveChildren:fD,setToMinSize:dD},cD=Phaser.Utils.Objects.GetFastValue,pD={},Ix=class{constructor(t){this.pools=cD(t,"pools",pD)}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new Nn),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,d=t.length;i<d;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}},wx=Phaser.Utils.Objects.IsPlainObject,Vi=Phaser.Utils.Objects.GetValue,Xs=class extends Yi{constructor(t,i,d,e,n,h){wx(i)?(h=i,i=Vi(h,"x",0),d=Vi(h,"y",0),e=Vi(h,"width",0),n=Vi(h,"height",0)):wx(e)&&(h=e,e=Vi(h,"width",0),n=Vi(h,"height",0));var r=e===0?1:e,o=n===0?1:n;super(t,i,d,r,o);this.type="rexDynamicText",this.autoRound=!0,this.padding=os(),this.wrapPadding=os();var l=Vi(h,"style",void 0);this.defaultTextStyle=new za(l),this.textStyle=this.defaultTextStyle.clone(),this.background=new Sx(this,Vi(h,"background",void 0)),this.innerBounds=new Ex(this,Vi(h,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new Ix(h),this.setFixedSize(e,n),this.setPadding(Vi(h,"padding",0)),this.setWrapConfig(Vi(h,"wrap",void 0));var a=Vi(h,"text",void 0);a&&this.setText(a)}updateTexture(){return this.drawContent(),super.updateTexture(),this}};Object.assign(Xs.prototype,vD);var Ir={setEventEmitter(s,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Dx=function(s){if(s==null||typeof s!="object")return null;if(Rr(s))return s;if(s.scene&&Rr(s.scene))return s.scene;if(s.parent&&s.parent.scene&&Rr(s.parent.scene))return s.parent.scene},gD=Phaser.Utils.Objects.GetValue,Ae=class{constructor(t,i){this.parent=t,this.scene=Dx(t),this.isShutdown=!1,this.setEventEmitter(gD(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}};Object.assign(Ae.prototype,Ir);var mD=Phaser.Utils.Objects.GetValue,Ua=class extends Ae{constructor(t,i){super(t,i);this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(mD(i,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=xD[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}},xD={no:0,lazy:1,always:2},yD=Phaser.Utils.Objects.GetValue,Bx=class extends Ua{constructor(t,i){super(t,i);this.tickEventName=yD(i,"tickEventName","update")}startTicking(){super.startTicking(),this.scene.sys.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off(this.tickEventName,this.update,this)}},Un=Phaser.Utils.Objects.GetValue,Gx=Phaser.Math.Clamp,Ad=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Un(t,"state",Va),this.timeScale=Un(t,"timeScale",1),this.delay=Un(t,"delay",0),this.repeat=Un(t,"repeat",0),this.repeatCounter=Un(t,"repeatCounter",0),this.repeatDelay=Un(t,"repeatDelay",0),this.duration=Un(t,"duration",0),this.nowTime=Un(t,"nowTime",0),this.justRestart=Un(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?wr:Wa,this.repeatCounter=0,this}stop(){return this.state=Va,this}update(t,i){this.state===Va||this.state===ml||i===0||this.timeScale===0||(this.nowTime+=i*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=bx)):(this.nowTime=this.duration,this.state=ml):this.nowTime>=0&&(this.state=wr))}get t(){var t;switch(this.state){case Va:case Wa:case bx:t=0;break;case wr:t=this.nowTime/this.duration;break;case ml:t=1;break}return Gx(t,0,1)}set t(t){t=Gx(t,-1,1),t<0?(this.state=Wa,this.nowTime=-this.delay*t):(this.state=wr,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Va}get isDelay(){return this.state===Wa}get isCountDown(){return this.state===wr}get isRunning(){return this.state===Wa||this.state===wr}get isDone(){return this.state===ml}get isOddIteration(){return(this.repeatCounter&1)==1}get isEvenIteration(){return(this.repeatCounter&1)==0}},Va=0,Wa=1,wr=2,bx=3,ml=-1,Nx=class extends Bx{constructor(t,i){super(t,i);this.timer=new Ad}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}},Xa=Phaser.Utils.Objects.GetValue,Yx=Phaser.Utils.Objects.GetAdvancedValue,TD=Phaser.Tweens.Builders.GetEaseFunction,ls=class extends Nx{resetFromJSON(t){return this.timer.resetFromJSON(Xa(t,"timer")),this.setEnable(Xa(t,"enable",!0)),this.setTarget(Xa(t,"target",this.parent)),this.setDelay(Yx(t,"delay",0)),this.setDuration(Yx(t,"duration",1e3)),this.setEase(Xa(t,"ease","Linear")),this.setRepeat(Xa(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=TD(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var d=this.target,e=this.timer;return e.update(t,i),e.isDelay||this.updateGameObject(d,e),this.emit("update",d,this),e.isDone&&this.complete(),this}updateGameObject(t,i){}},zx=Phaser.Utils.Objects.GetValue,Ux=Phaser.Utils.Objects.GetAdvancedValue,CD=Phaser.Math.Linear,Rd=class extends ls{constructor(t,i,d){i.scene=t,i.active=!0,super(i,d),this.volume={},this.resetFromJSON(d)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(zx(t,"mode",0)),this.setEnable(zx(t,"enable",!0)),this.setVolumeRange(Ux(t,"volume.start",this.parent.volume),Ux(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=SD[t]),this.mode=t,this}setVolumeRange(t,i){return this.volume.start=t,this.volume.end=i,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,i){t.volume=CD(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}},SD={stop:1,destroy:2},Vx=function(s,t,i,d,e){d===void 0&&(d=1),e===void 0&&(e=0);var n={mode:0,volume:{start:e,end:d},duration:i};typeof t=="string"&&(t=s.sys.sound.add(t));var h;return t.hasOwnProperty("_fade")?(h=t._fade,h.stop().resetFromJSON(n)):(h=new Rd(s,t,n),t._fade=h),h.start(),t.isPlaying||t.setVolume(e).play(),t},Od=function(s,t,i,d){d===void 0&&(d=!0);var e={mode:d?2:1,volume:{start:t.volume,end:0},duration:i},n;return t.hasOwnProperty("_fade")?(n=t._fade,n.stop().resetFromJSON(e)):(n=new Rd(s,t,e),t._fade=n),n.start(),t.isPlaying||t.play(),t},Ld=Phaser.Utils.Objects.GetValue,Wx=Phaser.Utils.Array.Remove,Xx=class{constructor(t,i){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(Ld(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Ld(i,"bgm.fade",500));var d=Ld(i,"bgm.initial",void 0);d&&this.setCurrentBackgroundMusic(d)}destroy(t){if(this.soundEffects.length&&!t)for(var i=this.soundEffects.length-1;i>=0;i--)this.soundEffects[i].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var i=this.scene.sys.sound.add(t);return this.soundEffects.push(i),i.once("complete",function(){i.destroy(),!!this.scene&&Wx(this.soundEffects,i)},this).once("destroy",function(){!this.scene||Wx(this.soundEffects,i)},this).play(),this}setSoundEffectVolume(t){var i=this.getLastSoundEffect();return i&&i.setVolume(t),this}fadeInSoundEffect(t){var i=this.getLastSoundEffect();return i&&Vx(this.scene,i,t),this}fadeOutSoundEffect(t,i){var d=this.getLastSoundEffect();return d&&Od(this.scene,d,t,i),this}fadeOutAllSoundEffects(t,i){for(var d=this.soundEffects.length-1;d>=0;d--)Od(this.scene,this.soundEffects[d],t,i);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&Vx(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,i){return this.backgroundMusic&&Od(this.scene,this.backgroundMusic,t,i),this}crossFadeBackgroundMusic(t,i){var d=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(i,!0).playBackgroundMusic(t).fadeInBackgroundMusic(i),this.backgroundMusicFadeTime=d,this}},Fd=Phaser.Utils.Objects.GetValue,Hx=class extends Ua{constructor(t,i){super(t,i);this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=Fd(t,"isRunning",!1),this.timeScale=Fd(t,"timeScale",1),this.now=Fd(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}},Id=class extends Hx{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,i){return!this.isRunning||this.timeScale===0?this:(this.tick(i),this)}},ED=function(s,t){return t===void 0&&(t=.5),s<=t?s=s/t:s=1-(s-t)/(1-t),s},$x=Phaser.Math.Clamp,Kx=class{constructor(t,i){this.setTimeline(t).reset(i)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,i,d,e){return this.target=t,this.onStart=i,this.onProgress=d,this.onComplete=e,this}setDuration(t,i){return i===void 0&&(i=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=i,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=$x(t,0,1),this.yoyo&&(t=ED(t)),t}setProgress(t){t=$x(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var d=this.remainder<=0;return d&&this.runCallback(this.onComplete),d}},Zx=class extends Nn{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var i=0,d=t.length;i<d;i++)this.free(t[i]);return this}},PD=Phaser.Utils.Objects.GetValue,MD=new Zx,Jx=class extends Id{constructor(t,i){super(t,i);this.addedTimers=[],this.timers=[],this.timerPool=PD(i,"pool",MD)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(t):i=new Kx(this,t),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(t,i,d,e){var n=this.addTimer({duration:t,onComplete:function(h,r,o){d===void 0&&(d=[]),d.push(o),i.apply(e,d)}});return n}getTimers(t){for(var i=[],d=[this.addedTimers,this.timers],e=0,n=d.length;e<n;e++)for(var h=d[e],r=0,o=h.length;r<o;r++){var l=h[r];l.name===t&&i.push(l)}return i}update(t,i){super.update(t,i),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var d=[],e=0,n=this.timers.length;e<n;e++){var h=this.timers[e],r=h.update(this.now,this.delta);r?this.timerPool.free(h):d.push(h)}this.timers=d,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}},AD=Phaser.Utils.Objects.GetValue,RD=function(s,t){var i=AD(t,"sounds");return i!==!1&&(this.soundManager=new Xx(s,i)),this.gameObjectManagers={},this.timeline=new Jx(this),this.managersScene=s,this},OD=function(s){this.soundManager&&this.soundManager.destroy(s),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers.destroy(s),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0},LD={hasProperty(s){var t=this.gameObject;if(t.hasOwnProperty(s))return!0;var i=t[s];return i!==void 0},getProperty(s){return this.gameObject[s]},setProperty(s,t){return this.gameObject[s]=t,this},easeProperty(s,t,i,d,e,n,h){var r=this.tweens,o=r[s];o&&o.remove();var l=this.gameObject,a={targets:l,duration:i,ease:d,repeat:e,yoyo:n,onComplete:function(){r[s].remove(),r[s]=null,h&&h(l,s)},onCompleteScope:this};return a[s]=t,o=this.scene.tweens.add(a),o.timeScale=this.timeScale,r[s]=o,this}},FD={hasMethod(s){return typeof this.gameObject[s]=="function"},call(s,...t){if(!this.hasMethod(s))return this;var i=this.gameObject;return i[s].apply(i,t),this}},ID={hasData(s){var t=this.gameObject;return t.data?t.data.has(s):!1},getData(s){return this.gameObject.getData(s)},setData(s,t){return this.gameObject.setData(s,t),this}},xl=class{constructor(t,i,d){this.GOManager=t,this.tweens={},this.setGO(i,d)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,i;for(var d in t)i=t[d],i&&i.remove(),t[d]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,i){return t.setName(i),this.gameObject=t,this.name=i,this.freeTweens(),this}setTimeScale(t){var i=this.tweens;for(var d in i)i[d].timeScale=t;return this}};Object.assign(xl.prototype,LD,FD,ID);var wD=function(s){for(var t in s)return!1;return!0},DD={tint:0,alpha:1},BD={setGOFadeMode(s){return typeof s=="string"&&(s=DD[s]),this.fadeMode=s,this},setGOFadeTime(s){return this.fadeTime=s,this},hasTintFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&s.setTint!==void 0},hasAlphaFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&s.setAlpha!==void 0},fadeBob(s,t,i,d){var e=s.gameObject;return this.hasTintFadeEffect(e)?(t!==void 0&&s.setProperty("tintGray",255*t),s.easeProperty("tintGray",Math.floor(255*i),this.fadeTime,"Linear",0,!1,d)):this.hasAlphaFadeEffect(e)?(t!==void 0&&s.setProperty("alpha",t),s.easeProperty("alpha",i,this.fadeTime,"Linear",0,!1,d)):d&&d(e),this}},Qx=function(s){return s>>16&255},kx=function(s){return s>>8&255},jx=function(s){return s&255},GD=~(255<<16)&16777215,bD=~(255<<8)&16777215,ND=~255&16777215,YD=function(s,t){return(t&255)<<16|s&GD},zD=function(s,t){return(t&255)<<8|s&bD},UD=function(s,t){return t&255|s&ND},VD=function(s,t,i,d){return(t&255)<<16|(i&255)<<8|d&255},WD=function(s,t){if(s.hasOwnProperty("tintR"))return s;t===void 0&&(t=16777215);var i=Qx(t),d=kx(t),e=jx(t);return Object.defineProperty(s,"tint",{get:function(){return t},set:function(n){n=Math.floor(n)&16777215,s.setTint&&s.setTint(n),t!==n&&(t=n,i=Qx(t),d=kx(t),e=jx(t))}}),Object.defineProperty(s,"tintR",{get:function(){return i},set:function(n){n=Math.floor(n)&255,i!==n&&(i=n,s.tint=YD(t,n))}}),Object.defineProperty(s,"tintG",{get:function(){return d},set:function(n){n=Math.floor(n)&255,d!==n&&(d=n,s.tint=zD(t,n))}}),Object.defineProperty(s,"tintB",{get:function(){return e},set:function(n){n=Math.floor(n)&255,e!==n&&(e=n,s.tint=UD(t,n))}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((i+d+e)/3)},set:function(n){n=Math.floor(n)&255,(i!==n||d!==n||e!==n)&&(i=n,d=n,e=n,s.tint=VD(t,n,n,n))}}),s.tint=t,s},XD=Phaser.Events.EventEmitter,HD=function(s){if(s.events)return s;var t=new XD,i=s.x;Object.defineProperty(s,"x",{get:function(){return i},set:function(h){i!==h&&(i=h,t.emit("update",s))}});var d=s.y;Object.defineProperty(s,"y",{get:function(){return d},set:function(h){d!==h&&(d=h,t.emit("update",s))}});var e=s.width;Object.defineProperty(s,"width",{get:function(){return e},set:function(h){e!==h&&(e=h,t.emit("update",s))}});var n=s.height;return Object.defineProperty(s,"height",{get:function(){return n},set:function(h){n!==h&&(n=h,t.emit("update",s))}}),s.events=t,s},KD=function(s,t,i,d,e){if(s.hasOwnProperty("vp"))return s;i===void 0&&(i=.5),d===void 0&&(d=.5),e===void 0&&(e=$D),HD(t);var n=t.events;s.vp=t;var h=function(){e(s,t,i,d)};n.on("update",h),s.once("destroy",function(){n.off("update",h),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return i},set:function(r){i!==r&&(i=r,h())}}),Object.defineProperty(s,"vpy",{get:function(){return d},set:function(r){d!==r&&(d=r,h())}}),h()},$D=function(s,t,i,d){s.x=t.x+t.width*i,s.y=t.y+t.height*d},ZD=Phaser.Utils.Array.Remove,JD={has(s){return this.bobs.hasOwnProperty(s)},get(s){return this.bobs[s]},getGO(s){var t=this.get(s);return t?t.gameObject:null},addGO(s,t){this.remove(s,!0),this.hasTintFadeEffect(t)&&WD(t),this.viewportCoordinateEnable&&KD(t,this.viewport),t.once("destroy",function(){ZD(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var i=new this.BobClass(this,t,s);return this.bobs[s]=i,this},add(s,...t){var i=this.createGameObjectCallback,d=this.createGameObjectScope,e=i.call(d,this.scene,...t);this.addGO(s,e);var n=this.get(s);return this.fadeBob(n,0,1),this},forEachGO(s,t){for(var i in this.bobs){var d=this.bobs[i].gameObject,e;if(t?e=s.call(t,d,i,this):e=s(d,i,this),e)break}return this}},QD={remove(s,t){if(!this.has(s))return this;var i=this.get(s);return delete this.bobs[s],this.removedGOs.push(i.gameObject),t?i.destroy():this.fadeBob(i,void 0,0,function(){i.destroy()}),this},removeAll(){var s=this.bobs;for(var t in s)this.remove(t);return this},clear(s){s===void 0&&(s=!0);var t=this.bobs;for(var i in t)s&&t[i].destroy(),delete t[i];return this.removedGOs.length=0,this}},kD={hasProperty(s,t){return this.has(s)?this.get(s).hasProperty(t):!1},getProperty(s,t){if(!!this.has(s))return this.get(s).getProperty(t)},setProperty(s,t,i){return this.has(s)?(this.get(s).setProperty(t,i),this):this},easeProperty(s,t,i,d,e,n,h,r){return this.has(s)?(d===void 0&&(d=1e3),e===void 0&&(e="Linear"),n===void 0&&(n=0),h===void 0&&(h=!1),this.get(s).easeProperty(t,i,d,e,n,h,r),this):this},hasTweenTask(s,t){if(!this.has(s))return!1;var i=this.get(s).tweens;return i.hasOwnProperty(t)},getTweenTask(s,t){if(!this.has(s))return null;var i=this.get(s).tweens,d=i[t];return d||null}},jD={hasMethod(s,t){return this.has(s)?this.get(s).hasMethod(t):!1},call(s,t,...i){return this.has(s)?(this.get(s).call(t,...i),this):this}},qD={hasData(s,t){return this.has(s)?this.get(s).hasData(t):!1},getData(s,t){if(!!this.has(s))return this.get(s).getData(t)},setData(s,t,i){return this.has(s)?(this.get(s).setData(t,i),this):this}},_D=function(s,t){return this.forEachGO(function(i){i.drawBounds?i.drawBounds(s,t):Tx(i,s,t)}),this},qx={drawGameObjectsBounds:_D};Object.assign(qx,BD,JD,QD,kD,jD,qD);var tB=Phaser.Cameras.Scene2D.BaseCamera,eB=function(s){return s instanceof tB},_x=Phaser.Geom.Rectangle,Hs=function(s,t,i){eB(t)||(i=t,t=void 0),i===void 0?i=new _x:i===!0&&(i=iB);var d=s.sys.scale,e=d.baseSize,n=d.parentSize,h=d.canvasBounds,r=d.displayScale,o=h.x>=0?0:-(h.x*r.x),l=h.y>=0?0:-(h.y*r.y),a;n.width>=h.width?a=e.width:a=e.width-(h.width-n.width)*r.x;var u;if(n.height>=h.height?u=e.height:u=e.height-(h.height-n.height)*r.y,i.setTo(o,l,a,u),t){var c=t.scrollX,f=t.scrollY,v=1/t.zoomX,p=1/t.zoomY;i.width*=v,i.height*=p,i.centerX=t.centerX+c,i.centerY=t.centerY+f}return i},iB=new _x,vn=Phaser.Utils.Objects.GetValue,Ha=class{constructor(t,i){this.scene=t,this.BobClass=vn(i,"BobClass",xl),this.setCreateGameObjectCallback(vn(i,"createGameObject"),vn(i,"createGameObjectScope")),this.setEventEmitter(vn(i,"eventEmitter",void 0));var d=vn(i,"fade",500);typeof d=="number"?(this.setGOFadeMode(),this.setGOFadeTime(d)):(this.setGOFadeMode(vn(d,"mode")),this.setGOFadeTime(vn(d,"time",500)));var e=vn(i,"viewportCoordinate",!1);e!==!1?(this.setViewportCoordinateEnable(vn(i,"enable",!0)),this.setViewport(vn(e,"viewport"))):this.setViewportCoordinateEnable(!1),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var i=this.bobs;for(var d in i)i[d].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,i){return this.createGameObjectCallback=t,this.createGameObjectScope=i,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=Hs(this.scene,this.scene.cameras.main)),this.viewport=t,this}get isEmpty(){return wD(this.bobs)&&this.removedGOs.length===0}};Object.assign(Ha.prototype,Ir,qx);var nB={addGameObjectManager(s,t){s===void 0&&(s={}),t===void 0&&(t=Ha),s.createGameObjectScope||(s.createGameObjectScope=this);var i=new t(this.managersScene,s);return this.gameObjectManagers[s.name]=i,this},getGameObjectManager(s){return this.gameObjectManagers[s]},getGameObjectManagerNames(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s}},sB={createGameObject(s,t,...i){return this.getGameObjectManager(s).add(t,...i),this},destroyGameObject(s,t){var i=this.getGameObjectManager(s);return t===void 0?i.removeAll():i.remove(t),this},callGameObjectMethod(s,t,i,...d){return this.getGameObjectManager(s).call(t,i,...d),this},setGameObjectProperty(s,t,i,d){return this.getGameObjectManager(s).setProperty(t,i,d),this},easeGameObjectProperty(s,t,i,d,e,n,h,r){return this.getGameObjectManager(s).easeProperty(t,i,d,e,n,h,r),this},getGameObject(s,t,i){var d=this.getGameObjectManager(s);if(typeof t=="string")return d.getGO(t);var e=t;e===void 0&&(e=d.bobs),i===void 0&&(i={});for(t in e)i[t]=d.getGO(t);return i},addGameObject(s,t,i){var d=this.getGameObjectManager(s);if(typeof t=="string")d.addGO(t,i);else{var e=t;for(t in e)d.addGO(t,e[t])}return this},drawGameObjectsBounds(s,t,i){s instanceof Phaser.GameObjects.Graphics&&(i=t,t=s,s=void 0),s===void 0&&(s=this.getGameObjectManagerNames()),Array.isArray(s)||(s=[s]);for(var d=0,e=s.length;d<e;d++)this.getGameObjectManager(s[d]).drawGameObjectsBounds(t,i);return this}},rB=function(s){class t extends s{}var i={initManagers:RD,destroyManagers:OD};return Object.assign(t.prototype,i,nB,sB),t},Dr=function(s){return s.replace(aB,"\\$&").replace(oB,"\\x2d")},aB=/[|\\{}()[\]^$+*?.]/g,oB=/-/g,hB=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,ty=function(s){return typeof s!="string"||(s===""?s=null:hB.test(s)?s=parseFloat(s):s==="false"?s=!1:s==="true"&&(s=!0)),s},lB=function(s,t){if(s==null)return[];for(var i=s.split(","),d=0,e=i.length;d<e;d++)i[d]=t(i[d]);return i},uB="[!$a-z0-9-_.]+",fB="[ !$a-z0-9-_.#,|&]+",dB=function(s){return s},wd=class{constructor(t){this.setEventEmitter(ii(t,"eventEmitter",void 0)),this.setTagExpression(ii(t,"regex.tag",uB)),this.setValueExpression(ii(t,"regex.value",fB)),this.setValueConverter(ii(t,"valueConvert",!0));var i=ii(t,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.setLoopEnable(ii(t,"loop",!1)),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return t===!0?t=ty:t||(t=dB),this.valueConverter=t,this}setDelimiters(t,i){i===void 0&&(i=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=i,t=Dr(t),i=Dr(i);var d=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${i}`,e=`${t}/(${this.tagExpression})${i}`;return this.reTagOn=RegExp(d,"i"),this.reTagOff=RegExp(e,"i"),this.reSplit=RegExp(`${d}|${e}`,"gi"),this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,i=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var d=this.reSplit.exec(t);if(!d){if(this.progressIndex<i&&(this.onContent(t.substring(this.progressIndex,i)),this.isPaused)){this.progressIndex=i;break}this.onComplete(),this.isRunning=!1;return}var e=d[0],n=this.reSplit.lastIndex,h=n-e.length;if(this.progressIndex<h&&(this.onContent(t.substring(this.progressIndex,h)),this.isPaused)){this.progressIndex=h;break}if(this.reTagOff.test(e)?this.onTagEnd(e):this.onTagStart(e),this.progressIndex=n,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,i){return this.isPaused?this:(this.pause(),t.once(i,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTagStart(t){var i=t.match(this.reTagOn),d=i[1],e=lB(i[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${d}`,...e),this.skipEventFlag||this.emit("+",d,...e),this.lastTagStart=d}onTagEnd(t){var i=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${i}`),this.skipEventFlag||this.emit("-",i),this.lastTagEnd=i}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}getTagOnRegString(t,i){return t===void 0&&(t=this.tagExpression),i===void 0&&(i=this.valueExpression),`${Dr(this.delimiterLeft)}(${t})(=(${i}))?${Dr(this.delimiterRight)}`}getTagOffRegString(t){return t===void 0&&(t=this.tagExpression),`${Dr(this.delimiterLeft)}/(${t})${Dr(this.delimiterRight)}`}};Object.assign(wd.prototype,Ir);var vB=function(s,t,i){var d="color",e;t.on("start",function(){e=s.textStyle.color}).on(`+${d}`,function(n){s.textStyle.setColor(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setColor(e),t.skipEvent()}).on("complete",function(){s.textStyle.setColor(e)})},cB=function(s,t,i){var d="stroke",e;t.on("start",function(){e=s.textStyle.stroke,s.textStyle.setStrokeStyle(null)}).on(`+${d}`,function(n){n===void 0&&(n=e),s.textStyle.setStrokeStyle(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){s.textStyle.setStrokeStyle(e)})},pB=function(s,t,i){var d="b";t.on("start",function(){s.textStyle.setBold(!1)}).on(`+${d}`,function(){s.textStyle.setBold(!0),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setBold(!1),t.skipEvent()})},gB=function(s,t,i){var d="i";t.on("start",function(){s.textStyle.setItalic(!1)}).on(`+${d}`,function(){s.textStyle.setItalic(!0),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setItalic(!1),t.skipEvent()})},mB=function(s,t,i){var d="size",e;t.on("start",function(){e=s.textStyle.fontSize}).on(`+${d}`,function(n){s.textStyle.setFontSize(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setFontSize(e),t.skipEvent()}).on("complete",function(){s.textStyle.setFontSize(e)})},xB=function(s,t,i){var d="y",e;t.on("start",function(){e=s.textStyle.offsetY,s.textStyle.setOffsetY(0)}).on(`+${d}`,function(n){n===void 0&&(n=e),s.textStyle.setOffsetY(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetY(0)})},yB=function(s,t,i){var d="x",e;t.on("start",function(){e=s.textStyle.offsetY,s.textStyle.setOffsetX(0)}).on(`+${d}`,function(n){n===void 0&&(n=e),s.textStyle.setOffsetX(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetX(0)})},TB=function(s,t,i){var d="left",e;t.on("start",function(){e=s.textStyle.leftSpace,s.textStyle.setLeftSpace(0)}).on(`+${d}`,function(n){n===void 0&&(n=e),s.textStyle.setLeftSpace(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setLeftSpace(0)})},CB=function(s,t,i){var d="right",e;t.on("start",function(){e=s.textStyle.rightSpace,s.textStyle.setRightSpace(0)}).on(`+${d}`,function(n){n===void 0&&(n=e),s.textStyle.setRightSpace(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setRightSpace(0)})},SB=function(s,t,i){var d="shadow",e;t.on("start",function(){e=s.textStyle.shadowColor,s.textStyle.setShadowColor(null)}).on(`+${d}`,function(n){n===void 0&&(n=e),s.textStyle.setShadowColor(n),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){s.textStyle.setShadowColor(e)})},EB=function(s,t,i){var d="align";t.on(`+${d}`,function(e){s.textStyle.setAlign(e),t.skipEvent()}).on(`-${d}`,function(){s.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){s.textStyle.setAlign()})},PB=function(s,t,i){var d="img";t.on(`+${d}`,function(e){var n=s.imageManager.get(e);Rx.call(s,n.key,n.frame,{width:n.width,hieght:n.height,leftSpace:n.left,rightSpace:n.right}),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},MB=function(s,t,i){var d="speed";t.on(`+${d}`,function(e){ey(s,e),t.skipEvent()}).on(`-${d}`,function(){ey(s,void 0),t.skipEvent()})},AB=function(s){this.typeWriter.setTypingSpeed(s)},ey=function(s,t){Wt.call(s,"speed",AB,t,s)},OB=function(s,t,i){var d="se";t.on(`+${d}`,function(e,n){Wt.call(s,"se",RB,[e,n],s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},RB=function(s){if(!this.skipSoundEffect){var t=s[0],i=s[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}},FB=function(s,t,i){var d="se.fadein";t.on(`+${d}`,function(e){Wt.call(s,"se.fadein",LB,e,s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},LB=function(s){this.soundManager.fadeInSoundEffect(s)},wB=function(s,t,i){var d="se.fadeout";t.on(`+${d}`,function(e,n){n=n==="stop",Wt.call(s,"se.fadeout",IB,[e,n],s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},IB=function(s){this.soundManager.fadeOutSoundEffect(...s)},BB=function(s,t,i){var d="se.volume";t.on(`+${d}`,function(e){Wt.call(s,"se.volume",DB,e,s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},DB=function(s){this.soundManager.setSoundEffectVolume(s)},NB=function(s,t,i){var d="bgm";t.on(`+${d}`,function(e,n){Wt.call(s,"bgm",GB,[e,n],s),t.skipEvent()}).on(`-${d}`,function(){Wt.call(s,"bgm.stop",bB,void 0,s),t.skipEvent()})},GB=function(s){var t=s[0],i=s[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},bB=function(){this.soundManager.stopBackgroundMusic()},zB=function(s,t,i){var d="bgm.fadein";t.on(`+${d}`,function(e){Wt.call(s,"bgm.fadein",YB,e,s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},YB=function(s){this.soundManager.fadeInBackgroundMusic(s)},VB=function(s,t,i){var d="bgm.fadeout";t.on(`+${d}`,function(e,n){n=n==="stop",Wt.call(s,"bgm.fadeout",UB,[e,n],s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},UB=function(s){this.soundManager.fadeOutBackgroundMusic(...s)},XB=function(s,t,i){var d="bgm.cross";t.on(`+${d}`,function(e,n){Wt.call(s,"bgm.cross",WB,[e,n],s),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},WB=function(s){this.soundManager.crossFadeBackgroundMusic(...s)},L9=Phaser.Utils.Objects.GetValue,KB=function(s,t,i){var d="bgm.pause";t.on(`+${d}`,function(){Wt.call(s,"bgm.pause",HB,void 0,s),t.skipEvent()}).on(`-${d}`,function(){Wt.call(s,"bgm.resume",$B,void 0,s),t.skipEvent()})},HB=function(){this.soundManager.pauseBackgroundMusic()},$B=function(){this.soundManager.resumeBackgroundMusic()},JB=function(s,t,i){var d="camera.fadein";t.on(`+${d}`,function(e,n,h,r){Wt.call(s,"camera.fadein",ZB,[e,n,h,r],s),t.skipEvent()})},ZB=function(s){this.camera.fadeIn(...s)},kB=function(s,t,i){var d="camera.fadeout";t.on(`+${d}`,function(e,n,h,r){Wt.call(s,"camera.fadeout",QB,[e,n,h,r],s),t.skipEvent()})},QB=function(s){this.camera.fadeOut(...s)},qB=function(s,t,i){var d="camera.shake";t.on(`+${d}`,function(e,n){Wt.call(s,"camera.shake",jB,[e,n],s),t.skipEvent()})},jB=function(s){this.camera.shake(...s)},tG=function(s,t,i){var d="camera.flash";t.on(`+${d}`,function(e,n,h,r){Wt.call(s,"camera.flash",_B,[e,n,h,r],s),t.skipEvent()})},_B=function(s){this.camera.flash(...s)},nG=function(s,t,i){var d="camera.zoom";t.on(`+${d}`,function(e){Wt.call(s,"camera.zoom",eG,e,s),t.skipEvent()}).on(`+${d}.to`,function(e,n,h){Wt.call(s,"camera.zoom.to",iG,[e,n,h],s),t.skipEvent()})},eG=function(s){this.camera.setZoom(s)},iG=function(s){this.camera.zoomTo(...s)},iy=Phaser.Math.DegToRad,aG=function(s,t,i){var d="camera.rotate";t.on(`+${d}`,function(e){e=iy(e),Wt.call(s,"camera.rotate",sG,e,s),t.skipEvent()}).on(`+${d}.to`,function(e,n,h){e=iy(e),Wt.call(s,"camera.rotate.to",rG,[e,n,h],s),t.skipEvent()})},sG=function(s){this.camera.setRotation(s)},rG=function(s){var t=s[0],i=s[1],d=s[2];this.camera.rotateTo(t,!1,i,d)},lG=function(s,t,i){var d="camera.scroll";t.on(`+${d}`,function(e,n){Wt.call(s,"camera.scroll",oG,[e,n],s),t.skipEvent()}).on(`+${d}.to`,function(e,n,h,r){Wt.call(s,"camera.scroll.to",hG,[e,n,h,r],s),t.skipEvent()})},oG=function(s){this.camera.setScroll(...s)},hG=function(s){var t=s[0],i=s[1],d=s[2],e=s[3],n=this.camera,h=n.scrollX,r=n.scrollY;n.setScroll(t,i),t+=n.centerX,i+=n.centerY,n.setScroll(h,r),n.pan(t,i,d,e)},uG=function(s,t,i){var d="wait",e="click";t.on(`+${d}`,function(n){ny(s,n),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()}).on(`+${e}`,function(){ny(s,"click"),t.skipEvent()}).on(`-${e}`,function(){t.skipEvent()})},fG=function(s){this.typeWriter.wait(s)},ny=function(s,t){Wt.call(s,"wait",fG,t,s)},dG=function(s,t,i){var d="r";t.on(`+${d}`,function(){gl.call(s,`
`),t.skipEvent()}).on(`-${d}`,function(){t.skipEvent()})},vG=function(s,t,i){var d="content.off";t.on(`+${d}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},cG=function(s,t,i){var d="content.on";t.on(`+${d}`,function(){t.setContentOutputEnable(),t.skipEvent()})},pG=function(s,t,i){t.on("content",function(d){if(t.contentOutputEnable)gl.call(s,d);else{var e=`+${t.lastTagStart}`;s.emit(`parser.${e}#content`,t,d)}})},gG=function(s,t,i){t.on("start",function(){s.emit("parser.start",t)}).on("+",function(d,...e){if(!t.skipEventFlag){var n=`+${d}`,h=e;s.emit(`parser.${n}`,t,...e,h),sy(s,n,h)}}).on("-",function(d){if(!t.skipEventFlag){var e=`-${d}`,n=[];s.emit(`parser.${e}`,t,n),sy(s,e,n)}}).on("complete",function(){s.emit("parser.complete",t)})},mG=function(s,t){var i=`tag.${t}`;s==null?this.emit(i):this.emit(i,...s)},sy=function(s,t,i){Wt.call(s,t,mG,i,s)},ry=[vB,cB,pB,gB,mB,SB,EB,xB,yB,TB,CB,PB,MB,OB,FB,wB,BB,NB,zB,VB,XB,KB,JB,kB,qB,tG,nG,aG,lG,uG,dG,vG,cG,pG,gG],xG=function(s,t,i){for(var d=0,e=ry.length;d<e;d++)ry[d](s,t,i)},yG=function(s,t){for(var i=s.commentLineStart,d=t.split(`
`),e=0,n=d.length;e<n;e++){var h=d[e];h===""||(h.trim().length===0||i&&h.startsWith(i))&&(d[e]="")}return d.join("")},TG=Phaser.Utils.Objects.GetValue,ay=class extends wd{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),xG(t,this,i),this.setCommentLineStartSymbol(TG(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(yG(this,t)),this}},CG={setDefaultTypingSpeed(s){return this.defaultSpeed=s,this},setTypingSpeed(s){return s===void 0&&(s=this.defaultSpeed),this.speed=s,this}},yl=function(s,t){return new Promise(function(i,d){s.once(t,function(){i()})})},Re=function(s){return yl(s,"complete")},SG=function(s){return this.children=s,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(s),this.typing(),Re(this)},EG="delay",oy="anim",hy=function(s){s===void 0&&(s=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(hs(i)){var d=this.animationConfig;if(d.duration>0){var e=this.timeline.addTimer({name:oy,target:i,duration:d.duration,yoyo:d.yoyo,onStart:d.onStart,onProgress:d.onProgress,onComplete:d.onComplete});this.skipTypingAnimation&&e.seek(1)}else d.onStart&&d.onStart(i,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",i);var n=this.nextChild;if(n&&!(this.skipSpaceEnable&&Jw(n))){if(t+=this.speed+s,s=0,t>0){this.typingTimer=this.timeline.addTimer({name:EG,target:this,duration:t,onComplete:function(h,r,o){h.typingTimer=void 0,hy.call(h,o.remainder)}});break}}}else Qw(i)&&i.exec()}this.inTypingProcessLoop=!1},PG=function(){return this.timeline.pause(),this},MG=function(){return this.timeline.resume(),this},AG=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},RG=function(s){return this.isTypingPaused?(s===void 0&&(s=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=s):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(s)),this):this},tn="_remove.wait",Dd="_remove.play",ly=[tn,Dd],us=function(s,t,i,d,e){return function(){s.emit(tn,e),t.apply(d,i)}},uy=function(s,t,i,d,e){var n=us(s,i,d,e,"custom"),h=t?`wait.${t}`:"wait";s.emit(h,n)},OG=function(s,t,i,d,e){var n=us(s,i,d,e,"time"),h;s.once(tn,function(){h&&(h.remove(),h=void 0)}),h=s.timeline.delayCall(t,n),s.emit("wait.time",t)},LG=function(s,t,i,d){var e=s.clickEE;if(!!e){var n=us(s,t,i,d,"click");s.once(tn,function(){e.off("pointerdown",n,s)}),e.once("pointerdown",n,s),s.emit("wait.click")}},fy=function(s,t,i,d,e){var n=us(s,i,d,e,"music");t&&(s.once(tn,function(){t.off("complete",n,s)}),t.once("complete",n,s)),s.emit("wait.music",t),t||n()},FG=function(s){switch(s){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},IG=function(s,t,i,d,e){var n=us(s,i,d,e,`camera.${t}`),h=s.camera,r,o;switch(t){case"camera.fadein":r=h.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":r=h.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":r=h.flashEffect,o="cameraflashcomplete";break;case"camera.shake":r=h.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":r=h.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":r=h.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":r=h.panEffect,o="camerapancomplete";break}r.isRunning?(s.once(tn,function(l){h.off(o,n,s)}),h.once(o,n,s),s.emit("wait.camera",t)):(s.emit("wait.camera",t),n())},wG=function(s,t,i,d,e){var n=us(s,i,d,e,"keydown"),h=`keydown-${t.toUpperCase()}`,r=s.scene.input.keyboard;s.once(tn,function(){r.off(h,n,s)}),r.once(h,n,s),s.emit("wait.keydown",t)},DG=function(s,t){var i=t.split(".");return s.gameObjectManagers.hasOwnProperty(i[0])},BG=function(s,t,i,d,e){var n=us(s,i,d,e),h=t.split("."),r=h[0],o=s.getGameObjectManager(r),l=`wait.${r}`;switch(h.length){case 1:o.isEmpty?(s.emit(l),n()):(s.once(tn,function(C){o.off("empty",n,s)}),o.once("empty",n,s),s.emit(l));return;case 2:var a=h[1];if(!o.has(a))s.emit(l,a),n();else{var u=o.get(a),c=u.gameObject;s.once(tn,function(){c.off("destroy",n,s)}),c.once("destroy",n,s),s.emit(l,a)}return;case 3:var a=h[1],f=h[2],v=o.getProperty(a,f);if(typeof v=="number"){var p=o.getTweenTask(a,f);p?(s.once(tn,function(){p.off("complete",n,s)}),p.once("complete",n,s),s.emit(l,a,f)):(s.emit(l,a,f),n());return}var g=f,m=g.startsWith("!");if(m&&(g=g.substring(1)),o.hasData(a,g)){var c=o.getGO(a),x=c.getData(g),y=!m;if(x===y)s.emit(l,a,f),n();else{var T=`changedata-${g}`,i=function(E,M,R){M=!!M,M===y&&n.call(s)};s.once(tn,function(){c.off(T,i)}),c.on(T,i),s.emit(l,a,f)}return}}},GG=Phaser.Input.Keyboard.KeyCodes,dy=function(s,t,i,d,e){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var n=0,h=t.length;n<h;n++){var r=t[n];if(r==null||r==="wait")uy(s,void 0,i,d,e);else if(typeof r=="number"||!isNaN(r))OG(s,parseFloat(r),i,d,e);else if(r==="click")LG(s,i,d,e);else if(r==="se"){var o=s.soundManager.getLastSoundEffect();fy(s,o,i,d,e)}else if(r==="bgm"){var o=s.soundManager.getBackgroundMusic();fy(s,o,i,d,e)}else GG.hasOwnProperty(r.toUpperCase())?wG(s,r,i,d,e):FG(r)?IG(s,r,i,d,e):DG(s,r)?BG(s,r,i,d,e):uy(s,r,i,d,e)}},bG=function(s){return this.ignoreWait?this:(this.pauseTyping(),dy(this.textPlayer,s,this.resumeTyping,[],this),this)},NG=function(s){return s===void 0&&(s=!0),this.ignoreWait=s,this},YG=function(s){return s===void 0&&(s=!0),this.skipSpaceEnable=s,this},zG=function(s){if(s===void 0&&(s=!0),this.skipTypingAnimation=s,s)for(var t=this.timeline.getTimers(oy),i=0,d=t.length;i<d;i++)t[i].seek(1);return this},UG=function(s){if(s===void 0&&(s=!0),this.skipSoundEffect=s,s){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},VG=function(){return this.typingTimer&&this.typingTimer.seek(1),this},vy={start:SG,typing:hy,pause:PG,resume:MG,pauseTyping:AG,resumeTyping:RG,wait:bG,setIgnoreWait:NG,setSkipSpaceEnable:YG,setSkipTypingAnimation:zG,setSkipSoundEffect:UG,skipCurrentTypingDelay:VG};Object.assign(vy,CG);var $a=Phaser.Utils.Objects.GetValue,Bd=class{constructor(t,i){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback($a(i,"onTypingStart",XG)),this.setDefaultTypingSpeed($a(i,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable($a(i,"skipSpace",!1)),this.setAnimationConfig($a(i,"animation",void 0)),this.setMinSizeEnable($a(i,"minSizeEnable",!1))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=WG),this.animationConfig=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}},WG=function(s){s.setVisible&&s.setVisible()},XG=function(s){for(var t=0,i=s.length;t<i;t++){var d=s[t];d.setVisible&&d.setVisible(!1)}};Object.assign(Bd.prototype,Ir,vy);var cy=class extends xl{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}},HG={playAnimation(s,t){return this.has(s)||this.add(s),this.get(s).playAnimation(t),this},stopAnimation(s){return this.has(s)?(this.get(s).stopAnimation(),this):this},chainAnimation(s,t){return this.has(s)?(this.get(s).chainAnimation(t),this):this},pauseAnimation(s){return this.has(s)?(this.get(s).pauseAnimation(),this):this}},py={};Object.assign(py,HG);var Gd=class extends Ha{constructor(t,i){i===void 0&&(i={}),i.BobClass=cy,super(t,i)}setCreateGameObjectCallback(t,i){return!t||t==="sprite"?t=$G:t==="image"&&(t=KG),super.setCreateGameObjectCallback(t,i),this}},$G=function(s,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),s.add.sprite(0,0,t,i)},KG=function(s,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),s.add.image(0,0,t,i)};Object.assign(Gd.prototype,py);var gy=function(s,t){return s.length===3&&s[0]===t&&s[2]==="play"},ZG=function(s,t){return s.length===3&&s[0]===t&&s[2]==="stop"},QG=function(s,t,i){var d=i.name;t.on("+",function(e,...n){if(!t.skipEventFlag){var h=e.split("."),r;if(gy(h,d))r=h[1];else return;Wt.call(s,`${d}.play`,JG,[d,r,n],s),t.skipEvent()}}).on("+",function(e){if(!t.skipEventFlag){var n=e.split("."),h;if(ZG(n,d))h=n[1];else return;Wt.call(s,`${d}.stop`,my,[d,h],s),t.skipEvent()}}).on("-",function(e){if(!t.skipEventFlag){var n=e.split("."),h;if(gy(n,d))h=n[1];else return;Wt.call(s,`${d}.stop`,my,[d,h],s),t.skipEvent()}})},JG=function(s){var t,i,d;[t,i,d]=s;var e=d.shift(),n=this.getGameObjectManager(t);n.playAnimation(i,e),d.length>0&&n.chainAnimation(i,d)},my=function(s){var t,i;[t,...i]=s;var d=this.getGameObjectManager(t);d.stopAnimation(...i)},kG=function(s,t){return s.length===3&&s[0]===t&&s[2]==="pause"},qG=function(s,t,i){var d=i.name;t.on("+",function(e){if(!t.skipEventFlag){var n=e.split("."),h;if(kG(n,d))h=n[1];else return;Wt.call(s,`${d}.pause`,jG,[d,h],s),t.skipEvent()}})},jG=function(s){var t,i;[t,...i]=s;var d=this.getGameObjectManager(t);d.pauseAnimation(...i)},_G=function(s,t){return s.length===3&&s[0]===t&&s[2]==="chain"},eb=function(s,t,i){var d=i.name;t.on("+",function(e){if(!t.skipEventFlag){var n=e.split("."),h;if(_G(n,d))h=n[1];else return;var r=Array.prototype.slice.call(arguments,1);Wt.call(s,`${d}.chain`,tb,[d,h,r],s),t.skipEvent()}})},tb=function(s){var t,i;[t,...i]=s;var d=this.getGameObjectManager(t);d.chainAnimation(...i)},ib=[QG,qG,eb],nb=function(s){s===void 0&&(s={}),s.name="sprite",s.parseCallbacks=ib,this.addGameObjectManager(s,Gd)},xy=function(s,t){return s.length===2&&s[0]===t},ab=function(s,t,i){var d=i.name;t.on("+",function(e,...n){if(!t.skipEventFlag){var h=e.split("."),r;if(xy(h,d))r=h[1];else return;Wt.call(s,`${d}.add`,sb,[d,r,...n],s),t.skipEvent()}}).on("-",function(e){if(!t.skipEventFlag){var n=e.split("."),h;if(xy(n,d))h=n[1];else return;Wt.call(s,`${d}.remove`,rb,[d,h],s),t.skipEvent()}})},sb=function(s){var t,i;[t,...i]=s;var d=this.getGameObjectManager(t);d.add(...i)},rb=function(s){var t,i;[t,...i]=s;var d=this.getGameObjectManager(t);d.remove(...i)},hb=function(s,t,i){var d=i.name;t.on("-",function(e){t.skipEventFlag||e===d&&(Wt.call(s,`${d}.removeall`,ob,d,s),t.skipEvent())})},ob=function(s){var t=this.getGameObjectManager(s);t.removeAll()},lb=function(s,t){return s.length===3&&s[0]===t},fb=function(s,t,i){var d=i.name;t.on("+",function(e,...n){if(!t.skipEventFlag){var h=e.split("."),r,o;if(lb(h,d))r=h[1],o=h[2];else return;Wt.call(s,`${d}.call`,ub,[d,r,o,...n],s),t.skipEvent()}})},ub=function(s){var t,i,d,e;[t,i,d,...e]=s;var n=`${t}.${d}`;if(this.emit(n,i,...e),!(this.listenerCount(n)>0)){var h=this.getGameObjectManager(t);h.hasMethod(i,d)?h.call(i,d,...e):h.setProperty(i,d,e[0])}},db={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},vb=function(s,t){return s.length===4&&s[0]===t&&db[s[3]]},pb=function(s,t,i){var d=i.name,e=s.getGameObjectManager(d);t.on("+",function(n,h,r,o,l){if(!t.skipEventFlag){var a=n.split("."),u,c,f;if(vb(a,d))u=a[1],c=a[2],f=a[3];else return;typeof o=="number"&&(l=o,o=void 0),Wt.call(s,`${d}.ease`,cb,[d,u,c,h,r,o,l,f],s),t.skipEvent()}})},cb=function(s){var t,i,d,e,n,h,r,o;[t,i,d,e,n,h,r,o]=s;var l=this.getGameObjectManager(t),a=l.getProperty(i,d);if(typeof a=="number"){o.endsWith("Left")||o.endsWith("Up")?o.startsWith("to")||o.startsWith("yoyo")?e=a-e:o.startsWith("from")&&(l.setProperty(i,d,a-e),e=a):o.endsWith("Right")||o.endsWith("Down")?o.startsWith("to")||o.startsWith("yoyo")?e=a+e:o.startsWith("from")&&(l.setProperty(i,d,a+e),e=a):o==="from"&&(l.setProperty(i,d,e),e=a);var u=o.startsWith("yoyo");l.easeProperty(i,d,e,n,h,r,u)}},yy=[ab,hb,fb,pb],gb={addGameObjectManager(s,t){s===void 0&&(s={});var i=s.name;i||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),this.__proto__.__proto__.addGameObjectManager.call(this,s,t),t===void 0&&(t=Ha);var d=s.parseCallbacks;d?d=[...d,...yy]:d=yy;for(var e=0,n=d.length;e<n;e++)d[e](this,this.parser,s);return this}},mb=function(s){return this.clickTarget=s,s?Rr(s)?this.clickEE=s.input:this.clickEE=s.setInteractive():this.clickEE=null,this},xb=function(s){return this.camera=s,this},yb=function(s){var t=this;s?typeof s=="function"?this.nextPageInput=function(i,d,e){var n=us(t,i,d,e);s.call(t,n)}:this.nextPageInput=function(i,d,e){dy(t,s,i,d,e)}:this.nextPageInput=null},Tb=function(s,t){return this.imageManager.add(s,t),this},Cb={play(s){return this.isPlaying?this:(this.removeChildren(),this.parser.start(s),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(s){var t=Re(this);return this.play(s),t}},Sb=Phaser.Utils.Objects.GetValue,bd=function(){if(!this.isPlaying||this.isPageTyping)return this;var s=Sb(this.wrapConfig,"callback",this.runWordWrap);typeof s=="string"&&(s=this[s]);var t=s.call(this,this.lastWrapResult);this.lastWrapResult=t,this.emit("page.start");var i=function(){this.emit(Dd),t.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?bd.call(this):this.nextPageInput&&this.nextPageInput(bd,[],this))};this.once(Dd,function(){this.typeWriter.off("complete",i,this)}),this.typeWriter.once("complete",i,this).start(t.children)},Eb={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},Pb={resume(){return this.timeline.resume(),this},resumeTyping(s){return this.typeWriter.resumeTyping(s),this}},Mb=function(s){return this.typeWriter.wait(s),this},Ab={setDefaultTypingSpeed(s){return this.defaultTypingSpeed=s,this},setTypingSpeed(s){return this.typingSpeed=s,this}},Rb=function(s){return this.timeScale=s,this},Ob=function(s){return this.typeWriter.setIgnoreWait(s),this},Lb=function(s){return s===void 0&&(s=!0),this.ignoreNextPageInput=s,this},Fb=function(){if(!this.isPlaying||!this.isPageTyping)return this;var s=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,d=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(s).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(d)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},Ib={getSprite(s){return this.getGameObject("sprite",s)},addSprite(s,t){return this.addGameObject("sprite",s,t),this}},wb={setContentOutputEnable(s){return this.parser.setContentOutputEnable(s),this},setContentCallback(s,t){return this.contentCallback=s,this.contentCallbackScope=t,this}},Ty={setClickTarget:mb,setTargetCamera:xb,setNextPageInput:yb,addImage:Tb,typingNextPage:bd,wait:Mb,setTimeScale:Rb,setIgnoreWait:Ob,setIgnoreNextPageInput:Lb,showPage:Fb};Object.assign(Ty,gb,Cb,Eb,Pb,Ab,Ib,wb);var Db=function(s){for(var t=0,i=ly.length;t<i;t++)s.emit(ly[t])},Cy=Phaser.Utils.Objects.IsPlainObject,fs=Phaser.Utils.Objects.GetValue,Ka=class extends rB(Xs){constructor(t,i,d,e,n,h){Cy(i)?h=i:Cy(e)&&(h=e),h===void 0&&(h={});var r=h.text;delete h.text,super(t,i,d,e,n,h),this.type="rexTextPlayer",this.parser=new ay(this,fs(h,"parser",void 0)),this.typeWriter=new Bd(this,fs(h,"typing",void 0)),this._imageManager=void 0;var o=fs(h,"images",void 0);o&&this.addImage(o),this.setTargetCamera(fs(h,"camera",this.scene.sys.cameras.main)),this.initManagers(t,h);var l=fs(h,"sprites");l!==!1&&l!==null&&nb.call(this,l),this.setIgnoreNextPageInput(fs(h,"ignoreNextPageInput",!1)),this.setClickTarget(fs(h,"clickTarget",this)),this.setNextPageInput(fs(h,"nextPageInput",null)),this.isPlaying=!1,r&&this.play(r)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new el(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||(Db(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.camera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.timeline.timeScale=t,this._spriteManager!==void 0&&this._spriteManager.setTimeScale(t)}get timeScale(){return this.timeline.timeScale}};Object.assign(Ka.prototype,Ty);var Nd=function(s,t,i,d,e,n,h,r,o,l,a,u){l===void 0&&(l=0),a===void 0&&(a=2*Math.PI),u===void 0&&(u=!1),t.beginPath(),t.ellipse(i,d,e,n,0,l,a,u),h!=null&&(t.fillStyle=h,t.fill()),r!=null&&(t.strokeStyle=r,t.lineWidth=o,t.stroke())},Bb=function(s,t,i,d,e,n,h,r,o,l,a){o===void 0&&r!=null&&(o=2),l===void 0&&(l="start"),a===void 0&&(a="alphabetic"),t.font=n,t.textAlign=l,t.textBaseline=a,t.fillStyle=h,t.strokeStyle=r,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",r!=null&&r!=="none"&&o>0&&t.strokeText(e,i,d),h!=null&&h!=="none"&&t.fillText(e,i,d)},Gb=function(){var s=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,d=this.radius-t,e=this.canvas,n=this.context;if(this.trackColor&&t>0&&(n.save(),Nd(e,n,s,s,i,i,void 0,this.trackColor,t),n.restore()),this.barColor&&i>0){var h,r,o;if(this.value===1)h=!1,r=0,o=2*Math.PI;else{h=this.anticlockwise,r=this.startAngle;var l=2*Math.PI*(h?1-this.value:this.value);o=l+r}n.save(),Nd(e,n,s,s,i,i,void 0,this.barColor,t,r,o,h),n.restore()}if(this.centerColor&&d>0){var a;this.centerColor2?(a=this.context.createRadialGradient(s,s,0,s,s,d),a.addColorStop(0,this.centerColor),a.addColorStop(1,this.centerColor2)):a=this.centerColor,n.save(),Nd(e,n,s,s,d,d,a),n.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(n.save(),Bb(e,n,s,s,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),n.restore())},ds=Phaser.Utils.Objects.GetValue,bb=Phaser.Math.Linear,Za=class extends ls{constructor(t,i){super(t,i);this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=ds(t,"key","value");var d=i[this.propertyKey];return this.fromValue=ds(t,"from",d),this.toValue=ds(t,"to",d),this.setEase(ds(t,"ease",this.ease)),this.setDuration(ds(t,"duration",this.duration)),this.setRepeat(ds(t,"repeat",0)),this.setDelay(ds(t,"delay",0)),this.setRepeatDelay(ds(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),i[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,i){var d=i.t;d=this.easeFn(d),t[this.propertyKey]=bb(this.fromValue,this.toValue,d)}},Nb=Phaser.Math.Percent,Yb=function(s){return this.easeValuePropName=s,this},zb=function(s){return this.easeValueDuration=s,this},Ub=function(s){return this.easeFunction=s,this},Vb=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},Wb=function(s,t,i){return s==null?this:(t!==void 0&&(s=Nb(s,t,i)),this.easeValueTask===void 0&&(this.easeValueTask=new Za(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:s,duration:this.easeValueDuration,ease:this.easeFunction}),this)},Xb=function(s,t,i,d){return i===void 0&&(i=-1),d===void 0&&(d=0),this.easeValueTask===void 0&&(this.easeValueTask=new Za(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:s,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:i,repeatDelay:d}),this},Ja={setEaseValuePropName:Yb,setEaseValueDuration:zb,setEaseValueFunction:Ub,stopEaseValue:Vb,easeValueTo:Wb,easeValueRepeat:Xb},le=Phaser.Utils.Objects.GetValue,Hb=Phaser.Utils.Objects.IsPlainObject,Sy=Phaser.Math.Clamp,$b=Phaser.Math.Linear,Ey=Phaser.Math.Percent,Kb=Phaser.Math.DegToRad(270),Qa=class extends Yi{constructor(t,i,d,e,n,h,r){Hb(i)&&(r=i,i=le(r,"x",0),d=le(r,"y",0),e=le(r,"radius",1),n=le(r,"barColor",void 0),h=le(r,"value",0));var o=e*2;super(t,i,d,o,o);this.type="rexCircularProgressCanvas",this.eventEmitter=le(r,"eventEmitter",this),this.setRadius(e),this.setTrackColor(le(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(le(r,"centerColor",void 0)),this.setThickness(le(r,"thickness",.2)),this.setStartAngle(le(r,"startAngle",Kb)),this.setAnticlockwise(le(r,"anticlockwise",!1)),this.setTextColor(le(r,"textColor",void 0)),this.setTextStrokeColor(le(r,"textStrokeColor",void 0),le(r,"textStrokeThickness",void 0));var l=le(r,"textFont",void 0);l?this.setTextFont(l):this.setTextFont(le(r,"textSize","16px"),le(r,"textFamily","Courier"),le(r,"textStyle","")),this.setTextFormatCallback(le(r,"textFormatCallback",void 0),le(r,"textFormatCallbackScope",void 0));var a=le(r,"valuechangeCallback",null);if(a!==null){var u=le(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,u)}this.setEaseValuePropName("value").setEaseValueDuration(le(r,"easeValue.duration",0)).setEaseValueFunction(le(r,"easeValue.ease","Linear")),this.setValue(h)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=Sy(t,0,1);var i=this._value,d=i!=t;this.dirty=this.dirty||d,this._value=t,d&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}setValue(t,i,d){return t==null?this:(i!==void 0&&(t=Ey(t,i,d)),this.value=t,this)}addValue(t,i,d){return i!==void 0&&(t=Ey(t,i,d)),this.value+=t,this}getValue(t,i){var d=this.value;return t!==void 0&&(d=$b(t,i,d)),d}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=zt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=zt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Sy(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=zt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=zt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,i){return this.centerColor=t,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(t){t=zt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=zt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,i){return i===void 0&&(i=2),this.textStrokeColor=t,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,i,d){var e;return i===void 0?e=t:e=d+" "+t+" "+i,this.textFont=e,this}setTextFormatCallback(t,i){return this.textFormatCallback=t,this.textFormatCallbackScope=i,this}updateTexture(){return this.clear(),Gb.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(t):i=this.textFormatCallback.call(this.textFormatCallbackScope,t),i}};Object.assign(Qa.prototype,Ja);var Zb=Phaser.GameObjects.GetCalcMatrix,Jb=function(s,t,i,d){t.updateData(),i.addToRenderList(t);var e=s.pipelines.set(t.pipeline),n=Zb(t,i,d),h=e.calcMatrix.copyFrom(n.calc),r=t._displayOriginX,o=t._displayOriginY,l=i.alpha*t.alpha;s.pipelines.preBatch(t);for(var a=t.geom,u=0,c=a.length;u<c;u++)a[u].webglRender(e,h,l,r,o);s.pipelines.postBatch(t)},Qb=Phaser.Renderer.Canvas.SetTransform,kb=function(s,t,i,d){t.updateData(),i.addToRenderList(t);var e=s.currentContext;if(Qb(s,e,t,i,d)){for(var n=t._displayOriginX,h=t._displayOriginY,r=t.geom,o=0,l=r.length;o<l;o++)r[o].canvasRender(e,n,h);e.restore()}},jb={renderWebGL:Jb,renderCanvas:kb},qb=Phaser.GameObjects.Shape,_b=Phaser.Utils.Array.Remove,Tl=class extends qb{constructor(t,i,d,e,n){i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=0),n===void 0&&(n=e),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,d),this.setSize(e,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=t,d.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,i,d){return d===void 0&&(d=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==d,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=d,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,d=t.length;i<d;i++){var e=t[i];e.dirty&&e.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ss(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}deleteShape(t){var i=this.getShape(t);return i&&(delete this.shapes[t],_b(this.geom,i)),this}};Object.assign(Tl.prototype,jb);var tN=function(s,t){return s===void 0?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=s,this.fillAlpha=t),this},eN=function(s,t,i){return s===void 0||t===void 0?this.isStroked=!1:(i===void 0&&(i=1),this.isStroked=!0,this.lineWidth=s,this.strokeColor=t,this.strokeAlpha=i),this},iN={fillStyle:tN,lineStyle:eN},ka=class{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,i,d,e,n){}canvasRender(t,i,d){}updateData(){this.dirty=!1}};Object.assign(ka.prototype,iN,Hh);var nN=Phaser.Geom.Polygon.Earcut,ja=class extends ka{constructor(){super();this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=nN(this.pathData),super.updateData(),this}webglRender(t,i,d,e,n){this.isFilled&&F0(t,i,this,d,e,n),this.isStroked&&Zh(t,this,d,e,n)}canvasRender(t,i,d){var e=this.pathData,n=e.length-1,h=e[0]-i,r=e[1]-d;t.beginPath(),t.moveTo(h,r),this.closePath||(n-=2);for(var o=2;o<n;o+=2){var l=e[o]-i,a=e[o+1]-d;t.lineTo(l,a)}this.closePath&&t.closePath(),this.isFilled&&(La(t,this),t.fill()),this.isStroked&&(Fa(t,this),t.stroke())}},Py=Phaser.Math.DegToRad,qa=class extends ja{constructor(t,i,d,e,n,h,r,o){t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=0),n===void 0&&(n=0),h===void 0&&(h=360),r===void 0&&(r=!1),o===void 0&&(o=!1),super(),this.setCenterPosition(t,i),this.setRadius(d,e),this.setAngle(n,h,r),this.setPie(o),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,i){return i===void 0&&(i=t),this.x=t,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,i){return i===void 0&&(i=t),this.radiusX=t,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,i,d){return d===void 0&&(d=!1),this.startAngle=t,this.endAngle=i,this.anticlockwise=d,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Pr(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,i,d){t.beginPath();var e=this.x-i,n=this.y-d,h=Py(this.startAngle),r=Py(this.endAngle);this.pie&&(t.moveTo(e,n),t.lineTo(e+Math.cos(h)*this.radiusX,n+Math.sin(h)*this.radiusY)),t.ellipse(e,n,this.radiusX,this.radiusY,0,h,r,this.anticlockwise),this.pie&&t.lineTo(e,n),this.isFilled&&(La(t,this),t.fill()),this.isStroked&&(Fa(t,this),t.stroke())}},Cl=class extends qa{constructor(t,i,d){super(t,i,d,d,0,360)}},My=class extends ja{constructor(t){super();this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),i=0,d=t.length;i<d;i++)this.pathData.push(t[i].x,t[i].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}},Ay=class extends qa{constructor(t,i,d,e){super(t,i,d,e,0,360)}},Ry=class extends ja{constructor(t,i,d,e){t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=0),super(),this.setP0(t,i),this.setP1(d,e)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},sN=function(s,t,i){return i.length=0,s!=null&&i.push(s,t),i},Oy=Phaser.Math.Interpolation.QuadraticBezier,Ly=function(s,t,i,d,e,n){for(var h=n.length,r=n[h-2],o=n[h-1],l=1,a=e-1;l<=a;l++){var u=l/a;n.push(Oy(u,r,s,i),Oy(u,o,t,d))}return n},rN=Phaser.Math.RotateAround,aN=function(s,t,i,d){for(var e={x:0,y:0},n=0,h=d.length-1;n<h;n+=2)e.x=d[n],e.y=d[n+1],rN(e,s,t,i),d[n]=e.x,d[n+1]=e.y;return d},oN=function(s,t,i){for(var d=0,e=i.length-1;d<e;d+=2)i[d]+=s,i[d+1]+=t;return i},hN=function(s,t){t===void 0&&(t=[]);for(var i=0,d=s.length-1;i<d;i+=2)t.push({x:s[i],y:s[i+1]});return t},lN=Phaser.Geom.Polygon,uN=function(s,t){return t===void 0&&(t=new lN),t.setTo(s),t},fN=Phaser.Math.DegToRad,Fy=class{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}start(){return this.startAt(),this}startAt(t,i){return sN(t,i,this.pathData),this.lastPointX=t,this.lastPointY=i,this}lineTo(t,i,d){return d===void 0&&(d=!1),d&&(t+=this.lastPointX,i+=this.lastPointY),Er(t,i,this.pathData),this.lastPointX=t,this.lastPointY=i,this}verticalLineTo(t,i){return this.lineTo(t,this.lastPointY,i),this}horizontalLineTo(t,i){return this.lineTo(this.lastPointX,t,i),this}ellipticalArc(t,i,d,e,n,h,r){r===void 0&&(r=!1),Pr(t,i,d,e,n,h,r,this.iterations,this.pathData);var o=this.pathData.length;return this.lastPointX=this.pathData[o-2],this.lastPointY=this.pathData[o-1],this}arc(t,i,d,e,n,h){return this.ellipticalArc(t,i,d,d,e,n,h),this}quadraticBezierTo(t,i,d,e){return Ly(t,i,d,e,this.iterations,this.pathData),this.lastPointX=d,this.lastPointY=e,this.lastCX=t,this.lastCY=i,this}smoothQuadraticBezierTo(t,i){var d=this.lastPointX*2-this.lastCX,e=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(d,e,t,i),this}cubicBezierCurveTo(t,i,d,e,n,h){return Ly(t,i,d,e,n,h,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=h,this.lastCX=d,this.lastCY=e,this}smoothCubicBezierCurveTo(t,i,d,e){var n=this.lastPointX*2-this.lastCX,h=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(n,h,t,i,d,e),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,i,d){if(this.pathData.length===0)return this;d=fN(d),aN(t,i,d,this.pathData);var e=this.pathData.length;if(this.lastPointX=this.pathData[e-2],this.lastPointY=this.pathData[e-1],this.lastCX!==void 0){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,t,i,d),this.lastCX=n.x,this.lastCY=n.y}return this}offset(t,i){return oN(t,i,this.pathData),this}toPoints(){return hN(this.pathData)}toPolygon(t){return uN(this.pathData,t)}draw(t,i,d){var e=this.toPoints();return i&&t.fillPoints(e,this.closePath,this.closePath),d&&t.strokePoints(e,this.closePath,this.closePath),this}},Iy=class extends ja{constructor(){super();this.builder=new Fy(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}lineTo(t,i,d){return this.builder.lineTo(t,i,d),this.dirty=!0,this}verticalLineTo(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}horizontalLineTo(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}ellipticalArc(t,i,d,e,n,h,r){return this.builder.ellipticalArc(t,i,d,e,n,h,r),this.dirty=!0,this}arc(t,i,d,e,n,h){return this.builder.arc(t,i,d,e,n,h),this.dirty=!0,this}quadraticBezierTo(t,i,d,e){return this.builder.quadraticBezierTo(t,i,d,e),this.dirty=!0,this}smoothQuadraticBezierTo(t,i){return this.builder.smoothQuadraticBezierTo(t,i),this.dirty=!0,this}cubicBezierCurveTo(t,i,d,e,n,h){return this.builder.cubicBezierCurveTo(t,i,d,e,n,h),this.dirty=!0,this}smoothCubicBezierCurveTo(t,i,d,e){return this.builder.smoothCubicBezierCurveTo(t,i,d,e),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,i,d){return this.builder.rotateAround(t,i,d),this.dirty=!0,this}offset(t,i){return this.builder.offset(t,i),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}},dN=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,wy=class extends ka{constructor(t,i,d,e){t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=d),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,i),this.setSize(d,e)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}updateData(){this.pathData.length=0;var t=this.x,i=t+this.width,d=this.y,e=d+this.height;return this.pathData.push(t,d),this.pathData.push(i,d),this.pathData.push(i,e),this.pathData.push(t,e),this.pathData.push(t,d),super.updateData(),this}webglRender(t,i,d,e,n){if(this.isFilled){var h=t.fillTint,r=dN(this.fillColor,this.fillAlpha*d);h.TL=r,h.TR=r,h.BL=r,h.BR=r,t.batchFillRect(-e+this.x,-n+this.y,this.width,this.height)}this.isStroked&&Zh(t,this,d,e,n)}canvasRender(t,i,d){this.isFilled&&(La(t,this),t.fillRect(-i,-d,this.width,this.height)),this.isStroked&&(Fa(t,this),t.beginPath(),t.rect(-i,-d,this.width,this.height),t.stroke())}},vN=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Dy=class extends ka{constructor(t,i,d,e,n,h){t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=0),n===void 0&&(n=0),h===void 0&&(h=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,i),this.setP1(d,e),this.setP2(n,h)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,i){return this.dirty=this.dirty||this.x2!==t||this.y2!==i,this.x2=t,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,i,d,e,n){if(this.isFilled){var h=vN(this.fillColor,this.fillAlpha*d),r=this.x0-e,o=this.y0-n,l=this.x1-e,a=this.y1-n,u=this.x2-e,c=this.y2-n,f=i.getX(r,o),v=i.getY(r,o),p=i.getX(l,a),g=i.getY(l,a),m=i.getX(u,c),x=i.getY(u,c);t.batchTri(f,v,p,g,m,x,h,h,h)}this.isStroked&&Zh(t,this,d,e,n)}canvasRender(t,i,d){var e=this.x1-i,n=this.y1-d,h=this.x2-i,r=this.y2-d,o=this.x3-i,l=this.y3-d;t.beginPath(),t.moveTo(e,n),t.lineTo(h,r),t.lineTo(o,l),t.closePath(),this.isFilled&&(La(t,this),t.fill()),this.isStroked&&(Fa(t,this),t.stroke())}},Je=Phaser.Utils.Objects.GetValue,cN=Phaser.Utils.Objects.IsPlainObject,By=Phaser.Math.Clamp,pN=Phaser.Math.Linear,Gy=Phaser.Math.Percent,gN=Phaser.Math.DegToRad(270),mN=Phaser.Math.RadToDeg,Br=class extends Tl{constructor(t,i,d,e,n,h,r){cN(i)&&(r=i,i=Je(r,"x",0),d=Je(r,"y",0),e=Je(r,"radius",1),n=Je(r,"barColor",void 0),h=Je(r,"value",0));var o=e*2;super(t,i,d,o,o);this.type="rexCircularProgress",this.eventEmitter=Je(r,"eventEmitter",this),this.addShape(new Cl().setName("track")).addShape(new qa().setName("bar")).addShape(new Cl().setName("center")),this.setRadius(e),this.setTrackColor(Je(r,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(Je(r,"centerColor",void 0)),this.setThickness(Je(r,"thickness",.2)),this.setStartAngle(Je(r,"startAngle",gN)),this.setAnticlockwise(Je(r,"anticlockwise",!1));var l=Je(r,"valuechangeCallback",null);if(l!==null){var a=Je(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,a)}this.setEaseValuePropName("value").setEaseValueDuration(Je(r,"easeValue.duration",0)).setEaseValueFunction(Je(r,"easeValue.ease","Linear")),this.setValue(h)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=By(t,0,1);var i=this._value,d=i!=t;this.dirty=this.dirty||d,this._value=t,d&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}setValue(t,i,d){return t==null?this:(i!==void 0&&(t=Gy(t,i,d)),this.value=t,this)}addValue(t,i,d){return i!==void 0&&(t=Gy(t,i,d)),this.value+=t,this}getValue(t,i){var d=this.value;return t!==void 0&&(d=pN(t,i,d)),d}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=By(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,i=this.thickness*this.radius,d=this.radius-i/2,e=this.radius-i,n=this.getShape("track");this.trackColor!=null&&i>0?n.setCenterPosition(t,t).setRadius(d).lineStyle(i,this.trackColor):n.reset();var h=this.getShape("bar");if(this.barColor!=null&&d>0){var r,o,l;if(this.value===1)r=!1,o=0,l=361;else{r=this.anticlockwise,o=mN(this.startAngle);var a=360*(r?1-this.value:this.value);l=a+o}h.setCenterPosition(t,t).setRadius(d).setAngle(o,l,r).lineStyle(i,this.barColor)}else h.reset();var u=this.getShape("center");this.centerColor&&e>0?u.setCenterPosition(t,t).setRadius(e).fillStyle(this.centerColor):u.reset()}};Object.assign(Br.prototype,Ja);var Sl=function(s){return s.hasOwnProperty("rexSizer")||(s.rexSizer={}),s.rexSizer},xN=function(s){var t=Sl(s);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},yN=function(s){return s===void 0&&(s=Hs(this.scene)),this.left=Math.max(this.left,s.left),this.right=Math.min(this.right,s.right),this.top=Math.max(this.top,s.top),this.bottom=Math.min(this.bottom,s.bottom),this},ai=Phaser.Display.Align,El={center:ai.CENTER,left:ai.LEFT_CENTER,right:ai.RIGHT_CENTER,top:ai.TOP_CENTER,bottom:ai.BOTTOM_CENTER,"left-top":ai.TOP_LEFT,"left-center":ai.LEFT_CENTER,"left-bottom":ai.BOTTOM_LEFT,"center-top":ai.TOP_CENTER,"center-center":ai.CENTER,"center-bottom":ai.BOTTOM_CENTER,"right-top":ai.TOP_RIGHT,"right-center":ai.RIGHT_CENTER,"right-bottom":ai.BOTTOM_RIGHT},Yd=new Phaser.GameObjects.Zone({sys:{queueDepthSort:ei,events:{once:ei}}},0,0,1,1);Yd.setOrigin(0);var Vn={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},zd=function(s){var t=Jt(s);return s.y+t-t*s.originY},Ud=function(s){var t=_t(s);return s.x-t*s.originX+t*.5},Vd=function(s,t){var i=Jt(s);return s.y=t-i+i*s.originY,s},Wd=function(s,t){var i=_t(s),d=i*s.originX;return s.x=t+d-i*.5,s},TN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Wd(s,Ud(t)+i),Vd(s,zd(t)+d),s},Xd=function(s){var t=_t(s);return s.x-t*s.originX},Hd=function(s,t){var i=_t(s);return s.x=t+i*s.originX,s},CN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Hd(s,Xd(t)-i),Vd(s,zd(t)+d),s},$d=function(s){var t=_t(s);return s.x+t-t*s.originX},Kd=function(s,t){var i=_t(s);return s.x=t-i+i*s.originX,s},SN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Kd(s,$d(t)+i),Vd(s,zd(t)+d),s},Zd=function(s,t){var i=Jt(s),d=i*s.originY;return s.y=t+d-i*.5,s},EN=function(s,t,i){return Wd(s,t),Zd(s,i)},Jd=function(s){var t=Jt(s);return s.y-t*s.originY+t*.5},PN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),EN(s,Ud(t)+i,Jd(t)+d),s},MN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Hd(s,Xd(t)-i),Zd(s,Jd(t)+d),s},AN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Kd(s,$d(t)+i),Zd(s,Jd(t)+d),s},Qd=function(s){var t=Jt(s);return s.y-t*s.originY},kd=function(s,t){var i=Jt(s);return s.y=t+i*s.originY,s},RN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Wd(s,Ud(t)+i),kd(s,Qd(t)-d),s},ON=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Hd(s,Xd(t)-i),kd(s,Qd(t)-d),s},LN=function(s,t,i,d){return i===void 0&&(i=0),d===void 0&&(d=0),Kd(s,$d(t)+i),kd(s,Qd(t)-d),s},cn=[];cn[Vn.BOTTOM_CENTER]=TN;cn[Vn.BOTTOM_LEFT]=CN;cn[Vn.BOTTOM_RIGHT]=SN;cn[Vn.CENTER]=PN;cn[Vn.LEFT_CENTER]=MN;cn[Vn.RIGHT_CENTER]=AN;cn[Vn.TOP_CENTER]=RN;cn[Vn.TOP_LEFT]=ON;cn[Vn.TOP_RIGHT]=LN;var by=function(s,t,i,d,e){return cn[i](s,t,d,e)},Pl=function(s,t,i,d,e,n){Yd.setPosition(t,i).setSize(d,e),by(s,Yd,n)},_a=Phaser.Utils.Objects.GetValue,FN=Phaser.GameObjects.Group,wN=function(s,t){var i=s.scene,d,e,n,h,r;if(typeof t=="number")d=t;else{d=_a(t,"color"),e=al(t,"lineWidth");var o=_a(t,"name",!1);o&&(n=_a(o,"createTextCallback",IN),h=_a(o,"createTextCallbackScope",void 0),r=_a(o,"align","left-top"),typeof r=="string"&&(r=El[r]))}if(d===void 0&&(d=16777215),e===void 0&&(e=1),n&&!s.children){s.children=new FN(i),s.once("destroy",function(p,g){p.children.destroy(!g),p.children=void 0});var l=s.clear.bind(s);s.clear=function(){l(),s.children.clear(!1,!0)}}for(var a=this.getAllShownChildren([this]),u,c,f=0,v=a.length;f<v;f++){if(u=a[f],u.getBounds||u.width!==void 0&&u.height!==void 0)$s=al(u,$s);else continue;d!=null&&s.lineStyle(e,d).strokeRectShape($s),u.name&&n&&(h?c=n.call(h,i):c=n(i),c&&(c.setText(u.name),s.children.add(c),Pl(c,$s.x,$s.y,$s.width,$s.height,r)))}return this},IN=function(s,t,i){return s.add.text(0,0,"")},$s=void 0,Ml=Phaser.Utils.Objects.GetValue,Gr=function(s,t){return t===void 0&&(t={}),typeof s=="number"?(t.left=s,t.right=s,t.top=s,t.bottom=s):(t.left=Ml(s,"left",0),t.right=Ml(s,"right",0),t.top=Ml(s,"top",0),t.bottom=Ml(s,"bottom",0)),t},DN=ri.prototype.add,to=function(s){return DN.call(this,s),this.sizerEventsEnable&&(s.emit("sizer.add",s,this),this.emit("add",s,this)),this},BN={addBackground(s,t,i){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(i=t,t=void 0),t===void 0&&(t=0),to.call(this,s),this.backgroundChildren.push(s);var d=this.getSizerConfig(s);return d.padding=Gr(t),i!==void 0&&this.addChildrenMap(i,s),this},isBackground(s){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(s)!==-1}},GN={removeFromParentSizer(){var s=this.getParentSizer();return s&&s.remove(this),this}},Ny=function(s,t){return this.childrenMap[s]=t,this},bN=function(s){if(typeof s=="object"){var t=s;for(var s in this.childrenMap)if(this.childrenMap[s]===t)return delete this.childrenMap[s],this}return delete this.childrenMap[s],this},YN=function(s,t){if(typeof s=="string"&&(s=s.split(".")),s.length!==0){var i=s.shift(),d=null;if(i.charAt(0)==="#")i=i.substring(1),d=this.getByName(i,t);else if(i.indexOf("[")===-1)this.childrenMap&&(d=this.childrenMap[i]);else{var e=i.match(NN);if(e!=null&&this.childrenMap){var n=this.childrenMap[e[1]];n&&(d=n[e[2]])}}return s.length===0?d:d&&d.childrenMap?d.getElement(s):null}},NN=/(\S+)\[(\d+)\]/i,zN={getInnerPadding(s){return dl(this.space,s)},setInnerPadding(s,t){return os(this.space,s,t),this},getOuterPadding(s){return dl(this.getSizerConfig(this).padding,s)},setOuterPadding(s,t){return os(this.getSizerConfig(this).padding,s,t),this},getChildOuterPadding(s,t){return typeof s=="string"&&(s=this.getElement(s)),dl(this.getSizerConfig(s).padding,t)},setChildOuterPadding(s,t,i){return typeof s=="string"&&(s=this.getElement(s)),os(this.getSizerConfig(s).padding,t,i),this}},jd=function(s){return s===void 0&&(s=Math.max(this.childrenWidth,this.minWidth)),s},UN=function(s){var t,i;for(var d in this.sizerChildren)t=this.sizerChildren[d],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,s),i=t.resolveWidth(i),t.resolveChildrenWidth(i))},qd=function(s){var t=Math.max(this.childrenHeight,this.minHeight);return s===void 0&&(s=t),s},VN=function(s){var t;return s.isRexSizer?t=Math.max(s.minWidth,s.childrenWidth):s.minWidth!==void 0?t=s.minWidth:t=_t(s),t},WN=function(s){var t;return s.isRexSizer?t=Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?t=s.minHeight:t=Jt(s),t},XN=function(s,t){return t},HN=function(s,t){return t},$N=function(){return 0},KN=function(){return 0},ZN=function(s){s===void 0&&(s=[]);for(var t=s.length,i=this.getChildrenSizers(s),d=s.length,e=t;e<d;e++)i[e].getAllChildrenSizers(s);return s},JN=function(s){return s===void 0&&(s=[]),s},QN={getShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,i,d=0,e=t.length;d<e;d++)i=t[d],!(i.rexSizer&&i.rexSizer.hidden)&&s.push(i);return s},getAllShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,i,d=0,e=t.length;d<e;d++)i=t[d],!(i.rexSizer&&i.rexSizer.hidden)&&(s.push(i),i.hasOwnProperty("isRexContainerLite")&&s.push(...i.getAllShownChildren()));return s}},eo=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var s=this.getChildrenSizers(),t,i=0,d=s.length;i<d;i++)t=s[i],!t.ignoreLayout&&t.preLayout()},kN=function(){var s=this.scaleX,t=this.scaleY,i=s===1&&t===1;return i||this.setScale(1),this.runLayout(),i||this.setScale(s,t),this},jN=function(s,t,i){if(this.ignoreLayout)return this;var d=!s;return d&&this.preLayout(),t=this.resolveWidth(t),d&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),i=this.resolveHeight(i),this.resize(t,i),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},qN=function(){},_N=function(s,t,i){return this._anchor&&this._anchor.updatePosition(),this},Yy=function(s){var t,i;for(var d in this.sizerChildren)t=this.sizerChildren[d],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(i=this.getExpandedChildWidth(t,s),t.isRexSizer&&(i=t.resolveWidth(i)),t.runWidthWrap(i));return this},io=class extends Ae{constructor(t,i){super(t,{eventEmitter:!1});this.viewport=void 0,this.resetFromJSON(i)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var i,d;t.x!==void 0?(i=null,d=t.x):t.left!==void 0?(i=0,d=t.left):t.right!==void 0?(i=1,d=t.right):t.centerX!==void 0&&(i=.5,d=t.centerX);var e,n;t.y!==void 0?(e=null,n=t.y):t.top!==void 0?(e=0,n=t.top):t.bottom!==void 0?(e=1,n=t.bottom):t.centerY!==void 0&&(e=.5,n=t.centerY);var h,r;d!==void 0&&(d=d.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),h=parseFloat(d[0])/100,r=d[1]===""?0:parseFloat(d[1]));var o,l;n!==void 0&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),o=parseFloat(n[0])/100,l=n[1]===""?0:parseFloat(n[1]));var a=t.width,u,c;a!==void 0&&(a=a.split("%"),u=parseFloat(a[0])/100,c=a[1]===""?0:parseFloat(a[1]));var f=t.height,v,p;f!==void 0&&(f=f.split("%"),v=parseFloat(f[0])/100,p=f[1]===""?0:parseFloat(f[1])),this.setAlign(i,e),this.setPercentage(h,o),this.setOffset(r,l),this.setSizePercentage(u,v),this.setSizePadding(c,p);var g=t.onResizeCallback,m=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,i){return this.alignX=t,this.alignY=i,this}setPercentage(t,i){return this.percentageX=t,this.percentageY=i,this}setOffset(t,i){return this.offsetX=t,this.offsetY=i,this}setSizePercentage(t,i){return this.percentageWidth=t,this.percentageHeight=i,this}setSizePadding(t,i){return this.paddingWidth=t,this.paddingHeight=i,this}setResizeCallback(t,i){return this.onResizeCallback=t,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(t,i){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,i=this.onResizeCallbackScope,d=this.anchorWidth,e=this.anchorHeight;if(!(d===void 0&&e===void 0||!t)){var n=this.parent;d===void 0&&(d=n.width),e===void 0&&(e=n.height),i?t.call(i,d,e,n,this):t(d,e,n,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Hs(this.scene,t,this.viewport);var i=this.viewport,d=this.onUpdateViewportCallback,e=this.onUpdateViewportCallbackScope;d&&(e?d.call(e,i,this.parent,this):d(i,this.parent,this))}},t3=function(s){s===void 0&&(s={});var t=s.hasOwnProperty("width"),i=s.hasOwnProperty("height"),d=s.hasOwnProperty("onResizeCallback");return(t||i)&&!d&&(s.onResizeCallback=function(e,n,h){t&&h.setMinWidth(e),i&&h.setMinHeight(n),h.layout()}),this._anchor===void 0?this._anchor=new io(this,s):this._anchor.resetFromJSON(s),this},e3=Phaser.Utils.Objects.GetValue,br=Phaser.Utils.Objects.GetAdvancedValue,zy=Phaser.Math.Linear,no=class extends ls{constructor(t,i){super(t,i);this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(e3(t,"mode",0)),this.setScaleRange(br(t,"start",void 0),br(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=i3[t]),this.mode=t,this}setScaleRange(t,i){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=br(t,"x",this.parent.scaleX),this.startY=br(t,"y",this.parent.scaleY)),typeof i=="number"?(this.endX=i,this.endY=i):(this.endX=br(i,"x",void 0),this.endY=br(i,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var i=this.repeat;return this.mode===2&&i!==-1&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateGameObject(t,i){var d=i.t;i.isOddIteration&&(d=1-d),d=this.easeFn(d),this.hasScaleX&&(t.scaleX=zy(this.startX,this.endX,d)),this.hasScaleY&&(t.scaleY=zy(this.startY,this.endY,d))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},i3={stop:0,destroy:1,yoyo:2},Uy=function(s,t,i,d,e){d===void 0&&(d="Cubic");var n,h;switch(i){case 0:case"x":n={x:0},h={x:s.scaleX};break;case 1:case"y":n={y:0},h={y:s.scaleY};break;default:n=0,h=s.scale;break}var r={mode:0,start:n,end:h,duration:t,ease:d};return e===void 0?e=new no(s,r):e.resetFromJSON(r),e.restart(),e},Vy=function(s,t,i,d,e,n){d===void 0&&(d="Linear"),e instanceof no&&(n=e,e=void 0),e===void 0&&(e=!0);var h={};switch(h.mode=e?1:0,i){case 0:case"x":h.end={x:0};break;case 1:case"y":h.end={y:0};break;default:h.end=0;break}return h.duration=t,h.ease=d,n===void 0?n=new no(s,h):n.resetFromJSON(h),n.restart(),n},n3=function(s,t,i,d,e,n,h){i===void 0&&(i=1.2),d===void 0&&(d=0),n===void 0&&(n="Cubic");var r,o;switch(e){case 0:case"x":r={x:s.scaleX},o={x:i};break;case 1:case"y":r={y:s.scaleX},o={y:i};break;default:r=s.scaleX,o=i;break}var l={mode:2,start:r,end:o,duration:t/2,ease:n,repeat:d};return h===void 0?h=new no(s,l):h.resetFromJSON(l),h.restart(),h},_d=Phaser.Utils.Objects.IsPlainObject,tv=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var i=s.getParentSizer();i&&i.resetChildPositionState(s)})},s3={popUp(s,t,i){if(_d(s)){var d=s;s=d.duration,t=d.orientation,i=d.ease}var e=this._scale===void 0;return this._scale=Uy(this,s,t,i,this._scale),e&&tv(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(s,t,i){return this.popUp(s,t,i),Re(this._scale)},scaleDownDestroy(s,t,i,d){if(_d(s)){var e=s;s=e.duration,t=e.orientation,i=e.ease,d=e.destroy}var n=this._scale===void 0;return this._scale=Vy(this,s,t,i,d,this._scale),n&&tv(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(s,t,i,d){return this.scaleDownDestroy(s,t,i,d),Re(this._scale)},scaleDown(s,t,i){return this.scaleDownDestroy(s,t,i,!1),this},scaleDownPromise(s,t,i){return this.scaleDown(s,t,i),Re(this._scale)},scaleYoyo(s,t,i,d,e){if(_d(s)){var n=s;s=n.duration,t=n.peakValue,i=n.repeat,d=n.orientation,e=n.ease}var h=this._scale===void 0;return this._scale=n3(this,s,t,i,d,e,this._scale),h&&tv(this,this._scale),this._scale.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(s,t,i,d,e){return this.scaleYoyo(s,t,i,d,e),Re(this._scale)}},r3=Phaser.Utils.Objects.GetValue,Wy=Phaser.Utils.Objects.GetAdvancedValue,a3=Phaser.Math.Linear,Al=class extends ls{constructor(t,i){super(t,i);this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(r3(t,"mode",0)),this.setAlphaRange(Wy(t,"start",this.parent.alpha),Wy(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=o3[t]),this.mode=t,this}setAlphaRange(t,i){return this.alphaStart=t,this.alphaEnd=i,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,i){var d=i.t;i.isOddIteration&&(d=1-d),t.alpha=a3(this.alphaStart,this.alphaEnd,d)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},o3={stop:0,destroy:1,yoyo:2},h3=Phaser.Utils.Objects.IsPlainObject,so=function(s,t,i,d){var e,n;h3(i)?(e=i.start,n=i.end):n=i,e===void 0&&(e=0),n===void 0&&(n=1);var h={mode:0,start:e,end:n,duration:t};return d===void 0?d=new Al(s,h):d.resetFromJSON(h),d.restart(),d},ro=function(s,t,i,d){i instanceof Al&&(d=i,i=void 0),i===void 0&&(i=!0);var e={mode:i?1:0,end:0,duration:t};return d===void 0?d=new Al(s,e):d.resetFromJSON(e),d.restart(),d},Xy=Phaser.Utils.Objects.IsPlainObject,Hy=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var i=s.getParentSizer();i&&i.resetChildAlphaState(s)})},l3={fadeIn(s,t){if(Xy(s)){var i=s;s=i.duration,t=i.alpha}var d=this._fade===void 0;return this._fade=so(this,s,t,this._fade),d&&Hy(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(s,t){return this.fadeIn(s,t),Re(this._fade)},fadeOutDestroy(s,t){if(Xy(s)){var i=s;s=i.duration,t=i.destroy}var d=this._fade===void 0;return this._fade=ro(this,s,t,this._fade),d&&Hy(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(s,t){return this.fadeOutDestroy(s,t),Re(this._fade)},fadeOut(s){return this.fadeOutDestroy(s,!1),this},fadeOutPromise(s){return this.fadeOut(s),Re(this._fade)}},u3=Phaser.Utils.Objects.GetValue,Nr=Phaser.Utils.Objects.GetAdvancedValue,$y=Phaser.Math.Linear,ao=class extends ls{constructor(t,i){super(t,i);this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(u3(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=Nr(t,"x",void 0),d=Nr(t,"y",void 0);this.setTargetPosition(i,d)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=f3[t]),this.mode=t,this}setTargetPosition(t,i){if(typeof t=="number"||typeof i=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var d=t;this.startX=Nr(d,"startX",void 0),this.startY=Nr(d,"startY",void 0),this.endX=Nr(d,"endX",void 0),this.endY=Nr(d,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,i){var d=i.t;i.isOddIteration&&(d=1-d),d=this.easeFn(d),this.hasMoveX&&(t.x=$y(this.startX,this.endX,d)),this.hasMoveY&&(t.y=$y(this.startY,this.endY,d))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},f3={stop:0,destroy:1,yoyo:2},Rl=function(s,t){if(typeof s=="number")return s;var i=s[0],d=parseFloat(s.substr(2));switch(i){case"+":return t+d;case"-":return t-d;case"*":return t*d;case"/":return t/d}},ev=function(s,t,i,d,e,n,h){n instanceof ao&&(h=n,n=void 0),n===void 0&&(n=!1);var r={};return r.mode=n?1:0,i!==void 0&&(r.startX=s.x,r.endX=Rl(i,s.x)),d!==void 0&&(r.startY=s.y,r.endY=Rl(d,s.y)),r.duration=t,r.ease=e===void 0?"Linear":e,h===void 0?h=new ao(s,r):h.resetFromJSON(r),h.restart(),h},iv=function(s,t,i,d,e,n,h){n instanceof ao&&(h=n,n=void 0),n===void 0&&(n=!1);var r={};return r.mode=n?1:0,i!==void 0&&(r.startX=Rl(i,s.x),r.endX=s.x),d!==void 0&&(r.startY=Rl(d,s.y),r.endY=s.y),r.duration=t,r.ease=e===void 0?"Linear":e,h===void 0?h=new ao(s,r):h.resetFromJSON(r),h.restart(),h},Ky=Phaser.Utils.Objects.IsPlainObject,Zy=Phaser.Math.Distance.Between,Jy=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var i=s.getParentSizer();i&&i.resetChildPositionState(s)})},d3={moveFrom(s,t,i,d,e){if(Ky(s)){var n=s;t=n.x,i=n.y,n.hasOwnProperty("speed")?s=Zy(t,i,this.x,this.y)*1e3/n.speed:s=n.duration,d=n.ease}var h=this._easeMove===void 0;return this._easeMove=iv(this,s,t,i,d,e,this._easeMove),h&&Jy(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(s,t,i,d,e){return this.moveFrom(s,t,i,d,e),Re(this._easeMove)},moveFromDestroy(s,t,i,d){return this.moveFrom(s,t,i,d,!0),this},moveFromDestroyPromise(s,t,i,d){return this.moveFromDestroy(s,t,i,d),Re(this._easeMove)},moveTo(s,t,i,d,e){if(Ky(s)){var n=s;t=n.x,i=n.y,n.hasOwnProperty("speed")?s=Zy(t,i,this.x,this.y)*1e3/n.speed:s=n.duration,d=n.ease}var h=this._easeMove===void 0;return this._easeMove=ev(this,s,t,i,d,e,this._easeMove),h&&Jy(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(s,t,i,d,e){return this.moveTo(s,t,i,d,e),Re(this._easeMove)},moveToDestroy(s,t,i,d){return this.moveTo(s,t,i,d,!0),this},moveToDestroyPromise(s,t,i,d){return this.moveToDestroy(s,t,i,d,!0),Re(this._easeMove)},moveStop(s){return this._easeMove?(this._easeMove.stop(s),this):this}},en=Phaser.Utils.Objects.GetValue,oo=class extends Ua{constructor(t,i){super(t,i);this.timer=new Ad,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(en(t,"timer")),this.setEnable(en(t,"enable",!0)),this.setMode(en(t,"mode",1)),this.isRunning=en(t,"isRunning",!1),this.setMagnitudeMode(en(t,"magnitudeMode",1)),this.setDuration(en(t,"duration",500)),this.setMagnitude(en(t,"magnitude",10)),this.ox=en(t,"ox",void 0),this.oy=en(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=v3[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=c3[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,i){if(typeof t!="number"){var d=t;i=en(d,"magnitude",void 0),t=en(d,"duration",void 0)}return i!==void 0&&this.setMagnitude(i),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,i){return this.start(t,i),this}update(t,i){if(!this.isRunning||!this.enable)return this;var d=this.parent;if(!d.active)return this;if(this.timer.update(t,i),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=d.x,this.oy=d.y);var e=this.magnitude;this.magnitudeMode===1&&(e*=1-this.timer.t);var n=Math.random()*Math.PI*2,h=Math.cos(n)*e,r=Math.sin(n)*e;d.setPosition(this.ox+h,this.oy+r)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}},v3={effect:0,behavior:1},c3={constant:0,decay:1},p3=Phaser.Utils.Objects.IsPlainObject,g3=function(s,t){t.on("complete",function(){s.emit("shake.complete",s)})},m3={shake(s,t,i){if(p3(s)){var d=s;s=d.duration,t=d.magnitude,i=d.magnitudeMode}return this._shake===void 0&&(this._shake=new oo(this,{mode:0,magnitudeMode:1}),g3(this,this._shake)),s!==void 0&&this._shake.setDuration(s),t!==void 0&&this._shake.setMagnitude(t),i!==void 0&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(s,t){return this.shake(s,t),Re(this._shake)}},Qy=Phaser.Utils.Objects.IsPlainObject,ky=class extends Ae{constructor(t,i){super(t,i);this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var i=this.easeTasks[t];return i===void 0&&(i=new Za(this.parent),this.easeTasks[t]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),i}easeTo(t,i,d,e){if(Qy(t)){var n=t;t=n.key,i=n.value,d=n.duration,e=n.ease;var h=n.speed;d===void 0&&h!==void 0&&(d=Math.abs(i-this.parent.data.values[t])/h*1e3)}d===void 0&&(d=1e3),e===void 0&&(e="Linear");var r=this.getEaseTask(t);return r.restart({key:t,to:i,duration:d,ease:e}),this}easeFrom(t,i,d,e){if(Qy(t)){var n=t;t=n.key,i=n.value,d=n.duration,e=n.ease;var h=n.speed;d===void 0&&h!==void 0&&(d=Math.abs(i-this.parent.data.values[t])/h*1e3)}d===void 0&&(d=1e3),e===void 0&&(e="Linear");var r=this.getEaseTask(t);return r.restart({key:t,from:i,duration:d,ease:e}),this}stopEase(t,i){i===void 0&&(i=!0);var d=this.easeTasks[t];return d&&d.stop(i),this}stopAll(t){t===void 0&&(t=!0);for(var i in this.easeTasks)this.stopEase(i,t);return this}},x3=function(s,t){t.on("complete",function(i){s.emit(`easedata.${i}.complete`,s),s.emit("easedata.complete",i,s)})},y3={easeDataTo(s,t,i,d){return this._easeData||(this._easeData=new ky(this),x3(this,this._easeData)),this._easeData.easeTo(s,t,i,d),this},easeDataToPromise(s,t,i,d){return this.easeDataTo(s,t,i,d),yl(this._easeData,`complete-${s}`)},stopEaseData(s,t){return this._easeData?(this._easeData.stopEase(s,t),this):this},stopAllEaseData(s){return this._easeData?(this._easeData.stopAll(s),this):this}},Wn=function(s){jy(s,!1)},Xn=function(s){jy(s,!0)},Ol=function(s){if(!s)return!1;var t=Sl(s);return!t.hidden},jy=function(s,t){if(!!s){var i=Sl(s);i.hidden=t;var d=zi(s);d?d.setChildVisible(s,!t):s.setVisible(!t)}},T3={show(s){return s===void 0&&(s=this),Wn(s),this},hide(s){return s===void 0&&(s=this),Xn(s),this},isShow(s){return s===void 0&&(s=this),Ol(s)}},nv=function(s,t,i,d,e){if(!s||!s.getBounds||d&&!d(s,t,i))return!1;var n=al(s,!0);return!(!n.contains(t,i)||e&&!e(s,t,i))},Ll=function(s,t,i,d){if(t)return nv(s,t.worldX,t.worldY,i,d);for(var e=s.scene.input.manager,n=e.pointersTotal,h=e.pointers,r=0;r<n;r++)if(t=h[r],nv(s,t.worldX,t.worldY,i,d))return!0;return!1},C3=function(s,t){return t===void 0&&(t=this),Ll(t,s)},sv=function(s){return s&&typeof s=="function"},nn=function(s){return Object.prototype.toString.call(s)==="[object Array]"},rv=function(s,t,i,d,e){return nv(s,t,i,S3(d),E3(e))},qy=function(s){var t=s.rexSizer&&s.rexSizer.hidden;return!t},S3=function(s){return s?function(t,i,d){return qy(t)?(s(t,i,d),!0):!1}:qy},E3=function(s){return s},P3=function(s,t,i,d,e){if(sv(i)||(e=i,i=void 0,d=void 0),e===void 0&&(this.sizerChildren?e=this.sizerChildren:e=this.children),nn(e)){for(var n,h=0,r=e.length;h<r;h++)if(n=e[h],rv(n,s,t,i,d))return n}else{var n;for(var o in e)if(n=e[o],rv(n,s,t,i,d))return n}return null},ho=function(s,t){var i;if(t===void 0)s.hasOwnProperty("rexContainer")&&(i=s.rexContainer.parent,i.isRexSizer||(i=null));else for(i=ho(s);i&&i.name!==t;)i=ho(i);return i},M3=function(s){for(var t=ho(s);t;)s=t,t=ho(t);return s},A3={getParentSizer(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),ho(s,t)},getTopmostSizer(s){return s===void 0&&(s=this),M3(s)}},vs=function(s,t,i){!s||t===void 0&&i===void 0||(s.resize?(t===void 0&&(t=s.width),i===void 0&&(i=s.height),s.resize(t,i)):(t!==void 0&&(s.displayWidth=t),i!==void 0&&(s.displayHeight=i)))},O3=function(s,t){return t===void 0?t={}:t===!0&&(t=R3),t.x=s.x,t.y=s.y,t.scaleX=s.scaleX,t.scaleY=s.scaleY,t.width=s.width,t.height=s.height,t.displayWidth=s.displayWidth,t.displayHeight=s.displayHeight,t},R3={},lo=function(s){this.sizerEventsEnable&&(O3(s,this.getChildPrevState(s)),this.layoutedChildren.push(s))},uo=function(s,t,i,d,e,n,h,r){Pl(s,t,i,d,e,n),h!==void 0&&(s.x+=h),r!==void 0&&(s.y+=r),this.resetChildPositionState(s),this.sizerEventsEnable&&s.emit("sizer.postlayout",s,this)},L3=Phaser.Display.Align.CENTER,F3=function(){if(this.backgroundChildren!==void 0)for(var s=this.backgroundChildren,t=this.left,i=this.top,d=this.width,e=this.height,n,h,r,o,l,a,u,c=0,f=s.length;c<f;c++)n=s[c],h=n.rexSizer,!h.hidden&&(r=h.padding,lo.call(this,n),o=t+r.left,l=i+r.top,a=d-r.left-r.right,u=e-r.top-r.bottom,vs(n,a,u),uo.call(this,n,o,l,a,u,L3))},I3=function(s,t){var i=typeof s;return i==="string"?s=this.getElement(s):(s===void 0||i!="object")&&(t=s,s=this),t===void 0&&(t=!0),s.input&&s.input.hasOwnProperty("draggable")?s.input.draggable=t:t&&(s.setInteractive(),s.scene.input.setDraggable(s),s.on("drag",function(d,e,n){var h=this.getTopmostSizer();h.x+=e-s.x,h.y+=n-s.y,h.emit("sizer.drag",d,e,n)},this).on("dragstart",function(d,e,n){var h=this.getTopmostSizer();h.emit("sizer.dragstart",d,e,n)},this).on("dragend",function(d,e,n,h){var r=this.getTopmostSizer();r.emit("sizer.dragend",d,e,n,h)},this)),this},fo=Phaser.Utils.Objects.GetValue,cs=class extends Ae{constructor(t,i){super(t,i);this._enable=void 0,t.setInteractive(fo(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(fo(t,"enable",!0)),this.setMode(fo(t,"mode",1)),this.setClickInterval(fo(t,"clickInterval",100)),this.setDragThreshold(fo(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointeroutr",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=w3[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,i,d,e){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,e))}onRelease(t,i,d,e){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,e),this.pointer=void 0)}onPointOut(t,i){this.pointer===t&&this.cancel()}onMove(t,i,d,e){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,i,d){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,i,d),this;this.pointer=void 0;var e=this.lastClickTime;return e!==void 0&&t-e<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,i,d),this)}cancel(){return this.pointer=void 0,this}onOver(t,i,d,e){return this.enable?(this.emit("over",this,this.parent,t,e),this):this}onOut(t,i){return this.enable?(this.emit("out",this,this.parent,t,i),this):this}},w3={press:0,pointerdown:0,release:1,pointerup:1},D3={onClick(s,t,i){return s?(this._click===void 0&&(this._click=new cs(this,i)),this._click.on("click",s,t),this):this},offClick(s,t){return this._click===void 0?this:(this._click.off("click",s,t),this)},enableClick(s){return this._click===void 0?this:(this._click.setEnable(s),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}},Fl=Phaser.Utils.Objects.GetValue,vo=class extends Ae{constructor(t,i){super(t,i);this._enable=void 0;var d=Fl(i,"inputConfig",void 0);d&&t.setInteractive(d),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(Fl(t,"enable",!0)),this.setMode(Fl(t,"mode",1)),this.setClickInterval(Fl(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=B3[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var i=this.parent,d=i.input?fd:Ll;return d(i,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,i){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,i),this;var d=this.lastClickTime;return d!==void 0&&t-d<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,i),this)}},B3={press:0,pointerdown:0,release:1,pointerup:1},G3={onClickOutside(s,t,i){return s?(this._clickOutside===void 0&&(this._clickOutside=new vo(this,i)),this._clickOutside.on("clickoutside",s,t),this):this},offClickOutside(s,t){return this._clickOutside===void 0?this:(this._clickOutside.off("clickoutside",s,t),this)},enableClickOutside(s){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(s),this)},disableClickOutside(){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(!1),this)}},sn=class{constructor(t){var i=ii(t,"states",void 0);i&&this.addStates(i);var d=ii(t,"extend",void 0);if(d)for(var e in d)(!this.hasOwnProperty(e)||this[e]===void 0)&&(this[e]=d[e]);var n=ii(t,"eventEmitter",void 0),h=ii(t,"EventEmitterClass",void 0);this.setEventEmitter(n,h),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(ii(t,"enable",!0)),this.start(ii(t,"start",void 0));var i=ii(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var i="exit_"+this._prevState,d=this[i];d&&d.call(this),this.emit(i,this)}if(this._stateLock=!1,this._state!=null){var e="enter_"+this._state,n=this[e];n&&n.call(this),this.emit(e,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(typeof i=="string"?t=i:t=i.call(this)),this.goto(t),this}addState(t,i){typeof t!="string"&&(i=t,t=i.name);var d=i.next;d&&(this["next_"+t]=d);var e=i.exit;e&&(this["exit_"+t]=e);var n=i.enter;return n&&(this["enter_"+t]=n),this}addStates(t){if(Array.isArray(t))for(var i=0,d=t.length;i<d;i++)this.addState(t[i]);else for(var e in t)this.addState(e,t[e]);return this}runMethod(t,i,d,e,n,h){var r=this[t+"_"+this.state];if(!!r){var o=arguments.length;switch(o){case 1:return r.call(this);case 2:return r.call(this,i);case 3:return r.call(this,i,d);case 4:return r.call(this,i,d,e);case 5:return r.call(this,i,d,e,n);case 6:return r.call(this,i,d,e,n,h)}for(var l=new Array(o-1),a=1;a<o;a++)l[a-1]=arguments[a];return r.apply(this,l)}}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}};Object.assign(sn.prototype,Ir);var _y=class extends sn{constructor(){super({eventEmitter:!1});this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}},av=Phaser.Utils.Objects.GetValue,Ks=class extends Ae{constructor(t,i){super(t,i);this._enable=void 0,this.cooldown=new _y,this.parent.setInteractive(av(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouching=!1,this.setEnable(av(t,"enable",!0)),this.setCooldown(av(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,i,d){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,i){this.cooldown.update(t,i),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}},b3={onTouching(s,t,i){return s?(this._inTouching===void 0&&(this._inTouching=new Ks(this,i)),this._inTouching.on("intouch",s,t),this):this},offTouching(s,t){return this._inTouching===void 0?this:(this._inTouching.off("intouch",s,t),this)},enableTouching(s){return this._inTouching===void 0?this:(this._inTouching.setEnable(s),this)},disableTouching(){return this._inTouching===void 0?this:(this._inTouching.setEnable(!1),this)}},tT=function(s,t,i){for(var d,e=0,n=s.length;e<n;e++)if(d=s[e],!!rv(d,t,i))return d.pointToChild(t,i);return null},pn=function(s,t,i,d,e,n,h){var r;e===void 0?r=d:r=tT(i,d,e),!!r&&s.emit(t,r,n,h)},N3=Phaser.Utils.Objects.GetValue,z3=function(s){var t=N3(s,"down",void 0);t!==!1&&this.on("pointerdown",Y3,this)},Y3=function(s,t,i,d){var e=this._childrenInteractive;pn(e.eventEmitter,`${e.eventNamePrefix}down`,e.targetSizers,s.worldX,s.worldY,s,d)},U3=Phaser.Utils.Objects.GetValue,W3=function(s){var t=U3(s,"up",void 0);t!==!1&&this.on("pointerup",V3,this)},V3=function(s,t,i,d){var e=this._childrenInteractive;pn(e.eventEmitter,`${e.eventNamePrefix}up`,e.targetSizers,s.worldX,s.worldY,s,d)},X3=Phaser.Utils.Objects.GetValue,$3=function(s){var t=X3(s,"over",void 0);t!==!1&&this.on("pointermove",eT,this).on("pointerover",eT,this).on("pointerout",H3,this)},eT=function(s,t,i,d){var e=this._childrenInteractive,n=tT(e.targetSizers,s.worldX,s.worldY),h=e.lastOverChild;n&&h&&n===h||(e.lastOverChild=n,pn(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,h,void 0,s,d),pn(e.eventEmitter,`${e.eventNamePrefix}over`,e.targetSizers,n,void 0,s,d))},H3=function(s,t){var i=this._childrenInteractive,d=i.lastOverChild;i.lastOverChild=null,pn(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,d,void 0,s,t)},K3=Phaser.Utils.Objects.GetValue,Z3=function(s){var t=K3(s,"click",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new cs(this,t),this._click.on("click",function(d,e,n,h){pn(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,n.worldX,n.worldY,n,h)},this)}},ov=Phaser.Utils.Objects.GetValue,co=class extends Ua{constructor(t,i){var d=Dx(t);d===t&&(t=void 0),super(d,i),this.gameObject=t,t&&t.setInteractive(ov(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(ov(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(ov(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=hv,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){if(!!this.enable&&this.pointer===void 0){var d=this.bounds?this.bounds.contains(t.x,t.y):!0;!d||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=iT,this.gameObject===void 0&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;!i||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=hv,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,d=this.pointer===t;!d&&i||(d&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===iT&&this.onDragEnd(),this.pointer=void 0,this.tracerState=hv,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=J3,this}},hv=0,iT=1,J3="IDLE",Zs=Phaser.Utils.Objects.GetValue,Q3=Phaser.Math.Distance.Between,Yr=class extends co{constructor(t,i){super(t,i);var d=this,e={states:{IDLE:{enter:function(){d.stop(),d.tapsCount=0,d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var n=d.lastPointer;d.x=n.x,d.y=n.y,d.worldX=n.worldX,d.worldY=n.worldY}},BEGIN:{enter:function(){d.start(),d.tapsCount=0,d.emit("tappingstart",d,d.gameObject,d.lastPointer)}},RECOGNIZED:{enter:function(){d.start(),d.emit("tap",d,d.gameObject,d.lastPointer),d.emit(`${d.tapsCount}tap`,d,d.gameObject,d.lastPointer)}}},init:function(){this.state=Js},eventEmitter:!1};this.setRecongizedStateObject(new sn(e))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Zs(t,"time",250)),this.setTapInterval(Zs(t,"tapInterval",200)),this.setDragThreshold(Zs(t,"threshold",9)),this.setTapOffset(Zs(t,"tapOffset",10));var i=Zs(t,"taps",void 0);return i!==void 0?this.setTaps(i):(this.setMaxTaps(Zs(t,"maxTaps",void 0)),this.setMinTaps(Zs(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Js:this.state=zr;break;case zr:var t=this.lastPointer,i=Q3(t.upX,t.upY,t.x,t.y);i>this.tapOffset&&(this.state=Ur,this.state=zr);break;case Ur:this.state=zr;break}}onDragEnd(){this.state===zr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Ur))}onDrag(){this.state!==Js&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Js)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===zr){var d=this.lastPointer;if(d.isDown){var e=t-d.downTime;e>this.holdTime&&(this.state=Js)}else{var n=t-d.upTime;n>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Ur:this.state=Js)}}}postUpdate(t,i){!this.isRunning||!this.enable||this.state===Ur&&(this.state=Js)}get isTapped(){return this.state===Ur}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return i===void 0&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}},Js="IDLE",zr="BEGIN",Ur="RECOGNIZED",nT=Phaser.Utils.Objects.GetValue,Vr=class extends co{constructor(t,i){super(t,i);var d=this,e={states:{IDLE:{enter:function(){d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var n=d.lastPointer;d.x=n.x,d.y=n.y,d.worldX=n.worldX,d.worldY=n.worldY}},BEGIN:{enter:function(){d.start()},exit:function(){d.stop()}},RECOGNIZED:{enter:function(){d.emit("pressstart",d,d.gameObject,d.lastPointer)},exit:function(){d.emit("pressend",d,d.gameObject,d.lastPointer)}}},init:function(){this.state=Il},eventEmitter:!1};this.setRecongizedStateObject(new sn(e))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(nT(t,"threshold",9)),this.setHoldTime(nT(t,"time",251)),this}onDragStart(){this.state=sT,this.holdTime===0&&(this.state=lv)}onDragEnd(){this.state=Il}onDrag(){this.state!==Il&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Il)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===sT){var d=t-this.pointer.downTime;d>=this.holdTime&&(this.state=lv)}}get isPressed(){return this.state===lv}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}},Il="IDLE",sT="BEGIN",lv="RECOGNIZED",k3=Phaser.Utils.Objects.GetValue,wl=class extends co{constructor(t,i){super(t,i);var d=this,e={states:{IDLE:{},BEGIN:{enter:function(){var n=d.pointer;d.startX=n.x,d.startY=n.y,d.startWorldX=n.worldX,d.startWorldY=n.worldY}},RECOGNIZED:{enter:function(){d.emit("panstart",d,d.gameObject,d.lastPointer)},exit:function(){var n=d.lastPointer;d.endX=n.x,d.endY=n.y,d.endWorldX=n.worldX,d.endWorldY=n.worldY,d.emit("panend",d,d.gameObject,d.lastPointer)}}},init:function(){this.state=rT},eventEmitter:!1};this.setRecongizedStateObject(new sn(e))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(k3(t,"threshold",10)),this}onDragStart(){this.state=aT,this.dragThreshold===0&&(this.state=Dl)}onDragEnd(){this.state=rT}onDrag(){switch(this.state){case aT:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Dl);break;case Dl:var t=this.pointer.position,i=this.pointer.prevPosition;this.dx=t.x-i.x,this.dy=t.y-i.y;var d=this.pointer;this.x=d.x,this.y=d.y,this.worldX=d.worldX,this.worldY=d.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Dl}setDragThreshold(t){return this.dragThreshold=t,this}},rT="IDLE",aT="BEGIN",Dl="RECOGNIZED",j3=Phaser.Math.Distance.Between,q3=Phaser.Math.Angle.Between,_3={getDt:function(){var s=dd(this.scene);return s},getVelocity:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=j3(t.x,t.y,s.x,s.y),d=i/(this.getDt()*.001);return d},getVelocityX:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(s.x-t.x),d=i/(this.getDt()*.001);return d},getVelocityY:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(s.y-t.y),d=i/(this.getDt()*.001);return d},getVelocityAngle:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=q3(t.x,t.y,s.x,s.y);return i}},tY={"up&down":0,"left&right":1,"4dir":2,"8dir":3},iY=function(s,t,i){switch(i===void 0?i={}:i===!0&&(i=eY),i.left=!1,i.right=!1,i.up=!1,i.down=!1,s=(s+360)%360,t){case 0:s<180?i.down=!0:i.up=!0;break;case 1:s>90&&s<=270?i.left=!0:i.right=!0;break;case 2:s>45&&s<=135?i.down=!0:s>135&&s<=225?i.left=!0:s>225&&s<=315?i.up=!0:i.right=!0;break;case 3:s>22.5&&s<=67.5?(i.down=!0,i.right=!0):s>67.5&&s<=112.5?i.down=!0:s>112.5&&s<=157.5?(i.down=!0,i.left=!0):s>157.5&&s<=202.5?i.left=!0:s>202.5&&s<=247.5?(i.left=!0,i.up=!0):s>247.5&&s<=292.5?i.up=!0:(s>292.5&&s<=337.5&&(i.up=!0),i.right=!0);break}return i},eY={},uv=Phaser.Utils.Objects.GetValue,nY=Phaser.Math.RadToDeg,Qs=class extends co{constructor(t,i){super(t,i);var d=this,e={states:{IDLE:{enter:function(){d.x=0,d.y=0,d.worldX=0,d.worldY=0},exit:function(){var n=d.lastPointer;d.x=n.x,d.y=n.y,d.worldX=n.worldX,d.worldY=n.worldY}},BEGIN:{enter:function(){d.validDrag=!1}},RECOGNIZED:{enter:function(){d.start(),d.updateDirectionStates(),d.emit("swipe",d,d.gameObject,d.lastPointer)},exit:function(){d.stop(),d.clearDirectionStates()}}},init:function(){this.state=fv},eventEmitter:!1};this.setRecongizedStateObject(new sn(e)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(uv(t,"threshold",10)),this.setVelocityThreshold(uv(t,"velocityThreshold",1e3)),this.setDirectionMode(uv(t,"dir","8dir")),this}onDragStart(){this.state=oT}onDragEnd(){this.state=fv}onDrag(){this.state===oT&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=dv))}postUpdate(t,i){!this.isRunning||!this.enable||this.state===dv&&(this.state=fv)}get isSwiped(){return this.state===dv}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=tY[t]),this.dirMode=t,this}updateDirectionStates(){var t=nY(this.getVelocityAngle());return iY(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}};Object.assign(Qs.prototype,_3);var fv="IDLE",oT="BEGIN",dv="RECOGNIZED",vv=Phaser.Utils.Objects.GetValue,sY=Phaser.Utils.Array.SpliceOne,rY=Phaser.Math.Distance.Between,aY=Phaser.Math.Angle.Between,Bl=class{constructor(t,i){var d=t.input.manager.pointersTotal-1;d<2&&t.input.addPointer(2-d),this.scene=t,this.setEventEmitter(vv(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(vv(t,"enable",!0)),this.bounds=vv(t,"bounds",void 0),this.tracerState=Gl,this.pointers.length=0,ss(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,ss(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!i){var d=this.pointers.indexOf(t);if(d===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Gl:this.tracerState=go,this.onDrag1Start();break;case go:this.tracerState=gn,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!i){var d=this.pointers.indexOf(t);if(d!==-1)switch(delete this.movedState[t.id],sY(this.pointers,d),this.tracerState){case go:this.tracerState=Gl,this.onDrag1End();break;case gn:this.tracerState=go,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,d=this.pointers.indexOf(t)!==-1;if(!(!d&&i)){if(d&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case go:this.onDrag1();break;case gn:this.onDrag2();break}}}}dragCancel(){return this.tracerState===gn&&this.onDrag2End(),this.pointers.length=0,ss(this.movedState),this.tracerState=Gl,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==gn)return 0;var t=this.pointers[0],i=this.pointers[1];return rY(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==gn)return 0;var t=this.pointers[0],i=this.pointers[1];return aY(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,d=t.prevPosition;po.x=i.x-d.x,po.y=i.y-d.y}else po.x=0,po.y=0;return po}get centerX(){if(this.tracerState!==gn)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==gn)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==gn)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==gn)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=oY,this}};Object.assign(Bl.prototype,Ir);var po={},Gl=0,go=1,gn=2,oY="IDLE",hY=Phaser.Utils.Objects.GetValue,bl=class extends Bl{constructor(t,i){super(t,i);var d=this,e={states:{IDLE:{enter:function(){d.prevDistance=void 0,d.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){d.emit("pinchstart",d)},exit:function(){d.emit("pinchend",d)}}},init:function(){this.state=hT},eventEmitter:!1};this.setRecongizedStateObject(new sn(e))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(hY(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=lT,this.dragThreshold===0&&(this.state=Nl)}onDrag2End(){this.state=hT}onDrag2(){switch(this.state){case lT:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Nl}break;case Nl:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===Nl}setDragThreshold(t){return this.dragThreshold=t,this}},hT="IDLE",lT="BEGIN",Nl="RECOGNIZED",lY=Phaser.Math.RotateAround,uT=function(s,t,i,d){return lY(s,t,i,d),s.rotation+=d,s},fY=function(s,t,i,d){return d===void 0?d={}:d===!0&&(d=uY),i.getWorldPoint(s,t,d),d},uY={},dY=function(s,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var i=this.movementCenterX,d=this.movementCenterY,e=fY(this.centerX,this.centerY,t,!0),n=e.x,h=e.y,r=this.rotation;if(Array.isArray(s))for(var o=s,l=0,a=o.length;l<a;l++)s=o[l],s.x+=i,s.y+=d,uT(s,n,h,r);else s.x+=i,s.y+=d,uT(s,n,h,r);return this},vY=Phaser.Utils.Objects.GetValue,cv=Phaser.Math.Angle.WrapDegrees,fT=Phaser.Math.Angle.ShortestBetween,pv=Phaser.Math.RadToDeg,cY=Phaser.Math.DegToRad,mo=class extends Bl{constructor(t,i){super(t,i);var d=this,e={states:{IDLE:{enter:function(){d.prevAngle=void 0,d.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){d.emit("rotatestart",d)},exit:function(){d.emit("rotateend",d)}}},init:function(){this.state=dT},eventEmitter:!1};this.setRecongizedStateObject(new sn(e))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(vY(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=cv(pv(this.angleBetween)),this.state=vT,this.dragThreshold===0&&(this.state=Yl)}onDrag2End(){this.state=dT}onDrag2(){switch(this.state){case vT:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=cv(pv(this.angleBetween));this.angle=fT(this.prevAngle,t),this.prevAngle=t,this.state=Yl}break;case Yl:var t=cv(pv(this.angleBetween));this.angle=fT(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===Yl}get rotation(){return cY(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}},pY={spinObject:dY};Object.assign(mo.prototype,pY);var dT="IDLE",vT="BEGIN",Yl="RECOGNIZED",gY=Phaser.Utils.Objects.GetValue,mY=function(s){var t=gY(s,"tap",void 0);if(t!==!1){var i=this._childrenInteractive;this._tap=new Yr(this,t),this._tap.on("tap",function(d,e,n){pn(i.eventEmitter,`${i.eventNamePrefix}${d.tapsCount}tap`,i.targetSizers,d.worldX,d.worldY,n)},this)}},xY=Phaser.Utils.Objects.GetValue,yY=function(s){var t=xY(s,"press",void 0);if(t!==!1){var i=this._childrenInteractive;this._press=new Vr(this,t),this._press.on("pressstart",function(d,e,n){pn(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,d.worldX,d.worldY,n)},this).on("pressend",function(d,e,n){pn(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,d.worldX,d.worldY,n)},this)}},TY=Phaser.Utils.Objects.GetValue,CY=function(s){var t=TY(s,"swipe",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Qs(this,t),this._swipe.on("swipe",function(d,e,n){var h=d.left?"left":d.right?"right":d.up?"up":"down";pn(i.eventEmitter,`${i.eventNamePrefix}swipe${h}`,i.targetSizers,d.worldX,d.worldY,n)},this)}},gv=Phaser.Utils.Objects.GetValue,zl=function(s,t){return s.setInteractive(),s._childrenInteractive={targetSizers:gv(t,"targets",[s]),eventEmitter:gv(t,"eventEmitter",s),eventNamePrefix:gv(t,"inputEventPrefix","child.")},z3.call(s,t),W3.call(s,t),$3.call(s,t),Z3.call(s,t),mY.call(s,t),yY.call(s,t),CY.call(s,t),s},SY=function(s){return zl(this,s),this},EY=function(){for(var s=this.getAllChildren([this]),t=0,i=s.length;t<i;t++){var d=s[t];d.emit.apply(d,arguments)}return this},cT={getSizerConfig:Sl,getChildPrevState:xN,pushIntoBounds:yN,drawBounds:wN,resolveWidth:jd,resolveChildrenWidth:UN,resolveHeight:qd,getChildWidth:VN,getChildHeight:WN,getExpandedChildWidth:XN,getExpandedChildHeight:HN,getChildrenWidth:$N,getChildrenHeight:KN,addChildrenMap:Ny,addElement:Ny,removeChildrenMap:bN,getElement:YN,getAllChildrenSizers:ZN,getChildrenSizers:JN,preLayout:eo,layout:kN,runLayout:jN,layoutChildren:qN,runWidthWrap:Yy,layoutBackgrounds:F3,postLayout:_N,setAnchor:t3,isInTouching:C3,pointToChild:P3,setDraggable:I3,setChildrenInteractive:SY,broadcastEvent:EY};Object.assign(cT,zN,BN,GN,A3,s3,l3,d3,m3,y3,D3,G3,b3,T3,QN);var Wr=Phaser.Utils.Objects.GetValue,ps=class extends ri{constructor(t,i,d,e,n,h){super(t,i,d,2,2);this.isRexSizer=!0,this.setMinSize(e,n),this.setName(Wr(h,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var r=Wr(h,"anchor",void 0);r&&this.setAnchor(r),this.setInnerPadding(Wr(h,"space",0)),this.setDraggable(Wr(h,"draggable",!1)),this.setSizerEventsEnable(Wr(h,"sizerEvents",!1)),this.setDirty(!0),Wr(h,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!!this.scene){if(t)for(var i=this.getAllChildrenSizers([this]),d=0,e=i.length;d<e;d++)i[d].sizerEventsEnable=!1;super.destroy(t),ss(this.backgroundChildren),ss(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,i){return this.setMinWidth(t).setMinHeight(i),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-_t(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+_t(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+_t(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Jt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Jt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Jt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}};Object.assign(ps.prototype,cT);var PY=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,i,d,e;for(var n in t)i=t[n],d=i.rexSizer.padding,e=this.getChildWidth(i)+d.left+d.right,s=Math.max(e,s);return s+this.space.left+this.space.right},MY=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,i,d,e;for(var n in t)i=t[n],e=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?i.minHeight:Jt(i),d=i.rexSizer.padding,e+=d.top+d.bottom,s=Math.max(e,s);return s+this.space.top+this.space.bottom},AY=function(s,t){t===void 0&&(t=this.width);var i,d=s.rexSizer;if(d.expandWidth){var e=t-this.space.left-this.space.right,n=d.padding;i=e-n.left-n.right}return i},RY=function(s,t){t===void 0&&(t=this.height);var i,d=s.rexSizer;if(d.expandHeight){var e=t-this.space.top-this.space.bottom,n=d.padding;i=e-n.top-n.bottom}return i},OY=function(s){s===void 0&&(s=[]);var t=this.sizerChildren,i;for(var d in t)i=t[d],i.isRexSizer&&s.push(i);return s},mv=function(s,t){s.width<s.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${s.constructor.name}`),s.height<s.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${s.constructor.name}`)},LY=function(){var s,t,i,d=this.innerLeft,e=this.innerTop,n=this.innerWidth,h=this.innerHeight,r,o,l,a,u,c,f=this.sizerChildren;for(var v in f)s=f[v],!s.rexSizer.hidden&&(t=s.rexSizer,i=t.padding,lo.call(this,s),s.isRexSizer?(s.runLayout(this,this.getExpandedChildWidth(s),this.getExpandedChildHeight(s)),mv(s,this)):(u=void 0,c=void 0,t.expandWidth&&(u=n-i.left-i.right),t.expandHeight&&(c=h-i.top-i.bottom),vs(s,u,c)),r=d+i.left,l=n-i.left-i.right,o=e+i.top,a=h-i.top-i.bottom,uo.call(this,s,r,o,l,a,t.align,t.alignOffsetX,t.alignOffsetY))},pT=Phaser.Utils.Objects.IsPlainObject,mn=Phaser.Utils.Objects.GetValue,gT=Phaser.Display.Align.CENTER,FY=Phaser.Utils.String.UUID,IY=function(s,t,i,d,e,n,h,r,o){if(to.call(this,s),pT(t)){var a=t;t=mn(a,"key",void 0),i=mn(a,"align",gT),r=mn(a,"offsetX",0),o=mn(a,"offsetY",0),d=mn(a,"padding",0),e=mn(a,"expand",!0),s.isRexSizer||(n=mn(a,"minWidth",s._minWidth),h=mn(a,"minHeight",s._minHeighted))}var l=t!==void 0;l||(t=FY()),typeof i=="string"&&(i=El[i]),i===void 0&&(i=gT),r===void 0&&(r=0),o===void 0&&(o=0),d===void 0&&(d=0),e===void 0&&(e=!0),s.isRexSizer||(n===void 0&&(n=s._minWidth),h===void 0&&(h=s._minHeight));var a=this.getSizerConfig(s);return a.align=i,a.alignOffsetX=r,a.alignOffsetY=o,a.padding=Gr(d),pT(e)?(a.expandWidth=mn(e,"width",!1),a.expandHeight=mn(e,"height",!1)):(a.expandWidth=e,a.expandHeight=e),s.isRexSizer||(a.expandWidth&&(s.minWidth=n===void 0?_t(s):n),a.expandHeight&&(s.minHeight=h===void 0?Jt(s):h)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=s,l&&this.addChildrenMap(t,s),this},wY={add:IY},DY=Phaser.Utils.Array.Remove,BY=ri.prototype.remove,Ul=function(s,t){return this.isBackground(s)&&DY(this.backgroundChildren,s),BY.call(this,s,t),!t&&this.sizerEventsEnable&&(s.emit("sizer.remove",s,this),this.emit("remove",s,this)),this},GY=ri.prototype.clear,Vl=function(s){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!s&&this.sizerEventsEnable,i;if(t&&(i=this.getChildren([])),GY.call(this,s),t)for(var d,e=0,n=i.length;e<n;e++)d=i[e],d.emit("sizer.remove",d,this),this.emit("remove",d,this);return this},bY={remove(s,t){var i;if(typeof s=="string"){if(i=s,s=this.sizerChildren[i],!s)return this}else{if(this.getParentSizer(s)!==this)return this;i=this.childToKey(s)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),Ul.call(this,s,t),this},removeAll(s){for(var t in this.sizerChildren)this.remove(t,s);return this},clear(s){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Vl.call(this,s),this}},mT={getChildrenWidth:PY,getChildrenHeight:MY,getExpandedChildWidth:AY,getExpandedChildHeight:RY,getChildrenSizers:OY,layoutChildren:LY};Object.assign(mT,wY,bY);var Wl=function(s,t){if(Array.isArray(s))return s.indexOf(t);for(var i in s)if(s[i]===t)return i;return null},xT=Phaser.Utils.Objects.IsPlainObject,Xr=Phaser.Utils.Objects.GetValue,Ai=class extends ps{constructor(t,i,d,e,n,h){xT(i)?(h=i,i=Xr(h,"x",0),d=Xr(h,"y",0),e=Xr(h,"width",void 0),n=Xr(h,"height",void 0)):xT(e)&&(h=e,e=Xr(h,"width",void 0),n=Xr(h,"height",void 0)),super(t,i,d,e,n,h),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var i=t;if(this.sizerChildren.hasOwnPropery(i))return i}else return Wl(this.sizerChildren,t);return null}};Object.assign(Ai.prototype,mT);var NY=Phaser.Math.Distance.Between,Xl=function(s,t,i){var d=s.width/2;return NY(d,d,t,i)<=d},YY=Phaser.Math.Angle.Between,zY=Phaser.Math.Angle.Normalize,yT=function(s,t,i){if(!!this.enable&&!!s.isDown){var d=this.sizerChildren.knob;if(!!Xl(d,t,i)){var e=d.width/2,n=d.startAngle,h=YY(e,e,t,i),r=d.anticlockwise?n-h:h-n,o=zY(r)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-o)<.1?this.value=o:this.easeValueTo(o)}}},UY=function(){var s=this.sizerChildren.knob;s.setInteractive().on("pointerdown",yT,this).on("pointermove",yT,this)},TT=Phaser.Math.Angle.Between,VY=Phaser.Math.Angle.Wrap,WY=function(s,t,i){if(!(!this.enable||this.panPointer)){var d=this.sizerChildren.knob;!Xl(d,t,i)||CT.call(this,s)}},HY=function(s,t,i){if(!!this.enable&&!!s.isDown){var d=this.sizerChildren.knob;switch(this.panState){case xv:Xl(d,t,i)&&CT.call(this,s);break;case ET:Xl(d,t,i)?XY.call(this):ST.call(this);break}}},$Y=function(s,t,i){!this.enable||this.panPointer!==s||ST.call(this)},CT=function(s){this.panPointer=s,this.panState=ET},ST=function(){this.panPointer=void 0,this.panState=xv},XY=function(){var s=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,d=TT(i.x,i.y,s.x,s.y),e=TT(i.x,i.y,t.x,t.y),n=i.anticlockwise?d-e:e-d,h=VY(n)/(Math.PI*2);this.stopEaseValue(),this.value+=h},xv=0,ET=1,KY=function(){var s=this.sizerChildren.knob;s.setInteractive().on("pointerdown",WY,this).on("pointermove",HY,this).on("pointerup",$Y,this),this.panPointer=void 0,this.panState=xv},ZY=function(s,t){return this.textFormatCallback=s,this.textFormatCallbackScope=t,this},PT=function(s){s===void 0&&(s=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(s):t=this.textFormatCallback.call(this.textFormatCallbackScope,s),t},JY=function(){var s=this.sizerChildren.text;return s&&this.textFormatCallback&&(s.setText(PT.call(this)),s.layout&&s.layout()),this},QY={setTextFormatCallback:ZY,getFormatText:PT,updateText:JY},Ue=Phaser.Utils.Objects.GetValue,kY=Phaser.Math.Linear,MT=Phaser.Math.Percent,jY=Phaser.Math.Snap.To,Hr=class extends Ai{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexKnob",this.eventEmitter=Ue(i,"eventEmitter",this);var d=Ue(i,"background",void 0),e=Ue(i,"text",void 0);d&&this.addBackground(d),e&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(Ue(i,"textFormatCallback",void 0),Ue(i,"textFormatCallbackScope",void 0)));var n=new Br(t,i);n.setDepth(Ue(i,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),e&&(this.add(e,"text","center",0,!1),t.children.moveBelow(n,e)),this.addChildrenMap("background",d),this.addChildrenMap("knob",n),this.addChildrenMap("text",e);var h=Ue(i,"valuechangeCallback",null);if(h!==null){var r=Ue(i,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,r)}this.setEnable(Ue(i,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Ue(i,"easeValue.duration",0)).setEaseValueFunction(Ue(i,"easeValue.ease","Linear")),this.setGap(Ue(i,"gap",void 0)),this.setValue(Ue(i,"value",0),Ue(i,"min",void 0),Ue(i,"max",void 0));var o=Ue(i,"input",0);switch(typeof o=="string"&&(o=qY[o]),o){case 0:KY.call(this);break;case 1:UY.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=jY(t,this.gap));var i=this.value;this.sizerChildren.knob.value=t;var d=this.value;i!==d&&(this.updateText(),this.eventEmitter.emit("valuechange",d,i,this.eventEmitter))}setValue(t,i,d){return t==null?this:(i!==void 0&&(t=MT(t,i,d)),this.value=t,this)}addValue(t,i,d){return i!==void 0&&(t=MT(t,i,d)),this.value+=t,this}getValue(t,i){var d=this.value;return t!==void 0&&(d=kY(t,i,d)),d}},qY={pan:0,drag:0,click:1,none:-1};Object.assign(Hr.prototype,QY,Ja);var _Y={arc:qa,circle:Cl,curve:My,ellipse:Ay,line:Ry,lines:Iy,rectangle:wy,triangle:Dy},AT=Phaser.Utils.Objects.GetValue,tz=Phaser.Utils.Objects.IsPlainObject,ez=function(){for(var s=this.getShapes(),t=0,i=s.length;t<i;t++)s[t].lineStyle().fillStyle()},iz={createShape(s,t){var i=_Y[s],d=new i;return t&&d.setName(t),d},buildShapes(s){var t=AT(s,"create",void 0);if(tz(t)){var i=t;for(var d in i){var e=i[d];switch(typeof e){case"number":for(var n=0;n<e;n++)this.addShape(this.createShape(d));break;case"string":this.addShape(this.createShape(d,e));break;default:for(var h=e,n=0,r=h.length;n<r;n++)this.addShape(this.createShape(d,h[n]));break}}}else if(Array.isArray(t))for(var i=t,n=0,r=i.length;n<r;n++){var o=i[n];this.addShape(this.createShape(o.type,o.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(AT(s,"update"))},setUpdateShapesCallback(s){return s===void 0&&(s=ez),this.dirty=this.dirty||this.updateCallback!==s,this.updateCallback=s,this},updateShapes(){this.updateCallback.call(this)}},xo=Phaser.Utils.Objects.GetValue,nz=Phaser.Utils.Objects.IsPlainObject,$r=class extends Tl{constructor(t,i,d,e,n,h){nz(i)&&(h=i,i=xo(h,"x",0),d=xo(h,"y",0),e=xo(h,"width",2),n=xo(h,"height",2)),super(t,i,d,e,n),this.type=xo(h,"type","rexCustomShapes"),this.buildShapes(h)}};Object.assign($r.prototype,iz);var xn=Phaser.Utils.Objects.GetValue,sz=Phaser.Utils.Objects.IsPlainObject,rz=Phaser.Math.Clamp,az=Phaser.Math.Linear,RT=Phaser.Math.Percent,yo=class extends $r{constructor(t,i,d,e,n,h){sz(i)&&(h=i,i=xn(h,"x",0),d=xn(h,"y",0),e=xn(h,"width",2),n=xn(h,"height",2)),h===void 0&&(h={}),h.type||(h.type="rexCustomProgress"),super(t,i,d,e,n,h),this.eventEmitter=xn(h,"eventEmitter",this);var r=xn(h,"valuechangeCallback",null);if(r!==null){var o=xn(h,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",r,o)}this.setEaseValuePropName("value").setEaseValueDuration(xn(h,"easeValue.duration",0)).setEaseValueFunction(xn(h,"easeValue.ease","Linear")),this.setValue(xn(h,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=rz(t,0,1);var i=this._value,d=i!=t;this.dirty=this.dirty||d,this._value=t,d&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}setValue(t,i,d){return t==null?this:(i!==void 0&&(t=RT(t,i,d)),this.value=t,this)}addValue(t,i,d){return i!==void 0&&(t=RT(t,i,d)),this.value+=t,this}getValue(t,i){var d=this.value;return t!==void 0&&(d=az(t,i,d)),d}};Object.assign(yo.prototype,Ja);var oz={setTransitionStartCallback(s,t){return this.onStartCallback=s,this.onStartCallbackScope=t,this},setTransitionProgressCallback(s,t){return this.onProgressCallback=s,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(s,t){return this.onCompleteCallback=s,this.onCompleteCallbackScope=t,this}},hz=Phaser.Utils.Objects.IsPlainObject,Wi=Phaser.Utils.Objects.GetValue,lz={out:0,in:1},uz={setTransitionDirection(s){return typeof s=="string"&&(s=lz[s]),this.dir=s,this},setDuration(s){return this.duration=s,this},setEaseFunction(s){return this.easeFunction=s,this},setNextTexture(s,t){return this.nextImage.setTexture(s,t),this},transit(s,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),hz(s)){var i=s;s=Wi(i,"key",void 0),t=Wi(i,"frame",void 0),this.setDuration(Wi(i,"duration",this.duration)).setEaseFunction(Wi(i,"ease",this.easeFunction)).setTransitionDirection(Wi(i,"dir",this.dir));var d=Wi(i,"mask",void 0);d&&this.setMaskGameObject(d),this.setMaskEnable(d===!0);var e=Wi(i,"onStart",void 0),n=Wi(i,"onProgress",void 0),h=Wi(i,"onComplete",void 0);(e!==void 0||n!==void 0||h!==void 0)&&this.setTransitionStartCallback(e,Wi(i,"onStartScope",void 0)).setTransitionProgressCallback(n,Wi(i,"onProgressScope",void 0)).setTransitionCompleteCallback(h,Wi(i,"onCompleteScope",void 0))}return this.setNextTexture(s,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Za(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},OT=function(s,t,i,d,e){switch(this.clear().fillStyle(16777215),this.shape){case 1:var n=Math.min(s,t)/2;this.fillCircle(-s*(d-.5),-t*(e-.5),n+i);break;default:this.fillRect(-(s*d)-i,-(t*e)-i,s+2*i,t+2*i);break}},fz=Phaser.GameObjects.Graphics,Hl=class extends fz{constructor(t,i,d){i===void 0&&(i=0),typeof i=="string"&&(i=dz[i]),d===void 0&&(d=0),super(t.scene),this.parent=t,this.shape=i,this.padding=d,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,i){var d=this.parent;return t===void 0&&(t=d.x),i===void 0&&(i=d.y),super.setPosition(t,i),this}resize(t,i,d){var e=this.parent;return t===void 0&&(t=e.width),i===void 0&&(i=e.height),d===void 0&&(d=this.padding),this.widthSave===t&&this.heightSave===i&&this.paddingSave===d?this:(this.widthSave=t,this.heightSave=i,this.paddingSave=d,this.originXSave=e.originX,this.originYSave=e.originY,OT.call(this,t,i,d,e.originX,e.originY),this)}setOrigin(t,i){i===void 0&&(i=t);var d=this.parent;return t===void 0&&(t=d.originX),i===void 0&&(i=d.originY),this.originXSave===t&&this.originYSave===i?this:(this.originXSave=t,this.originYSave=i,OT.call(this,this.widthSave,this.heightSave,this.paddingSave,t,i),this)}},dz={rectangle:0,circle:1},vz={setMaskGameObject(s){if(!s)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(s===!0&&this.maskGameObject instanceof Hl)return this;if(this.maskGameObject===s)return this;this.removeMaskGameObject()}return s===!0&&(s=new Hl(this)),this.maskGameObject=s,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(s,t,i){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(s.setMask(this.childrenMask),i&&this.childrenMask.setInvertAlpha()):s.clearMask(),this},setCurrentImageMaskEnable(s,t){return this.setImageMaskEnable(this.currentImage,s,t),this},setNextImageMaskEnable(s,t){return this.setImageMaskEnable(this.nextImage,s,t),this},setCellImagesMaskEnable(s,t){for(var i=this.getCellImages(),d=0,e=i.length;d<e;d++)this.setImageMaskEnable(i[d],s,t);return this},setMaskEnable(s,t){return this.setImageMaskEnable(this.backImage,s,t),this.setImageMaskEnable(this.frontImage,s,t),this.setCellImagesMaskEnable(s,t),this}},cz=function(s,t){t===void 0&&(t=",");var i;return s==="__BASE"?i=function(d,e){return`${d}${t}${e}`}:i=function(d,e){return`${s}_${d}${t}${e}`},i},pz=function(s,t,i,d,e,n){i==null&&(i="__BASE"),n||(n=cz(i,n));for(var h=s.sys.textures.get(t),r=h.source[0].isRenderTexture,o=typeof i=="object"?i:h.get(i),l=o.width,a=o.height,u,c,f,v=l/d,p=a/e,g=0,m=0,x=0;x<e;x++){g=0;for(var y=0;y<d;y++)f=n(y,x),u=g+o.cutX,r?c=a-m-p+o.cutY:c=m+o.cutY,h.add(f,0,u,c,v,p),g+=v;m+=p}return{getFrameNameCallback:n,cellWidth:v,cellHeight:p,columns:d,rows:e}},Hn=Phaser.Utils.Objects.GetValue,gz=Phaser.GameObjects.Image,mz=Phaser.Utils.Objects.IsPlainObject,xz=Phaser.Math.RotateAround,yz=function(s,t,i,d){mz(t)&&(d=t,t=Hn(d,"columns",1),i=Hn(d,"rows",1));var e=Hn(d,"onCreateImage");if(!e){var n=Hn(d,"ImageClass",gz);e=function(X,K,Z){return new n(X,0,0,K,Z)}}for(var h=Hn(d,"originX",.5),r=Hn(d,"originY",.5),o=Hn(d,"add",!0),l=Hn(d,"align",o),a=Hn(d,"objectPool",void 0),u=s.scene,c=s.texture,f=s.frame,v=pz(u,c,f,t,i),p=v.getFrameNameCallback,g=s.scaleX,m=s.scaleY,x=s.rotation,y=s.getTopLeft(),T=y.x,C=y.y,S=[],E=v.cellWidth*g,M=v.cellHeight*m,R=0;R<i;R++)for(var L=0;L<t;L++){var O,F=p(L,R);a&&a.length>0?O=a.pop().setTexture(c,F):O=e(u,c,F),o&&u.add.existing(O);var D=T+E*L,B=C+M*R,N=D+h*E,V=B+r*M;l&&(O.setOrigin(h,r).setPosition(N,V).setScale(g,m).setRotation(x),xz(O,T,C,x)),S.push(O)}return S},Tz={gridCutImage(s,t,i,d){d===void 0&&(d={}),d.objectPool=this.imagesPool;for(var e=yz(s,t,i,d),n,h=0,r=e.length;h<r;h++)n=e[h],n.setVisible(!0),this.add(n);return this.cellImages=e,this.setChildLocalVisible(s,!1),e},gridCutCurrentImage(s,t,i){return this.gridCutImage(this.currentImage,s,t,i)},gridCutNextImage(s,t,i){return this.gridCutImage(this.nextImage,s,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var s=this.cellImages[0].texture,t=this.cellImages,i,d,e=0,n=t.length;e<n;e++)i=t[e],this.setChildLocalAlpha(i,1).setChildLocalScale(i,1).setChildLocalVisible(i,!1),i.clearMask(),d=i.frame.name,i.setTexture(),s.remove(d);return this.imagesPool.push(...t),t.length=0,this}},Cz={setFlipX(s){return this.flipX=s,this},setFlipY(s){return this.flipY=s,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(s,t){return this.flipX=s,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},LT={};Object.assign(LT,oz,uz,vz,Tz,Cz);var Sz=function(s,t,i,d){},Ez=function(s,t,i,d){s.setChildLocalAlpha(t,1-d).setChildLocalAlpha(i,d)},Pz=function(s,t,i,d){s.setChildLocalAlpha(t,1)},FT=Phaser.Utils.Objects.IsPlainObject,Oe=Phaser.Utils.Objects.GetValue,Mz=Phaser.Math.Clamp,To=class extends ri{constructor(t,i,d,e,n,h){FT(i)?(h=i,i=Oe(h,"x",0),d=Oe(h,"y",0),e=Oe(h,"key",void 0),n=Oe(h,"frame",void 0)):FT(n)&&(h=n,n=void 0);var r=Oe(h,"back",void 0),o=Oe(h,"front",void 0);r||(r=t.add.image(i,d,e,n)),o||(o=t.add.image(i,d,e,n));var l=Oe(h,"width",o.width),a=Oe(h,"height",o.height);super(t,i,d,l,a);r.setVisible(!1),this.addMultiple([r,o]),this.type="rexTransitionImage",this.backImage=r,this.frontImage=o,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var u=Oe(h,"onStart",void 0),c=Oe(h,"onProgress",void 0),f=Oe(h,"onComplete",void 0),v=Oe(h,"dir",0);u===void 0&&c===void 0&&f===void 0&&(u=Sz,c=Ez,f=Pz,v=0),this.setTransitionStartCallback(u,Oe(h,"onStartScope",void 0)).setTransitionProgressCallback(c,Oe(h,"onProgressScope",void 0)).setTransitionCompleteCallback(f,Oe(h,"onCompleteScope",void 0)).setTransitionDirection(v).setDuration(Oe(h,"duration",1e3)).setEaseFunction(Oe(h,"ease","Linear"));var p=Oe(h,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=Mz(t,0,1),this._t!==t){this._t=t;var i=this.currentImage,d=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),yv(this.onStartCallback,this.onStartCallbackScope,this,i,d,t)),yv(this.onProgressCallback,this.onProgressCallbackScope,this,i,d,t),t===1){yv(this.onCompleteCallback,this.onCompleteCallbackScope,this,i,d,t);var e=d.texture.key,n=d.frame.name;this.frontImage.setTexture(e,n),this.backImage.setTexture(e,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,i){return super.setOrigin(t,i),this.backImage.setOrigin(t,i),this.frontImage.setOrigin(t,i),this.maskGameObject&&this.maskGameObject.setOrigin(t,i),this}setTexture(t,i){return this.frontImage.setTexture(t,i),this.backImage.setTexture(t,i).setVisible(!1),this}},yv=function(s,t,i,d,e,n){!s||(t?s.call(t,i,d,e,n):s(i,d,e,n))};Object.assign(To.prototype,LT);var Az=Phaser.GameObjects.Rectangle,Co=class extends Az{constructor(t,i,d){super(t,0,0,2,2,i,1);this.setAlpha(d),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,i=t.sys.scale.gameSize,d=t.sys.cameras.main,e=i.width,n=i.height,h=1/d.zoom,r=e/2,o=n/2,l=e*h,a=n*h;(this.x!==r||this.y!==o)&&this.setPosition(r,o),(this.width!==l||this.height!==a)&&this.setSize(l,a).setOrigin(.5)}},IT=Phaser.Utils.Objects.GetValue,So=class extends Ae{constructor(t,i){super(t,{eventEmitter:!1});this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setHitAreaMode(IT(t,"hitAreaMode",0)),this.setEnable(IT(t,"enable",!0)),this}boot(){this.parent.on("pointerdown",function(t,i,d,e){e.stopPropagation()}).on("pointerup",function(t,i,d,e){e.stopPropagation()}).on("pointermove",function(t,i,d,e){e.stopPropagation()}).on("pointerover",function(t,i,d,e){e.stopPropagation()}).on("pointerout",function(t,i){i.stopPropagation()})}setHitAreaMode(t){typeof t=="string"&&(t=Rz[t]);var i=this.parent;return i.input&&i.removeInteractive(),t===0?i.setInteractive():i.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}},Rz={default:0,fullWindow:1},wT=Phaser.Utils.Objects.GetValue,Eo=class extends Co{constructor(t,i){var d=wT(i,"color",0),e=wT(i,"alpha",.8);super(t,d,e);this.touchEventStop=new So(this,{hitAreaMode:1})}},Lz=function(s){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,Oz(this,s)),this},Oz=function(s,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var d=!1;i.animation===void 0?i.animation={}:i.animation===!1&&(d=!0,i.animation={});var e=i.animation;d&&(e.duration=0);var n=e.onProgress;e.onProgress=function(r){n&&n(r),s.needRedraw()};var h=e.onComplete;return e.onComplete=function(r){h&&h(r),s.needRedraw()},t},Fz=function(s){if(this.chart!==void 0)if(typeof s=="string"){for(var t=this.chart.data.datasets,i,d=0,e=t.length;d<e;d++)if(i=t[d],i.label===s)return i}else return this.chart.data.datasets[s]},Iz=function(s,t){var i=this.getChartDataset(s);if(i!==void 0){if(typeof t=="string"){var d=this.chart.data.labels;if(t=d.indexOf(t),t===-1)return}return i.data[t]}},wz=function(s,t,i){if(this.chart===void 0)return this;var d=this.getChartDataset(s);if(typeof t=="string"){var e=this.chart.data.labels;if(t=e.indexOf(t),t===-1)return this}return d.data[t]=i,this},Dz=function(){return this.chart===void 0?this:(this.chart.update(),this)},Po=class extends Yi{constructor(t,i,d,e,n,h){super(t,i,d,e,n);this.type="rexChart",this.chart=void 0,h!==void 0&&this.setChart(h)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,i){if(t===this.width&&i===this.height)return this;if(super.resize(t,i),this.chart){var d=this.chart;d.height=this.canvas.height,d.width=this.canvas.width,d.aspectRatio=d.height?d.width/d.height:null,d.update()}return this}},Bz={setChart:Lz,getChartDataset:Fz,getChartData:Iz,setChartData:wz,updateChart:Dz};Object.assign(Po.prototype,Bz);var Gz=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,i=this.sizerChildren,d,e,n;if(this.orientation===0)for(var h=0,r=i.length;h<r;h++)d=i[h],!d.rexSizer.hidden&&(d.rexSizer.proportion===0||s?n=this.getChildWidth(d):n=0,e=d.rexSizer.padding,n+=e.left+e.right,h>0&&(n+=this.space.item),t+=n);else for(var h=0,r=i.length;h<r;h++)d=i[h],!!d.hasOwnProperty("rexSizer")&&(d.rexSizer.hidden||(e=d.rexSizer.padding,n=this.getChildWidth(d)+e.left+e.right,t=Math.max(n,t)));return t+this.space.left+this.space.right},bz=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,i=this.sizerChildren,d,e,n;if(this.orientation===0)for(var h=0,r=i.length;h<r;h++)d=i[h],!d.rexSizer.hidden&&(e=d.rexSizer.padding,n=this.getChildHeight(d)+e.top+e.bottom,t=Math.max(n,t));else for(var h=0,r=i.length;h<r;h++)d=i[h],!!d.hasOwnProperty("rexSizer")&&(d.rexSizer.hidden||(d.rexSizer.proportion===0||s?n=this.getChildHeight(d):n=0,e=d.rexSizer.padding,n+=e.top+e.bottom,h>0&&(n+=this.space.item),t+=n));return t+this.space.top+this.space.bottom},Nz=function(s,t){t===void 0&&(t=this.width);var i,d=s.rexSizer,e=d.padding;if(this.orientation===0)d.proportion>0&&this.proportionLength>0&&(i=d.proportion*this.proportionLength);else if(d.expand){var n=t-this.space.left-this.space.right;i=n-e.left-e.right}return i},Yz=function(s,t){t===void 0&&(t=this.height);var i,d=s.rexSizer,e=d.padding;if(this.orientation===0){if(d.expand){var n=t-this.space.top-this.space.bottom;i=n-e.top-e.bottom}}else d.proportion>0&&this.proportionLength>0&&(i=d.proportion*this.proportionLength);return i},zz=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,i,d=0,e=t.length;d<e;d++)i=t[d],i.isRexSizer&&s.push(i);return s},Uz=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,eo.call(this),this},Vz=Phaser.Math.Wrap,Wz=function(){for(var s=this.sizerChildren,t,i,d,e=this.innerLeft,n=this.innerTop,h=this.innerWidth,r=this.innerHeight,o=e,l=n,a,u,c,f,v,p,g,m=this.startChildIndex,x=0,y=s.length;x<y;x++)m===0?g=x:g=Vz(x+m,0,y),this.rtl&&(g=y-g-1),t=s[g],!t.rexSizer.hidden&&(i=t.rexSizer,d=i.padding,lo.call(this,t),t.isRexSpace?(v=0,p=0):(v=this.getExpandedChildWidth(t),p=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,v,p),mv(t,this)):vs(t,v,p),v===void 0&&(v=_t(t)),p===void 0&&(p=Jt(t)),this.orientation===0?(a=o+d.left,i.proportion===0||this.proportionLength===0?c=v:c=i.proportion*this.proportionLength,u=l+d.top,f=r-d.top-d.bottom):(a=o+d.left,c=h-d.left-d.right,u=l+d.top,i.proportion===0||this.proportionLength===0?f=p:f=i.proportion*this.proportionLength),uo.call(this,t,a,u,c,f,i.align),this.orientation===0?o+=c+d.left+d.right+this.space.item:l+=f+d.top+d.bottom+this.space.item)},Xz=function(s){var s=jd.call(this,s);if(this.proportionLength===void 0&&this.orientation===0){var t=s-this.childrenWidth;t>0?(t=s-this.getChildrenWidth(!1),this.proportionLength=t/this.childrenProportion):this.proportionLength=0}return s},Hz=function(s,t){var t=qd.call(this,s,t);if(this.proportionLength===void 0&&this.orientation===1){var i=t-this.childrenHeight;i>0?(i=t-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},$z=Phaser.GameObjects.Zone,Kr=class extends $z{constructor(t){super(t,0,0,1,1);this.isRexSpace=!0}},Kz=function(s,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var d=-1,e=Infinity,n=0,h=i.length;n<h;n++){var r=i[n],o;this.orientation===0?o=Math.abs(r.left-s):o=Math.abs(r.top-t),e>o&&(e=o,d=n)}var r=i[i.length-1],o;return this.orientation===0?o=Math.abs(r.right-s):o=Math.abs(r.bottom-t),e>o&&(e=o,d=n+1),d},DT=Phaser.Utils.Objects.IsPlainObject,gs=Phaser.Utils.Objects.GetValue,BT=Phaser.Display.Align.CENTER,Zz={min:0,full:-1},Tv=function(s,t,i,d,e,n,h,r,o){to.call(this,s);var l=s.isRexSpace,a=typeof t;if(t===null)return this;if(a!=="number"){if(a==="string")t=Zz[t];else if(DT(t)){var u=t;t=gs(u,"proportion",void 0),i=gs(u,"align",BT),d=gs(u,"padding",0),e=gs(u,"expand",!1),n=gs(u,"key",void 0),h=gs(u,"index",void 0),s.isRexSizer||(r=gs(u,"minWidth",void 0),o=gs(u,"minHeight",void 0))}}typeof i=="string"&&(i=El[i]),t===void 0&&(t=l?1:0),i===void 0&&(i=BT),d===void 0&&(d=0),e===void 0&&(e=!1),r===void 0&&(l?r=0:s.isRexSizer||(r=s._minWidth)),o===void 0&&(l?o=0:s.isRexSizer||(o=s._minHeight));var u=this.getSizerConfig(s);return u.proportion=t,u.align=i,u.padding=Gr(d),u.expand=e,h===void 0||h>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(h,0,s),s.isRexSizer||(t>0&&(this.orientation===0?s.minWidth=r===void 0?_t(s):r:s.minHeight=o===void 0?Jt(s):o),e&&(this.orientation===0?s.minHeight=o:s.minWidth=r)),n!==void 0&&this.addChildrenMap(n,s),this},Jz={add:Tv,addSpace(s){return this.insertSpace(void 0,s),this},insertSpace(s,t){return t===void 0&&(t=1),Tv.call(this,new Kr(this.scene),{proportion:t,minWidth:0,minHeight:0,index:s}),this},insert(s,t,i,d,e,n,h,r){return DT(i)&&(i.index=s),Tv.call(this,t,i,d,e,n,h,s,r),this},insertAtPosition(s,t,i,d,e,n,h,r,o){var l=Kz.call(this,s,t);return l===-1&&(l=void 0),this.insert(l,i,d,e,n,h,r,o),this}},Qz=Phaser.Utils.Array.Remove,kz={remove(s,t){return this.getParentSizer(s)!==this?this:(Qz(this.sizerChildren,s),Ul.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,Vl.call(this,s),this}},GT={getChildrenWidth:Gz,getChildrenHeight:bz,getExpandedChildWidth:Nz,getExpandedChildHeight:Yz,getChildrenSizers:zz,preLayout:Uz,layoutChildren:Wz,resolveWidth:Xz,resolveHeight:Hz};Object.assign(GT,Jz,kz);var jz=function(){for(var s=0,t=this.sizerChildren,i,d,e=0,n=t.length;e<n;e++)i=t[e],!i.rexSizer.hidden&&(d=i.rexSizer.proportion,d>0&&(s+=d));return s},qz={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Cv=function(s){return typeof s=="string"&&(s=qz[s]),s},Sv=Phaser.Utils.Objects.IsPlainObject,Xi=Phaser.Utils.Objects.GetValue,te=class extends ps{constructor(t,i,d,e,n,h,r){Sv(i)?(r=i,i=Xi(r,"x",0),d=Xi(r,"y",0),e=Xi(r,"width",void 0),n=Xi(r,"height",void 0),h=Xi(r,"orientation",0)):Sv(e)?(r=e,e=Xi(r,"width",void 0),n=Xi(r,"height",void 0),h=Xi(r,"orientation",0)):Sv(h)&&(r=h,h=Xi(r,"orientation",0)),h===void 0&&(h=0),super(t,i,d,e,n,r),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(h),this.setItemSpacing(Xi(r,"space.item",0)),this.setStartChildIndex(Xi(r,"startChildIndex",0)),this.setRTL(Xi(r,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Cv(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=jz.call(this)),this._childrenProportion}};Object.assign(te.prototype,GT);var bT=function(){return Array.prototype.reduce.call(arguments,_z,0)},_z=function(s,t){return s+t},t5=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,i,d=this.sizerChildren,e,n,h,r,o=0;o<this.columnCount;o++){if(r=this.columnProportions[o],i=0,r===0||s){for(var l=0;l<this.rowCount;l++)e=d[l*this.columnCount+o],!!e&&(e.rexSizer.hidden||(n=e.rexSizer.padding,h=this.getChildWidth(e)+n.left+n.right,i=Math.max(i,h)));t+=i}this.columnWidth[o]=i}var a=this.space,u=Math.max(a.indentLeftOdd,a.indentLeftEven);return t+bT(a.left,u,...a.column,a.right)},e5=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,i,d=this.sizerChildren,e,n,h,r,o=0;o<this.rowCount;o++){if(r=this.rowProportions[o],i=0,r===0||s){for(var l=0;l<this.columnCount;l++)e=d[o*this.columnCount+l],!!e&&(e.rexSizer.hidden||(h=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Jt(e),n=e.rexSizer.padding,h+=n.top+n.bottom,i=Math.max(i,h)));t+=i}this.rowHeight[o]=i}var a=this.space,u=Math.max(a.indentTopOdd,a.indentTopEven);return t+bT(a.top,u,...a.row,a.bottom)},i5=function(s,t){var i,d=s.rexSizer;if(d.expand){var e=d.padding;i=t-e.left-e.right}return i},n5=function(s,t){var i,d=s.rexSizer;if(d.expand){var e=d.padding;i=t-e.top-e.bottom}return i},s5=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,i,d=0,e=t.length;d<e;d++)i=t[d],i&&i.isRexSizer&&s.push(i);return s},r5=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,eo.call(this),this},a5=function(){for(var s,t,i,d=this.innerLeft,e=this.innerTop,n,h=e,r,o,l,a,u,c,f=this.space.column,v=this.space.row,p=this.space.indentLeftOdd,g=this.space.indentLeftEven,m=this.space.indentTopOdd,x=this.space.indentTopEven,y,T,C,S,E=0;E<this.rowCount;E++){T=this.getRowHeight(E),C=E%2?g:p,n=d+C;for(var M=0;M<this.columnCount;M++){if(y=this.getColumnWidth(M),s=this.getChildAt(M,E),!s||s.rexSizer.hidden){n+=y+f[M];continue}lo.call(this,s),u=this.getExpandedChildWidth(s,y),c=this.getExpandedChildHeight(s,T),s.isRexSizer?(s.runLayout(this,u,c),mv(s,this)):vs(s,u,c),t=s.rexSizer,i=t.padding,r=n+i.left,l=y-i.left-i.right,S=M%2?x:m,o=h+S+i.top,a=T-i.top-i.bottom,uo.call(this,s,r,o,l,a,t.align),n+=y+f[M]}h+=T+v[E]}},o5=function(s){var s=jd.call(this,s);if(this.proportionWidthLength===void 0){var t=this.totalColumnProportions;if(t>0){var i=s-this.getChildrenWidth(!1);i>=0&&(this.proportionWidthLength=i/t)}else this.proportionWidthLength=0}return s},h5=function(s,t){var t=qd.call(this,s,t);if(this.proportionHeightLength===void 0){var i=this.totalRowProportions;if(i>0){var d=t-this.getChildrenHeight(!1);d>=0&&(this.proportionHeightLength=d/i)}else this.proportionHeightLength=0}return t},l5=function(s){var t,i,d;for(var e in this.sizerChildren)t=this.sizerChildren[e],t&&t.isRexSizer&&!t.ignoreLayout&&(d=this.getColumnWidth(parseInt(e)%this.columnCount),i=this.getExpandedChildWidth(t,d),i=t.resolveWidth(i),t.resolveChildrenWidth(i))},u5=function(s){var t,i,d;for(var e in this.sizerChildren)t=this.sizerChildren[e],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(d=this.getColumnWidth(parseInt(e)%this.columnCount),i=this.getExpandedChildWidth(t,d),t.isRexSizer&&(i=t.resolveWidth(i)),t.runWidthWrap(i));return this},f5=Phaser.Utils.Objects.IsPlainObject,Zr=Phaser.Utils.Objects.GetValue,NT=Phaser.Display.Align.CENTER,YT=function(s,t,i,d,e){if(typeof s=="number"||typeof t=="number")if(s===void 0){for(var n,h=0;h<d;h++)if(n=t*d+h,!i[n])return n}else if(t===void 0){for(var n,h=0;h<e;h++)if(n=h*d+s,!i[n])return n}else{var n=t*d+s;if(!i[n])return n}else if(t===!0){for(var n,h=0;h<d;h++)for(var r=0;r<e;r++)if(n=r*d+h,!i[n])return n}else for(var h=0,o=i.length;h<o;h++)if(!i[h])return h;return null},d5=function(s,t,i,d,e,n,h){if(to.call(this,s),f5(t)){var o=t;t=Zr(o,"column",void 0),i=Zr(o,"row",void 0),d=Zr(o,"align",NT),e=Zr(o,"padding",0),n=Zr(o,"expand",!1),h=Zr(o,"key",void 0)}var r=YT(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(r===null){if(typeof t=="number"&&typeof i=="number")return this;i===!0||typeof i=="number"?this.addEmptyColumn():this.addEmptyRow(),r=YT(t,i,this.sizerChildren,this.columnCount,this.rowCount)}typeof d=="string"&&(d=El[d]),d===void 0&&(d=NT),e===void 0&&(e=0),n===void 0&&(n=!0);var o=this.getSizerConfig(s);return o.align=d,o.padding=Gr(e),o.expand=n,this.sizerChildren[r]=s,h!==void 0&&this.addChildrenMap(h,s),this},v5={add:d5},Jr=function(s,t,i,d){i===void 0&&(i=0),d===void 0&&(d=s.length-1);for(var e=i;e<=d;e++)s[e]=t;return s},c5={remove(s,t){if(this.getParentSizer(s)!==this)return this;var i=this.sizerChildren.indexOf(s);return i!==-1&&(this.sizerChildren[i]=null),Ul.call(this,s,t),this},removeAt(s,t,i){var d=this.getChildAt(s,t);return d&&this.remove(d,i),this},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];!i||this.remove(i,s)}return this},clear(s){return Jr(this.sizerChildren,null),Vl.call(this,s),this}},zT=Phaser.Utils.Objects.GetValue,p5=function(s,t,i,d,e){if(i===void 0&&(i=0),d===void 0&&(d=0),this.columnCount=s,this.rowCount=t,this.gridCount=s*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=s*t,Jr(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=s,typeof i=="number")Jr(this.columnProportions,i);else for(var n=0;n<s;n++)this.columnProportions[n]=i[n]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof d=="number")Jr(this.rowProportions,d);else for(var n=0;n<t;n++)this.rowProportions[n]=d[n]||0;this.columnWidth=[],this.columnWidth.length=s,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=s-1;var h=zT(e,"column",0);if(typeof h=="number")Jr(this.space.column,h);else for(var n=0,r=this.space.column.length;n<r;n++)this.space.column[n]=h[n]||0;this.space.row=[],this.space.row.length=t-1;var o=zT(e,"row",0);if(typeof o=="number")Jr(this.space.row,o);else for(var n=0,r=this.space.row.length;n<r;n++)this.space.row[n]=o[n]||0;return this},UT=function(s,t,i){t===void 0&&(t=this.rowProportions[0]||0),i===void 0&&(i=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var d=[s*this.columnCount,0],e=0;e<this.columnCount;e++)d.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,d),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(s,0,i),this},g5=function(s,t){return UT.call(this,this.rowCount,s,t),this},VT=function(s,t,i){t===void 0&&(t=this.columnProportions[0]||0),i===void 0&&(i=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var d=this.rowCount-1;d>=0;d--){var e=d*this.columnCount+s;this.sizerChildren.splice(e,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(s,0,i),this},m5=function(s,t){return VT.call(this,this.columnCount,s,t),this},WT={getChildrenWidth:t5,getChildrenHeight:e5,getExpandedChildWidth:i5,getExpandedChildHeight:n5,getChildrenSizers:s5,preLayout:r5,layoutChildren:a5,resolveWidth:o5,resolveHeight:h5,resolveChildrenWidth:l5,runWidthWrap:u5,resetGrid:p5,inseryEmptyRow:UT,addEmptyRow:g5,insertEmptyColumn:VT,addEmptyColumn:m5};Object.assign(WT,v5,c5);var x5=function(){for(var s=0,t,i=0;i<this.columnCount;i++)t=this.columnProportions[i],t>0&&(s+=t);return s},y5=function(){for(var s=0,t,i=0;i<this.rowCount;i++)t=this.rowProportions[i],t>0&&(s+=t);return s},$l=Phaser.Utils.Objects.IsPlainObject,se=Phaser.Utils.Objects.GetValue,rn=class extends ps{constructor(t,i,d,e,n,h,r,o,l,a){$l(i)?(a=i,i=se(a,"x",0),d=se(a,"y",0),e=se(a,"width",void 0),n=se(a,"height",void 0),h=se(a,"column",a.col||0),r=se(a,"row",0),o=se(a,"columnProportions",0),l=se(a,"rowProportions",0)):$l(e)?(a=e,e=se(a,"width",void 0),n=se(a,"height",void 0),h=se(a,"column",a.col||0),r=se(a,"row",0),o=se(a,"columnProportions",0),l=se(a,"rowProportions",0)):$l(h)?(a=h,h=se(a,"column",a.col||0),r=se(a,"row",0),o=se(a,"columnProportions",0),l=se(a,"rowProportions",0)):$l(o)&&(a=o,o=se(a,"columnProportions",0),l=se(a,"rowProportions",0)),super(t,i,d,e,n,a),this.type="rexGridSizer",this.resetGrid(h,r,o,l,se(a,"space",void 0)),this.setIndentLeft(se(a,"space.indentLeftOdd",0),se(a,"space.indentLeftEven",0)),this.setIndentTop(se(a,"space.indentTopOdd",0),se(a,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var u=se(a,"createCellContainerCallback");if(u)for(var d=0,c=this.rowCount;d<c;d++)for(var i=0,f=this.columnCount;i<f;i++){var v={column:i,row:d},p=u(t,i,d,v);p&&this.add(p,v)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIndentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setColumnProportion(t,i){return t>=this.columnProportions.length?this:(this.columnProportions[t]=i,this)}setRowProportion(t,i){return t>=this.rowProportions.length?this:(this.rowProportions[t]=i,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=x5.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=y5.call(this)),this._totalRowProportions}getChildAt(t,i){return this.sizerChildren[i*this.columnCount+t]}childToGridIndex(t,i){if(!t)return null;var d=this.sizerChildren.indexOf(t);return d===-1?null:(i===void 0&&(i={}),i.x=d%this.columnCount,i.y=Math.floor(d/this.columnCount),i)}getColumnWidth(t){var i=this.columnProportions[t],d=i===0?this.columnWidth[t]:i*this.proportionWidthLength;return d}getRowHeight(t){var i=this.rowProportions[t],d=i===0?this.rowHeight[t]:i*this.proportionHeightLength;return d}};Object.assign(rn.prototype,WT);var T5=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},C5=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},S5=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,i,d=0,e=t.length;d<e;d++)i=t[d],i!==`
`&&i.isRexSizer&&s.push(i);return s},E5=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,eo.call(this),this},P5=function(){for(var s=this.innerWidth,t=this.justifyPercentage,i=this.space.item,d=this.space.line,e=this.space.indentLeftOdd,n=this.space.indentLeftEven,h=this.space.indentTopOdd,r=this.space.indentTopEven,o,l,a,u=0,c,f,v=this.innerLeft,p=this.innerTop,g,m,x,y,T=this.widthWrapResult.lines,C,S,E,M,R=p,L=0,O=T.length;L<O;L++){switch(C=T[L],S=C.children,this.rtl&&S.reverse(),c=L%2?n:e,M=v+c,E=s-C.width,this.align){case 0:break;case 1:M+=E;break;case 2:M+=E/2;break;case 3:u=Ev(s,E,t,S.length);break;case 4:u=Ev(s,E,t,S.length),u===0&&(M+=E);break;case 5:u=Ev(s,E,t,S.length),u===0&&(M+=E/2);break}for(var F=0,D=S.length;F<D;F++)o=S[F],!o.rexSizer.hidden&&(l=o.rexSizer,a=l.padding,lo.call(this,o),g=M+a.left,F>0&&(g+=i),f=F%2?r:h,m=R+f+a.top,x=_t(o),y=Jt(o),M=g+x+a.right+u,uo.call(this,o,g,m,x,y,l.align));R+=C.height+d}},Ev=function(s,t,i,d){return t/s<=i?t/(d-1):0},R5=function(s,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var i=this.sizerChildren,d=this.space.item,e=this.space.line,n=this.space.indentLeftOdd,h=this.space.indentLeftEven,r=this.space.indentTopOdd,o=this.space.indentTopEven,l,a,u,c=0,f,v=t.lines,p=void 0,g,m=0,x=i.length;m<x;m++){if(l=i[m],l===`
`)l=void 0,a=0,g=!0;else{if(l.rexSizer.hidden)continue;l.isRexSizer&&l.layout(),a=M5(l),g=c<a||p===void 0}if(g){p&&(p.width=s-(c+d),t.width=Math.max(t.width,p.width),t.height+=p.height+e),p={children:[],height:0},v.push(p);var f=v.length%2?n:h;c=s-f}c-=a+d,l&&(p.children.push(l),u=A5(l),p.height=Math.max(p.height,u))}return p&&(p.width=s-(c+d),t.width=Math.max(t.width,p.width),t.height+=p.height),t.height+=Math.max(r,o),t},M5=function(s){var t=s.rexSizer.padding;return _t(s)+t.left+t.right},A5=function(s){var t=s.rexSizer.padding;return Jt(s)+t.top+t.bottom},O5=function(s){var t=s-this.space.left-this.space.right;this.widthWrapResult=R5.call(this,t,this.widthWrapResult),Yy.call(this,s)},XT=Phaser.Math.Distance.Between,L5=function(s,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var d=-1,e=Infinity,n=0,h=i.length;n<h;n++){var r=i[n];if(!(Math.abs(r.centerY-t)>r.height/2)){var o=XT(r.left,r.centerY,s,t);e>o&&(e=o,d=n);var l=i[n+1];if(!(l&&l.y===r.y)){var o=XT(r.right,r.centerY,s,t);e>o&&(e=o,d=n+1)}}}return d},F5=Phaser.Utils.Objects.IsPlainObject,Pv=Phaser.Utils.Objects.GetValue,I5=Phaser.Display.Align.CENTER,Mv=function(s,t,i,d){if(s===`
`)return this.addNewLine(),this;if(to.call(this,s),F5(t)){var e=t;t=Pv(e,"padding",0),i=Pv(e,"key",void 0),d=Pv(e,"index",void 0)}t===void 0&&(t=0);var e=this.getSizerConfig(s);return e.align=I5,e.padding=Gr(t),d===void 0||d>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(d,0,s),i!==void 0&&this.addChildrenMap(i,s),this},w5={add(s,t,i){if(nn(s))for(var d=s,e=0,n=d.length;e<n;e++)Mv.call(this,d[e],t);else Mv.call(this,s,t,i);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(s,t,i,d){return Mv.call(this,t,i,d,s),this},insertAtPosition(s,t,i,d,e){var n=L5.call(this,s,t);return n===-1&&(n=void 0),this.insert(n,i,d,e),this}},D5=Phaser.Utils.Array.Remove,B5={remove(s,t){return this.getParentSizer(s)!==this?this:(D5(this.sizerChildren,s),Ul.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,Vl.call(this,s),this}},HT={getChildrenWidth:T5,getChildrenHeight:C5,getChildrenSizers:S5,preLayout:E5,layoutChildren:P5,runWidthWrap:O5};Object.assign(HT,w5,B5);var G5=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,i,d,e=0,n=s.length;e<n;e++)i=s[e],i!==`
`&&(d=this.getChildWidth(i),t=Math.max(d,t));return t},b5=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,i,d,e=0,n=s.length;e<n;e++)i=s[e],i!==`
`&&(d=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:Jt(i),t=Math.max(d,t));return t},$T=Phaser.Utils.Objects.IsPlainObject,Ve=Phaser.Utils.Objects.GetValue,yn=class extends ps{constructor(t,i,d,e,n,h){$T(i)?(h=i,i=Ve(h,"x",0),d=Ve(h,"y",0),e=Ve(h,"width",void 0),n=Ve(h,"height",void 0)):$T(e)&&(h=e,e=Ve(h,"width",void 0),n=Ve(h,"height",void 0)),super(t,i,d,e,n,h),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Ve(h,"orientation",0)),this.setItemSpacing(Ve(h,"space.item",0)),this.setLineSpacing(Ve(h,"space.line",0)),this.setIntentLeft(Ve(h,"space.indentLeftOdd",0),Ve(h,"space.indentLeftEven",0)),this.setIntentTop(Ve(h,"space.indentTopOdd",0),Ve(h,"space.indentTopEven",0)),this.setAlign(Ve(h,"align",0)),this.setJustifyPercentage(Ve(h,"justifyPercentage",.25)),this.setRTL(Ve(h,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Cv(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIntentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setAlign(t){return typeof t=="string"&&(t=N5[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=G5.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=b5.call(this)),this._maxChildHeight}},N5={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(yn.prototype,HT);var Mo=function(s,t,i,d){var e=new Hl(t,i,d);if(s&&!s.isRexSizer){var n=e.createGeometryMask();s.setMask(n),this.once("destroy",function(){s.setMask(),n.destroy()})}return this.pin(e),e},an=Phaser.Utils.Objects.GetValue,ms=class extends te{constructor(t,i){super(t,i);this.type="rexLabel";var d=an(i,"background",void 0),e=an(i,"icon",void 0),n=an(i,"iconMask",void 0),h=an(i,"text",void 0),r=an(i,"action",void 0),o=an(i,"actionMask",void 0),l=an(i,"align",void 0),a=an(i,"space.icon",0),u=an(i,"space.text",0);if(d&&this.addBackground(d),(l==="right"||l==="bottom"||l==="center")&&this.addSpace(),e){var c;this.orientation===0?(h||r)&&(c={right:a}):(h||r)&&(c={bottom:a}),this.add(e,{proportion:0,padding:c}),n&&(n=Mo.call(this,e,e,1))}if(h){var f=an(i,"expandTextWidth",!1),v=an(i,"expandTextHeight",!1),p,c,g;this.orientation===0?(p=f?1:0,r&&(c={right:u}),g=v):(p=v?1:0,r&&(c={bottom:u}),g=f),this.add(h,{proportion:p,expand:g,padding:c})}r&&(this.add(r),o&&(o=Mo.call(this,r,r,1))),l==="center"&&this.addSpace(),this.addChildrenMap("background",d),this.addChildrenMap("icon",e),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",h),this.addChildrenMap("action",r),this.addChildrenMap("actionMask",o)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var i=this.childrenMap.text;i!==void 0&&i.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,i){var d=this.childrenMap.icon;if(d!==void 0)return d.setTexture(t,i),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,i,d){if(this.ignoreLayout)return this;super.runLayout(t,i,d);var e=this.childrenMap.iconMask;e&&(e.setPosition(),this.resetChildPositionState(e));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,i){super.resize(t,i);var d=this.childrenMap.iconMask;d&&d.resize();var e=this.childrenMap.actionMask;return e&&e.resize(),this}},Kl=te.prototype.add,KT=te.prototype.addSpace,Av=function(s){var t=!s.isRexSpace,i=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var d=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");d&&KT.call(this),Kl.call(this,s,{proportion:i,expand:!0});var e=!this.buttonsExpand&&this.buttonsAlign==="center";e&&KT.call(this),this.hasTailSpace=e}else Kl.call(this,s,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;Kl.call(this,s,{index:n,proportion:i,expand:!0})}else Kl.call(this,s,{proportion:i,expand:!0});return t&&this.buttonGroup.add(s),this},Y5={addButton(s){if(nn(s))for(var t=s,i=0,d=t.length;i<d;i++)Av.call(this,t[i]);else Av.call(this,s);return this},addButtons(s){for(var t=0,i=s.length;t<i;t++)Av.call(this,s[t]);return this}},z5=te.prototype.remove,U5=te.prototype.clear,Rv=function(s,t){return this.getParentSizer(s)!==this?this:(this.buttonGroup.remove(s),z5.call(this,s,t),this)},V5={remove(s,t){if(nn(s))for(var i=s,d=0,e=i.length;d<e;d++)Rv.call(this,i[d],t);else Rv.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,U5.call(this,s),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(s){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Rv.call(this,t[i],s);return this}},W5={add(s){if(this.buttons.push(s),this.buttonsType){var t=s.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=s,this.dataManager.set(t,void 0).set(t,!1)}return s._buttonBehavior=new cs(s,this.clickConfig),s._buttonBehavior.on("click",function(i,d,e,n){this.fireEvent("button.click",d,e,n)},this).on("enable",function(i,d){this.fireEvent("button.enable",d)},this).on("disable",function(i,d){this.fireEvent("button.disable",d)},this),s.on("pointerover",function(i,d,e,n){this.fireEvent("button.over",s,i,n)},this).on("pointerout",function(i,d){this.fireEvent("button.out",s,i,d)},this),this},addMultiple(s){for(var t=0,i=s.length;t<i;t++)this.add(gameObject[t]);return this}},X5=Phaser.Utils.Array.Remove,H5={remove(s){if(X5(this.buttons,s),this.buttonsType){var t=s.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var s in this.buttonMap)delete this.buttonMap[s],this.dataManager.remove(s);return this}},$5=function(s,t,...i){var d;if(typeof t=="number"){if(d=t,t=this.buttons[d],!t)return}else if(d=this.buttons.indexOf(t),d===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(s,t,d,...i),this.groupName!==void 0?this.eventEmitter.emit(s,t,this.groupName,d,...i):this.eventEmitter.emit(s,t,d,...i)},Qr=Phaser.Utils.Objects.GetValue,ZT=function(s){var t=Qr(s,"dataManager",void 0);if(t===void 0){var i=this.parent;i.setDataEnabled(),t=i.data}this.dataManager=t;var d,e;d=Qr(s,"setValueCallback",void 0),e=Qr(s,"setValueCallbackScope",void 0),d===void 0&&(d=Qr(s,"setButtonStateCallback",void 0),e=Qr(s,"setButtonStateCallbackScope",void 0)),this.setValueCallback=d,this.setValueCallbackScope=e,t.events.on("changedata",function(n,h,r,o){var l=this.buttonMap[h];if(!!l){var a=this.setValueCallback,u=this.setValueCallbackScope;a&&(u?a.call(u,l,r,o):a(l,r,o)),this.fireEvent("button.statechange",l,r,o)}},this)},K5={setButtonsType(s){s===void 0&&(s={});var t=Qr(s,"buttonsType",s.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(s);break;case"checkboxes":this.setCheckboxesType(s);break}return this},setRadioType(s){ZT.call(this,s);var t=void 0,i=this.parent,d=this.buttons,e=this.dataManager;return Object.defineProperty(i,"value",{get:function(){return t},set:function(n){n!==t&&(t=n,d.forEach(function(h){var r=h.name,o=e.get(r);r===n?o||e.set(r,!0):o&&e.set(r,!1)}))},enumerable:!0,configurable:!0}),i.on("button.click",function(n){i.value=n.name}),this},setCheckboxesType(s){ZT.call(this,s);var t=this.parent,i=this.dataManager;return t.on("button.click",function(d){i.toggle(d.name)}),this},clearAllButtonsState(){for(var s in this.buttonMap)this.dataManager.set(s,!1);return this},getAllButtonsState(){var s={};for(var t in this.buttonMap)s[t]=this.dataManager.get(t);return s},setSelectedButtonName(s){return this.parent.value=s,this},getSelectedButtonName(){return this.parent.value},setButtonState(s,t){return t===void 0&&(t=!0),this.dataManager.set(s,t),this},getButtonState(s){return this.dataManager.get(s)}},Z5=function(s,t){if(s)if(nn(s)){for(var i,d=0,e=s.length;d<e;d++)if(i=JT(s[d],t),i)return i}else{var i;for(var n in s)if(i=JT(s[n],t),i)return i}else return null},JT=function(s,t){return s?s.hasOwnProperty("name")?s.name===t?s:null:GetElementByName(s,t):null},Zl={getButton(s){var t=this.buttons,i,d=typeof s;switch(d){case"number":i=t[s];break;case"string":i=Z5(t,s);break;default:i=s,t.indexOf(i)===-1&&(i=void 0);break}return i},setButtonEnable(s,t){var i=this.buttons;if(s===void 0||typeof s=="boolean"){t=s;for(var d=0,e=i.length;d<e;d++)i[d]._buttonBehavior.setEnable(t)}else this.getButton(s)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(s){var t=this.buttons;if(s===void 0||typeof s=="boolean")for(var i=0,d=t.length;i<d;i++)t[i]._buttonBehavior.toggleEnable();else this.getButton(s)._buttonBehavior.toggleEnable();return this},getButtonEnable(s){return s===void 0&&(s=0),this.getButton(s)._buttonBehavior.enable},emitButtonClick(s){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",s),this},showButton(s){return Wn(this.getButton(s)),this},hideButton(s){return Xn(this.getButton(s)),this},isButtonShown(s){return Ol(this.getButton(s)),this},forEachButtton(s,t){for(var i=this.buttons,d=0,e=i.length;d<e;d++)t?s.call(t,i[d],d,i):s(i[d],d,i);return this}},Ao=class{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}},J5={fireEvent:$5};Object.assign(Ao.prototype,W5,H5,K5,Zl,J5);var Ov={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(s){return this.buttonGroup.setSelectedButtonName(s),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(s,t){return this.buttonGroup.setButtonState(s,t),this},getButtonState(s){return this.buttonGroup.getButtonState(s)}},ks=Phaser.Utils.Objects.GetValue,Ce=class extends te{constructor(t,i){i===void 0&&(i={});var d=i.space;typeof d=="number"&&(i.space={item:d}),super(t,i),this.type="rexButtons",this.buttonGroup=new Ao({parent:this,eventEmitter:ks(i,"eventEmitter",this),groupName:ks(i,"groupName",void 0),clickConfig:ks(i,"click",void 0)}).setButtonsType(i);var e=ks(i,"background",void 0),n=ks(i,"buttons",void 0);this.buttonsExpand=ks(i,"expand",!1),this.buttonsAlign=ks(i,"align",void 0),e&&this.addBackground(e),n&&this.addButtons(n),this.addChildrenMap("background",e),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Ce.prototype,Y5,V5,Zl,Ov);var Q5=rn.prototype.add,k5={addButton(s,t,i){return Q5.call(this,s,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(s),this},addButtons(s,t){for(var i=0,d=s;i<d;i++)this.addButton(s[i],void 0,t);return this}},j5=rn.prototype.remove,q5=rn.prototype.clear,Lv=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),j5.call(this,s,t),this):this},_5={remove(s,t){if(nn(s))for(var i=s,d=0,e=i.length;d<e;d++)Lv.call(this,i[d],t);else Lv.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,q5.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Lv.call(this,t[i],s);return this}},Tn=Phaser.Utils.Objects.GetValue,js=class extends rn{constructor(t,i){i===void 0&&(i={});var d=Tn(i,"row",0),e=Tn(i,"column",i.col||0),n=Tn(i,"createCellContainerCallback"),h=Tn(i,"buttons",void 0),r=Tn(i,"expand",!0),o=r?1:0;if(n&&(i.createCellContainerCallback=void 0),h!==void 0){d=Math.max(d,h.length);for(var l=0,a=h.length;l<a;l++)e=Math.max(e,h[l].length)}i.row=d,i.column=e,i.columnProportions=o,i.rowProportions=o,super(t,i),this.type="rexGridButtons",this.buttonGroup=new Ao({parent:this,eventEmitter:Tn(i,"eventEmitter",this),groupName:Tn(i,"groupName",void 0),clickConfig:Tn(i,"click",void 0)}).setButtonsType(i);var u=Tn(i,"background",void 0);this.buttonsExpand=r;var c=Tn(i,"space",void 0);if(typeof c=="number"&&(c={itemX:c,itemY:c}),u&&this.addBackground(u),h)for(var f,v,p=0,g=h.length;p<g;p++){f=h[p];for(var m=0,x=f.length;m<x;m++)v=f[m],v&&this.addButton(v,m,p)}else if(n)for(var y=0;y<d;y++)for(var T=0;T<e;T++){var v=n(t,T,y);v&&this.addButton(v,T,y)}this.addChildrenMap("background",u),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(js.prototype,k5,_5,Zl,Ov);var QT=yn.prototype.add,Jl=function(s){return QT.call(this,s),this.buttonGroup.add(s),this},tU={addButton(s){if(nn(s))for(var t=s,i=0,d=t.length;i<d;i++)Jl.call(this,t[i]);else Jl.call(this,s);return this},addButtons(s){if(nn(s[0]))for(var t=s,i,d=0,e=t.length-1;d<=e;d++){i=t[d];for(var n=0,h=i.length;n<h;n++)Jl.call(this,i[n]);d>e&&QT.addNewLine(this)}else for(var n=0,h=s.length;n<h;n++)Jl.call(this,s[n]);return this}},eU=yn.prototype.remove,iU=yn.prototype.clear,Fv=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),eU.call(this,s,t),this):this},nU={remove(s,t){if(nn(s))for(var i=s,d=0,e=i.length;d<e;d++)Fv.call(this,i[d],t);else Fv.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,iU.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Fv.call(this,t[i],s);return this}},kr=Phaser.Utils.Objects.GetValue,Cn=class extends yn{constructor(t,i){i===void 0&&(i={});var d=i.space;typeof d=="number"&&(i.space={item:d,line:d}),super(t,i),this.type="rexFixWidthButtons",this.buttonGroup=new Ao({parent:this,eventEmitter:kr(i,"eventEmitter",this),groupName:kr(i,"groupName",void 0),clickConfig:kr(i,"click",void 0)}).setButtonsType(i);var e=kr(i,"background",void 0),n=kr(i,"buttons",void 0);this.buttonsAlign=kr(i,"align",void 0),e&&this.addBackground(e),n&&this.addButtons(n),this.addChildrenMap("background",e),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Cn.prototype,tU,nU,Zl,Ov);var sU={getChoice(s){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(s)},getAction(s){return this.childrenMap.actionsSizer.getButton(s)},getToolbar(s){return this.childrenMap.toolbarSizer.getButton(s)},getLeftToolbar(s){return this.childrenMap.leftToolbarSizer.getButton(s)},setChoiceEnable(s,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(s,t),this},setActionEnable(s,t){return this.childrenMap.actionsSizer.setButtonEnable(s,t),this},setToolbarEnable(s,t){return this.childrenMap.toolbarSizer.setButtonEnable(s,t),this},setLeftToolbarEnable(s,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(s,t),this},toggleChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(s),this},toggleActionEnable(s){return this.childrenMap.actionsSizer.toggleButtonEnable(s),this},toggleToolbarEnable(s){return this.childrenMap.toolbarSizer.toggleButtonEnable(s),this},toggleLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(s),this},getChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(s):!1},getActionEnable(s){return this.childrenMap.actionsSizer.getButtonEnable(s)},getToolbarEnable(s){return this.childrenMap.toolbarSizer.getButtonEnable(s)},getLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.getButtonEnable(s)},emitChoiceClick(s){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(s),this},emitActionClick(s){return this.childrenMap.actionsSizer.emitButtonClick(s),this},emitToolbarClick(s){return this.childrenMap.toolbarSizer.emitButtonClick(s),this},emitLeftToolbarClick(s){return this.childrenMap.leftToolbarSizer.emitButtonClick(s),this},showChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.showButton(s),this},showAction(s){return this.childrenMap.actionsSizer.showButton(s),this},showToolbar(s){return this.childrenMap.toolbarSizer.showButton(s),this},showLeftToolbar(s){return this.childrenMap.leftToolbarSizer.showButton(s),this},hideChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(s),this},hideAction(s){return this.childrenMap.actionsSizer.hideButton(s),this},hideToolbar(s){return this.childrenMap.toolbarSizer.hideButton(s),this},hideLeftToolbar(s){return this.childrenMap.leftToolbarSizer.hideButton(s),this},addChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.addButton(s),this},addAction(s){return this.childrenMap.actionsSizer.addButton(s),this},addToolbar(s){return this.childrenMap.toolbarSizer.addButton(s),this},addLeftToolbar(s){return this.childrenMap.leftToolbarSizer.addButton(s),this},removeChoice(s,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(s,t),this},removeAction(s,t){return this.childrenMap.actionsSizer.removeButton(s,t),this},removeToolbar(s,t){return this.childrenMap.toolbarSizer.removeButton(s,t),this},removeLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.removeButton(s,t),this},clearChoices(s){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(s),this},clearActions(s){return this.childrenMap.actionsSizer.clearButtons(s),this},clearToolbar(s){return this.childrenMap.toolbarSizer.clearButtons(s),this},clearLeftToolbar(s){return this.childrenMap.leftToolbarSizer.clearButtons(s),this},forEachChoice(s,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(s,t),this},forEachAction(s,t){return this.childrenMap.actionsSizer.forEachButtton(s,t),this},forEachToolbar(s,t){return this.childrenMap.toolbarSizer.forEachButtton(s,t),this},forEachLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.forEachButtton(s,t),this},setAllButtonsEnable(s){return s===void 0&&(s=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(s),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(s),this.childrenMap.actionsSizer&&this.setActionEnable(s),this.childrenMap.choicesSizer&&this.setChoiceEnable(s),this},getChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s?s.getAllButtonsState():{}},getChoicesButtonState(s){var t=this.childrenMap.choicesSizer;return s===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(s):!1},setChoicesButtonState(s,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(s,t),this},clearChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s&&s.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var s=this.childrenMap.choicesSizer;return s?s.getSelectedButtonName():""},setChoicesSelectedButtonName(s){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(s),this}},At=Phaser.Utils.Objects.GetValue,jr=class extends te{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexDialog",this.eventEmitter=At(i,"eventEmitter",this);var d=At(i,"background",void 0),e=At(i,"title",void 0),n=At(i,"toolbar",void 0),h=At(i,"toolbarBackground",void 0),r=At(i,"leftToolbar",void 0),o=At(i,"leftToolbarBackground",void 0),l=At(i,"content",void 0),a=At(i,"description",void 0),u,c=At(i,"choices",void 0),f=At(i,"choicesBackground",void 0),v,p=At(i,"actions",void 0),g=At(i,"actionsBackground",void 0),m=At(i,"click",void 0);d&&this.addBackground(d);var x;n&&(x=new Ce(t,{groupName:"toolbar",background:h,buttons:n,orientation:0,space:{item:At(i,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(r&&(y=new Ce(t,{groupName:"leftToolbar",background:o,buttons:r,orientation:0,space:{item:At(i,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),e||n||r){var T=!!e&&At(i,"expand.title",!0),C=At(i,"align.title","center"),S=e&&!T&&C==="center"||!e&&(n||r),E=!S,M;E?M=new te(t,{orientation:0}):M=new Ai(t);var R=E?!0:{height:!0};if(y&&M.add(y,{align:"left",expand:R}),e){E&&!T&&C==="right"&&M.addSpace();var F={left:At(i,"space.titleLeft",0),right:At(i,"space.titleRight",0)},L=T?1:0;M.add(e,{align:C,proportion:L,expand:R,padding:F}),E&&!T&&C==="left"&&M.addSpace()}x&&(E&&!e&&M.addSpace(),M.add(x,{align:"right",expand:R}));var O=At(i,"space.title",0),F;(l||a||c||p)&&(F={bottom:O}),this.add(M,{padding:F,expand:!0})}if(l){var D=At(i,"align.content","center"),B=At(i,"space.content",0),F={left:At(i,"space.contentLeft",0),right:At(i,"space.contentRight",0),bottom:a||c||p?B:0},N=At(i,"expand.content",!0);this.add(l,{align:D,padding:F,expand:N})}if(a){var D=At(i,"align.description","center"),V=At(i,"space.description",0),F={left:At(i,"space.descriptionLeft",0),right:At(i,"space.descriptionRight",0),bottom:c||p?V:0},N=At(i,"expand.description",!0);this.add(a,{align:D,padding:F,expand:N})}if(c){var X=At(i,"choicesType","").split("-"),K=Ro(X,"wrap")?Cn:Ro(X,"grid")?js:Ce,Z=Ro(X,"radio")?"radio":Ro(X,"checkboxes")?"checkboxes":void 0,G={left:At(i,"space.choicesBackgroundLeft",0),right:At(i,"space.choicesBackgroundRight",0),top:At(i,"space.choicesBackgroundTop",0),bottom:At(i,"space.choicesBackgroundBottom",0)},w=At(i,"space.choice",0);K===Ce?G.item=w:K===Cn?(G.item=w,G.line=At(i,"space.choiceLine",w)):(G.column=At(i,"space.choiceColumn",w),G.row=At(i,"space.choiceRow",w));var b={width:At(i,"choicesWidth",void 0),height:At(i,"choicesHeight",void 0),groupName:"choices",buttonsType:Z,background:f,buttons:c,space:G,click:m,eventEmitter:this.eventEmitter,setValueCallback:At(i,"choicesSetValueCallback",void 0),setValueCallbackScope:At(i,"choicesSetValueCallbackScope",void 0)};K===Ce&&(b.orientation=Ro(X,"x")?0:1),u=new K(t,b);var Y=At(i,"space.choices",0),F={left:At(i,"space.choicesLeft",0),right:At(i,"space.choicesRight",0),bottom:p?Y:0},D=At(i,"align.choices","center"),N=At(i,"expand.choices",!0);this.add(u,{align:D,padding:F,expand:N})}if(p){v=new Ce(t,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:At(i,"space.action",0)},expand:At(i,"expand.actions",!1),align:At(i,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var F={left:At(i,"space.actionsLeft",0),right:At(i,"space.actionsRight",0)};this.add(v,{align:"center",padding:F,expand:!0})}this.addChildrenMap("background",d),this.addChildrenMap("title",e),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",r),this.addChildrenMap("content",l),this.addChildrenMap("description",a),this.addChildrenMap("choices",c),this.addChildrenMap("actions",p),this.addChildrenMap("choicesSizer",u),this.addChildrenMap("actionsSizer",v),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}},Ro=function(s,t){return s.indexOf(t)!==-1};Object.assign(jr.prototype,sU);var re=Phaser.Utils.Objects.GetValue,Oo=class extends te{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexHolyGrail";var d=re(i,"background",void 0);d&&this.addBackground(d);var e=re(i,"header",void 0);if(e){var n=re(i,"proportion.header",0),h=re(i,"align.header","center"),r=re(i,"space.header",void 0);typeof r=="number"&&(r={bottom:r});var o=re(i,"expand.header",!0);this.add(e,{proportion:n,align:h,padding:r,expand:o})}var l=new te(t,{orientation:0});this.add(l,{proportion:1,align:"center",padding:0,expand:!0});var a=re(i,"leftSide",void 0);if(a){var n=re(i,"proportion.leftSide",0),h=re(i,"align.leftSide","center"),r=re(i,"space.leftSide",void 0);typeof r=="number"&&(r={right:r});var o=re(i,"expand.leftSide",!0);l.add(a,{proportion:n,align:h,padding:r,expand:o})}var u=re(i,"content",void 0);if(u){var n=re(i,"proportion.content",1),h=re(i,"align.content","center"),r=re(i,"space.content",void 0),o=re(i,"expand.content",!0);l.add(u,{proportion:n,align:h,padding:r,expand:o})}var c=re(i,"rightSide",void 0);if(c){var n=re(i,"proportion.rightSide",0),h=re(i,"align.rightSide","center"),r=re(i,"space.rightSide",void 0);typeof r=="number"&&(r={left:r});var o=re(i,"expand.rightSide",!0);l.add(c,{proportion:n,align:h,padding:r,expand:o})}var f=re(i,"footer",void 0);if(f){var n=re(i,"proportion.footer",0),h=re(i,"align.footer","center"),r=re(i,"space.footer",void 0);typeof r=="number"&&(r={top:r});var o=re(i,"expand.footer",!0);this.add(f,{proportion:n,align:h,padding:r,expand:o})}this.addChildrenMap("background",d),this.addChildrenMap("header",e),this.addChildrenMap("leftSide",a),this.addChildrenMap("content",u),this.addChildrenMap("rightSide",c),this.addChildrenMap("footer",f)}},rU={getButtonsSizer(s){return this.childrenMap[`${s}ButtonsSizer`]},getButton(s,t){var i=this.getButtonsSizer(s);return i?i.getButton(t):void 0},setButtonEnable(s,t,i){return this.getButtonsSizer(s).setButtonEnable(t,i),this},setLeftButtonEnable(s,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(s,t),this},setRightButtonEnable(s,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(s,t),this},setTopButtonEnable(s,t){return this.childrenMap.topButtonsSizer.setButtonEnable(s,t),this},setBottomButtonEnable(s,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(s,t),this},toggleButtonEnable(s,t){return this.getButtonsSizer(s).toggleButtonEnable(t),this},toggleLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(s),this},toggleRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(s),this},toggleTopButtonEnable(s){return this.childrenMap.topButtonsSizer.toggleButtonEnable(s),this},toggleBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(s),this},getButtonEnable(s,t){return this.getButtonsSizer(s).getButtonEnable(t)},getLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.getButtonEnable(s)},getRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.getButtonEnable(s)},getTopButtonEnable(s){return this.childrenMap.topButtonsSizer.getButtonEnable(s)},getBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.getButtonEnable(s)},emitButtonClick(s,t){var i=this.getButtonsSizer(s);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(s){return this.childrenMap.leftButtonsSizer.emitButtonClick(s),this},emitRightButtonClick(s){return this.childrenMap.rightButtonsSizer.emitButtonClick(s),this},emitTopButtonClick(s){return this.childrenMap.topButtonsSizer.emitButtonClick(s),this},emitBottomButtonClick(s){return this.childrenMap.bottomButtonsSizer.emitButtonClick(s),this},getLeftButton(s){return this.childrenMap.leftButtonsSizer.getButton(s)},getRightButton(s){return this.childrenMap.rightButtonsSizer.getButton(s)},getTopButton(s){return this.childrenMap.topButtonsSizer.getButton(s)},getBottomButton(s){return this.childrenMap.bottomButtonsSizer.getButton(s)},showButton(s,t){return Wn(this.getButton(s,t)),this},showLeftButton(s){return Wn(this.getLeftButton(s)),this},showRightButton(s){return Wn(this.getRightButton(s)),this},showTopButton(s){return Wn(this.getTopButton(s)),this},showBottomButton(s){return Wn(this.getBottomButton(s)),this},hideButton(s,t){return Xn(this.getButton(s,t)),this},hideLeftButton(s){return Xn(this.getLeftButton(s)),this},hideRightButton(s){return Xn(this.getRightButton(s)),this},hideTopButton(s){return Xn(this.getTopButton(s)),this},hideBottomButton(s){return Xn(this.getBottomButton(s)),this},addButton(s,t){return this.getButtonsSizer(s).addButton(t),this},addLeftButton(s){return this.addButton("left",s),this},addRightButton(s){return this.addButton("right",s),this},addTopButton(s){return this.addButton("top",s),this},removeButton(s,t,i){return this.getButtonsSizer(s).removeButton(t,i),this},removeLeftButton(s,t){return this.removeButton("left",s,t),this},removeRightButton(s,t){return this.removeButton("right",s,t),this},removeTopButton(s,t){return this.removeButton("top",s,t),this},removeBottomButton(s,t){return this.removeButton("bottom",s,t),this},clearButtons(s,t){return this.getButtonsSizer(s).clearButtons(t),this},clearLeftButtons(s){return this.clearButtons("left",s),this},clearRightButtons(s){return this.clearButtons("right",s),this},clearTopButtons(s){return this.clearButtons("top",s),this},clearBottomButtonss(s){return this.clearButtons("bottom",s),this},forEachButton(s,t,i){return this.getButtonsSizer(s).forEachButtton(t,i),this},forEachLeftButton(s,t){return this.childrenMap.leftButtonsSizer.forEachButtton(s,t),this},forEachRightButton(s,t){return this.childrenMap.rightButtonsSizer.forEachButtton(s,t),this},forEachTopButton(s,t){return this.childrenMap.topButtonsSizer.forEachButtton(s,t),this},forEachBottomButton(s,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(s,t),this}},ue=Phaser.Utils.Objects.GetValue,Lo=class extends rn{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,super(t,i),this.type="rexTabs",this.eventEmitter=ue(i,"eventEmitter",this);var d=ue(i,"background",void 0),e=ue(i,"panel",void 0),n=ue(i,"leftButtons",void 0),h=ue(i,"leftButtonsBackground",void 0),r,o=ue(i,"rightButtons",void 0),l=ue(i,"rightButtonsBackground",void 0),a,u=ue(i,"topButtons",void 0),c=ue(i,"topButtonsBackground",void 0),f,v=ue(i,"bottomButtons",void 0),p=ue(i,"bottomButtonsBackground",void 0),g,m=ue(i,"click",void 0);if(d&&this.addBackground(d),e&&this.add(e,1,1,"center",0,!0),n){var x=ue(i,"space.leftButtonsOffset",0),y=ue(i,"space.leftButton",0);r=new Ce(t,{groupName:"left",background:h,buttons:n,orientation:1,space:{item:y},align:ue(i,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(r,0,1,"top",T,!1)}if(o){var C=ue(i,"space.rightButtonsOffset",0),S=ue(i,"space.rightButton",0);a=new Ce(t,{groupName:"right",background:l,buttons:o,orientation:1,space:{item:S},align:ue(i,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:C};this.add(a,2,1,"top",T,!1)}if(u){var E=ue(i,"space.topButtonsOffset",0),M=ue(i,"space.topButton",0);f=new Ce(t,{groupName:"top",background:c,buttons:u,orientation:0,space:{item:M},align:ue(i,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(f,1,0,"left",T,!1)}if(v){var R=ue(i,"space.bottomButtonsOffset",0),L=ue(i,"space.bottomButton",0);g=new Ce(t,{groupName:"bottom",background:p,buttons:v,orientation:0,space:{item:L},align:ue(i,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:R};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",d),this.addChildrenMap("panel",e),this.addChildrenMap("leftButtons",n),this.addChildrenMap("rightButtons",o),this.addChildrenMap("topButtons",u),this.addChildrenMap("bottomButtons",v),this.addChildrenMap("leftButtonsSizer",r),this.addChildrenMap("rightButtonsSizer",a),this.addChildrenMap("topButtonsSizer",f),this.addChildrenMap("bottomButtonsSizer",g)}};Object.assign(Lo.prototype,rU);var kT=Phaser.Math.Percent,jT=function(s,t,i){var d;return s.y===t.y?d=kT(i.x,s.x,t.x):s.x===t.x&&(d=kT(i.y,s.y,t.y)),d},aU=function(s,t,i){if(!!this.enable){Iv.x=t,Iv.y=i;var d,e;this.reverseAxis?(d=this.getEndPoint(),e=this.getStartPoint()):(d=this.getStartPoint(),e=this.getEndPoint()),this.value=jT(d,e,Iv)}},Iv={},qT=function(s,t,i){if(!!this.enable&&!!s.isDown){wv.x=s.worldX,wv.y=s.worldY;var d,e;this.reverseAxis?(d=this.getEndPoint(),e=this.getStartPoint()):(d=this.getStartPoint(),e=this.getEndPoint());var n=jT(d,e,wv);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-n)<.1?this.value=n:this.easeValueTo(n)}},wv={},_T=function(s,t){t===void 0&&(t=oU);var i=this.childrenMap.thumb,d=i.x,e=i.y;return Pl(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,s),t.x=i.x,t.y=i.y,i.x=d,i.y=e,t},oU={},hU=Phaser.Display.Align.LEFT_CENTER,lU=Phaser.Display.Align.TOP_CENTER,fU=function(s){if(s===void 0&&(s=uU),this.childrenMap.thumb){var t=this.orientation===0?hU:lU;_T.call(this,t,s)}else this.orientation===0?(s.x=this.innerLeft+1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerTop+1);return s},uU={},dU=Phaser.Display.Align.RIGHT_CENTER,vU=Phaser.Display.Align.BOTTOM_CENTER,pU=function(s){if(s===void 0&&(s=cU),this.childrenMap.thumb){var t=this.orientation===0?dU:vU;_T.call(this,t,s)}else this.orientation===0?(s.x=this.innerRight-1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerBottom-1);return s},cU={},t1=Phaser.Math.Linear,mU=function(s,t,i,d){return d===void 0&&(d=gU),d.x=t1(t.x,i.x,s),d.y=t1(t.y,i.y,s),d},gU={},xU=function(s){var t=this.childrenMap.thumb;if(t===void 0)return this;s===void 0&&(s=this.value);var i,d;return this.reverseAxis?(i=this.getEndPoint(),d=this.getStartPoint()):(i=this.getStartPoint(),d=this.getEndPoint()),mU(s,i,d,t),this.resetChildPositionState(t),this},yU=Phaser.Display.Align.LEFT_CENTER,TU=Phaser.Display.Align.TOP_CENTER,CU=Phaser.Display.Align.RIGHT_CENTER,SU=Phaser.Display.Align.BOTTOM_CENTER,EU=function(s){var t=this.childrenMap.indicator;if(t===void 0)return this;s===void 0&&(s=this.value);var i=this.reverseAxis,d,e,n=this.childrenMap.thumb;if(n)if(this.orientation===0){var h=_t(n);if(i){var r=n.x-h*n.originX;d=this.right-r}else{var r=n.x-h*n.originX,o=r+h;d=o-this.left}}else{var l=Jt(n);if(i){var a=n.y-l*n.originY;e=this.bottom-a}else{var a=n.y-l*n.originY,u=a+l;e=u-this.top}}else this.orientation===0?d=this.width*s:e=this.height*s;vs(t,d,e);var c;i?c=this.orientation===0?CU:SU:c=this.orientation===0?yU:TU,by(t,this,c),this.resetChildPositionState(t)},We=Phaser.Utils.Objects.GetValue,PU=Phaser.Math.Clamp,MU=Phaser.Math.Linear,e1=Phaser.Math.Percent,AU=Phaser.Math.Snap.To,xs=class extends te{constructor(t,i){super(t,i);this.type="rexSlider",this.eventEmitter=We(i,"eventEmitter",this),this.reverseAxis=We(i,"reverseAxis",!1);var d=We(i,"background",void 0),e=We(i,"track",void 0),n=We(i,"indicator",void 0),h=We(i,"thumb",void 0);d&&this.addBackground(d),e&&this.add(e,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0}),n&&this.pin(n),h&&this.pin(h);var r=We(i,"input",0);switch(typeof r=="string"&&(r=RU[r]),r){case 0:h&&(h.setInteractive(),this.scene.input.setDraggable(h),h.on("drag",aU,this).on("dragstart",function(a){this.eventEmitter.emit("inputstart",a)},this).on("dragend",function(a){this.eventEmitter.emit("inputend",a)},this));break;case 1:this.setInteractive().on("pointerdown",qT,this).on("pointermove",qT,this).on("pointerdown",function(a){this.eventEmitter.emit("inputstart",a)},this).on("pointerup",function(a){this.eventEmitter.emit("inputend",a)},this).on("pointerover",function(a){a.isDown&&this.eventEmitter.emit("inputstart",a)},this).on("pointerout",function(a){a.isDown&&this.eventEmitter.emit("inputend",a)},this);break}this.addChildrenMap("background",d),this.addChildrenMap("track",e),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",h);var o=We(i,"valuechangeCallback",null);if(o!==null){var l=We(i,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,l)}this.setEnable(We(i,"enable",void 0)),this.setGap(We(i,"gap",void 0)),this.setValue(We(i,"value",0),We(i,"min",void 0),We(i,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(We(i,"easeValue.duration",0)).setEaseValueFunction(We(i,"easeValue.ease","Linear"))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=AU(t,this.gap));var i=this._value;this._value=PU(t,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}setValue(t,i,d){return t==null?this:(i!==void 0&&(t=e1(t,i,d)),this.value=t,this)}addValue(t,i,d){return i!==void 0&&(t=e1(t,i,d)),this.value+=t,this}getValue(t,i){var d=this.value;return t!==void 0&&(d=MU(t,i,d)),d}runLayout(t,i,d){return this.ignoreLayout?this:(super.runLayout(t,i,d),this.updateThumb(),this.updateIndicator(),this)}},RU={pan:0,drag:0,click:1,none:-1},OU={getStartPoint:fU,getEndPoint:pU,updateThumb:xU,updateIndicator:EU};Object.assign(xs.prototype,OU,Ja);var i1={v:0,vertical:0,h:1,horizontal:1},LU=Phaser.Utils.Objects.GetValue,Ql=function(s,t){var i=LU(s,"scrollMode",0);return typeof i=="string"&&(i=i1[i]),i},oi=Phaser.Utils.Objects.GetValue,qr=class extends te{constructor(t,i){super(t,i);this.type="rexScrollBar";var d=oi(i,"background",void 0),e=oi(i,"buttons",void 0),n=oi(e,"top",oi(e,"left",void 0)),h=oi(e,"bottom",oi(e,"right",void 0)),r,o=oi(i,"slider",void 0);if(d&&this.addBackground(d),n){this.add(n);var l=new Ks(n);l.on("intouch",function(){if(!!this.enable){var g=r.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=g}},this)}if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null;var a;if(this.orientation===0){var u=oi(o,"width",void 0);a=u===void 0?1:0}else{var c=oi(o,"height",void 0);a=c===void 0?1:0}r=new xs(t,o),t.add.existing(r),this.add(r,{proportion:a})}if(h){this.add(h);var l=new Ks(h);l.on("intouch",function(){if(!!this.enable){var m=r.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=m}},this)}var f=[n,h];this.addChildrenMap("background",d),this.addChildrenMap("slider",r),this.addChildrenMap("buttons",f);var v=oi(i,"valuechangeCallback",null);if(v!==null){var p=oi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",v,p)}this.setEnable(oi(i,"enable",void 0)),this.setValue(oi(i,"value",0)),this.setScrollStep(oi(e,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,i,d){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,d),this}addValue(t,i,d){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,d),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,d){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,d),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}},n1=class extends qr{constructor(t,i){i===void 0&&(i={});var d=Ys(i);i={slider:d},i.orientation=d.orientation,delete d.orientation,i.background=d.background,delete d.background,i.buttons=d.buttons,delete d.buttons,super(t,i);var e=this.childrenMap.slider;this.addChildrenMap("track",e.childrenMap.track),this.addChildrenMap("indicator",e.childrenMap.indicator),this.addChildrenMap("thumb",e.childrenMap.thumb)}},s1=class extends sn{constructor(t,i){super(i);this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,i=this.parent,d=i.dragState;return d.isDown&&(t=i.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,i){this.next()}next_DRAGBEGIN(){var t,i=this.parent,d=i.dragState;return d.isDown?t=d.pointer.getDistance()>=i.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,i){this.next()}next_DRAG(){var t,i=this.parent,d=i.dragState;return d.isUp&&(i.outOfBounds?t="BACK":i.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,i){var d=this.parent,e=d.dragState;e.justMoved&&d.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,i=this.parent,d=i.dragState;return d.isDown?t="DRAG":i.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,i){this.parent.sliding(t,i),this.next()}next_BACK(){var t,i=this.parent,d=i.dragState;return d.isDown?t="DRAG":i.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,i){this.parent.pullBack(t,i),this.next()}},kl=Phaser.Utils.Objects.GetValue,FU=Phaser.Math.Distance.Between,r1=class extends Ae{constructor(t,i){super(t,i);this._enable=void 0,t.setInteractive(kl(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(kl(t,"enable",!0)),this.holdThreshold=kl(t,"holdThreshold",50),this.pointerOutReleaseEnable=kl(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=dd(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=FU(this.preX,this.preY,this.x,this.y),i=t/(this.dt*.001);return i}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,i,d){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=i,this.localY=d)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,i,d){!this.enable||!t.isDown||this.pointer!==t||(this.localX=i,this.localY=d)}preupdate(t,i){if(!!this.enable){var d=this.pointer;this.justMoved=!1,d&&!this.isInTouched?(this.x=d.worldX,this.y=d.worldY,this.preX=d.worldX,this.preY=d.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",d,this.localX,this.localY)):d&&this.isInTouched?this.x===d.x&&this.y===d.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=d.worldX,this.y=d.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",d,this.localX,this.localY)):!d&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",d))}}},Dv=Phaser.Utils.Objects.GetValue,a1=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Dv(t,"value",0)),this.setSpeed(Dv(t,"speed",0)),this.setAcceleration(Dv(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}},o1=class{constructor(){this.value,this.dir,this.movement=new a1}init(t,i,d,e,n){return this.value=t,this.end=n,n!==void 0?this.dir=t<n:this.dir=i,this.movement.setSpeed(d).setAcceleration(-e),this}stop(){this.movement.reset()}update(t){var i=this.movement.getDeltaValue(t);return this.dir||(i=-i),this.end===void 0?this.value+=i:i===0?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}},Le=Phaser.Utils.Objects.GetValue,IU=Phaser.Math.Clamp,h1=class extends Ae{constructor(t,i){super(t,i);var d=Le(i,"enable",!0);this._state=new s1(this,{enable:d,eventEmitter:!1});var e={inputConfig:Le(i,"inputConfig",void 0),enable:d,pointerOutRelease:Le(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new r1(t,e),this._enable=void 0,this._value=void 0,this._slowDown=new o1;var n=Le(i,"valuechangeCallback",null);if(n!==null){var h=Le(i,"valuechangeCallbackScope",void 0);this.on("valuechange",n,h)}if(n=Le(i,"overmaxCallback",null),n!==null){var h=Le(i,"overmaxCallbackScope",void 0);this.on("overmax",n,h)}if(n=Le(i,"overminCallback",null),n!==null){var h=Le(i,"overminCallbackScope",void 0);this.on("overmin",n,h)}this.resetFromJSON(i),this.boot()}resetFromJSON(t){this.setOrientationMode(Le(t,"orientation",0)),this.setDragThreshold(Le(t,"threshold",10)),this.setSlidingDeceleration(Le(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Le(t,"backDeceleration",2e3));var i=Le(t,"bounds",void 0);return i?this.setBounds(i):this.setBounds(Le(t,"max",0),Le(t,"min",0)),this.setValue(Le(t,"value",this.maxValue||0)),this.setEnable(Le(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=wU[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,i){if(Array.isArray(t)){var d=t;t=d[0],i=d[1]}return t<i?(this.minValue=t,this.maxValue=i):(this.minValue=i,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var i=this._value,d=this.overMax(t),e=this.overMin(t);d&&this.emit("overmax",t,i),e&&this.emit("overmin",t,i),this.backEnable||(d&&(t=this.maxValue),e&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,i)}}setValue(t,i){return i===void 0&&(i=!1),i&&(t=IU(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,i){return this.setValue(this.value+t,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,i=this.dragSpeed;if(i===0){this._slowDown.stop(),this._state.next();return}var d=this.slidingDeceleration;this._slowDown.init(t,i>0,Math.abs(i),d)}sliding(t,i){i*=.001;var d=this._slowDown.update(i).value;this.overMax(d)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(d)?(this.value=this.minValue,this._slowDown.stop()):this.value=d}onPullBack(){var t=this.value,i=this.outOfMinBound?this.minValue:this.maxValue,d=Math.abs(i-t),e=this.backDeceleration,n=Math.sqrt(2*e*d);this._slowDown.init(t,void 0,n,e,i)}pullBack(t,i){i*=.001,this.value=this._slowDown.update(i).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}},wU={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},jl=Phaser.Utils.Objects.GetValue,l1=class extends Ae{constructor(t,i){super(t,i);if(this.parent!==this.scene?this.focusMode=jl(i,"focus",!1):this.focusMode=!1,this.setSpeed(jl(i,"speed",.1)),this.setEnable(jl(i,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(jl(i,"inputConfig",void 0)).on("wheel",function(e,n,h,r,o){!this.enable||this.scroll(h)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,i,d,e,n,h){!this.enable||this.scroll(e)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}},Se=Phaser.Utils.Objects.GetValue,BU=function(s,t){var i=s.scene,d=Ql(t),e=new te(i,{orientation:d}),n=Se(t,"child.gameObject",void 0),h=0,r=Se(t,"slider",void 0),o,l=0,a=Se(r,"position",0);typeof a=="string"&&(a=DU[a]);var u=a===0,c=Se(t,"scroller",!0),f,v=Se(t,"mouseWheelScroller",!1),p;if(n){var g=Se(t,"space.child",0);if(s.childMargin={},typeof g!="number"){var m=g;d===0?(h={left:Se(m,"left",0),right:Se(m,"right",0)},s.childMargin.top=Se(m,"top",0),s.childMargin.bottom=Se(m,"bottom",0)):(h={top:Se(m,"top",0),bottom:Se(m,"bottom",0)},s.childMargin.top=Se(m,"left",0),s.childMargin.bottom=Se(m,"right",0))}else r&&(d===0?h=u?{right:g}:{left:g}:h=u?{bottom:g}:{top:g}),s.childMargin.top=0,s.childMargin.bottom=0;r?(r===!0&&(r={}),r.orientation=e.orientation===0?1:0,o=new n1(i,r),l=Se(t,"space.slider",0),s.adaptThumbSizeMode=Se(r,"adaptThumbSize",!1),s.minThumbSize=Se(r,"minThumbSize",void 0)):(s.adaptThumbSizeMode=!1,s.minThumbSize=void 0),c&&(c===!0&&(c={}),c.orientation=d,f=new h1(n,c)),v&&(p=new l1(n,v)),o&&!u&&e.add(o,{proportion:0,align:"center",padding:l,expand:!0});var x=Se(t,"child.proportion",1),y=Se(t,"child.expand",!0);e.add(n,{proportion:x,align:"center",padding:h,expand:y}),o&&u&&e.add(o,{proportion:0,align:"center",padding:l,expand:!0})}return o&&o.on("valuechange",function(T){s.t=T,s.emit("scroll",s)}),f&&f.on("valuechange",function(T){s.childOY=T,s.emit("scroll",s)}),p&&p.on("scroll",function(T){s.addChildOY(-T,!0)}),s.addChildrenMap("child",n),s.addChildrenMap("slider",o),s.addChildrenMap("scroller",f),s.addChildrenMap("mouseWheelScroller",p),e},DU={right:0,left:1,bottom:0,top:1},bU=function(){var s=this.topChildOY,t=this.bottomChildOY,i=this.childrenMap.scroller,d=this.childrenMap.slider;return i&&i.setBounds(t,s),d&&d.setEnable(t!==s),this.updateController(),this.adaptThumbSizeMode&&GU.call(this),this},GU=function(){var s=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,i=t.childrenMap.track,d=t.childrenMap.thumb,e=this.minThumbSize;if(this.scrollMode===0){var n=i.displayHeight*s;e!==void 0&&n<e&&(n=e),vs(d,void 0,n)}else{var h=i.displayWidth*s;e!==void 0&&h<e&&(h=e),vs(d,h,void 0)}NU.call(this)},NU=function(){var s=this.childrenMap.slider,t=s.minWidth,i=s.minHeight;s.minWidth=s.width,s.minHeight=s.height,s.layout(),s.minWidth=t,s.minHeight=i},YU=function(){var s=this.childrenMap.scroller,t=this.childrenMap.slider;s&&s.setValue(this.childOY),t&&t.setValue(this.t)},Sn=Phaser.Utils.Objects.GetValue,u1=Phaser.Math.Clamp,Fo=class extends te{constructor(t,i){i===void 0&&(i={});var d=Ql(i);i.orientation=d===0?1:0,super(t,i),this.type=Sn(i,"type","rexScrollable");var e=Sn(i,"background",void 0),n=BU(this,i),h=Sn(i,"header",void 0),r=Sn(i,"footer",void 0);if(e&&this.addBackground(e),h){var o=Sn(i,"align.header","center"),l=Sn(i,"space.header",0),a;d===0?a={bottom:l}:a={right:l};var u=Sn(i,"expand.header",!0);this.add(h,{proportion:0,align:o,padding:a,expand:u})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),r){var o=Sn(i,"align.footer","center"),c=Sn(i,"space.footer",0),a;d===0?a={top:c}:a={left:c};var u=Sn(i,"expand.footer",!0);this.add(r,{proportion:0,align:o,padding:a,expand:u})}this.addChildrenMap("background",e),this.addChildrenMap("header",h),this.addChildrenMap("footer",r),this.runLayoutFlag=!1}runLayout(t,i,d){return this.ignoreLayout?this:(super.runLayout(t,i,d),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var i=this.childMargin;if(i.top!==0||i.bottom!==0){var d=this.childrenMap.child,e=d.topChildOY-d.bottomChildOY,n=e+i.top+i.bottom,h=n*t-i.top;t=h/e}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,i=this.childMargin;if(i.top!==0||i.bottom!==0){var d=this.childrenMap.child,e=d.topChildOY-d.bottomChildOY,n=e+i.top+i.bottom,h=e*t+i.top;t=h/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,i){return i===void 0&&(i=!1),i&&(t=u1(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,i){return this.setChildOY(this.childOY+t,i),this}setT(t,i){return i===void 0&&(i=!1),i&&(t=u1(t,0,1)),this.t=t,this}addT(t,i){return this.setT(this.t+t,i),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var i=this.childrenMap.slider;!i||i.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var i=this.childrenMap.scroller;!i||i.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var i=this.childrenMap.mouseWheelScrollerEnable;!i||i.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=t,this}},zU={resizeController:bU,updateController:YU};Object.assign(Fo.prototype,zU);var Bv=class{constructor(t,i){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,i),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var i=this.parent;this._deltaHeight===0&&t!==0?i.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&i.nonZeroDeltaHeightCount--;var d=this._deltaHeight!==t;if(this._deltaHeight=t,d){i.resetTotalRowsHeight();var e=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(e,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}};Object.assign(Bv.prototype,Hh);var ql=Phaser.Utils.Objects.GetValue,UU=Phaser.Utils.Array.SpliceOne,f1=class{constructor(t,i){this.parent=t,this.cells=[],this.cellPool=new Nn,this.resetFromJSON(i)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(ql(t,"cellHeight",30)),this.setDefaultCellWidth(ql(t,"cellWidth",30)),this.initCells(ql(t,"cellsCount",0)),this.setColumnCount(ql(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var i=this.cells;i.length=t;for(var d=0;d<t;d++)i[d]=null;return this}insertNewCells(t,i){var d=this.cells;if(t===d.length){var e=t+i;d.legth=e;for(var n=t;n<e;n++)d[n]=null}else{var h=[];h.length=i;for(var n=0;n<i;n++)h[n]=null;this.cells.splice(t,0,...h)}return this.resetTotalRowsHeight(),this}removeCells(t,i){for(var d=t+i,e=t;e<d;e++)this.freeCell(e);return d===this.cells.length?this.cells.length=t:(i===1?UU(this.cells,t):this.cells.splice(t,i),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,i){if(this.defaultCellHeightMode){var r=t/this.defaultCellHeight;return i?r=Math.ceil(r):r=Math.floor(r),r}for(var d=this.rowCount,e=t,n,h,r=0;;)if(h=this.getRowHeight(r),e-=h,n=r>=0&&r<d,e>0&&n)r+=1;else{if(e===0)return r;if(i){var o=r;r+=1,n=r>=0&&r<d,n||(r=o)}return r}}widthToColIndex(t,i){var d=t/this.defaultCellWidth;return i?d=Math.ceil(d):d=Math.floor(d),d}colRowToCellIndex(t,i){return t>=this.colCount?null:i*this.colCount+t}rowIndexToHeight(t,i){if(this.defaultCellHeightMode)return(i-t+1)*this.defaultCellHeight;for(var d,e=0,n=t;n<=i;n++)d=this.getRowHeight(n),e+=d;return e}colIndexToWidth(t,i){return(i-t+1)*this.defaultCellWidth}getRowHeight(t){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var d=0,e,n=0;n<i;n++)e=this.getCellHeight(this.colRowToCellIndex(n,t)),d<e&&(d=e);return d}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var i;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var d=this.getCell(t,!1),e=d?d.deltaHeight:0;i=this.defaultCellHeight+e}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,i){if(!this.isValidCellIdx(t))return null;if(i===void 0&&(i=!0),this.cells[t]===null&&i){var d=this.newCell(t);this.cells[t]=d}return this.cells[t]}newCell(t){var i=this.cellPool.pop();return i===null?i=new Bv(this):i.setParent(this),i.index=t,i}buildCellIndex(t){t===void 0&&(t=0);for(var i=this.cells,d,e=t,n=i.length;e<n;e++)d=i[e],d&&(d.index=e);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}},VU=function(s){var t=this.table,i=this.topTableOY,d=this.bottomTableOY,e=s>this.topTableOY,n=s<this.bottomTableOY;if(this.clampTableOXY){var h=t.rowCount,r=t.heightToRowIndex(this.instHeight,!0);h<r?s=0:e?s=i:n&&(s=d)}return this._tableOY!==s&&(this._tableOY=s),e&&(this.execeedTopState||this.emit("execeedtop",this,s,i)),this.execeedTopState=e,n&&(this.execeedBottomState||this.emit("execeedbottom",this,s,d)),this.execeedBottomState=n,this},WU=function(s){var t=this.table,i=this.leftTableOX,d=this.rightTableOX,e=s>this.leftTableOX,n=s<this.rightTableOX;if(this.clampTableOXY){var h=t.colCount,r=t.widthToColIndex(this.instWidth,!0);h<r?s=0:e?s=i:n&&(s=d)}return this._tableOX!==s&&(this._tableOX=s),e&&(this.execeedLeftState||this.emit("execeedleft",this,s,i)),this.execeedLeftState=e,n&&(this.execeedRightState||this.emit("execeedright",this,s,d)),this.execeedRightState=n,this},d1=function(s){return s.hasOwnProperty("geometryMask")?s.geometryMask:s.bitmapMask},XU=Phaser.Geom.Intersects.RectangleToRectangle,HU=Phaser.Geom.Rectangle.Overlaps,QU=function(s,t,i){if(!!t){i===void 0&&(i=s.getAllChildren());for(var d=s.getBounds(),e=d1(t),n,h,r,o=0,l=i.length;o<l;o++)if(n=i[o],!n.hasOwnProperty("isRexContainerLite")&&n!==e&&!!$U(n))if(n.getBounds)switch(h=n.getBounds(h),r=KU(d,h),r){case 4:ZU(s,n);break;case 0:XU(d,h)||HU(d,h)?Gv(s,n,t):JU(s,n);break;default:Gv(s,n,t);break}else Gv(s,n,t)}},$U=function(s){if(!s.displayList)return!1;for(;;){var t=s.rexContainer;if(t)if(t.visible){var i=t.parent;if(i){s=i;continue}else return!0}else return!1;else return s.visible}},KU=function(s,t){var i=0,d=t.top,e=t.bottom,n=t.left,h=t.right;return i+=s.contains(n,d)?1:0,i+=s.contains(n,e)?1:0,i+=s.contains(h,d)?1:0,i+=s.contains(h,e)?1:0,i},ZU=function(s,t,i){s.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},Gv=function(s,t,i){s.setChildMaskVisible(t,!0),t.setMask&&t.setMask(i)},JU=function(s,t,i){s.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()},bv=Phaser.Utils.Objects.GetValue,kU={update:0,everyTick:1},v1={setupChildrenMask(s){return s===!1?this:(this.setMaskUpdateMode(bv(s,"updateMode",0)),this.enableChildrenMask(bv(s,"padding",0)),this.setMaskLayer(bv(s,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(s){return typeof s=="string"&&(s=kU[s]),this.maskUpdateMode=s,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(s){var t=Mo.call(this,null,this,0,s);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(s){return s===void 0&&(s=!0),this.maskChildrenFlag=s,this},setMaskLayer(s){return this.maskLayer=s,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.layer?this.layer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):QU(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var s=d1(this.childrenMask);return s.setPosition().resize(),this.resetChildPositionState(s),this}},jU=function(){if(this.cellsCount!==0){var s=this.table,t=s.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var i=t,d=s.widthToColIndex(-this.tableOX);d<=0&&(d=0);for(var e=d,n=s.colRowToCellIndex(e,i),h=this.bottomBound,r=this.rightBound,o=s.cellsCount-1,l=s.colCount-1,a=this.getCellTLX(e),u=a,c=this.getCellTLY(i);c<h&&n<=o;){if(this.table.isValidCellIdx(n)){var f=s.getCell(n,!0);this.visibleCells.set(f),this.preVisibleCells.contains(f)||this.showCell(f),this.scrollMode===0?f.setXY(u,c):f.setXY(c,u)}u<r&&e<l?(u+=s.getColWidth(e),e+=1):(u=a,c+=s.getRowHeight(i),e=d,i+=1),n=s.colRowToCellIndex(e,i)}}},c1=function(s){var t=null,i=s.getContainer();if(i?(t=i,s.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",s,t,this),this.cellContainersPool){var i=s.getContainer();i?t===null?this.cellContainersPool.add(i):t!==i&&(this.cellContainersPool.add(i),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},qU=function(s){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,i=this.tableOX+this.table.colIndexToWidth(0,s-1)+t;return i},_U=function(s){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,i=this.tableOY+this.table.rowIndexToHeight(0,s-1)+t;return i},tV=function(){var s=this.preVisibleCells,t=this.visibleCells;s.iterate(function(i){t.contains(i)||this.hideCell(i)},this)},p1=function(s){if(this.emit("cellinvisible",s),this.cellContainersPool){var t=s.popContainer();t&&this.cellContainersPool.killAndHide(t)}s.destroyContainer()},eV=function(s){return s===void 0&&(s=!1),s&&(g1.call(this),this.hideCells()),g1.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},g1=function(){var s=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=s,this.visibleCells.clear()},iV=function(s){var t=this.table.getCell(s,!1);return t&&this.visibleCells.contains(t)},m1=function(s,t){t-=this.y+this.topLeftY,s-=this.x+this.topLeftX;var i=this.tableOY-(this.scrollMode===0?t:s),d=this.tableOX-(this.scrollMode===0?s:t),e=this.table,n=e.heightToRowIndex(-i),h=e.widthToColIndex(-d),r=e.colRowToCellIndex(h,n);return r===null||!this.isCellVisible(r)?null:r},nV=function(s,t){var i=m1.call(this,s,t);if(i!==null)return this.getCellContainer(i)},sV=function(s,t){return this.visibleCells.each(s,t),this},rV=function(s,t){return this.visibleCells.iterate(s,t),this},aV=function(s,t){return this.table.cells.slice().forEach(s,t),this},oV=function(s,t){return this.table.cells.forEach(s,t),this},hV=function(s){var t=this.cellsCount;return t===s?this:(t>s?this.removeCells(s,t-s):this.insertNewCells(t,s-t),this)},lV=Phaser.Math.Clamp,uV=function(s,t){return typeof s=="object"&&(s=s.index),t===void 0&&(t=1),t<=0?this:(s=lV(s,0,this.cellsCount),this.table.insertNewCells(s,t),this)},fV=function(s,t){if(typeof s=="object"&&(s=s.index),t===void 0&&(t=1),s<0&&(t+=s,s=0),t<=0)return this;if(s>this.cellsCount)return this;for(var i,d=s,e=s+t;d<e;d++)i=this.getCell(d,!1),i&&(this.visibleCells.contains(i)&&(p1.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(s,t),this},dV=function(s){return this.table.colCount===s?this:(this.table.setColumnCount(s),this)},vV=function(s,t){return this.setCellsCount(s*t),this.table.setColumnCount(s),this},cV=function(s){var t=this.table.getCell(s,!1);return!t||!t.container?this:(c1.call(this,t),this)},x1={setTableOY:VU,setTableOX:WU,showCells:jU,showCell:c1,getCellTLX:qU,getCellTLY:_U,hideCells:tV,hideCell:p1,updateTable:eV,isCellVisible:iV,pointToCellIndex:m1,pointToCellContainer:nV,eachVisibleCell:sV,iterateVisibleCell:rV,eachCell:aV,iterateCell:oV,setCellsCount:hV,insertNewCells:uV,removeCells:fV,setColumnCount:dV,setGridSize:vV,updateVisibleCell:cV};Object.assign(x1,v1);var pV=Phaser.GameObjects.Group,y1=Phaser.Structs.Set,En=Phaser.Utils.Objects.GetValue,Nv=class extends ri{constructor(t,i,d,e,n,h){h===void 0&&(h={}),super(t,i,d,e,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new y1,this.preVisibleCells=new y1,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var r=En(h,"reuseCellContainer",!1);r&&(this.cellContainersPool=new pV(t));var o=En(h,"cellVisibleCallback",null);if(o!==null){var l=En(h,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,l)}if(o=En(h,"cellInvisibleCallback",null),o!==null){var l=En(h,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",o,l)}En(h,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(En(h,"mask",void 0)),this.setScrollMode(En(h,"scrollMode",0)),this.setClampMode(En(h,"clamplTableOXY",!0));var a,u,c,f=this.scrollMode===0;if(f?(a=h.cellWidth,u=h.cellHeight,c=h.columns):(a=h.cellHeight,u=h.cellWidth,c=En(h,"rows",h.columns)),this.expandCellSize=a===void 0,this.expandCellSize){var e=f?this.width:this.height;a=e/c}h.cellWidth=a,h.cellHeight=u,h.columns=c,this.table=new f1(this,h),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=gV[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,i){return this.setTableOY(i).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,i){return this.addTableOY(i).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var i=this.table.getCell(t,!1),d;return i&&(d=i.getContainer()),d}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,i){var d;return typeof t=="number"?d=this.table.getCell(t,!0):d=t,d.height=i,this}setCellWidth(t,i){var d;return typeof t=="number"?d=this.table.getCell(t,!0):d=t,d.width=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,i=this.tableWidth,d=this.instWidth;return i>d?t=i-d:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,i){return this.width===t&&this.height===i?this:(super.resize(t,i),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(Nv.prototype,x1);var gV={v:0,vertical:0,h:1,horizontal:1},mV=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.tableOY},set:function(t){s.tableOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTableOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTableOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.instHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.tableHeight}})},xV=function(s){s.on("cellvisible",function(t,i,d){var e=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index];var i;n?i=e.call(n,t,i,d):i=e(t,i,d),i&&(i.setOrigin&&i.setOrigin(0),i.isRexSizer&&i.layout()),t.item=void 0,t.setContainer(i)},this)},Pn=function(s,t,i,d,e,n,h){var r;if(e===void 0?r=d:r=i.pointToCellIndex(d,e),r!=null){var o=i.getCellContainer(r);o&&s.emit(t,o,r,n,h)}},yV=function(s,t){s.on("pointerdown",function(i,d,e,n){Pn(this.eventEmitter,"cell.down",s,i.x,i.y,i,n)},this).on("pointerup",function(i,d,e,n){Pn(this.eventEmitter,"cell.up",s,i.x,i.y,i,n)},this)},CV=function(s,t){s.on("pointermove",T1,this).on("pointerover",T1,this).on("pointerout",TV,this)},T1=function(s,t,i,d){var e=this.childrenMap.child,n=e.pointToCellIndex(s.x,s.y);if(n!==e.input.lastOverCellIndex){var h=e.input.lastOverCellIndex;e.input.lastOverCellIndex=n,Pn(this.eventEmitter,"cell.out",e,h,void 0,s,d),Pn(this.eventEmitter,"cell.over",e,n,void 0,s,d)}},TV=function(s,t){var i=this.childrenMap.child,d=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Pn(this.eventEmitter,"cell.out",i,d,void 0,s,t)},SV=Phaser.Utils.Objects.GetValue,EV=function(s,t){var i=SV(t,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.threshold=10,s._click=new cs(s,i),s._click.on("click",function(d,e,n,h){Pn(this.eventEmitter,"cell.click",e,n.x,n.y,n,h)},this))},PV=Phaser.Utils.Objects.GetValue,MV=function(s,t){var i=PV(t,"tap",void 0);i!==!1&&(s._tap=new Yr(s,i),s._tap.on("tap",function(d,e,n){var h=`cell.${d.tapsCount}tap`;Pn(this.eventEmitter,h,d.gameObject,d.x,d.y,n)},this))},AV=Phaser.Utils.Objects.GetValue,RV=function(s,t){var i=AV(t,"press",void 0);i!==!1&&(s._press=new Vr(s,i),s._press.on("pressstart",function(d,e,n){Pn(this.eventEmitter,"cell.pressstart",s,d.x,d.y,n)},this).on("pressend",function(d,e,n){Pn(this.eventEmitter,"cell.pressend",s,d.x,d.y,n)},this))},OV=Phaser.Utils.Objects.GetValue,LV=function(s,t){var i=OV(t,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",s._swipe=new Qs(s,i),s._swipe.on("swipe",function(d,e,n){var h=d.left?"left":d.right?"right":d.up?"up":"down";Pn(this.eventEmitter,`cell.swipe${h}`,s,d.x,d.y,n)},this))},FV=function(s,t){s.setInteractive(),yV.call(this,s,t),CV.call(this,s,t),EV.call(this,s,t),MV.call(this,s,t),RV.call(this,s,t),LV.call(this,s,t)},IV=function(s){s===void 0?this.items.length=0:this.items=s;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this},Mn=Phaser.Utils.Objects.GetValue,ys=class extends Fo{constructor(t,i){i===void 0&&(i={});var d=Ql(i),e=Mn(i,"table",void 0);e===void 0&&(e={}),e.scrollMode=d,e.clamplTableOXY=Mn(i,"clamplChildOY",!1);var n=Mn(e,"width",void 0),h=Mn(e,"height",void 0),r=new Nv(t,0,0,n,h,e);t.add.existing(r);var o,l;d===0?(o=n===void 0?1:0,l=h===void 0):(o=h===void 0?1:0,l=n===void 0),mV(r),r.minWidth=n===void 0?0:void 0,r.minHeight=h===void 0?0:void 0,i.type="rexGridTable",i.child={gameObject:r,proportion:o,expand:l};var a=Mn(i,"space",void 0);a&&(a.child=a.table),super(t,i),this.addChildrenMap("table",r),this.addChildrenMap("tableLayer",r.maskLayer),this.eventEmitter=Mn(i,"eventEmitter",this);var u=Mn(i,"createCellContainerCallback",ei),c=Mn(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(u,c),xV.call(this,r),this.resizeControllerFlag=!1;var f=d===0?"cellheightchange":"cellwidthchange";r.on(f,function(){this.resizeControllerFlag=!0},this),Mn(e,"interactive",!0)&&FV.call(this,r,e),this.setItems(Mn(i,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,i){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(t){var i=this.childrenMap.child;return i.getCell(t)}getCellContainer(t){var i=this.childrenMap.child;return i.getCellContainer(t)}updateVisibleCell(t){var i=this.childrenMap.child;return i.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}},wV={setItems:IV};Object.assign(ys.prototype,wV);var Yv=function(s,t){return s.sameOrientation?s.orientation=t.orientation:s.orientation=t.orientation===0?1:0,s},DV=function(s,t){s.popUp(Yv(s.root.easeIn,s))},BV=function(s,t){s.scaleDown(Yv(s.root.easeOut,s))},GV={setTransitInCallback(s){return s===void 0&&(s=DV),this.transitInCallback=s,this},setTransitOutCallback(s){return s===void 0&&(s=BV),this.transitOutCallback=s,this}},zv=function(s,t,i,d,e){var n=s.scene,h=n.sys.events,r=n.time.delayedCall(t,h.once,["postupdate",function(){i.call(d,e)}],h);return r},bV={delayCall(s,t,i){return this.timer=zv(this,s,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},NV=function(s,t){var i=this.childrenMap.subMenu;if(i&&i.parentButton===s)return this;this.collapseSubMenu();var d;this.root.toggleOrientation?d=this.orientation===0?1:0:d=this.orientation;var i=new this.constructor(this.scene,{items:t,orientation:d,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:s});return this.pin(i),this.childrenMap.subMenu=i,this.root.emit("expand",i,s,this),this},YV=function(){var s=this.root;s.emit("collapse",this,this.parentButton,s);var t=s.easeOut.duration;return s.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},zV=function(){var s=this.childrenMap.subMenu;return s===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(s),s.collapse(),this)},C1={expandSubMenu:NV,collapse:YV,collapseSubMenu:zV};Object.assign(C1,GV,bV);var UV=function(s,t,i,d){var e;return i&&(t.scene=s,d?e=i.call(d,t):e=i(t),t.scene=void 0),e},VV=function(s,t,i,d){var e,n=[],h;if(t&&i)for(var r=0,o=t.length;r<o;r++)e=t[r],e.scene=s,d?h=i.call(d,e,r,t):h=i(e,r,t),e.scene=void 0,n.push(h);return n},WV=function(s){s.on(s.root.expandEventName,function(t,i){if(!this._isPassedEvent){var d=this.root.childrenKey,e=this.items[i][d];e&&this.expandSubMenu(t,e)}},s).on("button.click",function(t,i,d,e){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,i,d,e),this.root._isPassedEvent=!1)},s).on("button.over",function(t,i,d,e){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,i,d,e),this.root._isPassedEvent=!1)},s).on("button.out",function(t,i,d,e){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,i,d,e),this.root._isPassedEvent=!1)},s)},S1=function(s,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Cv(t.orientation)===s.orientation:t.sameOrientation=!0,t.destroy=!1,t},XV=function(){var s=this.root,t=s.easeIn.duration;s.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)},Qe=Phaser.Utils.Objects.GetValue,_r=class extends Ce{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var d=i._rootMenu,e=i._parentMenu,n=i._parentButton,h=Qe(i,"popup",!0),r=Qe(i,"items",void 0),o=Qe(i,"createBackgroundCallback",void 0),l=Qe(i,"createBackgroundCallbackScope",void 0);i.background=UV(t,r,o,l);var a=Qe(i,"createButtonCallback",void 0),u=Qe(i,"createButtonCallbackScope",void 0);if(i.buttons=VV(t,r,a,u),super(t,i),this.type="rexMenu",this.items=r,this.root=d===void 0?this:d,this.isRoot=this.root===this,this.parentMenu=e,this.parentButton=n,this.timer=void 0,this.isRoot){this.isPopUpMode=h;var c=i.bounds;c===void 0&&(c=Hs(t)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?Vv:tu,this.x<c.centerX?Uv:_l];var f=Qe(i,"subMenuSide",void 0);f!==void 0&&(typeof f=="string"&&(f=HV[f]),this.subMenuSide[this.orientation]=f),this.toggleOrientation=Qe(i,"toggleOrientation",!1),this.expandEventName=Qe(i,"expandEvent","button.click"),this.easeIn=S1(this,Qe(i,"easeIn",0)),this.easeOut=S1(this,Qe(i,"easeOut",0)),this.setTransitInCallback(Qe(i,"transitIn")),this.setTransitOutCallback(Qe(i,"transitOut")),this.createBackgroundCallback=o,this.createBackgroundCallbackScope=l,this.createButtonCallback=a,this.createButtonCallbackScope=u,this.childrenKey=Qe(i,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Qe(i,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var v=0,p=0;if(!this.root.easeIn.sameOrientation){var g=Yv(this.root.easeIn,this).orientation,m=e?e.orientation:this.orientation,f=this.root.subMenuSide[m];g===0&&f===_l&&(v=1),g===1&&f===tu&&(p=1)}if(h&&this.setOrigin(v,p).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var f=this.root.subMenuSide[e.orientation];switch(f){case _l:this.alignTop(n.top).alignRight(n.left);break;case Uv:this.alignTop(n.top).alignLeft(n.right);break;case tu:this.alignLeft(n.left).alignBottom(n.top);break;case Vv:this.alignLeft(n.left).alignTop(n.bottom);break}}WV(this),h&&(this.pushIntoBounds(this.root.bounds),XV.call(this))}destroy(t){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}},_l=2,Uv=0,tu=3,Vv=1,HV={up:tu,down:Vv,left:_l,right:Uv};Object.assign(_r.prototype,C1);var $V=function(s,t){s.popUp(this.listEaseInDuration,"y","Cubic")},KV=function(s,t){s.scaleDown(this.listEaseOutDuration,"y","Linear")},ZV={setWrapEnable(s){return s===void 0&&(s=!0),this.listWrapEnable=s,this},setCreateButtonCallback(s){return this.listCreateButtonCallback=s,this},setCreateBackgroundCallback(s){return this.listCreateBackgroundCallback=s,this},setButtonClickCallback(s){return this.listOnButtonClick=s,this},setButtonOverCallback(s){return this.listOnButtonOver=s,this},setButtonOutCallback(s){return this.listOnButtonOut=s,this},setListEaseInDuration(s){return s===void 0&&(s=0),this.listEaseInDuration=s,this},setListEaseOutDuration(s){return s===void 0&&(s=0),this.listEaseOutDuration=s,this},setListTransitInCallback(s){return s===void 0&&(s=$V),this.listTransitInCallback=s,this},settListTTransitOutCallback(s){return s===void 0&&(s=KV),this.listTransitOutCallback=s,this},setListBounds(s){return this.listBounds=s,this},setListWidth(s){return this.listWidth=s,this},setListHeight(s){return this.listHeight=s,this},setListSize(s,t){return this.setListWidth(s).setListHeight(t),this},setListAlignmentMode(s){return this.listAlignMode=s,this},setListSpace(s){return s===void 0&&(s={}),this.listSpace=s,this},setListDraggable(s){return s===void 0&&(s=!0),this.listDraggable=s,this}},JV=function(s){var t,i=this.listCreateBackgroundCallback;i&&(t=i.call(this,s),s.add.existing(t));var d=[],e=this.listCreateButtonCallback;if(e)for(var n=this.options,h=0,r=n.length;h<r;h++){var o=e.call(this,s,n[h],h,n);s.add.existing(o),d.push(o)}var l=this.listWidth;l===void 0&&(this.listAlignMode==="text"?l=this.getElement("text").width:l=this.width);var a=this.listHeight,u;return this.listWrapEnable?u=new Cn(s,{width:l,height:a,background:t,buttons:d,space:this.listSpace,draggable:this.listDraggable}):u=new Ce(s,{width:l,height:a,orientation:"y",background:t,buttons:d,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(u),u},QV=function(){if(this.listPanel)return this;var s=this.scene,t=JV.call(this,s).setOrigin(0,0).layout(),i=this.getElement(this.listAlignMode).getTopLeft().x;t.setPosition(i,this.bottom);var d=this.listBounds;d||(d=Hs(s)),t.bottom>d.bottom&&t.changeOrigin(0,1).setPosition(i,this.top),t.on("button.over",function(n,h,r,o){this.listOnButtonOver&&this.listOnButtonOver.call(this,n,h,r,o),this.emit("button.over",this,t,n,h,r,o)},this).on("button.out",function(n,h,r,o){this.listOnButtonOut&&this.listOnButtonOut.call(this,n,h,r,o),this.emit("button.out",this,t,n,h,r,o)},this);var e=this.listEaseInDuration;return this.listTransitInCallback(t,e),this.delayCall(e,function(){var n=this.listOnButtonClick;n&&t.on("button.click",function(h,r,o,l){n.call(this,h,r,o,l),this.emit("button.click",this,t,h,r,o,l)},this),s.input.once("pointerup",this.closeListPanel,this),this.emit("list.open",this,t)},this),this.pin(t),this.listPanel=t,this},kV=function(){if(!this.listPanel)return this;var s=this.listPanel;this.listPanel=void 0;var t=this.listEaseOutDuration;return this.listTransitOutCallback(s,t),this.delayCall(t,function(){this.emit("list.close",this,s),s.destroy()},this),this},jV=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},qV={delayCall(s,t,i){return this.timer=zv(this,s,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},E1={openListPanel:QV,closeListPanel:kV,toggleListPanel:jV};Object.assign(E1,ZV,qV);var ge=Phaser.Utils.Objects.GetValue,Io=class extends ms{constructor(t,i){super(t,i);this.type="rexDropDownList",this.timer=void 0,this.setOptions(ge(i,"options"));var d=ge(i,"list");this.setWrapEnable(ge(d,"wrap",!1)),this.setCreateButtonCallback(ge(d,"createButtonCallback")),this.setCreateBackgroundCallback(ge(d,"createBackgroundCallback")),this.setButtonClickCallback(ge(d,"onButtonClick")),this.setButtonOverCallback(ge(d,"onButtonOver")),this.setButtonOutCallback(ge(d,"onButtonOut")),this.setListEaseInDuration(ge(d,"easeIn",500)),this.setListEaseOutDuration(ge(d,"easeOut",100)),this.setListTransitInCallback(ge(d,"transitIn")),this.settListTTransitOutCallback(ge(d,"transitOut")),this.setListSize(ge(d,"width"),ge(d,"height")),this.setListAlignmentMode(ge(d,"alignParent","text")),this.setListBounds(ge(d,"bounds")),this.setListSpace(ge(d,"space")),this.setListDraggable(ge(d,"draggable",!1)),this.setValueChangeCallback(ge(i,"setValueCallback"),ge(i,"setValueCallbackScope")),this.setValue(ge(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t),this.removeDelayCall())}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,i){return this.valueChangeCallback=t,this.valueChangeCallbackScope=i,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t;var d=this.valueChangeCallback,e=this.valueChangeCallbackScope;d&&(e?d.call(e,this,t,i):d(this,t,i))}}};Object.assign(Io.prototype,E1);var _V=Phaser.GameObjects.Text,eu=function(s){return s instanceof _V},t4=Phaser.GameObjects.BitmapText,Wv=function(s){return s instanceof t4},Ri=0,Hi=1,$i=2,wo=function(s){var t;return Wv(s)?t=$i:eu(s)?t=Ri:t=Hi,t},Xv=function(s,t,i){var d=wo(s);switch(d){case Ri:i=s.getWrappedText(t);break;case Hi:i=s.getPenManager(t,i);break;case $i:s.maxWidth>0?i=s.setText(t).getTextBounds().wrappedText.split(`
`):i=t.split(`
`);break}return i},e4=function(s,t){s===void 0&&(s=this.startLineIndex),t===void 0&&(t=s+this.pageLinesCount);var i;switch(this.textObjectType){case Ri:case $i:i=this.lines.slice(s,t).join(`
`);break;case Hi:var d=this.lines.getLineStartIndex(s),e=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(d,e,!0);break}return i},Hv=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s},i4={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(Hv(s));var s=this.sections.join(`
`);this.lines=Xv(this.parent,s,this.lines);for(var i=this.totalLinesCount-t,d=Math.ceil(i/this.pageLinesCount),e=0;e<d;e++)this.pageStartIndexes.push(t+e*this.pageLinesCount);return this},setText(s,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var i=Hv(s).split(this.pageBreak),d=0,e=i.length;d<e;d++)this.appendPage(i[d]);return this},appendText(s){var t=this.content+Hv(s);return this.setText(t,!1),this}},n4=Phaser.Math.Clamp,s4={getPage(s){return s===void 0&&(s=this.pageIndex),this.setPageIndex(s).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(s){return s=n4(s,0,this.pageCount-1),this.pageIndex=s,this.startLineIndex=this.pageStartIndexes[s],this.endLineIndex=this.pageStartIndexes[s+1],this}},$v=function(s,t){var i=wo(s);switch(i){case Ri:var d=s.style,e=d.wordWrapWidth,n=d.wordWrapCallback;d.wordWrapWidth=0,d.wordWrapCallback=void 0,s.setText(t),d.wordWrapWidth=e,d.wordWrapCallback=n;break;case Hi:var d=s.style,h=d.wrapMode;d.wrapMode=0,s.setText(t),d.wrapMode=h;break;case $i:var r=s._maxWidth;s._maxWidth=0,s.setText(t),s._maxWidth=r;break}},r4={showPage(s){return this.displayText(this.getPage(s)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(s){$v(this.parent,s)}},P1={getLines:e4};Object.assign(P1,i4,s4,r4);var Do=Phaser.Utils.Objects.GetValue,a4=Phaser.Math.Clamp,Kv=class extends Ae{constructor(t,i){super(t,{eventEmitter:!1});this.textObjectType=wo(this.parent),this.pageStartIndexes=[],this.lines=Xv(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(t){return this.setMaxLines(Do(t,"maxLines",void 0)),this.setPageBreak(Do(t,"pageBreak",`\f
`)),this.setText(Do(t,"text","")),this.setStartLineIndex(Do(t,"start",0)),this.setPageIndex(Do(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Ri:this.lines.length=0;break;case Hi:this.lines.destroy();break;case $i:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=a4(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Ri:case Hi:var i=this.parent.style.maxLines;i>0?t=i:t=this.totalLinesCount;break;case $i:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}};Object.assign(Kv.prototype,P1);var o4=function(s,t){var i=wo(s);switch(i){case Ri:s.style.syncFont(s.canvas,s.context),t=s.runWordWrap(t);break;case Hi:t=s.getText(t,void 0,void 0,!0);break;case $i:t=s.setText(t).getTextBounds().wrappedText;break}return t},ta=Phaser.Utils.Objects.GetFastValue,Zv=Phaser.Utils.Objects.GetValue,M1=class extends Ae{constructor(t,i){super(t,i);this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTextWrapEnable(Zv(t,"wrap",!1)),this.setTypeMode(Zv(t,"typeMode",0)),this.setTypeSpeed(Zv(t,"speed",333)),this.setTextCallback=ta(t,"setTextCallback",null),this.setTextCallbackScope=ta(t,"setTextCallbackScope",null),this.setTypingContent(ta(t,"text","")),this.typingIdx=ta(t,"typingIdx",0),this.insertIdx=ta(t,"insertIdx",null);var i=ta(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIdx,i),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=h4[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var i=A1(t);this.textWrapEnable&&(i=o4(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,i,d,e){return t!==void 0&&this.setTypingContent(t),i!==void 0&&(this.speed=i),d===void 0&&(d=0),this.typingIdx=d+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(e)),this}appendText(t){var i=this.text.concat(A1(t));return this.isTyping?this.setTypingContent(i):this.start(i,void 0,this.textLen),this}stop(t){var i=this.getTimer();return i&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,i,d,e){var n;if(e===0){var h=0,r=i;this.insertIdx=r,n=this.getSubString(t,h,r)}else if(e===1){var r=d,h=r-i;this.insertIdx=0,n=this.getSubString(t,h,r)}else if(e===2){var o=d/2,h=Math.floor(o-i/2),r=h+i;this.insertIdx=i%2?i:0,n=this.getSubString(t,h,r)}else if(e===3){var l=Math.floor(i/2),a;if(l>0){var r=d,h=r-l;a=this.getSubString(t,h,r)}else a="";var u=i-l,c;if(u>0){var h=0,r=h+u;this.insertIdx=r,c=this.getSubString(t,h,r)}else c="",this.insertIdx=0;n=c+a}return n}startTimer(t){this.timer&&this.freeTimer();var i;return t===void 0?i=0:(this.speed,i=t),this.timer=this.scene.time.addEvent({delay:0,startAt:i,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?$v(this.parent,t):this.parent.setText(t)}getTextLength(t){var i=this.parent,d;return i.getPlainText?d=i.getPlainText(t).length:d=t.length,d}getSubString(t,i,d){var e=this.parent,n;return e.getSubString?n=e.getSubString(t,i,d):n=t.slice(i,d),n}},A1=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s},h4={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},R1=Phaser.Utils.Objects.GetValue,Bo=class extends ms{constructor(t,i){i===void 0&&(i={text:l4(t)}),super(t,i),this.type="rexTextBox";var d=this.childrenMap.text;this.page=new Kv(d,R1(i,"page",void 0)),this.typing=new M1(d,R1(i,"typing",i.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=d.width,this.textHeight=d.height}start(t,i){return this.page.setText(t),i!==void 0&&this.setTypeSpeed(i),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypeSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}},l4=function(s){return s.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})},Oi=Phaser.Utils.Objects.GetValue,Go=class extends te{constructor(t,i){super(t,i);this.type="rexNumberBar";var d=Oi(i,"background",void 0),e=Oi(i,"icon",void 0),n=Oi(i,"iconMask",void 0),h=Oi(i,"slider",void 0),r=Oi(i,"text",void 0),o=Oi(i,"space.icon",0),l=Oi(i,"space.slider",0);if(d&&this.addBackground(d),e){var a;this.orientation===0?(h||r)&&(a={right:o}):(h||r)&&(a={bottom:o}),this.add(e,{proportion:0,align:"center",padding:a}),n&&(n=Mo.call(this,e,e,1))}var u;if(h){h.orientation=this.orientation,h.eventEmitter=this,h.value=null,h.hasOwnProperty("input")||(h.input=-1),u=new xs(t,h),t.add.existing(u);var a;this.orientation===0?r&&(a={right:l}):r&&(a={bottom:l});var c;if(this.orientation===0){var f=Oi(h,"width",void 0);c=f===void 0?1:0}else{var v=Oi(h,"height",void 0);c=v===void 0?1:0}this.add(u,{proportion:c,align:"center",padding:a})}r&&this.add(r),this.addChildrenMap("background",d),this.addChildrenMap("icon",e),this.addChildrenMap("iconMask",n),this.addChildrenMap("slider",u),this.addChildrenMap("text",r);var p=Oi(i,"valuechangeCallback",null);if(p!==null){var g=Oi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",p,g)}this.setEnable(Oi(i,"enable",void 0)),this.setValue(Oi(i,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,i,d){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,d),this}addValue(t,i,d){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,d),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,d){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,d),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var i;return t.text?i=t.text:i=t.getData("text"),i}set text(t){var i=this.childrenMap.text;i!==void 0&&(i.setText?i.setText(t):i.setData("text",t))}setText(t){return this.text=t,this}},Jv=Phaser.Utils.Objects.GetValue,O1={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"},bo=class extends Ai{constructor(t,i){super(t,i);this.type="rexBadge";var d=Jv(i,"background",void 0);d&&this.addBackground(d),this.addChildrenMap("background",d);var e=Jv(i,"main",void 0);e&&this.add(e,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",e);for(var n in O1){var h=Jv(i,n,void 0);h&&(this.add(h,{key:n,align:O1[n],expand:!1}),this.addChildrenMap(n,h))}}},u4=Ai.prototype.add,L1=function(s,t,i,d,e,n,h,r,o){return s.setVisible(!1),u4.call(this,s,t,i,d,e,n,h,r,o),this},f4={add:L1,addPage:L1},d4=function(s){return s===void 0?null:this.sizerChildren.hasOwnProperty(s)?this.sizerChildren[s]:null},F1=ri.prototype.setChildVisible,v4=function(s){this._previousKey=this._currentKey;var t=this.previousPage;t&&(this.swapMode===0?(F1.call(this,t,!1),this.emit("pageinvisible",t,this._previousKey,this)):t.destroy()),s&&!this.sizerChildren.hasOwnProperty(s)&&this.emit("createpage",s,this),this._currentKey=s;var i=this.currentPage;return i&&(F1.call(this,i,!0),this.emit("pagevisible",i,this._currentKey,this),this.fadeInDuration>0&&i.setAlpha(0).fadeIn(this.fadeInDuration,1)),this},c4=function(s){return this.sizerChildren.hasOwnProperty(s)},I1={getPage:d4,swapPage:v4,hasPage:c4};Object.assign(I1,f4);var w1=Phaser.Utils.Objects.GetValue,qs=class extends Ai{constructor(t,i){super(t,i);this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(w1(i,"swapMode",0)),this.setFadeInDuration(w1(i,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=p4[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}};Object.assign(qs.prototype,I1);var p4={invisible:0,destroy:1},D1=Phaser.Math.Vector3,g4=Phaser.Math.Matrix4,B1=new D1,G1=new D1,b1=new g4,m4=function(s,t,i,d,e,n,h){t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=0),n===void 0&&(n=0),h===void 0&&(h=0),B1.set(t,i,d),G1.set(e,n,h),b1.fromRotationXYTranslation(G1,B1,!0);for(var r=0,o=s.vertices.length;r<o;r++)s.vertices[r].transformMat4(b1)},x4=Phaser.GameObjects.Mesh,y4=Phaser.Utils.Objects.IsPlainObject,_s=Phaser.Utils.Objects.GetValue,T4=Phaser.Geom.Mesh.GenerateGridVerts,Qv=Phaser.Math.RadToDeg,iu=Phaser.Math.DegToRad,N1=45,C4=1+1/Math.sin(iu(N1)),kv=class extends x4{constructor(t,i,d,e,n,h){y4(i)&&(h=i,i=_s(h,"x",0),d=_s(h,"y",0),e=_s(h,"key",null),n=_s(h,"frame",null)),super(t,i,d,e,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(C4),this.hideCCW=_s(h,"hideCCW",!0);var r=_s(h,"gridWidth",32),o=_s(h,"gridHeight",r);this.resetVerts(r,o)}resetPerspective(){return this.setPerspective(this.width,this.height,N1),this}resetVerts(t,i){if(t!==void 0&&(this.gridWidth=t),i!==void 0&&(this.gridHeight=i),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var d=this.frame.cutWidth,e=this.frame.cutHeight;T4({mesh:this,texture:this.texture.key,frame:this.frame.name,width:d/this.height,height:e/this.height,widthSegments:Math.ceil(d/this.gridWidth),heightSegments:Math.ceil(e/this.gridHeight),flipY:this.frame.source.isRenderTexture});var n=this.transformInfo;return n&&this.transformVerts(n.x,n.y,n.z,n.rotateX,n.rotateY,n.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Qv(this.rotationX)}set angleX(t){this.rotationX=iu(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Qv(this.rotationY)}set angleY(t){this.rotationY=iu(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Qv(this.rotationZ)}set angleZ(t){this.rotationZ=iu(t)}transformVerts(t,i,d,e,n,h){return t===void 0&&(t=0),i===void 0&&(i=0),d===void 0&&(d=0),e===void 0&&(e=0),n===void 0&&(n=0),h===void 0&&(h=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=i,this.transformInfo.rotateX=e,this.transformInfo.rotateY=n,this.transformInfo.rotateZ=h,m4(this,t,i,d,e,n,h),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var i=this.vertices,d=0,e=i.length;d<e;d++)i[d].color=t}setTint(t){return this.tint=t,this}},S4=Phaser.GameObjects.RenderTexture,E4=Phaser.Utils.Objects.IsPlainObject,nu=Phaser.Utils.Objects.GetValue,su=class extends kv{constructor(t,i,d,e,n,h){E4(i)&&(h=i,i=nu(h,"x",0),d=nu(h,"y",0),e=nu(h,"width",32),n=nu(h,"height",32));var r=new S4(t,i,d,e,n).setOrigin(.5);super(t,i,d,r.texture.key,null,h);this.type="rexPerspectiveRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,i){return i===void 0&&(i={}),i.gameObjects=t,i.renderTexture=this.rt,hl(i),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}},F9=Phaser.Animations.AnimationState,I9=Phaser.Utils.Objects.IsPlainObject,w9=Phaser.Utils.Objects.GetValue,on=function(s,t,i,d){if(Array.isArray(s))for(var e=!1,n=0,h=s.length;n<h;n++){var r=s[n];if(!(d&&!r)&&(i?e=t.call(i,r,n,s):e=t(r,n,s),e))return}else{var e=!1;for(var o in s){var r=s[o];if(!(d&&!r)&&(i?e=t.call(i,r,o,s):e=t(r,o,s),e))return}}},jv=Phaser.Math.RadToDeg,qv=Phaser.Math.DegToRad,Y1=class extends ri{constructor(t,i,d,e,n,h){super(t,i,d,e,n);this.faces=h,on(h,function(r){r.setPosition(i,d),this.add(r)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return jv(this.rotationX)}set angleX(t){this.rotationX=qv(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return jv(this.rotationY)}set angleY(t){this.rotationY=qv(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return jv(this.rotationZ)}set angleZ(t){this.rotationZ=qv(t)}setDebug(t,i){return on(this.faces,function(d){d.setDebug(t,i)},null,!0),this}panX(t){return on(this.faces,function(i){i.panX(t)},null,!0),this}panY(t){return on(this.faces,function(i){i.panY(t)},null,!0),this}panZ(t){return on(this.faces,function(i){i.panZ(t)},null,!0),this}transformVerts(t,i,d,e,n,h){return on(this.faces,function(r){r.transformVerts(t,i,d,e,n,h)},null,!0),this}forEachFace(t,i,d){return on(this.faces,t,i,d),this}},P4=Phaser.Utils.Objects.IsPlainObject,M4={key:"__WHITE"},A4={image:kv,rendertexture:su},z1=function(s,t){t===void 0&&(t=M4);var i;return P4(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),i=new A4[t.type](s,t),s.add.existing(i)):i=t,i},R4=function(s,t,i){var d;if(i===void 0){d=[];for(var e,n,h=0,r=t.length;h<r;h++)n=t[h],n?e=z1(s,n):e=null,d.push(e)}else{d={};for(var e,o,h=0,r=i.length;h<r;h++)o=i[h],t.hasOwnProperty(o)?e=z1(s,t[o]):e=null,d[o]=e}return d},O4=Phaser.Math.DegToRad,U1=O4(180),L4=function(s,t){var i=t.back;i&&(s.orientation===0?i.transformVerts(0,0,0,0,U1,0):i.transformVerts(0,0,0,U1,0,0))},_v=Phaser.Utils.Objects.GetValue,F4=Phaser.Math.Linear,V1=class extends ls{constructor(t,i){super(t,i);this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(_v(t,"ease","Cubic")),this.setFrontToBackDirection(_v(t,"frontToBack",0)),this.setBackToFrontDirection(_v(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=W1[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=W1[t]),this.endAngleBF=t===0?-180:180,this}start(t,i){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var d=i+1,e=this.parent;return e.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*d):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*d),super.start(),this}flip(t,i){return this.isRunning?this:(t===void 0&&(t=this.duration),i===void 0&&(i=0),this.start(t,i),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+i+1)%2,this)}flipRight(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,i),this}flipLeft(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,i),this}updateGameObject(t,i){var d=this.easeFn(i.t),e=F4(this.startAngle,this.endAngle,d);t.orientation===0?t.angleY=e:t.angleX=e}},W1={right:0,"left-to-right":0,left:1,"right-to-left":1},I4=Phaser.Utils.Objects.IsPlainObject,tr=Phaser.Utils.Objects.GetValue,w4=["back","front"],X1=class extends Y1{constructor(t,i,d,e){I4(i)&&(e=i,i=tr(e,"x",0),d=tr(e,"y",0));var n=R4(t,e,w4),h=n.back,r=n.front,o=tr(e,"width"),l=tr(e,"height");if(o===void 0||l===void 0){if(o===void 0){var a=r?r.width:0,u=h?h.width:0;o=Math.max(a,u)}if(l===void 0){var c=r?r.height:0,f=h?h.height:0;l=Math.max(c,f)}}super(t,i,d,o,l,n);this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,on(n,function(p,g){this[`${g}Face`]=p},this);var v=tr(e,"flip",void 0);v!==!1&&(this.flip=new V1(this,v)),this.setOrientation(tr(e,"orientation",0)),L4(this,n),this.setFace(tr(e,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,on(this.faces,function(i){i.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,on(this.faces,function(i){i.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,on(this.faces,function(i){i.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=D4[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=B4[t]),this.currentFaceIndex=t;var i=t===1,d=i?180:0;this.orientation===0?this.angleY=d:this.angleX=d}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}},D4={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},B4={front:0,back:1},D9=Phaser.Utils.Objects.GetValue,B9=Phaser.Math.RadToDeg,G9=Phaser.Math.DegToRad,b9=Phaser.Math.Angle.WrapDegrees,N9=Phaser.Math.Angle.ShortestBetween,Y9=Phaser.Math.Wrap,z9=Phaser.Math.Linear,U9=Phaser.Utils.Objects.IsPlainObject,V9=Phaser.Utils.Objects.GetValue,W9=Phaser.Math.DegToRad,X9=Phaser.Math.RadToDeg,H9=Phaser.Math.Angle.WrapDegrees,$9=Phaser.Math.Linear,K9=Phaser.Math.Wrap,Z9=Phaser.Utils.Objects.IsPlainObject,J9=Phaser.Utils.Objects.GetValue,Q9=Phaser.Math.Wrap,G4=Phaser.Utils.Objects.GetValue,H1=function(s,t,i){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=G4(i,"useParentBounds",!1),t.setPosition(s.x,s.y).setVisible(!1),s.pin(t)},b4=Phaser.Utils.Objects.GetValue,N4=function(s){var t=this.scene;this.setSnapshotPadding(b4(s,"snapshotPadding",0)),s=Ys(s),delete s.width,delete s.height,s.front={width:1,height:1},s.back={width:1,height:1};var i=new X1(t,s);t.add.existing(i);var d=i.flip;if(d){var e=this;d.on("start",function(){e.enterPerspectiveMode()}).on("complete",function(){e.exitPerspectiveMode()})}return i},Y4=["front","back"],z4={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var s=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,s),this.setChildVisible(this.childrenMap.back,!s),this},setSnapshotPadding(s){return this.snapshotPadding=s,this},snapshotFace(s){typeof s=="number"&&(s=Y4[s]);var t=this.perspectiveCard.faces[s],i=this.childrenMap[s];t.rt.clear();var d=i.visible;i.visible=!0;var e=i.isRexContainerLite?i.getAllVisibleChildren():i;return t.snapshot(e,{padding:this.snapshotPadding}),i.visible=d,this}},$1=Phaser.Utils.Objects.GetValue,No=class extends Ai{constructor(t,i){super(t,i);this.type="rexPerspectiveCard";var d=i.back,e=$1(i,"expand.back",!0);this.add(d,{key:"back",expand:e});var n=i.front,h=$1(i,"expand.front",!0);this.add(n,{key:"front",expand:h}),this.perspectiveCard=N4.call(this,i),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var i=t===0,d=this.childrenMap.front,e=this.childrenMap.back;this.setChildVisible(d,i),this.setChildVisible(e,!i)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,i,d,e,n,h){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,i,d,e,n,h),this}forEachFace(t,i,d){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,i,d),this}};Object.assign(No.prototype,z4);var U4=function(s){var t=this.getElement("tabs.buttons");if(!(s>=t.length))return t[s].name},V4=function(s){for(var t=this.getElement("tabs.buttons"),i=0,d=t.length;i<d;i++)if(t[i].name===s)return i},W4=Phaser.Utils.Objects.IsPlainObject,tc=Phaser.Utils.Objects.GetValue,X4=Phaser.Utils.String.UUID,H4=function(s,t,i){if(W4(s)){var d=s;s=tc(d,"key"),t=tc(d,"tab"),i=tc(d,"page")}return s||(s=X4()),t.name=s,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:s}),this},$4=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),t!=null&&this.childrenMap.tabs.emitButtonClick(t),this},K4=function(){return this.swapPage(0),this},Z4=function(){return this.swapPage(this.getElement("tabs.buttons").length-1),this},J4={swapPage:$4,swapFirstPage:K4,swapLastPage:Z4},Q4=function(s,t){typeof s=="number"&&(s=this.getPageKey(s));var i=this.childrenMap.tabs,d=i.getByName(s),e=this.childrenMap.pages,n=e.getElement(s);return!d||!n?this:(e.removeChildrenMap(s),i.removeButton(d,t),e.remove(n,t),this)},k4={removePage:Q4},j4=function(s){return typeof s=="number"&&(s=this.getPageKey(s)),this.childrenMap.pages.getPage(s)},q4=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),this.getElement("tabs.buttons")[t]},K1={getPageKey:U4,getPageIndex:V4,addPage:H4,getPage:j4,getTab:q4};Object.assign(K1,J4,k4);var er=Phaser.Utils.Objects.GetValue,ru=te.prototype.add,Yo=class extends te{constructor(t,i){i===void 0&&(i={});var d=er(i,"tabPosition","top"),e=d==="left"||d==="right"?"x":"y";i.orientation=e,super(t,i),this.type="rexTabPages";var n=er(i,"background",void 0);n&&this.addBackground(n);var h=er(i,"pages"),r=new qs(t,h);t.add.existing(r);var o=e==="y",l=o?er(i,"wrapTabs",!1):!1,a=er(i,"tabs",void 0);a===void 0&&(a={});var u=l?Cn:Ce;a.orientation=o?"x":"y",a.buttonsType="radio";var c=new u(t,a);t.add.existing(c);var f=l?!0:er(i,"expand.tabs",!1),v=er(i,"align.tabs","left");switch(d){case"top":case"left":ru.call(this,c,{proportion:0,expand:f,align:v}),ru.call(this,r,{proportion:1,expand:!0});break;case"bottom":case"right":ru.call(this,r,{proportion:1,expand:!0}),ru.call(this,c,{proportion:0,expand:f,align:v});break}this.addChildrenMap("background",n),this.addChildrenMap("tabs",c),this.addChildrenMap("pages",r),c.on("button.click",function(p){var g=p.name;r.hasPage(g)&&r.swapPage(g)}),c.on("button.statechange",function(p,g,m,x){var y=m?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),r.on("pagevisible",function(p,g,m){this.emit("page.focus",p,g)}),r.on("pageinvisible",function(p,g,m){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(Yo.prototype,K1);var _4=function(s){return s!==void 0&&(this.text=s),this.lines=Xv(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Z1=function(s){return(s-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},J1=function(s){return s*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},tW=function(s){var t=s+this.visibleLinesCount+1,i;switch(this.textObjectType){case Ri:i=this.lines.slice(s,t).join(`
`);break;case Hi:var d=this.lines.getLineStartIndex(s),e=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(d,e,!0);break;case $i:i=this.lines.slice(s,t).join(`
`);break}return i},Q1=function(){var s=this.textObject.rexSizer;this.textObject.y+=s.offsetY-s.preOffsetY,s.preOffsetY=s.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&eW.call(this)},eW=function(){if(!!this.textObject.setCrop){var s=this.textObject.rexSizer.offsetY,t,i;s<=0?(t=-s,i=this.height):(t=0,i=this.height-s),this.textObject.setCrop(0,t,this.width,i)}},iW=function(){var s=Math.max(Math.floor(Z1.call(this,-this.textOY)),0),t=J1.call(this,s)+this.textOY,i=tW.call(this,s);return $v(this.textObject,i),this.textObject.rexSizer.offsetY=t,Q1.call(this),this},nW=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,eo.call(this),this},sW=function(s,t,i){if(i+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===i)){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case Ri:case Hi:s.setFixedSize(t,i);var d=s.style,e=Math.max(t,0);this.textObjectType===Ri?d.wordWrapWidth=e:(d.wrapMode===0&&(d.wrapMode=1),d.wrapWidth=e);break;case $i:s.setMaxWidth(t);break}this.setText()}},rW=function(){var s,t,i,d=this.left,e=this.top,n,h,r,o;s=this.textObject,s.rexSizer.hidden||(t=s.rexSizer,i=t.padding,n=d+i.left,h=e+i.top,r=this.width-i.left-i.right,o=this.height-i.top-i.bottom,sW.call(this,s,r,o),Pl(s,n,h,r,o,t.align),t.preOffsetY=0,Q1.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},aW={setText:_4,updateTextObject:iW,preLayout:nW,layoutChildren:rW},k1=Phaser.Utils.Objects.IsPlainObject,Li=Phaser.Utils.Objects.GetValue,oW=Phaser.Display.Align.TOP_LEFT,ec=class extends ps{constructor(t,i,d,e,n,h){k1(i)?(h=i,i=Li(h,"x",0),d=Li(h,"y",0),e=Li(h,"width",void 0),n=Li(h,"height",void 0)):k1(e)&&(h=e,e=Li(h,"width",void 0),n=Li(h,"height",void 0)),super(t,i,d,e,n,h),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Li(h,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Li(h,"clamplTextOY",!0)),this.alwaysScrollable=Li(h,"alwaysScrollable",!1);var r=Li(h,"background",void 0),o=Li(h,"text",void 0);o===void 0&&(o=hW(t)),this.textCropEnable=Li(h,"textCrop",!!o.setCrop);var l=Li(h,"textMask",!this.textCropEnable);r&&this.addBackground(r),this.add(o),this.sizerChildren=[o];var a=this.getSizerConfig(o);a.align=oW,a.padding=Gr(0),a.expand=!0,this.textObject=o,this.textObjectType=wo(o),a.preOffsetY=0,a.offsetY=0,l&&(this.textMask=Mo.call(this,this.textObject,this)),this.addChildrenMap("background",r),this.addChildrenMap("text",o)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Ri:this.lines.length=0;break;case Hi:this.lines.destroy();break;case $i:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Ri:case Hi:var i=this.textObject.style;t=i.metrics.fontSize+i.strokeThickness;break;case $i:var d=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*d;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Ri:case Hi:t=this.textObject.lineSpacing;break;case $i:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Z1.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=J1.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var i=this.topTextOY,d=this.bottomTextOY,e=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:e?t=i:n&&(t=d)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),e&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=e,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,d)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}},hW=function(s){return s.add.text(0,0,"")};Object.assign(ec.prototype,aW);var lW=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textObjectHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.textHeight}})},uW=function(s){var t=this.childrenMap.child;return t.setText(s),this.resizeController(),this},fW=function(s){return this.setText(this.text+s),this},$n=Phaser.Utils.Objects.GetValue,ea=class extends Fo{constructor(t,i){i===void 0&&(i={});var d=$n(i,"text",void 0),e=$n(i,"textWidth",void 0),n=$n(i,"textHeight",void 0),h=$n(i,"textCrop",!!d.setCrop),r=$n(i,"textMask",!h),o=$n(i,"content",""),l=new ec(t,{width:e,height:n,text:d,textMask:r,textCrop:h&&!r,content:o,clamplTextOY:$n(i,"clamplChildOY",!1),alwaysScrollable:$n(i,"alwaysScrollable",!1)});t.add.existing(l);var a=e===void 0?1:0,u=n===void 0;lW(l),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:l,proportion:a,expand:u};var c=$n(i,"space",void 0);c&&(c.child=c.text),super(t,i),this.addChildrenMap("text",d)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}},dW={setText:uW,appendText:fW};Object.assign(ea.prototype,dW);var vW=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,i=t.rexSizer;return i.hidden?s=0:this.scrollMode===0?s=this.getChildWidth(t):s=0,s},cW=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,i=t.rexSizer;return i.hidden||this.scrollMode===0?s=0:s=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:Jt(t),s},pW=function(s){return s===void 0&&(s=[]),this.child&&this.child.isRexSizer&&s.push(this.child),s},gW=function(){var s=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:s+=this.childOY,this.child.setPosition(s,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},mW=function(){var s=this.child,t,i;s.rexSizer.hidden||(this.scrollMode===0?t=this.width:i=this.height,s.isRexSizer?s.runLayout(this,t,i):vs(s,t,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},j1={getChildrenWidth:vW,getChildrenHeight:cW,getChildrenSizers:pW,resetChildPosition:gW,layoutChildren:mW};Object.assign(j1,v1);var q1=Phaser.Utils.Objects.IsPlainObject,hn=Phaser.Utils.Objects.GetValue,xW=Phaser.Display.Align.TOP_LEFT,ic=class extends ps{constructor(t,i,d,e,n,h){q1(i)?(h=i,i=hn(h,"x",0),d=hn(h,"y",0),e=hn(h,"width",void 0),n=hn(h,"height",void 0)):q1(e)&&(h=e,e=hn(h,"width",void 0),n=hn(h,"height",void 0)),super(t,i,d,e,n,h),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(hn(h,"scrollMode",!0)),this.setClampMode(hn(h,"clamplChildOY",!0));var r=hn(h,"child",void 0),o=hn(h,"expand",!0);r.setOrigin&&r.setOrigin(0),this.add(r),this.sizerChildren=[r];var l=this.getSizerConfig(r);l.align=xW,l.expand=o,this.child=r,this.setupChildrenMask(hn(h,"mask",void 0))}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=i1[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?Jt(this.child):_t(this.child)}get childWidth(){return this.scrollMode===0?_t(this.child):Jt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var i=this.topChildOY,d=this.bottomChildOY,e=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:e?t=i:n&&(t=d)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),e&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=e,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,d)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}};Object.assign(ic.prototype,j1);var zo=Phaser.Utils.Objects.GetValue,ir=class extends Fo{constructor(t,i){i===void 0&&(i={});var d=Ql(i),e=zo(i,"panel",void 0);e===void 0&&(e={}),e.scrollMode=d,e.clamplChildOY=zo(i,"clamplChildOY",!1);var n=new ic(t,e);t.add.existing(n);var h=zo(e,"width",void 0),r=zo(e,"height",void 0),o,l;d===0?(o=h===void 0?1:0,l=r===void 0):(o=r===void 0?1:0,l=h===void 0),i.type="rexScrollablePanel",i.child={gameObject:n,proportion:o,expand:l};var a=zo(i,"space",void 0);a&&(a.child=a.panel),super(t,i),this.addChildrenMap("panel",n.child),this.addChildrenMap("panelLayer",n.maskLayer)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),zl(this.childrenMap.child,t),this}},au={popUp:function(s,t){s.popUp(t)},scaleDown:function(s,t){s.scaleDown(t)},fadeIn:function(s,t){s.fadeIn(t)},fadeOut:function(s,t){s.fadeOut(t)}},_1=function(s,t,i,d){i===void 0&&(i=0),d===void 0&&(d=t.length),s.length=d-i;for(var e=0,n=s.length;e<n;e++)s[e]=t[e+i];return s},ou=Phaser.Utils.Objects.GetValue,nc=function(s,t,i){var d=ou(i,"reverse",!1),e;if(nn(s[0]))if(d)for(var h=s.length,n=h-1;n>=0;n--)e=nc(s[n],t,i);else for(var n=0,h=s.length;n<h;n++)e=nc(s[n],t,i);else e=yW(s,t,i);return e},yW=function(s,t,i){var d=ou(i,"argsConvert",void 0),e=ou(i,"argsConvertScope",void 0),n=s[0];if(Ts=_1(Ts,s,1),d){d===!0&&(d=ty,e=void 0);for(var h=0,r=Ts.length;h<r;h++)e?Ts[h]=d.call(e,Ts[h],s):Ts[h]=d(Ts[h],s)}var o;typeof n=="string"?(o=t[n],o==null&&(o=ou(t,n,null))):o=n;var l=o.apply(t,Ts);return l},Ts=[],ln=Phaser.Utils.Objects.GetValue,tC=class extends Ae{constructor(t,i){super(t,i);var d=ln(i,"clock",void 0);d||(d=new Id(t)),this.clock=d,this.clock.on("update",this.update,this),this.resetFromJSON(i)}resetFromJSON(t){return this.clock.resetFromJSON(ln(t,"clock",void 0)),this.state=ln(t,"state",0),this.commands=ln(t,"commands",[]),this.scope=ln(t,"scope",void 0),this.setTimeUnit(ln(t,"timeUnit",0)),this.setDtMode(ln(t,"dtMode",0)),this.index=ln(t,"index",0),this.nextTime=ln(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,i,d){this.stop();var e=ln(d,"timeUnit",void 0);e!==void 0&&this.setTimeUnit(e);var n=ln(d,"dtMode",void 0);return n!==void 0&&this.setDtMode(n),t=t.filter(function(h){var r=h[0];return!isNaN(r)}).map(function(h){var r=h[0];return typeof r=="string"&&(h[0]=parseFloat(h[0])),h}),this.dtMode===0&&t.sort(function(h,r){var o=h[0],l=r[0];return o>l?1:o<l?-1:0}),this.commands=t,this.scope=i,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var i=this.commands.length-1;;){var d=this.commands[this.index],e=d[1];if(nn(e)||(e=_1(TW,d,1)),nc(e,this.scope),this.emit("runcommand",e,this.scope),this.index===i)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var i=this.commands[this.index][0];return this.timeUnit===1&&(i=i*1e3),this.dtMode===1&&(i+=t),i}setDtMode(t){return typeof t=="string"&&(t=SW[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=CW[t]),this.timeUnit=t,this}},TW=[],CW={ms:0,s:1,sec:1},SW={abs:0,absolute:0,inc:1,increment:1},Uo=Phaser.Utils.Objects.GetValue,Vo=class extends ms{constructor(t,i){i===void 0&&(i={text:createDefaultTextObject(t)}),super(t,i),this.type="rexToast",this.setTransitInTime(Uo(i,"duration.in",200)),this.setDisplayTime(Uo(i,"duration.hold",1200)),this.setTransitOutTime(Uo(i,"duration.out",200)),this.setTransitInCallback(Uo(i,"transitIn",Cs.popUp)),this.setTransitOutCallback(Uo(i,"transitOut",Cs.scaleDown)),this.player=new tC(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Cs[t]),t){case Cs.popUp:t=au.popUp;break;case Cs.fadeIn:t=au.fadeIn;break}return t||(t=ei),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Cs[t]),t){case Cs.scaleDown:t=au.scaleDown;break;case Cs.fadeOut:t=au.fadeOut;break}return t||(t=ei),this.transitOutCallback=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX0=t,this.scaleY0=i,super.setScale(t,i),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var i=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[ei]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[ei]]];return this.player.load(i,this).once("complete",function(){this.showMessage()},this).start(),this}},Cs={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},EW=function(){return function(s,t,i,d){t!=="panel"&&i.setChildVisible(s,!0)}},PW=function(){return function(s,t,i,d){t!=="panel"&&i.setChildVisible(s,!1)}},MW={show:EW,hide:PW},AW=function(s,t){return t===void 0&&(t=1),function(i,d,e,n){d!=="panel"&&e.fadeChild(i,n?0:s,t)}},RW=function(s,t){return t===void 0&&(t=0),function(i,d,e,n){d!=="panel"&&e.fadeChild(i,n?0:s,t)}},OW={show:AW,hide:RW},eC=function(s,t){return function(i,d,e,n){d!=="panel"&&e.moveChild(i,n?0:s,t)}},LW={show:eC,hide:eC},iC=function(s,t){return function(i,d,e,n){d==="panel"&&e.moveChild(i,n?0:s,t)}},FW={show:iC,hide:iC},sc={visible:MW,fade:OW,move:LW,"move-panel":FW},IW=function(s){var t,i;[t,...i]=typeof s=="string"?[s]:s;var d,e;return sc.hasOwnProperty(t)?(d=sc[t].show.apply(null,i),e=sc[t].hide.apply(null,i)):(d=ei,e=ei),{show:d,hide:e}},wW={showChild(s,t){var i=this.sizerChildren[s];return i&&(this.emit("showchild",i,s,this,t),this.resetChildState(i)),this},hideChild(s,t){var i=this.sizerChildren[s];return i&&(this.emit("hidechild",i,s,this,t),this.resetChildState(i)),this},swapChild(s,t){return this.currentChildKey===s||(this.currentChildKey==="panel"||s==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=s,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(s,t))),this},showPanel(s){return this.swapChild("panel",s),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var s=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(s),this},toggleRightSide(){var s=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(s),this},toggleTopSide(){var s=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(s),this},toggleBottomSide(){var s=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(s),this}},DW=ri.prototype.setChildVisible,BW={setChildVisible(s,t){var i;if(typeof s=="string"){var i=s;s=this.sizerChildren[i]}else i=Wl(this.sizerChildren,s);return t===void 0&&(t=this.currentChildKey===i),DW.call(this,s,t),this}},GW={fadeChild(s,t,i){var d;return typeof s=="string"?(d=s,s=this.sizerChildren[d]):d=Wl(this.sizerChildren,s),t===void 0&&(t=500),i===void 0&&(i=this.currentChildKey===d?1:0),s.fadeIn(t,{start:s.alpha,end:i}),this},fadeChildPromise(s,t,i){return typeof s=="string"&&(s=this.sizerChildren[key]),this.fadeChild(s,t,i),s._fade?Re(s._fade):Promise.resolve()}},bW={moveChild(s,t,i,d){var e;typeof s=="string"?(e=s,s=this.sizerChildren[e]):e=Wl(this.sizerChildren,s),t===void 0&&(t=500);var n=this.currentChildKey===e;if(d===void 0)switch(e){case"leftSide":case"rightSide":d=_t(s);break;case"topSide":case"bottomSide":d=Jt(s);break;default:if(n)switch(this.previousChildKey){case"leftSide":case"rightSide":d=_t(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":d=Jt(this.sizerChildren[this.previousChildKey]);break;default:d=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":d=_t(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":d=Jt(this.sizerChildren[this.currentChildKey]);break;default:d=0;break}break}var h,r,o,l;if(n)switch(e){case"panel":switch(this.previousChildKey){case"leftSide":h=!0;break;case"rightSide":r=!0;break;case"topSide":o=!0;break;case"bottomSide":l=!0;break}break;case"leftSide":r=!0;break;case"rightSide":h=!0;break;case"topSide":l=!0;break;case"bottomSide":o=!0;break}else switch(e){case"panel":switch(this.currentChildKey){case"leftSide":r=!0;break;case"rightSide":h=!0;break;case"topSide":l=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":h=!0;break;case"rightSide":r=!0;break;case"topSide":o=!0;break;case"bottomSide":l=!0;break}return h?s.moveTo(t,`-=${d}`,void 0,i):r?s.moveTo(t,`+=${d}`,void 0,i):o?s.moveTo(t,void 0,`-=${d}`,i):l?s.moveTo(t,void 0,`+=${d}`,i):s.moveTo(0),this},moveChildPromise(s,t,i,d){return typeof s=="string"&&(s=this.sizerChildren[key]),this.moveChild(s,t,i,d),s._easeMove?Re(s._easeMove):Promise.resolve()}},nC={};Object.assign(nC,BW,GW,bW);var hi=Phaser.Utils.Objects.GetValue,Wo=class extends Ai{constructor(t,i){super(t,i);this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var d=hi(i,"showChildCallback",void 0);if(d)if(sv(d)){var e=hi(i,"showChildCallbackScope",void 0);this.on("showchild",d,e);var n=hi(i,"hideChildCallback",void 0),h=hi(i,"hideChildCallbackScope",void 0);this.on("hidechild",n,h)}else{var r=IW(d);this.on("showchild",r.show),this.on("hidechild",r.hide)}var o=hi(i,"background",void 0),l=hi(i,"panel",void 0),a=hi(i,"leftSide",void 0),u=hi(i,"rightSide",void 0),c=hi(i,"topSide",void 0),f=hi(i,"bottomSide",void 0);if(o&&this.addBackground(o),l&&this.add(l,"panel","center",0,!0),a){var v=hi(i,"expand.left",!0);this.add(a,"leftSide","left-top",0,{height:v})}if(u){var v=hi(i,"expand.right",!0);this.add(u,"rightSide","right-top",0,{height:v})}if(c){var v=hi(i,"expand.top",!0);this.add(c,"topSide","left-top",0,{width:v})}if(f){var v=hi(i,"expand.bottom",!0);this.add(f,"bottomSide","left-bottom",0,{width:v})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}};Object.assign(Wo.prototype,wW,nC);var rc=function(s){for(var t=s.scene.input,i=t.manager,d=i.pointersTotal,e=i.pointers,n,h=0;h<d;h++)if(n=e[h],!(!n.primaryDown||t.getDragState(n)!==0||!fd(s,n)))return t.setDragState(n,1),t._drag[n.id]=[s],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(n,3),t.processDragStartList(n)):t.setDragState(n,2),!0;return!1},hu=Phaser.Utils.Objects.GetValue,sC=Phaser.Math.Distance.Between,rC=Phaser.Math.RotateAroundDistance,lu=class extends Ae{constructor(t,i){super(t,{eventEmitter:!1});this._enable=void 0,t.setInteractive(hu(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(hu(t,"enable",!0)),this.setAxisMode(hu(t,"axis",0)),this.setAxisRotation(hu(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=NW[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return rc(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,i,d){this.isDragging||(this.pointer=t)}onDrag(t,i,d){if(this.pointer===t){var e=this.parent;if(this.axisMode===0)e.x=i,e.y=d;else if(this.axisRotation===0)this.axisMode===1?e.x=i:this.axisMode===2&&(e.y=d);else{var n,h={x:i,y:d};n=sC(h.x,h.y,e.x,e.y),h=rC(h,e.x,e.y,-this.axisRotation,n),this.axisMode===1?h.y=e.y:this.axisMode===2&&(h.x=e.x),n=sC(h.x,h.y,e.x,e.y),h=rC(h,e.x,e.y,this.axisRotation,n),e.x=h.x,e.y=h.y}}}onDragEnd(t,i,d,e){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}},NW={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},YW=Phaser.Utils.Objects.IsPlainObject,aC=Phaser.Utils.Objects.GetValue,oC=function(s,t,i){var d;if(s===void 0)s=i.texture.key,t=i.frame.name;else if(YW(s)){var e=s;s=aC(e,"key",i.texture.key),t=aC(e,"frame",i.frame.name)}else typeof s=="string"||(d=s);return d===void 0&&(d=function(n){n.setTexture(s,t)}),d},Xo=Phaser.Utils.Objects.GetValue,zW=Phaser.Utils.Objects.GetAdvancedValue,UW=Phaser.Math.Linear,uu=class extends ls{constructor(t,i){super(t,i);this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(zW(t,"duration",500)),this.setEase(Xo(t,"ease","Sine")),this.setOrientation(Xo(t,"orientation",0)),this.setFrontFace(Xo(t,"front",void 0)),this.setBackFace(Xo(t,"back",void 0)),this.setFace(Xo(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=VW[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=WW[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,i){return this.frontFaceCallback=oC(t,i,this.parent),this}setBackFace(t,i){return this.backFaceCallback=oC(t,i,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,i){i.justRestart&&this.toggleFace();var d=i.t;i.isOddIteration&&(d=1-d),d=this.easeFn(d);var e=UW(this.scale0,0,d);this.orientation===0?t.scaleX=e:t.scaleY=e}},VW={x:0,horizontal:0,y:1,vertical:1},WW={front:0,back:1},hC=Phaser.Math.RotateAround,ac=function(s,t,i){var d=s.width/2,e=s.height/2;return Xe.x=t-d,Xe.y=i-e,hC(Xe,0,0,s.rotation),Xe.x*=s.scaleX,Xe.y*=s.scaleY,Xe.x+=s.x,Xe.y+=s.y,Xe},XW=function(s,t,i){var d=s.width/2,e=s.height/2;return Xe.x=t-s.x,Xe.y=i-s.y,Xe.x/=s.scaleX,Xe.y/=s.scaleY,hC(Xe,0,0,-s.rotation),Xe.x+=d,Xe.y+=e,Xe},Xe={x:0,y:0},lC=class{constructor(t,i){this.parent=t,this.vertex=i,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,i){var d=this.parent,e=d.height,n=d.frame.cutWidth/e/2,h=d.frame.cutHeight/e/2,r=t/e-n,o=i/e-h,l=this.vertex;return l.x=r,l.y=-o,d.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,i){return this._localXOrigin=t,this._localYOrigin=i,this._localX=t,this._localY=i,this}setLocalXY(t,i,d){return this._localX===t&&this._localY===i?this:(this._localX=t,this._localY=i,d||this.updateVertexPosition(t,i),this)}setWorldXY(t,i){if(this._worldX===t&&this._worldY===i)return this;var d=XW(this.parent,t,i);return this.setLocalXY(d.x,d.y),this}setPosition(t,i){return this.setWorldXY(t,i),this}getWorldXY(){return ac(this.parent,this._localX,this._localY)}get x(){var t=ac(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=ac(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}},HW=Phaser.Geom.Mesh.Vertex,$W=Phaser.Geom.Mesh.Face,JW=function(s){for(var t=s.isNinePointMode,i=t?9:4,d=s.vertices,e=s.faces,n=s.controlPoints,h=0;h<i;h++){var r=new HW;d.push(r),n.push(new lC(s,r))}for(var o=t?ZW:KW,h=0,l=o.length;h<l;h+=3){var a=d[o[h+0]],u=d[o[h+1]],c=d[o[h+2]];e.push(new $W(a,u,c))}t?(s.topLeft=n[0],s.topCenter=n[1],s.topRight=n[2],s.centerLeft=n[3],s.center=n[4],s.centerRight=n[5],s.bottomLeft=n[6],s.bottomCenter=n[7],s.bottomRight=n[8]):(s.topLeft=n[0],s.topRight=n[1],s.bottomLeft=n[2],s.bottomRight=n[3])},KW=[0,2,3,0,3,1],ZW=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5],QW=function(s){var t,i=0,d=s.height,e=0,n=s.width;if(s.isNinePointMode){var h=(e+n)/2,r=(i+d)/2;t=[e,i,h,i,n,i,e,r,h,r,n,r,e,d,h,d,n,d]}else t=[e,i,n,i,e,d,n,d];return t},kW=Phaser.GameObjects.Mesh,jW=Phaser.Utils.Objects.IsPlainObject,Ho=Phaser.Utils.Objects.GetValue,uC=class extends kW{constructor(t,i,d,e,n,h){jW(i)&&(h=i,i=Ho(h,"x",0),d=Ho(h,"y",0),e=Ho(h,"key",null),n=Ho(h,"frame",null)),super(t,i,d,e,n),this.type="rexQuadImage",this.isNinePointMode=Ho(h,"ninePointMode",!1),this.controlPoints=[],JW(this),this.hideCCW=!1,this.syncSize()}preDestroy(){for(var t=0,i=this.controlPoints.length;t<i;t++)this.controlPoints[t].destroy();this.controlPoints=void 0,super.preDestroy()}resetVerts(){this.dirtyCache[9]=-1;for(var t=QW(this),i=this.width,d=this.height,e=this.frame.cutWidth/d/2,n=this.frame.cutHeight/d/2,h=this.frame.source.isRenderTexture,r=this.frame.u0,o=this.frame.u1,l=h?this.frame.v1:this.frame.v0,a=h?this.frame.v0:this.frame.v1,u=o-r,c=a-l,f=this.controlPoints,v=0,p=t.length;v<p;v+=2){var g=t[v+0],m=t[v+1],x=v/2,y=g/d-e,T=m/d-n,C=r+u*(g/i),S=l+c*(m/d);this.vertices[x].set(y,-T,0).setUVs(C,S),f[x].resetLocalXY(g,m)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var i=this.vertices,d=0,e=i.length;d<e;d++)i[d].color=t}setTint(t){return this.tint=t,this}},k9=Phaser.GameObjects.RenderTexture,j9=Phaser.Utils.Objects.IsPlainObject,q9=Phaser.Utils.Objects.GetValue,fC=function(s,t,i){t===void 0&&(t=0),i===void 0&&(i=0);for(var d=s.width,e=s.height,n=d*.5,h=e*.5,r=Math.tan(t)*h,o=Math.tan(i)*n,l=s.controlPoints,a=0,u=l.length;a<u;a++){var c=l[a],f=c.localXOrigin,v=c.localYOrigin;c.localX=f+(v>h?r:-r),c.localY=v+(f>n?o:-o)}},qW=Phaser.Utils.Objects.IsPlainObject,fu=Phaser.Utils.Objects.GetValue,dC=Phaser.Math.DegToRad,vC=Phaser.Math.RadToDeg,cC=class extends uC{constructor(t,i,d,e,n){if(qW(i)){var h=i;i=fu(h,"x",0),d=fu(h,"y",0),e=fu(h,"key",null),n=fu(h,"frame",null)}super(t,i,d,e,n);this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,fC(this,this._skewX,this._skewY)}get skewXDeg(){return vC(this._skewX)}set skewXDeg(t){this.skewX=dC(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,fC(this,this._skewX,this._skewY)}get skewYDeg(){return vC(this._skewY)}set skewYDeg(t){this.skewY=dC(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,i){return i===void 0&&(i=t),this.skewX=t,this.skewY=i,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,i){return i===void 0&&(i=t),this.skewXDeg=t,this.skewYDeg=i,this}},_W=Phaser.GameObjects.RenderTexture,tX=Phaser.Utils.Objects.IsPlainObject,du=Phaser.Utils.Objects.GetValue,oc=class extends cC{constructor(t,i,d,e,n){if(tX(i)){var h=i;i=du(h,"x",0),d=du(h,"y",0),e=du(h,"width",32),n=du(h,"height",32)}var r=new _W(t,i,d,e,n).setOrigin(.5);super(t,i,d,r.texture.key,null);this.type="rexSkewRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}},pC=class extends sn{constructor(t,i){super(i);this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;t.transitionIn(),t.delayCall(t.transitInTime,this.next,this)}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;t.transitionOut(),t.delayCall(t.transitOutTime,this.next,this)}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}},$o=Phaser.Utils.Objects.GetValue,gC=class extends Ae{constructor(t,i){super(t,i);this.setTransitInTime($o(i,"duration.in",200)),this.setTransitOutTime($o(i,"duration.out",200)),this.setTransitInCallback($o(i,"transitIn")),this.setTransitOutCallback($o(i,"transitOut")),this.destroyParent=$o(i,"destroy",!0),this.timer=void 0,this._state=new pC(this,{eventEmitter:!1}),this.closeEventData=void 0}start(){this._state.next()}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}transitionIn(){var t=this.transitInTime;return this.transitInCallback(this.parent,t),this}transitionOut(){var t=this.transitOutTime;return this.transitOutCallback(this.parent,t),this}onOpen(){}onClose(){this.destroyParent?this.parent.destroy():this.destroy()}delayCall(t,i,d){return this.timer=zv(this,t,i,d),this}removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}setTransitInTime(t){return this.transitInTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInCallback(t){return t||(t=ei),this.transitInCallback=t,this}setTransitOutCallback(t){return t||(t=ei),this.transitOutCallback=t,this}requestClose(t){return this._state.state==="OPEN"&&(this.closeEventData=arguments.length>0?t:this.parent,this._state.next()),this}},eX=function(s,t){var i=s.scene,d=new Eo(i,t);return i.add.existing(d),s.isRexContainerLite?s.moveDepthBelow(d):i.children.moveBelow(d,s),d},vu={popUp:Uy,scaleDown:function(s,t){Vy(s,t,void 0,void 0,!1)},fadeIn:so,fadeOut:function(s,t){ro(s,t,!1)}},cu=Phaser.Utils.Objects.GetValue,hc=class extends gC{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("transitIn")||(i.transitIn=Ss.popUp),i.hasOwnProperty("transitOut")||(i.transitOut=Ss.scaleDown),super(t,i);var d=cu(i,"cover");this.cover=d!==!1?eX(t,d):void 0;var e=cu(i,"manualClose",!0);if(e)this.setDisplayTime(-1);else{this.setDisplayTime(cu(i,"duration.hold",2e3));var n=cu(i,"anyTouchClose",!0);n&&this.anyTouchClose()}this.start()}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.requestClose,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.requestClose,this):this.scene.input.once("pointerup",this.requestClose,this),this}transitionIn(){super.transitionIn();var t=this.transitInTime,i=this.cover;return i&&so(i,t,i.alpha),this}transitionOut(){super.transitionOut();var t=this.transitOutTime,i=this.cover;return i&&ro(i,t,!1),this}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ss[t]),t){case Ss.popUp:t=vu.popUp;break;case Ss.fadeIn:t=vu.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ss[t]),t){case Ss.scaleDown:t=vu.scaleDown;break;case Ss.fadeOut:t=vu.fadeOut;break}return super.setTransitOutCallback(t),this}},Ss={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};function mC(s){return typeof s=="undefined"||s===null}function iX(s){return typeof s=="object"&&s!==null}function nX(s){return Array.isArray(s)?s:mC(s)?[]:[s]}function sX(s,t){var i,d,e,n;if(t)for(n=Object.keys(t),i=0,d=n.length;i<d;i+=1)e=n[i],s[e]=t[e];return s}function rX(s,t){var i="",d;for(d=0;d<t;d+=1)i+=s;return i}function aX(s){return s===0&&Number.NEGATIVE_INFINITY===1/s}var oX=mC,hX=iX,lX=nX,uX=rX,fX=aX,dX=sX,Ee={isNothing:oX,isObject:hX,toArray:lX,repeat:uX,isNegativeZero:fX,extend:dX};function xC(s,t){var i="",d=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(i+='in "'+s.mark.name+'" '),i+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!t&&s.mark.snippet&&(i+=`

`+s.mark.snippet),d+" "+i):d}function Ko(s,t){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=t,this.message=xC(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ko.prototype=Object.create(Error.prototype);Ko.prototype.constructor=Ko;Ko.prototype.toString=function(t){return this.name+": "+xC(this,t)};var ke=Ko;function lc(s,t,i,d,e){var n="",h="",r=Math.floor(e/2)-1;return d-t>r&&(n=" ... ",t=d-r+n.length),i-d>r&&(h=" ...",i=d+r-h.length),{str:n+s.slice(t,i).replace(/\t/g,"")+h,pos:d-t+n.length}}function uc(s,t){return Ee.repeat(" ",t-s.length)+s}function vX(s,t){if(t=Object.create(t||null),!s.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var i=/\r?\n|\r|\0/g,d=[0],e=[],n,h=-1;n=i.exec(s.buffer);)e.push(n.index),d.push(n.index+n[0].length),s.position<=n.index&&h<0&&(h=d.length-2);h<0&&(h=d.length-1);var r="",o,l,a=Math.min(s.line+t.linesAfter,e.length).toString().length,u=t.maxLength-(t.indent+a+3);for(o=1;o<=t.linesBefore&&!(h-o<0);o++)l=lc(s.buffer,d[h-o],e[h-o],s.position-(d[h]-d[h-o]),u),r=Ee.repeat(" ",t.indent)+uc((s.line-o+1).toString(),a)+" | "+l.str+`
`+r;for(l=lc(s.buffer,d[h],e[h],s.position,u),r+=Ee.repeat(" ",t.indent)+uc((s.line+1).toString(),a)+" | "+l.str+`
`,r+=Ee.repeat("-",t.indent+a+3+l.pos)+`^
`,o=1;o<=t.linesAfter&&!(h+o>=e.length);o++)l=lc(s.buffer,d[h+o],e[h+o],s.position-(d[h]-d[h+o]),u),r+=Ee.repeat(" ",t.indent)+uc((s.line+o+1).toString(),a)+" | "+l.str+`
`;return r.replace(/\n$/,"")}var cX=vX,pX=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],gX=["scalar","sequence","mapping"];function mX(s){var t={};return s!==null&&Object.keys(s).forEach(function(i){s[i].forEach(function(d){t[String(d)]=i})}),t}function xX(s,t){if(t=t||{},Object.keys(t).forEach(function(i){if(pX.indexOf(i)===-1)throw new ke('Unknown option "'+i+'" is met in definition of "'+s+'" YAML type.')}),this.options=t,this.tag=s,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(i){return i},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=mX(t.styleAliases||null),gX.indexOf(this.kind)===-1)throw new ke('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}var Be=xX;function yC(s,t){var i=[];return s[t].forEach(function(d){var e=i.length;i.forEach(function(n,h){n.tag===d.tag&&n.kind===d.kind&&n.multi===d.multi&&(e=h)}),i[e]=d}),i}function yX(){var s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,i;function d(e){e.multi?(s.multi[e.kind].push(e),s.multi.fallback.push(e)):s[e.kind][e.tag]=s.fallback[e.tag]=e}for(t=0,i=arguments.length;t<i;t+=1)arguments[t].forEach(d);return s}function fc(s){return this.extend(s)}fc.prototype.extend=function(t){var i=[],d=[];if(t instanceof Be)d.push(t);else if(Array.isArray(t))d=d.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(i=i.concat(t.implicit)),t.explicit&&(d=d.concat(t.explicit));else throw new ke("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(n){if(!(n instanceof Be))throw new ke("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new ke("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new ke("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),d.forEach(function(n){if(!(n instanceof Be))throw new ke("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var e=Object.create(fc.prototype);return e.implicit=(this.implicit||[]).concat(i),e.explicit=(this.explicit||[]).concat(d),e.compiledImplicit=yC(e,"implicit"),e.compiledExplicit=yC(e,"explicit"),e.compiledTypeMap=yX(e.compiledImplicit,e.compiledExplicit),e};var TC=fc,CC=new Be("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return s!==null?s:""}}),SC=new Be("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return s!==null?s:[]}}),EC=new Be("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return s!==null?s:{}}}),PC=new TC({explicit:[CC,SC,EC]});function TX(s){if(s===null)return!0;var t=s.length;return t===1&&s==="~"||t===4&&(s==="null"||s==="Null"||s==="NULL")}function CX(){return null}function SX(s){return s===null}var MC=new Be("tag:yaml.org,2002:null",{kind:"scalar",resolve:TX,construct:CX,predicate:SX,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function EX(s){if(s===null)return!1;var t=s.length;return t===4&&(s==="true"||s==="True"||s==="TRUE")||t===5&&(s==="false"||s==="False"||s==="FALSE")}function PX(s){return s==="true"||s==="True"||s==="TRUE"}function MX(s){return Object.prototype.toString.call(s)==="[object Boolean]"}var AC=new Be("tag:yaml.org,2002:bool",{kind:"scalar",resolve:EX,construct:PX,predicate:MX,represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"});function AX(s){return 48<=s&&s<=57||65<=s&&s<=70||97<=s&&s<=102}function RX(s){return 48<=s&&s<=55}function OX(s){return 48<=s&&s<=57}function LX(s){if(s===null)return!1;var t=s.length,i=0,d=!1,e;if(!t)return!1;if(e=s[i],(e==="-"||e==="+")&&(e=s[++i]),e==="0"){if(i+1===t)return!0;if(e=s[++i],e==="b"){for(i++;i<t;i++)if(e=s[i],e!=="_"){if(e!=="0"&&e!=="1")return!1;d=!0}return d&&e!=="_"}if(e==="x"){for(i++;i<t;i++)if(e=s[i],e!=="_"){if(!AX(s.charCodeAt(i)))return!1;d=!0}return d&&e!=="_"}if(e==="o"){for(i++;i<t;i++)if(e=s[i],e!=="_"){if(!RX(s.charCodeAt(i)))return!1;d=!0}return d&&e!=="_"}}if(e==="_")return!1;for(;i<t;i++)if(e=s[i],e!=="_"){if(!OX(s.charCodeAt(i)))return!1;d=!0}return!(!d||e==="_")}function FX(s){var t=s,i=1,d;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),d=t[0],(d==="-"||d==="+")&&(d==="-"&&(i=-1),t=t.slice(1),d=t[0]),t==="0")return 0;if(d==="0"){if(t[1]==="b")return i*parseInt(t.slice(2),2);if(t[1]==="x")return i*parseInt(t.slice(2),16);if(t[1]==="o")return i*parseInt(t.slice(2),8)}return i*parseInt(t,10)}function IX(s){return Object.prototype.toString.call(s)==="[object Number]"&&s%1==0&&!Ee.isNegativeZero(s)}var RC=new Be("tag:yaml.org,2002:int",{kind:"scalar",resolve:LX,construct:FX,predicate:IX,represent:{binary:function(s){return s>=0?"0b"+s.toString(2):"-0b"+s.toString(2).slice(1)},octal:function(s){return s>=0?"0o"+s.toString(8):"-0o"+s.toString(8).slice(1)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return s>=0?"0x"+s.toString(16).toUpperCase():"-0x"+s.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),wX=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function DX(s){return!(s===null||!wX.test(s)||s[s.length-1]==="_")}function BX(s){var t,i;return t=s.replace(/_/g,"").toLowerCase(),i=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:i*parseFloat(t,10)}var GX=/^[-+]?[0-9]+e/;function bX(s,t){var i;if(isNaN(s))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ee.isNegativeZero(s))return"-0.0";return i=s.toString(10),GX.test(i)?i.replace("e",".e"):i}function NX(s){return Object.prototype.toString.call(s)==="[object Number]"&&(s%1!=0||Ee.isNegativeZero(s))}var OC=new Be("tag:yaml.org,2002:float",{kind:"scalar",resolve:DX,construct:BX,predicate:NX,represent:bX,defaultStyle:"lowercase"}),LC=PC.extend({implicit:[MC,AC,RC,OC]}),FC=LC,IC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),wC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function YX(s){return s===null?!1:IC.exec(s)!==null||wC.exec(s)!==null}function zX(s){var t,i,d,e,n,h,r,o=0,l=null,a,u,c;if(t=IC.exec(s),t===null&&(t=wC.exec(s)),t===null)throw new Error("Date resolve error");if(i=+t[1],d=+t[2]-1,e=+t[3],!t[4])return new Date(Date.UTC(i,d,e));if(n=+t[4],h=+t[5],r=+t[6],t[7]){for(o=t[7].slice(0,3);o.length<3;)o+="0";o=+o}return t[9]&&(a=+t[10],u=+(t[11]||0),l=(a*60+u)*6e4,t[9]==="-"&&(l=-l)),c=new Date(Date.UTC(i,d,e,n,h,r,o)),l&&c.setTime(c.getTime()-l),c}function UX(s){return s.toISOString()}var DC=new Be("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:YX,construct:zX,instanceOf:Date,represent:UX});function VX(s){return s==="<<"||s===null}var BC=new Be("tag:yaml.org,2002:merge",{kind:"scalar",resolve:VX}),dc=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function WX(s){if(s===null)return!1;var t,i,d=0,e=s.length,n=dc;for(i=0;i<e;i++)if(t=n.indexOf(s.charAt(i)),!(t>64)){if(t<0)return!1;d+=6}return d%8==0}function XX(s){var t,i,d=s.replace(/[\r\n=]/g,""),e=d.length,n=dc,h=0,r=[];for(t=0;t<e;t++)t%4==0&&t&&(r.push(h>>16&255),r.push(h>>8&255),r.push(h&255)),h=h<<6|n.indexOf(d.charAt(t));return i=e%4*6,i===0?(r.push(h>>16&255),r.push(h>>8&255),r.push(h&255)):i===18?(r.push(h>>10&255),r.push(h>>2&255)):i===12&&r.push(h>>4&255),new Uint8Array(r)}function HX(s){var t="",i=0,d,e,n=s.length,h=dc;for(d=0;d<n;d++)d%3==0&&d&&(t+=h[i>>18&63],t+=h[i>>12&63],t+=h[i>>6&63],t+=h[i&63]),i=(i<<8)+s[d];return e=n%3,e===0?(t+=h[i>>18&63],t+=h[i>>12&63],t+=h[i>>6&63],t+=h[i&63]):e===2?(t+=h[i>>10&63],t+=h[i>>4&63],t+=h[i<<2&63],t+=h[64]):e===1&&(t+=h[i>>2&63],t+=h[i<<4&63],t+=h[64],t+=h[64]),t}function $X(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"}var GC=new Be("tag:yaml.org,2002:binary",{kind:"scalar",resolve:WX,construct:XX,predicate:$X,represent:HX}),KX=Object.prototype.hasOwnProperty,ZX=Object.prototype.toString;function JX(s){if(s===null)return!0;var t=[],i,d,e,n,h,r=s;for(i=0,d=r.length;i<d;i+=1){if(e=r[i],h=!1,ZX.call(e)!=="[object Object]")return!1;for(n in e)if(KX.call(e,n))if(!h)h=!0;else return!1;if(!h)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}function QX(s){return s!==null?s:[]}var bC=new Be("tag:yaml.org,2002:omap",{kind:"sequence",resolve:JX,construct:QX}),kX=Object.prototype.toString;function jX(s){if(s===null)return!0;var t,i,d,e,n,h=s;for(n=new Array(h.length),t=0,i=h.length;t<i;t+=1){if(d=h[t],kX.call(d)!=="[object Object]"||(e=Object.keys(d),e.length!==1))return!1;n[t]=[e[0],d[e[0]]]}return!0}function qX(s){if(s===null)return[];var t,i,d,e,n,h=s;for(n=new Array(h.length),t=0,i=h.length;t<i;t+=1)d=h[t],e=Object.keys(d),n[t]=[e[0],d[e[0]]];return n}var NC=new Be("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:jX,construct:qX}),_X=Object.prototype.hasOwnProperty;function tH(s){if(s===null)return!0;var t,i=s;for(t in i)if(_X.call(i,t)&&i[t]!==null)return!1;return!0}function eH(s){return s!==null?s:{}}var YC=new Be("tag:yaml.org,2002:set",{kind:"mapping",resolve:tH,construct:eH}),vc=FC.extend({implicit:[DC,BC],explicit:[GC,bC,NC,YC]}),Es=Object.prototype.hasOwnProperty,pu=1,zC=2,UC=3,gu=4,cc=1,iH=2,VC=3,nH=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,sH=/[\x85\u2028\u2029]/,rH=/[,\[\]\{\}]/,WC=/^(?:!|!!|![a-z\-]+!)$/i,XC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function HC(s){return Object.prototype.toString.call(s)}function An(s){return s===10||s===13}function nr(s){return s===9||s===32}function li(s){return s===9||s===32||s===10||s===13}function ia(s){return s===44||s===91||s===93||s===123||s===125}function aH(s){var t;return 48<=s&&s<=57?s-48:(t=s|32,97<=t&&t<=102?t-97+10:-1)}function oH(s){return s===120?2:s===117?4:s===85?8:0}function hH(s){return 48<=s&&s<=57?s-48:-1}function $C(s){return s===48?"\0":s===97?"\x07":s===98?"\b":s===116||s===9?"	":s===110?`
`:s===118?"\v":s===102?"\f":s===114?"\r":s===101?"":s===32?" ":s===34?'"':s===47?"/":s===92?"\\":s===78?"":s===95?"":s===76?"\u2028":s===80?"\u2029":""}function lH(s){return s<=65535?String.fromCharCode(s):String.fromCharCode((s-65536>>10)+55296,(s-65536&1023)+56320)}var KC=new Array(256),ZC=new Array(256);for(var na=0;na<256;na++)KC[na]=$C(na)?1:0,ZC[na]=$C(na);function uH(s,t){this.input=s,this.filename=t.filename||null,this.schema=t.schema||vc,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function JC(s,t){var i={name:s.filename,buffer:s.input.slice(0,-1),position:s.position,line:s.line,column:s.position-s.lineStart};return i.snippet=cX(i),new ke(t,i)}function Mt(s,t){throw JC(s,t)}function mu(s,t){s.onWarning&&s.onWarning.call(null,JC(s,t))}var QC={YAML:function(t,i,d){var e,n,h;t.version!==null&&Mt(t,"duplication of %YAML directive"),d.length!==1&&Mt(t,"YAML directive accepts exactly one argument"),e=/^([0-9]+)\.([0-9]+)$/.exec(d[0]),e===null&&Mt(t,"ill-formed argument of the YAML directive"),n=parseInt(e[1],10),h=parseInt(e[2],10),n!==1&&Mt(t,"unacceptable YAML version of the document"),t.version=d[0],t.checkLineBreaks=h<2,h!==1&&h!==2&&mu(t,"unsupported YAML version of the document")},TAG:function(t,i,d){var e,n;d.length!==2&&Mt(t,"TAG directive accepts exactly two arguments"),e=d[0],n=d[1],WC.test(e)||Mt(t,"ill-formed tag handle (first argument) of the TAG directive"),Es.call(t.tagMap,e)&&Mt(t,'there is a previously declared suffix for "'+e+'" tag handle'),XC.test(n)||Mt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(h){Mt(t,"tag prefix is malformed: "+n)}t.tagMap[e]=n}};function Ps(s,t,i,d){var e,n,h,r;if(t<i){if(r=s.input.slice(t,i),d)for(e=0,n=r.length;e<n;e+=1)h=r.charCodeAt(e),h===9||32<=h&&h<=1114111||Mt(s,"expected valid JSON character");else nH.test(r)&&Mt(s,"the stream contains non-printable characters");s.result+=r}}function kC(s,t,i,d){var e,n,h,r;for(Ee.isObject(i)||Mt(s,"cannot merge mappings; the provided source object is unacceptable"),e=Object.keys(i),h=0,r=e.length;h<r;h+=1)n=e[h],Es.call(t,n)||(t[n]=i[n],d[n]=!0)}function sa(s,t,i,d,e,n,h,r,o){var l,a;if(Array.isArray(e))for(e=Array.prototype.slice.call(e),l=0,a=e.length;l<a;l+=1)Array.isArray(e[l])&&Mt(s,"nested arrays are not supported inside keys"),typeof e=="object"&&HC(e[l])==="[object Object]"&&(e[l]="[object Object]");if(typeof e=="object"&&HC(e)==="[object Object]"&&(e="[object Object]"),e=String(e),t===null&&(t={}),d==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(l=0,a=n.length;l<a;l+=1)kC(s,t,n[l],i);else kC(s,t,n,i);else!s.json&&!Es.call(i,e)&&Es.call(t,e)&&(s.line=h||s.line,s.lineStart=r||s.lineStart,s.position=o||s.position,Mt(s,"duplicated mapping key")),e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n,delete i[e];return t}function pc(s){var t;t=s.input.charCodeAt(s.position),t===10?s.position++:t===13?(s.position++,s.input.charCodeAt(s.position)===10&&s.position++):Mt(s,"a line break is expected"),s.line+=1,s.lineStart=s.position,s.firstTabInLine=-1}function me(s,t,i){for(var d=0,e=s.input.charCodeAt(s.position);e!==0;){for(;nr(e);)e===9&&s.firstTabInLine===-1&&(s.firstTabInLine=s.position),e=s.input.charCodeAt(++s.position);if(t&&e===35)do e=s.input.charCodeAt(++s.position);while(e!==10&&e!==13&&e!==0);if(An(e))for(pc(s),e=s.input.charCodeAt(s.position),d++,s.lineIndent=0;e===32;)s.lineIndent++,e=s.input.charCodeAt(++s.position);else break}return i!==-1&&d!==0&&s.lineIndent<i&&mu(s,"deficient indentation"),d}function xu(s){var t=s.position,i;return i=s.input.charCodeAt(t),!!((i===45||i===46)&&i===s.input.charCodeAt(t+1)&&i===s.input.charCodeAt(t+2)&&(t+=3,i=s.input.charCodeAt(t),i===0||li(i)))}function gc(s,t){t===1?s.result+=" ":t>1&&(s.result+=Ee.repeat(`
`,t-1))}function fH(s,t,i){var d,e,n,h,r,o,l,a,u=s.kind,c=s.result,f;if(f=s.input.charCodeAt(s.position),li(f)||ia(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(e=s.input.charCodeAt(s.position+1),li(e)||i&&ia(e)))return!1;for(s.kind="scalar",s.result="",n=h=s.position,r=!1;f!==0;){if(f===58){if(e=s.input.charCodeAt(s.position+1),li(e)||i&&ia(e))break}else if(f===35){if(d=s.input.charCodeAt(s.position-1),li(d))break}else{if(s.position===s.lineStart&&xu(s)||i&&ia(f))break;if(An(f))if(o=s.line,l=s.lineStart,a=s.lineIndent,me(s,!1,-1),s.lineIndent>=t){r=!0,f=s.input.charCodeAt(s.position);continue}else{s.position=h,s.line=o,s.lineStart=l,s.lineIndent=a;break}}r&&(Ps(s,n,h,!1),gc(s,s.line-o),n=h=s.position,r=!1),nr(f)||(h=s.position+1),f=s.input.charCodeAt(++s.position)}return Ps(s,n,h,!1),s.result?!0:(s.kind=u,s.result=c,!1)}function dH(s,t){var i,d,e;if(i=s.input.charCodeAt(s.position),i!==39)return!1;for(s.kind="scalar",s.result="",s.position++,d=e=s.position;(i=s.input.charCodeAt(s.position))!==0;)if(i===39)if(Ps(s,d,s.position,!0),i=s.input.charCodeAt(++s.position),i===39)d=s.position,s.position++,e=s.position;else return!0;else An(i)?(Ps(s,d,e,!0),gc(s,me(s,!1,t)),d=e=s.position):s.position===s.lineStart&&xu(s)?Mt(s,"unexpected end of the document within a single quoted scalar"):(s.position++,e=s.position);Mt(s,"unexpected end of the stream within a single quoted scalar")}function vH(s,t){var i,d,e,n,h,r;if(r=s.input.charCodeAt(s.position),r!==34)return!1;for(s.kind="scalar",s.result="",s.position++,i=d=s.position;(r=s.input.charCodeAt(s.position))!==0;){if(r===34)return Ps(s,i,s.position,!0),s.position++,!0;if(r===92){if(Ps(s,i,s.position,!0),r=s.input.charCodeAt(++s.position),An(r))me(s,!1,t);else if(r<256&&KC[r])s.result+=ZC[r],s.position++;else if((h=oH(r))>0){for(e=h,n=0;e>0;e--)r=s.input.charCodeAt(++s.position),(h=aH(r))>=0?n=(n<<4)+h:Mt(s,"expected hexadecimal character");s.result+=lH(n),s.position++}else Mt(s,"unknown escape sequence");i=d=s.position}else An(r)?(Ps(s,i,d,!0),gc(s,me(s,!1,t)),i=d=s.position):s.position===s.lineStart&&xu(s)?Mt(s,"unexpected end of the document within a double quoted scalar"):(s.position++,d=s.position)}Mt(s,"unexpected end of the stream within a double quoted scalar")}function cH(s,t){var i=!0,d,e,n,h=s.tag,r,o=s.anchor,l,a,u,c,f,v=Object.create(null),p,g,m,x;if(x=s.input.charCodeAt(s.position),x===91)a=93,f=!1,r=[];else if(x===123)a=125,f=!0,r={};else return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=r),x=s.input.charCodeAt(++s.position);x!==0;){if(me(s,!0,t),x=s.input.charCodeAt(s.position),x===a)return s.position++,s.tag=h,s.anchor=o,s.kind=f?"mapping":"sequence",s.result=r,!0;i?x===44&&Mt(s,"expected the node content, but found ','"):Mt(s,"missed comma between flow collection entries"),g=p=m=null,u=c=!1,x===63&&(l=s.input.charCodeAt(s.position+1),li(l)&&(u=c=!0,s.position++,me(s,!0,t))),d=s.line,e=s.lineStart,n=s.position,ra(s,t,pu,!1,!0),g=s.tag,p=s.result,me(s,!0,t),x=s.input.charCodeAt(s.position),(c||s.line===d)&&x===58&&(u=!0,x=s.input.charCodeAt(++s.position),me(s,!0,t),ra(s,t,pu,!1,!0),m=s.result),f?sa(s,r,v,g,p,m,d,e,n):u?r.push(sa(s,null,v,g,p,m,d,e,n)):r.push(p),me(s,!0,t),x=s.input.charCodeAt(s.position),x===44?(i=!0,x=s.input.charCodeAt(++s.position)):i=!1}Mt(s,"unexpected end of the stream within a flow collection")}function pH(s,t){var i,d,e=cc,n=!1,h=!1,r=t,o=0,l=!1,a,u;if(u=s.input.charCodeAt(s.position),u===124)d=!1;else if(u===62)d=!0;else return!1;for(s.kind="scalar",s.result="";u!==0;)if(u=s.input.charCodeAt(++s.position),u===43||u===45)cc===e?e=u===43?VC:iH:Mt(s,"repeat of a chomping mode identifier");else if((a=hH(u))>=0)a===0?Mt(s,"bad explicit indentation width of a block scalar; it cannot be less than one"):h?Mt(s,"repeat of an indentation width identifier"):(r=t+a-1,h=!0);else break;if(nr(u)){do u=s.input.charCodeAt(++s.position);while(nr(u));if(u===35)do u=s.input.charCodeAt(++s.position);while(!An(u)&&u!==0)}for(;u!==0;){for(pc(s),s.lineIndent=0,u=s.input.charCodeAt(s.position);(!h||s.lineIndent<r)&&u===32;)s.lineIndent++,u=s.input.charCodeAt(++s.position);if(!h&&s.lineIndent>r&&(r=s.lineIndent),An(u)){o++;continue}if(s.lineIndent<r){e===VC?s.result+=Ee.repeat(`
`,n?1+o:o):e===cc&&n&&(s.result+=`
`);break}for(d?nr(u)?(l=!0,s.result+=Ee.repeat(`
`,n?1+o:o)):l?(l=!1,s.result+=Ee.repeat(`
`,o+1)):o===0?n&&(s.result+=" "):s.result+=Ee.repeat(`
`,o):s.result+=Ee.repeat(`
`,n?1+o:o),n=!0,h=!0,o=0,i=s.position;!An(u)&&u!==0;)u=s.input.charCodeAt(++s.position);Ps(s,i,s.position,!1)}return!0}function jC(s,t){var i,d=s.tag,e=s.anchor,n=[],h,r=!1,o;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=n),o=s.input.charCodeAt(s.position);o!==0&&(s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,Mt(s,"tab characters must not be used in indentation")),!(o!==45||(h=s.input.charCodeAt(s.position+1),!li(h))));){if(r=!0,s.position++,me(s,!0,-1)&&s.lineIndent<=t){n.push(null),o=s.input.charCodeAt(s.position);continue}if(i=s.line,ra(s,t,UC,!1,!0),n.push(s.result),me(s,!0,-1),o=s.input.charCodeAt(s.position),(s.line===i||s.lineIndent>t)&&o!==0)Mt(s,"bad indentation of a sequence entry");else if(s.lineIndent<t)break}return r?(s.tag=d,s.anchor=e,s.kind="sequence",s.result=n,!0):!1}function gH(s,t,i){var d,e,n,h,r,o,l=s.tag,a=s.anchor,u={},c=Object.create(null),f=null,v=null,p=null,g=!1,m=!1,x;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=u),x=s.input.charCodeAt(s.position);x!==0;){if(!g&&s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,Mt(s,"tab characters must not be used in indentation")),d=s.input.charCodeAt(s.position+1),n=s.line,(x===63||x===58)&&li(d))x===63?(g&&(sa(s,u,c,f,v,null,h,r,o),f=v=p=null),m=!0,g=!0,e=!0):g?(g=!1,e=!0):Mt(s,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),s.position+=1,x=d;else{if(h=s.line,r=s.lineStart,o=s.position,!ra(s,i,zC,!1,!0))break;if(s.line===n){for(x=s.input.charCodeAt(s.position);nr(x);)x=s.input.charCodeAt(++s.position);if(x===58)x=s.input.charCodeAt(++s.position),li(x)||Mt(s,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(sa(s,u,c,f,v,null,h,r,o),f=v=p=null),m=!0,g=!1,e=!1,f=s.tag,v=s.result;else if(m)Mt(s,"can not read an implicit mapping pair; a colon is missed");else return s.tag=l,s.anchor=a,!0}else if(m)Mt(s,"can not read a block mapping entry; a multiline key may not be an implicit key");else return s.tag=l,s.anchor=a,!0}if((s.line===n||s.lineIndent>t)&&(g&&(h=s.line,r=s.lineStart,o=s.position),ra(s,t,gu,!0,e)&&(g?v=s.result:p=s.result),g||(sa(s,u,c,f,v,p,h,r,o),f=v=p=null),me(s,!0,-1),x=s.input.charCodeAt(s.position)),(s.line===n||s.lineIndent>t)&&x!==0)Mt(s,"bad indentation of a mapping entry");else if(s.lineIndent<t)break}return g&&sa(s,u,c,f,v,null,h,r,o),m&&(s.tag=l,s.anchor=a,s.kind="mapping",s.result=u),m}function mH(s){var t,i=!1,d=!1,e,n,h;if(h=s.input.charCodeAt(s.position),h!==33)return!1;if(s.tag!==null&&Mt(s,"duplication of a tag property"),h=s.input.charCodeAt(++s.position),h===60?(i=!0,h=s.input.charCodeAt(++s.position)):h===33?(d=!0,e="!!",h=s.input.charCodeAt(++s.position)):e="!",t=s.position,i){do h=s.input.charCodeAt(++s.position);while(h!==0&&h!==62);s.position<s.length?(n=s.input.slice(t,s.position),h=s.input.charCodeAt(++s.position)):Mt(s,"unexpected end of the stream within a verbatim tag")}else{for(;h!==0&&!li(h);)h===33&&(d?Mt(s,"tag suffix cannot contain exclamation marks"):(e=s.input.slice(t-1,s.position+1),WC.test(e)||Mt(s,"named tag handle cannot contain such characters"),d=!0,t=s.position+1)),h=s.input.charCodeAt(++s.position);n=s.input.slice(t,s.position),rH.test(n)&&Mt(s,"tag suffix cannot contain flow indicator characters")}n&&!XC.test(n)&&Mt(s,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch(r){Mt(s,"tag name is malformed: "+n)}return i?s.tag=n:Es.call(s.tagMap,e)?s.tag=s.tagMap[e]+n:e==="!"?s.tag="!"+n:e==="!!"?s.tag="tag:yaml.org,2002:"+n:Mt(s,'undeclared tag handle "'+e+'"'),!0}function xH(s){var t,i;if(i=s.input.charCodeAt(s.position),i!==38)return!1;for(s.anchor!==null&&Mt(s,"duplication of an anchor property"),i=s.input.charCodeAt(++s.position),t=s.position;i!==0&&!li(i)&&!ia(i);)i=s.input.charCodeAt(++s.position);return s.position===t&&Mt(s,"name of an anchor node must contain at least one character"),s.anchor=s.input.slice(t,s.position),!0}function yH(s){var t,i,d;if(d=s.input.charCodeAt(s.position),d!==42)return!1;for(d=s.input.charCodeAt(++s.position),t=s.position;d!==0&&!li(d)&&!ia(d);)d=s.input.charCodeAt(++s.position);return s.position===t&&Mt(s,"name of an alias node must contain at least one character"),i=s.input.slice(t,s.position),Es.call(s.anchorMap,i)||Mt(s,'unidentified alias "'+i+'"'),s.result=s.anchorMap[i],me(s,!0,-1),!0}function ra(s,t,i,d,e){var n,h,r,o=1,l=!1,a=!1,u,c,f,v,p,g;if(s.listener!==null&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,n=h=r=gu===i||UC===i,d&&me(s,!0,-1)&&(l=!0,s.lineIndent>t?o=1:s.lineIndent===t?o=0:s.lineIndent<t&&(o=-1)),o===1)for(;mH(s)||xH(s);)me(s,!0,-1)?(l=!0,r=n,s.lineIndent>t?o=1:s.lineIndent===t?o=0:s.lineIndent<t&&(o=-1)):r=!1;if(r&&(r=l||e),(o===1||gu===i)&&(pu===i||zC===i?p=t:p=t+1,g=s.position-s.lineStart,o===1?r&&(jC(s,g)||gH(s,g,p))||cH(s,p)?a=!0:(h&&pH(s,p)||dH(s,p)||vH(s,p)?a=!0:yH(s)?(a=!0,(s.tag!==null||s.anchor!==null)&&Mt(s,"alias node should not have any properties")):fH(s,p,pu===i)&&(a=!0,s.tag===null&&(s.tag="?")),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):o===0&&(a=r&&jC(s,g))),s.tag===null)s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);else if(s.tag==="?"){for(s.result!==null&&s.kind!=="scalar"&&Mt(s,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+s.kind+'"'),u=0,c=s.implicitTypes.length;u<c;u+=1)if(v=s.implicitTypes[u],v.resolve(s.result)){s.result=v.construct(s.result),s.tag=v.tag,s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);break}}else if(s.tag!=="!"){if(Es.call(s.typeMap[s.kind||"fallback"],s.tag))v=s.typeMap[s.kind||"fallback"][s.tag];else for(v=null,f=s.typeMap.multi[s.kind||"fallback"],u=0,c=f.length;u<c;u+=1)if(s.tag.slice(0,f[u].tag.length)===f[u].tag){v=f[u];break}v||Mt(s,"unknown tag !<"+s.tag+">"),s.result!==null&&v.kind!==s.kind&&Mt(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+v.kind+'", not "'+s.kind+'"'),v.resolve(s.result,s.tag)?(s.result=v.construct(s.result,s.tag),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):Mt(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")}return s.listener!==null&&s.listener("close",s),s.tag!==null||s.anchor!==null||a}function TH(s){var t=s.position,i,d,e,n=!1,h;for(s.version=null,s.checkLineBreaks=s.legacy,s.tagMap=Object.create(null),s.anchorMap=Object.create(null);(h=s.input.charCodeAt(s.position))!==0&&(me(s,!0,-1),h=s.input.charCodeAt(s.position),!(s.lineIndent>0||h!==37));){for(n=!0,h=s.input.charCodeAt(++s.position),i=s.position;h!==0&&!li(h);)h=s.input.charCodeAt(++s.position);for(d=s.input.slice(i,s.position),e=[],d.length<1&&Mt(s,"directive name must not be less than one character in length");h!==0;){for(;nr(h);)h=s.input.charCodeAt(++s.position);if(h===35){do h=s.input.charCodeAt(++s.position);while(h!==0&&!An(h));break}if(An(h))break;for(i=s.position;h!==0&&!li(h);)h=s.input.charCodeAt(++s.position);e.push(s.input.slice(i,s.position))}h!==0&&pc(s),Es.call(QC,d)?QC[d](s,d,e):mu(s,'unknown document directive "'+d+'"')}if(me(s,!0,-1),s.lineIndent===0&&s.input.charCodeAt(s.position)===45&&s.input.charCodeAt(s.position+1)===45&&s.input.charCodeAt(s.position+2)===45?(s.position+=3,me(s,!0,-1)):n&&Mt(s,"directives end mark is expected"),ra(s,s.lineIndent-1,gu,!1,!0),me(s,!0,-1),s.checkLineBreaks&&sH.test(s.input.slice(t,s.position))&&mu(s,"non-ASCII line breaks are interpreted as content"),s.documents.push(s.result),s.position===s.lineStart&&xu(s)){s.input.charCodeAt(s.position)===46&&(s.position+=3,me(s,!0,-1));return}if(s.position<s.length-1)Mt(s,"end of the stream or a document separator is expected");else return}function qC(s,t){s=String(s),t=t||{},s.length!==0&&(s.charCodeAt(s.length-1)!==10&&s.charCodeAt(s.length-1)!==13&&(s+=`
`),s.charCodeAt(0)===65279&&(s=s.slice(1)));var i=new uH(s,t),d=s.indexOf("\0");for(d!==-1&&(i.position=d,Mt(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)TH(i);return i.documents}function CH(s,t,i){t!==null&&typeof t=="object"&&typeof i=="undefined"&&(i=t,t=null);var d=qC(s,i);if(typeof t!="function")return d;for(var e=0,n=d.length;e<n;e+=1)t(d[e])}function SH(s,t){var i=qC(s,t);if(i.length!==0){if(i.length===1)return i[0];throw new ke("expected a single document in the stream, but found more")}}var EH=CH,PH=SH,_C={loadAll:EH,load:PH},tS=Object.prototype.toString,eS=Object.prototype.hasOwnProperty,mc=65279,MH=9,Zo=10,AH=13,RH=32,OH=33,LH=34,xc=35,FH=37,IH=38,wH=39,DH=42,iS=44,BH=45,yu=58,GH=61,bH=62,NH=63,YH=64,nS=91,sS=93,zH=96,rS=123,UH=124,aS=125,He={};He[0]="\\0";He[7]="\\a";He[8]="\\b";He[9]="\\t";He[10]="\\n";He[11]="\\v";He[12]="\\f";He[13]="\\r";He[27]="\\e";He[34]='\\"';He[92]="\\\\";He[133]="\\N";He[160]="\\_";He[8232]="\\L";He[8233]="\\P";var VH=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],WH=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function XH(s,t){var i,d,e,n,h,r,o;if(t===null)return{};for(i={},d=Object.keys(t),e=0,n=d.length;e<n;e+=1)h=d[e],r=String(t[h]),h.slice(0,2)==="!!"&&(h="tag:yaml.org,2002:"+h.slice(2)),o=s.compiledTypeMap.fallback[h],o&&eS.call(o.styleAliases,r)&&(r=o.styleAliases[r]),i[h]=r;return i}function HH(s){var t,i,d;if(t=s.toString(16).toUpperCase(),s<=255)i="x",d=2;else if(s<=65535)i="u",d=4;else if(s<=4294967295)i="U",d=8;else throw new ke("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+Ee.repeat("0",d-t.length)+t}var $H=1,Jo=2;function KH(s){this.schema=s.schema||vc,this.indent=Math.max(1,s.indent||2),this.noArrayIndent=s.noArrayIndent||!1,this.skipInvalid=s.skipInvalid||!1,this.flowLevel=Ee.isNothing(s.flowLevel)?-1:s.flowLevel,this.styleMap=XH(this.schema,s.styles||null),this.sortKeys=s.sortKeys||!1,this.lineWidth=s.lineWidth||80,this.noRefs=s.noRefs||!1,this.noCompatMode=s.noCompatMode||!1,this.condenseFlow=s.condenseFlow||!1,this.quotingType=s.quotingType==='"'?Jo:$H,this.forceQuotes=s.forceQuotes||!1,this.replacer=typeof s.replacer=="function"?s.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function oS(s,t){for(var i=Ee.repeat(" ",t),d=0,e=-1,n="",h,r=s.length;d<r;)e=s.indexOf(`
`,d),e===-1?(h=s.slice(d),d=r):(h=s.slice(d,e+1),d=e+1),h.length&&h!==`
`&&(n+=i),n+=h;return n}function yc(s,t){return`
`+Ee.repeat(" ",s.indent*t)}function ZH(s,t){var i,d,e;for(i=0,d=s.implicitTypes.length;i<d;i+=1)if(e=s.implicitTypes[i],e.resolve(t))return!0;return!1}function Tu(s){return s===RH||s===MH}function Qo(s){return 32<=s&&s<=126||161<=s&&s<=55295&&s!==8232&&s!==8233||57344<=s&&s<=65533&&s!==mc||65536<=s&&s<=1114111}function hS(s){return Qo(s)&&s!==mc&&s!==AH&&s!==Zo}function lS(s,t,i){var d=hS(s),e=d&&!Tu(s);return(i?d:d&&s!==iS&&s!==nS&&s!==sS&&s!==rS&&s!==aS)&&s!==xc&&!(t===yu&&!e)||hS(t)&&!Tu(t)&&s===xc||t===yu&&e}function JH(s){return Qo(s)&&s!==mc&&!Tu(s)&&s!==BH&&s!==NH&&s!==yu&&s!==iS&&s!==nS&&s!==sS&&s!==rS&&s!==aS&&s!==xc&&s!==IH&&s!==DH&&s!==OH&&s!==UH&&s!==GH&&s!==bH&&s!==wH&&s!==LH&&s!==FH&&s!==YH&&s!==zH}function QH(s){return!Tu(s)&&s!==yu}function ko(s,t){var i=s.charCodeAt(t),d;return i>=55296&&i<=56319&&t+1<s.length&&(d=s.charCodeAt(t+1),d>=56320&&d<=57343)?(i-55296)*1024+d-56320+65536:i}function uS(s){var t=/^\n* /;return t.test(s)}var fS=1,Tc=2,dS=3,vS=4,aa=5;function kH(s,t,i,d,e,n,h,r){var o,l=0,a=null,u=!1,c=!1,f=d!==-1,v=-1,p=JH(ko(s,0))&&QH(ko(s,s.length-1));if(t||h)for(o=0;o<s.length;l>=65536?o+=2:o++){if(l=ko(s,o),!Qo(l))return aa;p=p&&lS(l,a,r),a=l}else{for(o=0;o<s.length;l>=65536?o+=2:o++){if(l=ko(s,o),l===Zo)u=!0,f&&(c=c||o-v-1>d&&s[v+1]!==" ",v=o);else if(!Qo(l))return aa;p=p&&lS(l,a,r),a=l}c=c||f&&o-v-1>d&&s[v+1]!==" "}return!u&&!c?p&&!h&&!e(s)?fS:n===Jo?aa:Tc:i>9&&uS(s)?aa:h?n===Jo?aa:Tc:c?vS:dS}function _H(s,t,i,d,e){s.dump=function(){if(t.length===0)return s.quotingType===Jo?'""':"''";if(!s.noCompatMode&&(VH.indexOf(t)!==-1||WH.test(t)))return s.quotingType===Jo?'"'+t+'"':"'"+t+"'";var n=s.indent*Math.max(1,i),h=s.lineWidth===-1?-1:Math.max(Math.min(s.lineWidth,40),s.lineWidth-n),r=d||s.flowLevel>-1&&i>=s.flowLevel;function o(l){return ZH(s,l)}switch(kH(t,r,s.indent,h,o,s.quotingType,s.forceQuotes&&!d,e)){case fS:return t;case Tc:return"'"+t.replace(/'/g,"''")+"'";case dS:return"|"+cS(t,s.indent)+pS(oS(t,n));case vS:return">"+cS(t,s.indent)+pS(oS(jH(t,h),n));case aa:return'"'+qH(t)+'"';default:throw new ke("impossible error: invalid scalar style")}}()}function cS(s,t){var i=uS(s)?String(t):"",d=s[s.length-1]===`
`,e=d&&(s[s.length-2]===`
`||s===`
`),n=e?"+":d?"":"-";return i+n+`
`}function pS(s){return s[s.length-1]===`
`?s.slice(0,-1):s}function jH(s,t){for(var i=/(\n+)([^\n]*)/g,d=function(){var l=s.indexOf(`
`);return l=l!==-1?l:s.length,i.lastIndex=l,gS(s.slice(0,l),t)}(),e=s[0]===`
`||s[0]===" ",n,h;h=i.exec(s);){var r=h[1],o=h[2];n=o[0]===" ",d+=r+(!e&&!n&&o!==""?`
`:"")+gS(o,t),e=n}return d}function gS(s,t){if(s===""||s[0]===" ")return s;for(var i=/ [^ ]/g,d,e=0,n,h=0,r=0,o="";d=i.exec(s);)r=d.index,r-e>t&&(n=h>e?h:r,o+=`
`+s.slice(e,n),e=n+1),h=r;return o+=`
`,s.length-e>t&&h>e?o+=s.slice(e,h)+`
`+s.slice(h+1):o+=s.slice(e),o.slice(1)}function qH(s){for(var t="",i=0,d,e=0;e<s.length;i>=65536?e+=2:e++)i=ko(s,e),d=He[i],!d&&Qo(i)?(t+=s[e],i>=65536&&(t+=s[e+1])):t+=d||HH(i);return t}function t6(s,t,i){var d="",e=s.tag,n,h,r;for(n=0,h=i.length;n<h;n+=1)r=i[n],s.replacer&&(r=s.replacer.call(i,String(n),r)),(Kn(s,t,r,!1,!1)||typeof r=="undefined"&&Kn(s,t,null,!1,!1))&&(d!==""&&(d+=","+(s.condenseFlow?"":" ")),d+=s.dump);s.tag=e,s.dump="["+d+"]"}function mS(s,t,i,d){var e="",n=s.tag,h,r,o;for(h=0,r=i.length;h<r;h+=1)o=i[h],s.replacer&&(o=s.replacer.call(i,String(h),o)),(Kn(s,t+1,o,!0,!0,!1,!0)||typeof o=="undefined"&&Kn(s,t+1,null,!0,!0,!1,!0))&&((!d||e!=="")&&(e+=yc(s,t)),s.dump&&Zo===s.dump.charCodeAt(0)?e+="-":e+="- ",e+=s.dump);s.tag=n,s.dump=e||"[]"}function e6(s,t,i){var d="",e=s.tag,n=Object.keys(i),h,r,o,l,a;for(h=0,r=n.length;h<r;h+=1)a="",d!==""&&(a+=", "),s.condenseFlow&&(a+='"'),o=n[h],l=i[o],s.replacer&&(l=s.replacer.call(i,o,l)),!!Kn(s,t,o,!1,!1)&&(s.dump.length>1024&&(a+="? "),a+=s.dump+(s.condenseFlow?'"':"")+":"+(s.condenseFlow?"":" "),!!Kn(s,t,l,!1,!1)&&(a+=s.dump,d+=a));s.tag=e,s.dump="{"+d+"}"}function i6(s,t,i,d){var e="",n=s.tag,h=Object.keys(i),r,o,l,a,u,c;if(s.sortKeys===!0)h.sort();else if(typeof s.sortKeys=="function")h.sort(s.sortKeys);else if(s.sortKeys)throw new ke("sortKeys must be a boolean or a function");for(r=0,o=h.length;r<o;r+=1)c="",(!d||e!=="")&&(c+=yc(s,t)),l=h[r],a=i[l],s.replacer&&(a=s.replacer.call(i,l,a)),!!Kn(s,t+1,l,!0,!0,!0)&&(u=s.tag!==null&&s.tag!=="?"||s.dump&&s.dump.length>1024,u&&(s.dump&&Zo===s.dump.charCodeAt(0)?c+="?":c+="? "),c+=s.dump,u&&(c+=yc(s,t)),!!Kn(s,t+1,a,!0,u)&&(s.dump&&Zo===s.dump.charCodeAt(0)?c+=":":c+=": ",c+=s.dump,e+=c));s.tag=n,s.dump=e||"{}"}function xS(s,t,i){var d,e,n,h,r,o;for(e=i?s.explicitTypes:s.implicitTypes,n=0,h=e.length;n<h;n+=1)if(r=e[n],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(i?r.multi&&r.representName?s.tag=r.representName(t):s.tag=r.tag:s.tag="?",r.represent){if(o=s.styleMap[r.tag]||r.defaultStyle,tS.call(r.represent)==="[object Function]")d=r.represent(t,o);else if(eS.call(r.represent,o))d=r.represent[o](t,o);else throw new ke("!<"+r.tag+'> tag resolver accepts not "'+o+'" style');s.dump=d}return!0}return!1}function Kn(s,t,i,d,e,n,h){s.tag=null,s.dump=i,xS(s,i,!1)||xS(s,i,!0);var r=tS.call(s.dump),o=d,l;d&&(d=s.flowLevel<0||s.flowLevel>t);var a=r==="[object Object]"||r==="[object Array]",u,c;if(a&&(u=s.duplicates.indexOf(i),c=u!==-1),(s.tag!==null&&s.tag!=="?"||c||s.indent!==2&&t>0)&&(e=!1),c&&s.usedDuplicates[u])s.dump="*ref_"+u;else{if(a&&c&&!s.usedDuplicates[u]&&(s.usedDuplicates[u]=!0),r==="[object Object]")d&&Object.keys(s.dump).length!==0?(i6(s,t,s.dump,e),c&&(s.dump="&ref_"+u+s.dump)):(e6(s,t,s.dump),c&&(s.dump="&ref_"+u+" "+s.dump));else if(r==="[object Array]")d&&s.dump.length!==0?(s.noArrayIndent&&!h&&t>0?mS(s,t-1,s.dump,e):mS(s,t,s.dump,e),c&&(s.dump="&ref_"+u+s.dump)):(t6(s,t,s.dump),c&&(s.dump="&ref_"+u+" "+s.dump));else if(r==="[object String]")s.tag!=="?"&&_H(s,s.dump,t,n,o);else{if(r==="[object Undefined]")return!1;if(s.skipInvalid)return!1;throw new ke("unacceptable kind of an object to dump "+r)}s.tag!==null&&s.tag!=="?"&&(l=encodeURI(s.tag[0]==="!"?s.tag.slice(1):s.tag).replace(/!/g,"%21"),s.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",s.dump=l+" "+s.dump)}return!0}function n6(s,t){var i=[],d=[],e,n;for(Cc(s,i,d),e=0,n=d.length;e<n;e+=1)t.duplicates.push(i[d[e]]);t.usedDuplicates=new Array(n)}function Cc(s,t,i){var d,e,n;if(s!==null&&typeof s=="object")if(e=t.indexOf(s),e!==-1)i.indexOf(e)===-1&&i.push(e);else if(t.push(s),Array.isArray(s))for(e=0,n=s.length;e<n;e+=1)Cc(s[e],t,i);else for(d=Object.keys(s),e=0,n=d.length;e<n;e+=1)Cc(s[d[e]],t,i)}function s6(s,t){t=t||{};var i=new KH(t);i.noRefs||n6(s,i);var d=s;return i.replacer&&(d=i.replacer.call({"":d},"",d)),Kn(i,0,d,!0,!0)?i.dump+`
`:""}var r6=s6,a6={dump:r6};function Sc(s,t){return function(){throw new Error("Function yaml."+s+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var o6=Be,h6=TC,l6=PC,u6=LC,f6=FC,d6=vc,v6=_C.load,c6=_C.loadAll,p6=a6.dump,g6=ke,m6={binary:GC,float:OC,map:EC,null:MC,pairs:NC,set:YC,timestamp:DC,bool:AC,int:RC,merge:BC,omap:bC,seq:SC,str:CC},x6=Sc("safeLoad","load"),y6=Sc("safeLoadAll","loadAll"),T6=Sc("safeDump","dump"),Ec={Type:o6,Schema:h6,FAILSAFE_SCHEMA:l6,JSON_SCHEMA:u6,CORE_SCHEMA:f6,DEFAULT_SCHEMA:d6,load:v6,loadAll:c6,dump:p6,YAMLException:g6,types:m6,safeLoad:x6,safeLoadAll:y6,safeDump:T6},jo=function(s){if(typeof s=="string")try{return Ec.load(s)}catch(t){console.log(t);return}return s},C6=function(s,t){if(s.hasOwnProperty("$type"))return s.$type;if(s.hasOwnProperty("name")){var i=t[`#${s.name}`];if(i&&i.hasOwnProperty("$type"))return i.$type}if(s.hasOwnProperty("$class"))for(var d=s.$class.split(" "),e=0,n=d.length;e<n;e++){var i=t[`.${d[e]}`];if(i&&i.hasOwnProperty("$type"))return i.$type}},de=function(s,t){if(t===void 0)return s;if(s.hasOwnProperty("name")&&Cu(s,t[`#${s.name}`]),s.hasOwnProperty("$class"))for(var i=s.$class.split(" "),d=0,e=i.length;d<e;d++)Cu(s,t[`.${i[d]}`]);return s.hasOwnProperty("$type")&&Cu(s,t[s.$type]),s},Cu=function(s,t){if(t===void 0)return s;for(var i in t)if(!s.hasOwnProperty(i))s[i]=yr(t[i]);else{var d=s[i];d&&typeof d=="object"&&Cu(d,t[i])}return s},yS=["tint","alpha","visible","flipX","flipY"],sr=function(s,t){for(var i=0,d=yS.length;i<d;i++){var e=yS[i],n=t[e];n!==void 0&&(s[e]=n)}return t.cropResize&&!s.resize&&(s.resize=function(h,r){return s.setCrop(0,0,h,r),s}),s},TS=function(s,t,i,d,e,n){t=de(t,d);var h=new n(s,0,0,t.key,t.frame);return t.width!==void 0&&h.setDisplayWidth(t.width),t.height!==void 0&&h.setDisplayHeight(t.height),sr(h,t),s.add.existing(h),h},S6=Phaser.GameObjects.Image,E6=function(s,t,i,d,e){return TS(s,t,i,d,e,S6)},P6=Phaser.GameObjects.Sprite,M6=function(s,t,i,d,e){return TS(s,t,i,d,e,P6)},A6=Phaser.GameObjects.Video,R6=function(s,t,i,d,e){t=de(t,d);var n=new A6(s,0,0,t.key);return t.width!==void 0&&n.setDisplayWidth(t.width),t.height!==void 0&&n.setDisplayHeight(t.height),sr(n,t),s.add.existing(n),n},O6=Phaser.GameObjects.Text,L6=function(s,t,i,d,e){t=de(t,d);var n=new O6(s,0,0,t.text,t);return sr(n,t),s.add.existing(n),n},F6=function(s,t,i,d,e){t=de(t,d);var n=new wa(s,0,0,t.text,t);return sr(n,t),s.add.existing(n),n},I6=function(s,t,i,d,e){t=de(t,d);var n=new Si(s,t);return s.add.existing(n),n},w6=function(s,t,i,d,e){t=de(t,d);var n=new Tr(s,t);return sr(n,t),s.add.existing(n),n},D6=function(s,t,i,d,e){t=de(t,d);var n=new Sr(s,t);return s.add.existing(n),n},B6=function(s,t,i,d,e){t=de(t,d);var n=t.width||1,h=t.height||1,r=new Yi(s,0,0,n,h);return t.fill!==void 0&&r.fill(t.fill),sr(r,t),s.add.existing(r),r},G6=function(s,t,i,d,e){t=de(t,d);var n=new Ga(s,0,0,t.key,t.frame,t);return t.width!==void 0&&n.setDisplayWidth(t.width),t.height!==void 0&&n.setDisplayHeight(t.height),sr(n,t),s.add.existing(n),n},b6=function(s,t,i,d,e){var n=new Kr(s);return n},Et=function(s,t,i,d,e,n){var h=t[i];if(!!h){var r;return r=oa(s,h,d,e,n),t[i]=r,r}},CS=function(s,t,i,d,e){if(t){Array.isArray(t)||(t=[t]);for(var n=0,h=t.length;n<h;n++){var r=t[n];r.$child||(r={$child:r},t[n]=r),Et(s,r,"$child",i,d,e)}}return t},qo=function(s,t,i,d,e,n){t=de(t,d);var h=CS(s,t.background,i,d,e),r=CS(s,t.children,i,d,e),o=new n(s,t);if(s.add.existing(o),h)for(var l=0,a=h.length;l<a;l++){var u=h[l];o.addBackground(u.$child,u.padding)}if(r)for(var l=0,a=r.length;l<a;l++){var u=r[l];o.add(u.$child,u)}return o},N6=function(s,t,i,d,e){return qo(s,t,i,d,e,te)},Y6=function(s,t,i,d,e){return qo(s,t,i,d,e,yn)},z6=function(s,t,i,d,e){var n=t.createCellContainerCallback;if(n){var h=n.$child;delete n.$child,t.createCellContainerCallback=function(r,o,l,a){var u=oa(r,h,i,d,e);for(var c in n)a[c]=n[c];return u}}return qo(s,t,i,d,e,rn)},U6=function(s,t,i,d,e){return qo(s,t,i,d,e,Ai)},Ms=function(s,t,i,d,e,n){var h=t[i];if(!!h){if(Array.isArray(h))for(var r=0,o=h.length;r<o;r++)Array.isArray(h[r])?Ms(s,h,r,d,e,n):Et(s,h,r,d,e,n);else for(var l in h)Et(s,h,l,d,e,n);return h}},V6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Ms(s,t,"buttons",i,d,e);var n=new Ce(s,t);return s.add.existing(n),n},W6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Ms(s,t,"buttons",i,d,e);var n=new Cn(s,t);return s.add.existing(n),n},X6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e);var n=t.buttons;if(n)for(var h=0,r=n.length;h<r;h++)Ms(s,n,h,i,d,e);var o=t.createCellContainerCallback;if(o){var l=o.$child;delete o.$child,t.createCellContainerCallback=function(u,c,f,v){var p=oa(u,l,i,d,e);for(var g in o)v[g]=o[g];return p}}var a=new js(s,t);return s.add.existing(a),a},Pc=function(s,t,i,d,e,n){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"icon",i,d,e),Et(s,t,"text",i,d,e),Et(s,t,"action",i,d,e);var h=new n(s,t);return s.add.existing(h),h},H6=function(s,t,i,d,e){return Pc(s,t,i,d,e,ms)},$6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"main",i,d,e),Et(s,t,"leftTop",i,d,e),Et(s,t,"centerTop",i,d,e),Et(s,t,"rightTop",i,d,e),Et(s,t,"leftCenter",i,d,e),Et(s,t,"center",i,d,e),Et(s,t,"rightCenter",i,d,e),Et(s,t,"leftBottom",i,d,e),Et(s,t,"centerBottom",i,d,e),Et(s,t,"rightBottom",i,d,e);var n=new bo(s,t);return s.add.existing(n),n},K6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"toolbarBackground",i,d,e),Et(s,t,"leftToolbarBackground",i,d,e),Et(s,t,"choicesBackground",i,d,e),Et(s,t,"actionsBackground",i,d,e),Et(s,t,"title",i,d,e),Ms(s,t,"toolbar",i,d,e),Ms(s,t,"leftToolbar",i,d,e),Et(s,t,"content",i,d,e),Et(s,t,"description",i,d,e),Ms(s,t,"choices",i,d,e),Ms(s,t,"actions",i,d,e);var n=new jr(s,t);return s.add.existing(n),n},Z6=function(s,t,i,d,e){return Pc(s,t,i,d,e,Bo)},J6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"track",i,d,e),Et(s,t,"indicator",i,d,e),Et(s,t,"thumb",i,d,e);var n=new xs(s,t);return s.add.existing(n),n},Mc=function(s,t,i,d,e){return t&&(Et(s,t,"background",i,d,e),Et(s,t,"track",i,d,e),Et(s,t,"indicator",i,d,e),Et(s,t,"thumb",i,d,e)),t},Q6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"icon",i,d,e),Mc(s,t.slider,i,d,e),Et(s,t,"text",i,d,e);var n=new Go(s,t);return s.add.existing(n),n},k6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Mc(s,t.slider,i,d,e);var n=t.buttons;n&&(Et(s,n,"top",i,d,e),Et(s,n,"bottom",i,d,e),Et(s,n,"left",i,d,e),Et(s,n,"right",i,d,e));var h=new qr(s,t);return s.add.existing(h),h},j6=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"text",i,d,e),Mc(s,t.slider,i,d,e),Et(s,t,"header",i,d,e),Et(s,t,"footer",i,d,e);var n=new ea(s,t);return s.add.existing(n),n},q6=function(s,t,i,d,e){return qo(s,t,i,d,e,qs)},_6=function(s,t,i,d,e){return Pc(s,t,i,d,e,Vo)},t9=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"text",i,d,e);var n=new Hr(s,t);return s.add.existing(n),n},e9=function(s,t,i,d,e){t=de(t,d),Et(s,t,"background",i,d,e),Et(s,t,"content",i,d,e),Et(s,t,"leftSide",i,d,e),Et(s,t,"rightSide",i,d,e),Et(s,t,"header",i,d,e),Et(s,t,"footer",i,d,e);var n=new Oo(s,t);return s.add.existing(n),n},i9=function(s,t,i,d,e){t=de(t,d);var n=t.background;delete t.background,n&&(t.createBackgroundCallback=function(r){var o=r.scene,l=oa(o,yr(n),i,d,e);return l}),t.createButtonCallback=function(r,o,l){var a=r.scene,u=r.$next;delete r.scene,delete r.$next;var c=oa(a,yr(r),i,d,e);return r.scene=a,r.$next=u,c},t.childrenKey="$next";var h=new _r(s,t);return s.add.existing(h),h},n9={Image:E6,Sprite:M6,Video:R6,Text:L6,BBCodeText:F6,RoundRectangle:I6,Ninepatch:w6,Ninepatch2:D6,Canvas:B6,CircleMaskImage:G6,Space:b6,Sizer:N6,FixWidthSizer:Y6,GridSizer:z6,OverlapSizer:U6,Buttons:V6,FixWidthButtons:W6,GridButtons:X6,Label:H6,BadgeLabel:$6,Dialog:K6,TextBox:Z6,Slider:J6,NumberBar:Q6,ScrollBar:k6,TextArea:j6,Pages:q6,Toast:_6,Knob:t9,HolyGrail:e9,Menu:i9},oa=function(s,t,i,d,e){var n=C6(t,d);if(!n){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var h;if(e&&(h=e[n]),h||(h=n9[n]),!h){console.warn(`rexUI.Make: Can't create ${n} game object.`);return}var r=h(s,t,i,d,e);return t.name&&r.setName(t.name),r},Ac=function(s,t,i,d,e){if(t=jo(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var n=t;if(t=t.$root,delete n.$root,d===void 0)d=n;else for(var h in n)d[h]||(d[h]=n[h])}d=jo(d);var r=oa(s,t,i,d,e);return r},SS=Phaser.Utils.Objects.IsPlainObject,_o=class{constructor(t,i,d){this.setScene(t),this.setStyles(i),this.setBuilders(d)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=jo(t),this}addStyle(t,i){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&i===void 0&&(t=jo(t)),SS(t)){var d=t;for(t in d)this.styles[t]=d[t]}else this.styles[t]=jo(i);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,i){if(this.customBuilders===void 0&&(this.customBuilders={}),SS(t)){var d=t;for(t in d)this.customBuilders[t]=d[t]}else this.customBuilders[t]=i;return this}clearBuilder(){return this.setBuilders(),this}make(t,i){return Ac(this.scene,t,i,this.styles,this.customBuilders)}},Zn=Phaser.Utils.Objects.GetValue,r9=function(s,t){t===void 0&&(t={});var i=s.scene,d=s.style,e=Zn(t,"backgroundColor",d.backgroundColor);e===null&&(e="transparent"),t.text=Zn(t,"text",s.text),t.fontFamily=Zn(t,"fontFamily",d.fontFamily),t.fontSize=Zn(t,"fontSize",d.fontSize),t.color=Zn(t,"color",d.color),t.backgroundColor=e,t.direction=Zn(t,"rtl",d.rtl)?"rtl":"ltr",t.align=Zn(t,"align",s9(d)),t.direction==="rtl"&&eu(s)&&(t.align="right");var n=new nl(i,s.x,s.y,Zn(t,"width",s.width),Zn(t,"height",s.height),t);return n.setOrigin(s.originX,s.originY),i.add.existing(n),n},s9=function(s){return s.hasOwnProperty("align")?s.align:s.hasOwnProperty("halign")?s.halign:"left"},Su=Phaser.Utils.Objects.GetValue,ha=void 0,Rc=class extends Ae{constructor(t){super(t,{eventEmitter:!1});this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0}shutdown(t){this.isShutdown||(this.close(),ha===this&&(ha=void 0),super.shutdown(t))}open(t,i){ha!==void 0&&ha.close(),ha=this,sv(t)&&(i=t,t=void 0),i===void 0&&(i=Su(t,"onClose",void 0));var d=Su(t,"onOpen",void 0),e=Su(t,"onTextChanged",void 0);return this.inputText=r9(this.parent,t).on("textchange",function(n){var h=n.text;e?e(this.parent,h):this.parent.text=h},this).setFocus(),this.parent.setVisible(!1),this.onClose=i,Su(t,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),d&&d(this.parent)},[],this),this}close(){return ha=void 0,this.inputText?(this.parent.setVisible(!0),this.inputText.destroy(),this.inputText=void 0,this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this):this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}};var ES=function(s,t){if(!s)return!1;for(var i=t.visibleSibling,d=0,e=i.length;d<e;d++)s.setChildVisible(i[d],!0);return i.length=0,s.setChildVisible(t,!1),t.isRunning=!1,!0},a9=function(s,t){if(!s)return!1;ES(s,t);var i=t.useParentBounds;hl({gameObjects:s.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:i?s.displayWidth:void 0,height:i?s.displayHeighth:void 0,originX:i?s.originX:void 0,originY:i?s.originY:void 0}),s.setChildVisible(t,!0);for(var d=t.visibleSibling,e=s.children,n=0,h=e.length;n<h;n++){var r=e[n];r.visible&&r!==t&&(s.setChildVisible(r,!1),d.push(r))}return t.isRunning=!0,!0},PS=function(s){return class extends s{constructor(i,d){var e=i.scene;super(e,0,0,1,1,d);e.add.existing(this),H1(i,this,d)}destroy(i){!this.scene||(this.exit(),super.destroy(i))}enter(){var i=a9(this.rexContainer.parent,this);return i&&this.syncSize(),this}exit(){return ES(this.rexContainer.parent,this),this}}},Oc=class extends PS(su){get perspectiveState(){return this.isRunning}},Lc=class extends PS(oc){get skewState(){return this.isRunning}},MS=function(s,t){var i=new hc(s,t);return i.on("open",function(){s.emit("modal.open",i)}),i.on("close",function(d){s.emit("modal.close",d,i)}),s.on("modal.requestClose",i.requestClose,i),i.on("close",function(){s.off("modal.requestClose",i.requestClose,i)}),i},o9=function(s,t){var i=MS(s,t);return new Promise(function(d,e){i.once("close",function(n){d(n)})})},h9=function(s,t){s.emit("modal.requestClose",t)},l9=function(s,t,i){return s._edit||(s._edit=new Rc(s)),s._edit.open(t,i),s._edit},u9=function(s){var t=function(i){var d=s.padding,e=i-d.left-d.right,n=s.style;return eu(s)?(n.wordWrapWidth=e,n.maxLines=0):(n.wrapMode===0&&(n.wrapMode=1),n.wrapWidth=e,n.maxLines=0),s.setFixedSize(i,0),s.minHeight=s.height,s};return t},f9=function(s){var t=function(i){return s.setFixedSize(i,0).runWordWrap(),s.minHeight=s.height,s};return t},d9=function(s){var t=function(i){return s.setMaxWidth(i),s.minHeight=s.height,s};return t},v9=function(s){return s instanceof Xs},c9=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=v9(s)?f9(s):Wv(s)?d9(s):u9(s),s},Fc=65535,RS=function(s,t,i){if(t==null)return s;if(t===0)return Ic(s,0,i),s;var d=s.text.length;if(d===0)return Ic(s,t,i),s;for(var e=Math.floor(t*1.5/d),n={},h=AS(s,e,t,i,n),r=0;r<=Fc&&h!==0;r++){if(e+=h,e<0){e=0;break}h=AS(s,e,t,i,n)}return r===Fc&&console.warn(`FontSizeResize: Test count exceeds ${Fc}`),s.setFontSize(e),Ic(s,t,i),s},OS=function(s,t,i){return i[t]===void 0&&(s.setFontSize(t),i[t]={width:s.width,height:s.height}),i[t]},AS=function(s,t,i,d,e){var n=OS(s,t,e),h=OS(s,t+1,e);if(d!==void 0){if(n.height<=d&&h.height>d)return 0;if(n.height>d)return-1}return n.width<=i&&h.width>i?0:n.width>i?-1:Math.floor(i-n.width)},Ic=function(s,t,i){var d=s.style;d.fixedWidth=t,d.parent.width=t,i!==void 0&&(d.fixedHeight=i,d.parent.height=i),d.update(!1)},p9=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=function(i,d){return RS(s,i,d),s},s.resize=function(i,d){return s.width===i&&s.height===d||s.setFixedSize(i,d),s},s},g9=function(s,t){return s===void 0&&(s=0),new Promise(function(i,d){setTimeout(function(){i(t)},s)})},mt=class{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,i){mt.prototype[t]=i}},LS=function(s){return s==null||s===""||s.length===0},m9=function(s,t,i){var d=s;if(!LS(t)){typeof t=="string"&&(t=t.split("."));for(var e,n=0,h=t.length;n<h;n++){if(e=t[n],d[e]==null||typeof d[e]!="object"){var r;n===h-1?i===void 0?r={}:r=i:r={},d[e]=r}d=d[e]}}return d},yt=function(s,t,i,d){if(d===void 0&&(d="."),typeof s=="object"){if(LS(t)){if(i==null)return;typeof i=="object"&&(s=i)}else{typeof t=="string"&&(t=t.split(d));var e=t.pop(),n=m9(s,t);n[e]=i}return s}};mt.register("ninePatch",function(s,t,i,d,e,n,h,r){var o=new Tr(this.scene,s,t,i,d,e,n,h,r);return this.scene.add.existing(o),o});yt(window,"RexPlugins.UI.NinePatch",Tr);mt.register("ninePatch2",function(s,t,i,d,e,n,h,r){var o=new Sr(this.scene,s,t,i,d,e,n,h,r);return this.scene.add.existing(o),o});yt(window,"RexPlugins.UI.NinePatch2",Sr);mt.register("roundRectangle",function(s,t,i,d,e,n,h){var r=new Si(this.scene,s,t,i,d,e,n,h);return this.scene.add.existing(r),r});yt(window,"RexPlugins.UI.RoundRectangle",Si);mt.register("roundRectangleCanvas",function(s,t,i,d,e,n,h,r,o,l){var a=new jh(this.scene,s,t,i,d,e,n,h,r,o,l);return this.scene.add.existing(a),a});yt(window,"RexPlugins.UI.RoundRectangleCanvas",jh);mt.register("BBCodeText",function(s,t,i,d){var e=new wa(this.scene,s,t,i,d);return this.scene.add.existing(e),e});yt(window,"RexPlugins.UI.BBCodeText",wa);mt.register("tagText",function(s,t,i,d){var e=new il(this.scene,s,t,i,d);return this.scene.add.existing(e),e});yt(window,"RexPlugins.UI.TagText",il);mt.register("hiddenEdit",function(s,t){var i=new sl(s,t);return i});yt(window,"RexPlugins.UI.HiddenEdit",sl);mt.register("container",function(s,t,i,d,e){var n=new ri(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.Container",ri);mt.register("canvas",function(s,t,i,d){var e=new Yi(this.scene,s,t,i,d);return this.scene.add.existing(e),e});yt(window,"RexPlugins.UI.Canvas",Yi);mt.register("circleMaskImage",function(s,t,i,d,e){var n=new Ga(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.CircleMaskImage",Ga);mt.register("alphaMaskImage",function(s,t,i,d,e){var n=new ul(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.AlphaMaskImage",ul);mt.register("dynamicText",function(s,t,i,d,e){var n=new Xs(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.DynamicText",Xs);mt.register("textPlayer",function(s,t,i,d,e){var n=new Ka(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.TextPlayer",Ka);mt.register("circularProgressCanvas",function(s,t,i,d,e,n){var h=new Qa(this.scene,s,t,i,d,e,n);return this.scene.add.existing(h),h});yt(window,"RexPlugins.UI.CircularProgressCanvas",Qa);mt.register("circularProgress",function(s,t,i,d,e,n){var h=new Br(this.scene,s,t,i,d,e,n);return this.scene.add.existing(h),h});yt(window,"RexPlugins.UI.CircularProgress",Br);mt.register("knob",function(s){var t=new Hr(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Knob",Hr);mt.register("customShapes",function(s,t,i,d,e){var n=new $r(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.CustomShapes",$r);mt.register("customProgress",function(s,t,i,d,e){var n=new yo(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.CustomProgress",yo);mt.register("transitionImage",function(s,t,i,d,e){var n=new To(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.TransitionImage",To);mt.register("fullWindowRectangle",function(s,t){var i=new Co(this.scene,s,t);return this.scene.add.existing(i),i});yt(window,"RexPlugins.UI.FullWindowRectangle",Co);mt.register("cover",function(s){var t=new Eo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Cover",Eo);mt.register("chart",function(s,t,i,d,e){var n=new Po(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.Chart",Po);mt.register("sizer",function(s,t,i,d,e,n){var h=new te(this.scene,s,t,i,d,e,n);return this.scene.add.existing(h),h});yt(window,"RexPlugins.UI.Sizer",te);mt.register("gridSizer",function(s,t,i,d,e,n,h,r,o){var l=new rn(this.scene,s,t,i,d,e,n,h,r,o);return this.scene.add.existing(l),l});yt(window,"RexPlugins.UI.GridSizer",rn);mt.register("fixWidthSizer",function(s,t,i,d,e){var n=new yn(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.FixWidthSizer",yn);mt.register("overlapSizer",function(s,t,i,d,e){var n=new Ai(this.scene,s,t,i,d,e);return this.scene.add.existing(n),n});yt(window,"RexPlugins.UI.OverlapSizer",Ai);mt.register("space",function(){var s=new Kr(this.scene);return s});yt(window,"RexPlugins.UI.Space",Kr);mt.register("label",function(s){var t=new ms(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Label",ms);mt.register("buttons",function(s){var t=new Ce(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Buttons",Ce);mt.register("gridButtons",function(s){var t=new js(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.GridButtons",js);mt.register("fixWidthButtons",function(s){var t=new Cn(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.FixWidthButtons",Cn);mt.register("dialog",function(s){var t=new jr(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Dialog",jr);mt.register("holyGrail",function(s){var t=new Oo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.HolyGrail",Oo);mt.register("tabs",function(s){var t=new Lo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Tabs",Lo);mt.register("slider",function(s){var t=new xs(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Slider",xs);mt.register("gridTable",function(s){var t=new ys(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.GridTable",ys);mt.register("menu",function(s){var t=new _r(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Menu",_r);mt.register("dropDownList",function(s){var t=new Io(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.DropDownList",Io);mt.register("textBox",function(s){var t=new Bo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.TextBox",Bo);mt.register("numberBar",function(s){var t=new Go(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.NumberBar",Go);mt.register("scrollBar",function(s){var t=new qr(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.ScrollBar",qr);mt.register("badgeLabel",function(s){var t=new bo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.BadgeLabel",bo);mt.register("pages",function(s){var t=new qs(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Pages",qs);mt.register("perspectiveCard",function(s){var t=new No(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.PerspectiveCard",No);mt.register("tabPages",function(s){var t=new Yo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.TabPages",Yo);mt.register("textArea",function(s){var t=new ea(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.TextArea",ea);mt.register("scrollablePanel",function(s){var t=new ir(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.ScrollablePanel",ir);mt.register("toast",function(s){var t=new Vo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Toast",Vo);mt.register("sides",function(s){var t=new Wo(this.scene,s);return this.scene.add.existing(t),t});yt(window,"RexPlugins.UI.Sides",Wo);mt.register("click",function(s,t){return new cs(s,t)});yt(window,"RexPlugins.UI.Click",cs);mt.register("clickOutside",function(s,t){return new vo(s,t)});yt(window,"RexPlugins.UI.ClickOutside",vo);mt.register("inTouching",function(s,t){return new Ks(s,t)});yt(window,"RexPlugins.UI.InTouching",Ks);var x9=Phaser.GameObjects.GameObject,Eu=function(s){return s instanceof x9};mt.register("tap",function(s,t){return Eu(s)||(t=s,s=this.scene),new Yr(s,t)});yt(window,"RexPlugins.UI.Tap",Yr);mt.register("press",function(s,t){return Eu(s)||(t=s,s=this.scene),new Vr(s,t)});yt(window,"RexPlugins.UI.Press",Vr);mt.register("swipe",function(s,t){return Eu(s)||(t=s,s=this.scene),new Qs(s,t)});yt(window,"RexPlugins.UI.Swipe",Qs);mt.register("pan",function(s,t){return Eu(s)||(t=s,s=this.scene),new wl(s,t)});yt(window,"RexPlugins.UI.Pan",wl);mt.register("drag",function(s,t){return new lu(s,t)});yt(window,"RexPlugins.UI.Drag",lu);mt.register("pinch",function(s){return new bl(this.scene,s)});yt(window,"RexPlugins.UI.Pinch",bl);mt.register("rotate",function(s){return new mo(this.scene,s)});yt(window,"RexPlugins.UI.Rotate",mo);mt.register("flip",function(s,t){return new uu(s,t)});yt(window,"RexPlugins.UI.Flip",uu);mt.register("shake",function(s,t){return new oo(s,t)});yt(window,"RexPlugins.UI.Shake",oo);mt.register("touchEventStop",function(s,t){return new So(s,t)});yt(window,"RexPlugins.UI.TouchEventStop",So);mt.register("perspective",function(s,t){return new Oc(s,t)});yt(window,"RexPlugins.UI.Perspective",Oc);mt.register("skew",function(s,t){return new Lc(s,t)});yt(window,"RexPlugins.UI.Skew",Lc);mt.register("anchor",function(s,t){return new io(s,t)});yt(window,"RexPlugins.UI.Anchor",io);mt.register("maker",function(s,t){return new _o(this.scene,s,t)});yt(window,"RexPlugins.UI.Maker",_o);var wc=class extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i);this.add=new mt(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,i,d,e){return t.visible?Ll(t,i,d,e):!1}get viewport(){return Hs(this.scene,this.scene.cameras.main,!0)}make(t,i,d,e){return Ac(this.scene,t,i,d,e)}get maker(){return this._maker||(this._maker=new _o(this.scene)),this._maker}},y9={getParentSizer:zi,getTopmostSizer:vd,hide:Xn,show:Wn,isShown:Ol,edit:l9,wrapExpandText:c9,fontSizeExpandText:p9,fontSizeResize:RS,waitEvent:yl,waitComplete:Re,delayPromise:g9,setChildrenInteractive:zl,fadeIn:so,fadeOutDestroy:ro,easeMoveTo:ev,easeMoveFrom:iv,modal:MS,modalPromise:o9,modalClose:h9,requestDrag:rc,yaml:Ec};Object.assign(wc.prototype,y9);var FS=wc;var Dc=class extends Phaser.Scene{constructor(){super("preloader")}preload(){this.load.image("acho","assets/acho.png"),this.load.bitmapFont("gothic","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.png","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.xml")}create(){let t=this.add.graphics();t.fillStyle(16777215,1),t.fillRoundedRect(10,10,180,180,32),t.generateTexture("tile",200,200),this.add.text(0,0,"loading...",{fontFamily:"Interstate"}),this.scene.start("splash")}},IS=Dc;var la={BoardDone:"boardDone",GameStart:"gameStart"},T9=new bs.Events.EventEmitter,ua=T9;function Pu(s){let t=0;for(let i=3;i<=s.length;i++)switch(i){case 3:t+=100;break;case 4:t+=300;break;case 6:t+=600;break;default:t+=400}return t}function wS(s,t,i){return t<0||i<0||t>s.width||i>s.height}var Mu="https://gamejay.herokuapp.com";async function DS(s){return await fetch(`${Mu}/who/board/${s}`,{method:"GET",mode:"cors"})}async function Bc(s){return await fetch(`${Mu}/who/session/${s}`,{method:"GET",mode:"cors"})}async function BS(s,t,i){try{return await fetch(`${Mu}/result/${s}/${t}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",body:JSON.stringify(i)})}catch(d){Rn&&(console.error(`sessionId: ${s}`),console.error(`userId: ${t}`),console.error("data:"),console.error(i),console.error(d))}}var bc=class extends Phaser.Scene{constructor(){super({key:"board",visible:!1});this.tileGrid=[],this.currentChain=[],this.foundWords=new Set,this.isDragging=!1,this.boardWords=new Set,this.curScore=0,this.GRID_SIZE=4,this.GAME_TIME_SECS=80,this.DRAG_COLOR=16106392,this.REPEAT_COLOR=15589182,this.IDLE_COLOR=11358464;for(let t=0;t<this.GRID_SIZE;t++)this.tileGrid.push([])}async create(){var e,n,h,r,o,l;ua.on(la.GameStart,this.handleGameStart,this),Rn&&this.input.keyboard.addKey("E").on("down",this.handleGameEnd,this);let t=this.game.config.width;this.LETTER_SPRITE_SIZE=typeof t=="string"?parseInt(t)/(this.GRID_SIZE+1):t/(this.GRID_SIZE+1),this.imageGroup=this.add.group(),this.tileContainerGroup=this.add.group(),this.input.addListener("pointerup",()=>{this.endChain()}),console.log(As);let d=await(await DS((e=As)!=null?e:"")).json();Rn&&(console.log("Board data:"),console.log(d)),this.boardWords=new Set(d.words),this.drawBoard(d.board),console.log((n=this.tileGrid[0][0].container)==null?void 0:n.getBounds().y),this.gameTimeText=this.add.text(this.cameras.main.centerX,((r=(h=this.tileGrid[0][0].container)==null?void 0:h.getBounds().y)!=null?r:80)/2,"Time remaining:",{color:"black",fontSize:`${Math.floor(((l=(o=this.tileGrid[0][0].container)==null?void 0:o.getBounds().y)!=null?l:80)/2)}px`}).setOrigin(.5).setVisible(!1),this.imageGroup.setTint(this.IDLE_COLOR),ua.emit(la.BoardDone)}update(){this.gameTimer&&this.gameTimeText.visible&&this.gameTimeText.setText(`Time remaining: ${Math.ceil(this.gameTimer.getRemainingSeconds())} seconds`)}updateChainColors(t){this.currentChain.forEach(i=>{var d;return((d=i.container)==null?void 0:d.getByName("image")).setTint(t)})}handleGameStart(){this.gameTimeText.setVisible(!0),this.gameTimer=this.time.delayedCall(this.GAME_TIME_SECS*1e3,this.handleGameEnd,[],this)}handleGameEnd(){var t,i;Rn&&console.log("Game over!"),BS((t=As)!=null?t:"",(i=Gc)!=null?i:"",{score:this.curScore,words:Array.from(this.foundWords)}),this.scene.switch("result")}drawBoard(t){for(let d=0;d<this.GRID_SIZE;d++)for(let e=0;e<this.GRID_SIZE;e++){let n=this.add.image(0,0,"tile").setDisplaySize(this.LETTER_SPRITE_SIZE,this.LETTER_SPRITE_SIZE).setName("image"),h=this.add.container(this.cameras.main.width/2+(e-this.GRID_SIZE/2)*this.LETTER_SPRITE_SIZE+this.LETTER_SPRITE_SIZE/2,this.cameras.main.height/2+(d-this.GRID_SIZE/2)*this.LETTER_SPRITE_SIZE+this.LETTER_SPRITE_SIZE/2,n).setVisible(!1),r={letter:t[d*this.GRID_SIZE+e],container:h,row:d,col:e};h.add(this.add.text(0,0,r.letter.toUpperCase(),{color:"black",fontSize:`${this.LETTER_SPRITE_SIZE/2}px`,fontFamily:"Interstate"}).setOrigin(.5)),this.tileGrid[d][e]=r,this.imageGroup.add(n),this.tileContainerGroup.add(h),h.setInteractive(new Phaser.Geom.Circle(0,0,n.displayHeight/2),Phaser.Geom.Circle.Contains).on("pointerover",()=>{this.handleAddToChain(r)}).on("pointerdown",()=>{this.startChain(r)}),Rn&&this.input.enableDebug(h,255),h.setVisible(!0)}let i=this.tileGrid[0][0].container;if(i){let d=this.add.rectangle(i.getBounds().x,i.getBounds().y,this.LETTER_SPRITE_SIZE*this.GRID_SIZE,this.LETTER_SPRITE_SIZE*this.GRID_SIZE).setOrigin(0,0).setInteractive(new Phaser.Geom.Rectangle(i.getBounds().x,i.getBounds().y,this.LETTER_SPRITE_SIZE*this.GRID_SIZE,this.LETTER_SPRITE_SIZE*this.GRID_SIZE),wS).on("pointerover",()=>this.endChain()).setDepth(-1);Rn&&d.setStrokeStyle(2,65280)}else console.error("There was a timing issue..."),console.error("Bounding box tried to draw before top left container was defined"),this.game.destroy(!0,!0);this.scene.setVisible(!0)}startChain(t){this.isDragging=!0,this.handleAddToChain(t)}handleAddToChain(t){if(this.isDragging)if(this.currentChain.includes(t))this.currentChain.length>1&&this.endChain();else{let i=this.currentChain.length>0?this.currentChain[this.currentChain.length-1]:void 0;if(i&&Phaser.Math.Distance.Between(i.row,i.col,t.row,t.col)>Math.sqrt(2))if(i.container&&t.container){let d=new Phaser.Geom.Line(i.container.x,i.container.y,t.container.x,t.container.y);for(let e of this.tileGrid.flat()){let n=e.container;Phaser.Geom.Intersects.LineToCircle(d,new Phaser.Geom.Circle(n.x,n.y,n.input.hitArea.radius))&&this.addToChain(e)}}else console.error("Containers not initialized"),this.game.destroy(!0,!0);this.addToChain(t)}}addToChain(t){if(!this.currentChain.includes(t)){this.currentChain.push(t);let i=this.currentChain.map(d=>d.letter).join("");this.foundWords.has(i)?this.updateChainColors(this.REPEAT_COLOR):this.boardWords.has(i)?this.updateChainColors(th):this.updateChainColors(this.DRAG_COLOR)}}endChain(){if(this.isDragging){this.imageGroup.setTint(this.IDLE_COLOR);let t=this.currentChain.map(i=>i.letter).join("");if(!this.foundWords.has(t)&&this.boardWords.has(t)){let i=Pu(t);Rn&&console.log(`Found word "${t}" of score: ${i}`),this.curScore+=i,this.foundWords.add(t)}this.currentChain=[]}this.isDragging=!1,console.log(`cur score: ${this.curScore}`)}},GS=bc;var zc=class extends Phaser.Scene{constructor(){super({key:"splash"});this.boardDone=!1}create(){ua.on(la.BoardDone,this.boardDoneHandler,this),this.add.bitmapText(this.cameras.main.centerX,300,"gothic","Connect letters together to make as many words as you can.").setOrigin(.5).setDepth(3).setTintFill(0).setMaxWidth(600).setCenterAlign().setFontSize(30),this.add.rectangle(this.cameras.main.centerX,this.cameras.main.centerY,this.cameras.main.width,this.cameras.main.height,16777215).setDepth(2).setInteractive(),this.startButton=this.add.rectangle(0,0,this.cameras.main.width*.3,this.cameras.main.height*.1,Nc).setName("button").on("pointerdown",this.startButtonHandler,this),this.startButtonText=this.add.bitmapText(0,0,"gothic","Start!").setOrigin(.5),this.startButtonContainer=this.add.container(this.cameras.main.centerX,Math.floor(this.cameras.main.height*.75)).add(this.startButton).add(this.startButtonText).setDepth(3),Yc?this.scene.switch("result"):this.scene.launch("board")}startButtonHandler(){ua.emit(la.GameStart),this.scene.stop()}boardDoneHandler(){this.startButtonContainer.getByName("button").setInteractive(),this.startButtonContainer&&(this.startButton.fillColor=th),this.boardDone=!0}},bS=zc;var C9=Xh(function(s,t){(function(){var i,d="4.17.21",e=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",r="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",l=500,a="__lodash_placeholder__",u=1,c=2,f=4,v=1,p=2,g=1,m=2,x=4,y=8,T=16,C=32,S=64,E=128,M=256,R=512,L=30,O="...",F=800,D=16,B=1,N=2,V=3,X=1/0,K=9007199254740991,Z=17976931348623157e292,G=0/0,w=4294967295,b=w-1,Y=w>>>1,U=[["ary",E],["bind",g],["bindKey",m],["curry",y],["curryRight",T],["flip",R],["partial",C],["partialRight",S],["rearg",M]],W="[object Arguments]",H="[object Array]",J="[object AsyncFunction]",q="[object Boolean]",_="[object Date]",nt="[object DOMException]",rt="[object Error]",at="[object Function]",vt="[object GeneratorFunction]",ut="[object Map]",ct="[object Number]",Ft="[object Null]",Tt="[object Object]",Ct="[object Promise]",dt="[object Proxy]",It="[object RegExp]",gt="[object Set]",Pt="[object String]",xe="[object Symbol]",Ge="[object Undefined]",$t="[object WeakMap]",Ut="[object WeakSet]",ee="[object ArrayBuffer]",qt="[object DataView]",ie="[object Float32Array]",Pe="[object Float64Array]",ui="[object Int8Array]",fi="[object Int16Array]",di="[object Int32Array]",vi="[object Uint8Array]",ci="[object Uint8ClampedArray]",pi="[object Uint16Array]",fa="[object Uint32Array]",zS=/\b__p \+= '';/g,US=/\b(__p \+=) '' \+/g,VS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wc=/&(?:amp|lt|gt|quot|#39);/g,Xc=/[&<>"']/g,WS=RegExp(Wc.source),XS=RegExp(Xc.source),HS=/<%-([\s\S]+?)%>/g,$S=/<%([\s\S]+?)%>/g,Hc=/<%=([\s\S]+?)%>/g,KS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ZS=/^\w*$/,JS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Au=/[\\^$.*+?()[\]{}|]/g,QS=RegExp(Au.source),Ru=/^\s+/,kS=/\s/,jS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qS=/\{\n\/\* \[wrapped with (.+)\] \*/,_S=/,? & /,tE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eE=/[()=,{}\[\]\/\s]/,iE=/\\(\\)?/g,nE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$c=/\w*$/,sE=/^[-+]0x[0-9a-f]+$/i,rE=/^0b[01]+$/i,aE=/^\[object .+?Constructor\]$/,oE=/^0o[0-7]+$/i,hE=/^(?:0|[1-9]\d*)$/,lE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eh=/($^)/,uE=/['\n\r\u2028\u2029\\]/g,ih="\\ud800-\\udfff",fE="\\u0300-\\u036f",dE="\\ufe20-\\ufe2f",vE="\\u20d0-\\u20ff",Kc=fE+dE+vE,Zc="\\u2700-\\u27bf",Jc="a-z\\xdf-\\xf6\\xf8-\\xff",cE="\\xac\\xb1\\xd7\\xf7",pE="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gE="\\u2000-\\u206f",mE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qc="A-Z\\xc0-\\xd6\\xd8-\\xde",kc="\\ufe0e\\ufe0f",jc=cE+pE+gE+mE,Ou="[']",xE="["+ih+"]",qc="["+jc+"]",nh="["+Kc+"]",_c="\\d+",yE="["+Zc+"]",tp="["+Jc+"]",ep="[^"+ih+jc+_c+Zc+Jc+Qc+"]",Lu="\\ud83c[\\udffb-\\udfff]",TE="(?:"+nh+"|"+Lu+")",ip="[^"+ih+"]",Fu="(?:\\ud83c[\\udde6-\\uddff]){2}",Iu="[\\ud800-\\udbff][\\udc00-\\udfff]",rr="["+Qc+"]",np="\\u200d",sp="(?:"+tp+"|"+ep+")",CE="(?:"+rr+"|"+ep+")",rp="(?:"+Ou+"(?:d|ll|m|re|s|t|ve))?",ap="(?:"+Ou+"(?:D|LL|M|RE|S|T|VE))?",op=TE+"?",hp="["+kc+"]?",SE="(?:"+np+"(?:"+[ip,Fu,Iu].join("|")+")"+hp+op+")*",EE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",PE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lp=hp+op+SE,ME="(?:"+[yE,Fu,Iu].join("|")+")"+lp,AE="(?:"+[ip+nh+"?",nh,Fu,Iu,xE].join("|")+")",RE=RegExp(Ou,"g"),OE=RegExp(nh,"g"),wu=RegExp(Lu+"(?="+Lu+")|"+AE+lp,"g"),LE=RegExp([rr+"?"+tp+"+"+rp+"(?="+[qc,rr,"$"].join("|")+")",CE+"+"+ap+"(?="+[qc,rr+sp,"$"].join("|")+")",rr+"?"+sp+"+"+rp,rr+"+"+ap,PE,EE,_c,ME].join("|"),"g"),FE=RegExp("["+np+ih+Kc+kc+"]"),IE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],DE=-1,ae={};ae[ie]=ae[Pe]=ae[ui]=ae[fi]=ae[di]=ae[vi]=ae[ci]=ae[pi]=ae[fa]=!0,ae[W]=ae[H]=ae[ee]=ae[q]=ae[qt]=ae[_]=ae[rt]=ae[at]=ae[ut]=ae[ct]=ae[Tt]=ae[It]=ae[gt]=ae[Pt]=ae[$t]=!1;var ne={};ne[W]=ne[H]=ne[ee]=ne[qt]=ne[q]=ne[_]=ne[ie]=ne[Pe]=ne[ui]=ne[fi]=ne[di]=ne[ut]=ne[ct]=ne[Tt]=ne[It]=ne[gt]=ne[Pt]=ne[xe]=ne[vi]=ne[ci]=ne[pi]=ne[fa]=!0,ne[rt]=ne[at]=ne[$t]=!1;var BE={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},GE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},NE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},YE=parseFloat,zE=parseInt,up=typeof ns=="object"&&ns&&ns.Object===Object&&ns,UE=typeof self=="object"&&self&&self.Object===Object&&self,Fe=up||UE||Function("return this")(),Du=t&&!t.nodeType&&t,Rs=Du&&!0&&s&&!s.nodeType&&s,fp=Rs&&Rs.exports===Du,Bu=fp&&up.process,Fi=function(){try{var et=Rs&&Rs.require&&Rs.require("util").types;return et||Bu&&Bu.binding&&Bu.binding("util")}catch(ot){}}(),dp=Fi&&Fi.isArrayBuffer,vp=Fi&&Fi.isDate,cp=Fi&&Fi.isMap,pp=Fi&&Fi.isRegExp,gp=Fi&&Fi.isSet,mp=Fi&&Fi.isTypedArray;function gi(et,ot,st){switch(st.length){case 0:return et.call(ot);case 1:return et.call(ot,st[0]);case 2:return et.call(ot,st[0],st[1]);case 3:return et.call(ot,st[0],st[1],st[2])}return et.apply(ot,st)}function VE(et,ot,st,xt){for(var wt=-1,Kt=et==null?0:et.length;++wt<Kt;){var he=et[wt];ot(xt,he,st(he),et)}return xt}function Ii(et,ot){for(var st=-1,xt=et==null?0:et.length;++st<xt&&ot(et[st],st,et)!==!1;);return et}function WE(et,ot){for(var st=et==null?0:et.length;st--&&ot(et[st],st,et)!==!1;);return et}function xp(et,ot){for(var st=-1,xt=et==null?0:et.length;++st<xt;)if(!ot(et[st],st,et))return!1;return!0}function Jn(et,ot){for(var st=-1,xt=et==null?0:et.length,wt=0,Kt=[];++st<xt;){var he=et[st];ot(he,st,et)&&(Kt[wt++]=he)}return Kt}function sh(et,ot){var st=et==null?0:et.length;return!!st&&ar(et,ot,0)>-1}function Gu(et,ot,st){for(var xt=-1,wt=et==null?0:et.length;++xt<wt;)if(st(ot,et[xt]))return!0;return!1}function oe(et,ot){for(var st=-1,xt=et==null?0:et.length,wt=Array(xt);++st<xt;)wt[st]=ot(et[st],st,et);return wt}function Qn(et,ot){for(var st=-1,xt=ot.length,wt=et.length;++st<xt;)et[wt+st]=ot[st];return et}function bu(et,ot,st,xt){var wt=-1,Kt=et==null?0:et.length;for(xt&&Kt&&(st=et[++wt]);++wt<Kt;)st=ot(st,et[wt],wt,et);return st}function XE(et,ot,st,xt){var wt=et==null?0:et.length;for(xt&&wt&&(st=et[--wt]);wt--;)st=ot(st,et[wt],wt,et);return st}function Nu(et,ot){for(var st=-1,xt=et==null?0:et.length;++st<xt;)if(ot(et[st],st,et))return!0;return!1}var HE=Yu("length");function $E(et){return et.split("")}function KE(et){return et.match(tE)||[]}function yp(et,ot,st){var xt;return st(et,function(wt,Kt,he){if(ot(wt,Kt,he))return xt=Kt,!1}),xt}function rh(et,ot,st,xt){for(var wt=et.length,Kt=st+(xt?1:-1);xt?Kt--:++Kt<wt;)if(ot(et[Kt],Kt,et))return Kt;return-1}function ar(et,ot,st){return ot===ot?sP(et,ot,st):rh(et,Tp,st)}function ZE(et,ot,st,xt){for(var wt=st-1,Kt=et.length;++wt<Kt;)if(xt(et[wt],ot))return wt;return-1}function Tp(et){return et!==et}function Cp(et,ot){var st=et==null?0:et.length;return st?Uu(et,ot)/st:G}function Yu(et){return function(ot){return ot==null?i:ot[et]}}function zu(et){return function(ot){return et==null?i:et[ot]}}function Sp(et,ot,st,xt,wt){return wt(et,function(Kt,he,Zt){st=xt?(xt=!1,Kt):ot(st,Kt,he,Zt)}),st}function JE(et,ot){var st=et.length;for(et.sort(ot);st--;)et[st]=et[st].value;return et}function Uu(et,ot){for(var st,xt=-1,wt=et.length;++xt<wt;){var Kt=ot(et[xt]);Kt!==i&&(st=st===i?Kt:st+Kt)}return st}function Vu(et,ot){for(var st=-1,xt=Array(et);++st<et;)xt[st]=ot(st);return xt}function QE(et,ot){return oe(ot,function(st){return[st,et[st]]})}function Ep(et){return et&&et.slice(0,Rp(et)+1).replace(Ru,"")}function mi(et){return function(ot){return et(ot)}}function Wu(et,ot){return oe(ot,function(st){return et[st]})}function da(et,ot){return et.has(ot)}function Pp(et,ot){for(var st=-1,xt=et.length;++st<xt&&ar(ot,et[st],0)>-1;);return st}function Mp(et,ot){for(var st=et.length;st--&&ar(ot,et[st],0)>-1;);return st}function kE(et,ot){for(var st=et.length,xt=0;st--;)et[st]===ot&&++xt;return xt}var jE=zu(BE),qE=zu(GE);function _E(et){return"\\"+NE[et]}function tP(et,ot){return et==null?i:et[ot]}function or(et){return FE.test(et)}function eP(et){return IE.test(et)}function iP(et){for(var ot,st=[];!(ot=et.next()).done;)st.push(ot.value);return st}function Xu(et){var ot=-1,st=Array(et.size);return et.forEach(function(xt,wt){st[++ot]=[wt,xt]}),st}function Ap(et,ot){return function(st){return et(ot(st))}}function kn(et,ot){for(var st=-1,xt=et.length,wt=0,Kt=[];++st<xt;){var he=et[st];(he===ot||he===a)&&(et[st]=a,Kt[wt++]=st)}return Kt}function ah(et){var ot=-1,st=Array(et.size);return et.forEach(function(xt){st[++ot]=xt}),st}function nP(et){var ot=-1,st=Array(et.size);return et.forEach(function(xt){st[++ot]=[xt,xt]}),st}function sP(et,ot,st){for(var xt=st-1,wt=et.length;++xt<wt;)if(et[xt]===ot)return xt;return-1}function rP(et,ot,st){for(var xt=st+1;xt--;)if(et[xt]===ot)return xt;return xt}function hr(et){return or(et)?oP(et):HE(et)}function Ki(et){return or(et)?hP(et):$E(et)}function Rp(et){for(var ot=et.length;ot--&&kS.test(et.charAt(ot)););return ot}var aP=zu(bE);function oP(et){for(var ot=wu.lastIndex=0;wu.test(et);)++ot;return ot}function hP(et){return et.match(wu)||[]}function lP(et){return et.match(LE)||[]}var uP=function et(ot){ot=ot==null?Fe:lr.defaults(Fe.Object(),ot,lr.pick(Fe,wE));var st=ot.Array,xt=ot.Date,wt=ot.Error,Kt=ot.Function,he=ot.Math,Zt=ot.Object,Hu=ot.RegExp,fP=ot.String,wi=ot.TypeError,oh=st.prototype,dP=Kt.prototype,ur=Zt.prototype,hh=ot["__core-js_shared__"],lh=dP.toString,jt=ur.hasOwnProperty,vP=0,Op=function(){var P=/[^.]+$/.exec(hh&&hh.keys&&hh.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),uh=ur.toString,cP=lh.call(Zt),pP=Fe._,gP=Hu("^"+lh.call(jt).replace(Au,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fh=fp?ot.Buffer:i,jn=ot.Symbol,dh=ot.Uint8Array,Lp=fh?fh.allocUnsafe:i,vh=Ap(Zt.getPrototypeOf,Zt),Fp=Zt.create,Ip=ur.propertyIsEnumerable,ch=oh.splice,wp=jn?jn.isConcatSpreadable:i,va=jn?jn.iterator:i,Os=jn?jn.toStringTag:i,ph=function(){try{var P=Ds(Zt,"defineProperty");return P({},"",{}),P}catch(A){}}(),mP=ot.clearTimeout!==Fe.clearTimeout&&ot.clearTimeout,xP=xt&&xt.now!==Fe.Date.now&&xt.now,yP=ot.setTimeout!==Fe.setTimeout&&ot.setTimeout,gh=he.ceil,mh=he.floor,$u=Zt.getOwnPropertySymbols,TP=fh?fh.isBuffer:i,Dp=ot.isFinite,CP=oh.join,SP=Ap(Zt.keys,Zt),ye=he.max,be=he.min,EP=xt.now,PP=ot.parseInt,Bp=he.random,MP=oh.reverse,Ku=Ds(ot,"DataView"),ca=Ds(ot,"Map"),Zu=Ds(ot,"Promise"),fr=Ds(ot,"Set"),pa=Ds(ot,"WeakMap"),ga=Ds(Zt,"create"),xh=pa&&new pa,dr={},AP=Bs(Ku),RP=Bs(ca),OP=Bs(Zu),LP=Bs(fr),FP=Bs(pa),yh=jn?jn.prototype:i,ma=yh?yh.valueOf:i,Gp=yh?yh.toString:i;function Q(P){if(ve(P)&&!Dt(P)&&!(P instanceof Yt)){if(P instanceof Di)return P;if(jt.call(P,"__wrapped__"))return bg(P)}return new Di(P)}var vr=function(){function P(){}return function(A){if(!fe(A))return{};if(Fp)return Fp(A);P.prototype=A;var I=new P;return P.prototype=i,I}}();function Th(){}function Di(P,A){this.__wrapped__=P,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=i}Q.templateSettings={escape:HS,evaluate:$S,interpolate:Hc,variable:"",imports:{_:Q}},Q.prototype=Th.prototype,Q.prototype.constructor=Q,Di.prototype=vr(Th.prototype),Di.prototype.constructor=Di;function Yt(P){this.__wrapped__=P,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=w,this.__views__=[]}function IP(){var P=new Yt(this.__wrapped__);return P.__actions__=je(this.__actions__),P.__dir__=this.__dir__,P.__filtered__=this.__filtered__,P.__iteratees__=je(this.__iteratees__),P.__takeCount__=this.__takeCount__,P.__views__=je(this.__views__),P}function wP(){if(this.__filtered__){var P=new Yt(this);P.__dir__=-1,P.__filtered__=!0}else P=this.clone(),P.__dir__*=-1;return P}function DP(){var P=this.__wrapped__.value(),A=this.__dir__,I=Dt(P),z=A<0,$=I?P.length:0,k=$M(0,$,this.__views__),j=k.start,tt=k.end,it=tt-j,ht=z?tt:j-1,lt=this.__iteratees__,ft=lt.length,pt=0,St=be(it,this.__takeCount__);if(!I||!z&&$==it&&St==it)return rg(P,this.__actions__);var Ot=[];t:for(;it--&&pt<St;){ht+=A;for(var Gt=-1,Lt=P[ht];++Gt<ft;){var Nt=lt[Gt],Vt=Nt.iteratee,Ti=Nt.type,Ze=Vt(Lt);if(Ti==N)Lt=Ze;else if(!Ze){if(Ti==B)continue t;break t}}Ot[pt++]=Lt}return Ot}Yt.prototype=vr(Th.prototype),Yt.prototype.constructor=Yt;function Ls(P){var A=-1,I=P==null?0:P.length;for(this.clear();++A<I;){var z=P[A];this.set(z[0],z[1])}}function BP(){this.__data__=ga?ga(null):{},this.size=0}function GP(P){var A=this.has(P)&&delete this.__data__[P];return this.size-=A?1:0,A}function bP(P){var A=this.__data__;if(ga){var I=A[P];return I===o?i:I}return jt.call(A,P)?A[P]:i}function NP(P){var A=this.__data__;return ga?A[P]!==i:jt.call(A,P)}function YP(P,A){var I=this.__data__;return this.size+=this.has(P)?0:1,I[P]=ga&&A===i?o:A,this}Ls.prototype.clear=BP,Ls.prototype.delete=GP,Ls.prototype.get=bP,Ls.prototype.has=NP,Ls.prototype.set=YP;function On(P){var A=-1,I=P==null?0:P.length;for(this.clear();++A<I;){var z=P[A];this.set(z[0],z[1])}}function zP(){this.__data__=[],this.size=0}function UP(P){var A=this.__data__,I=Ch(A,P);if(I<0)return!1;var z=A.length-1;return I==z?A.pop():ch.call(A,I,1),--this.size,!0}function VP(P){var A=this.__data__,I=Ch(A,P);return I<0?i:A[I][1]}function WP(P){return Ch(this.__data__,P)>-1}function XP(P,A){var I=this.__data__,z=Ch(I,P);return z<0?(++this.size,I.push([P,A])):I[z][1]=A,this}On.prototype.clear=zP,On.prototype.delete=UP,On.prototype.get=VP,On.prototype.has=WP,On.prototype.set=XP;function Ln(P){var A=-1,I=P==null?0:P.length;for(this.clear();++A<I;){var z=P[A];this.set(z[0],z[1])}}function HP(){this.size=0,this.__data__={hash:new Ls,map:new(ca||On),string:new Ls}}function $P(P){var A=Dh(this,P).delete(P);return this.size-=A?1:0,A}function KP(P){return Dh(this,P).get(P)}function ZP(P){return Dh(this,P).has(P)}function JP(P,A){var I=Dh(this,P),z=I.size;return I.set(P,A),this.size+=I.size==z?0:1,this}Ln.prototype.clear=HP,Ln.prototype.delete=$P,Ln.prototype.get=KP,Ln.prototype.has=ZP,Ln.prototype.set=JP;function Fs(P){var A=-1,I=P==null?0:P.length;for(this.__data__=new Ln;++A<I;)this.add(P[A])}function QP(P){return this.__data__.set(P,o),this}function kP(P){return this.__data__.has(P)}Fs.prototype.add=Fs.prototype.push=QP,Fs.prototype.has=kP;function Zi(P){var A=this.__data__=new On(P);this.size=A.size}function jP(){this.__data__=new On,this.size=0}function qP(P){var A=this.__data__,I=A.delete(P);return this.size=A.size,I}function _P(P){return this.__data__.get(P)}function tM(P){return this.__data__.has(P)}function eM(P,A){var I=this.__data__;if(I instanceof On){var z=I.__data__;if(!ca||z.length<e-1)return z.push([P,A]),this.size=++I.size,this;I=this.__data__=new Ln(z)}return I.set(P,A),this.size=I.size,this}Zi.prototype.clear=jP,Zi.prototype.delete=qP,Zi.prototype.get=_P,Zi.prototype.has=tM,Zi.prototype.set=eM;function bp(P,A){var I=Dt(P),z=!I&&Gs(P),$=!I&&!z&&is(P),k=!I&&!z&&!$&&mr(P),j=I||z||$||k,tt=j?Vu(P.length,fP):[],it=tt.length;for(var ht in P)(A||jt.call(P,ht))&&!(j&&(ht=="length"||$&&(ht=="offset"||ht=="parent")||k&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||Dn(ht,it)))&&tt.push(ht);return tt}function Np(P){var A=P.length;return A?P[rf(0,A-1)]:i}function iM(P,A){return Bh(je(P),Is(A,0,P.length))}function nM(P){return Bh(je(P))}function Ju(P,A,I){(I!==i&&!Ji(P[A],I)||I===i&&!(A in P))&&Fn(P,A,I)}function xa(P,A,I){var z=P[A];(!(jt.call(P,A)&&Ji(z,I))||I===i&&!(A in P))&&Fn(P,A,I)}function Ch(P,A){for(var I=P.length;I--;)if(Ji(P[I][0],A))return I;return-1}function sM(P,A,I,z){return qn(P,function($,k,j){A(z,$,I($),j)}),z}function Yp(P,A){return P&&fn(A,Me(A),P)}function rM(P,A){return P&&fn(A,_e(A),P)}function Fn(P,A,I){A=="__proto__"&&ph?ph(P,A,{configurable:!0,enumerable:!0,value:I,writable:!0}):P[A]=I}function Qu(P,A){for(var I=-1,z=A.length,$=st(z),k=P==null;++I<z;)$[I]=k?i:Ff(P,A[I]);return $}function Is(P,A,I){return P===P&&(I!==i&&(P=P<=I?P:I),A!==i&&(P=P>=A?P:A)),P}function Bi(P,A,I,z,$,k){var j,tt=A&u,it=A&c,ht=A&f;if(I&&(j=$?I(P,z,$,k):I(P)),j!==i)return j;if(!fe(P))return P;var lt=Dt(P);if(lt){if(j=ZM(P),!tt)return je(P,j)}else{var ft=Ne(P),pt=ft==at||ft==vt;if(is(P))return hg(P,tt);if(ft==Tt||ft==W||pt&&!$){if(j=it||pt?{}:Rg(P),!tt)return it?bM(P,rM(j,P)):GM(P,Yp(j,P))}else{if(!ne[ft])return $?P:{};j=JM(P,ft,tt)}}k||(k=new Zi);var St=k.get(P);if(St)return St;k.set(P,j),i0(P)?P.forEach(function(Lt){j.add(Bi(Lt,A,I,Lt,P,k))}):t0(P)&&P.forEach(function(Lt,Nt){j.set(Nt,Bi(Lt,A,I,Nt,P,k))});var Ot=ht?it?gf:pf:it?_e:Me,Gt=lt?i:Ot(P);return Ii(Gt||P,function(Lt,Nt){Gt&&(Nt=Lt,Lt=P[Nt]),xa(j,Nt,Bi(Lt,A,I,Nt,P,k))}),j}function aM(P){var A=Me(P);return function(I){return zp(I,P,A)}}function zp(P,A,I){var z=I.length;if(P==null)return!z;for(P=Zt(P);z--;){var $=I[z],k=A[$],j=P[$];if(j===i&&!($ in P)||!k(j))return!1}return!0}function Up(P,A,I){if(typeof P!="function")throw new wi(h);return Ma(function(){P.apply(i,I)},A)}function ya(P,A,I,z){var $=-1,k=sh,j=!0,tt=P.length,it=[],ht=A.length;if(!tt)return it;I&&(A=oe(A,mi(I))),z?(k=Gu,j=!1):A.length>=e&&(k=da,j=!1,A=new Fs(A));t:for(;++$<tt;){var lt=P[$],ft=I==null?lt:I(lt);if(lt=z||lt!==0?lt:0,j&&ft===ft){for(var pt=ht;pt--;)if(A[pt]===ft)continue t;it.push(lt)}else k(A,ft,z)||it.push(lt)}return it}var qn=vg(un),Vp=vg(ju,!0);function oM(P,A){var I=!0;return qn(P,function(z,$,k){return I=!!A(z,$,k),I}),I}function Sh(P,A,I){for(var z=-1,$=P.length;++z<$;){var k=P[z],j=A(k);if(j!=null&&(tt===i?j===j&&!yi(j):I(j,tt)))var tt=j,it=k}return it}function hM(P,A,I,z){var $=P.length;for(I=Bt(I),I<0&&(I=-I>$?0:$+I),z=z===i||z>$?$:Bt(z),z<0&&(z+=$),z=I>z?0:s0(z);I<z;)P[I++]=A;return P}function Wp(P,A){var I=[];return qn(P,function(z,$,k){A(z,$,k)&&I.push(z)}),I}function Ie(P,A,I,z,$){var k=-1,j=P.length;for(I||(I=kM),$||($=[]);++k<j;){var tt=P[k];A>0&&I(tt)?A>1?Ie(tt,A-1,I,z,$):Qn($,tt):z||($[$.length]=tt)}return $}var ku=cg(),Xp=cg(!0);function un(P,A){return P&&ku(P,A,Me)}function ju(P,A){return P&&Xp(P,A,Me)}function Eh(P,A){return Jn(A,function(I){return Bn(P[I])})}function ws(P,A){A=ts(A,P);for(var I=0,z=A.length;P!=null&&I<z;)P=P[dn(A[I++])];return I&&I==z?P:i}function Hp(P,A,I){var z=A(P);return Dt(P)?z:Qn(z,I(P))}function $e(P){return P==null?P===i?Ge:Ft:Os&&Os in Zt(P)?HM(P):nA(P)}function qu(P,A){return P>A}function lM(P,A){return P!=null&&jt.call(P,A)}function uM(P,A){return P!=null&&A in Zt(P)}function fM(P,A,I){return P>=be(A,I)&&P<ye(A,I)}function _u(P,A,I){for(var z=I?Gu:sh,$=P[0].length,k=P.length,j=k,tt=st(k),it=Infinity,ht=[];j--;){var lt=P[j];j&&A&&(lt=oe(lt,mi(A))),it=be(lt.length,it),tt[j]=!I&&(A||$>=120&&lt.length>=120)?new Fs(j&&lt):i}lt=P[0];var ft=-1,pt=tt[0];t:for(;++ft<$&&ht.length<it;){var St=lt[ft],Ot=A?A(St):St;if(St=I||St!==0?St:0,!(pt?da(pt,Ot):z(ht,Ot,I))){for(j=k;--j;){var Gt=tt[j];if(!(Gt?da(Gt,Ot):z(P[j],Ot,I)))continue t}pt&&pt.push(Ot),ht.push(St)}}return ht}function dM(P,A,I,z){return un(P,function($,k,j){A(z,I($),k,j)}),z}function Ta(P,A,I){A=ts(A,P),P=Ig(P,A);var z=P==null?P:P[dn(bi(A))];return z==null?i:gi(z,P,I)}function $p(P){return ve(P)&&$e(P)==W}function vM(P){return ve(P)&&$e(P)==ee}function cM(P){return ve(P)&&$e(P)==_}function Ca(P,A,I,z,$){return P===A?!0:P==null||A==null||!ve(P)&&!ve(A)?P!==P&&A!==A:pM(P,A,I,z,Ca,$)}function pM(P,A,I,z,$,k){var j=Dt(P),tt=Dt(A),it=j?H:Ne(P),ht=tt?H:Ne(A);it=it==W?Tt:it,ht=ht==W?Tt:ht;var lt=it==Tt,ft=ht==Tt,pt=it==ht;if(pt&&is(P)){if(!is(A))return!1;j=!0,lt=!1}if(pt&&!lt)return k||(k=new Zi),j||mr(P)?Pg(P,A,I,z,$,k):WM(P,A,it,I,z,$,k);if(!(I&v)){var St=lt&&jt.call(P,"__wrapped__"),Ot=ft&&jt.call(A,"__wrapped__");if(St||Ot){var Gt=St?P.value():P,Lt=Ot?A.value():A;return k||(k=new Zi),$(Gt,Lt,I,z,k)}}return pt?(k||(k=new Zi),XM(P,A,I,z,$,k)):!1}function gM(P){return ve(P)&&Ne(P)==ut}function tf(P,A,I,z){var $=I.length,k=$,j=!z;if(P==null)return!k;for(P=Zt(P);$--;){var tt=I[$];if(j&&tt[2]?tt[1]!==P[tt[0]]:!(tt[0]in P))return!1}for(;++$<k;){tt=I[$];var it=tt[0],ht=P[it],lt=tt[1];if(j&&tt[2]){if(ht===i&&!(it in P))return!1}else{var ft=new Zi;if(z)var pt=z(ht,lt,it,P,A,ft);if(!(pt===i?Ca(lt,ht,v|p,z,ft):pt))return!1}}return!0}function Kp(P){if(!fe(P)||qM(P))return!1;var A=Bn(P)?gP:aE;return A.test(Bs(P))}function mM(P){return ve(P)&&$e(P)==It}function xM(P){return ve(P)&&Ne(P)==gt}function yM(P){return ve(P)&&Uh(P.length)&&!!ae[$e(P)]}function Zp(P){return typeof P=="function"?P:P==null?ti:typeof P=="object"?Dt(P)?kp(P[0],P[1]):Qp(P):p0(P)}function ef(P){if(!Pa(P))return SP(P);var A=[];for(var I in Zt(P))jt.call(P,I)&&I!="constructor"&&A.push(I);return A}function TM(P){if(!fe(P))return iA(P);var A=Pa(P),I=[];for(var z in P)z=="constructor"&&(A||!jt.call(P,z))||I.push(z);return I}function nf(P,A){return P<A}function Jp(P,A){var I=-1,z=qe(P)?st(P.length):[];return qn(P,function($,k,j){z[++I]=A($,k,j)}),z}function Qp(P){var A=xf(P);return A.length==1&&A[0][2]?Lg(A[0][0],A[0][1]):function(I){return I===P||tf(I,P,A)}}function kp(P,A){return Tf(P)&&Og(A)?Lg(dn(P),A):function(I){var z=Ff(I,P);return z===i&&z===A?If(I,P):Ca(A,z,v|p)}}function Ph(P,A,I,z,$){P!==A&&ku(A,function(k,j){if($||($=new Zi),fe(k))CM(P,A,j,I,Ph,z,$);else{var tt=z?z(Sf(P,j),k,j+"",P,A,$):i;tt===i&&(tt=k),Ju(P,j,tt)}},_e)}function CM(P,A,I,z,$,k,j){var tt=Sf(P,I),it=Sf(A,I),ht=j.get(it);if(ht){Ju(P,I,ht);return}var lt=k?k(tt,it,I+"",P,A,j):i,ft=lt===i;if(ft){var pt=Dt(it),St=!pt&&is(it),Ot=!pt&&!St&&mr(it);lt=it,pt||St||Ot?Dt(tt)?lt=tt:ce(tt)?lt=je(tt):St?(ft=!1,lt=hg(it,!0)):Ot?(ft=!1,lt=lg(it,!0)):lt=[]:Aa(it)||Gs(it)?(lt=tt,Gs(tt)?lt=r0(tt):(!fe(tt)||Bn(tt))&&(lt=Rg(it))):ft=!1}ft&&(j.set(it,lt),$(lt,it,z,k,j),j.delete(it)),Ju(P,I,lt)}function jp(P,A){var I=P.length;if(!!I)return A+=A<0?I:0,Dn(A,I)?P[A]:i}function qp(P,A,I){A.length?A=oe(A,function(k){return Dt(k)?function(j){return ws(j,k.length===1?k[0]:k)}:k}):A=[ti];var z=-1;A=oe(A,mi(Rt()));var $=Jp(P,function(k,j,tt){var it=oe(A,function(ht){return ht(k)});return{criteria:it,index:++z,value:k}});return JE($,function(k,j){return BM(k,j,I)})}function SM(P,A){return _p(P,A,function(I,z){return If(P,z)})}function _p(P,A,I){for(var z=-1,$=A.length,k={};++z<$;){var j=A[z],tt=ws(P,j);I(tt,j)&&Sa(k,ts(j,P),tt)}return k}function EM(P){return function(A){return ws(A,P)}}function sf(P,A,I,z){var $=z?ZE:ar,k=-1,j=A.length,tt=P;for(P===A&&(A=je(A)),I&&(tt=oe(P,mi(I)));++k<j;)for(var it=0,ht=A[k],lt=I?I(ht):ht;(it=$(tt,lt,it,z))>-1;)tt!==P&&ch.call(tt,it,1),ch.call(P,it,1);return P}function tg(P,A){for(var I=P?A.length:0,z=I-1;I--;){var $=A[I];if(I==z||$!==k){var k=$;Dn($)?ch.call(P,$,1):hf(P,$)}}return P}function rf(P,A){return P+mh(Bp()*(A-P+1))}function PM(P,A,I,z){for(var $=-1,k=ye(gh((A-P)/(I||1)),0),j=st(k);k--;)j[z?k:++$]=P,P+=I;return j}function af(P,A){var I="";if(!P||A<1||A>K)return I;do A%2&&(I+=P),A=mh(A/2),A&&(P+=P);while(A);return I}function bt(P,A){return Ef(Fg(P,A,ti),P+"")}function MM(P){return Np(xr(P))}function AM(P,A){var I=xr(P);return Bh(I,Is(A,0,I.length))}function Sa(P,A,I,z){if(!fe(P))return P;A=ts(A,P);for(var $=-1,k=A.length,j=k-1,tt=P;tt!=null&&++$<k;){var it=dn(A[$]),ht=I;if(it==="__proto__"||it==="constructor"||it==="prototype")return P;if($!=j){var lt=tt[it];ht=z?z(lt,it,tt):i,ht===i&&(ht=fe(lt)?lt:Dn(A[$+1])?[]:{})}xa(tt,it,ht),tt=tt[it]}return P}var eg=xh?function(P,A){return xh.set(P,A),P}:ti,RM=ph?function(P,A){return ph(P,"toString",{configurable:!0,enumerable:!1,value:Df(A),writable:!0})}:ti;function OM(P){return Bh(xr(P))}function Gi(P,A,I){var z=-1,$=P.length;A<0&&(A=-A>$?0:$+A),I=I>$?$:I,I<0&&(I+=$),$=A>I?0:I-A>>>0,A>>>=0;for(var k=st($);++z<$;)k[z]=P[z+A];return k}function LM(P,A){var I;return qn(P,function(z,$,k){return I=A(z,$,k),!I}),!!I}function Mh(P,A,I){var z=0,$=P==null?z:P.length;if(typeof A=="number"&&A===A&&$<=Y){for(;z<$;){var k=z+$>>>1,j=P[k];j!==null&&!yi(j)&&(I?j<=A:j<A)?z=k+1:$=k}return $}return of(P,A,ti,I)}function of(P,A,I,z){var $=0,k=P==null?0:P.length;if(k===0)return 0;A=I(A);for(var j=A!==A,tt=A===null,it=yi(A),ht=A===i;$<k;){var lt=mh(($+k)/2),ft=I(P[lt]),pt=ft!==i,St=ft===null,Ot=ft===ft,Gt=yi(ft);if(j)var Lt=z||Ot;else ht?Lt=Ot&&(z||pt):tt?Lt=Ot&&pt&&(z||!St):it?Lt=Ot&&pt&&!St&&(z||!Gt):St||Gt?Lt=!1:Lt=z?ft<=A:ft<A;Lt?$=lt+1:k=lt}return be(k,b)}function ig(P,A){for(var I=-1,z=P.length,$=0,k=[];++I<z;){var j=P[I],tt=A?A(j):j;if(!I||!Ji(tt,it)){var it=tt;k[$++]=j===0?0:j}}return k}function ng(P){return typeof P=="number"?P:yi(P)?G:+P}function xi(P){if(typeof P=="string")return P;if(Dt(P))return oe(P,xi)+"";if(yi(P))return Gp?Gp.call(P):"";var A=P+"";return A=="0"&&1/P==-X?"-0":A}function _n(P,A,I){var z=-1,$=sh,k=P.length,j=!0,tt=[],it=tt;if(I)j=!1,$=Gu;else if(k>=e){var ht=A?null:UM(P);if(ht)return ah(ht);j=!1,$=da,it=new Fs}else it=A?[]:tt;t:for(;++z<k;){var lt=P[z],ft=A?A(lt):lt;if(lt=I||lt!==0?lt:0,j&&ft===ft){for(var pt=it.length;pt--;)if(it[pt]===ft)continue t;A&&it.push(ft),tt.push(lt)}else $(it,ft,I)||(it!==tt&&it.push(ft),tt.push(lt))}return tt}function hf(P,A){return A=ts(A,P),P=Ig(P,A),P==null||delete P[dn(bi(A))]}function sg(P,A,I,z){return Sa(P,A,I(ws(P,A)),z)}function Ah(P,A,I,z){for(var $=P.length,k=z?$:-1;(z?k--:++k<$)&&A(P[k],k,P););return I?Gi(P,z?0:k,z?k+1:$):Gi(P,z?k+1:0,z?$:k)}function rg(P,A){var I=P;return I instanceof Yt&&(I=I.value()),bu(A,function(z,$){return $.func.apply($.thisArg,Qn([z],$.args))},I)}function lf(P,A,I){var z=P.length;if(z<2)return z?_n(P[0]):[];for(var $=-1,k=st(z);++$<z;)for(var j=P[$],tt=-1;++tt<z;)tt!=$&&(k[$]=ya(k[$]||j,P[tt],A,I));return _n(Ie(k,1),A,I)}function ag(P,A,I){for(var z=-1,$=P.length,k=A.length,j={};++z<$;){var tt=z<k?A[z]:i;I(j,P[z],tt)}return j}function uf(P){return ce(P)?P:[]}function ff(P){return typeof P=="function"?P:ti}function ts(P,A){return Dt(P)?P:Tf(P,A)?[P]:Gg(Qt(P))}var FM=bt;function es(P,A,I){var z=P.length;return I=I===i?z:I,!A&&I>=z?P:Gi(P,A,I)}var og=mP||function(P){return Fe.clearTimeout(P)};function hg(P,A){if(A)return P.slice();var I=P.length,z=Lp?Lp(I):new P.constructor(I);return P.copy(z),z}function df(P){var A=new P.constructor(P.byteLength);return new dh(A).set(new dh(P)),A}function IM(P,A){var I=A?df(P.buffer):P.buffer;return new P.constructor(I,P.byteOffset,P.byteLength)}function wM(P){var A=new P.constructor(P.source,$c.exec(P));return A.lastIndex=P.lastIndex,A}function DM(P){return ma?Zt(ma.call(P)):{}}function lg(P,A){var I=A?df(P.buffer):P.buffer;return new P.constructor(I,P.byteOffset,P.length)}function ug(P,A){if(P!==A){var I=P!==i,z=P===null,$=P===P,k=yi(P),j=A!==i,tt=A===null,it=A===A,ht=yi(A);if(!tt&&!ht&&!k&&P>A||k&&j&&it&&!tt&&!ht||z&&j&&it||!I&&it||!$)return 1;if(!z&&!k&&!ht&&P<A||ht&&I&&$&&!z&&!k||tt&&I&&$||!j&&$||!it)return-1}return 0}function BM(P,A,I){for(var z=-1,$=P.criteria,k=A.criteria,j=$.length,tt=I.length;++z<j;){var it=ug($[z],k[z]);if(it){if(z>=tt)return it;var ht=I[z];return it*(ht=="desc"?-1:1)}}return P.index-A.index}function fg(P,A,I,z){for(var $=-1,k=P.length,j=I.length,tt=-1,it=A.length,ht=ye(k-j,0),lt=st(it+ht),ft=!z;++tt<it;)lt[tt]=A[tt];for(;++$<j;)(ft||$<k)&&(lt[I[$]]=P[$]);for(;ht--;)lt[tt++]=P[$++];return lt}function dg(P,A,I,z){for(var $=-1,k=P.length,j=-1,tt=I.length,it=-1,ht=A.length,lt=ye(k-tt,0),ft=st(lt+ht),pt=!z;++$<lt;)ft[$]=P[$];for(var St=$;++it<ht;)ft[St+it]=A[it];for(;++j<tt;)(pt||$<k)&&(ft[St+I[j]]=P[$++]);return ft}function je(P,A){var I=-1,z=P.length;for(A||(A=st(z));++I<z;)A[I]=P[I];return A}function fn(P,A,I,z){var $=!I;I||(I={});for(var k=-1,j=A.length;++k<j;){var tt=A[k],it=z?z(I[tt],P[tt],tt,I,P):i;it===i&&(it=P[tt]),$?Fn(I,tt,it):xa(I,tt,it)}return I}function GM(P,A){return fn(P,yf(P),A)}function bM(P,A){return fn(P,Mg(P),A)}function Rh(P,A){return function(I,z){var $=Dt(I)?VE:sM,k=A?A():{};return $(I,P,Rt(z,2),k)}}function cr(P){return bt(function(A,I){var z=-1,$=I.length,k=$>1?I[$-1]:i,j=$>2?I[2]:i;for(k=P.length>3&&typeof k=="function"?($--,k):i,j&&Ke(I[0],I[1],j)&&(k=$<3?i:k,$=1),A=Zt(A);++z<$;){var tt=I[z];tt&&P(A,tt,z,k)}return A})}function vg(P,A){return function(I,z){if(I==null)return I;if(!qe(I))return P(I,z);for(var $=I.length,k=A?$:-1,j=Zt(I);(A?k--:++k<$)&&z(j[k],k,j)!==!1;);return I}}function cg(P){return function(A,I,z){for(var $=-1,k=Zt(A),j=z(A),tt=j.length;tt--;){var it=j[P?tt:++$];if(I(k[it],it,k)===!1)break}return A}}function NM(P,A,I){var z=A&g,$=Ea(P);function k(){var j=this&&this!==Fe&&this instanceof k?$:P;return j.apply(z?I:this,arguments)}return k}function pg(P){return function(A){A=Qt(A);var I=or(A)?Ki(A):i,z=I?I[0]:A.charAt(0),$=I?es(I,1).join(""):A.slice(1);return z[P]()+$}}function pr(P){return function(A){return bu(v0(d0(A).replace(RE,"")),P,"")}}function Ea(P){return function(){var A=arguments;switch(A.length){case 0:return new P;case 1:return new P(A[0]);case 2:return new P(A[0],A[1]);case 3:return new P(A[0],A[1],A[2]);case 4:return new P(A[0],A[1],A[2],A[3]);case 5:return new P(A[0],A[1],A[2],A[3],A[4]);case 6:return new P(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new P(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var I=vr(P.prototype),z=P.apply(I,A);return fe(z)?z:I}}function YM(P,A,I){var z=Ea(P);function $(){for(var k=arguments.length,j=st(k),tt=k,it=gr($);tt--;)j[tt]=arguments[tt];var ht=k<3&&j[0]!==it&&j[k-1]!==it?[]:kn(j,it);if(k-=ht.length,k<I)return Tg(P,A,Oh,$.placeholder,i,j,ht,i,i,I-k);var lt=this&&this!==Fe&&this instanceof $?z:P;return gi(lt,this,j)}return $}function gg(P){return function(A,I,z){var $=Zt(A);if(!qe(A)){var k=Rt(I,3);A=Me(A),I=function(tt){return k($[tt],tt,$)}}var j=P(A,I,z);return j>-1?$[k?A[j]:j]:i}}function mg(P){return wn(function(A){var I=A.length,z=I,$=Di.prototype.thru;for(P&&A.reverse();z--;){var k=A[z];if(typeof k!="function")throw new wi(h);if($&&!j&&wh(k)=="wrapper")var j=new Di([],!0)}for(z=j?z:I;++z<I;){k=A[z];var tt=wh(k),it=tt=="wrapper"?mf(k):i;it&&Cf(it[0])&&it[1]==(E|y|C|M)&&!it[4].length&&it[9]==1?j=j[wh(it[0])].apply(j,it[3]):j=k.length==1&&Cf(k)?j[tt]():j.thru(k)}return function(){var ht=arguments,lt=ht[0];if(j&&ht.length==1&&Dt(lt))return j.plant(lt).value();for(var ft=0,pt=I?A[ft].apply(this,ht):lt;++ft<I;)pt=A[ft].call(this,pt);return pt}})}function Oh(P,A,I,z,$,k,j,tt,it,ht){var lt=A&E,ft=A&g,pt=A&m,St=A&(y|T),Ot=A&R,Gt=pt?i:Ea(P);function Lt(){for(var Nt=arguments.length,Vt=st(Nt),Ti=Nt;Ti--;)Vt[Ti]=arguments[Ti];if(St)var Ze=gr(Lt),Ci=kE(Vt,Ze);if(z&&(Vt=fg(Vt,z,$,St)),k&&(Vt=dg(Vt,k,j,St)),Nt-=Ci,St&&Nt<ht){var pe=kn(Vt,Ze);return Tg(P,A,Oh,Lt.placeholder,I,Vt,pe,tt,it,ht-Nt)}var Qi=ft?I:this,bn=pt?Qi[P]:P;return Nt=Vt.length,tt?Vt=sA(Vt,tt):Ot&&Nt>1&&Vt.reverse(),lt&&it<Nt&&(Vt.length=it),this&&this!==Fe&&this instanceof Lt&&(bn=Gt||Ea(bn)),bn.apply(Qi,Vt)}return Lt}function xg(P,A){return function(I,z){return dM(I,P,A(z),{})}}function Lh(P,A){return function(I,z){var $;if(I===i&&z===i)return A;if(I!==i&&($=I),z!==i){if($===i)return z;typeof I=="string"||typeof z=="string"?(I=xi(I),z=xi(z)):(I=ng(I),z=ng(z)),$=P(I,z)}return $}}function vf(P){return wn(function(A){return A=oe(A,mi(Rt())),bt(function(I){var z=this;return P(A,function($){return gi($,z,I)})})})}function Fh(P,A){A=A===i?" ":xi(A);var I=A.length;if(I<2)return I?af(A,P):A;var z=af(A,gh(P/hr(A)));return or(A)?es(Ki(z),0,P).join(""):z.slice(0,P)}function zM(P,A,I,z){var $=A&g,k=Ea(P);function j(){for(var tt=-1,it=arguments.length,ht=-1,lt=z.length,ft=st(lt+it),pt=this&&this!==Fe&&this instanceof j?k:P;++ht<lt;)ft[ht]=z[ht];for(;it--;)ft[ht++]=arguments[++tt];return gi(pt,$?I:this,ft)}return j}function yg(P){return function(A,I,z){return z&&typeof z!="number"&&Ke(A,I,z)&&(I=z=i),A=Gn(A),I===i?(I=A,A=0):I=Gn(I),z=z===i?A<I?1:-1:Gn(z),PM(A,I,z,P)}}function Ih(P){return function(A,I){return typeof A=="string"&&typeof I=="string"||(A=Ni(A),I=Ni(I)),P(A,I)}}function Tg(P,A,I,z,$,k,j,tt,it,ht){var lt=A&y,ft=lt?j:i,pt=lt?i:j,St=lt?k:i,Ot=lt?i:k;A|=lt?C:S,A&=~(lt?S:C),A&x||(A&=~(g|m));var Gt=[P,A,$,St,ft,Ot,pt,tt,it,ht],Lt=I.apply(i,Gt);return Cf(P)&&wg(Lt,Gt),Lt.placeholder=z,Dg(Lt,P,A)}function cf(P){var A=he[P];return function(I,z){if(I=Ni(I),z=z==null?0:be(Bt(z),292),z&&Dp(I)){var $=(Qt(I)+"e").split("e"),k=A($[0]+"e"+(+$[1]+z));return $=(Qt(k)+"e").split("e"),+($[0]+"e"+(+$[1]-z))}return A(I)}}var UM=fr&&1/ah(new fr([,-0]))[1]==X?function(P){return new fr(P)}:bf;function Cg(P){return function(A){var I=Ne(A);return I==ut?Xu(A):I==gt?nP(A):QE(A,P(A))}}function In(P,A,I,z,$,k,j,tt){var it=A&m;if(!it&&typeof P!="function")throw new wi(h);var ht=z?z.length:0;if(ht||(A&=~(C|S),z=$=i),j=j===i?j:ye(Bt(j),0),tt=tt===i?tt:Bt(tt),ht-=$?$.length:0,A&S){var lt=z,ft=$;z=$=i}var pt=it?i:mf(P),St=[P,A,I,z,$,lt,ft,k,j,tt];if(pt&&eA(St,pt),P=St[0],A=St[1],I=St[2],z=St[3],$=St[4],tt=St[9]=St[9]===i?it?0:P.length:ye(St[9]-ht,0),!tt&&A&(y|T)&&(A&=~(y|T)),!A||A==g)var Ot=NM(P,A,I);else A==y||A==T?Ot=YM(P,A,tt):(A==C||A==(g|C))&&!$.length?Ot=zM(P,A,I,z):Ot=Oh.apply(i,St);var Gt=pt?eg:wg;return Dg(Gt(Ot,St),P,A)}function Sg(P,A,I,z){return P===i||Ji(P,ur[I])&&!jt.call(z,I)?A:P}function Eg(P,A,I,z,$,k){return fe(P)&&fe(A)&&(k.set(A,P),Ph(P,A,i,Eg,k),k.delete(A)),P}function VM(P){return Aa(P)?i:P}function Pg(P,A,I,z,$,k){var j=I&v,tt=P.length,it=A.length;if(tt!=it&&!(j&&it>tt))return!1;var ht=k.get(P),lt=k.get(A);if(ht&&lt)return ht==A&&lt==P;var ft=-1,pt=!0,St=I&p?new Fs:i;for(k.set(P,A),k.set(A,P);++ft<tt;){var Ot=P[ft],Gt=A[ft];if(z)var Lt=j?z(Gt,Ot,ft,A,P,k):z(Ot,Gt,ft,P,A,k);if(Lt!==i){if(Lt)continue;pt=!1;break}if(St){if(!Nu(A,function(Nt,Vt){if(!da(St,Vt)&&(Ot===Nt||$(Ot,Nt,I,z,k)))return St.push(Vt)})){pt=!1;break}}else if(!(Ot===Gt||$(Ot,Gt,I,z,k))){pt=!1;break}}return k.delete(P),k.delete(A),pt}function WM(P,A,I,z,$,k,j){switch(I){case qt:if(P.byteLength!=A.byteLength||P.byteOffset!=A.byteOffset)return!1;P=P.buffer,A=A.buffer;case ee:return!(P.byteLength!=A.byteLength||!k(new dh(P),new dh(A)));case q:case _:case ct:return Ji(+P,+A);case rt:return P.name==A.name&&P.message==A.message;case It:case Pt:return P==A+"";case ut:var tt=Xu;case gt:var it=z&v;if(tt||(tt=ah),P.size!=A.size&&!it)return!1;var ht=j.get(P);if(ht)return ht==A;z|=p,j.set(P,A);var lt=Pg(tt(P),tt(A),z,$,k,j);return j.delete(P),lt;case xe:if(ma)return ma.call(P)==ma.call(A)}return!1}function XM(P,A,I,z,$,k){var j=I&v,tt=pf(P),it=tt.length,ht=pf(A),lt=ht.length;if(it!=lt&&!j)return!1;for(var ft=it;ft--;){var pt=tt[ft];if(!(j?pt in A:jt.call(A,pt)))return!1}var St=k.get(P),Ot=k.get(A);if(St&&Ot)return St==A&&Ot==P;var Gt=!0;k.set(P,A),k.set(A,P);for(var Lt=j;++ft<it;){pt=tt[ft];var Nt=P[pt],Vt=A[pt];if(z)var Ti=j?z(Vt,Nt,pt,A,P,k):z(Nt,Vt,pt,P,A,k);if(!(Ti===i?Nt===Vt||$(Nt,Vt,I,z,k):Ti)){Gt=!1;break}Lt||(Lt=pt=="constructor")}if(Gt&&!Lt){var Ze=P.constructor,Ci=A.constructor;Ze!=Ci&&"constructor"in P&&"constructor"in A&&!(typeof Ze=="function"&&Ze instanceof Ze&&typeof Ci=="function"&&Ci instanceof Ci)&&(Gt=!1)}return k.delete(P),k.delete(A),Gt}function wn(P){return Ef(Fg(P,i,zg),P+"")}function pf(P){return Hp(P,Me,yf)}function gf(P){return Hp(P,_e,Mg)}var mf=xh?function(P){return xh.get(P)}:bf;function wh(P){for(var A=P.name+"",I=dr[A],z=jt.call(dr,A)?I.length:0;z--;){var $=I[z],k=$.func;if(k==null||k==P)return $.name}return A}function gr(P){var A=jt.call(Q,"placeholder")?Q:P;return A.placeholder}function Rt(){var P=Q.iteratee||Bf;return P=P===Bf?Zp:P,arguments.length?P(arguments[0],arguments[1]):P}function Dh(P,A){var I=P.__data__;return jM(A)?I[typeof A=="string"?"string":"hash"]:I.map}function xf(P){for(var A=Me(P),I=A.length;I--;){var z=A[I],$=P[z];A[I]=[z,$,Og($)]}return A}function Ds(P,A){var I=tP(P,A);return Kp(I)?I:i}function HM(P){var A=jt.call(P,Os),I=P[Os];try{P[Os]=i;var z=!0}catch(k){}var $=uh.call(P);return z&&(A?P[Os]=I:delete P[Os]),$}var yf=$u?function(P){return P==null?[]:(P=Zt(P),Jn($u(P),function(A){return Ip.call(P,A)}))}:Nf,Mg=$u?function(P){for(var A=[];P;)Qn(A,yf(P)),P=vh(P);return A}:Nf,Ne=$e;(Ku&&Ne(new Ku(new ArrayBuffer(1)))!=qt||ca&&Ne(new ca)!=ut||Zu&&Ne(Zu.resolve())!=Ct||fr&&Ne(new fr)!=gt||pa&&Ne(new pa)!=$t)&&(Ne=function(P){var A=$e(P),I=A==Tt?P.constructor:i,z=I?Bs(I):"";if(z)switch(z){case AP:return qt;case RP:return ut;case OP:return Ct;case LP:return gt;case FP:return $t}return A});function $M(P,A,I){for(var z=-1,$=I.length;++z<$;){var k=I[z],j=k.size;switch(k.type){case"drop":P+=j;break;case"dropRight":A-=j;break;case"take":A=be(A,P+j);break;case"takeRight":P=ye(P,A-j);break}}return{start:P,end:A}}function KM(P){var A=P.match(qS);return A?A[1].split(_S):[]}function Ag(P,A,I){A=ts(A,P);for(var z=-1,$=A.length,k=!1;++z<$;){var j=dn(A[z]);if(!(k=P!=null&&I(P,j)))break;P=P[j]}return k||++z!=$?k:($=P==null?0:P.length,!!$&&Uh($)&&Dn(j,$)&&(Dt(P)||Gs(P)))}function ZM(P){var A=P.length,I=new P.constructor(A);return A&&typeof P[0]=="string"&&jt.call(P,"index")&&(I.index=P.index,I.input=P.input),I}function Rg(P){return typeof P.constructor=="function"&&!Pa(P)?vr(vh(P)):{}}function JM(P,A,I){var z=P.constructor;switch(A){case ee:return df(P);case q:case _:return new z(+P);case qt:return IM(P,I);case ie:case Pe:case ui:case fi:case di:case vi:case ci:case pi:case fa:return lg(P,I);case ut:return new z;case ct:case Pt:return new z(P);case It:return wM(P);case gt:return new z;case xe:return DM(P)}}function QM(P,A){var I=A.length;if(!I)return P;var z=I-1;return A[z]=(I>1?"& ":"")+A[z],A=A.join(I>2?", ":" "),P.replace(jS,`{
/* [wrapped with `+A+`] */
`)}function kM(P){return Dt(P)||Gs(P)||!!(wp&&P&&P[wp])}function Dn(P,A){var I=typeof P;return A=A==null?K:A,!!A&&(I=="number"||I!="symbol"&&hE.test(P))&&P>-1&&P%1==0&&P<A}function Ke(P,A,I){if(!fe(I))return!1;var z=typeof A;return(z=="number"?qe(I)&&Dn(A,I.length):z=="string"&&A in I)?Ji(I[A],P):!1}function Tf(P,A){if(Dt(P))return!1;var I=typeof P;return I=="number"||I=="symbol"||I=="boolean"||P==null||yi(P)?!0:ZS.test(P)||!KS.test(P)||A!=null&&P in Zt(A)}function jM(P){var A=typeof P;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?P!=="__proto__":P===null}function Cf(P){var A=wh(P),I=Q[A];if(typeof I!="function"||!(A in Yt.prototype))return!1;if(P===I)return!0;var z=mf(I);return!!z&&P===z[0]}function qM(P){return!!Op&&Op in P}var _M=hh?Bn:Yf;function Pa(P){var A=P&&P.constructor,I=typeof A=="function"&&A.prototype||ur;return P===I}function Og(P){return P===P&&!fe(P)}function Lg(P,A){return function(I){return I==null?!1:I[P]===A&&(A!==i||P in Zt(I))}}function tA(P){var A=Yh(P,function(z){return I.size===l&&I.clear(),z}),I=A.cache;return A}function eA(P,A){var I=P[1],z=A[1],$=I|z,k=$<(g|m|E),j=z==E&&I==y||z==E&&I==M&&P[7].length<=A[8]||z==(E|M)&&A[7].length<=A[8]&&I==y;if(!(k||j))return P;z&g&&(P[2]=A[2],$|=I&g?0:x);var tt=A[3];if(tt){var it=P[3];P[3]=it?fg(it,tt,A[4]):tt,P[4]=it?kn(P[3],a):A[4]}return tt=A[5],tt&&(it=P[5],P[5]=it?dg(it,tt,A[6]):tt,P[6]=it?kn(P[5],a):A[6]),tt=A[7],tt&&(P[7]=tt),z&E&&(P[8]=P[8]==null?A[8]:be(P[8],A[8])),P[9]==null&&(P[9]=A[9]),P[0]=A[0],P[1]=$,P}function iA(P){var A=[];if(P!=null)for(var I in Zt(P))A.push(I);return A}function nA(P){return uh.call(P)}function Fg(P,A,I){return A=ye(A===i?P.length-1:A,0),function(){for(var z=arguments,$=-1,k=ye(z.length-A,0),j=st(k);++$<k;)j[$]=z[A+$];$=-1;for(var tt=st(A+1);++$<A;)tt[$]=z[$];return tt[A]=I(j),gi(P,this,tt)}}function Ig(P,A){return A.length<2?P:ws(P,Gi(A,0,-1))}function sA(P,A){for(var I=P.length,z=be(A.length,I),$=je(P);z--;){var k=A[z];P[z]=Dn(k,I)?$[k]:i}return P}function Sf(P,A){if(!(A==="constructor"&&typeof P[A]=="function")&&A!="__proto__")return P[A]}var wg=Bg(eg),Ma=yP||function(P,A){return Fe.setTimeout(P,A)},Ef=Bg(RM);function Dg(P,A,I){var z=A+"";return Ef(P,QM(z,rA(KM(z),I)))}function Bg(P){var A=0,I=0;return function(){var z=EP(),$=D-(z-I);if(I=z,$>0){if(++A>=F)return arguments[0]}else A=0;return P.apply(i,arguments)}}function Bh(P,A){var I=-1,z=P.length,$=z-1;for(A=A===i?z:A;++I<A;){var k=rf(I,$),j=P[k];P[k]=P[I],P[I]=j}return P.length=A,P}var Gg=tA(function(P){var A=[];return P.charCodeAt(0)===46&&A.push(""),P.replace(JS,function(I,z,$,k){A.push($?k.replace(iE,"$1"):z||I)}),A});function dn(P){if(typeof P=="string"||yi(P))return P;var A=P+"";return A=="0"&&1/P==-X?"-0":A}function Bs(P){if(P!=null){try{return lh.call(P)}catch(A){}try{return P+""}catch(A){}}return""}function rA(P,A){return Ii(U,function(I){var z="_."+I[0];A&I[1]&&!sh(P,z)&&P.push(z)}),P.sort()}function bg(P){if(P instanceof Yt)return P.clone();var A=new Di(P.__wrapped__,P.__chain__);return A.__actions__=je(P.__actions__),A.__index__=P.__index__,A.__values__=P.__values__,A}function aA(P,A,I){(I?Ke(P,A,I):A===i)?A=1:A=ye(Bt(A),0);var z=P==null?0:P.length;if(!z||A<1)return[];for(var $=0,k=0,j=st(gh(z/A));$<z;)j[k++]=Gi(P,$,$+=A);return j}function oA(P){for(var A=-1,I=P==null?0:P.length,z=0,$=[];++A<I;){var k=P[A];k&&($[z++]=k)}return $}function hA(){var P=arguments.length;if(!P)return[];for(var A=st(P-1),I=arguments[0],z=P;z--;)A[z-1]=arguments[z];return Qn(Dt(I)?je(I):[I],Ie(A,1))}var lA=bt(function(P,A){return ce(P)?ya(P,Ie(A,1,ce,!0)):[]}),uA=bt(function(P,A){var I=bi(A);return ce(I)&&(I=i),ce(P)?ya(P,Ie(A,1,ce,!0),Rt(I,2)):[]}),fA=bt(function(P,A){var I=bi(A);return ce(I)&&(I=i),ce(P)?ya(P,Ie(A,1,ce,!0),i,I):[]});function dA(P,A,I){var z=P==null?0:P.length;return z?(A=I||A===i?1:Bt(A),Gi(P,A<0?0:A,z)):[]}function vA(P,A,I){var z=P==null?0:P.length;return z?(A=I||A===i?1:Bt(A),A=z-A,Gi(P,0,A<0?0:A)):[]}function cA(P,A){return P&&P.length?Ah(P,Rt(A,3),!0,!0):[]}function pA(P,A){return P&&P.length?Ah(P,Rt(A,3),!0):[]}function gA(P,A,I,z){var $=P==null?0:P.length;return $?(I&&typeof I!="number"&&Ke(P,A,I)&&(I=0,z=$),hM(P,A,I,z)):[]}function Ng(P,A,I){var z=P==null?0:P.length;if(!z)return-1;var $=I==null?0:Bt(I);return $<0&&($=ye(z+$,0)),rh(P,Rt(A,3),$)}function Yg(P,A,I){var z=P==null?0:P.length;if(!z)return-1;var $=z-1;return I!==i&&($=Bt(I),$=I<0?ye(z+$,0):be($,z-1)),rh(P,Rt(A,3),$,!0)}function zg(P){var A=P==null?0:P.length;return A?Ie(P,1):[]}function mA(P){var A=P==null?0:P.length;return A?Ie(P,X):[]}function xA(P,A){var I=P==null?0:P.length;return I?(A=A===i?1:Bt(A),Ie(P,A)):[]}function yA(P){for(var A=-1,I=P==null?0:P.length,z={};++A<I;){var $=P[A];z[$[0]]=$[1]}return z}function Ug(P){return P&&P.length?P[0]:i}function TA(P,A,I){var z=P==null?0:P.length;if(!z)return-1;var $=I==null?0:Bt(I);return $<0&&($=ye(z+$,0)),ar(P,A,$)}function CA(P){var A=P==null?0:P.length;return A?Gi(P,0,-1):[]}var SA=bt(function(P){var A=oe(P,uf);return A.length&&A[0]===P[0]?_u(A):[]}),EA=bt(function(P){var A=bi(P),I=oe(P,uf);return A===bi(I)?A=i:I.pop(),I.length&&I[0]===P[0]?_u(I,Rt(A,2)):[]}),PA=bt(function(P){var A=bi(P),I=oe(P,uf);return A=typeof A=="function"?A:i,A&&I.pop(),I.length&&I[0]===P[0]?_u(I,i,A):[]});function MA(P,A){return P==null?"":CP.call(P,A)}function bi(P){var A=P==null?0:P.length;return A?P[A-1]:i}function AA(P,A,I){var z=P==null?0:P.length;if(!z)return-1;var $=z;return I!==i&&($=Bt(I),$=$<0?ye(z+$,0):be($,z-1)),A===A?rP(P,A,$):rh(P,Tp,$,!0)}function RA(P,A){return P&&P.length?jp(P,Bt(A)):i}var OA=bt(Vg);function Vg(P,A){return P&&P.length&&A&&A.length?sf(P,A):P}function LA(P,A,I){return P&&P.length&&A&&A.length?sf(P,A,Rt(I,2)):P}function FA(P,A,I){return P&&P.length&&A&&A.length?sf(P,A,i,I):P}var IA=wn(function(P,A){var I=P==null?0:P.length,z=Qu(P,A);return tg(P,oe(A,function($){return Dn($,I)?+$:$}).sort(ug)),z});function wA(P,A){var I=[];if(!(P&&P.length))return I;var z=-1,$=[],k=P.length;for(A=Rt(A,3);++z<k;){var j=P[z];A(j,z,P)&&(I.push(j),$.push(z))}return tg(P,$),I}function Pf(P){return P==null?P:MP.call(P)}function DA(P,A,I){var z=P==null?0:P.length;return z?(I&&typeof I!="number"&&Ke(P,A,I)?(A=0,I=z):(A=A==null?0:Bt(A),I=I===i?z:Bt(I)),Gi(P,A,I)):[]}function BA(P,A){return Mh(P,A)}function GA(P,A,I){return of(P,A,Rt(I,2))}function bA(P,A){var I=P==null?0:P.length;if(I){var z=Mh(P,A);if(z<I&&Ji(P[z],A))return z}return-1}function NA(P,A){return Mh(P,A,!0)}function YA(P,A,I){return of(P,A,Rt(I,2),!0)}function zA(P,A){var I=P==null?0:P.length;if(I){var z=Mh(P,A,!0)-1;if(Ji(P[z],A))return z}return-1}function UA(P){return P&&P.length?ig(P):[]}function VA(P,A){return P&&P.length?ig(P,Rt(A,2)):[]}function WA(P){var A=P==null?0:P.length;return A?Gi(P,1,A):[]}function XA(P,A,I){return P&&P.length?(A=I||A===i?1:Bt(A),Gi(P,0,A<0?0:A)):[]}function HA(P,A,I){var z=P==null?0:P.length;return z?(A=I||A===i?1:Bt(A),A=z-A,Gi(P,A<0?0:A,z)):[]}function $A(P,A){return P&&P.length?Ah(P,Rt(A,3),!1,!0):[]}function KA(P,A){return P&&P.length?Ah(P,Rt(A,3)):[]}var ZA=bt(function(P){return _n(Ie(P,1,ce,!0))}),JA=bt(function(P){var A=bi(P);return ce(A)&&(A=i),_n(Ie(P,1,ce,!0),Rt(A,2))}),QA=bt(function(P){var A=bi(P);return A=typeof A=="function"?A:i,_n(Ie(P,1,ce,!0),i,A)});function kA(P){return P&&P.length?_n(P):[]}function jA(P,A){return P&&P.length?_n(P,Rt(A,2)):[]}function qA(P,A){return A=typeof A=="function"?A:i,P&&P.length?_n(P,i,A):[]}function Mf(P){if(!(P&&P.length))return[];var A=0;return P=Jn(P,function(I){if(ce(I))return A=ye(I.length,A),!0}),Vu(A,function(I){return oe(P,Yu(I))})}function Wg(P,A){if(!(P&&P.length))return[];var I=Mf(P);return A==null?I:oe(I,function(z){return gi(A,i,z)})}var _A=bt(function(P,A){return ce(P)?ya(P,A):[]}),tR=bt(function(P){return lf(Jn(P,ce))}),eR=bt(function(P){var A=bi(P);return ce(A)&&(A=i),lf(Jn(P,ce),Rt(A,2))}),iR=bt(function(P){var A=bi(P);return A=typeof A=="function"?A:i,lf(Jn(P,ce),i,A)}),nR=bt(Mf);function sR(P,A){return ag(P||[],A||[],xa)}function rR(P,A){return ag(P||[],A||[],Sa)}var aR=bt(function(P){var A=P.length,I=A>1?P[A-1]:i;return I=typeof I=="function"?(P.pop(),I):i,Wg(P,I)});function Xg(P){var A=Q(P);return A.__chain__=!0,A}function oR(P,A){return A(P),P}function Gh(P,A){return A(P)}var hR=wn(function(P){var A=P.length,I=A?P[0]:0,z=this.__wrapped__,$=function(k){return Qu(k,P)};return A>1||this.__actions__.length||!(z instanceof Yt)||!Dn(I)?this.thru($):(z=z.slice(I,+I+(A?1:0)),z.__actions__.push({func:Gh,args:[$],thisArg:i}),new Di(z,this.__chain__).thru(function(k){return A&&!k.length&&k.push(i),k}))});function lR(){return Xg(this)}function uR(){return new Di(this.value(),this.__chain__)}function fR(){this.__values__===i&&(this.__values__=n0(this.value()));var P=this.__index__>=this.__values__.length,A=P?i:this.__values__[this.__index__++];return{done:P,value:A}}function dR(){return this}function vR(P){for(var A,I=this;I instanceof Th;){var z=bg(I);z.__index__=0,z.__values__=i,A?$.__wrapped__=z:A=z;var $=z;I=I.__wrapped__}return $.__wrapped__=P,A}function cR(){var P=this.__wrapped__;if(P instanceof Yt){var A=P;return this.__actions__.length&&(A=new Yt(this)),A=A.reverse(),A.__actions__.push({func:Gh,args:[Pf],thisArg:i}),new Di(A,this.__chain__)}return this.thru(Pf)}function pR(){return rg(this.__wrapped__,this.__actions__)}var gR=Rh(function(P,A,I){jt.call(P,I)?++P[I]:Fn(P,I,1)});function mR(P,A,I){var z=Dt(P)?xp:oM;return I&&Ke(P,A,I)&&(A=i),z(P,Rt(A,3))}function xR(P,A){var I=Dt(P)?Jn:Wp;return I(P,Rt(A,3))}var yR=gg(Ng),TR=gg(Yg);function CR(P,A){return Ie(bh(P,A),1)}function SR(P,A){return Ie(bh(P,A),X)}function ER(P,A,I){return I=I===i?1:Bt(I),Ie(bh(P,A),I)}function Hg(P,A){var I=Dt(P)?Ii:qn;return I(P,Rt(A,3))}function $g(P,A){var I=Dt(P)?WE:Vp;return I(P,Rt(A,3))}var PR=Rh(function(P,A,I){jt.call(P,I)?P[I].push(A):Fn(P,I,[A])});function MR(P,A,I,z){P=qe(P)?P:xr(P),I=I&&!z?Bt(I):0;var $=P.length;return I<0&&(I=ye($+I,0)),Vh(P)?I<=$&&P.indexOf(A,I)>-1:!!$&&ar(P,A,I)>-1}var AR=bt(function(P,A,I){var z=-1,$=typeof A=="function",k=qe(P)?st(P.length):[];return qn(P,function(j){k[++z]=$?gi(A,j,I):Ta(j,A,I)}),k}),RR=Rh(function(P,A,I){Fn(P,I,A)});function bh(P,A){var I=Dt(P)?oe:Jp;return I(P,Rt(A,3))}function OR(P,A,I,z){return P==null?[]:(Dt(A)||(A=A==null?[]:[A]),I=z?i:I,Dt(I)||(I=I==null?[]:[I]),qp(P,A,I))}var LR=Rh(function(P,A,I){P[I?0:1].push(A)},function(){return[[],[]]});function FR(P,A,I){var z=Dt(P)?bu:Sp,$=arguments.length<3;return z(P,Rt(A,4),I,$,qn)}function IR(P,A,I){var z=Dt(P)?XE:Sp,$=arguments.length<3;return z(P,Rt(A,4),I,$,Vp)}function wR(P,A){var I=Dt(P)?Jn:Wp;return I(P,zh(Rt(A,3)))}function DR(P){var A=Dt(P)?Np:MM;return A(P)}function BR(P,A,I){(I?Ke(P,A,I):A===i)?A=1:A=Bt(A);var z=Dt(P)?iM:AM;return z(P,A)}function GR(P){var A=Dt(P)?nM:OM;return A(P)}function bR(P){if(P==null)return 0;if(qe(P))return Vh(P)?hr(P):P.length;var A=Ne(P);return A==ut||A==gt?P.size:ef(P).length}function NR(P,A,I){var z=Dt(P)?Nu:LM;return I&&Ke(P,A,I)&&(A=i),z(P,Rt(A,3))}var YR=bt(function(P,A){if(P==null)return[];var I=A.length;return I>1&&Ke(P,A[0],A[1])?A=[]:I>2&&Ke(A[0],A[1],A[2])&&(A=[A[0]]),qp(P,Ie(A,1),[])}),Nh=xP||function(){return Fe.Date.now()};function zR(P,A){if(typeof A!="function")throw new wi(h);return P=Bt(P),function(){if(--P<1)return A.apply(this,arguments)}}function Kg(P,A,I){return A=I?i:A,A=P&&A==null?P.length:A,In(P,E,i,i,i,i,A)}function Zg(P,A){var I;if(typeof A!="function")throw new wi(h);return P=Bt(P),function(){return--P>0&&(I=A.apply(this,arguments)),P<=1&&(A=i),I}}var Af=bt(function(P,A,I){var z=g;if(I.length){var $=kn(I,gr(Af));z|=C}return In(P,z,A,I,$)}),Jg=bt(function(P,A,I){var z=g|m;if(I.length){var $=kn(I,gr(Jg));z|=C}return In(A,z,P,I,$)});function Qg(P,A,I){A=I?i:A;var z=In(P,y,i,i,i,i,i,A);return z.placeholder=Qg.placeholder,z}function kg(P,A,I){A=I?i:A;var z=In(P,T,i,i,i,i,i,A);return z.placeholder=kg.placeholder,z}function jg(P,A,I){var z,$,k,j,tt,it,ht=0,lt=!1,ft=!1,pt=!0;if(typeof P!="function")throw new wi(h);A=Ni(A)||0,fe(I)&&(lt=!!I.leading,ft="maxWait"in I,k=ft?ye(Ni(I.maxWait)||0,A):k,pt="trailing"in I?!!I.trailing:pt);function St(pe){var Qi=z,bn=$;return z=$=i,ht=pe,j=P.apply(bn,Qi),j}function Ot(pe){return ht=pe,tt=Ma(Nt,A),lt?St(pe):j}function Gt(pe){var Qi=pe-it,bn=pe-ht,g0=A-Qi;return ft?be(g0,k-bn):g0}function Lt(pe){var Qi=pe-it,bn=pe-ht;return it===i||Qi>=A||Qi<0||ft&&bn>=k}function Nt(){var pe=Nh();if(Lt(pe))return Vt(pe);tt=Ma(Nt,Gt(pe))}function Vt(pe){return tt=i,pt&&z?St(pe):(z=$=i,j)}function Ti(){tt!==i&&og(tt),ht=0,z=it=$=tt=i}function Ze(){return tt===i?j:Vt(Nh())}function Ci(){var pe=Nh(),Qi=Lt(pe);if(z=arguments,$=this,it=pe,Qi){if(tt===i)return Ot(it);if(ft)return og(tt),tt=Ma(Nt,A),St(it)}return tt===i&&(tt=Ma(Nt,A)),j}return Ci.cancel=Ti,Ci.flush=Ze,Ci}var UR=bt(function(P,A){return Up(P,1,A)}),VR=bt(function(P,A,I){return Up(P,Ni(A)||0,I)});function WR(P){return In(P,R)}function Yh(P,A){if(typeof P!="function"||A!=null&&typeof A!="function")throw new wi(h);var I=function(){var z=arguments,$=A?A.apply(this,z):z[0],k=I.cache;if(k.has($))return k.get($);var j=P.apply(this,z);return I.cache=k.set($,j)||k,j};return I.cache=new(Yh.Cache||Ln),I}Yh.Cache=Ln;function zh(P){if(typeof P!="function")throw new wi(h);return function(){var A=arguments;switch(A.length){case 0:return!P.call(this);case 1:return!P.call(this,A[0]);case 2:return!P.call(this,A[0],A[1]);case 3:return!P.call(this,A[0],A[1],A[2])}return!P.apply(this,A)}}function XR(P){return Zg(2,P)}var HR=FM(function(P,A){A=A.length==1&&Dt(A[0])?oe(A[0],mi(Rt())):oe(Ie(A,1),mi(Rt()));var I=A.length;return bt(function(z){for(var $=-1,k=be(z.length,I);++$<k;)z[$]=A[$].call(this,z[$]);return gi(P,this,z)})}),Rf=bt(function(P,A){var I=kn(A,gr(Rf));return In(P,C,i,A,I)}),qg=bt(function(P,A){var I=kn(A,gr(qg));return In(P,S,i,A,I)}),$R=wn(function(P,A){return In(P,M,i,i,i,A)});function KR(P,A){if(typeof P!="function")throw new wi(h);return A=A===i?A:Bt(A),bt(P,A)}function ZR(P,A){if(typeof P!="function")throw new wi(h);return A=A==null?0:ye(Bt(A),0),bt(function(I){var z=I[A],$=es(I,0,A);return z&&Qn($,z),gi(P,this,$)})}function JR(P,A,I){var z=!0,$=!0;if(typeof P!="function")throw new wi(h);return fe(I)&&(z="leading"in I?!!I.leading:z,$="trailing"in I?!!I.trailing:$),jg(P,A,{leading:z,maxWait:A,trailing:$})}function QR(P){return Kg(P,1)}function kR(P,A){return Rf(ff(A),P)}function jR(){if(!arguments.length)return[];var P=arguments[0];return Dt(P)?P:[P]}function qR(P){return Bi(P,f)}function _R(P,A){return A=typeof A=="function"?A:i,Bi(P,f,A)}function tO(P){return Bi(P,u|f)}function eO(P,A){return A=typeof A=="function"?A:i,Bi(P,u|f,A)}function iO(P,A){return A==null||zp(P,A,Me(A))}function Ji(P,A){return P===A||P!==P&&A!==A}var nO=Ih(qu),sO=Ih(function(P,A){return P>=A}),Gs=$p(function(){return arguments}())?$p:function(P){return ve(P)&&jt.call(P,"callee")&&!Ip.call(P,"callee")},Dt=st.isArray,rO=dp?mi(dp):vM;function qe(P){return P!=null&&Uh(P.length)&&!Bn(P)}function ce(P){return ve(P)&&qe(P)}function aO(P){return P===!0||P===!1||ve(P)&&$e(P)==q}var is=TP||Yf,oO=vp?mi(vp):cM;function hO(P){return ve(P)&&P.nodeType===1&&!Aa(P)}function lO(P){if(P==null)return!0;if(qe(P)&&(Dt(P)||typeof P=="string"||typeof P.splice=="function"||is(P)||mr(P)||Gs(P)))return!P.length;var A=Ne(P);if(A==ut||A==gt)return!P.size;if(Pa(P))return!ef(P).length;for(var I in P)if(jt.call(P,I))return!1;return!0}function uO(P,A){return Ca(P,A)}function fO(P,A,I){I=typeof I=="function"?I:i;var z=I?I(P,A):i;return z===i?Ca(P,A,i,I):!!z}function Of(P){if(!ve(P))return!1;var A=$e(P);return A==rt||A==nt||typeof P.message=="string"&&typeof P.name=="string"&&!Aa(P)}function dO(P){return typeof P=="number"&&Dp(P)}function Bn(P){if(!fe(P))return!1;var A=$e(P);return A==at||A==vt||A==J||A==dt}function _g(P){return typeof P=="number"&&P==Bt(P)}function Uh(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=K}function fe(P){var A=typeof P;return P!=null&&(A=="object"||A=="function")}function ve(P){return P!=null&&typeof P=="object"}var t0=cp?mi(cp):gM;function vO(P,A){return P===A||tf(P,A,xf(A))}function cO(P,A,I){return I=typeof I=="function"?I:i,tf(P,A,xf(A),I)}function pO(P){return e0(P)&&P!=+P}function gO(P){if(_M(P))throw new wt(n);return Kp(P)}function mO(P){return P===null}function xO(P){return P==null}function e0(P){return typeof P=="number"||ve(P)&&$e(P)==ct}function Aa(P){if(!ve(P)||$e(P)!=Tt)return!1;var A=vh(P);if(A===null)return!0;var I=jt.call(A,"constructor")&&A.constructor;return typeof I=="function"&&I instanceof I&&lh.call(I)==cP}var Lf=pp?mi(pp):mM;function yO(P){return _g(P)&&P>=-K&&P<=K}var i0=gp?mi(gp):xM;function Vh(P){return typeof P=="string"||!Dt(P)&&ve(P)&&$e(P)==Pt}function yi(P){return typeof P=="symbol"||ve(P)&&$e(P)==xe}var mr=mp?mi(mp):yM;function TO(P){return P===i}function CO(P){return ve(P)&&Ne(P)==$t}function SO(P){return ve(P)&&$e(P)==Ut}var EO=Ih(nf),PO=Ih(function(P,A){return P<=A});function n0(P){if(!P)return[];if(qe(P))return Vh(P)?Ki(P):je(P);if(va&&P[va])return iP(P[va]());var A=Ne(P),I=A==ut?Xu:A==gt?ah:xr;return I(P)}function Gn(P){if(!P)return P===0?P:0;if(P=Ni(P),P===X||P===-X){var A=P<0?-1:1;return A*Z}return P===P?P:0}function Bt(P){var A=Gn(P),I=A%1;return A===A?I?A-I:A:0}function s0(P){return P?Is(Bt(P),0,w):0}function Ni(P){if(typeof P=="number")return P;if(yi(P))return G;if(fe(P)){var A=typeof P.valueOf=="function"?P.valueOf():P;P=fe(A)?A+"":A}if(typeof P!="string")return P===0?P:+P;P=Ep(P);var I=rE.test(P);return I||oE.test(P)?zE(P.slice(2),I?2:8):sE.test(P)?G:+P}function r0(P){return fn(P,_e(P))}function MO(P){return P?Is(Bt(P),-K,K):P===0?P:0}function Qt(P){return P==null?"":xi(P)}var AO=cr(function(P,A){if(Pa(A)||qe(A)){fn(A,Me(A),P);return}for(var I in A)jt.call(A,I)&&xa(P,I,A[I])}),a0=cr(function(P,A){fn(A,_e(A),P)}),Wh=cr(function(P,A,I,z){fn(A,_e(A),P,z)}),RO=cr(function(P,A,I,z){fn(A,Me(A),P,z)}),OO=wn(Qu);function LO(P,A){var I=vr(P);return A==null?I:Yp(I,A)}var FO=bt(function(P,A){P=Zt(P);var I=-1,z=A.length,$=z>2?A[2]:i;for($&&Ke(A[0],A[1],$)&&(z=1);++I<z;)for(var k=A[I],j=_e(k),tt=-1,it=j.length;++tt<it;){var ht=j[tt],lt=P[ht];(lt===i||Ji(lt,ur[ht])&&!jt.call(P,ht))&&(P[ht]=k[ht])}return P}),IO=bt(function(P){return P.push(i,Eg),gi(o0,i,P)});function wO(P,A){return yp(P,Rt(A,3),un)}function DO(P,A){return yp(P,Rt(A,3),ju)}function BO(P,A){return P==null?P:ku(P,Rt(A,3),_e)}function GO(P,A){return P==null?P:Xp(P,Rt(A,3),_e)}function bO(P,A){return P&&un(P,Rt(A,3))}function NO(P,A){return P&&ju(P,Rt(A,3))}function YO(P){return P==null?[]:Eh(P,Me(P))}function zO(P){return P==null?[]:Eh(P,_e(P))}function Ff(P,A,I){var z=P==null?i:ws(P,A);return z===i?I:z}function UO(P,A){return P!=null&&Ag(P,A,lM)}function If(P,A){return P!=null&&Ag(P,A,uM)}var VO=xg(function(P,A,I){A!=null&&typeof A.toString!="function"&&(A=uh.call(A)),P[A]=I},Df(ti)),WO=xg(function(P,A,I){A!=null&&typeof A.toString!="function"&&(A=uh.call(A)),jt.call(P,A)?P[A].push(I):P[A]=[I]},Rt),XO=bt(Ta);function Me(P){return qe(P)?bp(P):ef(P)}function _e(P){return qe(P)?bp(P,!0):TM(P)}function HO(P,A){var I={};return A=Rt(A,3),un(P,function(z,$,k){Fn(I,A(z,$,k),z)}),I}function $O(P,A){var I={};return A=Rt(A,3),un(P,function(z,$,k){Fn(I,$,A(z,$,k))}),I}var KO=cr(function(P,A,I){Ph(P,A,I)}),o0=cr(function(P,A,I,z){Ph(P,A,I,z)}),ZO=wn(function(P,A){var I={};if(P==null)return I;var z=!1;A=oe(A,function(k){return k=ts(k,P),z||(z=k.length>1),k}),fn(P,gf(P),I),z&&(I=Bi(I,u|c|f,VM));for(var $=A.length;$--;)hf(I,A[$]);return I});function JO(P,A){return h0(P,zh(Rt(A)))}var QO=wn(function(P,A){return P==null?{}:SM(P,A)});function h0(P,A){if(P==null)return{};var I=oe(gf(P),function(z){return[z]});return A=Rt(A),_p(P,I,function(z,$){return A(z,$[0])})}function kO(P,A,I){A=ts(A,P);var z=-1,$=A.length;for($||($=1,P=i);++z<$;){var k=P==null?i:P[dn(A[z])];k===i&&(z=$,k=I),P=Bn(k)?k.call(P):k}return P}function jO(P,A,I){return P==null?P:Sa(P,A,I)}function qO(P,A,I,z){return z=typeof z=="function"?z:i,P==null?P:Sa(P,A,I,z)}var l0=Cg(Me),u0=Cg(_e);function _O(P,A,I){var z=Dt(P),$=z||is(P)||mr(P);if(A=Rt(A,4),I==null){var k=P&&P.constructor;$?I=z?new k:[]:fe(P)?I=Bn(k)?vr(vh(P)):{}:I={}}return($?Ii:un)(P,function(j,tt,it){return A(I,j,tt,it)}),I}function t2(P,A){return P==null?!0:hf(P,A)}function e2(P,A,I){return P==null?P:sg(P,A,ff(I))}function i2(P,A,I,z){return z=typeof z=="function"?z:i,P==null?P:sg(P,A,ff(I),z)}function xr(P){return P==null?[]:Wu(P,Me(P))}function n2(P){return P==null?[]:Wu(P,_e(P))}function s2(P,A,I){return I===i&&(I=A,A=i),I!==i&&(I=Ni(I),I=I===I?I:0),A!==i&&(A=Ni(A),A=A===A?A:0),Is(Ni(P),A,I)}function r2(P,A,I){return A=Gn(A),I===i?(I=A,A=0):I=Gn(I),P=Ni(P),fM(P,A,I)}function a2(P,A,I){if(I&&typeof I!="boolean"&&Ke(P,A,I)&&(A=I=i),I===i&&(typeof A=="boolean"?(I=A,A=i):typeof P=="boolean"&&(I=P,P=i)),P===i&&A===i?(P=0,A=1):(P=Gn(P),A===i?(A=P,P=0):A=Gn(A)),P>A){var z=P;P=A,A=z}if(I||P%1||A%1){var $=Bp();return be(P+$*(A-P+YE("1e-"+(($+"").length-1))),A)}return rf(P,A)}var o2=pr(function(P,A,I){return A=A.toLowerCase(),P+(I?f0(A):A)});function f0(P){return wf(Qt(P).toLowerCase())}function d0(P){return P=Qt(P),P&&P.replace(lE,jE).replace(OE,"")}function h2(P,A,I){P=Qt(P),A=xi(A);var z=P.length;I=I===i?z:Is(Bt(I),0,z);var $=I;return I-=A.length,I>=0&&P.slice(I,$)==A}function l2(P){return P=Qt(P),P&&XS.test(P)?P.replace(Xc,qE):P}function u2(P){return P=Qt(P),P&&QS.test(P)?P.replace(Au,"\\$&"):P}var f2=pr(function(P,A,I){return P+(I?"-":"")+A.toLowerCase()}),d2=pr(function(P,A,I){return P+(I?" ":"")+A.toLowerCase()}),v2=pg("toLowerCase");function c2(P,A,I){P=Qt(P),A=Bt(A);var z=A?hr(P):0;if(!A||z>=A)return P;var $=(A-z)/2;return Fh(mh($),I)+P+Fh(gh($),I)}function p2(P,A,I){P=Qt(P),A=Bt(A);var z=A?hr(P):0;return A&&z<A?P+Fh(A-z,I):P}function g2(P,A,I){P=Qt(P),A=Bt(A);var z=A?hr(P):0;return A&&z<A?Fh(A-z,I)+P:P}function m2(P,A,I){return I||A==null?A=0:A&&(A=+A),PP(Qt(P).replace(Ru,""),A||0)}function x2(P,A,I){return(I?Ke(P,A,I):A===i)?A=1:A=Bt(A),af(Qt(P),A)}function y2(){var P=arguments,A=Qt(P[0]);return P.length<3?A:A.replace(P[1],P[2])}var T2=pr(function(P,A,I){return P+(I?"_":"")+A.toLowerCase()});function C2(P,A,I){return I&&typeof I!="number"&&Ke(P,A,I)&&(A=I=i),I=I===i?w:I>>>0,I?(P=Qt(P),P&&(typeof A=="string"||A!=null&&!Lf(A))&&(A=xi(A),!A&&or(P))?es(Ki(P),0,I):P.split(A,I)):[]}var S2=pr(function(P,A,I){return P+(I?" ":"")+wf(A)});function E2(P,A,I){return P=Qt(P),I=I==null?0:Is(Bt(I),0,P.length),A=xi(A),P.slice(I,I+A.length)==A}function P2(P,A,I){var z=Q.templateSettings;I&&Ke(P,A,I)&&(A=i),P=Qt(P),A=Wh({},A,z,Sg);var $=Wh({},A.imports,z.imports,Sg),k=Me($),j=Wu($,k),tt,it,ht=0,lt=A.interpolate||eh,ft="__p += '",pt=Hu((A.escape||eh).source+"|"+lt.source+"|"+(lt===Hc?nE:eh).source+"|"+(A.evaluate||eh).source+"|$","g"),St="//# sourceURL="+(jt.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++DE+"]")+`
`;P.replace(pt,function(Lt,Nt,Vt,Ti,Ze,Ci){return Vt||(Vt=Ti),ft+=P.slice(ht,Ci).replace(uE,_E),Nt&&(tt=!0,ft+=`' +
__e(`+Nt+`) +
'`),Ze&&(it=!0,ft+=`';
`+Ze+`;
__p += '`),Vt&&(ft+=`' +
((__t = (`+Vt+`)) == null ? '' : __t) +
'`),ht=Ci+Lt.length,Lt}),ft+=`';
`;var Ot=jt.call(A,"variable")&&A.variable;if(!Ot)ft=`with (obj) {
`+ft+`
}
`;else if(eE.test(Ot))throw new wt(r);ft=(it?ft.replace(zS,""):ft).replace(US,"$1").replace(VS,"$1;"),ft="function("+(Ot||"obj")+`) {
`+(Ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(tt?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var Gt=c0(function(){return Kt(k,St+"return "+ft).apply(i,j)});if(Gt.source=ft,Of(Gt))throw Gt;return Gt}function M2(P){return Qt(P).toLowerCase()}function A2(P){return Qt(P).toUpperCase()}function R2(P,A,I){if(P=Qt(P),P&&(I||A===i))return Ep(P);if(!P||!(A=xi(A)))return P;var z=Ki(P),$=Ki(A),k=Pp(z,$),j=Mp(z,$)+1;return es(z,k,j).join("")}function O2(P,A,I){if(P=Qt(P),P&&(I||A===i))return P.slice(0,Rp(P)+1);if(!P||!(A=xi(A)))return P;var z=Ki(P),$=Mp(z,Ki(A))+1;return es(z,0,$).join("")}function L2(P,A,I){if(P=Qt(P),P&&(I||A===i))return P.replace(Ru,"");if(!P||!(A=xi(A)))return P;var z=Ki(P),$=Pp(z,Ki(A));return es(z,$).join("")}function F2(P,A){var I=L,z=O;if(fe(A)){var $="separator"in A?A.separator:$;I="length"in A?Bt(A.length):I,z="omission"in A?xi(A.omission):z}P=Qt(P);var k=P.length;if(or(P)){var j=Ki(P);k=j.length}if(I>=k)return P;var tt=I-hr(z);if(tt<1)return z;var it=j?es(j,0,tt).join(""):P.slice(0,tt);if($===i)return it+z;if(j&&(tt+=it.length-tt),Lf($)){if(P.slice(tt).search($)){var ht,lt=it;for($.global||($=Hu($.source,Qt($c.exec($))+"g")),$.lastIndex=0;ht=$.exec(lt);)var ft=ht.index;it=it.slice(0,ft===i?tt:ft)}}else if(P.indexOf(xi($),tt)!=tt){var pt=it.lastIndexOf($);pt>-1&&(it=it.slice(0,pt))}return it+z}function I2(P){return P=Qt(P),P&&WS.test(P)?P.replace(Wc,aP):P}var w2=pr(function(P,A,I){return P+(I?" ":"")+A.toUpperCase()}),wf=pg("toUpperCase");function v0(P,A,I){return P=Qt(P),A=I?i:A,A===i?eP(P)?lP(P):KE(P):P.match(A)||[]}var c0=bt(function(P,A){try{return gi(P,i,A)}catch(I){return Of(I)?I:new wt(I)}}),D2=wn(function(P,A){return Ii(A,function(I){I=dn(I),Fn(P,I,Af(P[I],P))}),P});function B2(P){var A=P==null?0:P.length,I=Rt();return P=A?oe(P,function(z){if(typeof z[1]!="function")throw new wi(h);return[I(z[0]),z[1]]}):[],bt(function(z){for(var $=-1;++$<A;){var k=P[$];if(gi(k[0],this,z))return gi(k[1],this,z)}})}function G2(P){return aM(Bi(P,u))}function Df(P){return function(){return P}}function b2(P,A){return P==null||P!==P?A:P}var N2=mg(),Y2=mg(!0);function ti(P){return P}function Bf(P){return Zp(typeof P=="function"?P:Bi(P,u))}function z2(P){return Qp(Bi(P,u))}function U2(P,A){return kp(P,Bi(A,u))}var V2=bt(function(P,A){return function(I){return Ta(I,P,A)}}),W2=bt(function(P,A){return function(I){return Ta(P,I,A)}});function Gf(P,A,I){var z=Me(A),$=Eh(A,z);I==null&&!(fe(A)&&($.length||!z.length))&&(I=A,A=P,P=this,$=Eh(A,Me(A)));var k=!(fe(I)&&"chain"in I)||!!I.chain,j=Bn(P);return Ii($,function(tt){var it=A[tt];P[tt]=it,j&&(P.prototype[tt]=function(){var ht=this.__chain__;if(k||ht){var lt=P(this.__wrapped__),ft=lt.__actions__=je(this.__actions__);return ft.push({func:it,args:arguments,thisArg:P}),lt.__chain__=ht,lt}return it.apply(P,Qn([this.value()],arguments))})}),P}function X2(){return Fe._===this&&(Fe._=pP),this}function bf(){}function H2(P){return P=Bt(P),bt(function(A){return jp(A,P)})}var $2=vf(oe),K2=vf(xp),Z2=vf(Nu);function p0(P){return Tf(P)?Yu(dn(P)):EM(P)}function J2(P){return function(A){return P==null?i:ws(P,A)}}var Q2=yg(),k2=yg(!0);function Nf(){return[]}function Yf(){return!1}function j2(){return{}}function q2(){return""}function _2(){return!0}function tL(P,A){if(P=Bt(P),P<1||P>K)return[];var I=w,z=be(P,w);A=Rt(A),P-=w;for(var $=Vu(z,A);++I<P;)A(I);return $}function eL(P){return Dt(P)?oe(P,dn):yi(P)?[P]:je(Gg(Qt(P)))}function iL(P){var A=++vP;return Qt(P)+A}var nL=Lh(function(P,A){return P+A},0),sL=cf("ceil"),rL=Lh(function(P,A){return P/A},1),aL=cf("floor");function oL(P){return P&&P.length?Sh(P,ti,qu):i}function hL(P,A){return P&&P.length?Sh(P,Rt(A,2),qu):i}function lL(P){return Cp(P,ti)}function uL(P,A){return Cp(P,Rt(A,2))}function fL(P){return P&&P.length?Sh(P,ti,nf):i}function dL(P,A){return P&&P.length?Sh(P,Rt(A,2),nf):i}var vL=Lh(function(P,A){return P*A},1),cL=cf("round"),pL=Lh(function(P,A){return P-A},0);function gL(P){return P&&P.length?Uu(P,ti):0}function mL(P,A){return P&&P.length?Uu(P,Rt(A,2)):0}return Q.after=zR,Q.ary=Kg,Q.assign=AO,Q.assignIn=a0,Q.assignInWith=Wh,Q.assignWith=RO,Q.at=OO,Q.before=Zg,Q.bind=Af,Q.bindAll=D2,Q.bindKey=Jg,Q.castArray=jR,Q.chain=Xg,Q.chunk=aA,Q.compact=oA,Q.concat=hA,Q.cond=B2,Q.conforms=G2,Q.constant=Df,Q.countBy=gR,Q.create=LO,Q.curry=Qg,Q.curryRight=kg,Q.debounce=jg,Q.defaults=FO,Q.defaultsDeep=IO,Q.defer=UR,Q.delay=VR,Q.difference=lA,Q.differenceBy=uA,Q.differenceWith=fA,Q.drop=dA,Q.dropRight=vA,Q.dropRightWhile=cA,Q.dropWhile=pA,Q.fill=gA,Q.filter=xR,Q.flatMap=CR,Q.flatMapDeep=SR,Q.flatMapDepth=ER,Q.flatten=zg,Q.flattenDeep=mA,Q.flattenDepth=xA,Q.flip=WR,Q.flow=N2,Q.flowRight=Y2,Q.fromPairs=yA,Q.functions=YO,Q.functionsIn=zO,Q.groupBy=PR,Q.initial=CA,Q.intersection=SA,Q.intersectionBy=EA,Q.intersectionWith=PA,Q.invert=VO,Q.invertBy=WO,Q.invokeMap=AR,Q.iteratee=Bf,Q.keyBy=RR,Q.keys=Me,Q.keysIn=_e,Q.map=bh,Q.mapKeys=HO,Q.mapValues=$O,Q.matches=z2,Q.matchesProperty=U2,Q.memoize=Yh,Q.merge=KO,Q.mergeWith=o0,Q.method=V2,Q.methodOf=W2,Q.mixin=Gf,Q.negate=zh,Q.nthArg=H2,Q.omit=ZO,Q.omitBy=JO,Q.once=XR,Q.orderBy=OR,Q.over=$2,Q.overArgs=HR,Q.overEvery=K2,Q.overSome=Z2,Q.partial=Rf,Q.partialRight=qg,Q.partition=LR,Q.pick=QO,Q.pickBy=h0,Q.property=p0,Q.propertyOf=J2,Q.pull=OA,Q.pullAll=Vg,Q.pullAllBy=LA,Q.pullAllWith=FA,Q.pullAt=IA,Q.range=Q2,Q.rangeRight=k2,Q.rearg=$R,Q.reject=wR,Q.remove=wA,Q.rest=KR,Q.reverse=Pf,Q.sampleSize=BR,Q.set=jO,Q.setWith=qO,Q.shuffle=GR,Q.slice=DA,Q.sortBy=YR,Q.sortedUniq=UA,Q.sortedUniqBy=VA,Q.split=C2,Q.spread=ZR,Q.tail=WA,Q.take=XA,Q.takeRight=HA,Q.takeRightWhile=$A,Q.takeWhile=KA,Q.tap=oR,Q.throttle=JR,Q.thru=Gh,Q.toArray=n0,Q.toPairs=l0,Q.toPairsIn=u0,Q.toPath=eL,Q.toPlainObject=r0,Q.transform=_O,Q.unary=QR,Q.union=ZA,Q.unionBy=JA,Q.unionWith=QA,Q.uniq=kA,Q.uniqBy=jA,Q.uniqWith=qA,Q.unset=t2,Q.unzip=Mf,Q.unzipWith=Wg,Q.update=e2,Q.updateWith=i2,Q.values=xr,Q.valuesIn=n2,Q.without=_A,Q.words=v0,Q.wrap=kR,Q.xor=tR,Q.xorBy=eR,Q.xorWith=iR,Q.zip=nR,Q.zipObject=sR,Q.zipObjectDeep=rR,Q.zipWith=aR,Q.entries=l0,Q.entriesIn=u0,Q.extend=a0,Q.extendWith=Wh,Gf(Q,Q),Q.add=nL,Q.attempt=c0,Q.camelCase=o2,Q.capitalize=f0,Q.ceil=sL,Q.clamp=s2,Q.clone=qR,Q.cloneDeep=tO,Q.cloneDeepWith=eO,Q.cloneWith=_R,Q.conformsTo=iO,Q.deburr=d0,Q.defaultTo=b2,Q.divide=rL,Q.endsWith=h2,Q.eq=Ji,Q.escape=l2,Q.escapeRegExp=u2,Q.every=mR,Q.find=yR,Q.findIndex=Ng,Q.findKey=wO,Q.findLast=TR,Q.findLastIndex=Yg,Q.findLastKey=DO,Q.floor=aL,Q.forEach=Hg,Q.forEachRight=$g,Q.forIn=BO,Q.forInRight=GO,Q.forOwn=bO,Q.forOwnRight=NO,Q.get=Ff,Q.gt=nO,Q.gte=sO,Q.has=UO,Q.hasIn=If,Q.head=Ug,Q.identity=ti,Q.includes=MR,Q.indexOf=TA,Q.inRange=r2,Q.invoke=XO,Q.isArguments=Gs,Q.isArray=Dt,Q.isArrayBuffer=rO,Q.isArrayLike=qe,Q.isArrayLikeObject=ce,Q.isBoolean=aO,Q.isBuffer=is,Q.isDate=oO,Q.isElement=hO,Q.isEmpty=lO,Q.isEqual=uO,Q.isEqualWith=fO,Q.isError=Of,Q.isFinite=dO,Q.isFunction=Bn,Q.isInteger=_g,Q.isLength=Uh,Q.isMap=t0,Q.isMatch=vO,Q.isMatchWith=cO,Q.isNaN=pO,Q.isNative=gO,Q.isNil=xO,Q.isNull=mO,Q.isNumber=e0,Q.isObject=fe,Q.isObjectLike=ve,Q.isPlainObject=Aa,Q.isRegExp=Lf,Q.isSafeInteger=yO,Q.isSet=i0,Q.isString=Vh,Q.isSymbol=yi,Q.isTypedArray=mr,Q.isUndefined=TO,Q.isWeakMap=CO,Q.isWeakSet=SO,Q.join=MA,Q.kebabCase=f2,Q.last=bi,Q.lastIndexOf=AA,Q.lowerCase=d2,Q.lowerFirst=v2,Q.lt=EO,Q.lte=PO,Q.max=oL,Q.maxBy=hL,Q.mean=lL,Q.meanBy=uL,Q.min=fL,Q.minBy=dL,Q.stubArray=Nf,Q.stubFalse=Yf,Q.stubObject=j2,Q.stubString=q2,Q.stubTrue=_2,Q.multiply=vL,Q.nth=RA,Q.noConflict=X2,Q.noop=bf,Q.now=Nh,Q.pad=c2,Q.padEnd=p2,Q.padStart=g2,Q.parseInt=m2,Q.random=a2,Q.reduce=FR,Q.reduceRight=IR,Q.repeat=x2,Q.replace=y2,Q.result=kO,Q.round=cL,Q.runInContext=et,Q.sample=DR,Q.size=bR,Q.snakeCase=T2,Q.some=NR,Q.sortedIndex=BA,Q.sortedIndexBy=GA,Q.sortedIndexOf=bA,Q.sortedLastIndex=NA,Q.sortedLastIndexBy=YA,Q.sortedLastIndexOf=zA,Q.startCase=S2,Q.startsWith=E2,Q.subtract=pL,Q.sum=gL,Q.sumBy=mL,Q.template=P2,Q.times=tL,Q.toFinite=Gn,Q.toInteger=Bt,Q.toLength=s0,Q.toLower=M2,Q.toNumber=Ni,Q.toSafeInteger=MO,Q.toString=Qt,Q.toUpper=A2,Q.trim=R2,Q.trimEnd=O2,Q.trimStart=L2,Q.truncate=F2,Q.unescape=I2,Q.uniqueId=iL,Q.upperCase=w2,Q.upperFirst=wf,Q.each=Hg,Q.eachRight=$g,Q.first=Ug,Gf(Q,function(){var P={};return un(Q,function(A,I){jt.call(Q.prototype,I)||(P[I]=A)}),P}(),{chain:!1}),Q.VERSION=d,Ii(["bind","bindKey","curry","curryRight","partial","partialRight"],function(P){Q[P].placeholder=Q}),Ii(["drop","take"],function(P,A){Yt.prototype[P]=function(I){I=I===i?1:ye(Bt(I),0);var z=this.__filtered__&&!A?new Yt(this):this.clone();return z.__filtered__?z.__takeCount__=be(I,z.__takeCount__):z.__views__.push({size:be(I,w),type:P+(z.__dir__<0?"Right":"")}),z},Yt.prototype[P+"Right"]=function(I){return this.reverse()[P](I).reverse()}}),Ii(["filter","map","takeWhile"],function(P,A){var I=A+1,z=I==B||I==V;Yt.prototype[P]=function($){var k=this.clone();return k.__iteratees__.push({iteratee:Rt($,3),type:I}),k.__filtered__=k.__filtered__||z,k}}),Ii(["head","last"],function(P,A){var I="take"+(A?"Right":"");Yt.prototype[P]=function(){return this[I](1).value()[0]}}),Ii(["initial","tail"],function(P,A){var I="drop"+(A?"":"Right");Yt.prototype[P]=function(){return this.__filtered__?new Yt(this):this[I](1)}}),Yt.prototype.compact=function(){return this.filter(ti)},Yt.prototype.find=function(P){return this.filter(P).head()},Yt.prototype.findLast=function(P){return this.reverse().find(P)},Yt.prototype.invokeMap=bt(function(P,A){return typeof P=="function"?new Yt(this):this.map(function(I){return Ta(I,P,A)})}),Yt.prototype.reject=function(P){return this.filter(zh(Rt(P)))},Yt.prototype.slice=function(P,A){P=Bt(P);var I=this;return I.__filtered__&&(P>0||A<0)?new Yt(I):(P<0?I=I.takeRight(-P):P&&(I=I.drop(P)),A!==i&&(A=Bt(A),I=A<0?I.dropRight(-A):I.take(A-P)),I)},Yt.prototype.takeRightWhile=function(P){return this.reverse().takeWhile(P).reverse()},Yt.prototype.toArray=function(){return this.take(w)},un(Yt.prototype,function(P,A){var I=/^(?:filter|find|map|reject)|While$/.test(A),z=/^(?:head|last)$/.test(A),$=Q[z?"take"+(A=="last"?"Right":""):A],k=z||/^find/.test(A);!$||(Q.prototype[A]=function(){var j=this.__wrapped__,tt=z?[1]:arguments,it=j instanceof Yt,ht=tt[0],lt=it||Dt(j),ft=function(Nt){var Vt=$.apply(Q,Qn([Nt],tt));return z&&pt?Vt[0]:Vt};lt&&I&&typeof ht=="function"&&ht.length!=1&&(it=lt=!1);var pt=this.__chain__,St=!!this.__actions__.length,Ot=k&&!pt,Gt=it&&!St;if(!k&&lt){j=Gt?j:new Yt(this);var Lt=P.apply(j,tt);return Lt.__actions__.push({func:Gh,args:[ft],thisArg:i}),new Di(Lt,pt)}return Ot&&Gt?P.apply(this,tt):(Lt=this.thru(ft),Ot?z?Lt.value()[0]:Lt.value():Lt)})}),Ii(["pop","push","shift","sort","splice","unshift"],function(P){var A=oh[P],I=/^(?:push|sort|unshift)$/.test(P)?"tap":"thru",z=/^(?:pop|shift)$/.test(P);Q.prototype[P]=function(){var $=arguments;if(z&&!this.__chain__){var k=this.value();return A.apply(Dt(k)?k:[],$)}return this[I](function(j){return A.apply(Dt(j)?j:[],$)})}}),un(Yt.prototype,function(P,A){var I=Q[A];if(I){var z=I.name+"";jt.call(dr,z)||(dr[z]=[]),dr[z].push({name:A,func:I})}}),dr[Oh(i,m).name]=[{name:"wrapper",func:i}],Yt.prototype.clone=IP,Yt.prototype.reverse=wP,Yt.prototype.value=DP,Q.prototype.at=hR,Q.prototype.chain=lR,Q.prototype.commit=uR,Q.prototype.next=fR,Q.prototype.plant=vR,Q.prototype.reverse=cR,Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=pR,Q.prototype.first=Q.prototype.head,va&&(Q.prototype[va]=dR),Q},lr=uP();Rs?((Rs.exports=lr)._=lr,Du._=lr):Fe._=lr}).call(ns)}),NS=C9.isEqual;var Uc=class extends Phaser.Scene{constructor(){super({key:"result",active:!1});this.FONT_SIZE=30,this.COLOR_PRIMARY=5125166,this.COLOR_LIGHT=8085079,this.COLOR_DARK=2493956}async create(){var n,h;let t=new Si(this,0,0,20,10,10,this.COLOR_DARK);this.add.existing(t);let i=new Si(this,0,0,0,0,13,this.COLOR_LIGHT);this.add.existing(i),this.panel=new ir(this,{x:400,y:780,width:780,scrollMode:1,panel:{child:this.createScrollPanel()},slider:{track:t,thumb:i}}).setOrigin(.5,1).layout(),this.add.existing(this.panel),this.waitingText=this.add.bitmapText(this.cameras.main.centerX,40,"gothic","Waiting for results",30).setTintFill(0).setOrigin(.5).setDepth(2);let d=0,e=await Bc((n=As)!=null?n:"");this.session=await e.json(),((h=this.session)==null?void 0:h.done)?this.waitingText.setText("Results!"):(this.resultRefreshTimer=this.time.addEvent({delay:3*1e3,callback:this.checkForUpdatedSession,callbackScope:this,loop:!0,startAt:2.5*1e3}),this.waitTextTimer=this.time.addEvent({delay:1*1e3,callback:()=>{d=(d+1)%4,this.waitingText.setText(`Waiting for results${".".repeat(d)}`)},loop:!0,callbackScope:this})),this.displayScores()}createScoreRow(t,i,d){let e=d!=null?d:new Si(this,0,0,20,20,0);this.add.existing(e);let n=t!=null?t:this.add.text(0,0,"").setFontSize(this.FONT_SIZE),h=i!=null?i:this.add.text(0,0,"").setFontSize(this.FONT_SIZE),r=new te(this,{width:260,height:e.displayHeight,orientation:"x"}).addBackground(e).add(n,0,"center",{left:10},!1,"word").addSpace().add(h,0,"center",{right:10},!1,"score");return this.add.existing(r),r}createScoreCard(t,i,d){let e=new Si(this,0,0,300,600,15,this.COLOR_PRIMARY);this.add.existing(e);let n=new Si(this,0,0,20,40,0,this.COLOR_DARK);return this.add.existing(n),new ys(this,{x:0,y:0,width:e.displayWidth,height:e.displayHeight,scrollMode:0,background:e,header:this.createScoreRow(this.add.text(0,0,t).setFontSize(this.FONT_SIZE).setStroke("white",1),this.add.text(0,0,i).setFontSize(this.FONT_SIZE).setStroke("white",1),n),table:{cellHeight:30,columns:1,mask:{padding:2},reuseCellContainer:!0},space:{left:20,right:20,top:20,bottom:20,table:10,header:10},createCellContainerCallback:(r,o)=>{let l=r.item;return o?console.log(r.index+": reuse cell-container"):(o=this.createScoreRow(),console.log(r.index+": create new cell-container")),o.getElement("word").setText(l.word),o.getElement("score").setText(l.score),o},items:d!=null?d:[]})}createScrollPanel(){let t=new te(this,{orientation:"x",space:{item:50,top:20,bottom:20}});return this.add.existing(t),t}async checkForUpdatedSession(){var d;let i=await(await Bc((d=As)!=null?d:"")).json();if(!this.session){console.error("Session not initialized yet!");return}NS(i.scoredUsers,this.session.scoredUsers)||this.scene.restart()}displayScores(){var t,i;if(!this.session){console.error("Session not initialized yet!");return}for(let d of Object.values(this.session.scoredUsers)){let e=d.words.map(n=>({word:n,score:Pu(n).toString()})).sort(this.sortWordScores);this.panel.getElement("panel").add(this.createScoreCard(d.name,(i=(t=d.score)==null?void 0:t.toString())!=null?i:"waiting...",e)),this.panel.layout()}}sortWordScores(t,i){var n,h;let d=(n=parseInt(t.score))!=null?n:Number.MIN_SAFE_INTEGER,e=(h=parseInt(i.score))!=null?h:Number.MIN_SAFE_INTEGER;return d!==e?e-d:t.word.localeCompare(i.word)}},YS=Uc;var Rn=!0,Nc=16711680,th=65280,Vc=new URLSearchParams(window.location.search),As=Vc.get("session"),Gc=Vc.get("user"),S9=Vc.get("spectate"),Yc=JSON.parse(S9),E9={type:bs.AUTO,scale:{mode:bs.Scale.FIT,autoCenter:bs.Scale.CENTER_BOTH,autoRound:!0,width:800,height:800},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:[IS,GS,bS,YS],backgroundColor:"0xffffff",plugins:{scene:[{key:"rexUI",plugin:FS,mapping:"rexUI"}]}},P9=new bs.Game(E9);export{Nc as BAD_COLOR,Rn as DEBUG,th as GOOD_COLOR,Yc as IS_SPECTATE,As as SESSION_ID,Gc as USER_ID,P9 as default};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/
/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/
